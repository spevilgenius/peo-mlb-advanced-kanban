(function polyfill() {
  const relList = document.createElement("link").relList;
  if (relList && relList.supports && relList.supports("modulepreload")) {
    return;
  }
  for (const link of document.querySelectorAll('link[rel="modulepreload"]')) {
    processPreload(link);
  }
  new MutationObserver((mutations) => {
    for (const mutation of mutations) {
      if (mutation.type !== "childList") {
        continue;
      }
      for (const node of mutation.addedNodes) {
        if (node.tagName === "LINK" && node.rel === "modulepreload")
          processPreload(node);
      }
    }
  }).observe(document, { childList: true, subtree: true });
  function getFetchOpts(link) {
    const fetchOpts = {};
    if (link.integrity)
      fetchOpts.integrity = link.integrity;
    if (link.referrerPolicy)
      fetchOpts.referrerPolicy = link.referrerPolicy;
    if (link.crossOrigin === "use-credentials")
      fetchOpts.credentials = "include";
    else if (link.crossOrigin === "anonymous")
      fetchOpts.credentials = "omit";
    else
      fetchOpts.credentials = "same-origin";
    return fetchOpts;
  }
  function processPreload(link) {
    if (link.ep)
      return;
    link.ep = true;
    const fetchOpts = getFetchOpts(link);
    fetch(link.href, fetchOpts);
  }
})();
function makeMap(str, expectsLowerCase) {
  const map = /* @__PURE__ */ Object.create(null);
  const list = str.split(",");
  for (let i = 0; i < list.length; i++) {
    map[list[i]] = true;
  }
  return expectsLowerCase ? (val) => !!map[val.toLowerCase()] : (val) => !!map[val];
}
const GLOBALS_WHITE_LISTED = "Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt";
const isGloballyWhitelisted = /* @__PURE__ */ makeMap(GLOBALS_WHITE_LISTED);
function normalizeStyle(value) {
  if (isArray$1(value)) {
    const res = {};
    for (let i = 0; i < value.length; i++) {
      const item = value[i];
      const normalized = isString$1(item) ? parseStringStyle(item) : normalizeStyle(item);
      if (normalized) {
        for (const key in normalized) {
          res[key] = normalized[key];
        }
      }
    }
    return res;
  } else if (isString$1(value)) {
    return value;
  } else if (isObject$2(value)) {
    return value;
  }
}
const listDelimiterRE = /;(?![^(]*\))/g;
const propertyDelimiterRE = /:([^]+)/;
const styleCommentRE = /\/\*.*?\*\//gs;
function parseStringStyle(cssText) {
  const ret = {};
  cssText.replace(styleCommentRE, "").split(listDelimiterRE).forEach((item) => {
    if (item) {
      const tmp = item.split(propertyDelimiterRE);
      tmp.length > 1 && (ret[tmp[0].trim()] = tmp[1].trim());
    }
  });
  return ret;
}
function normalizeClass(value) {
  let res = "";
  if (isString$1(value)) {
    res = value;
  } else if (isArray$1(value)) {
    for (let i = 0; i < value.length; i++) {
      const normalized = normalizeClass(value[i]);
      if (normalized) {
        res += normalized + " ";
      }
    }
  } else if (isObject$2(value)) {
    for (const name in value) {
      if (value[name]) {
        res += name + " ";
      }
    }
  }
  return res.trim();
}
function normalizeProps(props2) {
  if (!props2)
    return null;
  let { class: klass, style } = props2;
  if (klass && !isString$1(klass)) {
    props2.class = normalizeClass(klass);
  }
  if (style) {
    props2.style = normalizeStyle(style);
  }
  return props2;
}
const specialBooleanAttrs = `itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly`;
const isSpecialBooleanAttr = /* @__PURE__ */ makeMap(specialBooleanAttrs);
function includeBooleanAttr(value) {
  return !!value || value === "";
}
function looseCompareArrays(a, b) {
  if (a.length !== b.length)
    return false;
  let equal = true;
  for (let i = 0; equal && i < a.length; i++) {
    equal = looseEqual(a[i], b[i]);
  }
  return equal;
}
function looseEqual(a, b) {
  if (a === b)
    return true;
  let aValidType = isDate$1(a);
  let bValidType = isDate$1(b);
  if (aValidType || bValidType) {
    return aValidType && bValidType ? a.getTime() === b.getTime() : false;
  }
  aValidType = isSymbol(a);
  bValidType = isSymbol(b);
  if (aValidType || bValidType) {
    return a === b;
  }
  aValidType = isArray$1(a);
  bValidType = isArray$1(b);
  if (aValidType || bValidType) {
    return aValidType && bValidType ? looseCompareArrays(a, b) : false;
  }
  aValidType = isObject$2(a);
  bValidType = isObject$2(b);
  if (aValidType || bValidType) {
    if (!aValidType || !bValidType) {
      return false;
    }
    const aKeysCount = Object.keys(a).length;
    const bKeysCount = Object.keys(b).length;
    if (aKeysCount !== bKeysCount) {
      return false;
    }
    for (const key in a) {
      const aHasKey = a.hasOwnProperty(key);
      const bHasKey = b.hasOwnProperty(key);
      if (aHasKey && !bHasKey || !aHasKey && bHasKey || !looseEqual(a[key], b[key])) {
        return false;
      }
    }
  }
  return String(a) === String(b);
}
function looseIndexOf(arr, val) {
  return arr.findIndex((item) => looseEqual(item, val));
}
const toDisplayString = (val) => {
  return isString$1(val) ? val : val == null ? "" : isArray$1(val) || isObject$2(val) && (val.toString === objectToString || !isFunction$1(val.toString)) ? JSON.stringify(val, replacer, 2) : String(val);
};
const replacer = (_key, val) => {
  if (val && val.__v_isRef) {
    return replacer(_key, val.value);
  } else if (isMap(val)) {
    return {
      [`Map(${val.size})`]: [...val.entries()].reduce((entries, [key, val2]) => {
        entries[`${key} =>`] = val2;
        return entries;
      }, {})
    };
  } else if (isSet(val)) {
    return {
      [`Set(${val.size})`]: [...val.values()]
    };
  } else if (isObject$2(val) && !isArray$1(val) && !isPlainObject$1(val)) {
    return String(val);
  }
  return val;
};
const EMPTY_OBJ = {};
const EMPTY_ARR = [];
const NOOP = () => {
};
const NO = () => false;
const onRE = /^on[^a-z]/;
const isOn = (key) => onRE.test(key);
const isModelListener = (key) => key.startsWith("onUpdate:");
const extend$2 = Object.assign;
const remove$1 = (arr, el) => {
  const i = arr.indexOf(el);
  if (i > -1) {
    arr.splice(i, 1);
  }
};
const hasOwnProperty$2 = Object.prototype.hasOwnProperty;
const hasOwn = (val, key) => hasOwnProperty$2.call(val, key);
const isArray$1 = Array.isArray;
const isMap = (val) => toTypeString(val) === "[object Map]";
const isSet = (val) => toTypeString(val) === "[object Set]";
const isDate$1 = (val) => toTypeString(val) === "[object Date]";
const isRegExp$1 = (val) => toTypeString(val) === "[object RegExp]";
const isFunction$1 = (val) => typeof val === "function";
const isString$1 = (val) => typeof val === "string";
const isSymbol = (val) => typeof val === "symbol";
const isObject$2 = (val) => val !== null && typeof val === "object";
const isPromise = (val) => {
  return isObject$2(val) && isFunction$1(val.then) && isFunction$1(val.catch);
};
const objectToString = Object.prototype.toString;
const toTypeString = (value) => objectToString.call(value);
const toRawType = (value) => {
  return toTypeString(value).slice(8, -1);
};
const isPlainObject$1 = (val) => toTypeString(val) === "[object Object]";
const isIntegerKey = (key) => isString$1(key) && key !== "NaN" && key[0] !== "-" && "" + parseInt(key, 10) === key;
const isReservedProp = /* @__PURE__ */ makeMap(
  // the leading comma is intentional so empty string "" is also included
  ",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"
);
const cacheStringFunction = (fn) => {
  const cache = /* @__PURE__ */ Object.create(null);
  return (str) => {
    const hit = cache[str];
    return hit || (cache[str] = fn(str));
  };
};
const camelizeRE = /-(\w)/g;
const camelize = cacheStringFunction((str) => {
  return str.replace(camelizeRE, (_, c) => c ? c.toUpperCase() : "");
});
const hyphenateRE = /\B([A-Z])/g;
const hyphenate = cacheStringFunction((str) => str.replace(hyphenateRE, "-$1").toLowerCase());
const capitalize = cacheStringFunction((str) => str.charAt(0).toUpperCase() + str.slice(1));
const toHandlerKey = cacheStringFunction((str) => str ? `on${capitalize(str)}` : ``);
const hasChanged = (value, oldValue) => !Object.is(value, oldValue);
const invokeArrayFns = (fns, arg) => {
  for (let i = 0; i < fns.length; i++) {
    fns[i](arg);
  }
};
const def = (obj, key, value) => {
  Object.defineProperty(obj, key, {
    configurable: true,
    enumerable: false,
    value
  });
};
const looseToNumber = (val) => {
  const n = parseFloat(val);
  return isNaN(n) ? val : n;
};
const toNumber = (val) => {
  const n = isString$1(val) ? Number(val) : NaN;
  return isNaN(n) ? val : n;
};
let _globalThis;
const getGlobalThis = () => {
  return _globalThis || (_globalThis = typeof globalThis !== "undefined" ? globalThis : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : typeof global !== "undefined" ? global : {});
};
let activeEffectScope;
class EffectScope {
  constructor(detached = false) {
    this.detached = detached;
    this._active = true;
    this.effects = [];
    this.cleanups = [];
    this.parent = activeEffectScope;
    if (!detached && activeEffectScope) {
      this.index = (activeEffectScope.scopes || (activeEffectScope.scopes = [])).push(this) - 1;
    }
  }
  get active() {
    return this._active;
  }
  run(fn) {
    if (this._active) {
      const currentEffectScope = activeEffectScope;
      try {
        activeEffectScope = this;
        return fn();
      } finally {
        activeEffectScope = currentEffectScope;
      }
    }
  }
  /**
   * This should only be called on non-detached scopes
   * @internal
   */
  on() {
    activeEffectScope = this;
  }
  /**
   * This should only be called on non-detached scopes
   * @internal
   */
  off() {
    activeEffectScope = this.parent;
  }
  stop(fromParent) {
    if (this._active) {
      let i, l;
      for (i = 0, l = this.effects.length; i < l; i++) {
        this.effects[i].stop();
      }
      for (i = 0, l = this.cleanups.length; i < l; i++) {
        this.cleanups[i]();
      }
      if (this.scopes) {
        for (i = 0, l = this.scopes.length; i < l; i++) {
          this.scopes[i].stop(true);
        }
      }
      if (!this.detached && this.parent && !fromParent) {
        const last = this.parent.scopes.pop();
        if (last && last !== this) {
          this.parent.scopes[this.index] = last;
          last.index = this.index;
        }
      }
      this.parent = void 0;
      this._active = false;
    }
  }
}
function effectScope(detached) {
  return new EffectScope(detached);
}
function recordEffectScope(effect2, scope = activeEffectScope) {
  if (scope && scope.active) {
    scope.effects.push(effect2);
  }
}
function getCurrentScope() {
  return activeEffectScope;
}
function onScopeDispose(fn) {
  if (activeEffectScope) {
    activeEffectScope.cleanups.push(fn);
  }
}
const createDep = (effects) => {
  const dep = new Set(effects);
  dep.w = 0;
  dep.n = 0;
  return dep;
};
const wasTracked = (dep) => (dep.w & trackOpBit) > 0;
const newTracked = (dep) => (dep.n & trackOpBit) > 0;
const initDepMarkers = ({ deps }) => {
  if (deps.length) {
    for (let i = 0; i < deps.length; i++) {
      deps[i].w |= trackOpBit;
    }
  }
};
const finalizeDepMarkers = (effect2) => {
  const { deps } = effect2;
  if (deps.length) {
    let ptr = 0;
    for (let i = 0; i < deps.length; i++) {
      const dep = deps[i];
      if (wasTracked(dep) && !newTracked(dep)) {
        dep.delete(effect2);
      } else {
        deps[ptr++] = dep;
      }
      dep.w &= ~trackOpBit;
      dep.n &= ~trackOpBit;
    }
    deps.length = ptr;
  }
};
const targetMap = /* @__PURE__ */ new WeakMap();
let effectTrackDepth = 0;
let trackOpBit = 1;
const maxMarkerBits = 30;
let activeEffect;
const ITERATE_KEY = Symbol("");
const MAP_KEY_ITERATE_KEY = Symbol("");
class ReactiveEffect {
  constructor(fn, scheduler = null, scope) {
    this.fn = fn;
    this.scheduler = scheduler;
    this.active = true;
    this.deps = [];
    this.parent = void 0;
    recordEffectScope(this, scope);
  }
  run() {
    if (!this.active) {
      return this.fn();
    }
    let parent = activeEffect;
    let lastShouldTrack = shouldTrack;
    while (parent) {
      if (parent === this) {
        return;
      }
      parent = parent.parent;
    }
    try {
      this.parent = activeEffect;
      activeEffect = this;
      shouldTrack = true;
      trackOpBit = 1 << ++effectTrackDepth;
      if (effectTrackDepth <= maxMarkerBits) {
        initDepMarkers(this);
      } else {
        cleanupEffect(this);
      }
      return this.fn();
    } finally {
      if (effectTrackDepth <= maxMarkerBits) {
        finalizeDepMarkers(this);
      }
      trackOpBit = 1 << --effectTrackDepth;
      activeEffect = this.parent;
      shouldTrack = lastShouldTrack;
      this.parent = void 0;
      if (this.deferStop) {
        this.stop();
      }
    }
  }
  stop() {
    if (activeEffect === this) {
      this.deferStop = true;
    } else if (this.active) {
      cleanupEffect(this);
      if (this.onStop) {
        this.onStop();
      }
      this.active = false;
    }
  }
}
function cleanupEffect(effect2) {
  const { deps } = effect2;
  if (deps.length) {
    for (let i = 0; i < deps.length; i++) {
      deps[i].delete(effect2);
    }
    deps.length = 0;
  }
}
function effect(fn, options) {
  if (fn.effect) {
    fn = fn.effect.fn;
  }
  const _effect = new ReactiveEffect(fn);
  if (options) {
    extend$2(_effect, options);
    if (options.scope)
      recordEffectScope(_effect, options.scope);
  }
  if (!options || !options.lazy) {
    _effect.run();
  }
  const runner = _effect.run.bind(_effect);
  runner.effect = _effect;
  return runner;
}
function stop(runner) {
  runner.effect.stop();
}
let shouldTrack = true;
const trackStack = [];
function pauseTracking() {
  trackStack.push(shouldTrack);
  shouldTrack = false;
}
function resetTracking() {
  const last = trackStack.pop();
  shouldTrack = last === void 0 ? true : last;
}
function track(target, type, key) {
  if (shouldTrack && activeEffect) {
    let depsMap = targetMap.get(target);
    if (!depsMap) {
      targetMap.set(target, depsMap = /* @__PURE__ */ new Map());
    }
    let dep = depsMap.get(key);
    if (!dep) {
      depsMap.set(key, dep = createDep());
    }
    trackEffects(dep);
  }
}
function trackEffects(dep, debuggerEventExtraInfo) {
  let shouldTrack2 = false;
  if (effectTrackDepth <= maxMarkerBits) {
    if (!newTracked(dep)) {
      dep.n |= trackOpBit;
      shouldTrack2 = !wasTracked(dep);
    }
  } else {
    shouldTrack2 = !dep.has(activeEffect);
  }
  if (shouldTrack2) {
    dep.add(activeEffect);
    activeEffect.deps.push(dep);
  }
}
function trigger(target, type, key, newValue, oldValue, oldTarget) {
  const depsMap = targetMap.get(target);
  if (!depsMap) {
    return;
  }
  let deps = [];
  if (type === "clear") {
    deps = [...depsMap.values()];
  } else if (key === "length" && isArray$1(target)) {
    const newLength = Number(newValue);
    depsMap.forEach((dep, key2) => {
      if (key2 === "length" || key2 >= newLength) {
        deps.push(dep);
      }
    });
  } else {
    if (key !== void 0) {
      deps.push(depsMap.get(key));
    }
    switch (type) {
      case "add":
        if (!isArray$1(target)) {
          deps.push(depsMap.get(ITERATE_KEY));
          if (isMap(target)) {
            deps.push(depsMap.get(MAP_KEY_ITERATE_KEY));
          }
        } else if (isIntegerKey(key)) {
          deps.push(depsMap.get("length"));
        }
        break;
      case "delete":
        if (!isArray$1(target)) {
          deps.push(depsMap.get(ITERATE_KEY));
          if (isMap(target)) {
            deps.push(depsMap.get(MAP_KEY_ITERATE_KEY));
          }
        }
        break;
      case "set":
        if (isMap(target)) {
          deps.push(depsMap.get(ITERATE_KEY));
        }
        break;
    }
  }
  if (deps.length === 1) {
    if (deps[0]) {
      {
        triggerEffects(deps[0]);
      }
    }
  } else {
    const effects = [];
    for (const dep of deps) {
      if (dep) {
        effects.push(...dep);
      }
    }
    {
      triggerEffects(createDep(effects));
    }
  }
}
function triggerEffects(dep, debuggerEventExtraInfo) {
  const effects = isArray$1(dep) ? dep : [...dep];
  for (const effect2 of effects) {
    if (effect2.computed) {
      triggerEffect(effect2);
    }
  }
  for (const effect2 of effects) {
    if (!effect2.computed) {
      triggerEffect(effect2);
    }
  }
}
function triggerEffect(effect2, debuggerEventExtraInfo) {
  if (effect2 !== activeEffect || effect2.allowRecurse) {
    if (effect2.scheduler) {
      effect2.scheduler();
    } else {
      effect2.run();
    }
  }
}
function getDepFromReactive(object, key) {
  var _a;
  return (_a = targetMap.get(object)) === null || _a === void 0 ? void 0 : _a.get(key);
}
const isNonTrackableKeys = /* @__PURE__ */ makeMap(`__proto__,__v_isRef,__isVue`);
const builtInSymbols = new Set(
  /* @__PURE__ */ Object.getOwnPropertyNames(Symbol).filter((key) => key !== "arguments" && key !== "caller").map((key) => Symbol[key]).filter(isSymbol)
);
const get$1 = /* @__PURE__ */ createGetter();
const shallowGet = /* @__PURE__ */ createGetter(false, true);
const readonlyGet = /* @__PURE__ */ createGetter(true);
const shallowReadonlyGet = /* @__PURE__ */ createGetter(true, true);
const arrayInstrumentations = /* @__PURE__ */ createArrayInstrumentations();
function createArrayInstrumentations() {
  const instrumentations = {};
  ["includes", "indexOf", "lastIndexOf"].forEach((key) => {
    instrumentations[key] = function(...args) {
      const arr = toRaw(this);
      for (let i = 0, l = this.length; i < l; i++) {
        track(arr, "get", i + "");
      }
      const res = arr[key](...args);
      if (res === -1 || res === false) {
        return arr[key](...args.map(toRaw));
      } else {
        return res;
      }
    };
  });
  ["push", "pop", "shift", "unshift", "splice"].forEach((key) => {
    instrumentations[key] = function(...args) {
      pauseTracking();
      const res = toRaw(this)[key].apply(this, args);
      resetTracking();
      return res;
    };
  });
  return instrumentations;
}
function hasOwnProperty$1(key) {
  const obj = toRaw(this);
  track(obj, "has", key);
  return obj.hasOwnProperty(key);
}
function createGetter(isReadonly2 = false, shallow = false) {
  return function get2(target, key, receiver) {
    if (key === "__v_isReactive") {
      return !isReadonly2;
    } else if (key === "__v_isReadonly") {
      return isReadonly2;
    } else if (key === "__v_isShallow") {
      return shallow;
    } else if (key === "__v_raw" && receiver === (isReadonly2 ? shallow ? shallowReadonlyMap : readonlyMap : shallow ? shallowReactiveMap : reactiveMap).get(target)) {
      return target;
    }
    const targetIsArray = isArray$1(target);
    if (!isReadonly2) {
      if (targetIsArray && hasOwn(arrayInstrumentations, key)) {
        return Reflect.get(arrayInstrumentations, key, receiver);
      }
      if (key === "hasOwnProperty") {
        return hasOwnProperty$1;
      }
    }
    const res = Reflect.get(target, key, receiver);
    if (isSymbol(key) ? builtInSymbols.has(key) : isNonTrackableKeys(key)) {
      return res;
    }
    if (!isReadonly2) {
      track(target, "get", key);
    }
    if (shallow) {
      return res;
    }
    if (isRef(res)) {
      return targetIsArray && isIntegerKey(key) ? res : res.value;
    }
    if (isObject$2(res)) {
      return isReadonly2 ? readonly(res) : reactive(res);
    }
    return res;
  };
}
const set$1 = /* @__PURE__ */ createSetter();
const shallowSet = /* @__PURE__ */ createSetter(true);
function createSetter(shallow = false) {
  return function set2(target, key, value, receiver) {
    let oldValue = target[key];
    if (isReadonly(oldValue) && isRef(oldValue) && !isRef(value)) {
      return false;
    }
    if (!shallow) {
      if (!isShallow(value) && !isReadonly(value)) {
        oldValue = toRaw(oldValue);
        value = toRaw(value);
      }
      if (!isArray$1(target) && isRef(oldValue) && !isRef(value)) {
        oldValue.value = value;
        return true;
      }
    }
    const hadKey = isArray$1(target) && isIntegerKey(key) ? Number(key) < target.length : hasOwn(target, key);
    const result = Reflect.set(target, key, value, receiver);
    if (target === toRaw(receiver)) {
      if (!hadKey) {
        trigger(target, "add", key, value);
      } else if (hasChanged(value, oldValue)) {
        trigger(target, "set", key, value);
      }
    }
    return result;
  };
}
function deleteProperty(target, key) {
  const hadKey = hasOwn(target, key);
  target[key];
  const result = Reflect.deleteProperty(target, key);
  if (result && hadKey) {
    trigger(target, "delete", key, void 0);
  }
  return result;
}
function has$1(target, key) {
  const result = Reflect.has(target, key);
  if (!isSymbol(key) || !builtInSymbols.has(key)) {
    track(target, "has", key);
  }
  return result;
}
function ownKeys(target) {
  track(target, "iterate", isArray$1(target) ? "length" : ITERATE_KEY);
  return Reflect.ownKeys(target);
}
const mutableHandlers = {
  get: get$1,
  set: set$1,
  deleteProperty,
  has: has$1,
  ownKeys
};
const readonlyHandlers = {
  get: readonlyGet,
  set(target, key) {
    return true;
  },
  deleteProperty(target, key) {
    return true;
  }
};
const shallowReactiveHandlers = /* @__PURE__ */ extend$2({}, mutableHandlers, {
  get: shallowGet,
  set: shallowSet
});
const shallowReadonlyHandlers = /* @__PURE__ */ extend$2({}, readonlyHandlers, {
  get: shallowReadonlyGet
});
const toShallow = (value) => value;
const getProto = (v) => Reflect.getPrototypeOf(v);
function get(target, key, isReadonly2 = false, isShallow2 = false) {
  target = target[
    "__v_raw"
    /* ReactiveFlags.RAW */
  ];
  const rawTarget = toRaw(target);
  const rawKey = toRaw(key);
  if (!isReadonly2) {
    if (key !== rawKey) {
      track(rawTarget, "get", key);
    }
    track(rawTarget, "get", rawKey);
  }
  const { has: has2 } = getProto(rawTarget);
  const wrap = isShallow2 ? toShallow : isReadonly2 ? toReadonly : toReactive;
  if (has2.call(rawTarget, key)) {
    return wrap(target.get(key));
  } else if (has2.call(rawTarget, rawKey)) {
    return wrap(target.get(rawKey));
  } else if (target !== rawTarget) {
    target.get(key);
  }
}
function has(key, isReadonly2 = false) {
  const target = this[
    "__v_raw"
    /* ReactiveFlags.RAW */
  ];
  const rawTarget = toRaw(target);
  const rawKey = toRaw(key);
  if (!isReadonly2) {
    if (key !== rawKey) {
      track(rawTarget, "has", key);
    }
    track(rawTarget, "has", rawKey);
  }
  return key === rawKey ? target.has(key) : target.has(key) || target.has(rawKey);
}
function size(target, isReadonly2 = false) {
  target = target[
    "__v_raw"
    /* ReactiveFlags.RAW */
  ];
  !isReadonly2 && track(toRaw(target), "iterate", ITERATE_KEY);
  return Reflect.get(target, "size", target);
}
function add(value) {
  value = toRaw(value);
  const target = toRaw(this);
  const proto = getProto(target);
  const hadKey = proto.has.call(target, value);
  if (!hadKey) {
    target.add(value);
    trigger(target, "add", value, value);
  }
  return this;
}
function set(key, value) {
  value = toRaw(value);
  const target = toRaw(this);
  const { has: has2, get: get2 } = getProto(target);
  let hadKey = has2.call(target, key);
  if (!hadKey) {
    key = toRaw(key);
    hadKey = has2.call(target, key);
  }
  const oldValue = get2.call(target, key);
  target.set(key, value);
  if (!hadKey) {
    trigger(target, "add", key, value);
  } else if (hasChanged(value, oldValue)) {
    trigger(target, "set", key, value);
  }
  return this;
}
function deleteEntry(key) {
  const target = toRaw(this);
  const { has: has2, get: get2 } = getProto(target);
  let hadKey = has2.call(target, key);
  if (!hadKey) {
    key = toRaw(key);
    hadKey = has2.call(target, key);
  }
  get2 ? get2.call(target, key) : void 0;
  const result = target.delete(key);
  if (hadKey) {
    trigger(target, "delete", key, void 0);
  }
  return result;
}
function clear() {
  const target = toRaw(this);
  const hadItems = target.size !== 0;
  const result = target.clear();
  if (hadItems) {
    trigger(target, "clear", void 0, void 0);
  }
  return result;
}
function createForEach(isReadonly2, isShallow2) {
  return function forEach2(callback, thisArg) {
    const observed = this;
    const target = observed[
      "__v_raw"
      /* ReactiveFlags.RAW */
    ];
    const rawTarget = toRaw(target);
    const wrap = isShallow2 ? toShallow : isReadonly2 ? toReadonly : toReactive;
    !isReadonly2 && track(rawTarget, "iterate", ITERATE_KEY);
    return target.forEach((value, key) => {
      return callback.call(thisArg, wrap(value), wrap(key), observed);
    });
  };
}
function createIterableMethod(method, isReadonly2, isShallow2) {
  return function(...args) {
    const target = this[
      "__v_raw"
      /* ReactiveFlags.RAW */
    ];
    const rawTarget = toRaw(target);
    const targetIsMap = isMap(rawTarget);
    const isPair = method === "entries" || method === Symbol.iterator && targetIsMap;
    const isKeyOnly = method === "keys" && targetIsMap;
    const innerIterator = target[method](...args);
    const wrap = isShallow2 ? toShallow : isReadonly2 ? toReadonly : toReactive;
    !isReadonly2 && track(rawTarget, "iterate", isKeyOnly ? MAP_KEY_ITERATE_KEY : ITERATE_KEY);
    return {
      // iterator protocol
      next() {
        const { value, done } = innerIterator.next();
        return done ? { value, done } : {
          value: isPair ? [wrap(value[0]), wrap(value[1])] : wrap(value),
          done
        };
      },
      // iterable protocol
      [Symbol.iterator]() {
        return this;
      }
    };
  };
}
function createReadonlyMethod(type) {
  return function(...args) {
    return type === "delete" ? false : this;
  };
}
function createInstrumentations() {
  const mutableInstrumentations2 = {
    get(key) {
      return get(this, key);
    },
    get size() {
      return size(this);
    },
    has,
    add,
    set,
    delete: deleteEntry,
    clear,
    forEach: createForEach(false, false)
  };
  const shallowInstrumentations2 = {
    get(key) {
      return get(this, key, false, true);
    },
    get size() {
      return size(this);
    },
    has,
    add,
    set,
    delete: deleteEntry,
    clear,
    forEach: createForEach(false, true)
  };
  const readonlyInstrumentations2 = {
    get(key) {
      return get(this, key, true);
    },
    get size() {
      return size(this, true);
    },
    has(key) {
      return has.call(this, key, true);
    },
    add: createReadonlyMethod(
      "add"
      /* TriggerOpTypes.ADD */
    ),
    set: createReadonlyMethod(
      "set"
      /* TriggerOpTypes.SET */
    ),
    delete: createReadonlyMethod(
      "delete"
      /* TriggerOpTypes.DELETE */
    ),
    clear: createReadonlyMethod(
      "clear"
      /* TriggerOpTypes.CLEAR */
    ),
    forEach: createForEach(true, false)
  };
  const shallowReadonlyInstrumentations2 = {
    get(key) {
      return get(this, key, true, true);
    },
    get size() {
      return size(this, true);
    },
    has(key) {
      return has.call(this, key, true);
    },
    add: createReadonlyMethod(
      "add"
      /* TriggerOpTypes.ADD */
    ),
    set: createReadonlyMethod(
      "set"
      /* TriggerOpTypes.SET */
    ),
    delete: createReadonlyMethod(
      "delete"
      /* TriggerOpTypes.DELETE */
    ),
    clear: createReadonlyMethod(
      "clear"
      /* TriggerOpTypes.CLEAR */
    ),
    forEach: createForEach(true, true)
  };
  const iteratorMethods = ["keys", "values", "entries", Symbol.iterator];
  iteratorMethods.forEach((method) => {
    mutableInstrumentations2[method] = createIterableMethod(method, false, false);
    readonlyInstrumentations2[method] = createIterableMethod(method, true, false);
    shallowInstrumentations2[method] = createIterableMethod(method, false, true);
    shallowReadonlyInstrumentations2[method] = createIterableMethod(method, true, true);
  });
  return [
    mutableInstrumentations2,
    readonlyInstrumentations2,
    shallowInstrumentations2,
    shallowReadonlyInstrumentations2
  ];
}
const [mutableInstrumentations, readonlyInstrumentations, shallowInstrumentations, shallowReadonlyInstrumentations] = /* @__PURE__ */ createInstrumentations();
function createInstrumentationGetter(isReadonly2, shallow) {
  const instrumentations = shallow ? isReadonly2 ? shallowReadonlyInstrumentations : shallowInstrumentations : isReadonly2 ? readonlyInstrumentations : mutableInstrumentations;
  return (target, key, receiver) => {
    if (key === "__v_isReactive") {
      return !isReadonly2;
    } else if (key === "__v_isReadonly") {
      return isReadonly2;
    } else if (key === "__v_raw") {
      return target;
    }
    return Reflect.get(hasOwn(instrumentations, key) && key in target ? instrumentations : target, key, receiver);
  };
}
const mutableCollectionHandlers = {
  get: /* @__PURE__ */ createInstrumentationGetter(false, false)
};
const shallowCollectionHandlers = {
  get: /* @__PURE__ */ createInstrumentationGetter(false, true)
};
const readonlyCollectionHandlers = {
  get: /* @__PURE__ */ createInstrumentationGetter(true, false)
};
const shallowReadonlyCollectionHandlers = {
  get: /* @__PURE__ */ createInstrumentationGetter(true, true)
};
const reactiveMap = /* @__PURE__ */ new WeakMap();
const shallowReactiveMap = /* @__PURE__ */ new WeakMap();
const readonlyMap = /* @__PURE__ */ new WeakMap();
const shallowReadonlyMap = /* @__PURE__ */ new WeakMap();
function targetTypeMap(rawType) {
  switch (rawType) {
    case "Object":
    case "Array":
      return 1;
    case "Map":
    case "Set":
    case "WeakMap":
    case "WeakSet":
      return 2;
    default:
      return 0;
  }
}
function getTargetType(value) {
  return value[
    "__v_skip"
    /* ReactiveFlags.SKIP */
  ] || !Object.isExtensible(value) ? 0 : targetTypeMap(toRawType(value));
}
function reactive(target) {
  if (isReadonly(target)) {
    return target;
  }
  return createReactiveObject(target, false, mutableHandlers, mutableCollectionHandlers, reactiveMap);
}
function shallowReactive(target) {
  return createReactiveObject(target, false, shallowReactiveHandlers, shallowCollectionHandlers, shallowReactiveMap);
}
function readonly(target) {
  return createReactiveObject(target, true, readonlyHandlers, readonlyCollectionHandlers, readonlyMap);
}
function shallowReadonly(target) {
  return createReactiveObject(target, true, shallowReadonlyHandlers, shallowReadonlyCollectionHandlers, shallowReadonlyMap);
}
function createReactiveObject(target, isReadonly2, baseHandlers, collectionHandlers, proxyMap) {
  if (!isObject$2(target)) {
    return target;
  }
  if (target[
    "__v_raw"
    /* ReactiveFlags.RAW */
  ] && !(isReadonly2 && target[
    "__v_isReactive"
    /* ReactiveFlags.IS_REACTIVE */
  ])) {
    return target;
  }
  const existingProxy = proxyMap.get(target);
  if (existingProxy) {
    return existingProxy;
  }
  const targetType = getTargetType(target);
  if (targetType === 0) {
    return target;
  }
  const proxy2 = new Proxy(target, targetType === 2 ? collectionHandlers : baseHandlers);
  proxyMap.set(target, proxy2);
  return proxy2;
}
function isReactive(value) {
  if (isReadonly(value)) {
    return isReactive(value[
      "__v_raw"
      /* ReactiveFlags.RAW */
    ]);
  }
  return !!(value && value[
    "__v_isReactive"
    /* ReactiveFlags.IS_REACTIVE */
  ]);
}
function isReadonly(value) {
  return !!(value && value[
    "__v_isReadonly"
    /* ReactiveFlags.IS_READONLY */
  ]);
}
function isShallow(value) {
  return !!(value && value[
    "__v_isShallow"
    /* ReactiveFlags.IS_SHALLOW */
  ]);
}
function isProxy(value) {
  return isReactive(value) || isReadonly(value);
}
function toRaw(observed) {
  const raw = observed && observed[
    "__v_raw"
    /* ReactiveFlags.RAW */
  ];
  return raw ? toRaw(raw) : observed;
}
function markRaw(value) {
  def(value, "__v_skip", true);
  return value;
}
const toReactive = (value) => isObject$2(value) ? reactive(value) : value;
const toReadonly = (value) => isObject$2(value) ? readonly(value) : value;
function trackRefValue(ref2) {
  if (shouldTrack && activeEffect) {
    ref2 = toRaw(ref2);
    {
      trackEffects(ref2.dep || (ref2.dep = createDep()));
    }
  }
}
function triggerRefValue(ref2, newVal) {
  ref2 = toRaw(ref2);
  const dep = ref2.dep;
  if (dep) {
    {
      triggerEffects(dep);
    }
  }
}
function isRef(r) {
  return !!(r && r.__v_isRef === true);
}
function ref(value) {
  return createRef(value, false);
}
function shallowRef(value) {
  return createRef(value, true);
}
function createRef(rawValue, shallow) {
  if (isRef(rawValue)) {
    return rawValue;
  }
  return new RefImpl(rawValue, shallow);
}
class RefImpl {
  constructor(value, __v_isShallow) {
    this.__v_isShallow = __v_isShallow;
    this.dep = void 0;
    this.__v_isRef = true;
    this._rawValue = __v_isShallow ? value : toRaw(value);
    this._value = __v_isShallow ? value : toReactive(value);
  }
  get value() {
    trackRefValue(this);
    return this._value;
  }
  set value(newVal) {
    const useDirectValue = this.__v_isShallow || isShallow(newVal) || isReadonly(newVal);
    newVal = useDirectValue ? newVal : toRaw(newVal);
    if (hasChanged(newVal, this._rawValue)) {
      this._rawValue = newVal;
      this._value = useDirectValue ? newVal : toReactive(newVal);
      triggerRefValue(this);
    }
  }
}
function triggerRef(ref2) {
  triggerRefValue(ref2);
}
function unref(ref2) {
  return isRef(ref2) ? ref2.value : ref2;
}
const shallowUnwrapHandlers = {
  get: (target, key, receiver) => unref(Reflect.get(target, key, receiver)),
  set: (target, key, value, receiver) => {
    const oldValue = target[key];
    if (isRef(oldValue) && !isRef(value)) {
      oldValue.value = value;
      return true;
    } else {
      return Reflect.set(target, key, value, receiver);
    }
  }
};
function proxyRefs(objectWithRefs) {
  return isReactive(objectWithRefs) ? objectWithRefs : new Proxy(objectWithRefs, shallowUnwrapHandlers);
}
class CustomRefImpl {
  constructor(factory) {
    this.dep = void 0;
    this.__v_isRef = true;
    const { get: get2, set: set2 } = factory(() => trackRefValue(this), () => triggerRefValue(this));
    this._get = get2;
    this._set = set2;
  }
  get value() {
    return this._get();
  }
  set value(newVal) {
    this._set(newVal);
  }
}
function customRef(factory) {
  return new CustomRefImpl(factory);
}
function toRefs(object) {
  const ret = isArray$1(object) ? new Array(object.length) : {};
  for (const key in object) {
    ret[key] = toRef(object, key);
  }
  return ret;
}
class ObjectRefImpl {
  constructor(_object, _key, _defaultValue) {
    this._object = _object;
    this._key = _key;
    this._defaultValue = _defaultValue;
    this.__v_isRef = true;
  }
  get value() {
    const val = this._object[this._key];
    return val === void 0 ? this._defaultValue : val;
  }
  set value(newVal) {
    this._object[this._key] = newVal;
  }
  get dep() {
    return getDepFromReactive(toRaw(this._object), this._key);
  }
}
function toRef(object, key, defaultValue) {
  const val = object[key];
  return isRef(val) ? val : new ObjectRefImpl(object, key, defaultValue);
}
var _a$1;
class ComputedRefImpl {
  constructor(getter, _setter, isReadonly2, isSSR) {
    this._setter = _setter;
    this.dep = void 0;
    this.__v_isRef = true;
    this[_a$1] = false;
    this._dirty = true;
    this.effect = new ReactiveEffect(getter, () => {
      if (!this._dirty) {
        this._dirty = true;
        triggerRefValue(this);
      }
    });
    this.effect.computed = this;
    this.effect.active = this._cacheable = !isSSR;
    this[
      "__v_isReadonly"
      /* ReactiveFlags.IS_READONLY */
    ] = isReadonly2;
  }
  get value() {
    const self2 = toRaw(this);
    trackRefValue(self2);
    if (self2._dirty || !self2._cacheable) {
      self2._dirty = false;
      self2._value = self2.effect.run();
    }
    return self2._value;
  }
  set value(newValue) {
    this._setter(newValue);
  }
}
_a$1 = "__v_isReadonly";
function computed$1(getterOrOptions, debugOptions, isSSR = false) {
  let getter;
  let setter;
  const onlyGetter = isFunction$1(getterOrOptions);
  if (onlyGetter) {
    getter = getterOrOptions;
    setter = NOOP;
  } else {
    getter = getterOrOptions.get;
    setter = getterOrOptions.set;
  }
  const cRef = new ComputedRefImpl(getter, setter, onlyGetter || !setter, isSSR);
  return cRef;
}
function warn(msg, ...args) {
  return;
}
function assertNumber(val, type) {
  return;
}
function callWithErrorHandling(fn, instance, type, args) {
  let res;
  try {
    res = args ? fn(...args) : fn();
  } catch (err) {
    handleError(err, instance, type);
  }
  return res;
}
function callWithAsyncErrorHandling(fn, instance, type, args) {
  if (isFunction$1(fn)) {
    const res = callWithErrorHandling(fn, instance, type, args);
    if (res && isPromise(res)) {
      res.catch((err) => {
        handleError(err, instance, type);
      });
    }
    return res;
  }
  const values = [];
  for (let i = 0; i < fn.length; i++) {
    values.push(callWithAsyncErrorHandling(fn[i], instance, type, args));
  }
  return values;
}
function handleError(err, instance, type, throwInDev = true) {
  const contextVNode = instance ? instance.vnode : null;
  if (instance) {
    let cur = instance.parent;
    const exposedInstance = instance.proxy;
    const errorInfo = type;
    while (cur) {
      const errorCapturedHooks = cur.ec;
      if (errorCapturedHooks) {
        for (let i = 0; i < errorCapturedHooks.length; i++) {
          if (errorCapturedHooks[i](err, exposedInstance, errorInfo) === false) {
            return;
          }
        }
      }
      cur = cur.parent;
    }
    const appErrorHandler = instance.appContext.config.errorHandler;
    if (appErrorHandler) {
      callWithErrorHandling(appErrorHandler, null, 10, [err, exposedInstance, errorInfo]);
      return;
    }
  }
  logError(err, type, contextVNode, throwInDev);
}
function logError(err, type, contextVNode, throwInDev = true) {
  {
    console.error(err);
  }
}
let isFlushing = false;
let isFlushPending = false;
const queue = [];
let flushIndex = 0;
const pendingPostFlushCbs = [];
let activePostFlushCbs = null;
let postFlushIndex = 0;
const resolvedPromise = /* @__PURE__ */ Promise.resolve();
let currentFlushPromise = null;
function nextTick(fn) {
  const p2 = currentFlushPromise || resolvedPromise;
  return fn ? p2.then(this ? fn.bind(this) : fn) : p2;
}
function findInsertionIndex(id) {
  let start = flushIndex + 1;
  let end = queue.length;
  while (start < end) {
    const middle = start + end >>> 1;
    const middleJobId = getId(queue[middle]);
    middleJobId < id ? start = middle + 1 : end = middle;
  }
  return start;
}
function queueJob(job) {
  if (!queue.length || !queue.includes(job, isFlushing && job.allowRecurse ? flushIndex + 1 : flushIndex)) {
    if (job.id == null) {
      queue.push(job);
    } else {
      queue.splice(findInsertionIndex(job.id), 0, job);
    }
    queueFlush();
  }
}
function queueFlush() {
  if (!isFlushing && !isFlushPending) {
    isFlushPending = true;
    currentFlushPromise = resolvedPromise.then(flushJobs);
  }
}
function invalidateJob(job) {
  const i = queue.indexOf(job);
  if (i > flushIndex) {
    queue.splice(i, 1);
  }
}
function queuePostFlushCb(cb) {
  if (!isArray$1(cb)) {
    if (!activePostFlushCbs || !activePostFlushCbs.includes(cb, cb.allowRecurse ? postFlushIndex + 1 : postFlushIndex)) {
      pendingPostFlushCbs.push(cb);
    }
  } else {
    pendingPostFlushCbs.push(...cb);
  }
  queueFlush();
}
function flushPreFlushCbs(seen, i = isFlushing ? flushIndex + 1 : 0) {
  for (; i < queue.length; i++) {
    const cb = queue[i];
    if (cb && cb.pre) {
      queue.splice(i, 1);
      i--;
      cb();
    }
  }
}
function flushPostFlushCbs(seen) {
  if (pendingPostFlushCbs.length) {
    const deduped = [...new Set(pendingPostFlushCbs)];
    pendingPostFlushCbs.length = 0;
    if (activePostFlushCbs) {
      activePostFlushCbs.push(...deduped);
      return;
    }
    activePostFlushCbs = deduped;
    activePostFlushCbs.sort((a, b) => getId(a) - getId(b));
    for (postFlushIndex = 0; postFlushIndex < activePostFlushCbs.length; postFlushIndex++) {
      activePostFlushCbs[postFlushIndex]();
    }
    activePostFlushCbs = null;
    postFlushIndex = 0;
  }
}
const getId = (job) => job.id == null ? Infinity : job.id;
const comparator = (a, b) => {
  const diff = getId(a) - getId(b);
  if (diff === 0) {
    if (a.pre && !b.pre)
      return -1;
    if (b.pre && !a.pre)
      return 1;
  }
  return diff;
};
function flushJobs(seen) {
  isFlushPending = false;
  isFlushing = true;
  queue.sort(comparator);
  const check = NOOP;
  try {
    for (flushIndex = 0; flushIndex < queue.length; flushIndex++) {
      const job = queue[flushIndex];
      if (job && job.active !== false) {
        if (false)
          ;
        callWithErrorHandling(
          job,
          null,
          14
          /* ErrorCodes.SCHEDULER */
        );
      }
    }
  } finally {
    flushIndex = 0;
    queue.length = 0;
    flushPostFlushCbs();
    isFlushing = false;
    currentFlushPromise = null;
    if (queue.length || pendingPostFlushCbs.length) {
      flushJobs();
    }
  }
}
let devtools;
let buffer = [];
function setDevtoolsHook(hook, target) {
  var _a, _b;
  devtools = hook;
  if (devtools) {
    devtools.enabled = true;
    buffer.forEach(({ event, args }) => devtools.emit(event, ...args));
    buffer = [];
  } else if (
    // handle late devtools injection - only do this if we are in an actual
    // browser environment to avoid the timer handle stalling test runner exit
    // (#4815)
    typeof window !== "undefined" && // some envs mock window but not fully
    window.HTMLElement && // also exclude jsdom
    !((_b = (_a = window.navigator) === null || _a === void 0 ? void 0 : _a.userAgent) === null || _b === void 0 ? void 0 : _b.includes("jsdom"))
  ) {
    const replay = target.__VUE_DEVTOOLS_HOOK_REPLAY__ = target.__VUE_DEVTOOLS_HOOK_REPLAY__ || [];
    replay.push((newHook) => {
      setDevtoolsHook(newHook, target);
    });
    setTimeout(() => {
      if (!devtools) {
        target.__VUE_DEVTOOLS_HOOK_REPLAY__ = null;
        buffer = [];
      }
    }, 3e3);
  } else {
    buffer = [];
  }
}
function emit(instance, event, ...rawArgs) {
  if (instance.isUnmounted)
    return;
  const props2 = instance.vnode.props || EMPTY_OBJ;
  let args = rawArgs;
  const isModelListener2 = event.startsWith("update:");
  const modelArg = isModelListener2 && event.slice(7);
  if (modelArg && modelArg in props2) {
    const modifiersKey = `${modelArg === "modelValue" ? "model" : modelArg}Modifiers`;
    const { number, trim: trim2 } = props2[modifiersKey] || EMPTY_OBJ;
    if (trim2) {
      args = rawArgs.map((a) => isString$1(a) ? a.trim() : a);
    }
    if (number) {
      args = rawArgs.map(looseToNumber);
    }
  }
  let handlerName;
  let handler = props2[handlerName = toHandlerKey(event)] || // also try camelCase event handler (#2249)
  props2[handlerName = toHandlerKey(camelize(event))];
  if (!handler && isModelListener2) {
    handler = props2[handlerName = toHandlerKey(hyphenate(event))];
  }
  if (handler) {
    callWithAsyncErrorHandling(handler, instance, 6, args);
  }
  const onceHandler = props2[handlerName + `Once`];
  if (onceHandler) {
    if (!instance.emitted) {
      instance.emitted = {};
    } else if (instance.emitted[handlerName]) {
      return;
    }
    instance.emitted[handlerName] = true;
    callWithAsyncErrorHandling(onceHandler, instance, 6, args);
  }
}
function normalizeEmitsOptions(comp, appContext, asMixin = false) {
  const cache = appContext.emitsCache;
  const cached = cache.get(comp);
  if (cached !== void 0) {
    return cached;
  }
  const raw = comp.emits;
  let normalized = {};
  let hasExtends = false;
  if (!isFunction$1(comp)) {
    const extendEmits = (raw2) => {
      const normalizedFromExtend = normalizeEmitsOptions(raw2, appContext, true);
      if (normalizedFromExtend) {
        hasExtends = true;
        extend$2(normalized, normalizedFromExtend);
      }
    };
    if (!asMixin && appContext.mixins.length) {
      appContext.mixins.forEach(extendEmits);
    }
    if (comp.extends) {
      extendEmits(comp.extends);
    }
    if (comp.mixins) {
      comp.mixins.forEach(extendEmits);
    }
  }
  if (!raw && !hasExtends) {
    if (isObject$2(comp)) {
      cache.set(comp, null);
    }
    return null;
  }
  if (isArray$1(raw)) {
    raw.forEach((key) => normalized[key] = null);
  } else {
    extend$2(normalized, raw);
  }
  if (isObject$2(comp)) {
    cache.set(comp, normalized);
  }
  return normalized;
}
function isEmitListener(options, key) {
  if (!options || !isOn(key)) {
    return false;
  }
  key = key.slice(2).replace(/Once$/, "");
  return hasOwn(options, key[0].toLowerCase() + key.slice(1)) || hasOwn(options, hyphenate(key)) || hasOwn(options, key);
}
let currentRenderingInstance = null;
let currentScopeId = null;
function setCurrentRenderingInstance(instance) {
  const prev = currentRenderingInstance;
  currentRenderingInstance = instance;
  currentScopeId = instance && instance.type.__scopeId || null;
  return prev;
}
function pushScopeId(id) {
  currentScopeId = id;
}
function popScopeId() {
  currentScopeId = null;
}
const withScopeId = (_id) => withCtx;
function withCtx(fn, ctx = currentRenderingInstance, isNonScopedSlot) {
  if (!ctx)
    return fn;
  if (fn._n) {
    return fn;
  }
  const renderFnWithContext = (...args) => {
    if (renderFnWithContext._d) {
      setBlockTracking(-1);
    }
    const prevInstance = setCurrentRenderingInstance(ctx);
    let res;
    try {
      res = fn(...args);
    } finally {
      setCurrentRenderingInstance(prevInstance);
      if (renderFnWithContext._d) {
        setBlockTracking(1);
      }
    }
    return res;
  };
  renderFnWithContext._n = true;
  renderFnWithContext._c = true;
  renderFnWithContext._d = true;
  return renderFnWithContext;
}
function markAttrsAccessed() {
}
function renderComponentRoot(instance) {
  const { type: Component2, vnode, proxy: proxy2, withProxy, props: props2, propsOptions: [propsOptions], slots, attrs, emit: emit2, render: render2, renderCache, data, setupState, ctx, inheritAttrs } = instance;
  let result;
  let fallthroughAttrs;
  const prev = setCurrentRenderingInstance(instance);
  try {
    if (vnode.shapeFlag & 4) {
      const proxyToUse = withProxy || proxy2;
      result = normalizeVNode(render2.call(proxyToUse, proxyToUse, renderCache, props2, setupState, data, ctx));
      fallthroughAttrs = attrs;
    } else {
      const render3 = Component2;
      if (false)
        ;
      result = normalizeVNode(render3.length > 1 ? render3(props2, false ? {
        get attrs() {
          markAttrsAccessed();
          return attrs;
        },
        slots,
        emit: emit2
      } : { attrs, slots, emit: emit2 }) : render3(
        props2,
        null
        /* we know it doesn't need it */
      ));
      fallthroughAttrs = Component2.props ? attrs : getFunctionalFallthrough(attrs);
    }
  } catch (err) {
    blockStack.length = 0;
    handleError(
      err,
      instance,
      1
      /* ErrorCodes.RENDER_FUNCTION */
    );
    result = createVNode(Comment);
  }
  let root = result;
  if (fallthroughAttrs && inheritAttrs !== false) {
    const keys2 = Object.keys(fallthroughAttrs);
    const { shapeFlag } = root;
    if (keys2.length) {
      if (shapeFlag & (1 | 6)) {
        if (propsOptions && keys2.some(isModelListener)) {
          fallthroughAttrs = filterModelListeners(fallthroughAttrs, propsOptions);
        }
        root = cloneVNode(root, fallthroughAttrs);
      }
    }
  }
  if (vnode.dirs) {
    root = cloneVNode(root);
    root.dirs = root.dirs ? root.dirs.concat(vnode.dirs) : vnode.dirs;
  }
  if (vnode.transition) {
    root.transition = vnode.transition;
  }
  {
    result = root;
  }
  setCurrentRenderingInstance(prev);
  return result;
}
function filterSingleRoot(children) {
  let singleRoot;
  for (let i = 0; i < children.length; i++) {
    const child = children[i];
    if (isVNode(child)) {
      if (child.type !== Comment || child.children === "v-if") {
        if (singleRoot) {
          return;
        } else {
          singleRoot = child;
        }
      }
    } else {
      return;
    }
  }
  return singleRoot;
}
const getFunctionalFallthrough = (attrs) => {
  let res;
  for (const key in attrs) {
    if (key === "class" || key === "style" || isOn(key)) {
      (res || (res = {}))[key] = attrs[key];
    }
  }
  return res;
};
const filterModelListeners = (attrs, props2) => {
  const res = {};
  for (const key in attrs) {
    if (!isModelListener(key) || !(key.slice(9) in props2)) {
      res[key] = attrs[key];
    }
  }
  return res;
};
function shouldUpdateComponent(prevVNode, nextVNode, optimized) {
  const { props: prevProps, children: prevChildren, component } = prevVNode;
  const { props: nextProps, children: nextChildren, patchFlag } = nextVNode;
  const emits = component.emitsOptions;
  if (nextVNode.dirs || nextVNode.transition) {
    return true;
  }
  if (optimized && patchFlag >= 0) {
    if (patchFlag & 1024) {
      return true;
    }
    if (patchFlag & 16) {
      if (!prevProps) {
        return !!nextProps;
      }
      return hasPropsChanged(prevProps, nextProps, emits);
    } else if (patchFlag & 8) {
      const dynamicProps = nextVNode.dynamicProps;
      for (let i = 0; i < dynamicProps.length; i++) {
        const key = dynamicProps[i];
        if (nextProps[key] !== prevProps[key] && !isEmitListener(emits, key)) {
          return true;
        }
      }
    }
  } else {
    if (prevChildren || nextChildren) {
      if (!nextChildren || !nextChildren.$stable) {
        return true;
      }
    }
    if (prevProps === nextProps) {
      return false;
    }
    if (!prevProps) {
      return !!nextProps;
    }
    if (!nextProps) {
      return true;
    }
    return hasPropsChanged(prevProps, nextProps, emits);
  }
  return false;
}
function hasPropsChanged(prevProps, nextProps, emitsOptions) {
  const nextKeys = Object.keys(nextProps);
  if (nextKeys.length !== Object.keys(prevProps).length) {
    return true;
  }
  for (let i = 0; i < nextKeys.length; i++) {
    const key = nextKeys[i];
    if (nextProps[key] !== prevProps[key] && !isEmitListener(emitsOptions, key)) {
      return true;
    }
  }
  return false;
}
function updateHOCHostEl({ vnode, parent }, el) {
  while (parent && parent.subTree === vnode) {
    (vnode = parent.vnode).el = el;
    parent = parent.parent;
  }
}
const isSuspense = (type) => type.__isSuspense;
const SuspenseImpl = {
  name: "Suspense",
  // In order to make Suspense tree-shakable, we need to avoid importing it
  // directly in the renderer. The renderer checks for the __isSuspense flag
  // on a vnode's type and calls the `process` method, passing in renderer
  // internals.
  __isSuspense: true,
  process(n1, n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized, rendererInternals) {
    if (n1 == null) {
      mountSuspense(n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized, rendererInternals);
    } else {
      patchSuspense(n1, n2, container, anchor, parentComponent, isSVG, slotScopeIds, optimized, rendererInternals);
    }
  },
  hydrate: hydrateSuspense,
  create: createSuspenseBoundary,
  normalize: normalizeSuspenseChildren
};
const Suspense = SuspenseImpl;
function triggerEvent(vnode, name) {
  const eventListener = vnode.props && vnode.props[name];
  if (isFunction$1(eventListener)) {
    eventListener();
  }
}
function mountSuspense(vnode, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized, rendererInternals) {
  const { p: patch, o: { createElement: createElement2 } } = rendererInternals;
  const hiddenContainer = createElement2("div");
  const suspense = vnode.suspense = createSuspenseBoundary(vnode, parentSuspense, parentComponent, container, hiddenContainer, anchor, isSVG, slotScopeIds, optimized, rendererInternals);
  patch(null, suspense.pendingBranch = vnode.ssContent, hiddenContainer, null, parentComponent, suspense, isSVG, slotScopeIds);
  if (suspense.deps > 0) {
    triggerEvent(vnode, "onPending");
    triggerEvent(vnode, "onFallback");
    patch(
      null,
      vnode.ssFallback,
      container,
      anchor,
      parentComponent,
      null,
      // fallback tree will not have suspense context
      isSVG,
      slotScopeIds
    );
    setActiveBranch(suspense, vnode.ssFallback);
  } else {
    suspense.resolve();
  }
}
function patchSuspense(n1, n2, container, anchor, parentComponent, isSVG, slotScopeIds, optimized, { p: patch, um: unmount, o: { createElement: createElement2 } }) {
  const suspense = n2.suspense = n1.suspense;
  suspense.vnode = n2;
  n2.el = n1.el;
  const newBranch = n2.ssContent;
  const newFallback = n2.ssFallback;
  const { activeBranch, pendingBranch, isInFallback, isHydrating } = suspense;
  if (pendingBranch) {
    suspense.pendingBranch = newBranch;
    if (isSameVNodeType(newBranch, pendingBranch)) {
      patch(pendingBranch, newBranch, suspense.hiddenContainer, null, parentComponent, suspense, isSVG, slotScopeIds, optimized);
      if (suspense.deps <= 0) {
        suspense.resolve();
      } else if (isInFallback) {
        patch(
          activeBranch,
          newFallback,
          container,
          anchor,
          parentComponent,
          null,
          // fallback tree will not have suspense context
          isSVG,
          slotScopeIds,
          optimized
        );
        setActiveBranch(suspense, newFallback);
      }
    } else {
      suspense.pendingId++;
      if (isHydrating) {
        suspense.isHydrating = false;
        suspense.activeBranch = pendingBranch;
      } else {
        unmount(pendingBranch, parentComponent, suspense);
      }
      suspense.deps = 0;
      suspense.effects.length = 0;
      suspense.hiddenContainer = createElement2("div");
      if (isInFallback) {
        patch(null, newBranch, suspense.hiddenContainer, null, parentComponent, suspense, isSVG, slotScopeIds, optimized);
        if (suspense.deps <= 0) {
          suspense.resolve();
        } else {
          patch(
            activeBranch,
            newFallback,
            container,
            anchor,
            parentComponent,
            null,
            // fallback tree will not have suspense context
            isSVG,
            slotScopeIds,
            optimized
          );
          setActiveBranch(suspense, newFallback);
        }
      } else if (activeBranch && isSameVNodeType(newBranch, activeBranch)) {
        patch(activeBranch, newBranch, container, anchor, parentComponent, suspense, isSVG, slotScopeIds, optimized);
        suspense.resolve(true);
      } else {
        patch(null, newBranch, suspense.hiddenContainer, null, parentComponent, suspense, isSVG, slotScopeIds, optimized);
        if (suspense.deps <= 0) {
          suspense.resolve();
        }
      }
    }
  } else {
    if (activeBranch && isSameVNodeType(newBranch, activeBranch)) {
      patch(activeBranch, newBranch, container, anchor, parentComponent, suspense, isSVG, slotScopeIds, optimized);
      setActiveBranch(suspense, newBranch);
    } else {
      triggerEvent(n2, "onPending");
      suspense.pendingBranch = newBranch;
      suspense.pendingId++;
      patch(null, newBranch, suspense.hiddenContainer, null, parentComponent, suspense, isSVG, slotScopeIds, optimized);
      if (suspense.deps <= 0) {
        suspense.resolve();
      } else {
        const { timeout, pendingId } = suspense;
        if (timeout > 0) {
          setTimeout(() => {
            if (suspense.pendingId === pendingId) {
              suspense.fallback(newFallback);
            }
          }, timeout);
        } else if (timeout === 0) {
          suspense.fallback(newFallback);
        }
      }
    }
  }
}
function createSuspenseBoundary(vnode, parent, parentComponent, container, hiddenContainer, anchor, isSVG, slotScopeIds, optimized, rendererInternals, isHydrating = false) {
  const { p: patch, m: move, um: unmount, n: next, o: { parentNode, remove: remove2 } } = rendererInternals;
  const timeout = vnode.props ? toNumber(vnode.props.timeout) : void 0;
  const suspense = {
    vnode,
    parent,
    parentComponent,
    isSVG,
    container,
    hiddenContainer,
    anchor,
    deps: 0,
    pendingId: 0,
    timeout: typeof timeout === "number" ? timeout : -1,
    activeBranch: null,
    pendingBranch: null,
    isInFallback: true,
    isHydrating,
    isUnmounted: false,
    effects: [],
    resolve(resume = false) {
      const { vnode: vnode2, activeBranch, pendingBranch, pendingId, effects, parentComponent: parentComponent2, container: container2 } = suspense;
      if (suspense.isHydrating) {
        suspense.isHydrating = false;
      } else if (!resume) {
        const delayEnter = activeBranch && pendingBranch.transition && pendingBranch.transition.mode === "out-in";
        if (delayEnter) {
          activeBranch.transition.afterLeave = () => {
            if (pendingId === suspense.pendingId) {
              move(
                pendingBranch,
                container2,
                anchor2,
                0
                /* MoveType.ENTER */
              );
            }
          };
        }
        let { anchor: anchor2 } = suspense;
        if (activeBranch) {
          anchor2 = next(activeBranch);
          unmount(activeBranch, parentComponent2, suspense, true);
        }
        if (!delayEnter) {
          move(
            pendingBranch,
            container2,
            anchor2,
            0
            /* MoveType.ENTER */
          );
        }
      }
      setActiveBranch(suspense, pendingBranch);
      suspense.pendingBranch = null;
      suspense.isInFallback = false;
      let parent2 = suspense.parent;
      let hasUnresolvedAncestor = false;
      while (parent2) {
        if (parent2.pendingBranch) {
          parent2.effects.push(...effects);
          hasUnresolvedAncestor = true;
          break;
        }
        parent2 = parent2.parent;
      }
      if (!hasUnresolvedAncestor) {
        queuePostFlushCb(effects);
      }
      suspense.effects = [];
      triggerEvent(vnode2, "onResolve");
    },
    fallback(fallbackVNode) {
      if (!suspense.pendingBranch) {
        return;
      }
      const { vnode: vnode2, activeBranch, parentComponent: parentComponent2, container: container2, isSVG: isSVG2 } = suspense;
      triggerEvent(vnode2, "onFallback");
      const anchor2 = next(activeBranch);
      const mountFallback = () => {
        if (!suspense.isInFallback) {
          return;
        }
        patch(
          null,
          fallbackVNode,
          container2,
          anchor2,
          parentComponent2,
          null,
          // fallback tree will not have suspense context
          isSVG2,
          slotScopeIds,
          optimized
        );
        setActiveBranch(suspense, fallbackVNode);
      };
      const delayEnter = fallbackVNode.transition && fallbackVNode.transition.mode === "out-in";
      if (delayEnter) {
        activeBranch.transition.afterLeave = mountFallback;
      }
      suspense.isInFallback = true;
      unmount(
        activeBranch,
        parentComponent2,
        null,
        // no suspense so unmount hooks fire now
        true
        // shouldRemove
      );
      if (!delayEnter) {
        mountFallback();
      }
    },
    move(container2, anchor2, type) {
      suspense.activeBranch && move(suspense.activeBranch, container2, anchor2, type);
      suspense.container = container2;
    },
    next() {
      return suspense.activeBranch && next(suspense.activeBranch);
    },
    registerDep(instance, setupRenderEffect) {
      const isInPendingSuspense = !!suspense.pendingBranch;
      if (isInPendingSuspense) {
        suspense.deps++;
      }
      const hydratedEl = instance.vnode.el;
      instance.asyncDep.catch((err) => {
        handleError(
          err,
          instance,
          0
          /* ErrorCodes.SETUP_FUNCTION */
        );
      }).then((asyncSetupResult) => {
        if (instance.isUnmounted || suspense.isUnmounted || suspense.pendingId !== instance.suspenseId) {
          return;
        }
        instance.asyncResolved = true;
        const { vnode: vnode2 } = instance;
        handleSetupResult(instance, asyncSetupResult, false);
        if (hydratedEl) {
          vnode2.el = hydratedEl;
        }
        const placeholder = !hydratedEl && instance.subTree.el;
        setupRenderEffect(
          instance,
          vnode2,
          // component may have been moved before resolve.
          // if this is not a hydration, instance.subTree will be the comment
          // placeholder.
          parentNode(hydratedEl || instance.subTree.el),
          // anchor will not be used if this is hydration, so only need to
          // consider the comment placeholder case.
          hydratedEl ? null : next(instance.subTree),
          suspense,
          isSVG,
          optimized
        );
        if (placeholder) {
          remove2(placeholder);
        }
        updateHOCHostEl(instance, vnode2.el);
        if (isInPendingSuspense && --suspense.deps === 0) {
          suspense.resolve();
        }
      });
    },
    unmount(parentSuspense, doRemove) {
      suspense.isUnmounted = true;
      if (suspense.activeBranch) {
        unmount(suspense.activeBranch, parentComponent, parentSuspense, doRemove);
      }
      if (suspense.pendingBranch) {
        unmount(suspense.pendingBranch, parentComponent, parentSuspense, doRemove);
      }
    }
  };
  return suspense;
}
function hydrateSuspense(node, vnode, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized, rendererInternals, hydrateNode) {
  const suspense = vnode.suspense = createSuspenseBoundary(
    vnode,
    parentSuspense,
    parentComponent,
    node.parentNode,
    document.createElement("div"),
    null,
    isSVG,
    slotScopeIds,
    optimized,
    rendererInternals,
    true
    /* hydrating */
  );
  const result = hydrateNode(node, suspense.pendingBranch = vnode.ssContent, parentComponent, suspense, slotScopeIds, optimized);
  if (suspense.deps === 0) {
    suspense.resolve();
  }
  return result;
}
function normalizeSuspenseChildren(vnode) {
  const { shapeFlag, children } = vnode;
  const isSlotChildren = shapeFlag & 32;
  vnode.ssContent = normalizeSuspenseSlot(isSlotChildren ? children.default : children);
  vnode.ssFallback = isSlotChildren ? normalizeSuspenseSlot(children.fallback) : createVNode(Comment);
}
function normalizeSuspenseSlot(s) {
  let block;
  if (isFunction$1(s)) {
    const trackBlock = isBlockTreeEnabled && s._c;
    if (trackBlock) {
      s._d = false;
      openBlock();
    }
    s = s();
    if (trackBlock) {
      s._d = true;
      block = currentBlock;
      closeBlock();
    }
  }
  if (isArray$1(s)) {
    const singleChild = filterSingleRoot(s);
    s = singleChild;
  }
  s = normalizeVNode(s);
  if (block && !s.dynamicChildren) {
    s.dynamicChildren = block.filter((c) => c !== s);
  }
  return s;
}
function queueEffectWithSuspense(fn, suspense) {
  if (suspense && suspense.pendingBranch) {
    if (isArray$1(fn)) {
      suspense.effects.push(...fn);
    } else {
      suspense.effects.push(fn);
    }
  } else {
    queuePostFlushCb(fn);
  }
}
function setActiveBranch(suspense, branch) {
  suspense.activeBranch = branch;
  const { vnode, parentComponent } = suspense;
  const el = vnode.el = branch.el;
  if (parentComponent && parentComponent.subTree === vnode) {
    parentComponent.vnode.el = el;
    updateHOCHostEl(parentComponent, el);
  }
}
function provide(key, value) {
  if (!currentInstance)
    ;
  else {
    let provides = currentInstance.provides;
    const parentProvides = currentInstance.parent && currentInstance.parent.provides;
    if (parentProvides === provides) {
      provides = currentInstance.provides = Object.create(parentProvides);
    }
    provides[key] = value;
  }
}
function inject(key, defaultValue, treatDefaultAsFactory = false) {
  const instance = currentInstance || currentRenderingInstance;
  if (instance) {
    const provides = instance.parent == null ? instance.vnode.appContext && instance.vnode.appContext.provides : instance.parent.provides;
    if (provides && key in provides) {
      return provides[key];
    } else if (arguments.length > 1) {
      return treatDefaultAsFactory && isFunction$1(defaultValue) ? defaultValue.call(instance.proxy) : defaultValue;
    } else
      ;
  }
}
function watchEffect(effect2, options) {
  return doWatch(effect2, null, options);
}
function watchPostEffect(effect2, options) {
  return doWatch(effect2, null, { flush: "post" });
}
function watchSyncEffect(effect2, options) {
  return doWatch(effect2, null, { flush: "sync" });
}
const INITIAL_WATCHER_VALUE = {};
function watch$d(source, cb, options) {
  return doWatch(source, cb, options);
}
function doWatch(source, cb, { immediate, deep, flush, onTrack, onTrigger } = EMPTY_OBJ) {
  const instance = getCurrentScope() === (currentInstance === null || currentInstance === void 0 ? void 0 : currentInstance.scope) ? currentInstance : null;
  let getter;
  let forceTrigger = false;
  let isMultiSource = false;
  if (isRef(source)) {
    getter = () => source.value;
    forceTrigger = isShallow(source);
  } else if (isReactive(source)) {
    getter = () => source;
    deep = true;
  } else if (isArray$1(source)) {
    isMultiSource = true;
    forceTrigger = source.some((s) => isReactive(s) || isShallow(s));
    getter = () => source.map((s) => {
      if (isRef(s)) {
        return s.value;
      } else if (isReactive(s)) {
        return traverse(s);
      } else if (isFunction$1(s)) {
        return callWithErrorHandling(
          s,
          instance,
          2
          /* ErrorCodes.WATCH_GETTER */
        );
      } else
        ;
    });
  } else if (isFunction$1(source)) {
    if (cb) {
      getter = () => callWithErrorHandling(
        source,
        instance,
        2
        /* ErrorCodes.WATCH_GETTER */
      );
    } else {
      getter = () => {
        if (instance && instance.isUnmounted) {
          return;
        }
        if (cleanup) {
          cleanup();
        }
        return callWithAsyncErrorHandling(source, instance, 3, [onCleanup]);
      };
    }
  } else {
    getter = NOOP;
  }
  if (cb && deep) {
    const baseGetter = getter;
    getter = () => traverse(baseGetter());
  }
  let cleanup;
  let onCleanup = (fn) => {
    cleanup = effect2.onStop = () => {
      callWithErrorHandling(
        fn,
        instance,
        4
        /* ErrorCodes.WATCH_CLEANUP */
      );
    };
  };
  let ssrCleanup;
  if (isInSSRComponentSetup) {
    onCleanup = NOOP;
    if (!cb) {
      getter();
    } else if (immediate) {
      callWithAsyncErrorHandling(cb, instance, 3, [
        getter(),
        isMultiSource ? [] : void 0,
        onCleanup
      ]);
    }
    if (flush === "sync") {
      const ctx = useSSRContext();
      ssrCleanup = ctx.__watcherHandles || (ctx.__watcherHandles = []);
    } else {
      return NOOP;
    }
  }
  let oldValue = isMultiSource ? new Array(source.length).fill(INITIAL_WATCHER_VALUE) : INITIAL_WATCHER_VALUE;
  const job = () => {
    if (!effect2.active) {
      return;
    }
    if (cb) {
      const newValue = effect2.run();
      if (deep || forceTrigger || (isMultiSource ? newValue.some((v, i) => hasChanged(v, oldValue[i])) : hasChanged(newValue, oldValue)) || false) {
        if (cleanup) {
          cleanup();
        }
        callWithAsyncErrorHandling(cb, instance, 3, [
          newValue,
          // pass undefined as the old value when it's changed for the first time
          oldValue === INITIAL_WATCHER_VALUE ? void 0 : isMultiSource && oldValue[0] === INITIAL_WATCHER_VALUE ? [] : oldValue,
          onCleanup
        ]);
        oldValue = newValue;
      }
    } else {
      effect2.run();
    }
  };
  job.allowRecurse = !!cb;
  let scheduler;
  if (flush === "sync") {
    scheduler = job;
  } else if (flush === "post") {
    scheduler = () => queuePostRenderEffect(job, instance && instance.suspense);
  } else {
    job.pre = true;
    if (instance)
      job.id = instance.uid;
    scheduler = () => queueJob(job);
  }
  const effect2 = new ReactiveEffect(getter, scheduler);
  if (cb) {
    if (immediate) {
      job();
    } else {
      oldValue = effect2.run();
    }
  } else if (flush === "post") {
    queuePostRenderEffect(effect2.run.bind(effect2), instance && instance.suspense);
  } else {
    effect2.run();
  }
  const unwatch = () => {
    effect2.stop();
    if (instance && instance.scope) {
      remove$1(instance.scope.effects, effect2);
    }
  };
  if (ssrCleanup)
    ssrCleanup.push(unwatch);
  return unwatch;
}
function instanceWatch(source, value, options) {
  const publicThis = this.proxy;
  const getter = isString$1(source) ? source.includes(".") ? createPathGetter(publicThis, source) : () => publicThis[source] : source.bind(publicThis, publicThis);
  let cb;
  if (isFunction$1(value)) {
    cb = value;
  } else {
    cb = value.handler;
    options = value;
  }
  const cur = currentInstance;
  setCurrentInstance(this);
  const res = doWatch(getter, cb.bind(publicThis), options);
  if (cur) {
    setCurrentInstance(cur);
  } else {
    unsetCurrentInstance();
  }
  return res;
}
function createPathGetter(ctx, path) {
  const segments = path.split(".");
  return () => {
    let cur = ctx;
    for (let i = 0; i < segments.length && cur; i++) {
      cur = cur[segments[i]];
    }
    return cur;
  };
}
function traverse(value, seen) {
  if (!isObject$2(value) || value[
    "__v_skip"
    /* ReactiveFlags.SKIP */
  ]) {
    return value;
  }
  seen = seen || /* @__PURE__ */ new Set();
  if (seen.has(value)) {
    return value;
  }
  seen.add(value);
  if (isRef(value)) {
    traverse(value.value, seen);
  } else if (isArray$1(value)) {
    for (let i = 0; i < value.length; i++) {
      traverse(value[i], seen);
    }
  } else if (isSet(value) || isMap(value)) {
    value.forEach((v) => {
      traverse(v, seen);
    });
  } else if (isPlainObject$1(value)) {
    for (const key in value) {
      traverse(value[key], seen);
    }
  }
  return value;
}
function useTransitionState() {
  const state = {
    isMounted: false,
    isLeaving: false,
    isUnmounting: false,
    leavingVNodes: /* @__PURE__ */ new Map()
  };
  onMounted(() => {
    state.isMounted = true;
  });
  onBeforeUnmount(() => {
    state.isUnmounting = true;
  });
  return state;
}
const TransitionHookValidator = [Function, Array];
const BaseTransitionImpl = {
  name: `BaseTransition`,
  props: {
    mode: String,
    appear: Boolean,
    persisted: Boolean,
    // enter
    onBeforeEnter: TransitionHookValidator,
    onEnter: TransitionHookValidator,
    onAfterEnter: TransitionHookValidator,
    onEnterCancelled: TransitionHookValidator,
    // leave
    onBeforeLeave: TransitionHookValidator,
    onLeave: TransitionHookValidator,
    onAfterLeave: TransitionHookValidator,
    onLeaveCancelled: TransitionHookValidator,
    // appear
    onBeforeAppear: TransitionHookValidator,
    onAppear: TransitionHookValidator,
    onAfterAppear: TransitionHookValidator,
    onAppearCancelled: TransitionHookValidator
  },
  setup(props2, { slots }) {
    const instance = getCurrentInstance();
    const state = useTransitionState();
    let prevTransitionKey;
    return () => {
      const children = slots.default && getTransitionRawChildren(slots.default(), true);
      if (!children || !children.length) {
        return;
      }
      let child = children[0];
      if (children.length > 1) {
        for (const c of children) {
          if (c.type !== Comment) {
            child = c;
            break;
          }
        }
      }
      const rawProps = toRaw(props2);
      const { mode } = rawProps;
      if (state.isLeaving) {
        return emptyPlaceholder(child);
      }
      const innerChild = getKeepAliveChild(child);
      if (!innerChild) {
        return emptyPlaceholder(child);
      }
      const enterHooks = resolveTransitionHooks(innerChild, rawProps, state, instance);
      setTransitionHooks(innerChild, enterHooks);
      const oldChild = instance.subTree;
      const oldInnerChild = oldChild && getKeepAliveChild(oldChild);
      let transitionKeyChanged = false;
      const { getTransitionKey } = innerChild.type;
      if (getTransitionKey) {
        const key = getTransitionKey();
        if (prevTransitionKey === void 0) {
          prevTransitionKey = key;
        } else if (key !== prevTransitionKey) {
          prevTransitionKey = key;
          transitionKeyChanged = true;
        }
      }
      if (oldInnerChild && oldInnerChild.type !== Comment && (!isSameVNodeType(innerChild, oldInnerChild) || transitionKeyChanged)) {
        const leavingHooks = resolveTransitionHooks(oldInnerChild, rawProps, state, instance);
        setTransitionHooks(oldInnerChild, leavingHooks);
        if (mode === "out-in") {
          state.isLeaving = true;
          leavingHooks.afterLeave = () => {
            state.isLeaving = false;
            if (instance.update.active !== false) {
              instance.update();
            }
          };
          return emptyPlaceholder(child);
        } else if (mode === "in-out" && innerChild.type !== Comment) {
          leavingHooks.delayLeave = (el, earlyRemove, delayedLeave) => {
            const leavingVNodesCache = getLeavingNodesForType(state, oldInnerChild);
            leavingVNodesCache[String(oldInnerChild.key)] = oldInnerChild;
            el._leaveCb = () => {
              earlyRemove();
              el._leaveCb = void 0;
              delete enterHooks.delayedLeave;
            };
            enterHooks.delayedLeave = delayedLeave;
          };
        }
      }
      return child;
    };
  }
};
const BaseTransition = BaseTransitionImpl;
function getLeavingNodesForType(state, vnode) {
  const { leavingVNodes } = state;
  let leavingVNodesCache = leavingVNodes.get(vnode.type);
  if (!leavingVNodesCache) {
    leavingVNodesCache = /* @__PURE__ */ Object.create(null);
    leavingVNodes.set(vnode.type, leavingVNodesCache);
  }
  return leavingVNodesCache;
}
function resolveTransitionHooks(vnode, props2, state, instance) {
  const { appear, mode, persisted = false, onBeforeEnter, onEnter, onAfterEnter, onEnterCancelled, onBeforeLeave, onLeave, onAfterLeave, onLeaveCancelled, onBeforeAppear, onAppear, onAfterAppear, onAppearCancelled } = props2;
  const key = String(vnode.key);
  const leavingVNodesCache = getLeavingNodesForType(state, vnode);
  const callHook2 = (hook, args) => {
    hook && callWithAsyncErrorHandling(hook, instance, 9, args);
  };
  const callAsyncHook = (hook, args) => {
    const done = args[1];
    callHook2(hook, args);
    if (isArray$1(hook)) {
      if (hook.every((hook2) => hook2.length <= 1))
        done();
    } else if (hook.length <= 1) {
      done();
    }
  };
  const hooks = {
    mode,
    persisted,
    beforeEnter(el) {
      let hook = onBeforeEnter;
      if (!state.isMounted) {
        if (appear) {
          hook = onBeforeAppear || onBeforeEnter;
        } else {
          return;
        }
      }
      if (el._leaveCb) {
        el._leaveCb(
          true
          /* cancelled */
        );
      }
      const leavingVNode = leavingVNodesCache[key];
      if (leavingVNode && isSameVNodeType(vnode, leavingVNode) && leavingVNode.el._leaveCb) {
        leavingVNode.el._leaveCb();
      }
      callHook2(hook, [el]);
    },
    enter(el) {
      let hook = onEnter;
      let afterHook = onAfterEnter;
      let cancelHook = onEnterCancelled;
      if (!state.isMounted) {
        if (appear) {
          hook = onAppear || onEnter;
          afterHook = onAfterAppear || onAfterEnter;
          cancelHook = onAppearCancelled || onEnterCancelled;
        } else {
          return;
        }
      }
      let called = false;
      const done = el._enterCb = (cancelled) => {
        if (called)
          return;
        called = true;
        if (cancelled) {
          callHook2(cancelHook, [el]);
        } else {
          callHook2(afterHook, [el]);
        }
        if (hooks.delayedLeave) {
          hooks.delayedLeave();
        }
        el._enterCb = void 0;
      };
      if (hook) {
        callAsyncHook(hook, [el, done]);
      } else {
        done();
      }
    },
    leave(el, remove2) {
      const key2 = String(vnode.key);
      if (el._enterCb) {
        el._enterCb(
          true
          /* cancelled */
        );
      }
      if (state.isUnmounting) {
        return remove2();
      }
      callHook2(onBeforeLeave, [el]);
      let called = false;
      const done = el._leaveCb = (cancelled) => {
        if (called)
          return;
        called = true;
        remove2();
        if (cancelled) {
          callHook2(onLeaveCancelled, [el]);
        } else {
          callHook2(onAfterLeave, [el]);
        }
        el._leaveCb = void 0;
        if (leavingVNodesCache[key2] === vnode) {
          delete leavingVNodesCache[key2];
        }
      };
      leavingVNodesCache[key2] = vnode;
      if (onLeave) {
        callAsyncHook(onLeave, [el, done]);
      } else {
        done();
      }
    },
    clone(vnode2) {
      return resolveTransitionHooks(vnode2, props2, state, instance);
    }
  };
  return hooks;
}
function emptyPlaceholder(vnode) {
  if (isKeepAlive(vnode)) {
    vnode = cloneVNode(vnode);
    vnode.children = null;
    return vnode;
  }
}
function getKeepAliveChild(vnode) {
  return isKeepAlive(vnode) ? vnode.children ? vnode.children[0] : void 0 : vnode;
}
function setTransitionHooks(vnode, hooks) {
  if (vnode.shapeFlag & 6 && vnode.component) {
    setTransitionHooks(vnode.component.subTree, hooks);
  } else if (vnode.shapeFlag & 128) {
    vnode.ssContent.transition = hooks.clone(vnode.ssContent);
    vnode.ssFallback.transition = hooks.clone(vnode.ssFallback);
  } else {
    vnode.transition = hooks;
  }
}
function getTransitionRawChildren(children, keepComment = false, parentKey) {
  let ret = [];
  let keyedFragmentCount = 0;
  for (let i = 0; i < children.length; i++) {
    let child = children[i];
    const key = parentKey == null ? child.key : String(parentKey) + String(child.key != null ? child.key : i);
    if (child.type === Fragment) {
      if (child.patchFlag & 128)
        keyedFragmentCount++;
      ret = ret.concat(getTransitionRawChildren(child.children, keepComment, key));
    } else if (keepComment || child.type !== Comment) {
      ret.push(key != null ? cloneVNode(child, { key }) : child);
    }
  }
  if (keyedFragmentCount > 1) {
    for (let i = 0; i < ret.length; i++) {
      ret[i].patchFlag = -2;
    }
  }
  return ret;
}
function defineComponent(options) {
  return isFunction$1(options) ? { setup: options, name: options.name } : options;
}
const isAsyncWrapper = (i) => !!i.type.__asyncLoader;
function defineAsyncComponent(source) {
  if (isFunction$1(source)) {
    source = { loader: source };
  }
  const {
    loader,
    loadingComponent,
    errorComponent,
    delay = 200,
    timeout,
    // undefined = never times out
    suspensible = true,
    onError: userOnError
  } = source;
  let pendingRequest = null;
  let resolvedComp;
  let retries = 0;
  const retry = () => {
    retries++;
    pendingRequest = null;
    return load();
  };
  const load = () => {
    let thisRequest;
    return pendingRequest || (thisRequest = pendingRequest = loader().catch((err) => {
      err = err instanceof Error ? err : new Error(String(err));
      if (userOnError) {
        return new Promise((resolve2, reject) => {
          const userRetry = () => resolve2(retry());
          const userFail = () => reject(err);
          userOnError(err, userRetry, userFail, retries + 1);
        });
      } else {
        throw err;
      }
    }).then((comp) => {
      if (thisRequest !== pendingRequest && pendingRequest) {
        return pendingRequest;
      }
      if (comp && (comp.__esModule || comp[Symbol.toStringTag] === "Module")) {
        comp = comp.default;
      }
      resolvedComp = comp;
      return comp;
    }));
  };
  return defineComponent({
    name: "AsyncComponentWrapper",
    __asyncLoader: load,
    get __asyncResolved() {
      return resolvedComp;
    },
    setup() {
      const instance = currentInstance;
      if (resolvedComp) {
        return () => createInnerComp(resolvedComp, instance);
      }
      const onError = (err) => {
        pendingRequest = null;
        handleError(
          err,
          instance,
          13,
          !errorComponent
          /* do not throw in dev if user provided error component */
        );
      };
      if (suspensible && instance.suspense || isInSSRComponentSetup) {
        return load().then((comp) => {
          return () => createInnerComp(comp, instance);
        }).catch((err) => {
          onError(err);
          return () => errorComponent ? createVNode(errorComponent, {
            error: err
          }) : null;
        });
      }
      const loaded = ref(false);
      const error = ref();
      const delayed = ref(!!delay);
      if (delay) {
        setTimeout(() => {
          delayed.value = false;
        }, delay);
      }
      if (timeout != null) {
        setTimeout(() => {
          if (!loaded.value && !error.value) {
            const err = new Error(`Async component timed out after ${timeout}ms.`);
            onError(err);
            error.value = err;
          }
        }, timeout);
      }
      load().then(() => {
        loaded.value = true;
        if (instance.parent && isKeepAlive(instance.parent.vnode)) {
          queueJob(instance.parent.update);
        }
      }).catch((err) => {
        onError(err);
        error.value = err;
      });
      return () => {
        if (loaded.value && resolvedComp) {
          return createInnerComp(resolvedComp, instance);
        } else if (error.value && errorComponent) {
          return createVNode(errorComponent, {
            error: error.value
          });
        } else if (loadingComponent && !delayed.value) {
          return createVNode(loadingComponent);
        }
      };
    }
  });
}
function createInnerComp(comp, parent) {
  const { ref: ref2, props: props2, children, ce } = parent.vnode;
  const vnode = createVNode(comp, props2, children);
  vnode.ref = ref2;
  vnode.ce = ce;
  delete parent.vnode.ce;
  return vnode;
}
const isKeepAlive = (vnode) => vnode.type.__isKeepAlive;
const KeepAliveImpl = {
  name: `KeepAlive`,
  // Marker for special handling inside the renderer. We are not using a ===
  // check directly on KeepAlive in the renderer, because importing it directly
  // would prevent it from being tree-shaken.
  __isKeepAlive: true,
  props: {
    include: [String, RegExp, Array],
    exclude: [String, RegExp, Array],
    max: [String, Number]
  },
  setup(props2, { slots }) {
    const instance = getCurrentInstance();
    const sharedContext = instance.ctx;
    if (!sharedContext.renderer) {
      return () => {
        const children = slots.default && slots.default();
        return children && children.length === 1 ? children[0] : children;
      };
    }
    const cache = /* @__PURE__ */ new Map();
    const keys2 = /* @__PURE__ */ new Set();
    let current = null;
    const parentSuspense = instance.suspense;
    const { renderer: { p: patch, m: move, um: _unmount, o: { createElement: createElement2 } } } = sharedContext;
    const storageContainer = createElement2("div");
    sharedContext.activate = (vnode, container, anchor, isSVG, optimized) => {
      const instance2 = vnode.component;
      move(vnode, container, anchor, 0, parentSuspense);
      patch(instance2.vnode, vnode, container, anchor, instance2, parentSuspense, isSVG, vnode.slotScopeIds, optimized);
      queuePostRenderEffect(() => {
        instance2.isDeactivated = false;
        if (instance2.a) {
          invokeArrayFns(instance2.a);
        }
        const vnodeHook = vnode.props && vnode.props.onVnodeMounted;
        if (vnodeHook) {
          invokeVNodeHook(vnodeHook, instance2.parent, vnode);
        }
      }, parentSuspense);
    };
    sharedContext.deactivate = (vnode) => {
      const instance2 = vnode.component;
      move(vnode, storageContainer, null, 1, parentSuspense);
      queuePostRenderEffect(() => {
        if (instance2.da) {
          invokeArrayFns(instance2.da);
        }
        const vnodeHook = vnode.props && vnode.props.onVnodeUnmounted;
        if (vnodeHook) {
          invokeVNodeHook(vnodeHook, instance2.parent, vnode);
        }
        instance2.isDeactivated = true;
      }, parentSuspense);
    };
    function unmount(vnode) {
      resetShapeFlag(vnode);
      _unmount(vnode, instance, parentSuspense, true);
    }
    function pruneCache(filter2) {
      cache.forEach((vnode, key) => {
        const name = getComponentName(vnode.type);
        if (name && (!filter2 || !filter2(name))) {
          pruneCacheEntry(key);
        }
      });
    }
    function pruneCacheEntry(key) {
      const cached = cache.get(key);
      if (!current || !isSameVNodeType(cached, current)) {
        unmount(cached);
      } else if (current) {
        resetShapeFlag(current);
      }
      cache.delete(key);
      keys2.delete(key);
    }
    watch$d(
      () => [props2.include, props2.exclude],
      ([include, exclude]) => {
        include && pruneCache((name) => matches$2(include, name));
        exclude && pruneCache((name) => !matches$2(exclude, name));
      },
      // prune post-render after `current` has been updated
      { flush: "post", deep: true }
    );
    let pendingCacheKey = null;
    const cacheSubtree = () => {
      if (pendingCacheKey != null) {
        cache.set(pendingCacheKey, getInnerChild(instance.subTree));
      }
    };
    onMounted(cacheSubtree);
    onUpdated(cacheSubtree);
    onBeforeUnmount(() => {
      cache.forEach((cached) => {
        const { subTree, suspense } = instance;
        const vnode = getInnerChild(subTree);
        if (cached.type === vnode.type && cached.key === vnode.key) {
          resetShapeFlag(vnode);
          const da = vnode.component.da;
          da && queuePostRenderEffect(da, suspense);
          return;
        }
        unmount(cached);
      });
    });
    return () => {
      pendingCacheKey = null;
      if (!slots.default) {
        return null;
      }
      const children = slots.default();
      const rawVNode = children[0];
      if (children.length > 1) {
        current = null;
        return children;
      } else if (!isVNode(rawVNode) || !(rawVNode.shapeFlag & 4) && !(rawVNode.shapeFlag & 128)) {
        current = null;
        return rawVNode;
      }
      let vnode = getInnerChild(rawVNode);
      const comp = vnode.type;
      const name = getComponentName(isAsyncWrapper(vnode) ? vnode.type.__asyncResolved || {} : comp);
      const { include, exclude, max } = props2;
      if (include && (!name || !matches$2(include, name)) || exclude && name && matches$2(exclude, name)) {
        current = vnode;
        return rawVNode;
      }
      const key = vnode.key == null ? comp : vnode.key;
      const cachedVNode = cache.get(key);
      if (vnode.el) {
        vnode = cloneVNode(vnode);
        if (rawVNode.shapeFlag & 128) {
          rawVNode.ssContent = vnode;
        }
      }
      pendingCacheKey = key;
      if (cachedVNode) {
        vnode.el = cachedVNode.el;
        vnode.component = cachedVNode.component;
        if (vnode.transition) {
          setTransitionHooks(vnode, vnode.transition);
        }
        vnode.shapeFlag |= 512;
        keys2.delete(key);
        keys2.add(key);
      } else {
        keys2.add(key);
        if (max && keys2.size > parseInt(max, 10)) {
          pruneCacheEntry(keys2.values().next().value);
        }
      }
      vnode.shapeFlag |= 256;
      current = vnode;
      return isSuspense(rawVNode.type) ? rawVNode : vnode;
    };
  }
};
const KeepAlive = KeepAliveImpl;
function matches$2(pattern, name) {
  if (isArray$1(pattern)) {
    return pattern.some((p2) => matches$2(p2, name));
  } else if (isString$1(pattern)) {
    return pattern.split(",").includes(name);
  } else if (isRegExp$1(pattern)) {
    return pattern.test(name);
  }
  return false;
}
function onActivated(hook, target) {
  registerKeepAliveHook(hook, "a", target);
}
function onDeactivated(hook, target) {
  registerKeepAliveHook(hook, "da", target);
}
function registerKeepAliveHook(hook, type, target = currentInstance) {
  const wrappedHook = hook.__wdc || (hook.__wdc = () => {
    let current = target;
    while (current) {
      if (current.isDeactivated) {
        return;
      }
      current = current.parent;
    }
    return hook();
  });
  injectHook(type, wrappedHook, target);
  if (target) {
    let current = target.parent;
    while (current && current.parent) {
      if (isKeepAlive(current.parent.vnode)) {
        injectToKeepAliveRoot(wrappedHook, type, target, current);
      }
      current = current.parent;
    }
  }
}
function injectToKeepAliveRoot(hook, type, target, keepAliveRoot) {
  const injected = injectHook(
    type,
    hook,
    keepAliveRoot,
    true
    /* prepend */
  );
  onUnmounted(() => {
    remove$1(keepAliveRoot[type], injected);
  }, target);
}
function resetShapeFlag(vnode) {
  vnode.shapeFlag &= ~256;
  vnode.shapeFlag &= ~512;
}
function getInnerChild(vnode) {
  return vnode.shapeFlag & 128 ? vnode.ssContent : vnode;
}
function injectHook(type, hook, target = currentInstance, prepend2 = false) {
  if (target) {
    const hooks = target[type] || (target[type] = []);
    const wrappedHook = hook.__weh || (hook.__weh = (...args) => {
      if (target.isUnmounted) {
        return;
      }
      pauseTracking();
      setCurrentInstance(target);
      const res = callWithAsyncErrorHandling(hook, target, type, args);
      unsetCurrentInstance();
      resetTracking();
      return res;
    });
    if (prepend2) {
      hooks.unshift(wrappedHook);
    } else {
      hooks.push(wrappedHook);
    }
    return wrappedHook;
  }
}
const createHook = (lifecycle) => (hook, target = currentInstance) => (
  // post-create lifecycle registrations are noops during SSR (except for serverPrefetch)
  (!isInSSRComponentSetup || lifecycle === "sp") && injectHook(lifecycle, (...args) => hook(...args), target)
);
const onBeforeMount = createHook(
  "bm"
  /* LifecycleHooks.BEFORE_MOUNT */
);
const onMounted = createHook(
  "m"
  /* LifecycleHooks.MOUNTED */
);
const onBeforeUpdate = createHook(
  "bu"
  /* LifecycleHooks.BEFORE_UPDATE */
);
const onUpdated = createHook(
  "u"
  /* LifecycleHooks.UPDATED */
);
const onBeforeUnmount = createHook(
  "bum"
  /* LifecycleHooks.BEFORE_UNMOUNT */
);
const onUnmounted = createHook(
  "um"
  /* LifecycleHooks.UNMOUNTED */
);
const onServerPrefetch = createHook(
  "sp"
  /* LifecycleHooks.SERVER_PREFETCH */
);
const onRenderTriggered = createHook(
  "rtg"
  /* LifecycleHooks.RENDER_TRIGGERED */
);
const onRenderTracked = createHook(
  "rtc"
  /* LifecycleHooks.RENDER_TRACKED */
);
function onErrorCaptured(hook, target = currentInstance) {
  injectHook("ec", hook, target);
}
function withDirectives(vnode, directives) {
  const internalInstance = currentRenderingInstance;
  if (internalInstance === null) {
    return vnode;
  }
  const instance = getExposeProxy(internalInstance) || internalInstance.proxy;
  const bindings = vnode.dirs || (vnode.dirs = []);
  for (let i = 0; i < directives.length; i++) {
    let [dir, value, arg, modifiers = EMPTY_OBJ] = directives[i];
    if (dir) {
      if (isFunction$1(dir)) {
        dir = {
          mounted: dir,
          updated: dir
        };
      }
      if (dir.deep) {
        traverse(value);
      }
      bindings.push({
        dir,
        instance,
        value,
        oldValue: void 0,
        arg,
        modifiers
      });
    }
  }
  return vnode;
}
function invokeDirectiveHook(vnode, prevVNode, instance, name) {
  const bindings = vnode.dirs;
  const oldBindings = prevVNode && prevVNode.dirs;
  for (let i = 0; i < bindings.length; i++) {
    const binding = bindings[i];
    if (oldBindings) {
      binding.oldValue = oldBindings[i].value;
    }
    let hook = binding.dir[name];
    if (hook) {
      pauseTracking();
      callWithAsyncErrorHandling(hook, instance, 8, [
        vnode.el,
        binding,
        vnode,
        prevVNode
      ]);
      resetTracking();
    }
  }
}
const COMPONENTS = "components";
const DIRECTIVES = "directives";
function resolveComponent(name, maybeSelfReference) {
  return resolveAsset(COMPONENTS, name, true, maybeSelfReference) || name;
}
const NULL_DYNAMIC_COMPONENT = Symbol();
function resolveDynamicComponent(component) {
  if (isString$1(component)) {
    return resolveAsset(COMPONENTS, component, false) || component;
  } else {
    return component || NULL_DYNAMIC_COMPONENT;
  }
}
function resolveDirective(name) {
  return resolveAsset(DIRECTIVES, name);
}
function resolveAsset(type, name, warnMissing = true, maybeSelfReference = false) {
  const instance = currentRenderingInstance || currentInstance;
  if (instance) {
    const Component2 = instance.type;
    if (type === COMPONENTS) {
      const selfName = getComponentName(
        Component2,
        false
        /* do not include inferred name to avoid breaking existing code */
      );
      if (selfName && (selfName === name || selfName === camelize(name) || selfName === capitalize(camelize(name)))) {
        return Component2;
      }
    }
    const res = (
      // local registration
      // check instance[type] first which is resolved for options API
      resolve(instance[type] || Component2[type], name) || // global registration
      resolve(instance.appContext[type], name)
    );
    if (!res && maybeSelfReference) {
      return Component2;
    }
    return res;
  }
}
function resolve(registry, name) {
  return registry && (registry[name] || registry[camelize(name)] || registry[capitalize(camelize(name))]);
}
function renderList(source, renderItem, cache, index) {
  let ret;
  const cached = cache && cache[index];
  if (isArray$1(source) || isString$1(source)) {
    ret = new Array(source.length);
    for (let i = 0, l = source.length; i < l; i++) {
      ret[i] = renderItem(source[i], i, void 0, cached && cached[i]);
    }
  } else if (typeof source === "number") {
    ret = new Array(source);
    for (let i = 0; i < source; i++) {
      ret[i] = renderItem(i + 1, i, void 0, cached && cached[i]);
    }
  } else if (isObject$2(source)) {
    if (source[Symbol.iterator]) {
      ret = Array.from(source, (item, i) => renderItem(item, i, void 0, cached && cached[i]));
    } else {
      const keys2 = Object.keys(source);
      ret = new Array(keys2.length);
      for (let i = 0, l = keys2.length; i < l; i++) {
        const key = keys2[i];
        ret[i] = renderItem(source[key], key, i, cached && cached[i]);
      }
    }
  } else {
    ret = [];
  }
  if (cache) {
    cache[index] = ret;
  }
  return ret;
}
function createSlots(slots, dynamicSlots) {
  for (let i = 0; i < dynamicSlots.length; i++) {
    const slot = dynamicSlots[i];
    if (isArray$1(slot)) {
      for (let j = 0; j < slot.length; j++) {
        slots[slot[j].name] = slot[j].fn;
      }
    } else if (slot) {
      slots[slot.name] = slot.key ? (...args) => {
        const res = slot.fn(...args);
        if (res)
          res.key = slot.key;
        return res;
      } : slot.fn;
    }
  }
  return slots;
}
function renderSlot(slots, name, props2 = {}, fallback, noSlotted) {
  if (currentRenderingInstance.isCE || currentRenderingInstance.parent && isAsyncWrapper(currentRenderingInstance.parent) && currentRenderingInstance.parent.isCE) {
    if (name !== "default")
      props2.name = name;
    return createVNode("slot", props2, fallback && fallback());
  }
  let slot = slots[name];
  if (slot && slot._c) {
    slot._d = false;
  }
  openBlock();
  const validSlotContent = slot && ensureValidVNode(slot(props2));
  const rendered = createBlock(
    Fragment,
    {
      key: props2.key || // slot content array of a dynamic conditional slot may have a branch
      // key attached in the `createSlots` helper, respect that
      validSlotContent && validSlotContent.key || `_${name}`
    },
    validSlotContent || (fallback ? fallback() : []),
    validSlotContent && slots._ === 1 ? 64 : -2
    /* PatchFlags.BAIL */
  );
  if (!noSlotted && rendered.scopeId) {
    rendered.slotScopeIds = [rendered.scopeId + "-s"];
  }
  if (slot && slot._c) {
    slot._d = true;
  }
  return rendered;
}
function ensureValidVNode(vnodes) {
  return vnodes.some((child) => {
    if (!isVNode(child))
      return true;
    if (child.type === Comment)
      return false;
    if (child.type === Fragment && !ensureValidVNode(child.children))
      return false;
    return true;
  }) ? vnodes : null;
}
function toHandlers(obj, preserveCaseIfNecessary) {
  const ret = {};
  for (const key in obj) {
    ret[preserveCaseIfNecessary && /[A-Z]/.test(key) ? `on:${key}` : toHandlerKey(key)] = obj[key];
  }
  return ret;
}
const getPublicInstance = (i) => {
  if (!i)
    return null;
  if (isStatefulComponent(i))
    return getExposeProxy(i) || i.proxy;
  return getPublicInstance(i.parent);
};
const publicPropertiesMap = (
  // Move PURE marker to new line to workaround compiler discarding it
  // due to type annotation
  /* @__PURE__ */ extend$2(/* @__PURE__ */ Object.create(null), {
    $: (i) => i,
    $el: (i) => i.vnode.el,
    $data: (i) => i.data,
    $props: (i) => i.props,
    $attrs: (i) => i.attrs,
    $slots: (i) => i.slots,
    $refs: (i) => i.refs,
    $parent: (i) => getPublicInstance(i.parent),
    $root: (i) => getPublicInstance(i.root),
    $emit: (i) => i.emit,
    $options: (i) => resolveMergedOptions(i),
    $forceUpdate: (i) => i.f || (i.f = () => queueJob(i.update)),
    $nextTick: (i) => i.n || (i.n = nextTick.bind(i.proxy)),
    $watch: (i) => instanceWatch.bind(i)
  })
);
const hasSetupBinding = (state, key) => state !== EMPTY_OBJ && !state.__isScriptSetup && hasOwn(state, key);
const PublicInstanceProxyHandlers = {
  get({ _: instance }, key) {
    const { ctx, setupState, data, props: props2, accessCache, type, appContext } = instance;
    let normalizedProps;
    if (key[0] !== "$") {
      const n = accessCache[key];
      if (n !== void 0) {
        switch (n) {
          case 1:
            return setupState[key];
          case 2:
            return data[key];
          case 4:
            return ctx[key];
          case 3:
            return props2[key];
        }
      } else if (hasSetupBinding(setupState, key)) {
        accessCache[key] = 1;
        return setupState[key];
      } else if (data !== EMPTY_OBJ && hasOwn(data, key)) {
        accessCache[key] = 2;
        return data[key];
      } else if (
        // only cache other properties when instance has declared (thus stable)
        // props
        (normalizedProps = instance.propsOptions[0]) && hasOwn(normalizedProps, key)
      ) {
        accessCache[key] = 3;
        return props2[key];
      } else if (ctx !== EMPTY_OBJ && hasOwn(ctx, key)) {
        accessCache[key] = 4;
        return ctx[key];
      } else if (shouldCacheAccess) {
        accessCache[key] = 0;
      }
    }
    const publicGetter = publicPropertiesMap[key];
    let cssModule, globalProperties;
    if (publicGetter) {
      if (key === "$attrs") {
        track(instance, "get", key);
      }
      return publicGetter(instance);
    } else if (
      // css module (injected by vue-loader)
      (cssModule = type.__cssModules) && (cssModule = cssModule[key])
    ) {
      return cssModule;
    } else if (ctx !== EMPTY_OBJ && hasOwn(ctx, key)) {
      accessCache[key] = 4;
      return ctx[key];
    } else if (
      // global properties
      globalProperties = appContext.config.globalProperties, hasOwn(globalProperties, key)
    ) {
      {
        return globalProperties[key];
      }
    } else
      ;
  },
  set({ _: instance }, key, value) {
    const { data, setupState, ctx } = instance;
    if (hasSetupBinding(setupState, key)) {
      setupState[key] = value;
      return true;
    } else if (data !== EMPTY_OBJ && hasOwn(data, key)) {
      data[key] = value;
      return true;
    } else if (hasOwn(instance.props, key)) {
      return false;
    }
    if (key[0] === "$" && key.slice(1) in instance) {
      return false;
    } else {
      {
        ctx[key] = value;
      }
    }
    return true;
  },
  has({ _: { data, setupState, accessCache, ctx, appContext, propsOptions } }, key) {
    let normalizedProps;
    return !!accessCache[key] || data !== EMPTY_OBJ && hasOwn(data, key) || hasSetupBinding(setupState, key) || (normalizedProps = propsOptions[0]) && hasOwn(normalizedProps, key) || hasOwn(ctx, key) || hasOwn(publicPropertiesMap, key) || hasOwn(appContext.config.globalProperties, key);
  },
  defineProperty(target, key, descriptor) {
    if (descriptor.get != null) {
      target._.accessCache[key] = 0;
    } else if (hasOwn(descriptor, "value")) {
      this.set(target, key, descriptor.value, null);
    }
    return Reflect.defineProperty(target, key, descriptor);
  }
};
const RuntimeCompiledPublicInstanceProxyHandlers = /* @__PURE__ */ extend$2({}, PublicInstanceProxyHandlers, {
  get(target, key) {
    if (key === Symbol.unscopables) {
      return;
    }
    return PublicInstanceProxyHandlers.get(target, key, target);
  },
  has(_, key) {
    const has2 = key[0] !== "_" && !isGloballyWhitelisted(key);
    return has2;
  }
});
let shouldCacheAccess = true;
function applyOptions(instance) {
  const options = resolveMergedOptions(instance);
  const publicThis = instance.proxy;
  const ctx = instance.ctx;
  shouldCacheAccess = false;
  if (options.beforeCreate) {
    callHook$1(
      options.beforeCreate,
      instance,
      "bc"
      /* LifecycleHooks.BEFORE_CREATE */
    );
  }
  const {
    // state
    data: dataOptions,
    computed: computedOptions,
    methods,
    watch: watchOptions,
    provide: provideOptions,
    inject: injectOptions,
    // lifecycle
    created,
    beforeMount,
    mounted,
    beforeUpdate,
    updated,
    activated,
    deactivated,
    beforeDestroy,
    beforeUnmount,
    destroyed,
    unmounted,
    render: render2,
    renderTracked,
    renderTriggered,
    errorCaptured,
    serverPrefetch,
    // public API
    expose,
    inheritAttrs,
    // assets
    components,
    directives,
    filters
  } = options;
  const checkDuplicateProperties = null;
  if (injectOptions) {
    resolveInjections(injectOptions, ctx, checkDuplicateProperties, instance.appContext.config.unwrapInjectedRef);
  }
  if (methods) {
    for (const key in methods) {
      const methodHandler = methods[key];
      if (isFunction$1(methodHandler)) {
        {
          ctx[key] = methodHandler.bind(publicThis);
        }
      }
    }
  }
  if (dataOptions) {
    const data = dataOptions.call(publicThis, publicThis);
    if (!isObject$2(data))
      ;
    else {
      instance.data = reactive(data);
    }
  }
  shouldCacheAccess = true;
  if (computedOptions) {
    for (const key in computedOptions) {
      const opt = computedOptions[key];
      const get2 = isFunction$1(opt) ? opt.bind(publicThis, publicThis) : isFunction$1(opt.get) ? opt.get.bind(publicThis, publicThis) : NOOP;
      const set2 = !isFunction$1(opt) && isFunction$1(opt.set) ? opt.set.bind(publicThis) : NOOP;
      const c = computed({
        get: get2,
        set: set2
      });
      Object.defineProperty(ctx, key, {
        enumerable: true,
        configurable: true,
        get: () => c.value,
        set: (v) => c.value = v
      });
    }
  }
  if (watchOptions) {
    for (const key in watchOptions) {
      createWatcher(watchOptions[key], ctx, publicThis, key);
    }
  }
  if (provideOptions) {
    const provides = isFunction$1(provideOptions) ? provideOptions.call(publicThis) : provideOptions;
    Reflect.ownKeys(provides).forEach((key) => {
      provide(key, provides[key]);
    });
  }
  if (created) {
    callHook$1(
      created,
      instance,
      "c"
      /* LifecycleHooks.CREATED */
    );
  }
  function registerLifecycleHook(register, hook) {
    if (isArray$1(hook)) {
      hook.forEach((_hook) => register(_hook.bind(publicThis)));
    } else if (hook) {
      register(hook.bind(publicThis));
    }
  }
  registerLifecycleHook(onBeforeMount, beforeMount);
  registerLifecycleHook(onMounted, mounted);
  registerLifecycleHook(onBeforeUpdate, beforeUpdate);
  registerLifecycleHook(onUpdated, updated);
  registerLifecycleHook(onActivated, activated);
  registerLifecycleHook(onDeactivated, deactivated);
  registerLifecycleHook(onErrorCaptured, errorCaptured);
  registerLifecycleHook(onRenderTracked, renderTracked);
  registerLifecycleHook(onRenderTriggered, renderTriggered);
  registerLifecycleHook(onBeforeUnmount, beforeUnmount);
  registerLifecycleHook(onUnmounted, unmounted);
  registerLifecycleHook(onServerPrefetch, serverPrefetch);
  if (isArray$1(expose)) {
    if (expose.length) {
      const exposed = instance.exposed || (instance.exposed = {});
      expose.forEach((key) => {
        Object.defineProperty(exposed, key, {
          get: () => publicThis[key],
          set: (val) => publicThis[key] = val
        });
      });
    } else if (!instance.exposed) {
      instance.exposed = {};
    }
  }
  if (render2 && instance.render === NOOP) {
    instance.render = render2;
  }
  if (inheritAttrs != null) {
    instance.inheritAttrs = inheritAttrs;
  }
  if (components)
    instance.components = components;
  if (directives)
    instance.directives = directives;
}
function resolveInjections(injectOptions, ctx, checkDuplicateProperties = NOOP, unwrapRef = false) {
  if (isArray$1(injectOptions)) {
    injectOptions = normalizeInject(injectOptions);
  }
  for (const key in injectOptions) {
    const opt = injectOptions[key];
    let injected;
    if (isObject$2(opt)) {
      if ("default" in opt) {
        injected = inject(
          opt.from || key,
          opt.default,
          true
          /* treat default function as factory */
        );
      } else {
        injected = inject(opt.from || key);
      }
    } else {
      injected = inject(opt);
    }
    if (isRef(injected)) {
      if (unwrapRef) {
        Object.defineProperty(ctx, key, {
          enumerable: true,
          configurable: true,
          get: () => injected.value,
          set: (v) => injected.value = v
        });
      } else {
        ctx[key] = injected;
      }
    } else {
      ctx[key] = injected;
    }
  }
}
function callHook$1(hook, instance, type) {
  callWithAsyncErrorHandling(isArray$1(hook) ? hook.map((h2) => h2.bind(instance.proxy)) : hook.bind(instance.proxy), instance, type);
}
function createWatcher(raw, ctx, publicThis, key) {
  const getter = key.includes(".") ? createPathGetter(publicThis, key) : () => publicThis[key];
  if (isString$1(raw)) {
    const handler = ctx[raw];
    if (isFunction$1(handler)) {
      watch$d(getter, handler);
    }
  } else if (isFunction$1(raw)) {
    watch$d(getter, raw.bind(publicThis));
  } else if (isObject$2(raw)) {
    if (isArray$1(raw)) {
      raw.forEach((r) => createWatcher(r, ctx, publicThis, key));
    } else {
      const handler = isFunction$1(raw.handler) ? raw.handler.bind(publicThis) : ctx[raw.handler];
      if (isFunction$1(handler)) {
        watch$d(getter, handler, raw);
      }
    }
  } else
    ;
}
function resolveMergedOptions(instance) {
  const base = instance.type;
  const { mixins, extends: extendsOptions } = base;
  const { mixins: globalMixins, optionsCache: cache, config: { optionMergeStrategies } } = instance.appContext;
  const cached = cache.get(base);
  let resolved;
  if (cached) {
    resolved = cached;
  } else if (!globalMixins.length && !mixins && !extendsOptions) {
    {
      resolved = base;
    }
  } else {
    resolved = {};
    if (globalMixins.length) {
      globalMixins.forEach((m) => mergeOptions(resolved, m, optionMergeStrategies, true));
    }
    mergeOptions(resolved, base, optionMergeStrategies);
  }
  if (isObject$2(base)) {
    cache.set(base, resolved);
  }
  return resolved;
}
function mergeOptions(to, from, strats, asMixin = false) {
  const { mixins, extends: extendsOptions } = from;
  if (extendsOptions) {
    mergeOptions(to, extendsOptions, strats, true);
  }
  if (mixins) {
    mixins.forEach((m) => mergeOptions(to, m, strats, true));
  }
  for (const key in from) {
    if (asMixin && key === "expose")
      ;
    else {
      const strat = internalOptionMergeStrats[key] || strats && strats[key];
      to[key] = strat ? strat(to[key], from[key]) : from[key];
    }
  }
  return to;
}
const internalOptionMergeStrats = {
  data: mergeDataFn,
  props: mergeObjectOptions,
  emits: mergeObjectOptions,
  // objects
  methods: mergeObjectOptions,
  computed: mergeObjectOptions,
  // lifecycle
  beforeCreate: mergeAsArray,
  created: mergeAsArray,
  beforeMount: mergeAsArray,
  mounted: mergeAsArray,
  beforeUpdate: mergeAsArray,
  updated: mergeAsArray,
  beforeDestroy: mergeAsArray,
  beforeUnmount: mergeAsArray,
  destroyed: mergeAsArray,
  unmounted: mergeAsArray,
  activated: mergeAsArray,
  deactivated: mergeAsArray,
  errorCaptured: mergeAsArray,
  serverPrefetch: mergeAsArray,
  // assets
  components: mergeObjectOptions,
  directives: mergeObjectOptions,
  // watch
  watch: mergeWatchOptions,
  // provide / inject
  provide: mergeDataFn,
  inject: mergeInject
};
function mergeDataFn(to, from) {
  if (!from) {
    return to;
  }
  if (!to) {
    return from;
  }
  return function mergedDataFn() {
    return extend$2(isFunction$1(to) ? to.call(this, this) : to, isFunction$1(from) ? from.call(this, this) : from);
  };
}
function mergeInject(to, from) {
  return mergeObjectOptions(normalizeInject(to), normalizeInject(from));
}
function normalizeInject(raw) {
  if (isArray$1(raw)) {
    const res = {};
    for (let i = 0; i < raw.length; i++) {
      res[raw[i]] = raw[i];
    }
    return res;
  }
  return raw;
}
function mergeAsArray(to, from) {
  return to ? [...new Set([].concat(to, from))] : from;
}
function mergeObjectOptions(to, from) {
  return to ? extend$2(extend$2(/* @__PURE__ */ Object.create(null), to), from) : from;
}
function mergeWatchOptions(to, from) {
  if (!to)
    return from;
  if (!from)
    return to;
  const merged = extend$2(/* @__PURE__ */ Object.create(null), to);
  for (const key in from) {
    merged[key] = mergeAsArray(to[key], from[key]);
  }
  return merged;
}
function initProps(instance, rawProps, isStateful, isSSR = false) {
  const props2 = {};
  const attrs = {};
  def(attrs, InternalObjectKey, 1);
  instance.propsDefaults = /* @__PURE__ */ Object.create(null);
  setFullProps(instance, rawProps, props2, attrs);
  for (const key in instance.propsOptions[0]) {
    if (!(key in props2)) {
      props2[key] = void 0;
    }
  }
  if (isStateful) {
    instance.props = isSSR ? props2 : shallowReactive(props2);
  } else {
    if (!instance.type.props) {
      instance.props = attrs;
    } else {
      instance.props = props2;
    }
  }
  instance.attrs = attrs;
}
function updateProps(instance, rawProps, rawPrevProps, optimized) {
  const { props: props2, attrs, vnode: { patchFlag } } = instance;
  const rawCurrentProps = toRaw(props2);
  const [options] = instance.propsOptions;
  let hasAttrsChanged = false;
  if (
    // always force full diff in dev
    // - #1942 if hmr is enabled with sfc component
    // - vite#872 non-sfc component used by sfc component
    (optimized || patchFlag > 0) && !(patchFlag & 16)
  ) {
    if (patchFlag & 8) {
      const propsToUpdate = instance.vnode.dynamicProps;
      for (let i = 0; i < propsToUpdate.length; i++) {
        let key = propsToUpdate[i];
        if (isEmitListener(instance.emitsOptions, key)) {
          continue;
        }
        const value = rawProps[key];
        if (options) {
          if (hasOwn(attrs, key)) {
            if (value !== attrs[key]) {
              attrs[key] = value;
              hasAttrsChanged = true;
            }
          } else {
            const camelizedKey = camelize(key);
            props2[camelizedKey] = resolvePropValue(
              options,
              rawCurrentProps,
              camelizedKey,
              value,
              instance,
              false
              /* isAbsent */
            );
          }
        } else {
          if (value !== attrs[key]) {
            attrs[key] = value;
            hasAttrsChanged = true;
          }
        }
      }
    }
  } else {
    if (setFullProps(instance, rawProps, props2, attrs)) {
      hasAttrsChanged = true;
    }
    let kebabKey;
    for (const key in rawCurrentProps) {
      if (!rawProps || // for camelCase
      !hasOwn(rawProps, key) && // it's possible the original props was passed in as kebab-case
      // and converted to camelCase (#955)
      ((kebabKey = hyphenate(key)) === key || !hasOwn(rawProps, kebabKey))) {
        if (options) {
          if (rawPrevProps && // for camelCase
          (rawPrevProps[key] !== void 0 || // for kebab-case
          rawPrevProps[kebabKey] !== void 0)) {
            props2[key] = resolvePropValue(
              options,
              rawCurrentProps,
              key,
              void 0,
              instance,
              true
              /* isAbsent */
            );
          }
        } else {
          delete props2[key];
        }
      }
    }
    if (attrs !== rawCurrentProps) {
      for (const key in attrs) {
        if (!rawProps || !hasOwn(rawProps, key) && true) {
          delete attrs[key];
          hasAttrsChanged = true;
        }
      }
    }
  }
  if (hasAttrsChanged) {
    trigger(instance, "set", "$attrs");
  }
}
function setFullProps(instance, rawProps, props2, attrs) {
  const [options, needCastKeys] = instance.propsOptions;
  let hasAttrsChanged = false;
  let rawCastValues;
  if (rawProps) {
    for (let key in rawProps) {
      if (isReservedProp(key)) {
        continue;
      }
      const value = rawProps[key];
      let camelKey;
      if (options && hasOwn(options, camelKey = camelize(key))) {
        if (!needCastKeys || !needCastKeys.includes(camelKey)) {
          props2[camelKey] = value;
        } else {
          (rawCastValues || (rawCastValues = {}))[camelKey] = value;
        }
      } else if (!isEmitListener(instance.emitsOptions, key)) {
        if (!(key in attrs) || value !== attrs[key]) {
          attrs[key] = value;
          hasAttrsChanged = true;
        }
      }
    }
  }
  if (needCastKeys) {
    const rawCurrentProps = toRaw(props2);
    const castValues = rawCastValues || EMPTY_OBJ;
    for (let i = 0; i < needCastKeys.length; i++) {
      const key = needCastKeys[i];
      props2[key] = resolvePropValue(options, rawCurrentProps, key, castValues[key], instance, !hasOwn(castValues, key));
    }
  }
  return hasAttrsChanged;
}
function resolvePropValue(options, props2, key, value, instance, isAbsent) {
  const opt = options[key];
  if (opt != null) {
    const hasDefault = hasOwn(opt, "default");
    if (hasDefault && value === void 0) {
      const defaultValue = opt.default;
      if (opt.type !== Function && isFunction$1(defaultValue)) {
        const { propsDefaults } = instance;
        if (key in propsDefaults) {
          value = propsDefaults[key];
        } else {
          setCurrentInstance(instance);
          value = propsDefaults[key] = defaultValue.call(null, props2);
          unsetCurrentInstance();
        }
      } else {
        value = defaultValue;
      }
    }
    if (opt[
      0
      /* BooleanFlags.shouldCast */
    ]) {
      if (isAbsent && !hasDefault) {
        value = false;
      } else if (opt[
        1
        /* BooleanFlags.shouldCastTrue */
      ] && (value === "" || value === hyphenate(key))) {
        value = true;
      }
    }
  }
  return value;
}
function normalizePropsOptions(comp, appContext, asMixin = false) {
  const cache = appContext.propsCache;
  const cached = cache.get(comp);
  if (cached) {
    return cached;
  }
  const raw = comp.props;
  const normalized = {};
  const needCastKeys = [];
  let hasExtends = false;
  if (!isFunction$1(comp)) {
    const extendProps = (raw2) => {
      hasExtends = true;
      const [props2, keys2] = normalizePropsOptions(raw2, appContext, true);
      extend$2(normalized, props2);
      if (keys2)
        needCastKeys.push(...keys2);
    };
    if (!asMixin && appContext.mixins.length) {
      appContext.mixins.forEach(extendProps);
    }
    if (comp.extends) {
      extendProps(comp.extends);
    }
    if (comp.mixins) {
      comp.mixins.forEach(extendProps);
    }
  }
  if (!raw && !hasExtends) {
    if (isObject$2(comp)) {
      cache.set(comp, EMPTY_ARR);
    }
    return EMPTY_ARR;
  }
  if (isArray$1(raw)) {
    for (let i = 0; i < raw.length; i++) {
      const normalizedKey = camelize(raw[i]);
      if (validatePropName(normalizedKey)) {
        normalized[normalizedKey] = EMPTY_OBJ;
      }
    }
  } else if (raw) {
    for (const key in raw) {
      const normalizedKey = camelize(key);
      if (validatePropName(normalizedKey)) {
        const opt = raw[key];
        const prop = normalized[normalizedKey] = isArray$1(opt) || isFunction$1(opt) ? { type: opt } : Object.assign({}, opt);
        if (prop) {
          const booleanIndex = getTypeIndex(Boolean, prop.type);
          const stringIndex = getTypeIndex(String, prop.type);
          prop[
            0
            /* BooleanFlags.shouldCast */
          ] = booleanIndex > -1;
          prop[
            1
            /* BooleanFlags.shouldCastTrue */
          ] = stringIndex < 0 || booleanIndex < stringIndex;
          if (booleanIndex > -1 || hasOwn(prop, "default")) {
            needCastKeys.push(normalizedKey);
          }
        }
      }
    }
  }
  const res = [normalized, needCastKeys];
  if (isObject$2(comp)) {
    cache.set(comp, res);
  }
  return res;
}
function validatePropName(key) {
  if (key[0] !== "$") {
    return true;
  }
  return false;
}
function getType(ctor) {
  const match = ctor && ctor.toString().match(/^\s*(function|class) (\w+)/);
  return match ? match[2] : ctor === null ? "null" : "";
}
function isSameType(a, b) {
  return getType(a) === getType(b);
}
function getTypeIndex(type, expectedTypes) {
  if (isArray$1(expectedTypes)) {
    return expectedTypes.findIndex((t) => isSameType(t, type));
  } else if (isFunction$1(expectedTypes)) {
    return isSameType(expectedTypes, type) ? 0 : -1;
  }
  return -1;
}
const isInternalKey = (key) => key[0] === "_" || key === "$stable";
const normalizeSlotValue = (value) => isArray$1(value) ? value.map(normalizeVNode) : [normalizeVNode(value)];
const normalizeSlot = (key, rawSlot, ctx) => {
  if (rawSlot._n) {
    return rawSlot;
  }
  const normalized = withCtx((...args) => {
    if (false)
      ;
    return normalizeSlotValue(rawSlot(...args));
  }, ctx);
  normalized._c = false;
  return normalized;
};
const normalizeObjectSlots = (rawSlots, slots, instance) => {
  const ctx = rawSlots._ctx;
  for (const key in rawSlots) {
    if (isInternalKey(key))
      continue;
    const value = rawSlots[key];
    if (isFunction$1(value)) {
      slots[key] = normalizeSlot(key, value, ctx);
    } else if (value != null) {
      const normalized = normalizeSlotValue(value);
      slots[key] = () => normalized;
    }
  }
};
const normalizeVNodeSlots = (instance, children) => {
  const normalized = normalizeSlotValue(children);
  instance.slots.default = () => normalized;
};
const initSlots = (instance, children) => {
  if (instance.vnode.shapeFlag & 32) {
    const type = children._;
    if (type) {
      instance.slots = toRaw(children);
      def(children, "_", type);
    } else {
      normalizeObjectSlots(children, instance.slots = {});
    }
  } else {
    instance.slots = {};
    if (children) {
      normalizeVNodeSlots(instance, children);
    }
  }
  def(instance.slots, InternalObjectKey, 1);
};
const updateSlots = (instance, children, optimized) => {
  const { vnode, slots } = instance;
  let needDeletionCheck = true;
  let deletionComparisonTarget = EMPTY_OBJ;
  if (vnode.shapeFlag & 32) {
    const type = children._;
    if (type) {
      if (optimized && type === 1) {
        needDeletionCheck = false;
      } else {
        extend$2(slots, children);
        if (!optimized && type === 1) {
          delete slots._;
        }
      }
    } else {
      needDeletionCheck = !children.$stable;
      normalizeObjectSlots(children, slots);
    }
    deletionComparisonTarget = children;
  } else if (children) {
    normalizeVNodeSlots(instance, children);
    deletionComparisonTarget = { default: 1 };
  }
  if (needDeletionCheck) {
    for (const key in slots) {
      if (!isInternalKey(key) && !(key in deletionComparisonTarget)) {
        delete slots[key];
      }
    }
  }
};
function createAppContext() {
  return {
    app: null,
    config: {
      isNativeTag: NO,
      performance: false,
      globalProperties: {},
      optionMergeStrategies: {},
      errorHandler: void 0,
      warnHandler: void 0,
      compilerOptions: {}
    },
    mixins: [],
    components: {},
    directives: {},
    provides: /* @__PURE__ */ Object.create(null),
    optionsCache: /* @__PURE__ */ new WeakMap(),
    propsCache: /* @__PURE__ */ new WeakMap(),
    emitsCache: /* @__PURE__ */ new WeakMap()
  };
}
let uid$1 = 0;
function createAppAPI(render2, hydrate2) {
  return function createApp2(rootComponent, rootProps = null) {
    if (!isFunction$1(rootComponent)) {
      rootComponent = Object.assign({}, rootComponent);
    }
    if (rootProps != null && !isObject$2(rootProps)) {
      rootProps = null;
    }
    const context = createAppContext();
    const installedPlugins = /* @__PURE__ */ new Set();
    let isMounted = false;
    const app = context.app = {
      _uid: uid$1++,
      _component: rootComponent,
      _props: rootProps,
      _container: null,
      _context: context,
      _instance: null,
      version,
      get config() {
        return context.config;
      },
      set config(v) {
      },
      use(plugin, ...options) {
        if (installedPlugins.has(plugin))
          ;
        else if (plugin && isFunction$1(plugin.install)) {
          installedPlugins.add(plugin);
          plugin.install(app, ...options);
        } else if (isFunction$1(plugin)) {
          installedPlugins.add(plugin);
          plugin(app, ...options);
        } else
          ;
        return app;
      },
      mixin(mixin) {
        {
          if (!context.mixins.includes(mixin)) {
            context.mixins.push(mixin);
          }
        }
        return app;
      },
      component(name, component) {
        if (!component) {
          return context.components[name];
        }
        context.components[name] = component;
        return app;
      },
      directive(name, directive) {
        if (!directive) {
          return context.directives[name];
        }
        context.directives[name] = directive;
        return app;
      },
      mount(rootContainer, isHydrate, isSVG) {
        if (!isMounted) {
          const vnode = createVNode(rootComponent, rootProps);
          vnode.appContext = context;
          if (isHydrate && hydrate2) {
            hydrate2(vnode, rootContainer);
          } else {
            render2(vnode, rootContainer, isSVG);
          }
          isMounted = true;
          app._container = rootContainer;
          rootContainer.__vue_app__ = app;
          return getExposeProxy(vnode.component) || vnode.component.proxy;
        }
      },
      unmount() {
        if (isMounted) {
          render2(null, app._container);
          delete app._container.__vue_app__;
        }
      },
      provide(key, value) {
        context.provides[key] = value;
        return app;
      }
    };
    return app;
  };
}
function setRef(rawRef, oldRawRef, parentSuspense, vnode, isUnmount = false) {
  if (isArray$1(rawRef)) {
    rawRef.forEach((r, i) => setRef(r, oldRawRef && (isArray$1(oldRawRef) ? oldRawRef[i] : oldRawRef), parentSuspense, vnode, isUnmount));
    return;
  }
  if (isAsyncWrapper(vnode) && !isUnmount) {
    return;
  }
  const refValue = vnode.shapeFlag & 4 ? getExposeProxy(vnode.component) || vnode.component.proxy : vnode.el;
  const value = isUnmount ? null : refValue;
  const { i: owner, r: ref2 } = rawRef;
  const oldRef = oldRawRef && oldRawRef.r;
  const refs = owner.refs === EMPTY_OBJ ? owner.refs = {} : owner.refs;
  const setupState = owner.setupState;
  if (oldRef != null && oldRef !== ref2) {
    if (isString$1(oldRef)) {
      refs[oldRef] = null;
      if (hasOwn(setupState, oldRef)) {
        setupState[oldRef] = null;
      }
    } else if (isRef(oldRef)) {
      oldRef.value = null;
    }
  }
  if (isFunction$1(ref2)) {
    callWithErrorHandling(ref2, owner, 12, [value, refs]);
  } else {
    const _isString = isString$1(ref2);
    const _isRef = isRef(ref2);
    if (_isString || _isRef) {
      const doSet = () => {
        if (rawRef.f) {
          const existing = _isString ? hasOwn(setupState, ref2) ? setupState[ref2] : refs[ref2] : ref2.value;
          if (isUnmount) {
            isArray$1(existing) && remove$1(existing, refValue);
          } else {
            if (!isArray$1(existing)) {
              if (_isString) {
                refs[ref2] = [refValue];
                if (hasOwn(setupState, ref2)) {
                  setupState[ref2] = refs[ref2];
                }
              } else {
                ref2.value = [refValue];
                if (rawRef.k)
                  refs[rawRef.k] = ref2.value;
              }
            } else if (!existing.includes(refValue)) {
              existing.push(refValue);
            }
          }
        } else if (_isString) {
          refs[ref2] = value;
          if (hasOwn(setupState, ref2)) {
            setupState[ref2] = value;
          }
        } else if (_isRef) {
          ref2.value = value;
          if (rawRef.k)
            refs[rawRef.k] = value;
        } else
          ;
      };
      if (value) {
        doSet.id = -1;
        queuePostRenderEffect(doSet, parentSuspense);
      } else {
        doSet();
      }
    }
  }
}
let hasMismatch = false;
const isSVGContainer = (container) => /svg/.test(container.namespaceURI) && container.tagName !== "foreignObject";
const isComment = (node) => node.nodeType === 8;
function createHydrationFunctions(rendererInternals) {
  const { mt: mountComponent, p: patch, o: { patchProp: patchProp2, createText, nextSibling, parentNode, remove: remove2, insert, createComment } } = rendererInternals;
  const hydrate2 = (vnode, container) => {
    if (!container.hasChildNodes()) {
      patch(null, vnode, container);
      flushPostFlushCbs();
      container._vnode = vnode;
      return;
    }
    hasMismatch = false;
    hydrateNode(container.firstChild, vnode, null, null, null);
    flushPostFlushCbs();
    container._vnode = vnode;
    if (hasMismatch && true) {
      console.error(`Hydration completed but contains mismatches.`);
    }
  };
  const hydrateNode = (node, vnode, parentComponent, parentSuspense, slotScopeIds, optimized = false) => {
    const isFragmentStart = isComment(node) && node.data === "[";
    const onMismatch = () => handleMismatch(node, vnode, parentComponent, parentSuspense, slotScopeIds, isFragmentStart);
    const { type, ref: ref2, shapeFlag, patchFlag } = vnode;
    let domType = node.nodeType;
    vnode.el = node;
    if (patchFlag === -2) {
      optimized = false;
      vnode.dynamicChildren = null;
    }
    let nextNode = null;
    switch (type) {
      case Text:
        if (domType !== 3) {
          if (vnode.children === "") {
            insert(vnode.el = createText(""), parentNode(node), node);
            nextNode = node;
          } else {
            nextNode = onMismatch();
          }
        } else {
          if (node.data !== vnode.children) {
            hasMismatch = true;
            node.data = vnode.children;
          }
          nextNode = nextSibling(node);
        }
        break;
      case Comment:
        if (domType !== 8 || isFragmentStart) {
          nextNode = onMismatch();
        } else {
          nextNode = nextSibling(node);
        }
        break;
      case Static:
        if (isFragmentStart) {
          node = nextSibling(node);
          domType = node.nodeType;
        }
        if (domType === 1 || domType === 3) {
          nextNode = node;
          const needToAdoptContent = !vnode.children.length;
          for (let i = 0; i < vnode.staticCount; i++) {
            if (needToAdoptContent)
              vnode.children += nextNode.nodeType === 1 ? nextNode.outerHTML : nextNode.data;
            if (i === vnode.staticCount - 1) {
              vnode.anchor = nextNode;
            }
            nextNode = nextSibling(nextNode);
          }
          return isFragmentStart ? nextSibling(nextNode) : nextNode;
        } else {
          onMismatch();
        }
        break;
      case Fragment:
        if (!isFragmentStart) {
          nextNode = onMismatch();
        } else {
          nextNode = hydrateFragment(node, vnode, parentComponent, parentSuspense, slotScopeIds, optimized);
        }
        break;
      default:
        if (shapeFlag & 1) {
          if (domType !== 1 || vnode.type.toLowerCase() !== node.tagName.toLowerCase()) {
            nextNode = onMismatch();
          } else {
            nextNode = hydrateElement(node, vnode, parentComponent, parentSuspense, slotScopeIds, optimized);
          }
        } else if (shapeFlag & 6) {
          vnode.slotScopeIds = slotScopeIds;
          const container = parentNode(node);
          mountComponent(vnode, container, null, parentComponent, parentSuspense, isSVGContainer(container), optimized);
          nextNode = isFragmentStart ? locateClosingAsyncAnchor(node) : nextSibling(node);
          if (nextNode && isComment(nextNode) && nextNode.data === "teleport end") {
            nextNode = nextSibling(nextNode);
          }
          if (isAsyncWrapper(vnode)) {
            let subTree;
            if (isFragmentStart) {
              subTree = createVNode(Fragment);
              subTree.anchor = nextNode ? nextNode.previousSibling : container.lastChild;
            } else {
              subTree = node.nodeType === 3 ? createTextVNode("") : createVNode("div");
            }
            subTree.el = node;
            vnode.component.subTree = subTree;
          }
        } else if (shapeFlag & 64) {
          if (domType !== 8) {
            nextNode = onMismatch();
          } else {
            nextNode = vnode.type.hydrate(node, vnode, parentComponent, parentSuspense, slotScopeIds, optimized, rendererInternals, hydrateChildren);
          }
        } else if (shapeFlag & 128) {
          nextNode = vnode.type.hydrate(node, vnode, parentComponent, parentSuspense, isSVGContainer(parentNode(node)), slotScopeIds, optimized, rendererInternals, hydrateNode);
        } else
          ;
    }
    if (ref2 != null) {
      setRef(ref2, null, parentSuspense, vnode);
    }
    return nextNode;
  };
  const hydrateElement = (el, vnode, parentComponent, parentSuspense, slotScopeIds, optimized) => {
    optimized = optimized || !!vnode.dynamicChildren;
    const { type, props: props2, patchFlag, shapeFlag, dirs } = vnode;
    const forcePatchValue = type === "input" && dirs || type === "option";
    if (forcePatchValue || patchFlag !== -1) {
      if (dirs) {
        invokeDirectiveHook(vnode, null, parentComponent, "created");
      }
      if (props2) {
        if (forcePatchValue || !optimized || patchFlag & (16 | 32)) {
          for (const key in props2) {
            if (forcePatchValue && key.endsWith("value") || isOn(key) && !isReservedProp(key)) {
              patchProp2(el, key, null, props2[key], false, void 0, parentComponent);
            }
          }
        } else if (props2.onClick) {
          patchProp2(el, "onClick", null, props2.onClick, false, void 0, parentComponent);
        }
      }
      let vnodeHooks;
      if (vnodeHooks = props2 && props2.onVnodeBeforeMount) {
        invokeVNodeHook(vnodeHooks, parentComponent, vnode);
      }
      if (dirs) {
        invokeDirectiveHook(vnode, null, parentComponent, "beforeMount");
      }
      if ((vnodeHooks = props2 && props2.onVnodeMounted) || dirs) {
        queueEffectWithSuspense(() => {
          vnodeHooks && invokeVNodeHook(vnodeHooks, parentComponent, vnode);
          dirs && invokeDirectiveHook(vnode, null, parentComponent, "mounted");
        }, parentSuspense);
      }
      if (shapeFlag & 16 && // skip if element has innerHTML / textContent
      !(props2 && (props2.innerHTML || props2.textContent))) {
        let next = hydrateChildren(el.firstChild, vnode, el, parentComponent, parentSuspense, slotScopeIds, optimized);
        while (next) {
          hasMismatch = true;
          const cur = next;
          next = next.nextSibling;
          remove2(cur);
        }
      } else if (shapeFlag & 8) {
        if (el.textContent !== vnode.children) {
          hasMismatch = true;
          el.textContent = vnode.children;
        }
      }
    }
    return el.nextSibling;
  };
  const hydrateChildren = (node, parentVNode, container, parentComponent, parentSuspense, slotScopeIds, optimized) => {
    optimized = optimized || !!parentVNode.dynamicChildren;
    const children = parentVNode.children;
    const l = children.length;
    for (let i = 0; i < l; i++) {
      const vnode = optimized ? children[i] : children[i] = normalizeVNode(children[i]);
      if (node) {
        node = hydrateNode(node, vnode, parentComponent, parentSuspense, slotScopeIds, optimized);
      } else if (vnode.type === Text && !vnode.children) {
        continue;
      } else {
        hasMismatch = true;
        patch(null, vnode, container, null, parentComponent, parentSuspense, isSVGContainer(container), slotScopeIds);
      }
    }
    return node;
  };
  const hydrateFragment = (node, vnode, parentComponent, parentSuspense, slotScopeIds, optimized) => {
    const { slotScopeIds: fragmentSlotScopeIds } = vnode;
    if (fragmentSlotScopeIds) {
      slotScopeIds = slotScopeIds ? slotScopeIds.concat(fragmentSlotScopeIds) : fragmentSlotScopeIds;
    }
    const container = parentNode(node);
    const next = hydrateChildren(nextSibling(node), vnode, container, parentComponent, parentSuspense, slotScopeIds, optimized);
    if (next && isComment(next) && next.data === "]") {
      return nextSibling(vnode.anchor = next);
    } else {
      hasMismatch = true;
      insert(vnode.anchor = createComment(`]`), container, next);
      return next;
    }
  };
  const handleMismatch = (node, vnode, parentComponent, parentSuspense, slotScopeIds, isFragment) => {
    hasMismatch = true;
    vnode.el = null;
    if (isFragment) {
      const end = locateClosingAsyncAnchor(node);
      while (true) {
        const next2 = nextSibling(node);
        if (next2 && next2 !== end) {
          remove2(next2);
        } else {
          break;
        }
      }
    }
    const next = nextSibling(node);
    const container = parentNode(node);
    remove2(node);
    patch(null, vnode, container, next, parentComponent, parentSuspense, isSVGContainer(container), slotScopeIds);
    return next;
  };
  const locateClosingAsyncAnchor = (node) => {
    let match = 0;
    while (node) {
      node = nextSibling(node);
      if (node && isComment(node)) {
        if (node.data === "[")
          match++;
        if (node.data === "]") {
          if (match === 0) {
            return nextSibling(node);
          } else {
            match--;
          }
        }
      }
    }
    return node;
  };
  return [hydrate2, hydrateNode];
}
const queuePostRenderEffect = queueEffectWithSuspense;
function createRenderer(options) {
  return baseCreateRenderer(options);
}
function createHydrationRenderer(options) {
  return baseCreateRenderer(options, createHydrationFunctions);
}
function baseCreateRenderer(options, createHydrationFns) {
  const target = getGlobalThis();
  target.__VUE__ = true;
  const { insert: hostInsert, remove: hostRemove, patchProp: hostPatchProp, createElement: hostCreateElement, createText: hostCreateText, createComment: hostCreateComment, setText: hostSetText, setElementText: hostSetElementText, parentNode: hostParentNode, nextSibling: hostNextSibling, setScopeId: hostSetScopeId = NOOP, insertStaticContent: hostInsertStaticContent } = options;
  const patch = (n1, n2, container, anchor = null, parentComponent = null, parentSuspense = null, isSVG = false, slotScopeIds = null, optimized = !!n2.dynamicChildren) => {
    if (n1 === n2) {
      return;
    }
    if (n1 && !isSameVNodeType(n1, n2)) {
      anchor = getNextHostNode(n1);
      unmount(n1, parentComponent, parentSuspense, true);
      n1 = null;
    }
    if (n2.patchFlag === -2) {
      optimized = false;
      n2.dynamicChildren = null;
    }
    const { type, ref: ref2, shapeFlag } = n2;
    switch (type) {
      case Text:
        processText(n1, n2, container, anchor);
        break;
      case Comment:
        processCommentNode(n1, n2, container, anchor);
        break;
      case Static:
        if (n1 == null) {
          mountStaticNode(n2, container, anchor, isSVG);
        }
        break;
      case Fragment:
        processFragment(n1, n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);
        break;
      default:
        if (shapeFlag & 1) {
          processElement(n1, n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);
        } else if (shapeFlag & 6) {
          processComponent(n1, n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);
        } else if (shapeFlag & 64) {
          type.process(n1, n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized, internals);
        } else if (shapeFlag & 128) {
          type.process(n1, n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized, internals);
        } else
          ;
    }
    if (ref2 != null && parentComponent) {
      setRef(ref2, n1 && n1.ref, parentSuspense, n2 || n1, !n2);
    }
  };
  const processText = (n1, n2, container, anchor) => {
    if (n1 == null) {
      hostInsert(n2.el = hostCreateText(n2.children), container, anchor);
    } else {
      const el = n2.el = n1.el;
      if (n2.children !== n1.children) {
        hostSetText(el, n2.children);
      }
    }
  };
  const processCommentNode = (n1, n2, container, anchor) => {
    if (n1 == null) {
      hostInsert(n2.el = hostCreateComment(n2.children || ""), container, anchor);
    } else {
      n2.el = n1.el;
    }
  };
  const mountStaticNode = (n2, container, anchor, isSVG) => {
    [n2.el, n2.anchor] = hostInsertStaticContent(n2.children, container, anchor, isSVG, n2.el, n2.anchor);
  };
  const moveStaticNode = ({ el, anchor }, container, nextSibling) => {
    let next;
    while (el && el !== anchor) {
      next = hostNextSibling(el);
      hostInsert(el, container, nextSibling);
      el = next;
    }
    hostInsert(anchor, container, nextSibling);
  };
  const removeStaticNode = ({ el, anchor }) => {
    let next;
    while (el && el !== anchor) {
      next = hostNextSibling(el);
      hostRemove(el);
      el = next;
    }
    hostRemove(anchor);
  };
  const processElement = (n1, n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized) => {
    isSVG = isSVG || n2.type === "svg";
    if (n1 == null) {
      mountElement(n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);
    } else {
      patchElement(n1, n2, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);
    }
  };
  const mountElement = (vnode, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized) => {
    let el;
    let vnodeHook;
    const { type, props: props2, shapeFlag, transition, dirs } = vnode;
    el = vnode.el = hostCreateElement(vnode.type, isSVG, props2 && props2.is, props2);
    if (shapeFlag & 8) {
      hostSetElementText(el, vnode.children);
    } else if (shapeFlag & 16) {
      mountChildren(vnode.children, el, null, parentComponent, parentSuspense, isSVG && type !== "foreignObject", slotScopeIds, optimized);
    }
    if (dirs) {
      invokeDirectiveHook(vnode, null, parentComponent, "created");
    }
    setScopeId(el, vnode, vnode.scopeId, slotScopeIds, parentComponent);
    if (props2) {
      for (const key in props2) {
        if (key !== "value" && !isReservedProp(key)) {
          hostPatchProp(el, key, null, props2[key], isSVG, vnode.children, parentComponent, parentSuspense, unmountChildren);
        }
      }
      if ("value" in props2) {
        hostPatchProp(el, "value", null, props2.value);
      }
      if (vnodeHook = props2.onVnodeBeforeMount) {
        invokeVNodeHook(vnodeHook, parentComponent, vnode);
      }
    }
    if (dirs) {
      invokeDirectiveHook(vnode, null, parentComponent, "beforeMount");
    }
    const needCallTransitionHooks = (!parentSuspense || parentSuspense && !parentSuspense.pendingBranch) && transition && !transition.persisted;
    if (needCallTransitionHooks) {
      transition.beforeEnter(el);
    }
    hostInsert(el, container, anchor);
    if ((vnodeHook = props2 && props2.onVnodeMounted) || needCallTransitionHooks || dirs) {
      queuePostRenderEffect(() => {
        vnodeHook && invokeVNodeHook(vnodeHook, parentComponent, vnode);
        needCallTransitionHooks && transition.enter(el);
        dirs && invokeDirectiveHook(vnode, null, parentComponent, "mounted");
      }, parentSuspense);
    }
  };
  const setScopeId = (el, vnode, scopeId, slotScopeIds, parentComponent) => {
    if (scopeId) {
      hostSetScopeId(el, scopeId);
    }
    if (slotScopeIds) {
      for (let i = 0; i < slotScopeIds.length; i++) {
        hostSetScopeId(el, slotScopeIds[i]);
      }
    }
    if (parentComponent) {
      let subTree = parentComponent.subTree;
      if (vnode === subTree) {
        const parentVNode = parentComponent.vnode;
        setScopeId(el, parentVNode, parentVNode.scopeId, parentVNode.slotScopeIds, parentComponent.parent);
      }
    }
  };
  const mountChildren = (children, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized, start = 0) => {
    for (let i = start; i < children.length; i++) {
      const child = children[i] = optimized ? cloneIfMounted(children[i]) : normalizeVNode(children[i]);
      patch(null, child, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);
    }
  };
  const patchElement = (n1, n2, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized) => {
    const el = n2.el = n1.el;
    let { patchFlag, dynamicChildren, dirs } = n2;
    patchFlag |= n1.patchFlag & 16;
    const oldProps = n1.props || EMPTY_OBJ;
    const newProps = n2.props || EMPTY_OBJ;
    let vnodeHook;
    parentComponent && toggleRecurse(parentComponent, false);
    if (vnodeHook = newProps.onVnodeBeforeUpdate) {
      invokeVNodeHook(vnodeHook, parentComponent, n2, n1);
    }
    if (dirs) {
      invokeDirectiveHook(n2, n1, parentComponent, "beforeUpdate");
    }
    parentComponent && toggleRecurse(parentComponent, true);
    const areChildrenSVG = isSVG && n2.type !== "foreignObject";
    if (dynamicChildren) {
      patchBlockChildren(n1.dynamicChildren, dynamicChildren, el, parentComponent, parentSuspense, areChildrenSVG, slotScopeIds);
    } else if (!optimized) {
      patchChildren(n1, n2, el, null, parentComponent, parentSuspense, areChildrenSVG, slotScopeIds, false);
    }
    if (patchFlag > 0) {
      if (patchFlag & 16) {
        patchProps(el, n2, oldProps, newProps, parentComponent, parentSuspense, isSVG);
      } else {
        if (patchFlag & 2) {
          if (oldProps.class !== newProps.class) {
            hostPatchProp(el, "class", null, newProps.class, isSVG);
          }
        }
        if (patchFlag & 4) {
          hostPatchProp(el, "style", oldProps.style, newProps.style, isSVG);
        }
        if (patchFlag & 8) {
          const propsToUpdate = n2.dynamicProps;
          for (let i = 0; i < propsToUpdate.length; i++) {
            const key = propsToUpdate[i];
            const prev = oldProps[key];
            const next = newProps[key];
            if (next !== prev || key === "value") {
              hostPatchProp(el, key, prev, next, isSVG, n1.children, parentComponent, parentSuspense, unmountChildren);
            }
          }
        }
      }
      if (patchFlag & 1) {
        if (n1.children !== n2.children) {
          hostSetElementText(el, n2.children);
        }
      }
    } else if (!optimized && dynamicChildren == null) {
      patchProps(el, n2, oldProps, newProps, parentComponent, parentSuspense, isSVG);
    }
    if ((vnodeHook = newProps.onVnodeUpdated) || dirs) {
      queuePostRenderEffect(() => {
        vnodeHook && invokeVNodeHook(vnodeHook, parentComponent, n2, n1);
        dirs && invokeDirectiveHook(n2, n1, parentComponent, "updated");
      }, parentSuspense);
    }
  };
  const patchBlockChildren = (oldChildren, newChildren, fallbackContainer, parentComponent, parentSuspense, isSVG, slotScopeIds) => {
    for (let i = 0; i < newChildren.length; i++) {
      const oldVNode = oldChildren[i];
      const newVNode = newChildren[i];
      const container = (
        // oldVNode may be an errored async setup() component inside Suspense
        // which will not have a mounted element
        oldVNode.el && // - In the case of a Fragment, we need to provide the actual parent
        // of the Fragment itself so it can move its children.
        (oldVNode.type === Fragment || // - In the case of different nodes, there is going to be a replacement
        // which also requires the correct parent container
        !isSameVNodeType(oldVNode, newVNode) || // - In the case of a component, it could contain anything.
        oldVNode.shapeFlag & (6 | 64)) ? hostParentNode(oldVNode.el) : (
          // In other cases, the parent container is not actually used so we
          // just pass the block element here to avoid a DOM parentNode call.
          fallbackContainer
        )
      );
      patch(oldVNode, newVNode, container, null, parentComponent, parentSuspense, isSVG, slotScopeIds, true);
    }
  };
  const patchProps = (el, vnode, oldProps, newProps, parentComponent, parentSuspense, isSVG) => {
    if (oldProps !== newProps) {
      if (oldProps !== EMPTY_OBJ) {
        for (const key in oldProps) {
          if (!isReservedProp(key) && !(key in newProps)) {
            hostPatchProp(el, key, oldProps[key], null, isSVG, vnode.children, parentComponent, parentSuspense, unmountChildren);
          }
        }
      }
      for (const key in newProps) {
        if (isReservedProp(key))
          continue;
        const next = newProps[key];
        const prev = oldProps[key];
        if (next !== prev && key !== "value") {
          hostPatchProp(el, key, prev, next, isSVG, vnode.children, parentComponent, parentSuspense, unmountChildren);
        }
      }
      if ("value" in newProps) {
        hostPatchProp(el, "value", oldProps.value, newProps.value);
      }
    }
  };
  const processFragment = (n1, n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized) => {
    const fragmentStartAnchor = n2.el = n1 ? n1.el : hostCreateText("");
    const fragmentEndAnchor = n2.anchor = n1 ? n1.anchor : hostCreateText("");
    let { patchFlag, dynamicChildren, slotScopeIds: fragmentSlotScopeIds } = n2;
    if (fragmentSlotScopeIds) {
      slotScopeIds = slotScopeIds ? slotScopeIds.concat(fragmentSlotScopeIds) : fragmentSlotScopeIds;
    }
    if (n1 == null) {
      hostInsert(fragmentStartAnchor, container, anchor);
      hostInsert(fragmentEndAnchor, container, anchor);
      mountChildren(n2.children, container, fragmentEndAnchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);
    } else {
      if (patchFlag > 0 && patchFlag & 64 && dynamicChildren && // #2715 the previous fragment could've been a BAILed one as a result
      // of renderSlot() with no valid children
      n1.dynamicChildren) {
        patchBlockChildren(n1.dynamicChildren, dynamicChildren, container, parentComponent, parentSuspense, isSVG, slotScopeIds);
        if (
          // #2080 if the stable fragment has a key, it's a <template v-for> that may
          //  get moved around. Make sure all root level vnodes inherit el.
          // #2134 or if it's a component root, it may also get moved around
          // as the component is being moved.
          n2.key != null || parentComponent && n2 === parentComponent.subTree
        ) {
          traverseStaticChildren(
            n1,
            n2,
            true
            /* shallow */
          );
        }
      } else {
        patchChildren(n1, n2, container, fragmentEndAnchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);
      }
    }
  };
  const processComponent = (n1, n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized) => {
    n2.slotScopeIds = slotScopeIds;
    if (n1 == null) {
      if (n2.shapeFlag & 512) {
        parentComponent.ctx.activate(n2, container, anchor, isSVG, optimized);
      } else {
        mountComponent(n2, container, anchor, parentComponent, parentSuspense, isSVG, optimized);
      }
    } else {
      updateComponent(n1, n2, optimized);
    }
  };
  const mountComponent = (initialVNode, container, anchor, parentComponent, parentSuspense, isSVG, optimized) => {
    const instance = initialVNode.component = createComponentInstance(initialVNode, parentComponent, parentSuspense);
    if (isKeepAlive(initialVNode)) {
      instance.ctx.renderer = internals;
    }
    {
      setupComponent(instance);
    }
    if (instance.asyncDep) {
      parentSuspense && parentSuspense.registerDep(instance, setupRenderEffect);
      if (!initialVNode.el) {
        const placeholder = instance.subTree = createVNode(Comment);
        processCommentNode(null, placeholder, container, anchor);
      }
      return;
    }
    setupRenderEffect(instance, initialVNode, container, anchor, parentSuspense, isSVG, optimized);
  };
  const updateComponent = (n1, n2, optimized) => {
    const instance = n2.component = n1.component;
    if (shouldUpdateComponent(n1, n2, optimized)) {
      if (instance.asyncDep && !instance.asyncResolved) {
        updateComponentPreRender(instance, n2, optimized);
        return;
      } else {
        instance.next = n2;
        invalidateJob(instance.update);
        instance.update();
      }
    } else {
      n2.el = n1.el;
      instance.vnode = n2;
    }
  };
  const setupRenderEffect = (instance, initialVNode, container, anchor, parentSuspense, isSVG, optimized) => {
    const componentUpdateFn = () => {
      if (!instance.isMounted) {
        let vnodeHook;
        const { el, props: props2 } = initialVNode;
        const { bm, m, parent } = instance;
        const isAsyncWrapperVNode = isAsyncWrapper(initialVNode);
        toggleRecurse(instance, false);
        if (bm) {
          invokeArrayFns(bm);
        }
        if (!isAsyncWrapperVNode && (vnodeHook = props2 && props2.onVnodeBeforeMount)) {
          invokeVNodeHook(vnodeHook, parent, initialVNode);
        }
        toggleRecurse(instance, true);
        if (el && hydrateNode) {
          const hydrateSubTree = () => {
            instance.subTree = renderComponentRoot(instance);
            hydrateNode(el, instance.subTree, instance, parentSuspense, null);
          };
          if (isAsyncWrapperVNode) {
            initialVNode.type.__asyncLoader().then(
              // note: we are moving the render call into an async callback,
              // which means it won't track dependencies - but it's ok because
              // a server-rendered async wrapper is already in resolved state
              // and it will never need to change.
              () => !instance.isUnmounted && hydrateSubTree()
            );
          } else {
            hydrateSubTree();
          }
        } else {
          const subTree = instance.subTree = renderComponentRoot(instance);
          patch(null, subTree, container, anchor, instance, parentSuspense, isSVG);
          initialVNode.el = subTree.el;
        }
        if (m) {
          queuePostRenderEffect(m, parentSuspense);
        }
        if (!isAsyncWrapperVNode && (vnodeHook = props2 && props2.onVnodeMounted)) {
          const scopedInitialVNode = initialVNode;
          queuePostRenderEffect(() => invokeVNodeHook(vnodeHook, parent, scopedInitialVNode), parentSuspense);
        }
        if (initialVNode.shapeFlag & 256 || parent && isAsyncWrapper(parent.vnode) && parent.vnode.shapeFlag & 256) {
          instance.a && queuePostRenderEffect(instance.a, parentSuspense);
        }
        instance.isMounted = true;
        initialVNode = container = anchor = null;
      } else {
        let { next, bu, u, parent, vnode } = instance;
        let originNext = next;
        let vnodeHook;
        toggleRecurse(instance, false);
        if (next) {
          next.el = vnode.el;
          updateComponentPreRender(instance, next, optimized);
        } else {
          next = vnode;
        }
        if (bu) {
          invokeArrayFns(bu);
        }
        if (vnodeHook = next.props && next.props.onVnodeBeforeUpdate) {
          invokeVNodeHook(vnodeHook, parent, next, vnode);
        }
        toggleRecurse(instance, true);
        const nextTree = renderComponentRoot(instance);
        const prevTree = instance.subTree;
        instance.subTree = nextTree;
        patch(
          prevTree,
          nextTree,
          // parent may have changed if it's in a teleport
          hostParentNode(prevTree.el),
          // anchor may have changed if it's in a fragment
          getNextHostNode(prevTree),
          instance,
          parentSuspense,
          isSVG
        );
        next.el = nextTree.el;
        if (originNext === null) {
          updateHOCHostEl(instance, nextTree.el);
        }
        if (u) {
          queuePostRenderEffect(u, parentSuspense);
        }
        if (vnodeHook = next.props && next.props.onVnodeUpdated) {
          queuePostRenderEffect(() => invokeVNodeHook(vnodeHook, parent, next, vnode), parentSuspense);
        }
      }
    };
    const effect2 = instance.effect = new ReactiveEffect(
      componentUpdateFn,
      () => queueJob(update),
      instance.scope
      // track it in component's effect scope
    );
    const update = instance.update = () => effect2.run();
    update.id = instance.uid;
    toggleRecurse(instance, true);
    update();
  };
  const updateComponentPreRender = (instance, nextVNode, optimized) => {
    nextVNode.component = instance;
    const prevProps = instance.vnode.props;
    instance.vnode = nextVNode;
    instance.next = null;
    updateProps(instance, nextVNode.props, prevProps, optimized);
    updateSlots(instance, nextVNode.children, optimized);
    pauseTracking();
    flushPreFlushCbs();
    resetTracking();
  };
  const patchChildren = (n1, n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized = false) => {
    const c1 = n1 && n1.children;
    const prevShapeFlag = n1 ? n1.shapeFlag : 0;
    const c2 = n2.children;
    const { patchFlag, shapeFlag } = n2;
    if (patchFlag > 0) {
      if (patchFlag & 128) {
        patchKeyedChildren(c1, c2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);
        return;
      } else if (patchFlag & 256) {
        patchUnkeyedChildren(c1, c2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);
        return;
      }
    }
    if (shapeFlag & 8) {
      if (prevShapeFlag & 16) {
        unmountChildren(c1, parentComponent, parentSuspense);
      }
      if (c2 !== c1) {
        hostSetElementText(container, c2);
      }
    } else {
      if (prevShapeFlag & 16) {
        if (shapeFlag & 16) {
          patchKeyedChildren(c1, c2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);
        } else {
          unmountChildren(c1, parentComponent, parentSuspense, true);
        }
      } else {
        if (prevShapeFlag & 8) {
          hostSetElementText(container, "");
        }
        if (shapeFlag & 16) {
          mountChildren(c2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);
        }
      }
    }
  };
  const patchUnkeyedChildren = (c1, c2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized) => {
    c1 = c1 || EMPTY_ARR;
    c2 = c2 || EMPTY_ARR;
    const oldLength = c1.length;
    const newLength = c2.length;
    const commonLength = Math.min(oldLength, newLength);
    let i;
    for (i = 0; i < commonLength; i++) {
      const nextChild = c2[i] = optimized ? cloneIfMounted(c2[i]) : normalizeVNode(c2[i]);
      patch(c1[i], nextChild, container, null, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);
    }
    if (oldLength > newLength) {
      unmountChildren(c1, parentComponent, parentSuspense, true, false, commonLength);
    } else {
      mountChildren(c2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized, commonLength);
    }
  };
  const patchKeyedChildren = (c1, c2, container, parentAnchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized) => {
    let i = 0;
    const l2 = c2.length;
    let e1 = c1.length - 1;
    let e2 = l2 - 1;
    while (i <= e1 && i <= e2) {
      const n1 = c1[i];
      const n2 = c2[i] = optimized ? cloneIfMounted(c2[i]) : normalizeVNode(c2[i]);
      if (isSameVNodeType(n1, n2)) {
        patch(n1, n2, container, null, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);
      } else {
        break;
      }
      i++;
    }
    while (i <= e1 && i <= e2) {
      const n1 = c1[e1];
      const n2 = c2[e2] = optimized ? cloneIfMounted(c2[e2]) : normalizeVNode(c2[e2]);
      if (isSameVNodeType(n1, n2)) {
        patch(n1, n2, container, null, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);
      } else {
        break;
      }
      e1--;
      e2--;
    }
    if (i > e1) {
      if (i <= e2) {
        const nextPos = e2 + 1;
        const anchor = nextPos < l2 ? c2[nextPos].el : parentAnchor;
        while (i <= e2) {
          patch(null, c2[i] = optimized ? cloneIfMounted(c2[i]) : normalizeVNode(c2[i]), container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);
          i++;
        }
      }
    } else if (i > e2) {
      while (i <= e1) {
        unmount(c1[i], parentComponent, parentSuspense, true);
        i++;
      }
    } else {
      const s1 = i;
      const s2 = i;
      const keyToNewIndexMap = /* @__PURE__ */ new Map();
      for (i = s2; i <= e2; i++) {
        const nextChild = c2[i] = optimized ? cloneIfMounted(c2[i]) : normalizeVNode(c2[i]);
        if (nextChild.key != null) {
          keyToNewIndexMap.set(nextChild.key, i);
        }
      }
      let j;
      let patched = 0;
      const toBePatched = e2 - s2 + 1;
      let moved = false;
      let maxNewIndexSoFar = 0;
      const newIndexToOldIndexMap = new Array(toBePatched);
      for (i = 0; i < toBePatched; i++)
        newIndexToOldIndexMap[i] = 0;
      for (i = s1; i <= e1; i++) {
        const prevChild = c1[i];
        if (patched >= toBePatched) {
          unmount(prevChild, parentComponent, parentSuspense, true);
          continue;
        }
        let newIndex;
        if (prevChild.key != null) {
          newIndex = keyToNewIndexMap.get(prevChild.key);
        } else {
          for (j = s2; j <= e2; j++) {
            if (newIndexToOldIndexMap[j - s2] === 0 && isSameVNodeType(prevChild, c2[j])) {
              newIndex = j;
              break;
            }
          }
        }
        if (newIndex === void 0) {
          unmount(prevChild, parentComponent, parentSuspense, true);
        } else {
          newIndexToOldIndexMap[newIndex - s2] = i + 1;
          if (newIndex >= maxNewIndexSoFar) {
            maxNewIndexSoFar = newIndex;
          } else {
            moved = true;
          }
          patch(prevChild, c2[newIndex], container, null, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);
          patched++;
        }
      }
      const increasingNewIndexSequence = moved ? getSequence(newIndexToOldIndexMap) : EMPTY_ARR;
      j = increasingNewIndexSequence.length - 1;
      for (i = toBePatched - 1; i >= 0; i--) {
        const nextIndex = s2 + i;
        const nextChild = c2[nextIndex];
        const anchor = nextIndex + 1 < l2 ? c2[nextIndex + 1].el : parentAnchor;
        if (newIndexToOldIndexMap[i] === 0) {
          patch(null, nextChild, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);
        } else if (moved) {
          if (j < 0 || i !== increasingNewIndexSequence[j]) {
            move(
              nextChild,
              container,
              anchor,
              2
              /* MoveType.REORDER */
            );
          } else {
            j--;
          }
        }
      }
    }
  };
  const move = (vnode, container, anchor, moveType, parentSuspense = null) => {
    const { el, type, transition, children, shapeFlag } = vnode;
    if (shapeFlag & 6) {
      move(vnode.component.subTree, container, anchor, moveType);
      return;
    }
    if (shapeFlag & 128) {
      vnode.suspense.move(container, anchor, moveType);
      return;
    }
    if (shapeFlag & 64) {
      type.move(vnode, container, anchor, internals);
      return;
    }
    if (type === Fragment) {
      hostInsert(el, container, anchor);
      for (let i = 0; i < children.length; i++) {
        move(children[i], container, anchor, moveType);
      }
      hostInsert(vnode.anchor, container, anchor);
      return;
    }
    if (type === Static) {
      moveStaticNode(vnode, container, anchor);
      return;
    }
    const needTransition = moveType !== 2 && shapeFlag & 1 && transition;
    if (needTransition) {
      if (moveType === 0) {
        transition.beforeEnter(el);
        hostInsert(el, container, anchor);
        queuePostRenderEffect(() => transition.enter(el), parentSuspense);
      } else {
        const { leave, delayLeave, afterLeave } = transition;
        const remove3 = () => hostInsert(el, container, anchor);
        const performLeave = () => {
          leave(el, () => {
            remove3();
            afterLeave && afterLeave();
          });
        };
        if (delayLeave) {
          delayLeave(el, remove3, performLeave);
        } else {
          performLeave();
        }
      }
    } else {
      hostInsert(el, container, anchor);
    }
  };
  const unmount = (vnode, parentComponent, parentSuspense, doRemove = false, optimized = false) => {
    const { type, props: props2, ref: ref2, children, dynamicChildren, shapeFlag, patchFlag, dirs } = vnode;
    if (ref2 != null) {
      setRef(ref2, null, parentSuspense, vnode, true);
    }
    if (shapeFlag & 256) {
      parentComponent.ctx.deactivate(vnode);
      return;
    }
    const shouldInvokeDirs = shapeFlag & 1 && dirs;
    const shouldInvokeVnodeHook = !isAsyncWrapper(vnode);
    let vnodeHook;
    if (shouldInvokeVnodeHook && (vnodeHook = props2 && props2.onVnodeBeforeUnmount)) {
      invokeVNodeHook(vnodeHook, parentComponent, vnode);
    }
    if (shapeFlag & 6) {
      unmountComponent(vnode.component, parentSuspense, doRemove);
    } else {
      if (shapeFlag & 128) {
        vnode.suspense.unmount(parentSuspense, doRemove);
        return;
      }
      if (shouldInvokeDirs) {
        invokeDirectiveHook(vnode, null, parentComponent, "beforeUnmount");
      }
      if (shapeFlag & 64) {
        vnode.type.remove(vnode, parentComponent, parentSuspense, optimized, internals, doRemove);
      } else if (dynamicChildren && // #1153: fast path should not be taken for non-stable (v-for) fragments
      (type !== Fragment || patchFlag > 0 && patchFlag & 64)) {
        unmountChildren(dynamicChildren, parentComponent, parentSuspense, false, true);
      } else if (type === Fragment && patchFlag & (128 | 256) || !optimized && shapeFlag & 16) {
        unmountChildren(children, parentComponent, parentSuspense);
      }
      if (doRemove) {
        remove2(vnode);
      }
    }
    if (shouldInvokeVnodeHook && (vnodeHook = props2 && props2.onVnodeUnmounted) || shouldInvokeDirs) {
      queuePostRenderEffect(() => {
        vnodeHook && invokeVNodeHook(vnodeHook, parentComponent, vnode);
        shouldInvokeDirs && invokeDirectiveHook(vnode, null, parentComponent, "unmounted");
      }, parentSuspense);
    }
  };
  const remove2 = (vnode) => {
    const { type, el, anchor, transition } = vnode;
    if (type === Fragment) {
      {
        removeFragment(el, anchor);
      }
      return;
    }
    if (type === Static) {
      removeStaticNode(vnode);
      return;
    }
    const performRemove = () => {
      hostRemove(el);
      if (transition && !transition.persisted && transition.afterLeave) {
        transition.afterLeave();
      }
    };
    if (vnode.shapeFlag & 1 && transition && !transition.persisted) {
      const { leave, delayLeave } = transition;
      const performLeave = () => leave(el, performRemove);
      if (delayLeave) {
        delayLeave(vnode.el, performRemove, performLeave);
      } else {
        performLeave();
      }
    } else {
      performRemove();
    }
  };
  const removeFragment = (cur, end) => {
    let next;
    while (cur !== end) {
      next = hostNextSibling(cur);
      hostRemove(cur);
      cur = next;
    }
    hostRemove(end);
  };
  const unmountComponent = (instance, parentSuspense, doRemove) => {
    const { bum, scope, update, subTree, um } = instance;
    if (bum) {
      invokeArrayFns(bum);
    }
    scope.stop();
    if (update) {
      update.active = false;
      unmount(subTree, instance, parentSuspense, doRemove);
    }
    if (um) {
      queuePostRenderEffect(um, parentSuspense);
    }
    queuePostRenderEffect(() => {
      instance.isUnmounted = true;
    }, parentSuspense);
    if (parentSuspense && parentSuspense.pendingBranch && !parentSuspense.isUnmounted && instance.asyncDep && !instance.asyncResolved && instance.suspenseId === parentSuspense.pendingId) {
      parentSuspense.deps--;
      if (parentSuspense.deps === 0) {
        parentSuspense.resolve();
      }
    }
  };
  const unmountChildren = (children, parentComponent, parentSuspense, doRemove = false, optimized = false, start = 0) => {
    for (let i = start; i < children.length; i++) {
      unmount(children[i], parentComponent, parentSuspense, doRemove, optimized);
    }
  };
  const getNextHostNode = (vnode) => {
    if (vnode.shapeFlag & 6) {
      return getNextHostNode(vnode.component.subTree);
    }
    if (vnode.shapeFlag & 128) {
      return vnode.suspense.next();
    }
    return hostNextSibling(vnode.anchor || vnode.el);
  };
  const render2 = (vnode, container, isSVG) => {
    if (vnode == null) {
      if (container._vnode) {
        unmount(container._vnode, null, null, true);
      }
    } else {
      patch(container._vnode || null, vnode, container, null, null, null, isSVG);
    }
    flushPreFlushCbs();
    flushPostFlushCbs();
    container._vnode = vnode;
  };
  const internals = {
    p: patch,
    um: unmount,
    m: move,
    r: remove2,
    mt: mountComponent,
    mc: mountChildren,
    pc: patchChildren,
    pbc: patchBlockChildren,
    n: getNextHostNode,
    o: options
  };
  let hydrate2;
  let hydrateNode;
  if (createHydrationFns) {
    [hydrate2, hydrateNode] = createHydrationFns(internals);
  }
  return {
    render: render2,
    hydrate: hydrate2,
    createApp: createAppAPI(render2, hydrate2)
  };
}
function toggleRecurse({ effect: effect2, update }, allowed) {
  effect2.allowRecurse = update.allowRecurse = allowed;
}
function traverseStaticChildren(n1, n2, shallow = false) {
  const ch1 = n1.children;
  const ch2 = n2.children;
  if (isArray$1(ch1) && isArray$1(ch2)) {
    for (let i = 0; i < ch1.length; i++) {
      const c1 = ch1[i];
      let c2 = ch2[i];
      if (c2.shapeFlag & 1 && !c2.dynamicChildren) {
        if (c2.patchFlag <= 0 || c2.patchFlag === 32) {
          c2 = ch2[i] = cloneIfMounted(ch2[i]);
          c2.el = c1.el;
        }
        if (!shallow)
          traverseStaticChildren(c1, c2);
      }
      if (c2.type === Text) {
        c2.el = c1.el;
      }
    }
  }
}
function getSequence(arr) {
  const p2 = arr.slice();
  const result = [0];
  let i, j, u, v, c;
  const len = arr.length;
  for (i = 0; i < len; i++) {
    const arrI = arr[i];
    if (arrI !== 0) {
      j = result[result.length - 1];
      if (arr[j] < arrI) {
        p2[i] = j;
        result.push(i);
        continue;
      }
      u = 0;
      v = result.length - 1;
      while (u < v) {
        c = u + v >> 1;
        if (arr[result[c]] < arrI) {
          u = c + 1;
        } else {
          v = c;
        }
      }
      if (arrI < arr[result[u]]) {
        if (u > 0) {
          p2[i] = result[u - 1];
        }
        result[u] = i;
      }
    }
  }
  u = result.length;
  v = result[u - 1];
  while (u-- > 0) {
    result[u] = v;
    v = p2[v];
  }
  return result;
}
const isTeleport = (type) => type.__isTeleport;
const isTeleportDisabled = (props2) => props2 && (props2.disabled || props2.disabled === "");
const isTargetSVG = (target) => typeof SVGElement !== "undefined" && target instanceof SVGElement;
const resolveTarget = (props2, select2) => {
  const targetSelector = props2 && props2.to;
  if (isString$1(targetSelector)) {
    if (!select2) {
      return null;
    } else {
      const target = select2(targetSelector);
      return target;
    }
  } else {
    return targetSelector;
  }
};
const TeleportImpl = {
  __isTeleport: true,
  process(n1, n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized, internals) {
    const { mc: mountChildren, pc: patchChildren, pbc: patchBlockChildren, o: { insert, querySelector, createText, createComment } } = internals;
    const disabled = isTeleportDisabled(n2.props);
    let { shapeFlag, children, dynamicChildren } = n2;
    if (n1 == null) {
      const placeholder = n2.el = createText("");
      const mainAnchor = n2.anchor = createText("");
      insert(placeholder, container, anchor);
      insert(mainAnchor, container, anchor);
      const target = n2.target = resolveTarget(n2.props, querySelector);
      const targetAnchor = n2.targetAnchor = createText("");
      if (target) {
        insert(targetAnchor, target);
        isSVG = isSVG || isTargetSVG(target);
      }
      const mount = (container2, anchor2) => {
        if (shapeFlag & 16) {
          mountChildren(children, container2, anchor2, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);
        }
      };
      if (disabled) {
        mount(container, mainAnchor);
      } else if (target) {
        mount(target, targetAnchor);
      }
    } else {
      n2.el = n1.el;
      const mainAnchor = n2.anchor = n1.anchor;
      const target = n2.target = n1.target;
      const targetAnchor = n2.targetAnchor = n1.targetAnchor;
      const wasDisabled = isTeleportDisabled(n1.props);
      const currentContainer = wasDisabled ? container : target;
      const currentAnchor = wasDisabled ? mainAnchor : targetAnchor;
      isSVG = isSVG || isTargetSVG(target);
      if (dynamicChildren) {
        patchBlockChildren(n1.dynamicChildren, dynamicChildren, currentContainer, parentComponent, parentSuspense, isSVG, slotScopeIds);
        traverseStaticChildren(n1, n2, true);
      } else if (!optimized) {
        patchChildren(n1, n2, currentContainer, currentAnchor, parentComponent, parentSuspense, isSVG, slotScopeIds, false);
      }
      if (disabled) {
        if (!wasDisabled) {
          moveTeleport(
            n2,
            container,
            mainAnchor,
            internals,
            1
            /* TeleportMoveTypes.TOGGLE */
          );
        }
      } else {
        if ((n2.props && n2.props.to) !== (n1.props && n1.props.to)) {
          const nextTarget = n2.target = resolveTarget(n2.props, querySelector);
          if (nextTarget) {
            moveTeleport(
              n2,
              nextTarget,
              null,
              internals,
              0
              /* TeleportMoveTypes.TARGET_CHANGE */
            );
          }
        } else if (wasDisabled) {
          moveTeleport(
            n2,
            target,
            targetAnchor,
            internals,
            1
            /* TeleportMoveTypes.TOGGLE */
          );
        }
      }
    }
    updateCssVars(n2);
  },
  remove(vnode, parentComponent, parentSuspense, optimized, { um: unmount, o: { remove: hostRemove } }, doRemove) {
    const { shapeFlag, children, anchor, targetAnchor, target, props: props2 } = vnode;
    if (target) {
      hostRemove(targetAnchor);
    }
    if (doRemove || !isTeleportDisabled(props2)) {
      hostRemove(anchor);
      if (shapeFlag & 16) {
        for (let i = 0; i < children.length; i++) {
          const child = children[i];
          unmount(child, parentComponent, parentSuspense, true, !!child.dynamicChildren);
        }
      }
    }
  },
  move: moveTeleport,
  hydrate: hydrateTeleport
};
function moveTeleport(vnode, container, parentAnchor, { o: { insert }, m: move }, moveType = 2) {
  if (moveType === 0) {
    insert(vnode.targetAnchor, container, parentAnchor);
  }
  const { el, anchor, shapeFlag, children, props: props2 } = vnode;
  const isReorder = moveType === 2;
  if (isReorder) {
    insert(el, container, parentAnchor);
  }
  if (!isReorder || isTeleportDisabled(props2)) {
    if (shapeFlag & 16) {
      for (let i = 0; i < children.length; i++) {
        move(
          children[i],
          container,
          parentAnchor,
          2
          /* MoveType.REORDER */
        );
      }
    }
  }
  if (isReorder) {
    insert(anchor, container, parentAnchor);
  }
}
function hydrateTeleport(node, vnode, parentComponent, parentSuspense, slotScopeIds, optimized, { o: { nextSibling, parentNode, querySelector } }, hydrateChildren) {
  const target = vnode.target = resolveTarget(vnode.props, querySelector);
  if (target) {
    const targetNode = target._lpa || target.firstChild;
    if (vnode.shapeFlag & 16) {
      if (isTeleportDisabled(vnode.props)) {
        vnode.anchor = hydrateChildren(nextSibling(node), vnode, parentNode(node), parentComponent, parentSuspense, slotScopeIds, optimized);
        vnode.targetAnchor = targetNode;
      } else {
        vnode.anchor = nextSibling(node);
        let targetAnchor = targetNode;
        while (targetAnchor) {
          targetAnchor = nextSibling(targetAnchor);
          if (targetAnchor && targetAnchor.nodeType === 8 && targetAnchor.data === "teleport anchor") {
            vnode.targetAnchor = targetAnchor;
            target._lpa = vnode.targetAnchor && nextSibling(vnode.targetAnchor);
            break;
          }
        }
        hydrateChildren(targetNode, vnode, target, parentComponent, parentSuspense, slotScopeIds, optimized);
      }
    }
    updateCssVars(vnode);
  }
  return vnode.anchor && nextSibling(vnode.anchor);
}
const Teleport = TeleportImpl;
function updateCssVars(vnode) {
  const ctx = vnode.ctx;
  if (ctx && ctx.ut) {
    let node = vnode.children[0].el;
    while (node !== vnode.targetAnchor) {
      if (node.nodeType === 1)
        node.setAttribute("data-v-owner", ctx.uid);
      node = node.nextSibling;
    }
    ctx.ut();
  }
}
const Fragment = Symbol(void 0);
const Text = Symbol(void 0);
const Comment = Symbol(void 0);
const Static = Symbol(void 0);
const blockStack = [];
let currentBlock = null;
function openBlock(disableTracking = false) {
  blockStack.push(currentBlock = disableTracking ? null : []);
}
function closeBlock() {
  blockStack.pop();
  currentBlock = blockStack[blockStack.length - 1] || null;
}
let isBlockTreeEnabled = 1;
function setBlockTracking(value) {
  isBlockTreeEnabled += value;
}
function setupBlock(vnode) {
  vnode.dynamicChildren = isBlockTreeEnabled > 0 ? currentBlock || EMPTY_ARR : null;
  closeBlock();
  if (isBlockTreeEnabled > 0 && currentBlock) {
    currentBlock.push(vnode);
  }
  return vnode;
}
function createElementBlock(type, props2, children, patchFlag, dynamicProps, shapeFlag) {
  return setupBlock(createBaseVNode(
    type,
    props2,
    children,
    patchFlag,
    dynamicProps,
    shapeFlag,
    true
    /* isBlock */
  ));
}
function createBlock(type, props2, children, patchFlag, dynamicProps) {
  return setupBlock(createVNode(
    type,
    props2,
    children,
    patchFlag,
    dynamicProps,
    true
    /* isBlock: prevent a block from tracking itself */
  ));
}
function isVNode(value) {
  return value ? value.__v_isVNode === true : false;
}
function isSameVNodeType(n1, n2) {
  return n1.type === n2.type && n1.key === n2.key;
}
function transformVNodeArgs(transformer) {
}
const InternalObjectKey = `__vInternal`;
const normalizeKey = ({ key }) => key != null ? key : null;
const normalizeRef = ({ ref: ref2, ref_key, ref_for }) => {
  return ref2 != null ? isString$1(ref2) || isRef(ref2) || isFunction$1(ref2) ? { i: currentRenderingInstance, r: ref2, k: ref_key, f: !!ref_for } : ref2 : null;
};
function createBaseVNode(type, props2 = null, children = null, patchFlag = 0, dynamicProps = null, shapeFlag = type === Fragment ? 0 : 1, isBlockNode = false, needFullChildrenNormalization = false) {
  const vnode = {
    __v_isVNode: true,
    __v_skip: true,
    type,
    props: props2,
    key: props2 && normalizeKey(props2),
    ref: props2 && normalizeRef(props2),
    scopeId: currentScopeId,
    slotScopeIds: null,
    children,
    component: null,
    suspense: null,
    ssContent: null,
    ssFallback: null,
    dirs: null,
    transition: null,
    el: null,
    anchor: null,
    target: null,
    targetAnchor: null,
    staticCount: 0,
    shapeFlag,
    patchFlag,
    dynamicProps,
    dynamicChildren: null,
    appContext: null,
    ctx: currentRenderingInstance
  };
  if (needFullChildrenNormalization) {
    normalizeChildren(vnode, children);
    if (shapeFlag & 128) {
      type.normalize(vnode);
    }
  } else if (children) {
    vnode.shapeFlag |= isString$1(children) ? 8 : 16;
  }
  if (isBlockTreeEnabled > 0 && // avoid a block node from tracking itself
  !isBlockNode && // has current parent block
  currentBlock && // presence of a patch flag indicates this node needs patching on updates.
  // component nodes also should always be patched, because even if the
  // component doesn't need to update, it needs to persist the instance on to
  // the next vnode so that it can be properly unmounted later.
  (vnode.patchFlag > 0 || shapeFlag & 6) && // the EVENTS flag is only for hydration and if it is the only flag, the
  // vnode should not be considered dynamic due to handler caching.
  vnode.patchFlag !== 32) {
    currentBlock.push(vnode);
  }
  return vnode;
}
const createVNode = _createVNode;
function _createVNode(type, props2 = null, children = null, patchFlag = 0, dynamicProps = null, isBlockNode = false) {
  if (!type || type === NULL_DYNAMIC_COMPONENT) {
    type = Comment;
  }
  if (isVNode(type)) {
    const cloned = cloneVNode(
      type,
      props2,
      true
      /* mergeRef: true */
    );
    if (children) {
      normalizeChildren(cloned, children);
    }
    if (isBlockTreeEnabled > 0 && !isBlockNode && currentBlock) {
      if (cloned.shapeFlag & 6) {
        currentBlock[currentBlock.indexOf(type)] = cloned;
      } else {
        currentBlock.push(cloned);
      }
    }
    cloned.patchFlag |= -2;
    return cloned;
  }
  if (isClassComponent(type)) {
    type = type.__vccOpts;
  }
  if (props2) {
    props2 = guardReactiveProps(props2);
    let { class: klass, style } = props2;
    if (klass && !isString$1(klass)) {
      props2.class = normalizeClass(klass);
    }
    if (isObject$2(style)) {
      if (isProxy(style) && !isArray$1(style)) {
        style = extend$2({}, style);
      }
      props2.style = normalizeStyle(style);
    }
  }
  const shapeFlag = isString$1(type) ? 1 : isSuspense(type) ? 128 : isTeleport(type) ? 64 : isObject$2(type) ? 4 : isFunction$1(type) ? 2 : 0;
  return createBaseVNode(type, props2, children, patchFlag, dynamicProps, shapeFlag, isBlockNode, true);
}
function guardReactiveProps(props2) {
  if (!props2)
    return null;
  return isProxy(props2) || InternalObjectKey in props2 ? extend$2({}, props2) : props2;
}
function cloneVNode(vnode, extraProps, mergeRef = false) {
  const { props: props2, ref: ref2, patchFlag, children } = vnode;
  const mergedProps = extraProps ? mergeProps(props2 || {}, extraProps) : props2;
  const cloned = {
    __v_isVNode: true,
    __v_skip: true,
    type: vnode.type,
    props: mergedProps,
    key: mergedProps && normalizeKey(mergedProps),
    ref: extraProps && extraProps.ref ? (
      // #2078 in the case of <component :is="vnode" ref="extra"/>
      // if the vnode itself already has a ref, cloneVNode will need to merge
      // the refs so the single vnode can be set on multiple refs
      mergeRef && ref2 ? isArray$1(ref2) ? ref2.concat(normalizeRef(extraProps)) : [ref2, normalizeRef(extraProps)] : normalizeRef(extraProps)
    ) : ref2,
    scopeId: vnode.scopeId,
    slotScopeIds: vnode.slotScopeIds,
    children,
    target: vnode.target,
    targetAnchor: vnode.targetAnchor,
    staticCount: vnode.staticCount,
    shapeFlag: vnode.shapeFlag,
    // if the vnode is cloned with extra props, we can no longer assume its
    // existing patch flag to be reliable and need to add the FULL_PROPS flag.
    // note: preserve flag for fragments since they use the flag for children
    // fast paths only.
    patchFlag: extraProps && vnode.type !== Fragment ? patchFlag === -1 ? 16 : patchFlag | 16 : patchFlag,
    dynamicProps: vnode.dynamicProps,
    dynamicChildren: vnode.dynamicChildren,
    appContext: vnode.appContext,
    dirs: vnode.dirs,
    transition: vnode.transition,
    // These should technically only be non-null on mounted VNodes. However,
    // they *should* be copied for kept-alive vnodes. So we just always copy
    // them since them being non-null during a mount doesn't affect the logic as
    // they will simply be overwritten.
    component: vnode.component,
    suspense: vnode.suspense,
    ssContent: vnode.ssContent && cloneVNode(vnode.ssContent),
    ssFallback: vnode.ssFallback && cloneVNode(vnode.ssFallback),
    el: vnode.el,
    anchor: vnode.anchor,
    ctx: vnode.ctx,
    ce: vnode.ce
  };
  return cloned;
}
function createTextVNode(text = " ", flag = 0) {
  return createVNode(Text, null, text, flag);
}
function createStaticVNode(content, numberOfNodes) {
  const vnode = createVNode(Static, null, content);
  vnode.staticCount = numberOfNodes;
  return vnode;
}
function createCommentVNode(text = "", asBlock = false) {
  return asBlock ? (openBlock(), createBlock(Comment, null, text)) : createVNode(Comment, null, text);
}
function normalizeVNode(child) {
  if (child == null || typeof child === "boolean") {
    return createVNode(Comment);
  } else if (isArray$1(child)) {
    return createVNode(
      Fragment,
      null,
      // #3666, avoid reference pollution when reusing vnode
      child.slice()
    );
  } else if (typeof child === "object") {
    return cloneIfMounted(child);
  } else {
    return createVNode(Text, null, String(child));
  }
}
function cloneIfMounted(child) {
  return child.el === null && child.patchFlag !== -1 || child.memo ? child : cloneVNode(child);
}
function normalizeChildren(vnode, children) {
  let type = 0;
  const { shapeFlag } = vnode;
  if (children == null) {
    children = null;
  } else if (isArray$1(children)) {
    type = 16;
  } else if (typeof children === "object") {
    if (shapeFlag & (1 | 64)) {
      const slot = children.default;
      if (slot) {
        slot._c && (slot._d = false);
        normalizeChildren(vnode, slot());
        slot._c && (slot._d = true);
      }
      return;
    } else {
      type = 32;
      const slotFlag = children._;
      if (!slotFlag && !(InternalObjectKey in children)) {
        children._ctx = currentRenderingInstance;
      } else if (slotFlag === 3 && currentRenderingInstance) {
        if (currentRenderingInstance.slots._ === 1) {
          children._ = 1;
        } else {
          children._ = 2;
          vnode.patchFlag |= 1024;
        }
      }
    }
  } else if (isFunction$1(children)) {
    children = { default: children, _ctx: currentRenderingInstance };
    type = 32;
  } else {
    children = String(children);
    if (shapeFlag & 64) {
      type = 16;
      children = [createTextVNode(children)];
    } else {
      type = 8;
    }
  }
  vnode.children = children;
  vnode.shapeFlag |= type;
}
function mergeProps(...args) {
  const ret = {};
  for (let i = 0; i < args.length; i++) {
    const toMerge = args[i];
    for (const key in toMerge) {
      if (key === "class") {
        if (ret.class !== toMerge.class) {
          ret.class = normalizeClass([ret.class, toMerge.class]);
        }
      } else if (key === "style") {
        ret.style = normalizeStyle([ret.style, toMerge.style]);
      } else if (isOn(key)) {
        const existing = ret[key];
        const incoming = toMerge[key];
        if (incoming && existing !== incoming && !(isArray$1(existing) && existing.includes(incoming))) {
          ret[key] = existing ? [].concat(existing, incoming) : incoming;
        }
      } else if (key !== "") {
        ret[key] = toMerge[key];
      }
    }
  }
  return ret;
}
function invokeVNodeHook(hook, instance, vnode, prevVNode = null) {
  callWithAsyncErrorHandling(hook, instance, 7, [
    vnode,
    prevVNode
  ]);
}
const emptyAppContext = createAppContext();
let uid$2 = 0;
function createComponentInstance(vnode, parent, suspense) {
  const type = vnode.type;
  const appContext = (parent ? parent.appContext : vnode.appContext) || emptyAppContext;
  const instance = {
    uid: uid$2++,
    vnode,
    type,
    parent,
    appContext,
    root: null,
    next: null,
    subTree: null,
    effect: null,
    update: null,
    scope: new EffectScope(
      true
      /* detached */
    ),
    render: null,
    proxy: null,
    exposed: null,
    exposeProxy: null,
    withProxy: null,
    provides: parent ? parent.provides : Object.create(appContext.provides),
    accessCache: null,
    renderCache: [],
    // local resolved assets
    components: null,
    directives: null,
    // resolved props and emits options
    propsOptions: normalizePropsOptions(type, appContext),
    emitsOptions: normalizeEmitsOptions(type, appContext),
    // emit
    emit: null,
    emitted: null,
    // props default value
    propsDefaults: EMPTY_OBJ,
    // inheritAttrs
    inheritAttrs: type.inheritAttrs,
    // state
    ctx: EMPTY_OBJ,
    data: EMPTY_OBJ,
    props: EMPTY_OBJ,
    attrs: EMPTY_OBJ,
    slots: EMPTY_OBJ,
    refs: EMPTY_OBJ,
    setupState: EMPTY_OBJ,
    setupContext: null,
    // suspense related
    suspense,
    suspenseId: suspense ? suspense.pendingId : 0,
    asyncDep: null,
    asyncResolved: false,
    // lifecycle hooks
    // not using enums here because it results in computed properties
    isMounted: false,
    isUnmounted: false,
    isDeactivated: false,
    bc: null,
    c: null,
    bm: null,
    m: null,
    bu: null,
    u: null,
    um: null,
    bum: null,
    da: null,
    a: null,
    rtg: null,
    rtc: null,
    ec: null,
    sp: null
  };
  {
    instance.ctx = { _: instance };
  }
  instance.root = parent ? parent.root : instance;
  instance.emit = emit.bind(null, instance);
  if (vnode.ce) {
    vnode.ce(instance);
  }
  return instance;
}
let currentInstance = null;
const getCurrentInstance = () => currentInstance || currentRenderingInstance;
const setCurrentInstance = (instance) => {
  currentInstance = instance;
  instance.scope.on();
};
const unsetCurrentInstance = () => {
  currentInstance && currentInstance.scope.off();
  currentInstance = null;
};
function isStatefulComponent(instance) {
  return instance.vnode.shapeFlag & 4;
}
let isInSSRComponentSetup = false;
function setupComponent(instance, isSSR = false) {
  isInSSRComponentSetup = isSSR;
  const { props: props2, children } = instance.vnode;
  const isStateful = isStatefulComponent(instance);
  initProps(instance, props2, isStateful, isSSR);
  initSlots(instance, children);
  const setupResult = isStateful ? setupStatefulComponent(instance, isSSR) : void 0;
  isInSSRComponentSetup = false;
  return setupResult;
}
function setupStatefulComponent(instance, isSSR) {
  const Component2 = instance.type;
  instance.accessCache = /* @__PURE__ */ Object.create(null);
  instance.proxy = markRaw(new Proxy(instance.ctx, PublicInstanceProxyHandlers));
  const { setup } = Component2;
  if (setup) {
    const setupContext = instance.setupContext = setup.length > 1 ? createSetupContext(instance) : null;
    setCurrentInstance(instance);
    pauseTracking();
    const setupResult = callWithErrorHandling(setup, instance, 0, [instance.props, setupContext]);
    resetTracking();
    unsetCurrentInstance();
    if (isPromise(setupResult)) {
      setupResult.then(unsetCurrentInstance, unsetCurrentInstance);
      if (isSSR) {
        return setupResult.then((resolvedResult) => {
          handleSetupResult(instance, resolvedResult, isSSR);
        }).catch((e) => {
          handleError(
            e,
            instance,
            0
            /* ErrorCodes.SETUP_FUNCTION */
          );
        });
      } else {
        instance.asyncDep = setupResult;
      }
    } else {
      handleSetupResult(instance, setupResult, isSSR);
    }
  } else {
    finishComponentSetup(instance, isSSR);
  }
}
function handleSetupResult(instance, setupResult, isSSR) {
  if (isFunction$1(setupResult)) {
    if (instance.type.__ssrInlineRender) {
      instance.ssrRender = setupResult;
    } else {
      instance.render = setupResult;
    }
  } else if (isObject$2(setupResult)) {
    instance.setupState = proxyRefs(setupResult);
  } else
    ;
  finishComponentSetup(instance, isSSR);
}
let compile$4;
let installWithProxy;
function registerRuntimeCompiler(_compile) {
  compile$4 = _compile;
  installWithProxy = (i) => {
    if (i.render._rc) {
      i.withProxy = new Proxy(i.ctx, RuntimeCompiledPublicInstanceProxyHandlers);
    }
  };
}
const isRuntimeOnly = () => !compile$4;
function finishComponentSetup(instance, isSSR, skipOptions) {
  const Component2 = instance.type;
  if (!instance.render) {
    if (!isSSR && compile$4 && !Component2.render) {
      const template = Component2.template || resolveMergedOptions(instance).template;
      if (template) {
        const { isCustomElement, compilerOptions } = instance.appContext.config;
        const { delimiters, compilerOptions: componentCompilerOptions } = Component2;
        const finalCompilerOptions = extend$2(extend$2({
          isCustomElement,
          delimiters
        }, compilerOptions), componentCompilerOptions);
        Component2.render = compile$4(template, finalCompilerOptions);
      }
    }
    instance.render = Component2.render || NOOP;
    if (installWithProxy) {
      installWithProxy(instance);
    }
  }
  {
    setCurrentInstance(instance);
    pauseTracking();
    applyOptions(instance);
    resetTracking();
    unsetCurrentInstance();
  }
}
function createAttrsProxy(instance) {
  return new Proxy(instance.attrs, {
    get(target, key) {
      track(instance, "get", "$attrs");
      return target[key];
    }
  });
}
function createSetupContext(instance) {
  const expose = (exposed) => {
    instance.exposed = exposed || {};
  };
  let attrs;
  {
    return {
      get attrs() {
        return attrs || (attrs = createAttrsProxy(instance));
      },
      slots: instance.slots,
      emit: instance.emit,
      expose
    };
  }
}
function getExposeProxy(instance) {
  if (instance.exposed) {
    return instance.exposeProxy || (instance.exposeProxy = new Proxy(proxyRefs(markRaw(instance.exposed)), {
      get(target, key) {
        if (key in target) {
          return target[key];
        } else if (key in publicPropertiesMap) {
          return publicPropertiesMap[key](instance);
        }
      },
      has(target, key) {
        return key in target || key in publicPropertiesMap;
      }
    }));
  }
}
function getComponentName(Component2, includeInferred = true) {
  return isFunction$1(Component2) ? Component2.displayName || Component2.name : Component2.name || includeInferred && Component2.__name;
}
function isClassComponent(value) {
  return isFunction$1(value) && "__vccOpts" in value;
}
const computed = (getterOrOptions, debugOptions) => {
  return computed$1(getterOrOptions, debugOptions, isInSSRComponentSetup);
};
function defineProps() {
  return null;
}
function defineEmits() {
  return null;
}
function defineExpose(exposed) {
}
function withDefaults(props2, defaults2) {
  return null;
}
function useSlots() {
  return getContext().slots;
}
function useAttrs() {
  return getContext().attrs;
}
function getContext() {
  const i = getCurrentInstance();
  return i.setupContext || (i.setupContext = createSetupContext(i));
}
function mergeDefaults(raw, defaults2) {
  const props2 = isArray$1(raw) ? raw.reduce((normalized, p2) => (normalized[p2] = {}, normalized), {}) : raw;
  for (const key in defaults2) {
    const opt = props2[key];
    if (opt) {
      if (isArray$1(opt) || isFunction$1(opt)) {
        props2[key] = { type: opt, default: defaults2[key] };
      } else {
        opt.default = defaults2[key];
      }
    } else if (opt === null) {
      props2[key] = { default: defaults2[key] };
    } else
      ;
  }
  return props2;
}
function createPropsRestProxy(props2, excludedKeys) {
  const ret = {};
  for (const key in props2) {
    if (!excludedKeys.includes(key)) {
      Object.defineProperty(ret, key, {
        enumerable: true,
        get: () => props2[key]
      });
    }
  }
  return ret;
}
function withAsyncContext(getAwaitable) {
  const ctx = getCurrentInstance();
  let awaitable = getAwaitable();
  unsetCurrentInstance();
  if (isPromise(awaitable)) {
    awaitable = awaitable.catch((e) => {
      setCurrentInstance(ctx);
      throw e;
    });
  }
  return [awaitable, () => setCurrentInstance(ctx)];
}
function h(type, propsOrChildren, children) {
  const l = arguments.length;
  if (l === 2) {
    if (isObject$2(propsOrChildren) && !isArray$1(propsOrChildren)) {
      if (isVNode(propsOrChildren)) {
        return createVNode(type, null, [propsOrChildren]);
      }
      return createVNode(type, propsOrChildren);
    } else {
      return createVNode(type, null, propsOrChildren);
    }
  } else {
    if (l > 3) {
      children = Array.prototype.slice.call(arguments, 2);
    } else if (l === 3 && isVNode(children)) {
      children = [children];
    }
    return createVNode(type, propsOrChildren, children);
  }
}
const ssrContextKey = Symbol(``);
const useSSRContext = () => {
  {
    const ctx = inject(ssrContextKey);
    return ctx;
  }
};
function initCustomFormatter() {
  {
    return;
  }
}
function withMemo(memo, render2, cache, index) {
  const cached = cache[index];
  if (cached && isMemoSame(cached, memo)) {
    return cached;
  }
  const ret = render2();
  ret.memo = memo.slice();
  return cache[index] = ret;
}
function isMemoSame(cached, memo) {
  const prev = cached.memo;
  if (prev.length != memo.length) {
    return false;
  }
  for (let i = 0; i < prev.length; i++) {
    if (hasChanged(prev[i], memo[i])) {
      return false;
    }
  }
  if (isBlockTreeEnabled > 0 && currentBlock) {
    currentBlock.push(cached);
  }
  return true;
}
const version = "3.2.47";
const _ssrUtils = {
  createComponentInstance,
  setupComponent,
  renderComponentRoot,
  setCurrentRenderingInstance,
  isVNode,
  normalizeVNode
};
const ssrUtils = _ssrUtils;
const resolveFilter = null;
const compatUtils = null;
const svgNS = "http://www.w3.org/2000/svg";
const doc = typeof document !== "undefined" ? document : null;
const templateContainer = doc && /* @__PURE__ */ doc.createElement("template");
const nodeOps = {
  insert: (child, parent, anchor) => {
    parent.insertBefore(child, anchor || null);
  },
  remove: (child) => {
    const parent = child.parentNode;
    if (parent) {
      parent.removeChild(child);
    }
  },
  createElement: (tag, isSVG, is, props2) => {
    const el = isSVG ? doc.createElementNS(svgNS, tag) : doc.createElement(tag, is ? { is } : void 0);
    if (tag === "select" && props2 && props2.multiple != null) {
      el.setAttribute("multiple", props2.multiple);
    }
    return el;
  },
  createText: (text) => doc.createTextNode(text),
  createComment: (text) => doc.createComment(text),
  setText: (node, text) => {
    node.nodeValue = text;
  },
  setElementText: (el, text) => {
    el.textContent = text;
  },
  parentNode: (node) => node.parentNode,
  nextSibling: (node) => node.nextSibling,
  querySelector: (selector) => doc.querySelector(selector),
  setScopeId(el, id) {
    el.setAttribute(id, "");
  },
  // __UNSAFE__
  // Reason: innerHTML.
  // Static content here can only come from compiled templates.
  // As long as the user only uses trusted templates, this is safe.
  insertStaticContent(content, parent, anchor, isSVG, start, end) {
    const before = anchor ? anchor.previousSibling : parent.lastChild;
    if (start && (start === end || start.nextSibling)) {
      while (true) {
        parent.insertBefore(start.cloneNode(true), anchor);
        if (start === end || !(start = start.nextSibling))
          break;
      }
    } else {
      templateContainer.innerHTML = isSVG ? `<svg>${content}</svg>` : content;
      const template = templateContainer.content;
      if (isSVG) {
        const wrapper = template.firstChild;
        while (wrapper.firstChild) {
          template.appendChild(wrapper.firstChild);
        }
        template.removeChild(wrapper);
      }
      parent.insertBefore(template, anchor);
    }
    return [
      // first
      before ? before.nextSibling : parent.firstChild,
      // last
      anchor ? anchor.previousSibling : parent.lastChild
    ];
  }
};
function patchClass(el, value, isSVG) {
  const transitionClasses = el._vtc;
  if (transitionClasses) {
    value = (value ? [value, ...transitionClasses] : [...transitionClasses]).join(" ");
  }
  if (value == null) {
    el.removeAttribute("class");
  } else if (isSVG) {
    el.setAttribute("class", value);
  } else {
    el.className = value;
  }
}
function patchStyle(el, prev, next) {
  const style = el.style;
  const isCssString = isString$1(next);
  if (next && !isCssString) {
    if (prev && !isString$1(prev)) {
      for (const key in prev) {
        if (next[key] == null) {
          setStyle(style, key, "");
        }
      }
    }
    for (const key in next) {
      setStyle(style, key, next[key]);
    }
  } else {
    const currentDisplay = style.display;
    if (isCssString) {
      if (prev !== next) {
        style.cssText = next;
      }
    } else if (prev) {
      el.removeAttribute("style");
    }
    if ("_vod" in el) {
      style.display = currentDisplay;
    }
  }
}
const importantRE = /\s*!important$/;
function setStyle(style, name, val) {
  if (isArray$1(val)) {
    val.forEach((v) => setStyle(style, name, v));
  } else {
    if (val == null)
      val = "";
    if (name.startsWith("--")) {
      style.setProperty(name, val);
    } else {
      const prefixed = autoPrefix(style, name);
      if (importantRE.test(val)) {
        style.setProperty(hyphenate(prefixed), val.replace(importantRE, ""), "important");
      } else {
        style[prefixed] = val;
      }
    }
  }
}
const prefixes = ["Webkit", "Moz", "ms"];
const prefixCache = {};
function autoPrefix(style, rawName) {
  const cached = prefixCache[rawName];
  if (cached) {
    return cached;
  }
  let name = camelize(rawName);
  if (name !== "filter" && name in style) {
    return prefixCache[rawName] = name;
  }
  name = capitalize(name);
  for (let i = 0; i < prefixes.length; i++) {
    const prefixed = prefixes[i] + name;
    if (prefixed in style) {
      return prefixCache[rawName] = prefixed;
    }
  }
  return rawName;
}
const xlinkNS = "http://www.w3.org/1999/xlink";
function patchAttr(el, key, value, isSVG, instance) {
  if (isSVG && key.startsWith("xlink:")) {
    if (value == null) {
      el.removeAttributeNS(xlinkNS, key.slice(6, key.length));
    } else {
      el.setAttributeNS(xlinkNS, key, value);
    }
  } else {
    const isBoolean2 = isSpecialBooleanAttr(key);
    if (value == null || isBoolean2 && !includeBooleanAttr(value)) {
      el.removeAttribute(key);
    } else {
      el.setAttribute(key, isBoolean2 ? "" : value);
    }
  }
}
function patchDOMProp(el, key, value, prevChildren, parentComponent, parentSuspense, unmountChildren) {
  if (key === "innerHTML" || key === "textContent") {
    if (prevChildren) {
      unmountChildren(prevChildren, parentComponent, parentSuspense);
    }
    el[key] = value == null ? "" : value;
    return;
  }
  if (key === "value" && el.tagName !== "PROGRESS" && // custom elements may use _value internally
  !el.tagName.includes("-")) {
    el._value = value;
    const newValue = value == null ? "" : value;
    if (el.value !== newValue || // #4956: always set for OPTION elements because its value falls back to
    // textContent if no value attribute is present. And setting .value for
    // OPTION has no side effect
    el.tagName === "OPTION") {
      el.value = newValue;
    }
    if (value == null) {
      el.removeAttribute(key);
    }
    return;
  }
  let needRemove = false;
  if (value === "" || value == null) {
    const type = typeof el[key];
    if (type === "boolean") {
      value = includeBooleanAttr(value);
    } else if (value == null && type === "string") {
      value = "";
      needRemove = true;
    } else if (type === "number") {
      value = 0;
      needRemove = true;
    }
  }
  try {
    el[key] = value;
  } catch (e) {
  }
  needRemove && el.removeAttribute(key);
}
function addEventListener(el, event, handler, options) {
  el.addEventListener(event, handler, options);
}
function removeEventListener(el, event, handler, options) {
  el.removeEventListener(event, handler, options);
}
function patchEvent(el, rawName, prevValue, nextValue, instance = null) {
  const invokers = el._vei || (el._vei = {});
  const existingInvoker = invokers[rawName];
  if (nextValue && existingInvoker) {
    existingInvoker.value = nextValue;
  } else {
    const [name, options] = parseName(rawName);
    if (nextValue) {
      const invoker = invokers[rawName] = createInvoker(nextValue, instance);
      addEventListener(el, name, invoker, options);
    } else if (existingInvoker) {
      removeEventListener(el, name, existingInvoker, options);
      invokers[rawName] = void 0;
    }
  }
}
const optionsModifierRE = /(?:Once|Passive|Capture)$/;
function parseName(name) {
  let options;
  if (optionsModifierRE.test(name)) {
    options = {};
    let m;
    while (m = name.match(optionsModifierRE)) {
      name = name.slice(0, name.length - m[0].length);
      options[m[0].toLowerCase()] = true;
    }
  }
  const event = name[2] === ":" ? name.slice(3) : hyphenate(name.slice(2));
  return [event, options];
}
let cachedNow = 0;
const p = /* @__PURE__ */ Promise.resolve();
const getNow = () => cachedNow || (p.then(() => cachedNow = 0), cachedNow = Date.now());
function createInvoker(initialValue, instance) {
  const invoker = (e) => {
    if (!e._vts) {
      e._vts = Date.now();
    } else if (e._vts <= invoker.attached) {
      return;
    }
    callWithAsyncErrorHandling(patchStopImmediatePropagation(e, invoker.value), instance, 5, [e]);
  };
  invoker.value = initialValue;
  invoker.attached = getNow();
  return invoker;
}
function patchStopImmediatePropagation(e, value) {
  if (isArray$1(value)) {
    const originalStop = e.stopImmediatePropagation;
    e.stopImmediatePropagation = () => {
      originalStop.call(e);
      e._stopped = true;
    };
    return value.map((fn) => (e2) => !e2._stopped && fn && fn(e2));
  } else {
    return value;
  }
}
const nativeOnRE = /^on[a-z]/;
const patchProp = (el, key, prevValue, nextValue, isSVG = false, prevChildren, parentComponent, parentSuspense, unmountChildren) => {
  if (key === "class") {
    patchClass(el, nextValue, isSVG);
  } else if (key === "style") {
    patchStyle(el, prevValue, nextValue);
  } else if (isOn(key)) {
    if (!isModelListener(key)) {
      patchEvent(el, key, prevValue, nextValue, parentComponent);
    }
  } else if (key[0] === "." ? (key = key.slice(1), true) : key[0] === "^" ? (key = key.slice(1), false) : shouldSetAsProp(el, key, nextValue, isSVG)) {
    patchDOMProp(el, key, nextValue, prevChildren, parentComponent, parentSuspense, unmountChildren);
  } else {
    if (key === "true-value") {
      el._trueValue = nextValue;
    } else if (key === "false-value") {
      el._falseValue = nextValue;
    }
    patchAttr(el, key, nextValue, isSVG);
  }
};
function shouldSetAsProp(el, key, value, isSVG) {
  if (isSVG) {
    if (key === "innerHTML" || key === "textContent") {
      return true;
    }
    if (key in el && nativeOnRE.test(key) && isFunction$1(value)) {
      return true;
    }
    return false;
  }
  if (key === "spellcheck" || key === "draggable" || key === "translate") {
    return false;
  }
  if (key === "form") {
    return false;
  }
  if (key === "list" && el.tagName === "INPUT") {
    return false;
  }
  if (key === "type" && el.tagName === "TEXTAREA") {
    return false;
  }
  if (nativeOnRE.test(key) && isString$1(value)) {
    return false;
  }
  return key in el;
}
function defineCustomElement(options, hydrate2) {
  const Comp = defineComponent(options);
  class VueCustomElement extends VueElement {
    constructor(initialProps) {
      super(Comp, initialProps, hydrate2);
    }
  }
  VueCustomElement.def = Comp;
  return VueCustomElement;
}
const defineSSRCustomElement = (options) => {
  return defineCustomElement(options, hydrate);
};
const BaseClass = typeof HTMLElement !== "undefined" ? HTMLElement : class {
};
class VueElement extends BaseClass {
  constructor(_def, _props = {}, hydrate2) {
    super();
    this._def = _def;
    this._props = _props;
    this._instance = null;
    this._connected = false;
    this._resolved = false;
    this._numberProps = null;
    if (this.shadowRoot && hydrate2) {
      hydrate2(this._createVNode(), this.shadowRoot);
    } else {
      this.attachShadow({ mode: "open" });
      if (!this._def.__asyncLoader) {
        this._resolveProps(this._def);
      }
    }
  }
  connectedCallback() {
    this._connected = true;
    if (!this._instance) {
      if (this._resolved) {
        this._update();
      } else {
        this._resolveDef();
      }
    }
  }
  disconnectedCallback() {
    this._connected = false;
    nextTick(() => {
      if (!this._connected) {
        render(null, this.shadowRoot);
        this._instance = null;
      }
    });
  }
  /**
   * resolve inner component definition (handle possible async component)
   */
  _resolveDef() {
    this._resolved = true;
    for (let i = 0; i < this.attributes.length; i++) {
      this._setAttr(this.attributes[i].name);
    }
    new MutationObserver((mutations) => {
      for (const m of mutations) {
        this._setAttr(m.attributeName);
      }
    }).observe(this, { attributes: true });
    const resolve2 = (def2, isAsync = false) => {
      const { props: props2, styles } = def2;
      let numberProps;
      if (props2 && !isArray$1(props2)) {
        for (const key in props2) {
          const opt = props2[key];
          if (opt === Number || opt && opt.type === Number) {
            if (key in this._props) {
              this._props[key] = toNumber(this._props[key]);
            }
            (numberProps || (numberProps = /* @__PURE__ */ Object.create(null)))[camelize(key)] = true;
          }
        }
      }
      this._numberProps = numberProps;
      if (isAsync) {
        this._resolveProps(def2);
      }
      this._applyStyles(styles);
      this._update();
    };
    const asyncDef = this._def.__asyncLoader;
    if (asyncDef) {
      asyncDef().then((def2) => resolve2(def2, true));
    } else {
      resolve2(this._def);
    }
  }
  _resolveProps(def2) {
    const { props: props2 } = def2;
    const declaredPropKeys = isArray$1(props2) ? props2 : Object.keys(props2 || {});
    for (const key of Object.keys(this)) {
      if (key[0] !== "_" && declaredPropKeys.includes(key)) {
        this._setProp(key, this[key], true, false);
      }
    }
    for (const key of declaredPropKeys.map(camelize)) {
      Object.defineProperty(this, key, {
        get() {
          return this._getProp(key);
        },
        set(val) {
          this._setProp(key, val);
        }
      });
    }
  }
  _setAttr(key) {
    let value = this.getAttribute(key);
    const camelKey = camelize(key);
    if (this._numberProps && this._numberProps[camelKey]) {
      value = toNumber(value);
    }
    this._setProp(camelKey, value, false);
  }
  /**
   * @internal
   */
  _getProp(key) {
    return this._props[key];
  }
  /**
   * @internal
   */
  _setProp(key, val, shouldReflect = true, shouldUpdate = true) {
    if (val !== this._props[key]) {
      this._props[key] = val;
      if (shouldUpdate && this._instance) {
        this._update();
      }
      if (shouldReflect) {
        if (val === true) {
          this.setAttribute(hyphenate(key), "");
        } else if (typeof val === "string" || typeof val === "number") {
          this.setAttribute(hyphenate(key), val + "");
        } else if (!val) {
          this.removeAttribute(hyphenate(key));
        }
      }
    }
  }
  _update() {
    render(this._createVNode(), this.shadowRoot);
  }
  _createVNode() {
    const vnode = createVNode(this._def, extend$2({}, this._props));
    if (!this._instance) {
      vnode.ce = (instance) => {
        this._instance = instance;
        instance.isCE = true;
        const dispatch = (event, args) => {
          this.dispatchEvent(new CustomEvent(event, {
            detail: args
          }));
        };
        instance.emit = (event, ...args) => {
          dispatch(event, args);
          if (hyphenate(event) !== event) {
            dispatch(hyphenate(event), args);
          }
        };
        let parent = this;
        while (parent = parent && (parent.parentNode || parent.host)) {
          if (parent instanceof VueElement) {
            instance.parent = parent._instance;
            instance.provides = parent._instance.provides;
            break;
          }
        }
      };
    }
    return vnode;
  }
  _applyStyles(styles) {
    if (styles) {
      styles.forEach((css) => {
        const s = document.createElement("style");
        s.textContent = css;
        this.shadowRoot.appendChild(s);
      });
    }
  }
}
function useCssModule(name = "$style") {
  {
    const instance = getCurrentInstance();
    if (!instance) {
      return EMPTY_OBJ;
    }
    const modules = instance.type.__cssModules;
    if (!modules) {
      return EMPTY_OBJ;
    }
    const mod = modules[name];
    if (!mod) {
      return EMPTY_OBJ;
    }
    return mod;
  }
}
function useCssVars(getter) {
  const instance = getCurrentInstance();
  if (!instance) {
    return;
  }
  const updateTeleports = instance.ut = (vars = getter(instance.proxy)) => {
    Array.from(document.querySelectorAll(`[data-v-owner="${instance.uid}"]`)).forEach((node) => setVarsOnNode(node, vars));
  };
  const setVars = () => {
    const vars = getter(instance.proxy);
    setVarsOnVNode(instance.subTree, vars);
    updateTeleports(vars);
  };
  watchPostEffect(setVars);
  onMounted(() => {
    const ob = new MutationObserver(setVars);
    ob.observe(instance.subTree.el.parentNode, { childList: true });
    onUnmounted(() => ob.disconnect());
  });
}
function setVarsOnVNode(vnode, vars) {
  if (vnode.shapeFlag & 128) {
    const suspense = vnode.suspense;
    vnode = suspense.activeBranch;
    if (suspense.pendingBranch && !suspense.isHydrating) {
      suspense.effects.push(() => {
        setVarsOnVNode(suspense.activeBranch, vars);
      });
    }
  }
  while (vnode.component) {
    vnode = vnode.component.subTree;
  }
  if (vnode.shapeFlag & 1 && vnode.el) {
    setVarsOnNode(vnode.el, vars);
  } else if (vnode.type === Fragment) {
    vnode.children.forEach((c) => setVarsOnVNode(c, vars));
  } else if (vnode.type === Static) {
    let { el, anchor } = vnode;
    while (el) {
      setVarsOnNode(el, vars);
      if (el === anchor)
        break;
      el = el.nextSibling;
    }
  }
}
function setVarsOnNode(el, vars) {
  if (el.nodeType === 1) {
    const style = el.style;
    for (const key in vars) {
      style.setProperty(`--${key}`, vars[key]);
    }
  }
}
const TRANSITION = "transition";
const ANIMATION = "animation";
const Transition = (props2, { slots }) => h(BaseTransition, resolveTransitionProps(props2), slots);
Transition.displayName = "Transition";
const DOMTransitionPropsValidators = {
  name: String,
  type: String,
  css: {
    type: Boolean,
    default: true
  },
  duration: [String, Number, Object],
  enterFromClass: String,
  enterActiveClass: String,
  enterToClass: String,
  appearFromClass: String,
  appearActiveClass: String,
  appearToClass: String,
  leaveFromClass: String,
  leaveActiveClass: String,
  leaveToClass: String
};
const TransitionPropsValidators = Transition.props = /* @__PURE__ */ extend$2({}, BaseTransition.props, DOMTransitionPropsValidators);
const callHook = (hook, args = []) => {
  if (isArray$1(hook)) {
    hook.forEach((h2) => h2(...args));
  } else if (hook) {
    hook(...args);
  }
};
const hasExplicitCallback = (hook) => {
  return hook ? isArray$1(hook) ? hook.some((h2) => h2.length > 1) : hook.length > 1 : false;
};
function resolveTransitionProps(rawProps) {
  const baseProps = {};
  for (const key in rawProps) {
    if (!(key in DOMTransitionPropsValidators)) {
      baseProps[key] = rawProps[key];
    }
  }
  if (rawProps.css === false) {
    return baseProps;
  }
  const { name = "v", type, duration, enterFromClass = `${name}-enter-from`, enterActiveClass = `${name}-enter-active`, enterToClass = `${name}-enter-to`, appearFromClass = enterFromClass, appearActiveClass = enterActiveClass, appearToClass = enterToClass, leaveFromClass = `${name}-leave-from`, leaveActiveClass = `${name}-leave-active`, leaveToClass = `${name}-leave-to` } = rawProps;
  const durations = normalizeDuration(duration);
  const enterDuration = durations && durations[0];
  const leaveDuration = durations && durations[1];
  const { onBeforeEnter, onEnter, onEnterCancelled, onLeave, onLeaveCancelled, onBeforeAppear = onBeforeEnter, onAppear = onEnter, onAppearCancelled = onEnterCancelled } = baseProps;
  const finishEnter = (el, isAppear, done) => {
    removeTransitionClass(el, isAppear ? appearToClass : enterToClass);
    removeTransitionClass(el, isAppear ? appearActiveClass : enterActiveClass);
    done && done();
  };
  const finishLeave = (el, done) => {
    el._isLeaving = false;
    removeTransitionClass(el, leaveFromClass);
    removeTransitionClass(el, leaveToClass);
    removeTransitionClass(el, leaveActiveClass);
    done && done();
  };
  const makeEnterHook = (isAppear) => {
    return (el, done) => {
      const hook = isAppear ? onAppear : onEnter;
      const resolve2 = () => finishEnter(el, isAppear, done);
      callHook(hook, [el, resolve2]);
      nextFrame(() => {
        removeTransitionClass(el, isAppear ? appearFromClass : enterFromClass);
        addTransitionClass(el, isAppear ? appearToClass : enterToClass);
        if (!hasExplicitCallback(hook)) {
          whenTransitionEnds(el, type, enterDuration, resolve2);
        }
      });
    };
  };
  return extend$2(baseProps, {
    onBeforeEnter(el) {
      callHook(onBeforeEnter, [el]);
      addTransitionClass(el, enterFromClass);
      addTransitionClass(el, enterActiveClass);
    },
    onBeforeAppear(el) {
      callHook(onBeforeAppear, [el]);
      addTransitionClass(el, appearFromClass);
      addTransitionClass(el, appearActiveClass);
    },
    onEnter: makeEnterHook(false),
    onAppear: makeEnterHook(true),
    onLeave(el, done) {
      el._isLeaving = true;
      const resolve2 = () => finishLeave(el, done);
      addTransitionClass(el, leaveFromClass);
      forceReflow();
      addTransitionClass(el, leaveActiveClass);
      nextFrame(() => {
        if (!el._isLeaving) {
          return;
        }
        removeTransitionClass(el, leaveFromClass);
        addTransitionClass(el, leaveToClass);
        if (!hasExplicitCallback(onLeave)) {
          whenTransitionEnds(el, type, leaveDuration, resolve2);
        }
      });
      callHook(onLeave, [el, resolve2]);
    },
    onEnterCancelled(el) {
      finishEnter(el, false);
      callHook(onEnterCancelled, [el]);
    },
    onAppearCancelled(el) {
      finishEnter(el, true);
      callHook(onAppearCancelled, [el]);
    },
    onLeaveCancelled(el) {
      finishLeave(el);
      callHook(onLeaveCancelled, [el]);
    }
  });
}
function normalizeDuration(duration) {
  if (duration == null) {
    return null;
  } else if (isObject$2(duration)) {
    return [NumberOf(duration.enter), NumberOf(duration.leave)];
  } else {
    const n = NumberOf(duration);
    return [n, n];
  }
}
function NumberOf(val) {
  const res = toNumber(val);
  return res;
}
function addTransitionClass(el, cls) {
  cls.split(/\s+/).forEach((c) => c && el.classList.add(c));
  (el._vtc || (el._vtc = /* @__PURE__ */ new Set())).add(cls);
}
function removeTransitionClass(el, cls) {
  cls.split(/\s+/).forEach((c) => c && el.classList.remove(c));
  const { _vtc } = el;
  if (_vtc) {
    _vtc.delete(cls);
    if (!_vtc.size) {
      el._vtc = void 0;
    }
  }
}
function nextFrame(cb) {
  requestAnimationFrame(() => {
    requestAnimationFrame(cb);
  });
}
let endId = 0;
function whenTransitionEnds(el, expectedType, explicitTimeout, resolve2) {
  const id = el._endId = ++endId;
  const resolveIfNotStale = () => {
    if (id === el._endId) {
      resolve2();
    }
  };
  if (explicitTimeout) {
    return setTimeout(resolveIfNotStale, explicitTimeout);
  }
  const { type, timeout, propCount } = getTransitionInfo(el, expectedType);
  if (!type) {
    return resolve2();
  }
  const endEvent = type + "end";
  let ended = 0;
  const end = () => {
    el.removeEventListener(endEvent, onEnd);
    resolveIfNotStale();
  };
  const onEnd = (e) => {
    if (e.target === el && ++ended >= propCount) {
      end();
    }
  };
  setTimeout(() => {
    if (ended < propCount) {
      end();
    }
  }, timeout + 1);
  el.addEventListener(endEvent, onEnd);
}
function getTransitionInfo(el, expectedType) {
  const styles = window.getComputedStyle(el);
  const getStyleProperties = (key) => (styles[key] || "").split(", ");
  const transitionDelays = getStyleProperties(`${TRANSITION}Delay`);
  const transitionDurations = getStyleProperties(`${TRANSITION}Duration`);
  const transitionTimeout = getTimeout(transitionDelays, transitionDurations);
  const animationDelays = getStyleProperties(`${ANIMATION}Delay`);
  const animationDurations = getStyleProperties(`${ANIMATION}Duration`);
  const animationTimeout = getTimeout(animationDelays, animationDurations);
  let type = null;
  let timeout = 0;
  let propCount = 0;
  if (expectedType === TRANSITION) {
    if (transitionTimeout > 0) {
      type = TRANSITION;
      timeout = transitionTimeout;
      propCount = transitionDurations.length;
    }
  } else if (expectedType === ANIMATION) {
    if (animationTimeout > 0) {
      type = ANIMATION;
      timeout = animationTimeout;
      propCount = animationDurations.length;
    }
  } else {
    timeout = Math.max(transitionTimeout, animationTimeout);
    type = timeout > 0 ? transitionTimeout > animationTimeout ? TRANSITION : ANIMATION : null;
    propCount = type ? type === TRANSITION ? transitionDurations.length : animationDurations.length : 0;
  }
  const hasTransform = type === TRANSITION && /\b(transform|all)(,|$)/.test(getStyleProperties(`${TRANSITION}Property`).toString());
  return {
    type,
    timeout,
    propCount,
    hasTransform
  };
}
function getTimeout(delays, durations) {
  while (delays.length < durations.length) {
    delays = delays.concat(delays);
  }
  return Math.max(...durations.map((d, i) => toMs(d) + toMs(delays[i])));
}
function toMs(s) {
  return Number(s.slice(0, -1).replace(",", ".")) * 1e3;
}
function forceReflow() {
  return document.body.offsetHeight;
}
const positionMap = /* @__PURE__ */ new WeakMap();
const newPositionMap = /* @__PURE__ */ new WeakMap();
const TransitionGroupImpl = {
  name: "TransitionGroup",
  props: /* @__PURE__ */ extend$2({}, TransitionPropsValidators, {
    tag: String,
    moveClass: String
  }),
  setup(props2, { slots }) {
    const instance = getCurrentInstance();
    const state = useTransitionState();
    let prevChildren;
    let children;
    onUpdated(() => {
      if (!prevChildren.length) {
        return;
      }
      const moveClass = props2.moveClass || `${props2.name || "v"}-move`;
      if (!hasCSSTransform(prevChildren[0].el, instance.vnode.el, moveClass)) {
        return;
      }
      prevChildren.forEach(callPendingCbs);
      prevChildren.forEach(recordPosition);
      const movedChildren = prevChildren.filter(applyTranslation);
      forceReflow();
      movedChildren.forEach((c) => {
        const el = c.el;
        const style = el.style;
        addTransitionClass(el, moveClass);
        style.transform = style.webkitTransform = style.transitionDuration = "";
        const cb = el._moveCb = (e) => {
          if (e && e.target !== el) {
            return;
          }
          if (!e || /transform$/.test(e.propertyName)) {
            el.removeEventListener("transitionend", cb);
            el._moveCb = null;
            removeTransitionClass(el, moveClass);
          }
        };
        el.addEventListener("transitionend", cb);
      });
    });
    return () => {
      const rawProps = toRaw(props2);
      const cssTransitionProps = resolveTransitionProps(rawProps);
      let tag = rawProps.tag || Fragment;
      prevChildren = children;
      children = slots.default ? getTransitionRawChildren(slots.default()) : [];
      for (let i = 0; i < children.length; i++) {
        const child = children[i];
        if (child.key != null) {
          setTransitionHooks(child, resolveTransitionHooks(child, cssTransitionProps, state, instance));
        }
      }
      if (prevChildren) {
        for (let i = 0; i < prevChildren.length; i++) {
          const child = prevChildren[i];
          setTransitionHooks(child, resolveTransitionHooks(child, cssTransitionProps, state, instance));
          positionMap.set(child, child.el.getBoundingClientRect());
        }
      }
      return createVNode(tag, null, children);
    };
  }
};
const removeMode = (props2) => delete props2.mode;
/* @__PURE__ */ removeMode(TransitionGroupImpl.props);
const TransitionGroup = TransitionGroupImpl;
function callPendingCbs(c) {
  const el = c.el;
  if (el._moveCb) {
    el._moveCb();
  }
  if (el._enterCb) {
    el._enterCb();
  }
}
function recordPosition(c) {
  newPositionMap.set(c, c.el.getBoundingClientRect());
}
function applyTranslation(c) {
  const oldPos = positionMap.get(c);
  const newPos = newPositionMap.get(c);
  const dx = oldPos.left - newPos.left;
  const dy = oldPos.top - newPos.top;
  if (dx || dy) {
    const s = c.el.style;
    s.transform = s.webkitTransform = `translate(${dx}px,${dy}px)`;
    s.transitionDuration = "0s";
    return c;
  }
}
function hasCSSTransform(el, root, moveClass) {
  const clone = el.cloneNode();
  if (el._vtc) {
    el._vtc.forEach((cls) => {
      cls.split(/\s+/).forEach((c) => c && clone.classList.remove(c));
    });
  }
  moveClass.split(/\s+/).forEach((c) => c && clone.classList.add(c));
  clone.style.display = "none";
  const container = root.nodeType === 1 ? root : root.parentNode;
  container.appendChild(clone);
  const { hasTransform } = getTransitionInfo(clone);
  container.removeChild(clone);
  return hasTransform;
}
const getModelAssigner = (vnode) => {
  const fn = vnode.props["onUpdate:modelValue"] || false;
  return isArray$1(fn) ? (value) => invokeArrayFns(fn, value) : fn;
};
function onCompositionStart(e) {
  e.target.composing = true;
}
function onCompositionEnd(e) {
  const target = e.target;
  if (target.composing) {
    target.composing = false;
    target.dispatchEvent(new Event("input"));
  }
}
const vModelText = {
  created(el, { modifiers: { lazy, trim: trim2, number } }, vnode) {
    el._assign = getModelAssigner(vnode);
    const castToNumber = number || vnode.props && vnode.props.type === "number";
    addEventListener(el, lazy ? "change" : "input", (e) => {
      if (e.target.composing)
        return;
      let domValue = el.value;
      if (trim2) {
        domValue = domValue.trim();
      }
      if (castToNumber) {
        domValue = looseToNumber(domValue);
      }
      el._assign(domValue);
    });
    if (trim2) {
      addEventListener(el, "change", () => {
        el.value = el.value.trim();
      });
    }
    if (!lazy) {
      addEventListener(el, "compositionstart", onCompositionStart);
      addEventListener(el, "compositionend", onCompositionEnd);
      addEventListener(el, "change", onCompositionEnd);
    }
  },
  // set value on mounted so it's after min/max for type="range"
  mounted(el, { value }) {
    el.value = value == null ? "" : value;
  },
  beforeUpdate(el, { value, modifiers: { lazy, trim: trim2, number } }, vnode) {
    el._assign = getModelAssigner(vnode);
    if (el.composing)
      return;
    if (document.activeElement === el && el.type !== "range") {
      if (lazy) {
        return;
      }
      if (trim2 && el.value.trim() === value) {
        return;
      }
      if ((number || el.type === "number") && looseToNumber(el.value) === value) {
        return;
      }
    }
    const newValue = value == null ? "" : value;
    if (el.value !== newValue) {
      el.value = newValue;
    }
  }
};
const vModelCheckbox = {
  // #4096 array checkboxes need to be deep traversed
  deep: true,
  created(el, _, vnode) {
    el._assign = getModelAssigner(vnode);
    addEventListener(el, "change", () => {
      const modelValue = el._modelValue;
      const elementValue = getValue$1(el);
      const checked = el.checked;
      const assign = el._assign;
      if (isArray$1(modelValue)) {
        const index = looseIndexOf(modelValue, elementValue);
        const found = index !== -1;
        if (checked && !found) {
          assign(modelValue.concat(elementValue));
        } else if (!checked && found) {
          const filtered = [...modelValue];
          filtered.splice(index, 1);
          assign(filtered);
        }
      } else if (isSet(modelValue)) {
        const cloned = new Set(modelValue);
        if (checked) {
          cloned.add(elementValue);
        } else {
          cloned.delete(elementValue);
        }
        assign(cloned);
      } else {
        assign(getCheckboxValue(el, checked));
      }
    });
  },
  // set initial checked on mount to wait for true-value/false-value
  mounted: setChecked,
  beforeUpdate(el, binding, vnode) {
    el._assign = getModelAssigner(vnode);
    setChecked(el, binding, vnode);
  }
};
function setChecked(el, { value, oldValue }, vnode) {
  el._modelValue = value;
  if (isArray$1(value)) {
    el.checked = looseIndexOf(value, vnode.props.value) > -1;
  } else if (isSet(value)) {
    el.checked = value.has(vnode.props.value);
  } else if (value !== oldValue) {
    el.checked = looseEqual(value, getCheckboxValue(el, true));
  }
}
const vModelRadio = {
  created(el, { value }, vnode) {
    el.checked = looseEqual(value, vnode.props.value);
    el._assign = getModelAssigner(vnode);
    addEventListener(el, "change", () => {
      el._assign(getValue$1(el));
    });
  },
  beforeUpdate(el, { value, oldValue }, vnode) {
    el._assign = getModelAssigner(vnode);
    if (value !== oldValue) {
      el.checked = looseEqual(value, vnode.props.value);
    }
  }
};
const vModelSelect = {
  // <select multiple> value need to be deep traversed
  deep: true,
  created(el, { value, modifiers: { number } }, vnode) {
    const isSetModel = isSet(value);
    addEventListener(el, "change", () => {
      const selectedVal = Array.prototype.filter.call(el.options, (o) => o.selected).map((o) => number ? looseToNumber(getValue$1(o)) : getValue$1(o));
      el._assign(el.multiple ? isSetModel ? new Set(selectedVal) : selectedVal : selectedVal[0]);
    });
    el._assign = getModelAssigner(vnode);
  },
  // set value in mounted & updated because <select> relies on its children
  // <option>s.
  mounted(el, { value }) {
    setSelected(el, value);
  },
  beforeUpdate(el, _binding, vnode) {
    el._assign = getModelAssigner(vnode);
  },
  updated(el, { value }) {
    setSelected(el, value);
  }
};
function setSelected(el, value) {
  const isMultiple = el.multiple;
  if (isMultiple && !isArray$1(value) && !isSet(value)) {
    return;
  }
  for (let i = 0, l = el.options.length; i < l; i++) {
    const option = el.options[i];
    const optionValue = getValue$1(option);
    if (isMultiple) {
      if (isArray$1(value)) {
        option.selected = looseIndexOf(value, optionValue) > -1;
      } else {
        option.selected = value.has(optionValue);
      }
    } else {
      if (looseEqual(getValue$1(option), value)) {
        if (el.selectedIndex !== i)
          el.selectedIndex = i;
        return;
      }
    }
  }
  if (!isMultiple && el.selectedIndex !== -1) {
    el.selectedIndex = -1;
  }
}
function getValue$1(el) {
  return "_value" in el ? el._value : el.value;
}
function getCheckboxValue(el, checked) {
  const key = checked ? "_trueValue" : "_falseValue";
  return key in el ? el[key] : checked;
}
const vModelDynamic = {
  created(el, binding, vnode) {
    callModelHook(el, binding, vnode, null, "created");
  },
  mounted(el, binding, vnode) {
    callModelHook(el, binding, vnode, null, "mounted");
  },
  beforeUpdate(el, binding, vnode, prevVNode) {
    callModelHook(el, binding, vnode, prevVNode, "beforeUpdate");
  },
  updated(el, binding, vnode, prevVNode) {
    callModelHook(el, binding, vnode, prevVNode, "updated");
  }
};
function resolveDynamicModel(tagName, type) {
  switch (tagName) {
    case "SELECT":
      return vModelSelect;
    case "TEXTAREA":
      return vModelText;
    default:
      switch (type) {
        case "checkbox":
          return vModelCheckbox;
        case "radio":
          return vModelRadio;
        default:
          return vModelText;
      }
  }
}
function callModelHook(el, binding, vnode, prevVNode, hook) {
  const modelToUse = resolveDynamicModel(el.tagName, vnode.props && vnode.props.type);
  const fn = modelToUse[hook];
  fn && fn(el, binding, vnode, prevVNode);
}
function initVModelForSSR() {
  vModelText.getSSRProps = ({ value }) => ({ value });
  vModelRadio.getSSRProps = ({ value }, vnode) => {
    if (vnode.props && looseEqual(vnode.props.value, value)) {
      return { checked: true };
    }
  };
  vModelCheckbox.getSSRProps = ({ value }, vnode) => {
    if (isArray$1(value)) {
      if (vnode.props && looseIndexOf(value, vnode.props.value) > -1) {
        return { checked: true };
      }
    } else if (isSet(value)) {
      if (vnode.props && value.has(vnode.props.value)) {
        return { checked: true };
      }
    } else if (value) {
      return { checked: true };
    }
  };
  vModelDynamic.getSSRProps = (binding, vnode) => {
    if (typeof vnode.type !== "string") {
      return;
    }
    const modelToUse = resolveDynamicModel(
      // resolveDynamicModel expects an uppercase tag name, but vnode.type is lowercase
      vnode.type.toUpperCase(),
      vnode.props && vnode.props.type
    );
    if (modelToUse.getSSRProps) {
      return modelToUse.getSSRProps(binding, vnode);
    }
  };
}
const systemModifiers = ["ctrl", "shift", "alt", "meta"];
const modifierGuards = {
  stop: (e) => e.stopPropagation(),
  prevent: (e) => e.preventDefault(),
  self: (e) => e.target !== e.currentTarget,
  ctrl: (e) => !e.ctrlKey,
  shift: (e) => !e.shiftKey,
  alt: (e) => !e.altKey,
  meta: (e) => !e.metaKey,
  left: (e) => "button" in e && e.button !== 0,
  middle: (e) => "button" in e && e.button !== 1,
  right: (e) => "button" in e && e.button !== 2,
  exact: (e, modifiers) => systemModifiers.some((m) => e[`${m}Key`] && !modifiers.includes(m))
};
const withModifiers = (fn, modifiers) => {
  return (event, ...args) => {
    for (let i = 0; i < modifiers.length; i++) {
      const guard = modifierGuards[modifiers[i]];
      if (guard && guard(event, modifiers))
        return;
    }
    return fn(event, ...args);
  };
};
const keyNames = {
  esc: "escape",
  space: " ",
  up: "arrow-up",
  left: "arrow-left",
  right: "arrow-right",
  down: "arrow-down",
  delete: "backspace"
};
const withKeys = (fn, modifiers) => {
  return (event) => {
    if (!("key" in event)) {
      return;
    }
    const eventKey = hyphenate(event.key);
    if (modifiers.some((k) => k === eventKey || keyNames[k] === eventKey)) {
      return fn(event);
    }
  };
};
const vShow = {
  beforeMount(el, { value }, { transition }) {
    el._vod = el.style.display === "none" ? "" : el.style.display;
    if (transition && value) {
      transition.beforeEnter(el);
    } else {
      setDisplay(el, value);
    }
  },
  mounted(el, { value }, { transition }) {
    if (transition && value) {
      transition.enter(el);
    }
  },
  updated(el, { value, oldValue }, { transition }) {
    if (!value === !oldValue)
      return;
    if (transition) {
      if (value) {
        transition.beforeEnter(el);
        setDisplay(el, true);
        transition.enter(el);
      } else {
        transition.leave(el, () => {
          setDisplay(el, false);
        });
      }
    } else {
      setDisplay(el, value);
    }
  },
  beforeUnmount(el, { value }) {
    setDisplay(el, value);
  }
};
function setDisplay(el, value) {
  el.style.display = value ? el._vod : "none";
}
function initVShowForSSR() {
  vShow.getSSRProps = ({ value }) => {
    if (!value) {
      return { style: { display: "none" } };
    }
  };
}
const rendererOptions = /* @__PURE__ */ extend$2({ patchProp }, nodeOps);
let renderer;
let enabledHydration = false;
function ensureRenderer() {
  return renderer || (renderer = createRenderer(rendererOptions));
}
function ensureHydrationRenderer() {
  renderer = enabledHydration ? renderer : createHydrationRenderer(rendererOptions);
  enabledHydration = true;
  return renderer;
}
const render = (...args) => {
  ensureRenderer().render(...args);
};
const hydrate = (...args) => {
  ensureHydrationRenderer().hydrate(...args);
};
const createApp = (...args) => {
  const app = ensureRenderer().createApp(...args);
  const { mount } = app;
  app.mount = (containerOrSelector) => {
    const container = normalizeContainer(containerOrSelector);
    if (!container)
      return;
    const component = app._component;
    if (!isFunction$1(component) && !component.render && !component.template) {
      component.template = container.innerHTML;
    }
    container.innerHTML = "";
    const proxy2 = mount(container, false, container instanceof SVGElement);
    if (container instanceof Element) {
      container.removeAttribute("v-cloak");
      container.setAttribute("data-v-app", "");
    }
    return proxy2;
  };
  return app;
};
const createSSRApp = (...args) => {
  const app = ensureHydrationRenderer().createApp(...args);
  const { mount } = app;
  app.mount = (containerOrSelector) => {
    const container = normalizeContainer(containerOrSelector);
    if (container) {
      return mount(container, true, container instanceof SVGElement);
    }
  };
  return app;
};
function normalizeContainer(container) {
  if (isString$1(container)) {
    const res = document.querySelector(container);
    return res;
  }
  return container;
}
let ssrDirectiveInitialized = false;
const initDirectivesForSSR = () => {
  if (!ssrDirectiveInitialized) {
    ssrDirectiveInitialized = true;
    initVModelForSSR();
    initVShowForSSR();
  }
};
const compile$3 = () => {
};
var Vue = /* @__PURE__ */ Object.freeze({
  __proto__: null,
  BaseTransition,
  Comment,
  EffectScope,
  Fragment,
  KeepAlive,
  ReactiveEffect,
  Static,
  Suspense,
  Teleport,
  Text,
  Transition,
  TransitionGroup,
  VueElement,
  assertNumber,
  callWithAsyncErrorHandling,
  callWithErrorHandling,
  camelize,
  capitalize,
  cloneVNode,
  compatUtils,
  compile: compile$3,
  computed,
  createApp,
  createBlock,
  createCommentVNode,
  createElementBlock,
  createElementVNode: createBaseVNode,
  createHydrationRenderer,
  createPropsRestProxy,
  createRenderer,
  createSSRApp,
  createSlots,
  createStaticVNode,
  createTextVNode,
  createVNode,
  customRef,
  defineAsyncComponent,
  defineComponent,
  defineCustomElement,
  defineEmits,
  defineExpose,
  defineProps,
  defineSSRCustomElement,
  get devtools() {
    return devtools;
  },
  effect,
  effectScope,
  getCurrentInstance,
  getCurrentScope,
  getTransitionRawChildren,
  guardReactiveProps,
  h,
  handleError,
  hydrate,
  initCustomFormatter,
  initDirectivesForSSR,
  inject,
  isMemoSame,
  isProxy,
  isReactive,
  isReadonly,
  isRef,
  isRuntimeOnly,
  isShallow,
  isVNode,
  markRaw,
  mergeDefaults,
  mergeProps,
  nextTick,
  normalizeClass,
  normalizeProps,
  normalizeStyle,
  onActivated,
  onBeforeMount,
  onBeforeUnmount,
  onBeforeUpdate,
  onDeactivated,
  onErrorCaptured,
  onMounted,
  onRenderTracked,
  onRenderTriggered,
  onScopeDispose,
  onServerPrefetch,
  onUnmounted,
  onUpdated,
  openBlock,
  popScopeId,
  provide,
  proxyRefs,
  pushScopeId,
  queuePostFlushCb,
  reactive,
  readonly,
  ref,
  registerRuntimeCompiler,
  render,
  renderList,
  renderSlot,
  resolveComponent,
  resolveDirective,
  resolveDynamicComponent,
  resolveFilter,
  resolveTransitionHooks,
  setBlockTracking,
  setDevtoolsHook,
  setTransitionHooks,
  shallowReactive,
  shallowReadonly,
  shallowRef,
  ssrContextKey,
  ssrUtils,
  stop,
  toDisplayString,
  toHandlerKey,
  toHandlers,
  toRaw,
  toRef,
  toRefs,
  transformVNodeArgs,
  triggerRef,
  unref,
  useAttrs,
  useCssModule,
  useCssVars,
  useSSRContext,
  useSlots,
  useTransitionState,
  vModelCheckbox,
  vModelDynamic,
  vModelRadio,
  vModelSelect,
  vModelText,
  vShow,
  version,
  warn,
  watch: watch$d,
  watchEffect,
  watchPostEffect,
  watchSyncEffect,
  withAsyncContext,
  withCtx,
  withDefaults,
  withDirectives,
  withKeys,
  withMemo,
  withModifiers,
  withScopeId
});
const camelToDash = (name) => {
  return name.replace(/\W+/g, "-").replace(/([a-z\d])([A-Z])/g, "$1-$2").toLowerCase();
};
function getPropertyString(vueRoot, key) {
  var _a;
  let el = (_a = vueRoot == null ? void 0 : vueRoot.$el) == null ? void 0 : _a.parentElement, prop = el ? el.getAttribute(`data-${camelToDash(key)}`) : null;
  if (prop)
    return decodeURIComponent(prop);
  else
    return "";
}
function getInstanceId(vueRoot) {
  return getPropertyString(vueRoot, "instanceId");
}
function bind(fn, thisArg) {
  return function wrap() {
    return fn.apply(thisArg, arguments);
  };
}
const { toString } = Object.prototype;
const { getPrototypeOf } = Object;
const kindOf = ((cache) => (thing) => {
  const str = toString.call(thing);
  return cache[str] || (cache[str] = str.slice(8, -1).toLowerCase());
})(/* @__PURE__ */ Object.create(null));
const kindOfTest = (type) => {
  type = type.toLowerCase();
  return (thing) => kindOf(thing) === type;
};
const typeOfTest = (type) => (thing) => typeof thing === type;
const { isArray } = Array;
const isUndefined$1 = typeOfTest("undefined");
function isBuffer(val) {
  return val !== null && !isUndefined$1(val) && val.constructor !== null && !isUndefined$1(val.constructor) && isFunction(val.constructor.isBuffer) && val.constructor.isBuffer(val);
}
const isArrayBuffer = kindOfTest("ArrayBuffer");
function isArrayBufferView(val) {
  let result;
  if (typeof ArrayBuffer !== "undefined" && ArrayBuffer.isView) {
    result = ArrayBuffer.isView(val);
  } else {
    result = val && val.buffer && isArrayBuffer(val.buffer);
  }
  return result;
}
const isString = typeOfTest("string");
const isFunction = typeOfTest("function");
const isNumber = typeOfTest("number");
const isObject$1 = (thing) => thing !== null && typeof thing === "object";
const isBoolean = (thing) => thing === true || thing === false;
const isPlainObject = (val) => {
  if (kindOf(val) !== "object") {
    return false;
  }
  const prototype2 = getPrototypeOf(val);
  return (prototype2 === null || prototype2 === Object.prototype || Object.getPrototypeOf(prototype2) === null) && !(Symbol.toStringTag in val) && !(Symbol.iterator in val);
};
const isDate = kindOfTest("Date");
const isFile = kindOfTest("File");
const isBlob = kindOfTest("Blob");
const isFileList = kindOfTest("FileList");
const isStream = (val) => isObject$1(val) && isFunction(val.pipe);
const isFormData = (thing) => {
  let kind;
  return thing && (typeof FormData === "function" && thing instanceof FormData || isFunction(thing.append) && ((kind = kindOf(thing)) === "formdata" || // detect form-data instance
  kind === "object" && isFunction(thing.toString) && thing.toString() === "[object FormData]"));
};
const isURLSearchParams = kindOfTest("URLSearchParams");
const trim = (str) => str.trim ? str.trim() : str.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, "");
function forEach(obj, fn, { allOwnKeys = false } = {}) {
  if (obj === null || typeof obj === "undefined") {
    return;
  }
  let i;
  let l;
  if (typeof obj !== "object") {
    obj = [obj];
  }
  if (isArray(obj)) {
    for (i = 0, l = obj.length; i < l; i++) {
      fn.call(null, obj[i], i, obj);
    }
  } else {
    const keys2 = allOwnKeys ? Object.getOwnPropertyNames(obj) : Object.keys(obj);
    const len = keys2.length;
    let key;
    for (i = 0; i < len; i++) {
      key = keys2[i];
      fn.call(null, obj[key], key, obj);
    }
  }
}
function findKey(obj, key) {
  key = key.toLowerCase();
  const keys2 = Object.keys(obj);
  let i = keys2.length;
  let _key;
  while (i-- > 0) {
    _key = keys2[i];
    if (key === _key.toLowerCase()) {
      return _key;
    }
  }
  return null;
}
const _global = (() => {
  if (typeof globalThis !== "undefined")
    return globalThis;
  return typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : global;
})();
const isContextDefined = (context) => !isUndefined$1(context) && context !== _global;
function merge$1() {
  const { caseless } = isContextDefined(this) && this || {};
  const result = {};
  const assignValue = (val, key) => {
    const targetKey = caseless && findKey(result, key) || key;
    if (isPlainObject(result[targetKey]) && isPlainObject(val)) {
      result[targetKey] = merge$1(result[targetKey], val);
    } else if (isPlainObject(val)) {
      result[targetKey] = merge$1({}, val);
    } else if (isArray(val)) {
      result[targetKey] = val.slice();
    } else {
      result[targetKey] = val;
    }
  };
  for (let i = 0, l = arguments.length; i < l; i++) {
    arguments[i] && forEach(arguments[i], assignValue);
  }
  return result;
}
const extend$1 = (a, b, thisArg, { allOwnKeys } = {}) => {
  forEach(b, (val, key) => {
    if (thisArg && isFunction(val)) {
      a[key] = bind(val, thisArg);
    } else {
      a[key] = val;
    }
  }, { allOwnKeys });
  return a;
};
const stripBOM = (content) => {
  if (content.charCodeAt(0) === 65279) {
    content = content.slice(1);
  }
  return content;
};
const inherits = (constructor, superConstructor, props2, descriptors2) => {
  constructor.prototype = Object.create(superConstructor.prototype, descriptors2);
  constructor.prototype.constructor = constructor;
  Object.defineProperty(constructor, "super", {
    value: superConstructor.prototype
  });
  props2 && Object.assign(constructor.prototype, props2);
};
const toFlatObject = (sourceObj, destObj, filter2, propFilter) => {
  let props2;
  let i;
  let prop;
  const merged = {};
  destObj = destObj || {};
  if (sourceObj == null)
    return destObj;
  do {
    props2 = Object.getOwnPropertyNames(sourceObj);
    i = props2.length;
    while (i-- > 0) {
      prop = props2[i];
      if ((!propFilter || propFilter(prop, sourceObj, destObj)) && !merged[prop]) {
        destObj[prop] = sourceObj[prop];
        merged[prop] = true;
      }
    }
    sourceObj = filter2 !== false && getPrototypeOf(sourceObj);
  } while (sourceObj && (!filter2 || filter2(sourceObj, destObj)) && sourceObj !== Object.prototype);
  return destObj;
};
const endsWith = (str, searchString, position) => {
  str = String(str);
  if (position === void 0 || position > str.length) {
    position = str.length;
  }
  position -= searchString.length;
  const lastIndex = str.indexOf(searchString, position);
  return lastIndex !== -1 && lastIndex === position;
};
const toArray = (thing) => {
  if (!thing)
    return null;
  if (isArray(thing))
    return thing;
  let i = thing.length;
  if (!isNumber(i))
    return null;
  const arr = new Array(i);
  while (i-- > 0) {
    arr[i] = thing[i];
  }
  return arr;
};
const isTypedArray = ((TypedArray) => {
  return (thing) => {
    return TypedArray && thing instanceof TypedArray;
  };
})(typeof Uint8Array !== "undefined" && getPrototypeOf(Uint8Array));
const forEachEntry = (obj, fn) => {
  const generator = obj && obj[Symbol.iterator];
  const iterator = generator.call(obj);
  let result;
  while ((result = iterator.next()) && !result.done) {
    const pair = result.value;
    fn.call(obj, pair[0], pair[1]);
  }
};
const matchAll = (regExp2, str) => {
  let matches2;
  const arr = [];
  while ((matches2 = regExp2.exec(str)) !== null) {
    arr.push(matches2);
  }
  return arr;
};
const isHTMLForm = kindOfTest("HTMLFormElement");
const toCamelCase = (str) => {
  return str.toLowerCase().replace(
    /[-_\s]([a-z\d])(\w*)/g,
    function replacer2(m, p1, p2) {
      return p1.toUpperCase() + p2;
    }
  );
};
const hasOwnProperty = (({ hasOwnProperty: hasOwnProperty2 }) => (obj, prop) => hasOwnProperty2.call(obj, prop))(Object.prototype);
const isRegExp = kindOfTest("RegExp");
const reduceDescriptors = (obj, reducer) => {
  const descriptors2 = Object.getOwnPropertyDescriptors(obj);
  const reducedDescriptors = {};
  forEach(descriptors2, (descriptor, name) => {
    if (reducer(descriptor, name, obj) !== false) {
      reducedDescriptors[name] = descriptor;
    }
  });
  Object.defineProperties(obj, reducedDescriptors);
};
const freezeMethods = (obj) => {
  reduceDescriptors(obj, (descriptor, name) => {
    if (isFunction(obj) && ["arguments", "caller", "callee"].indexOf(name) !== -1) {
      return false;
    }
    const value = obj[name];
    if (!isFunction(value))
      return;
    descriptor.enumerable = false;
    if ("writable" in descriptor) {
      descriptor.writable = false;
      return;
    }
    if (!descriptor.set) {
      descriptor.set = () => {
        throw Error("Can not rewrite read-only method '" + name + "'");
      };
    }
  });
};
const toObjectSet = (arrayOrString, delimiter) => {
  const obj = {};
  const define = (arr) => {
    arr.forEach((value) => {
      obj[value] = true;
    });
  };
  isArray(arrayOrString) ? define(arrayOrString) : define(String(arrayOrString).split(delimiter));
  return obj;
};
const noop = () => {
};
const toFiniteNumber = (value, defaultValue) => {
  value = +value;
  return Number.isFinite(value) ? value : defaultValue;
};
const ALPHA = "abcdefghijklmnopqrstuvwxyz";
const DIGIT = "0123456789";
const ALPHABET = {
  DIGIT,
  ALPHA,
  ALPHA_DIGIT: ALPHA + ALPHA.toUpperCase() + DIGIT
};
const generateString = (size2 = 16, alphabet = ALPHABET.ALPHA_DIGIT) => {
  let str = "";
  const { length } = alphabet;
  while (size2--) {
    str += alphabet[Math.random() * length | 0];
  }
  return str;
};
function isSpecCompliantForm(thing) {
  return !!(thing && isFunction(thing.append) && thing[Symbol.toStringTag] === "FormData" && thing[Symbol.iterator]);
}
const toJSONObject = (obj) => {
  const stack = new Array(10);
  const visit = (source, i) => {
    if (isObject$1(source)) {
      if (stack.indexOf(source) >= 0) {
        return;
      }
      if (!("toJSON" in source)) {
        stack[i] = source;
        const target = isArray(source) ? [] : {};
        forEach(source, (value, key) => {
          const reducedValue = visit(value, i + 1);
          !isUndefined$1(reducedValue) && (target[key] = reducedValue);
        });
        stack[i] = void 0;
        return target;
      }
    }
    return source;
  };
  return visit(obj, 0);
};
var utils = {
  isArray,
  isArrayBuffer,
  isBuffer,
  isFormData,
  isArrayBufferView,
  isString,
  isNumber,
  isBoolean,
  isObject: isObject$1,
  isPlainObject,
  isUndefined: isUndefined$1,
  isDate,
  isFile,
  isBlob,
  isRegExp,
  isFunction,
  isStream,
  isURLSearchParams,
  isTypedArray,
  isFileList,
  forEach,
  merge: merge$1,
  extend: extend$1,
  trim,
  stripBOM,
  inherits,
  toFlatObject,
  kindOf,
  kindOfTest,
  endsWith,
  toArray,
  forEachEntry,
  matchAll,
  isHTMLForm,
  hasOwnProperty,
  hasOwnProp: hasOwnProperty,
  // an alias to avoid ESLint no-prototype-builtins detection
  reduceDescriptors,
  freezeMethods,
  toObjectSet,
  toCamelCase,
  noop,
  toFiniteNumber,
  findKey,
  global: _global,
  isContextDefined,
  ALPHABET,
  generateString,
  isSpecCompliantForm,
  toJSONObject
};
function AxiosError(message, code, config, request, response) {
  Error.call(this);
  if (Error.captureStackTrace) {
    Error.captureStackTrace(this, this.constructor);
  } else {
    this.stack = new Error().stack;
  }
  this.message = message;
  this.name = "AxiosError";
  code && (this.code = code);
  config && (this.config = config);
  request && (this.request = request);
  response && (this.response = response);
}
utils.inherits(AxiosError, Error, {
  toJSON: function toJSON() {
    return {
      // Standard
      message: this.message,
      name: this.name,
      // Microsoft
      description: this.description,
      number: this.number,
      // Mozilla
      fileName: this.fileName,
      lineNumber: this.lineNumber,
      columnNumber: this.columnNumber,
      stack: this.stack,
      // Axios
      config: utils.toJSONObject(this.config),
      code: this.code,
      status: this.response && this.response.status ? this.response.status : null
    };
  }
});
const prototype$1 = AxiosError.prototype;
const descriptors = {};
[
  "ERR_BAD_OPTION_VALUE",
  "ERR_BAD_OPTION",
  "ECONNABORTED",
  "ETIMEDOUT",
  "ERR_NETWORK",
  "ERR_FR_TOO_MANY_REDIRECTS",
  "ERR_DEPRECATED",
  "ERR_BAD_RESPONSE",
  "ERR_BAD_REQUEST",
  "ERR_CANCELED",
  "ERR_NOT_SUPPORT",
  "ERR_INVALID_URL"
  // eslint-disable-next-line func-names
].forEach((code) => {
  descriptors[code] = { value: code };
});
Object.defineProperties(AxiosError, descriptors);
Object.defineProperty(prototype$1, "isAxiosError", { value: true });
AxiosError.from = (error, code, config, request, response, customProps) => {
  const axiosError = Object.create(prototype$1);
  utils.toFlatObject(error, axiosError, function filter2(obj) {
    return obj !== Error.prototype;
  }, (prop) => {
    return prop !== "isAxiosError";
  });
  AxiosError.call(axiosError, error.message, code, config, request, response);
  axiosError.cause = error;
  axiosError.name = error.name;
  customProps && Object.assign(axiosError, customProps);
  return axiosError;
};
var httpAdapter = null;
function isVisitable(thing) {
  return utils.isPlainObject(thing) || utils.isArray(thing);
}
function removeBrackets(key) {
  return utils.endsWith(key, "[]") ? key.slice(0, -2) : key;
}
function renderKey(path, key, dots) {
  if (!path)
    return key;
  return path.concat(key).map(function each(token, i) {
    token = removeBrackets(token);
    return !dots && i ? "[" + token + "]" : token;
  }).join(dots ? "." : "");
}
function isFlatArray(arr) {
  return utils.isArray(arr) && !arr.some(isVisitable);
}
const predicates = utils.toFlatObject(utils, {}, null, function filter(prop) {
  return /^is[A-Z]/.test(prop);
});
function toFormData(obj, formData, options) {
  if (!utils.isObject(obj)) {
    throw new TypeError("target must be an object");
  }
  formData = formData || new FormData();
  options = utils.toFlatObject(options, {
    metaTokens: true,
    dots: false,
    indexes: false
  }, false, function defined(option, source) {
    return !utils.isUndefined(source[option]);
  });
  const metaTokens = options.metaTokens;
  const visitor = options.visitor || defaultVisitor;
  const dots = options.dots;
  const indexes = options.indexes;
  const _Blob = options.Blob || typeof Blob !== "undefined" && Blob;
  const useBlob = _Blob && utils.isSpecCompliantForm(formData);
  if (!utils.isFunction(visitor)) {
    throw new TypeError("visitor must be a function");
  }
  function convertValue(value) {
    if (value === null)
      return "";
    if (utils.isDate(value)) {
      return value.toISOString();
    }
    if (!useBlob && utils.isBlob(value)) {
      throw new AxiosError("Blob is not supported. Use a Buffer instead.");
    }
    if (utils.isArrayBuffer(value) || utils.isTypedArray(value)) {
      return useBlob && typeof Blob === "function" ? new Blob([value]) : Buffer.from(value);
    }
    return value;
  }
  function defaultVisitor(value, key, path) {
    let arr = value;
    if (value && !path && typeof value === "object") {
      if (utils.endsWith(key, "{}")) {
        key = metaTokens ? key : key.slice(0, -2);
        value = JSON.stringify(value);
      } else if (utils.isArray(value) && isFlatArray(value) || (utils.isFileList(value) || utils.endsWith(key, "[]")) && (arr = utils.toArray(value))) {
        key = removeBrackets(key);
        arr.forEach(function each(el, index) {
          !(utils.isUndefined(el) || el === null) && formData.append(
            // eslint-disable-next-line no-nested-ternary
            indexes === true ? renderKey([key], index, dots) : indexes === null ? key : key + "[]",
            convertValue(el)
          );
        });
        return false;
      }
    }
    if (isVisitable(value)) {
      return true;
    }
    formData.append(renderKey(path, key, dots), convertValue(value));
    return false;
  }
  const stack = [];
  const exposedHelpers = Object.assign(predicates, {
    defaultVisitor,
    convertValue,
    isVisitable
  });
  function build(value, path) {
    if (utils.isUndefined(value))
      return;
    if (stack.indexOf(value) !== -1) {
      throw Error("Circular reference detected in " + path.join("."));
    }
    stack.push(value);
    utils.forEach(value, function each(el, key) {
      const result = !(utils.isUndefined(el) || el === null) && visitor.call(
        formData,
        el,
        utils.isString(key) ? key.trim() : key,
        path,
        exposedHelpers
      );
      if (result === true) {
        build(el, path ? path.concat(key) : [key]);
      }
    });
    stack.pop();
  }
  if (!utils.isObject(obj)) {
    throw new TypeError("data must be an object");
  }
  build(obj);
  return formData;
}
function encode$1(str) {
  const charMap = {
    "!": "%21",
    "'": "%27",
    "(": "%28",
    ")": "%29",
    "~": "%7E",
    "%20": "+",
    "%00": "\0"
  };
  return encodeURIComponent(str).replace(/[!'()~]|%20|%00/g, function replacer2(match) {
    return charMap[match];
  });
}
function AxiosURLSearchParams(params, options) {
  this._pairs = [];
  params && toFormData(params, this, options);
}
const prototype = AxiosURLSearchParams.prototype;
prototype.append = function append(name, value) {
  this._pairs.push([name, value]);
};
prototype.toString = function toString2(encoder) {
  const _encode = encoder ? function(value) {
    return encoder.call(this, value, encode$1);
  } : encode$1;
  return this._pairs.map(function each(pair) {
    return _encode(pair[0]) + "=" + _encode(pair[1]);
  }, "").join("&");
};
function encode(val) {
  return encodeURIComponent(val).replace(/%3A/gi, ":").replace(/%24/g, "$").replace(/%2C/gi, ",").replace(/%20/g, "+").replace(/%5B/gi, "[").replace(/%5D/gi, "]");
}
function buildURL(url, params, options) {
  if (!params) {
    return url;
  }
  const _encode = options && options.encode || encode;
  const serializeFn = options && options.serialize;
  let serializedParams;
  if (serializeFn) {
    serializedParams = serializeFn(params, options);
  } else {
    serializedParams = utils.isURLSearchParams(params) ? params.toString() : new AxiosURLSearchParams(params, options).toString(_encode);
  }
  if (serializedParams) {
    const hashmarkIndex = url.indexOf("#");
    if (hashmarkIndex !== -1) {
      url = url.slice(0, hashmarkIndex);
    }
    url += (url.indexOf("?") === -1 ? "?" : "&") + serializedParams;
  }
  return url;
}
class InterceptorManager {
  constructor() {
    this.handlers = [];
  }
  /**
   * Add a new interceptor to the stack
   *
   * @param {Function} fulfilled The function to handle `then` for a `Promise`
   * @param {Function} rejected The function to handle `reject` for a `Promise`
   *
   * @return {Number} An ID used to remove interceptor later
   */
  use(fulfilled, rejected, options) {
    this.handlers.push({
      fulfilled,
      rejected,
      synchronous: options ? options.synchronous : false,
      runWhen: options ? options.runWhen : null
    });
    return this.handlers.length - 1;
  }
  /**
   * Remove an interceptor from the stack
   *
   * @param {Number} id The ID that was returned by `use`
   *
   * @returns {Boolean} `true` if the interceptor was removed, `false` otherwise
   */
  eject(id) {
    if (this.handlers[id]) {
      this.handlers[id] = null;
    }
  }
  /**
   * Clear all interceptors from the stack
   *
   * @returns {void}
   */
  clear() {
    if (this.handlers) {
      this.handlers = [];
    }
  }
  /**
   * Iterate over all the registered interceptors
   *
   * This method is particularly useful for skipping over any
   * interceptors that may have become `null` calling `eject`.
   *
   * @param {Function} fn The function to call for each interceptor
   *
   * @returns {void}
   */
  forEach(fn) {
    utils.forEach(this.handlers, function forEachHandler(h2) {
      if (h2 !== null) {
        fn(h2);
      }
    });
  }
}
var InterceptorManager$1 = InterceptorManager;
var transitionalDefaults = {
  silentJSONParsing: true,
  forcedJSONParsing: true,
  clarifyTimeoutError: false
};
var URLSearchParams$1 = typeof URLSearchParams !== "undefined" ? URLSearchParams : AxiosURLSearchParams;
var FormData$1 = typeof FormData !== "undefined" ? FormData : null;
var Blob$1 = typeof Blob !== "undefined" ? Blob : null;
const isStandardBrowserEnv = (() => {
  let product;
  if (typeof navigator !== "undefined" && ((product = navigator.product) === "ReactNative" || product === "NativeScript" || product === "NS")) {
    return false;
  }
  return typeof window !== "undefined" && typeof document !== "undefined";
})();
const isStandardBrowserWebWorkerEnv = (() => {
  return typeof WorkerGlobalScope !== "undefined" && // eslint-disable-next-line no-undef
  self instanceof WorkerGlobalScope && typeof self.importScripts === "function";
})();
var platform = {
  isBrowser: true,
  classes: {
    URLSearchParams: URLSearchParams$1,
    FormData: FormData$1,
    Blob: Blob$1
  },
  isStandardBrowserEnv,
  isStandardBrowserWebWorkerEnv,
  protocols: ["http", "https", "file", "blob", "url", "data"]
};
function toURLEncodedForm(data, options) {
  return toFormData(data, new platform.classes.URLSearchParams(), Object.assign({
    visitor: function(value, key, path, helpers) {
      if (platform.isNode && utils.isBuffer(value)) {
        this.append(key, value.toString("base64"));
        return false;
      }
      return helpers.defaultVisitor.apply(this, arguments);
    }
  }, options));
}
function parsePropPath(name) {
  return utils.matchAll(/\w+|\[(\w*)]/g, name).map((match) => {
    return match[0] === "[]" ? "" : match[1] || match[0];
  });
}
function arrayToObject(arr) {
  const obj = {};
  const keys2 = Object.keys(arr);
  let i;
  const len = keys2.length;
  let key;
  for (i = 0; i < len; i++) {
    key = keys2[i];
    obj[key] = arr[key];
  }
  return obj;
}
function formDataToJSON(formData) {
  function buildPath(path, value, target, index) {
    let name = path[index++];
    const isNumericKey = Number.isFinite(+name);
    const isLast = index >= path.length;
    name = !name && utils.isArray(target) ? target.length : name;
    if (isLast) {
      if (utils.hasOwnProp(target, name)) {
        target[name] = [target[name], value];
      } else {
        target[name] = value;
      }
      return !isNumericKey;
    }
    if (!target[name] || !utils.isObject(target[name])) {
      target[name] = [];
    }
    const result = buildPath(path, value, target[name], index);
    if (result && utils.isArray(target[name])) {
      target[name] = arrayToObject(target[name]);
    }
    return !isNumericKey;
  }
  if (utils.isFormData(formData) && utils.isFunction(formData.entries)) {
    const obj = {};
    utils.forEachEntry(formData, (name, value) => {
      buildPath(parsePropPath(name), value, obj, 0);
    });
    return obj;
  }
  return null;
}
const DEFAULT_CONTENT_TYPE = {
  "Content-Type": void 0
};
function stringifySafely(rawValue, parser, encoder) {
  if (utils.isString(rawValue)) {
    try {
      (parser || JSON.parse)(rawValue);
      return utils.trim(rawValue);
    } catch (e) {
      if (e.name !== "SyntaxError") {
        throw e;
      }
    }
  }
  return (encoder || JSON.stringify)(rawValue);
}
const defaults = {
  transitional: transitionalDefaults,
  adapter: ["xhr", "http"],
  transformRequest: [function transformRequest(data, headers) {
    const contentType2 = headers.getContentType() || "";
    const hasJSONContentType = contentType2.indexOf("application/json") > -1;
    const isObjectPayload = utils.isObject(data);
    if (isObjectPayload && utils.isHTMLForm(data)) {
      data = new FormData(data);
    }
    const isFormData2 = utils.isFormData(data);
    if (isFormData2) {
      if (!hasJSONContentType) {
        return data;
      }
      return hasJSONContentType ? JSON.stringify(formDataToJSON(data)) : data;
    }
    if (utils.isArrayBuffer(data) || utils.isBuffer(data) || utils.isStream(data) || utils.isFile(data) || utils.isBlob(data)) {
      return data;
    }
    if (utils.isArrayBufferView(data)) {
      return data.buffer;
    }
    if (utils.isURLSearchParams(data)) {
      headers.setContentType("application/x-www-form-urlencoded;charset=utf-8", false);
      return data.toString();
    }
    let isFileList2;
    if (isObjectPayload) {
      if (contentType2.indexOf("application/x-www-form-urlencoded") > -1) {
        return toURLEncodedForm(data, this.formSerializer).toString();
      }
      if ((isFileList2 = utils.isFileList(data)) || contentType2.indexOf("multipart/form-data") > -1) {
        const _FormData = this.env && this.env.FormData;
        return toFormData(
          isFileList2 ? { "files[]": data } : data,
          _FormData && new _FormData(),
          this.formSerializer
        );
      }
    }
    if (isObjectPayload || hasJSONContentType) {
      headers.setContentType("application/json", false);
      return stringifySafely(data);
    }
    return data;
  }],
  transformResponse: [function transformResponse(data) {
    const transitional2 = this.transitional || defaults.transitional;
    const forcedJSONParsing = transitional2 && transitional2.forcedJSONParsing;
    const JSONRequested = this.responseType === "json";
    if (data && utils.isString(data) && (forcedJSONParsing && !this.responseType || JSONRequested)) {
      const silentJSONParsing = transitional2 && transitional2.silentJSONParsing;
      const strictJSONParsing = !silentJSONParsing && JSONRequested;
      try {
        return JSON.parse(data);
      } catch (e) {
        if (strictJSONParsing) {
          if (e.name === "SyntaxError") {
            throw AxiosError.from(e, AxiosError.ERR_BAD_RESPONSE, this, null, this.response);
          }
          throw e;
        }
      }
    }
    return data;
  }],
  /**
   * A timeout in milliseconds to abort a request. If set to 0 (default) a
   * timeout is not created.
   */
  timeout: 0,
  xsrfCookieName: "XSRF-TOKEN",
  xsrfHeaderName: "X-XSRF-TOKEN",
  maxContentLength: -1,
  maxBodyLength: -1,
  env: {
    FormData: platform.classes.FormData,
    Blob: platform.classes.Blob
  },
  validateStatus: function validateStatus(status) {
    return status >= 200 && status < 300;
  },
  headers: {
    common: {
      "Accept": "application/json, text/plain, */*"
    }
  }
};
utils.forEach(["delete", "get", "head"], function forEachMethodNoData(method) {
  defaults.headers[method] = {};
});
utils.forEach(["post", "put", "patch"], function forEachMethodWithData(method) {
  defaults.headers[method] = utils.merge(DEFAULT_CONTENT_TYPE);
});
var defaults$1 = defaults;
const ignoreDuplicateOf = utils.toObjectSet([
  "age",
  "authorization",
  "content-length",
  "content-type",
  "etag",
  "expires",
  "from",
  "host",
  "if-modified-since",
  "if-unmodified-since",
  "last-modified",
  "location",
  "max-forwards",
  "proxy-authorization",
  "referer",
  "retry-after",
  "user-agent"
]);
var parseHeaders = (rawHeaders) => {
  const parsed = {};
  let key;
  let val;
  let i;
  rawHeaders && rawHeaders.split("\n").forEach(function parser(line) {
    i = line.indexOf(":");
    key = line.substring(0, i).trim().toLowerCase();
    val = line.substring(i + 1).trim();
    if (!key || parsed[key] && ignoreDuplicateOf[key]) {
      return;
    }
    if (key === "set-cookie") {
      if (parsed[key]) {
        parsed[key].push(val);
      } else {
        parsed[key] = [val];
      }
    } else {
      parsed[key] = parsed[key] ? parsed[key] + ", " + val : val;
    }
  });
  return parsed;
};
const $internals = Symbol("internals");
function normalizeHeader(header) {
  return header && String(header).trim().toLowerCase();
}
function normalizeValue(value) {
  if (value === false || value == null) {
    return value;
  }
  return utils.isArray(value) ? value.map(normalizeValue) : String(value);
}
function parseTokens(str) {
  const tokens = /* @__PURE__ */ Object.create(null);
  const tokensRE = /([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;
  let match;
  while (match = tokensRE.exec(str)) {
    tokens[match[1]] = match[2];
  }
  return tokens;
}
const isValidHeaderName = (str) => /^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(str.trim());
function matchHeaderValue(context, value, header, filter2, isHeaderNameFilter) {
  if (utils.isFunction(filter2)) {
    return filter2.call(this, value, header);
  }
  if (isHeaderNameFilter) {
    value = header;
  }
  if (!utils.isString(value))
    return;
  if (utils.isString(filter2)) {
    return value.indexOf(filter2) !== -1;
  }
  if (utils.isRegExp(filter2)) {
    return filter2.test(value);
  }
}
function formatHeader(header) {
  return header.trim().toLowerCase().replace(/([a-z\d])(\w*)/g, (w, char, str) => {
    return char.toUpperCase() + str;
  });
}
function buildAccessors(obj, header) {
  const accessorName = utils.toCamelCase(" " + header);
  ["get", "set", "has"].forEach((methodName) => {
    Object.defineProperty(obj, methodName + accessorName, {
      value: function(arg1, arg2, arg3) {
        return this[methodName].call(this, header, arg1, arg2, arg3);
      },
      configurable: true
    });
  });
}
class AxiosHeaders {
  constructor(headers) {
    headers && this.set(headers);
  }
  set(header, valueOrRewrite, rewrite) {
    const self2 = this;
    function setHeader(_value, _header, _rewrite) {
      const lHeader = normalizeHeader(_header);
      if (!lHeader) {
        throw new Error("header name must be a non-empty string");
      }
      const key = utils.findKey(self2, lHeader);
      if (!key || self2[key] === void 0 || _rewrite === true || _rewrite === void 0 && self2[key] !== false) {
        self2[key || _header] = normalizeValue(_value);
      }
    }
    const setHeaders = (headers, _rewrite) => utils.forEach(headers, (_value, _header) => setHeader(_value, _header, _rewrite));
    if (utils.isPlainObject(header) || header instanceof this.constructor) {
      setHeaders(header, valueOrRewrite);
    } else if (utils.isString(header) && (header = header.trim()) && !isValidHeaderName(header)) {
      setHeaders(parseHeaders(header), valueOrRewrite);
    } else {
      header != null && setHeader(valueOrRewrite, header, rewrite);
    }
    return this;
  }
  get(header, parser) {
    header = normalizeHeader(header);
    if (header) {
      const key = utils.findKey(this, header);
      if (key) {
        const value = this[key];
        if (!parser) {
          return value;
        }
        if (parser === true) {
          return parseTokens(value);
        }
        if (utils.isFunction(parser)) {
          return parser.call(this, value, key);
        }
        if (utils.isRegExp(parser)) {
          return parser.exec(value);
        }
        throw new TypeError("parser must be boolean|regexp|function");
      }
    }
  }
  has(header, matcher) {
    header = normalizeHeader(header);
    if (header) {
      const key = utils.findKey(this, header);
      return !!(key && this[key] !== void 0 && (!matcher || matchHeaderValue(this, this[key], key, matcher)));
    }
    return false;
  }
  delete(header, matcher) {
    const self2 = this;
    let deleted = false;
    function deleteHeader(_header) {
      _header = normalizeHeader(_header);
      if (_header) {
        const key = utils.findKey(self2, _header);
        if (key && (!matcher || matchHeaderValue(self2, self2[key], key, matcher))) {
          delete self2[key];
          deleted = true;
        }
      }
    }
    if (utils.isArray(header)) {
      header.forEach(deleteHeader);
    } else {
      deleteHeader(header);
    }
    return deleted;
  }
  clear(matcher) {
    const keys2 = Object.keys(this);
    let i = keys2.length;
    let deleted = false;
    while (i--) {
      const key = keys2[i];
      if (!matcher || matchHeaderValue(this, this[key], key, matcher, true)) {
        delete this[key];
        deleted = true;
      }
    }
    return deleted;
  }
  normalize(format) {
    const self2 = this;
    const headers = {};
    utils.forEach(this, (value, header) => {
      const key = utils.findKey(headers, header);
      if (key) {
        self2[key] = normalizeValue(value);
        delete self2[header];
        return;
      }
      const normalized = format ? formatHeader(header) : String(header).trim();
      if (normalized !== header) {
        delete self2[header];
      }
      self2[normalized] = normalizeValue(value);
      headers[normalized] = true;
    });
    return this;
  }
  concat(...targets) {
    return this.constructor.concat(this, ...targets);
  }
  toJSON(asStrings) {
    const obj = /* @__PURE__ */ Object.create(null);
    utils.forEach(this, (value, header) => {
      value != null && value !== false && (obj[header] = asStrings && utils.isArray(value) ? value.join(", ") : value);
    });
    return obj;
  }
  [Symbol.iterator]() {
    return Object.entries(this.toJSON())[Symbol.iterator]();
  }
  toString() {
    return Object.entries(this.toJSON()).map(([header, value]) => header + ": " + value).join("\n");
  }
  get [Symbol.toStringTag]() {
    return "AxiosHeaders";
  }
  static from(thing) {
    return thing instanceof this ? thing : new this(thing);
  }
  static concat(first, ...targets) {
    const computed2 = new this(first);
    targets.forEach((target) => computed2.set(target));
    return computed2;
  }
  static accessor(header) {
    const internals = this[$internals] = this[$internals] = {
      accessors: {}
    };
    const accessors = internals.accessors;
    const prototype2 = this.prototype;
    function defineAccessor(_header) {
      const lHeader = normalizeHeader(_header);
      if (!accessors[lHeader]) {
        buildAccessors(prototype2, _header);
        accessors[lHeader] = true;
      }
    }
    utils.isArray(header) ? header.forEach(defineAccessor) : defineAccessor(header);
    return this;
  }
}
AxiosHeaders.accessor(["Content-Type", "Content-Length", "Accept", "Accept-Encoding", "User-Agent", "Authorization"]);
utils.freezeMethods(AxiosHeaders.prototype);
utils.freezeMethods(AxiosHeaders);
var AxiosHeaders$1 = AxiosHeaders;
function transformData(fns, response) {
  const config = this || defaults$1;
  const context = response || config;
  const headers = AxiosHeaders$1.from(context.headers);
  let data = context.data;
  utils.forEach(fns, function transform(fn) {
    data = fn.call(config, data, headers.normalize(), response ? response.status : void 0);
  });
  headers.normalize();
  return data;
}
function isCancel(value) {
  return !!(value && value.__CANCEL__);
}
function CanceledError(message, config, request) {
  AxiosError.call(this, message == null ? "canceled" : message, AxiosError.ERR_CANCELED, config, request);
  this.name = "CanceledError";
}
utils.inherits(CanceledError, AxiosError, {
  __CANCEL__: true
});
function settle(resolve2, reject, response) {
  const validateStatus2 = response.config.validateStatus;
  if (!response.status || !validateStatus2 || validateStatus2(response.status)) {
    resolve2(response);
  } else {
    reject(new AxiosError(
      "Request failed with status code " + response.status,
      [AxiosError.ERR_BAD_REQUEST, AxiosError.ERR_BAD_RESPONSE][Math.floor(response.status / 100) - 4],
      response.config,
      response.request,
      response
    ));
  }
}
var cookies = platform.isStandardBrowserEnv ? (
  // Standard browser envs support document.cookie
  function standardBrowserEnv() {
    return {
      write: function write(name, value, expires, path, domain, secure) {
        const cookie = [];
        cookie.push(name + "=" + encodeURIComponent(value));
        if (utils.isNumber(expires)) {
          cookie.push("expires=" + new Date(expires).toGMTString());
        }
        if (utils.isString(path)) {
          cookie.push("path=" + path);
        }
        if (utils.isString(domain)) {
          cookie.push("domain=" + domain);
        }
        if (secure === true) {
          cookie.push("secure");
        }
        document.cookie = cookie.join("; ");
      },
      read: function read(name) {
        const match = document.cookie.match(new RegExp("(^|;\\s*)(" + name + ")=([^;]*)"));
        return match ? decodeURIComponent(match[3]) : null;
      },
      remove: function remove2(name) {
        this.write(name, "", Date.now() - 864e5);
      }
    };
  }()
) : (
  // Non standard browser env (web workers, react-native) lack needed support.
  function nonStandardBrowserEnv() {
    return {
      write: function write() {
      },
      read: function read() {
        return null;
      },
      remove: function remove2() {
      }
    };
  }()
);
function isAbsoluteURL(url) {
  return /^([a-z][a-z\d+\-.]*:)?\/\//i.test(url);
}
function combineURLs(baseURL, relativeURL) {
  return relativeURL ? baseURL.replace(/\/+$/, "") + "/" + relativeURL.replace(/^\/+/, "") : baseURL;
}
function buildFullPath(baseURL, requestedURL) {
  if (baseURL && !isAbsoluteURL(requestedURL)) {
    return combineURLs(baseURL, requestedURL);
  }
  return requestedURL;
}
var isURLSameOrigin = platform.isStandardBrowserEnv ? (
  // Standard browser envs have full support of the APIs needed to test
  // whether the request URL is of the same origin as current location.
  function standardBrowserEnv2() {
    const msie = /(msie|trident)/i.test(navigator.userAgent);
    const urlParsingNode = document.createElement("a");
    let originURL;
    function resolveURL(url) {
      let href = url;
      if (msie) {
        urlParsingNode.setAttribute("href", href);
        href = urlParsingNode.href;
      }
      urlParsingNode.setAttribute("href", href);
      return {
        href: urlParsingNode.href,
        protocol: urlParsingNode.protocol ? urlParsingNode.protocol.replace(/:$/, "") : "",
        host: urlParsingNode.host,
        search: urlParsingNode.search ? urlParsingNode.search.replace(/^\?/, "") : "",
        hash: urlParsingNode.hash ? urlParsingNode.hash.replace(/^#/, "") : "",
        hostname: urlParsingNode.hostname,
        port: urlParsingNode.port,
        pathname: urlParsingNode.pathname.charAt(0) === "/" ? urlParsingNode.pathname : "/" + urlParsingNode.pathname
      };
    }
    originURL = resolveURL(window.location.href);
    return function isURLSameOrigin2(requestURL) {
      const parsed = utils.isString(requestURL) ? resolveURL(requestURL) : requestURL;
      return parsed.protocol === originURL.protocol && parsed.host === originURL.host;
    };
  }()
) : (
  // Non standard browser envs (web workers, react-native) lack needed support.
  function nonStandardBrowserEnv2() {
    return function isURLSameOrigin2() {
      return true;
    };
  }()
);
function parseProtocol(url) {
  const match = /^([-+\w]{1,25})(:?\/\/|:)/.exec(url);
  return match && match[1] || "";
}
function speedometer(samplesCount, min) {
  samplesCount = samplesCount || 10;
  const bytes = new Array(samplesCount);
  const timestamps = new Array(samplesCount);
  let head = 0;
  let tail = 0;
  let firstSampleTS;
  min = min !== void 0 ? min : 1e3;
  return function push(chunkLength) {
    const now = Date.now();
    const startedAt = timestamps[tail];
    if (!firstSampleTS) {
      firstSampleTS = now;
    }
    bytes[head] = chunkLength;
    timestamps[head] = now;
    let i = tail;
    let bytesCount = 0;
    while (i !== head) {
      bytesCount += bytes[i++];
      i = i % samplesCount;
    }
    head = (head + 1) % samplesCount;
    if (head === tail) {
      tail = (tail + 1) % samplesCount;
    }
    if (now - firstSampleTS < min) {
      return;
    }
    const passed = startedAt && now - startedAt;
    return passed ? Math.round(bytesCount * 1e3 / passed) : void 0;
  };
}
function progressEventReducer(listener, isDownloadStream) {
  let bytesNotified = 0;
  const _speedometer = speedometer(50, 250);
  return (e) => {
    const loaded = e.loaded;
    const total = e.lengthComputable ? e.total : void 0;
    const progressBytes = loaded - bytesNotified;
    const rate = _speedometer(progressBytes);
    const inRange = loaded <= total;
    bytesNotified = loaded;
    const data = {
      loaded,
      total,
      progress: total ? loaded / total : void 0,
      bytes: progressBytes,
      rate: rate ? rate : void 0,
      estimated: rate && total && inRange ? (total - loaded) / rate : void 0,
      event: e
    };
    data[isDownloadStream ? "download" : "upload"] = true;
    listener(data);
  };
}
const isXHRAdapterSupported = typeof XMLHttpRequest !== "undefined";
var xhrAdapter = isXHRAdapterSupported && function(config) {
  return new Promise(function dispatchXhrRequest(resolve2, reject) {
    let requestData = config.data;
    const requestHeaders = AxiosHeaders$1.from(config.headers).normalize();
    const responseType = config.responseType;
    let onCanceled;
    function done() {
      if (config.cancelToken) {
        config.cancelToken.unsubscribe(onCanceled);
      }
      if (config.signal) {
        config.signal.removeEventListener("abort", onCanceled);
      }
    }
    if (utils.isFormData(requestData) && (platform.isStandardBrowserEnv || platform.isStandardBrowserWebWorkerEnv)) {
      requestHeaders.setContentType(false);
    }
    let request = new XMLHttpRequest();
    if (config.auth) {
      const username = config.auth.username || "";
      const password = config.auth.password ? unescape(encodeURIComponent(config.auth.password)) : "";
      requestHeaders.set("Authorization", "Basic " + btoa(username + ":" + password));
    }
    const fullPath = buildFullPath(config.baseURL, config.url);
    request.open(config.method.toUpperCase(), buildURL(fullPath, config.params, config.paramsSerializer), true);
    request.timeout = config.timeout;
    function onloadend() {
      if (!request) {
        return;
      }
      const responseHeaders = AxiosHeaders$1.from(
        "getAllResponseHeaders" in request && request.getAllResponseHeaders()
      );
      const responseData = !responseType || responseType === "text" || responseType === "json" ? request.responseText : request.response;
      const response = {
        data: responseData,
        status: request.status,
        statusText: request.statusText,
        headers: responseHeaders,
        config,
        request
      };
      settle(function _resolve(value) {
        resolve2(value);
        done();
      }, function _reject(err) {
        reject(err);
        done();
      }, response);
      request = null;
    }
    if ("onloadend" in request) {
      request.onloadend = onloadend;
    } else {
      request.onreadystatechange = function handleLoad() {
        if (!request || request.readyState !== 4) {
          return;
        }
        if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf("file:") === 0)) {
          return;
        }
        setTimeout(onloadend);
      };
    }
    request.onabort = function handleAbort() {
      if (!request) {
        return;
      }
      reject(new AxiosError("Request aborted", AxiosError.ECONNABORTED, config, request));
      request = null;
    };
    request.onerror = function handleError2() {
      reject(new AxiosError("Network Error", AxiosError.ERR_NETWORK, config, request));
      request = null;
    };
    request.ontimeout = function handleTimeout() {
      let timeoutErrorMessage = config.timeout ? "timeout of " + config.timeout + "ms exceeded" : "timeout exceeded";
      const transitional2 = config.transitional || transitionalDefaults;
      if (config.timeoutErrorMessage) {
        timeoutErrorMessage = config.timeoutErrorMessage;
      }
      reject(new AxiosError(
        timeoutErrorMessage,
        transitional2.clarifyTimeoutError ? AxiosError.ETIMEDOUT : AxiosError.ECONNABORTED,
        config,
        request
      ));
      request = null;
    };
    if (platform.isStandardBrowserEnv) {
      const xsrfValue = (config.withCredentials || isURLSameOrigin(fullPath)) && config.xsrfCookieName && cookies.read(config.xsrfCookieName);
      if (xsrfValue) {
        requestHeaders.set(config.xsrfHeaderName, xsrfValue);
      }
    }
    requestData === void 0 && requestHeaders.setContentType(null);
    if ("setRequestHeader" in request) {
      utils.forEach(requestHeaders.toJSON(), function setRequestHeader(val, key) {
        request.setRequestHeader(key, val);
      });
    }
    if (!utils.isUndefined(config.withCredentials)) {
      request.withCredentials = !!config.withCredentials;
    }
    if (responseType && responseType !== "json") {
      request.responseType = config.responseType;
    }
    if (typeof config.onDownloadProgress === "function") {
      request.addEventListener("progress", progressEventReducer(config.onDownloadProgress, true));
    }
    if (typeof config.onUploadProgress === "function" && request.upload) {
      request.upload.addEventListener("progress", progressEventReducer(config.onUploadProgress));
    }
    if (config.cancelToken || config.signal) {
      onCanceled = (cancel) => {
        if (!request) {
          return;
        }
        reject(!cancel || cancel.type ? new CanceledError(null, config, request) : cancel);
        request.abort();
        request = null;
      };
      config.cancelToken && config.cancelToken.subscribe(onCanceled);
      if (config.signal) {
        config.signal.aborted ? onCanceled() : config.signal.addEventListener("abort", onCanceled);
      }
    }
    const protocol = parseProtocol(fullPath);
    if (protocol && platform.protocols.indexOf(protocol) === -1) {
      reject(new AxiosError("Unsupported protocol " + protocol + ":", AxiosError.ERR_BAD_REQUEST, config));
      return;
    }
    request.send(requestData || null);
  });
};
const knownAdapters = {
  http: httpAdapter,
  xhr: xhrAdapter
};
utils.forEach(knownAdapters, (fn, value) => {
  if (fn) {
    try {
      Object.defineProperty(fn, "name", { value });
    } catch (e) {
    }
    Object.defineProperty(fn, "adapterName", { value });
  }
});
var adapters = {
  getAdapter: (adapters2) => {
    adapters2 = utils.isArray(adapters2) ? adapters2 : [adapters2];
    const { length } = adapters2;
    let nameOrAdapter;
    let adapter;
    for (let i = 0; i < length; i++) {
      nameOrAdapter = adapters2[i];
      if (adapter = utils.isString(nameOrAdapter) ? knownAdapters[nameOrAdapter.toLowerCase()] : nameOrAdapter) {
        break;
      }
    }
    if (!adapter) {
      if (adapter === false) {
        throw new AxiosError(
          `Adapter ${nameOrAdapter} is not supported by the environment`,
          "ERR_NOT_SUPPORT"
        );
      }
      throw new Error(
        utils.hasOwnProp(knownAdapters, nameOrAdapter) ? `Adapter '${nameOrAdapter}' is not available in the build` : `Unknown adapter '${nameOrAdapter}'`
      );
    }
    if (!utils.isFunction(adapter)) {
      throw new TypeError("adapter is not a function");
    }
    return adapter;
  },
  adapters: knownAdapters
};
function throwIfCancellationRequested(config) {
  if (config.cancelToken) {
    config.cancelToken.throwIfRequested();
  }
  if (config.signal && config.signal.aborted) {
    throw new CanceledError(null, config);
  }
}
function dispatchRequest(config) {
  throwIfCancellationRequested(config);
  config.headers = AxiosHeaders$1.from(config.headers);
  config.data = transformData.call(
    config,
    config.transformRequest
  );
  if (["post", "put", "patch"].indexOf(config.method) !== -1) {
    config.headers.setContentType("application/x-www-form-urlencoded", false);
  }
  const adapter = adapters.getAdapter(config.adapter || defaults$1.adapter);
  return adapter(config).then(function onAdapterResolution(response) {
    throwIfCancellationRequested(config);
    response.data = transformData.call(
      config,
      config.transformResponse,
      response
    );
    response.headers = AxiosHeaders$1.from(response.headers);
    return response;
  }, function onAdapterRejection(reason) {
    if (!isCancel(reason)) {
      throwIfCancellationRequested(config);
      if (reason && reason.response) {
        reason.response.data = transformData.call(
          config,
          config.transformResponse,
          reason.response
        );
        reason.response.headers = AxiosHeaders$1.from(reason.response.headers);
      }
    }
    return Promise.reject(reason);
  });
}
const headersToObject = (thing) => thing instanceof AxiosHeaders$1 ? thing.toJSON() : thing;
function mergeConfig(config1, config2) {
  config2 = config2 || {};
  const config = {};
  function getMergedValue(target, source, caseless) {
    if (utils.isPlainObject(target) && utils.isPlainObject(source)) {
      return utils.merge.call({ caseless }, target, source);
    } else if (utils.isPlainObject(source)) {
      return utils.merge({}, source);
    } else if (utils.isArray(source)) {
      return source.slice();
    }
    return source;
  }
  function mergeDeepProperties(a, b, caseless) {
    if (!utils.isUndefined(b)) {
      return getMergedValue(a, b, caseless);
    } else if (!utils.isUndefined(a)) {
      return getMergedValue(void 0, a, caseless);
    }
  }
  function valueFromConfig2(a, b) {
    if (!utils.isUndefined(b)) {
      return getMergedValue(void 0, b);
    }
  }
  function defaultToConfig2(a, b) {
    if (!utils.isUndefined(b)) {
      return getMergedValue(void 0, b);
    } else if (!utils.isUndefined(a)) {
      return getMergedValue(void 0, a);
    }
  }
  function mergeDirectKeys(a, b, prop) {
    if (prop in config2) {
      return getMergedValue(a, b);
    } else if (prop in config1) {
      return getMergedValue(void 0, a);
    }
  }
  const mergeMap = {
    url: valueFromConfig2,
    method: valueFromConfig2,
    data: valueFromConfig2,
    baseURL: defaultToConfig2,
    transformRequest: defaultToConfig2,
    transformResponse: defaultToConfig2,
    paramsSerializer: defaultToConfig2,
    timeout: defaultToConfig2,
    timeoutMessage: defaultToConfig2,
    withCredentials: defaultToConfig2,
    adapter: defaultToConfig2,
    responseType: defaultToConfig2,
    xsrfCookieName: defaultToConfig2,
    xsrfHeaderName: defaultToConfig2,
    onUploadProgress: defaultToConfig2,
    onDownloadProgress: defaultToConfig2,
    decompress: defaultToConfig2,
    maxContentLength: defaultToConfig2,
    maxBodyLength: defaultToConfig2,
    beforeRedirect: defaultToConfig2,
    transport: defaultToConfig2,
    httpAgent: defaultToConfig2,
    httpsAgent: defaultToConfig2,
    cancelToken: defaultToConfig2,
    socketPath: defaultToConfig2,
    responseEncoding: defaultToConfig2,
    validateStatus: mergeDirectKeys,
    headers: (a, b) => mergeDeepProperties(headersToObject(a), headersToObject(b), true)
  };
  utils.forEach(Object.keys(config1).concat(Object.keys(config2)), function computeConfigValue(prop) {
    const merge2 = mergeMap[prop] || mergeDeepProperties;
    const configValue = merge2(config1[prop], config2[prop], prop);
    utils.isUndefined(configValue) && merge2 !== mergeDirectKeys || (config[prop] = configValue);
  });
  return config;
}
const VERSION = "1.3.6";
const validators$1 = {};
["object", "boolean", "number", "function", "string", "symbol"].forEach((type, i) => {
  validators$1[type] = function validator2(thing) {
    return typeof thing === type || "a" + (i < 1 ? "n " : " ") + type;
  };
});
const deprecatedWarnings = {};
validators$1.transitional = function transitional(validator2, version2, message) {
  function formatMessage(opt, desc) {
    return "[Axios v" + VERSION + "] Transitional option '" + opt + "'" + desc + (message ? ". " + message : "");
  }
  return (value, opt, opts) => {
    if (validator2 === false) {
      throw new AxiosError(
        formatMessage(opt, " has been removed" + (version2 ? " in " + version2 : "")),
        AxiosError.ERR_DEPRECATED
      );
    }
    if (version2 && !deprecatedWarnings[opt]) {
      deprecatedWarnings[opt] = true;
      console.warn(
        formatMessage(
          opt,
          " has been deprecated since v" + version2 + " and will be removed in the near future"
        )
      );
    }
    return validator2 ? validator2(value, opt, opts) : true;
  };
};
function assertOptions(options, schema, allowUnknown) {
  if (typeof options !== "object") {
    throw new AxiosError("options must be an object", AxiosError.ERR_BAD_OPTION_VALUE);
  }
  const keys2 = Object.keys(options);
  let i = keys2.length;
  while (i-- > 0) {
    const opt = keys2[i];
    const validator2 = schema[opt];
    if (validator2) {
      const value = options[opt];
      const result = value === void 0 || validator2(value, opt, options);
      if (result !== true) {
        throw new AxiosError("option " + opt + " must be " + result, AxiosError.ERR_BAD_OPTION_VALUE);
      }
      continue;
    }
    if (allowUnknown !== true) {
      throw new AxiosError("Unknown option " + opt, AxiosError.ERR_BAD_OPTION);
    }
  }
}
var validator = {
  assertOptions,
  validators: validators$1
};
const validators = validator.validators;
class Axios {
  constructor(instanceConfig) {
    this.defaults = instanceConfig;
    this.interceptors = {
      request: new InterceptorManager$1(),
      response: new InterceptorManager$1()
    };
  }
  /**
   * Dispatch a request
   *
   * @param {String|Object} configOrUrl The config specific for this request (merged with this.defaults)
   * @param {?Object} config
   *
   * @returns {Promise} The Promise to be fulfilled
   */
  request(configOrUrl, config) {
    if (typeof configOrUrl === "string") {
      config = config || {};
      config.url = configOrUrl;
    } else {
      config = configOrUrl || {};
    }
    config = mergeConfig(this.defaults, config);
    const { transitional: transitional2, paramsSerializer, headers } = config;
    if (transitional2 !== void 0) {
      validator.assertOptions(transitional2, {
        silentJSONParsing: validators.transitional(validators.boolean),
        forcedJSONParsing: validators.transitional(validators.boolean),
        clarifyTimeoutError: validators.transitional(validators.boolean)
      }, false);
    }
    if (paramsSerializer != null) {
      if (utils.isFunction(paramsSerializer)) {
        config.paramsSerializer = {
          serialize: paramsSerializer
        };
      } else {
        validator.assertOptions(paramsSerializer, {
          encode: validators.function,
          serialize: validators.function
        }, true);
      }
    }
    config.method = (config.method || this.defaults.method || "get").toLowerCase();
    let contextHeaders;
    contextHeaders = headers && utils.merge(
      headers.common,
      headers[config.method]
    );
    contextHeaders && utils.forEach(
      ["delete", "get", "head", "post", "put", "patch", "common"],
      (method) => {
        delete headers[method];
      }
    );
    config.headers = AxiosHeaders$1.concat(contextHeaders, headers);
    const requestInterceptorChain = [];
    let synchronousRequestInterceptors = true;
    this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {
      if (typeof interceptor.runWhen === "function" && interceptor.runWhen(config) === false) {
        return;
      }
      synchronousRequestInterceptors = synchronousRequestInterceptors && interceptor.synchronous;
      requestInterceptorChain.unshift(interceptor.fulfilled, interceptor.rejected);
    });
    const responseInterceptorChain = [];
    this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {
      responseInterceptorChain.push(interceptor.fulfilled, interceptor.rejected);
    });
    let promise;
    let i = 0;
    let len;
    if (!synchronousRequestInterceptors) {
      const chain = [dispatchRequest.bind(this), void 0];
      chain.unshift.apply(chain, requestInterceptorChain);
      chain.push.apply(chain, responseInterceptorChain);
      len = chain.length;
      promise = Promise.resolve(config);
      while (i < len) {
        promise = promise.then(chain[i++], chain[i++]);
      }
      return promise;
    }
    len = requestInterceptorChain.length;
    let newConfig = config;
    i = 0;
    while (i < len) {
      const onFulfilled = requestInterceptorChain[i++];
      const onRejected = requestInterceptorChain[i++];
      try {
        newConfig = onFulfilled(newConfig);
      } catch (error) {
        onRejected.call(this, error);
        break;
      }
    }
    try {
      promise = dispatchRequest.call(this, newConfig);
    } catch (error) {
      return Promise.reject(error);
    }
    i = 0;
    len = responseInterceptorChain.length;
    while (i < len) {
      promise = promise.then(responseInterceptorChain[i++], responseInterceptorChain[i++]);
    }
    return promise;
  }
  getUri(config) {
    config = mergeConfig(this.defaults, config);
    const fullPath = buildFullPath(config.baseURL, config.url);
    return buildURL(fullPath, config.params, config.paramsSerializer);
  }
}
utils.forEach(["delete", "get", "head", "options"], function forEachMethodNoData2(method) {
  Axios.prototype[method] = function(url, config) {
    return this.request(mergeConfig(config || {}, {
      method,
      url,
      data: (config || {}).data
    }));
  };
});
utils.forEach(["post", "put", "patch"], function forEachMethodWithData2(method) {
  function generateHTTPMethod(isForm) {
    return function httpMethod(url, data, config) {
      return this.request(mergeConfig(config || {}, {
        method,
        headers: isForm ? {
          "Content-Type": "multipart/form-data"
        } : {},
        url,
        data
      }));
    };
  }
  Axios.prototype[method] = generateHTTPMethod();
  Axios.prototype[method + "Form"] = generateHTTPMethod(true);
});
var Axios$1 = Axios;
class CancelToken {
  constructor(executor) {
    if (typeof executor !== "function") {
      throw new TypeError("executor must be a function.");
    }
    let resolvePromise;
    this.promise = new Promise(function promiseExecutor(resolve2) {
      resolvePromise = resolve2;
    });
    const token = this;
    this.promise.then((cancel) => {
      if (!token._listeners)
        return;
      let i = token._listeners.length;
      while (i-- > 0) {
        token._listeners[i](cancel);
      }
      token._listeners = null;
    });
    this.promise.then = (onfulfilled) => {
      let _resolve;
      const promise = new Promise((resolve2) => {
        token.subscribe(resolve2);
        _resolve = resolve2;
      }).then(onfulfilled);
      promise.cancel = function reject() {
        token.unsubscribe(_resolve);
      };
      return promise;
    };
    executor(function cancel(message, config, request) {
      if (token.reason) {
        return;
      }
      token.reason = new CanceledError(message, config, request);
      resolvePromise(token.reason);
    });
  }
  /**
   * Throws a `CanceledError` if cancellation has been requested.
   */
  throwIfRequested() {
    if (this.reason) {
      throw this.reason;
    }
  }
  /**
   * Subscribe to the cancel signal
   */
  subscribe(listener) {
    if (this.reason) {
      listener(this.reason);
      return;
    }
    if (this._listeners) {
      this._listeners.push(listener);
    } else {
      this._listeners = [listener];
    }
  }
  /**
   * Unsubscribe from the cancel signal
   */
  unsubscribe(listener) {
    if (!this._listeners) {
      return;
    }
    const index = this._listeners.indexOf(listener);
    if (index !== -1) {
      this._listeners.splice(index, 1);
    }
  }
  /**
   * Returns an object that contains a new `CancelToken` and a function that, when called,
   * cancels the `CancelToken`.
   */
  static source() {
    let cancel;
    const token = new CancelToken(function executor(c) {
      cancel = c;
    });
    return {
      token,
      cancel
    };
  }
}
var CancelToken$1 = CancelToken;
function spread(callback) {
  return function wrap(arr) {
    return callback.apply(null, arr);
  };
}
function isAxiosError(payload) {
  return utils.isObject(payload) && payload.isAxiosError === true;
}
const HttpStatusCode = {
  Continue: 100,
  SwitchingProtocols: 101,
  Processing: 102,
  EarlyHints: 103,
  Ok: 200,
  Created: 201,
  Accepted: 202,
  NonAuthoritativeInformation: 203,
  NoContent: 204,
  ResetContent: 205,
  PartialContent: 206,
  MultiStatus: 207,
  AlreadyReported: 208,
  ImUsed: 226,
  MultipleChoices: 300,
  MovedPermanently: 301,
  Found: 302,
  SeeOther: 303,
  NotModified: 304,
  UseProxy: 305,
  Unused: 306,
  TemporaryRedirect: 307,
  PermanentRedirect: 308,
  BadRequest: 400,
  Unauthorized: 401,
  PaymentRequired: 402,
  Forbidden: 403,
  NotFound: 404,
  MethodNotAllowed: 405,
  NotAcceptable: 406,
  ProxyAuthenticationRequired: 407,
  RequestTimeout: 408,
  Conflict: 409,
  Gone: 410,
  LengthRequired: 411,
  PreconditionFailed: 412,
  PayloadTooLarge: 413,
  UriTooLong: 414,
  UnsupportedMediaType: 415,
  RangeNotSatisfiable: 416,
  ExpectationFailed: 417,
  ImATeapot: 418,
  MisdirectedRequest: 421,
  UnprocessableEntity: 422,
  Locked: 423,
  FailedDependency: 424,
  TooEarly: 425,
  UpgradeRequired: 426,
  PreconditionRequired: 428,
  TooManyRequests: 429,
  RequestHeaderFieldsTooLarge: 431,
  UnavailableForLegalReasons: 451,
  InternalServerError: 500,
  NotImplemented: 501,
  BadGateway: 502,
  ServiceUnavailable: 503,
  GatewayTimeout: 504,
  HttpVersionNotSupported: 505,
  VariantAlsoNegotiates: 506,
  InsufficientStorage: 507,
  LoopDetected: 508,
  NotExtended: 510,
  NetworkAuthenticationRequired: 511
};
Object.entries(HttpStatusCode).forEach(([key, value]) => {
  HttpStatusCode[value] = key;
});
var HttpStatusCode$1 = HttpStatusCode;
function createInstance$1(defaultConfig) {
  const context = new Axios$1(defaultConfig);
  const instance = bind(Axios$1.prototype.request, context);
  utils.extend(instance, Axios$1.prototype, context, { allOwnKeys: true });
  utils.extend(instance, context, null, { allOwnKeys: true });
  instance.create = function create(instanceConfig) {
    return createInstance$1(mergeConfig(defaultConfig, instanceConfig));
  };
  return instance;
}
const axios = createInstance$1(defaults$1);
axios.Axios = Axios$1;
axios.CanceledError = CanceledError;
axios.CancelToken = CancelToken$1;
axios.isCancel = isCancel;
axios.VERSION = VERSION;
axios.toFormData = toFormData;
axios.AxiosError = AxiosError;
axios.Cancel = axios.CanceledError;
axios.all = function all(promises) {
  return Promise.all(promises);
};
axios.spread = spread;
axios.isAxiosError = isAxiosError;
axios.mergeConfig = mergeConfig;
axios.AxiosHeaders = AxiosHeaders$1;
axios.formToJSON = (thing) => formDataToJSON(utils.isHTMLForm(thing) ? new FormData(thing) : thing);
axios.HttpStatusCode = HttpStatusCode$1;
axios.default = axios;
var axios$1 = axios;
var instances = "ej2_instances";
var uid = 0;
var isBlazorPlatform = false;
function createInstance(classFunction, params) {
  var arrayParam = params;
  arrayParam.unshift(void 0);
  return new (Function.prototype.bind.apply(classFunction, arrayParam))();
}
function setImmediate(handler) {
  var unbind;
  var num = new Uint16Array(5);
  var intCrypto = window.msCrypto || window.crypto;
  intCrypto.getRandomValues(num);
  var secret = "ej2" + combineArray(num);
  var messageHandler = function(event) {
    if (event.source === window && typeof event.data === "string" && event.data.length <= 32 && event.data === secret) {
      handler();
      unbind();
    }
  };
  window.addEventListener("message", messageHandler, false);
  window.postMessage(secret, "*");
  return unbind = function() {
    window.removeEventListener("message", messageHandler);
    handler = messageHandler = secret = void 0;
  };
}
function getValue(nameSpace, obj) {
  var value = obj;
  var splits = nameSpace.replace(/\[/g, ".").replace(/\]/g, "").split(".");
  for (var i = 0; i < splits.length && !isUndefined(value); i++) {
    value = value[splits[parseInt(i.toString(), 10)]];
  }
  return value;
}
function setValue(nameSpace, value, obj) {
  var keys2 = nameSpace.replace(/\[/g, ".").replace(/\]/g, "").split(".");
  var start = obj || {};
  var fromObj = start;
  var i;
  var length = keys2.length;
  var key;
  for (i = 0; i < length; i++) {
    key = keys2[parseInt(i.toString(), 10)];
    if (i + 1 === length) {
      fromObj["" + key] = value === void 0 ? {} : value;
    } else if (isNullOrUndefined(fromObj["" + key])) {
      fromObj["" + key] = {};
    }
    fromObj = fromObj["" + key];
  }
  return start;
}
function deleteObject(obj, key) {
  delete obj["" + key];
}
var containerObject = typeof window !== "undefined" ? window : {};
function isObject(obj) {
  var objCon = {};
  return !isNullOrUndefined(obj) && obj.constructor === objCon.constructor;
}
function merge(source, destination) {
  if (!isNullOrUndefined(destination)) {
    var temrObj = source;
    var tempProp = destination;
    var keys2 = Object.keys(destination);
    var deepmerge = "deepMerge";
    for (var _i = 0, keys_1 = keys2; _i < keys_1.length; _i++) {
      var key = keys_1[_i];
      if (!isNullOrUndefined(temrObj["" + deepmerge]) && temrObj["" + deepmerge].indexOf(key) !== -1 && (isObject(tempProp["" + key]) || Array.isArray(tempProp["" + key]))) {
        extend(temrObj["" + key], temrObj["" + key], tempProp["" + key], true);
      } else {
        temrObj["" + key] = tempProp["" + key];
      }
    }
  }
}
function extend(copied, first, second, deep) {
  var result = copied && typeof copied === "object" ? copied : {};
  var length = arguments.length;
  if (deep) {
    length = length - 1;
  }
  var _loop_1 = function(i2) {
    if (!arguments_1[i2]) {
      return "continue";
    }
    var obj1 = arguments_1[i2];
    Object.keys(obj1).forEach(function(key) {
      var src = result["" + key];
      var copy = obj1["" + key];
      var clone;
      Array.isArray(copy) && Array.isArray(src) && copy.length !== src.length;
      var blazorEventExtend = true;
      if (deep && blazorEventExtend && (isObject(copy) || Array.isArray(copy))) {
        if (isObject(copy)) {
          clone = src ? src : {};
          if (Array.isArray(clone) && clone.hasOwnProperty("isComplexArray")) {
            extend(clone, {}, copy, deep);
          } else {
            result["" + key] = extend(clone, {}, copy, deep);
          }
        } else {
          clone = src ? src : [];
          result["" + key] = extend([], clone, copy, clone && clone.length || copy && copy.length);
        }
      } else {
        result["" + key] = copy;
      }
    });
  };
  var arguments_1 = arguments;
  for (var i = 1; i < length; i++) {
    _loop_1(i);
  }
  return result;
}
function isNullOrUndefined(value) {
  return value === void 0 || value === null;
}
function isUndefined(value) {
  return "undefined" === typeof value;
}
function getUniqueID(definedName) {
  return definedName + "_" + uid++;
}
function debounce(eventFunction, delay) {
  var out;
  return function() {
    var _this = this;
    var args = arguments;
    var later = function() {
      out = null;
      return eventFunction.apply(_this, args);
    };
    clearTimeout(out);
    out = setTimeout(later, delay);
  };
}
function compareElementParent(child, parent) {
  var node = child;
  if (node === parent) {
    return true;
  } else if (node === document || !node) {
    return false;
  } else {
    return compareElementParent(node.parentNode, parent);
  }
}
function throwError(message) {
  try {
    throw new Error(message);
  } catch (e) {
    throw e.message + "\n" + e.stack;
  }
}
function formatUnit(value) {
  var result = value + "";
  if (result.match(/auto|cm|mm|in|px|pt|pc|%|em|ex|ch|rem|vw|vh|vmin|vmax/)) {
    return result;
  }
  return result + "px";
}
function isBlazor() {
  return isBlazorPlatform;
}
function getElement(element2) {
  var xPath = "xPath";
  if (!(element2 instanceof Node) && isBlazor() && !isNullOrUndefined(element2["" + xPath])) {
    return document.evaluate(element2["" + xPath], document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
  }
  return element2;
}
function getInstance(element2, component) {
  var elem = typeof element2 === "string" ? document.querySelector(element2) : element2;
  if (elem["" + instances]) {
    for (var _i = 0, _a = elem["" + instances]; _i < _a.length; _i++) {
      var inst = _a[_i];
      if (inst instanceof component) {
        return inst;
      }
    }
  }
  return null;
}
function uniqueID() {
  if (typeof window === "undefined") {
    return;
  }
  var num = new Uint16Array(5);
  var intCrypto = window.msCrypto || window.crypto;
  return intCrypto.getRandomValues(num);
}
function combineArray(num) {
  var ret = "";
  for (var i = 0; i < 5; i++) {
    ret += (i ? "," : "") + num[parseInt(i.toString(), 10)];
  }
  return ret;
}
var defaultNumberingSystem = {
  "latn": {
    "_digits": "0123456789",
    "_type": "numeric"
  }
};
var defaultNumberSymbols = {
  "decimal": ".",
  "group": ",",
  "percentSign": "%",
  "plusSign": "+",
  "minusSign": "-",
  "infinity": "∞",
  "nan": "NaN",
  "exponential": "E"
};
var latnNumberSystem = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];
var ParserBase = (
  /** @class */
  function() {
    function ParserBase2() {
    }
    ParserBase2.getMainObject = function(obj, cName) {
      var value = "main." + cName;
      return getValue(value, obj);
    };
    ParserBase2.getNumberingSystem = function(obj) {
      return getValue("supplemental.numberingSystems", obj) || this.numberingSystems;
    };
    ParserBase2.reverseObject = function(prop, keys2) {
      var propKeys = keys2 || Object.keys(prop);
      var res = {};
      for (var _i = 0, propKeys_1 = propKeys; _i < propKeys_1.length; _i++) {
        var key = propKeys_1[_i];
        if (!res.hasOwnProperty(prop[key])) {
          res[prop[key]] = key;
        }
      }
      return res;
    };
    ParserBase2.getSymbolRegex = function(props2) {
      var regexStr = props2.map(function(str) {
        return str.replace(/([.*+?^=!:${}()|[\]/\\])/g, "\\$1");
      }).join("|");
      var regExp2 = RegExp;
      return new regExp2(regexStr, "g");
    };
    ParserBase2.getSymbolMatch = function(prop) {
      var matchKeys = Object.keys(defaultNumberSymbols);
      var ret = {};
      for (var _i = 0, matchKeys_1 = matchKeys; _i < matchKeys_1.length; _i++) {
        var key = matchKeys_1[_i];
        ret[prop[key]] = defaultNumberSymbols[key];
      }
      return ret;
    };
    ParserBase2.constructRegex = function(val) {
      var len = val.length;
      var ret = "";
      for (var i = 0; i < len; i++) {
        if (i !== len - 1) {
          ret += val[parseInt(i.toString(), 10)] + "|";
        } else {
          ret += val[parseInt(i.toString(), 10)];
        }
      }
      return ret;
    };
    ParserBase2.convertValueParts = function(value, regex2, obj) {
      return value.replace(regex2, function(str) {
        return obj[str];
      });
    };
    ParserBase2.getDefaultNumberingSystem = function(obj) {
      var ret = {};
      ret.obj = getValue("numbers", obj);
      ret.nSystem = getValue("defaultNumberingSystem", ret.obj);
      return ret;
    };
    ParserBase2.getCurrentNumericOptions = function(curObj, numberSystem, needSymbols, blazorMode) {
      var ret = {};
      var cur = this.getDefaultNumberingSystem(curObj);
      if (!isUndefined(cur.nSystem) || blazorMode) {
        var digits = blazorMode ? getValue("obj.mapperDigits", cur) : getValue(cur.nSystem + "._digits", numberSystem);
        if (!isUndefined(digits)) {
          ret.numericPair = this.reverseObject(digits, latnNumberSystem);
          var regExp2 = RegExp;
          ret.numberParseRegex = new regExp2(this.constructRegex(digits), "g");
          ret.numericRegex = "[" + digits[0] + "-" + digits[9] + "]";
          if (needSymbols) {
            ret.numericRegex = digits[0] + "-" + digits[9];
            ret.symbolNumberSystem = getValue(blazorMode ? "numberSymbols" : "symbols-numberSystem-" + cur.nSystem, cur.obj);
            ret.symbolMatch = this.getSymbolMatch(ret.symbolNumberSystem);
            ret.numberSystem = cur.nSystem;
          }
        }
      }
      return ret;
    };
    ParserBase2.getNumberMapper = function(curObj, numberSystem, isNumber2) {
      var ret = { mapper: {} };
      var cur = this.getDefaultNumberingSystem(curObj);
      if (!isUndefined(cur.nSystem)) {
        ret.numberSystem = cur.nSystem;
        ret.numberSymbols = getValue("symbols-numberSystem-" + cur.nSystem, cur.obj);
        ret.timeSeparator = getValue("timeSeparator", ret.numberSymbols);
        var digits = getValue(cur.nSystem + "._digits", numberSystem);
        if (!isUndefined(digits)) {
          for (var _i = 0, latnNumberSystem_1 = latnNumberSystem; _i < latnNumberSystem_1.length; _i++) {
            var i = latnNumberSystem_1[_i];
            ret.mapper[i] = digits[i];
          }
        }
      }
      return ret;
    };
    ParserBase2.nPair = "numericPair";
    ParserBase2.nRegex = "numericRegex";
    ParserBase2.numberingSystems = defaultNumberingSystem;
    return ParserBase2;
  }()
);
var blazorCurrencyData = {
  "DJF": "Fdj",
  "ERN": "Nfk",
  "ETB": "Br",
  "NAD": "$",
  "ZAR": "R",
  "XAF": "FCFA",
  "GHS": "GH₵",
  "XDR": "XDR",
  "AED": "د.إ.‏",
  "BHD": "د.ب.‏",
  "DZD": "د.ج.‏",
  "EGP": "ج.م.‏",
  "ILS": "₪",
  "IQD": "د.ع.‏",
  "JOD": "د.ا.‏",
  "KMF": "CF",
  "KWD": "د.ك.‏",
  "LBP": "ل.ل.‏",
  "LYD": "د.ل.‏",
  "MAD": "د.م.‏",
  "MRU": "أ.م.",
  "OMR": "ر.ع.‏",
  "QAR": "ر.ق.‏",
  "SAR": "ر.س.‏",
  "SDG": "ج.س.",
  "SOS": "S",
  "SSP": "£",
  "SYP": "ل.س.‏",
  "TND": "د.ت.‏",
  "YER": "ر.ي.‏",
  "CLP": "$",
  "INR": "₹",
  "TZS": "TSh",
  "EUR": "€",
  "AZN": "₼",
  "RUB": "₽",
  "BYN": "Br",
  "ZMW": "K",
  "BGN": "лв.",
  "NGN": "₦",
  "XOF": "CFA",
  "BDT": "৳",
  "CNY": "¥",
  "BAM": "КМ",
  "UGX": "USh",
  "USD": "$",
  "CZK": "Kč",
  "GBP": "£",
  "DKK": "kr.",
  "KES": "Ksh",
  "CHF": "CHF",
  "MVR": "ރ.",
  "BTN": "Nu.",
  "XCD": "EC$",
  "AUD": "$",
  "BBD": "$",
  "BIF": "FBu",
  "BMD": "$",
  "BSD": "$",
  "BWP": "P",
  "BZD": "$",
  "CAD": "$",
  "NZD": "$",
  "FJD": "$",
  "FKP": "£",
  "GIP": "£",
  "GMD": "D",
  "GYD": "$",
  "HKD": "$",
  "IDR": "Rp",
  "JMD": "$",
  "KYD": "$",
  "LRD": "$",
  "MGA": "Ar",
  "MOP": "MOP$",
  "MUR": "Rs",
  "MWK": "MK",
  "MYR": "RM",
  "PGK": "K",
  "PHP": "₱",
  "PKR": "Rs",
  "RWF": "RF",
  "SBD": "$",
  "SCR": "SR",
  "SEK": "kr",
  "SGD": "$",
  "SHP": "£",
  "SLL": "Le",
  "ANG": "NAf.",
  "SZL": "E",
  "TOP": "T$",
  "TTD": "$",
  "VUV": "VT",
  "WST": "WS$",
  "ARS": "$",
  "BOB": "Bs",
  "BRL": "R$",
  "COP": "$",
  "CRC": "₡",
  "CUP": "$",
  "DOP": "$",
  "GTQ": "Q",
  "HNL": "L",
  "MXN": "$",
  "NIO": "C$",
  "PAB": "B/.",
  "PEN": "S/",
  "PYG": "₲",
  "UYU": "$",
  "VES": "Bs.S",
  "IRR": "ريال",
  "GNF": "FG",
  "CDF": "FC",
  "HTG": "G",
  "XPF": "FCFP",
  "HRK": "kn",
  "HUF": "Ft",
  "AMD": "֏",
  "ISK": "kr",
  "JPY": "¥",
  "GEL": "₾",
  "CVE": "​",
  "KZT": "₸",
  "KHR": "៛",
  "KPW": "₩",
  "KRW": "₩",
  "KGS": "сом",
  "AOA": "Kz",
  "LAK": "₭",
  "MZN": "MTn",
  "MKD": "ден",
  "MNT": "₮",
  "BND": "$",
  "MMK": "K",
  "NOK": "kr",
  "NPR": "रु",
  "AWG": "Afl.",
  "SRD": "$",
  "PLN": "zł",
  "AFN": "؋",
  "STN": "Db",
  "MDL": "L",
  "RON": "lei",
  "UAH": "₴",
  "LKR": "රු.",
  "ALL": "Lekë",
  "RSD": "дин.",
  "TJS": "смн",
  "THB": "฿",
  "TMT": "m.",
  "TRY": "₺",
  "UZS": "сўм",
  "VND": "₫",
  "TWD": "NT$"
};
function getBlazorCurrencySymbol(currencyCode) {
  return getValue(currencyCode || "", blazorCurrencyData);
}
var HijriParser;
(function(HijriParser2) {
  var dateCorrection = [
    28607,
    28636,
    28665,
    28695,
    28724,
    28754,
    28783,
    28813,
    28843,
    28872,
    28901,
    28931,
    28960,
    28990,
    29019,
    29049,
    29078,
    29108,
    29137,
    29167,
    29196,
    29226,
    29255,
    29285,
    29315,
    29345,
    29375,
    29404,
    29434,
    29463,
    29492,
    29522,
    29551,
    29580,
    29610,
    29640,
    29669,
    29699,
    29729,
    29759,
    29788,
    29818,
    29847,
    29876,
    29906,
    29935,
    29964,
    29994,
    30023,
    30053,
    30082,
    30112,
    30141,
    30171,
    30200,
    30230,
    30259,
    30289,
    30318,
    30348,
    30378,
    30408,
    30437,
    30467,
    30496,
    30526,
    30555,
    30585,
    30614,
    30644,
    30673,
    30703,
    30732,
    30762,
    30791,
    30821,
    30850,
    30880,
    30909,
    30939,
    30968,
    30998,
    31027,
    31057,
    31086,
    31116,
    31145,
    31175,
    31204,
    31234,
    31263,
    31293,
    31322,
    31352,
    31381,
    31411,
    31441,
    31471,
    31500,
    31530,
    31559,
    31589,
    31618,
    31648,
    31676,
    31706,
    31736,
    31766,
    31795,
    31825,
    31854,
    31884,
    31913,
    31943,
    31972,
    32002,
    32031,
    32061,
    32090,
    32120,
    32150,
    32180,
    32209,
    32239,
    32268,
    32298,
    32327,
    32357,
    32386,
    32416,
    32445,
    32475,
    32504,
    32534,
    32563,
    32593,
    32622,
    32652,
    32681,
    32711,
    32740,
    32770,
    32799,
    32829,
    32858,
    32888,
    32917,
    32947,
    32976,
    33006,
    33035,
    33065,
    33094,
    33124,
    33153,
    33183,
    33213,
    33243,
    33272,
    33302,
    33331,
    33361,
    33390,
    33420,
    33450,
    33479,
    33509,
    33539,
    33568,
    33598,
    33627,
    33657,
    33686,
    33716,
    33745,
    33775,
    33804,
    33834,
    33863,
    33893,
    33922,
    33952,
    33981,
    34011,
    34040,
    34069,
    34099,
    34128,
    34158,
    34187,
    34217,
    34247,
    34277,
    34306,
    34336,
    34365,
    34395,
    34424,
    34454,
    34483,
    34512,
    34542,
    34571,
    34601,
    34631,
    34660,
    34690,
    34719,
    34749,
    34778,
    34808,
    34837,
    34867,
    34896,
    34926,
    34955,
    34985,
    35015,
    35044,
    35074,
    35103,
    35133,
    35162,
    35192,
    35222,
    35251,
    35280,
    35310,
    35340,
    35370,
    35399,
    35429,
    35458,
    35488,
    35517,
    35547,
    35576,
    35605,
    35635,
    35665,
    35694,
    35723,
    35753,
    35782,
    35811,
    35841,
    35871,
    35901,
    35930,
    35960,
    35989,
    36019,
    36048,
    36078,
    36107,
    36136,
    36166,
    36195,
    36225,
    36254,
    36284,
    36314,
    36343,
    36373,
    36403,
    36433,
    36462,
    36492,
    36521,
    36551,
    36580,
    36610,
    36639,
    36669,
    36698,
    36728,
    36757,
    36786,
    36816,
    36845,
    36875,
    36904,
    36934,
    36963,
    36993,
    37022,
    37052,
    37081,
    37111,
    37141,
    37170,
    37200,
    37229,
    37259,
    37288,
    37318,
    37347,
    37377,
    37406,
    37436,
    37465,
    37495,
    37524,
    37554,
    37584,
    37613,
    37643,
    37672,
    37701,
    37731,
    37760,
    37790,
    37819,
    37849,
    37878,
    37908,
    37938,
    37967,
    37997,
    38027,
    38056,
    38085,
    38115,
    38144,
    38174,
    38203,
    38233,
    38262,
    38292,
    38322,
    38351,
    38381,
    38410,
    38440,
    38469,
    38499,
    38528,
    38558,
    38587,
    38617,
    38646,
    38676,
    38705,
    38735,
    38764,
    38794,
    38823,
    38853,
    38882,
    38912,
    38941,
    38971,
    39001,
    39030,
    39059,
    39089,
    39118,
    39148,
    39178,
    39208,
    39237,
    39267,
    39297,
    39326,
    39355,
    39385,
    39414,
    39444,
    39473,
    39503,
    39532,
    39562,
    39592,
    39621,
    39650,
    39680,
    39709,
    39739,
    39768,
    39798,
    39827,
    39857,
    39886,
    39916,
    39946,
    39975,
    40005,
    40035,
    40064,
    40094,
    40123,
    40153,
    40182,
    40212,
    40241,
    40271,
    40300,
    40330,
    40359,
    40389,
    40418,
    40448,
    40477,
    40507,
    40536,
    40566,
    40595,
    40625,
    40655,
    40685,
    40714,
    40744,
    40773,
    40803,
    40832,
    40862,
    40892,
    40921,
    40951,
    40980,
    41009,
    41039,
    41068,
    41098,
    41127,
    41157,
    41186,
    41216,
    41245,
    41275,
    41304,
    41334,
    41364,
    41393,
    41422,
    41452,
    41481,
    41511,
    41540,
    41570,
    41599,
    41629,
    41658,
    41688,
    41718,
    41748,
    41777,
    41807,
    41836,
    41865,
    41894,
    41924,
    41953,
    41983,
    42012,
    42042,
    42072,
    42102,
    42131,
    42161,
    42190,
    42220,
    42249,
    42279,
    42308,
    42337,
    42367,
    42397,
    42426,
    42456,
    42485,
    42515,
    42545,
    42574,
    42604,
    42633,
    42662,
    42692,
    42721,
    42751,
    42780,
    42810,
    42839,
    42869,
    42899,
    42929,
    42958,
    42988,
    43017,
    43046,
    43076,
    43105,
    43135,
    43164,
    43194,
    43223,
    43253,
    43283,
    43312,
    43342,
    43371,
    43401,
    43430,
    43460,
    43489,
    43519,
    43548,
    43578,
    43607,
    43637,
    43666,
    43696,
    43726,
    43755,
    43785,
    43814,
    43844,
    43873,
    43903,
    43932,
    43962,
    43991,
    44021,
    44050,
    44080,
    44109,
    44139,
    44169,
    44198,
    44228,
    44258,
    44287,
    44317,
    44346,
    44375,
    44405,
    44434,
    44464,
    44493,
    44523,
    44553,
    44582,
    44612,
    44641,
    44671,
    44700,
    44730,
    44759,
    44788,
    44818,
    44847,
    44877,
    44906,
    44936,
    44966,
    44996,
    45025,
    45055,
    45084,
    45114,
    45143,
    45172,
    45202,
    45231,
    45261,
    45290,
    45320,
    45350,
    45380,
    45409,
    45439,
    45468,
    45498,
    45527,
    45556,
    45586,
    45615,
    45644,
    45674,
    45704,
    45733,
    45763,
    45793,
    45823,
    45852,
    45882,
    45911,
    45940,
    45970,
    45999,
    46028,
    46058,
    46088,
    46117,
    46147,
    46177,
    46206,
    46236,
    46265,
    46295,
    46324,
    46354,
    46383,
    46413,
    46442,
    46472,
    46501,
    46531,
    46560,
    46590,
    46620,
    46649,
    46679,
    46708,
    46738,
    46767,
    46797,
    46826,
    46856,
    46885,
    46915,
    46944,
    46974,
    47003,
    47033,
    47063,
    47092,
    47122,
    47151,
    47181,
    47210,
    47240,
    47269,
    47298,
    47328,
    47357,
    47387,
    47417,
    47446,
    47476,
    47506,
    47535,
    47565,
    47594,
    47624,
    47653,
    47682,
    47712,
    47741,
    47771,
    47800,
    47830,
    47860,
    47890,
    47919,
    47949,
    47978,
    48008,
    48037,
    48066,
    48096,
    48125,
    48155,
    48184,
    48214,
    48244,
    48273,
    48303,
    48333,
    48362,
    48392,
    48421,
    48450,
    48480,
    48509,
    48538,
    48568,
    48598,
    48627,
    48657,
    48687,
    48717,
    48746,
    48776,
    48805,
    48834,
    48864,
    48893,
    48922,
    48952,
    48982,
    49011,
    49041,
    49071,
    49100,
    49130,
    49160,
    49189,
    49218,
    49248,
    49277,
    49306,
    49336,
    49365,
    49395,
    49425,
    49455,
    49484,
    49514,
    49543,
    49573,
    49602,
    49632,
    49661,
    49690,
    49720,
    49749,
    49779,
    49809,
    49838,
    49868,
    49898,
    49927,
    49957,
    49986,
    50016,
    50045,
    50075,
    50104,
    50133,
    50163,
    50192,
    50222,
    50252,
    50281,
    50311,
    50340,
    50370,
    50400,
    50429,
    50459,
    50488,
    50518,
    50547,
    50576,
    50606,
    50635,
    50665,
    50694,
    50724,
    50754,
    50784,
    50813,
    50843,
    50872,
    50902,
    50931,
    50960,
    50990,
    51019,
    51049,
    51078,
    51108,
    51138,
    51167,
    51197,
    51227,
    51256,
    51286,
    51315,
    51345,
    51374,
    51403,
    51433,
    51462,
    51492,
    51522,
    51552,
    51582,
    51611,
    51641,
    51670,
    51699,
    51729,
    51758,
    51787,
    51816,
    51846,
    51876,
    51906,
    51936,
    51965,
    51995,
    52025,
    52054,
    52083,
    52113,
    52142,
    52171,
    52200,
    52230,
    52260,
    52290,
    52319,
    52349,
    52379,
    52408,
    52438,
    52467,
    52497,
    52526,
    52555,
    52585,
    52614,
    52644,
    52673,
    52703,
    52733,
    52762,
    52792,
    52822,
    52851,
    52881,
    52910,
    52939,
    52969,
    52998,
    53028,
    53057,
    53087,
    53116,
    53146,
    53176,
    53205,
    53235,
    53264,
    53294,
    53324,
    53353,
    53383,
    53412,
    53441,
    53471,
    53500,
    53530,
    53559,
    53589,
    53619,
    53648,
    53678,
    53708,
    53737,
    53767,
    53796,
    53825,
    53855,
    53884,
    53913,
    53943,
    53973,
    54003,
    54032,
    54062,
    54092,
    54121,
    54151,
    54180,
    54209,
    54239,
    54268,
    54297,
    54327,
    54357,
    54387,
    54416,
    54446,
    54476,
    54505,
    54535,
    54564,
    54593,
    54623,
    54652,
    54681,
    54711,
    54741,
    54770,
    54800,
    54830,
    54859,
    54889,
    54919,
    54948,
    54977,
    55007,
    55036,
    55066,
    55095,
    55125,
    55154,
    55184,
    55213,
    55243,
    55273,
    55302,
    55332,
    55361,
    55391,
    55420,
    55450,
    55479,
    55508,
    55538,
    55567,
    55597,
    55627,
    55657,
    55686,
    55716,
    55745,
    55775,
    55804,
    55834,
    55863,
    55892,
    55922,
    55951,
    55981,
    56011,
    56040,
    56070,
    56100,
    56129,
    56159,
    56188,
    56218,
    56247,
    56276,
    56306,
    56335,
    56365,
    56394,
    56424,
    56454,
    56483,
    56513,
    56543,
    56572,
    56601,
    56631,
    56660,
    56690,
    56719,
    56749,
    56778,
    56808,
    56837,
    56867,
    56897,
    56926,
    56956,
    56985,
    57015,
    57044,
    57074,
    57103,
    57133,
    57162,
    57192,
    57221,
    57251,
    57280,
    57310,
    57340,
    57369,
    57399,
    57429,
    57458,
    57487,
    57517,
    57546,
    57576,
    57605,
    57634,
    57664,
    57694,
    57723,
    57753,
    57783,
    57813,
    57842,
    57871,
    57901,
    57930,
    57959,
    57989,
    58018,
    58048,
    58077,
    58107,
    58137,
    58167,
    58196,
    58226,
    58255,
    58285,
    58314,
    58343,
    58373,
    58402,
    58432,
    58461,
    58491,
    58521,
    58551,
    58580,
    58610,
    58639,
    58669,
    58698,
    58727,
    58757,
    58786,
    58816,
    58845,
    58875,
    58905,
    58934,
    58964,
    58994,
    59023,
    59053,
    59082,
    59111,
    59141,
    59170,
    59200,
    59229,
    59259,
    59288,
    59318,
    59348,
    59377,
    59407,
    59436,
    59466,
    59495,
    59525,
    59554,
    59584,
    59613,
    59643,
    59672,
    59702,
    59731,
    59761,
    59791,
    59820,
    59850,
    59879,
    59909,
    59939,
    59968,
    59997,
    60027,
    60056,
    60086,
    60115,
    60145,
    60174,
    60204,
    60234,
    60264,
    60293,
    60323,
    60352,
    60381,
    60411,
    60440,
    60469,
    60499,
    60528,
    60558,
    60588,
    60618,
    60648,
    60677,
    60707,
    60736,
    60765,
    60795,
    60824,
    60853,
    60883,
    60912,
    60942,
    60972,
    61002,
    61031,
    61061,
    61090,
    61120,
    61149,
    61179,
    61208,
    61237,
    61267,
    61296,
    61326,
    61356,
    61385,
    61415,
    61445,
    61474,
    61504,
    61533,
    61563,
    61592,
    61621,
    61651,
    61680,
    61710,
    61739,
    61769,
    61799,
    61828,
    61858,
    61888,
    61917,
    61947,
    61976,
    62006,
    62035,
    62064,
    62094,
    62123,
    62153,
    62182,
    62212,
    62242,
    62271,
    62301,
    62331,
    62360,
    62390,
    62419,
    62448,
    62478,
    62507,
    62537,
    62566,
    62596,
    62625,
    62655,
    62685,
    62715,
    62744,
    62774,
    62803,
    62832,
    62862,
    62891,
    62921,
    62950,
    62980,
    63009,
    63039,
    63069,
    63099,
    63128,
    63157,
    63187,
    63216,
    63246,
    63275,
    63305,
    63334,
    63363,
    63393,
    63423,
    63453,
    63482,
    63512,
    63541,
    63571,
    63600,
    63630,
    63659,
    63689,
    63718,
    63747,
    63777,
    63807,
    63836,
    63866,
    63895,
    63925,
    63955,
    63984,
    64014,
    64043,
    64073,
    64102,
    64131,
    64161,
    64190,
    64220,
    64249,
    64279,
    64309,
    64339,
    64368,
    64398,
    64427,
    64457,
    64486,
    64515,
    64545,
    64574,
    64603,
    64633,
    64663,
    64692,
    64722,
    64752,
    64782,
    64811,
    64841,
    64870,
    64899,
    64929,
    64958,
    64987,
    65017,
    65047,
    65076,
    65106,
    65136,
    65166,
    65195,
    65225,
    65254,
    65283,
    65313,
    65342,
    65371,
    65401,
    65431,
    65460,
    65490,
    65520,
    65549,
    65579,
    65608,
    65638,
    65667,
    65697,
    65726,
    65755,
    65785,
    65815,
    65844,
    65874,
    65903,
    65933,
    65963,
    65992,
    66022,
    66051,
    66081,
    66110,
    66140,
    66169,
    66199,
    66228,
    66258,
    66287,
    66317,
    66346,
    66376,
    66405,
    66435,
    66465,
    66494,
    66524,
    66553,
    66583,
    66612,
    66641,
    66671,
    66700,
    66730,
    66760,
    66789,
    66819,
    66849,
    66878,
    66908,
    66937,
    66967,
    66996,
    67025,
    67055,
    67084,
    67114,
    67143,
    67173,
    67203,
    67233,
    67262,
    67292,
    67321,
    67351,
    67380,
    67409,
    67439,
    67468,
    67497,
    67527,
    67557,
    67587,
    67617,
    67646,
    67676,
    67705,
    67735,
    67764,
    67793,
    67823,
    67852,
    67882,
    67911,
    67941,
    67971,
    68e3,
    68030,
    68060,
    68089,
    68119,
    68148,
    68177,
    68207,
    68236,
    68266,
    68295,
    68325,
    68354,
    68384,
    68414,
    68443,
    68473,
    68502,
    68532,
    68561,
    68591,
    68620,
    68650,
    68679,
    68708,
    68738,
    68768,
    68797,
    68827,
    68857,
    68886,
    68916,
    68946,
    68975,
    69004,
    69034,
    69063,
    69092,
    69122,
    69152,
    69181,
    69211,
    69240,
    69270,
    69300,
    69330,
    69359,
    69388,
    69418,
    69447,
    69476,
    69506,
    69535,
    69565,
    69595,
    69624,
    69654,
    69684,
    69713,
    69743,
    69772,
    69802,
    69831,
    69861,
    69890,
    69919,
    69949,
    69978,
    70008,
    70038,
    70067,
    70097,
    70126,
    70156,
    70186,
    70215,
    70245,
    70274,
    70303,
    70333,
    70362,
    70392,
    70421,
    70451,
    70481,
    70510,
    70540,
    70570,
    70599,
    70629,
    70658,
    70687,
    70717,
    70746,
    70776,
    70805,
    70835,
    70864,
    70894,
    70924,
    70954,
    70983,
    71013,
    71042,
    71071,
    71101,
    71130,
    71159,
    71189,
    71218,
    71248,
    71278,
    71308,
    71337,
    71367,
    71397,
    71426,
    71455,
    71485,
    71514,
    71543,
    71573,
    71602,
    71632,
    71662,
    71691,
    71721,
    71751,
    71781,
    71810,
    71839,
    71869,
    71898,
    71927,
    71957,
    71986,
    72016,
    72046,
    72075,
    72105,
    72135,
    72164,
    72194,
    72223,
    72253,
    72282,
    72311,
    72341,
    72370,
    72400,
    72429,
    72459,
    72489,
    72518,
    72548,
    72577,
    72607,
    72637,
    72666,
    72695,
    72725,
    72754,
    72784,
    72813,
    72843,
    72872,
    72902,
    72931,
    72961,
    72991,
    73020,
    73050,
    73080,
    73109,
    73139,
    73168,
    73197,
    73227,
    73256,
    73286,
    73315,
    73345,
    73375,
    73404,
    73434,
    73464,
    73493,
    73523,
    73552,
    73581,
    73611,
    73640,
    73669,
    73699,
    73729,
    73758,
    73788,
    73818,
    73848,
    73877,
    73907,
    73936,
    73965,
    73995,
    74024,
    74053,
    74083,
    74113,
    74142,
    74172,
    74202,
    74231,
    74261,
    74291,
    74320,
    74349,
    74379,
    74408,
    74437,
    74467,
    74497,
    74526,
    74556,
    74586,
    74615,
    74645,
    74675,
    74704,
    74733,
    74763,
    74792,
    74822,
    74851,
    74881,
    74910,
    74940,
    74969,
    74999,
    75029,
    75058,
    75088,
    75117,
    75147,
    75176,
    75206,
    75235,
    75264,
    75294,
    75323,
    75353,
    75383,
    75412,
    75442,
    75472,
    75501,
    75531,
    75560,
    75590,
    75619,
    75648,
    75678,
    75707,
    75737,
    75766,
    75796,
    75826,
    75856,
    75885,
    75915,
    75944,
    75974,
    76003,
    76032,
    76062,
    76091,
    76121,
    76150,
    76180,
    76210,
    76239,
    76269,
    76299,
    76328,
    76358,
    76387,
    76416,
    76446,
    76475,
    76505,
    76534,
    76564,
    76593,
    76623,
    76653,
    76682,
    76712,
    76741,
    76771,
    76801,
    76830,
    76859,
    76889,
    76918,
    76948,
    76977,
    77007,
    77036,
    77066,
    77096,
    77125,
    77155,
    77185,
    77214,
    77243,
    77273,
    77302,
    77332,
    77361,
    77390,
    77420,
    77450,
    77479,
    77509,
    77539,
    77569,
    77598,
    77627,
    77657,
    77686,
    77715,
    77745,
    77774,
    77804,
    77833,
    77863,
    77893,
    77923,
    77952,
    77982,
    78011,
    78041,
    78070,
    78099,
    78129,
    78158,
    78188,
    78217,
    78247,
    78277,
    78307,
    78336,
    78366,
    78395,
    78425,
    78454,
    78483,
    78513,
    78542,
    78572,
    78601,
    78631,
    78661,
    78690,
    78720,
    78750,
    78779,
    78808,
    78838,
    78867,
    78897,
    78926,
    78956,
    78985,
    79015,
    79044,
    79074,
    79104,
    79133,
    79163,
    79192,
    79222,
    79251,
    79281,
    79310,
    79340,
    79369,
    79399,
    79428,
    79458,
    79487,
    79517,
    79546,
    79576,
    79606,
    79635,
    79665,
    79695,
    79724,
    79753,
    79783,
    79812,
    79841,
    79871,
    79900,
    79930,
    79960,
    79990
  ];
  function getHijriDate(gDate) {
    var day = gDate.getDate();
    var month2 = gDate.getMonth();
    var year = gDate.getFullYear();
    var tMonth = month2 + 1;
    var tYear = year;
    if (tMonth < 3) {
      tYear -= 1;
      tMonth += 12;
    }
    var yPrefix = Math.floor(tYear / 100);
    var julilanOffset = yPrefix - Math.floor(yPrefix / 4) - 2;
    var julianNumber = Math.floor(365.25 * (tYear + 4716)) + Math.floor(30.6001 * (tMonth + 1)) + day - julilanOffset - 1524;
    yPrefix = Math.floor((julianNumber - 186721625e-2) / 36524.25);
    julilanOffset = yPrefix - Math.floor(yPrefix / 4) + 1;
    var b = julianNumber + julilanOffset + 1524;
    var c = Math.floor((b - 122.1) / 365.25);
    var d = Math.floor(365.25 * c);
    var tempMonth = Math.floor((b - d) / 30.6001);
    day = b - d - Math.floor(30.6001 * tempMonth);
    month2 = Math.floor((b - d) / 20.6001);
    if (month2 > 13) {
      c += 1;
      month2 -= 12;
    }
    month2 -= 1;
    year = c - 4716;
    var modifiedJulianDate = julianNumber - 24e5;
    var iyear = 10631 / 30;
    var z = julianNumber - 1948084;
    var cyc = Math.floor(z / 10631);
    z = z - 10631 * cyc;
    var j = Math.floor((z - 0.1335) / iyear);
    var iy = 30 * cyc + j;
    z = z - Math.floor(j * iyear + 0.1335);
    var im = Math.floor((z + 28.5001) / 29.5);
    if (im === 13) {
      im = 12;
    }
    var tempDay = z - Math.floor(29.5001 * im - 29);
    var i = 0;
    for (; i < dateCorrection.length; i++) {
      if (dateCorrection[parseInt(i.toString(), 10)] > modifiedJulianDate) {
        break;
      }
    }
    var iln = i + 16260;
    var ii = Math.floor((iln - 1) / 12);
    var hYear = ii + 1;
    var hmonth = iln - 12 * ii;
    var hDate = modifiedJulianDate - dateCorrection[i - 1] + 1;
    if ((hDate + "").length > 2) {
      hDate = tempDay;
      hmonth = im;
      hYear = iy;
    }
    return { year: hYear, month: hmonth, date: hDate };
  }
  HijriParser2.getHijriDate = getHijriDate;
  function toGregorian(year, month2, day) {
    var iy = year;
    var im = month2;
    var id = day;
    var ii = iy - 1;
    var iln = ii * 12 + 1 + (im - 1);
    var i = iln - 16260;
    var mcjdn = id + dateCorrection[i - 1] - 1;
    var julianDate = mcjdn + 24e5;
    var z = Math.floor(julianDate + 0.5);
    var a = Math.floor((z - 186721625e-2) / 36524.25);
    a = z + 1 + a - Math.floor(a / 4);
    var b = a + 1524;
    var c = Math.floor((b - 122.1) / 365.25);
    var d = Math.floor(365.25 * c);
    var e = Math.floor((b - d) / 30.6001);
    var gDay = b - d - Math.floor(e * 30.6001);
    var gMonth = e - (e > 13.5 ? 13 : 1);
    var gYear = c - (gMonth > 2.5 ? 4716 : 4715);
    if (gYear <= 0) {
      gMonth--;
    }
    return /* @__PURE__ */ new Date(gYear + "/" + gMonth + "/" + gDay);
  }
  HijriParser2.toGregorian = toGregorian;
})(HijriParser || (HijriParser = {}));
var abbreviateRegexGlobal = /\/MMMMM|MMMM|MMM|a|LLLL|LLL|EEEEE|EEEE|E|K|cccc|ccc|WW|W|G+|z+/gi;
var standalone$1 = "stand-alone";
var weekdayKey = ["sun", "mon", "tue", "wed", "thu", "fri", "sat"];
var timeSetter$1 = {
  m: "getMinutes",
  h: "getHours",
  H: "getHours",
  s: "getSeconds",
  d: "getDate",
  f: "getMilliseconds"
};
var datePartMatcher = {
  "M": "month",
  "d": "day",
  "E": "weekday",
  "c": "weekday",
  "y": "year",
  "m": "minute",
  "h": "hour",
  "H": "hour",
  "s": "second",
  "L": "month",
  "a": "designator",
  "z": "timeZone",
  "Z": "timeZone",
  "G": "era",
  "f": "milliseconds"
};
var timeSeparator = "timeSeparator";
var DateFormat = (
  /** @class */
  function() {
    function DateFormat2() {
    }
    DateFormat2.dateFormat = function(culture, option, cldr) {
      var _this = this;
      var dependable = IntlBase.getDependables(cldr, culture, option.calendar);
      getValue("parserObject.numbers", dependable);
      var dateObject = dependable.dateObject;
      var formatOptions = { isIslamic: IntlBase.islamicRegex.test(option.calendar) };
      var resPattern = option.format || IntlBase.getResultantPattern(option.skeleton, dependable.dateObject, option.type, false, "");
      formatOptions.dateSeperator = IntlBase.getDateSeparator(dependable.dateObject);
      if (isUndefined(resPattern)) {
        throwError("Format options or type given must be invalid");
      } else {
        resPattern = IntlBase.ConvertDateToWeekFormat(resPattern);
        formatOptions.pattern = resPattern;
        formatOptions.numMapper = ParserBase.getNumberMapper(dependable.parserObject, ParserBase.getNumberingSystem(cldr));
        var patternMatch = resPattern.match(abbreviateRegexGlobal) || [];
        for (var _i = 0, patternMatch_1 = patternMatch; _i < patternMatch_1.length; _i++) {
          var str = patternMatch_1[_i];
          var len = str.length;
          var char = str[0];
          if (char === "K") {
            char = "h";
          }
          switch (char) {
            case "E":
            case "c":
              {
                formatOptions.weekday = dependable.dateObject[IntlBase.days][standalone$1][IntlBase.monthIndex[len]];
              }
              break;
            case "M":
            case "L":
              {
                formatOptions.month = dependable.dateObject[IntlBase.month][standalone$1][IntlBase.monthIndex[len]];
              }
              break;
            case "a":
              formatOptions.designator = getValue("dayPeriods.format.wide", dateObject);
              break;
            case "G":
              var eText = len <= 3 ? "eraAbbr" : len === 4 ? "eraNames" : "eraNarrow";
              formatOptions.era = getValue("eras." + eText, dependable.dateObject);
              break;
            case "z":
              formatOptions.timeZone = getValue("dates.timeZoneNames", dependable.parserObject);
              break;
          }
        }
      }
      return function(value) {
        if (isNaN(value.getDate())) {
          return null;
        }
        return _this.intDateFormatter(value, formatOptions);
      };
    };
    DateFormat2.intDateFormatter = function(value, options) {
      var pattern = options.pattern;
      var ret = "";
      var matches2 = pattern.match(IntlBase.dateParseRegex);
      var dObject = this.getCurrentDateValue(value, options.isIslamic);
      for (var _i = 0, matches_1 = matches2; _i < matches_1.length; _i++) {
        var match = matches_1[_i];
        var length_1 = match.length;
        var char = match[0];
        if (char === "K") {
          char = "h";
        }
        var curval = void 0;
        var curvalstr = "";
        var isNumber2 = void 0;
        var processNumber = void 0;
        var curstr = "";
        switch (char) {
          case "M":
          case "L":
            curval = dObject.month;
            if (length_1 > 2) {
              ret += options.month[curval];
            } else {
              isNumber2 = true;
            }
            break;
          case "E":
          case "c":
            ret += options.weekday[weekdayKey[value.getDay()]];
            break;
          case "H":
          case "h":
          case "m":
          case "s":
          case "d":
          case "f":
            isNumber2 = true;
            if (char === "d") {
              curval = dObject.date;
            } else if (char === "f") {
              isNumber2 = false;
              processNumber = true;
              curvalstr = value[timeSetter$1[char]]().toString();
              curvalstr = curvalstr.substring(0, length_1);
              var curlength = curvalstr.length;
              if (length_1 !== curlength) {
                if (length_1 > 3) {
                  continue;
                }
                for (var i = 0; i < length_1 - curlength; i++) {
                  curvalstr = "0" + curvalstr.toString();
                }
              }
              curstr += curvalstr;
            } else {
              curval = value[timeSetter$1[char]]();
            }
            if (char === "h") {
              curval = curval % 12 || 12;
            }
            break;
          case "y":
            processNumber = true;
            curstr += dObject.year;
            if (length_1 === 2) {
              curstr = curstr.substr(curstr.length - 2);
            }
            break;
          case "a":
            var desig = value.getHours() < 12 ? "am" : "pm";
            ret += options.designator[desig];
            break;
          case "G":
            var dec = value.getFullYear() < 0 ? 0 : 1;
            var retu = options.era[dec];
            if (isNullOrUndefined(retu)) {
              retu = options.era[dec ? 0 : 1];
            }
            ret += retu || "";
            break;
          case "'":
            ret += match === "''" ? "'" : match.replace(/'/g, "");
            break;
          case "z":
            var timezone = value.getTimezoneOffset();
            var pattern_1 = length_1 < 4 ? "+H;-H" : options.timeZone.hourFormat;
            pattern_1 = pattern_1.replace(/:/g, options.numMapper.timeSeparator);
            if (timezone === 0) {
              ret += options.timeZone.gmtZeroFormat;
            } else {
              processNumber = true;
              curstr = this.getTimeZoneValue(timezone, pattern_1);
            }
            curstr = options.timeZone.gmtFormat.replace(/\{0\}/, curstr);
            break;
          case ":":
            ret += options.numMapper.numberSymbols[timeSeparator];
            break;
          case "/":
            ret += options.dateSeperator;
            break;
          case "W":
            isNumber2 = true;
            curval = IntlBase.getWeekOfYear(value);
            break;
          default:
            ret += match;
        }
        if (isNumber2) {
          processNumber = true;
          curstr = this.checkTwodigitNumber(curval, length_1);
        }
        if (processNumber) {
          ret += ParserBase.convertValueParts(curstr, IntlBase.latnParseRegex, options.numMapper.mapper);
        }
      }
      return ret;
    };
    DateFormat2.getCurrentDateValue = function(value, isIslamic) {
      if (isIslamic) {
        return HijriParser.getHijriDate(value);
      }
      return { year: value.getFullYear(), month: value.getMonth() + 1, date: value.getDate() };
    };
    DateFormat2.checkTwodigitNumber = function(val, len) {
      var ret = val + "";
      if (len === 2 && ret.length !== 2) {
        return "0" + ret;
      }
      return ret;
    };
    DateFormat2.getTimeZoneValue = function(tVal, pattern) {
      var _this = this;
      var splt = pattern.split(";");
      var curPattern = splt[tVal > 0 ? 1 : 0];
      var no = Math.abs(tVal);
      return curPattern = curPattern.replace(/HH?|mm/g, function(str) {
        var len = str.length;
        var ishour = str.indexOf("H") !== -1;
        return _this.checkTwodigitNumber(Math.floor(ishour ? no / 60 : no % 60), len);
      });
    };
    return DateFormat2;
  }()
);
var errorText = {
  "ms": "minimumSignificantDigits",
  "ls": "maximumSignificantDigits",
  "mf": "minimumFractionDigits",
  "lf": "maximumFractionDigits"
};
var percentSign = "percentSign";
var minusSign = "minusSign";
var mapper$1 = ["infinity", "nan", "group", "decimal", "exponential"];
var NumberFormat = (
  /** @class */
  function() {
    function NumberFormat2() {
    }
    NumberFormat2.numberFormatter = function(culture, option, cldr) {
      var _this = this;
      var fOptions = extend({}, option);
      var cOptions = {};
      var dOptions = {};
      var symbolPattern;
      var dependable = IntlBase.getDependables(cldr, culture, "", true);
      dependable.numericObject;
      dOptions.numberMapper = ParserBase.getNumberMapper(dependable.parserObject, ParserBase.getNumberingSystem(cldr), true);
      dOptions.currencySymbol = IntlBase.getCurrencySymbol(dependable.numericObject, fOptions.currency || defaultCurrencyCode, option.altSymbol);
      dOptions.percentSymbol = dOptions.numberMapper.numberSymbols["" + percentSign];
      dOptions.minusSymbol = dOptions.numberMapper.numberSymbols["" + minusSign];
      var symbols = dOptions.numberMapper.numberSymbols;
      if (option.format && !IntlBase.formatRegex.test(option.format)) {
        cOptions = IntlBase.customFormat(option.format, dOptions, dependable.numericObject);
      } else {
        extend(fOptions, IntlBase.getProperNumericSkeleton(option.format || "N"));
        fOptions.isCurrency = fOptions.type === "currency";
        fOptions.isPercent = fOptions.type === "percent";
        {
          symbolPattern = IntlBase.getSymbolPattern(fOptions.type, dOptions.numberMapper.numberSystem, dependable.numericObject, fOptions.isAccount);
        }
        fOptions.groupOne = this.checkValueRange(fOptions.maximumSignificantDigits, fOptions.minimumSignificantDigits, true);
        this.checkValueRange(fOptions.maximumFractionDigits, fOptions.minimumFractionDigits, false, true);
        if (!isUndefined(fOptions.fractionDigits)) {
          fOptions.minimumFractionDigits = fOptions.maximumFractionDigits = fOptions.fractionDigits;
        }
        if (isUndefined(fOptions.useGrouping)) {
          fOptions.useGrouping = true;
        }
        if (fOptions.isCurrency && !isBlazor()) {
          symbolPattern = symbolPattern.replace(/\u00A4/g, IntlBase.defaultCurrency);
        }
        {
          var split = symbolPattern.split(";");
          cOptions.nData = IntlBase.getFormatData(split[1] || "-" + split[0], true, dOptions.currencySymbol);
          cOptions.pData = IntlBase.getFormatData(split[0], false, dOptions.currencySymbol);
          if (fOptions.useGrouping) {
            fOptions.groupSeparator = symbols[mapper$1[2]];
            fOptions.groupData = this.getGroupingDetails(split[0]);
          }
        }
        var minFrac = isUndefined(fOptions.minimumFractionDigits);
        if (minFrac) {
          fOptions.minimumFractionDigits = cOptions.nData.minimumFraction;
        }
        if (isUndefined(fOptions.maximumFractionDigits)) {
          var mval = cOptions.nData.maximumFraction;
          fOptions.maximumFractionDigits = isUndefined(mval) && fOptions.isPercent ? 0 : mval;
        }
        var mfrac = fOptions.minimumFractionDigits;
        var lfrac = fOptions.maximumFractionDigits;
        if (!isUndefined(mfrac) && !isUndefined(lfrac)) {
          if (mfrac > lfrac) {
            fOptions.maximumFractionDigits = mfrac;
          }
        }
      }
      extend(cOptions.nData, fOptions);
      extend(cOptions.pData, fOptions);
      return function(value) {
        if (isNaN(value)) {
          return symbols[mapper$1[1]];
        } else if (!isFinite(value)) {
          return symbols[mapper$1[0]];
        }
        return _this.intNumberFormatter(value, cOptions, dOptions);
      };
    };
    NumberFormat2.getGroupingDetails = function(pattern) {
      var ret = {};
      var match = pattern.match(IntlBase.negativeDataRegex);
      if (match && match[4]) {
        var pattern_1 = match[4];
        var p2 = pattern_1.lastIndexOf(",");
        if (p2 !== -1) {
          var temp = pattern_1.split(".")[0];
          ret.primary = temp.length - p2 - 1;
          var s = pattern_1.lastIndexOf(",", p2 - 1);
          if (s !== -1) {
            ret.secondary = p2 - 1 - s;
          }
        }
      }
      return ret;
    };
    NumberFormat2.checkValueRange = function(val1, val2, checkbothExist, isFraction) {
      var decide = isFraction ? "f" : "s";
      var dint = 0;
      var str1 = errorText["l" + decide];
      var str2 = errorText["m" + decide];
      if (!isUndefined(val1)) {
        this.checkRange(val1, str1, isFraction);
        dint++;
      }
      if (!isUndefined(val2)) {
        this.checkRange(val2, str2, isFraction);
        dint++;
      }
      if (dint === 2) {
        if (val1 < val2) {
          throwError(str2 + "specified must be less than the" + str1);
        } else {
          return true;
        }
      } else if (checkbothExist && dint === 1) {
        throwError("Both" + str2 + "and" + str2 + "must be present");
      }
      return false;
    };
    NumberFormat2.checkRange = function(val, text, isFraction) {
      var range = isFraction ? [0, 20] : [1, 21];
      if (val < range[0] || val > range[1]) {
        throwError(text + "value must be within the range" + range[0] + "to" + range[1]);
      }
    };
    NumberFormat2.intNumberFormatter = function(value, fOptions, dOptions) {
      var curData;
      if (isUndefined(fOptions.nData.type)) {
        return void 0;
      } else {
        if (value < 0) {
          value = value * -1;
          curData = fOptions.nData;
        } else if (value === 0) {
          curData = fOptions.zeroData || fOptions.pData;
        } else {
          curData = fOptions.pData;
        }
        var fValue = "";
        if (curData.isPercent) {
          value = value * 100;
        }
        if (curData.groupOne) {
          fValue = this.processSignificantDigits(value, curData.minimumSignificantDigits, curData.maximumSignificantDigits);
        } else {
          fValue = this.processFraction(value, curData.minimumFractionDigits, curData.maximumFractionDigits);
          if (curData.minimumIntegerDigits) {
            fValue = this.processMinimumIntegers(fValue, curData.minimumIntegerDigits);
          }
          if (dOptions.isCustomFormat && curData.minimumFractionDigits < curData.maximumFractionDigits && /\d+\.\d+/.test(fValue)) {
            var temp = fValue.split(".");
            var decimalPart = temp[1];
            var len = decimalPart.length;
            for (var i = len - 1; i >= 0; i--) {
              if (decimalPart["" + i] === "0" && i >= curData.minimumFractionDigits) {
                decimalPart = decimalPart.slice(0, i);
              } else {
                break;
              }
            }
            fValue = temp[0] + "." + decimalPart;
          }
        }
        if (curData.type === "scientific") {
          fValue = value.toExponential(curData.maximumFractionDigits);
          fValue = fValue.replace("e", dOptions.numberMapper.numberSymbols[mapper$1[4]]);
        }
        fValue = fValue.replace(".", dOptions.numberMapper.numberSymbols[mapper$1[3]]);
        fValue = curData.format === "#,###,,;(#,###,,)" ? this.customPivotFormat(parseInt(fValue)) : fValue;
        if (curData.useGrouping) {
          fValue = this.groupNumbers(fValue, curData.groupData.primary, curData.groupSeparator || ",", dOptions.numberMapper.numberSymbols[mapper$1[3]] || ".", curData.groupData.secondary);
        }
        fValue = ParserBase.convertValueParts(fValue, IntlBase.latnParseRegex, dOptions.numberMapper.mapper);
        if (curData.nlead === "N/A") {
          return curData.nlead;
        } else {
          return curData.nlead + fValue + curData.nend;
        }
      }
    };
    NumberFormat2.processSignificantDigits = function(value, min, max) {
      var temp = value + "";
      var tn;
      var length = temp.length;
      if (length < min) {
        return value.toPrecision(min);
      } else {
        temp = value.toPrecision(max);
        tn = +temp;
        return tn + "";
      }
    };
    NumberFormat2.groupNumbers = function(val, level1, sep, decimalSymbol, level2) {
      var flag = !isNullOrUndefined(level2) && level2 !== 0;
      var split = val.split(decimalSymbol);
      var prefix = split[0];
      var length = prefix.length;
      var str = "";
      while (length > level1) {
        str = prefix.slice(length - level1, length) + (str.length ? sep + str : "");
        length -= level1;
        if (flag) {
          level1 = level2;
          flag = false;
        }
      }
      split[0] = prefix.slice(0, length) + (str.length ? sep : "") + str;
      return split.join(decimalSymbol);
    };
    NumberFormat2.processFraction = function(value, min, max) {
      var temp = (value + "").split(".")[1];
      var length = temp ? temp.length : 0;
      if (min && length < min) {
        var ret = "";
        if (length === 0) {
          ret = value.toFixed(min);
        } else {
          ret += value;
          for (var j = 0; j < min - length; j++) {
            ret += "0";
          }
          return ret;
        }
        return value.toFixed(min);
      } else if (!isNullOrUndefined(max) && (length > max || max === 0)) {
        return value.toFixed(max);
      }
      return value + "";
    };
    NumberFormat2.processMinimumIntegers = function(value, min) {
      var temp = value.split(".");
      var lead = temp[0];
      var len = lead.length;
      if (len < min) {
        for (var i = 0; i < min - len; i++) {
          lead = "0" + lead;
        }
        temp[0] = lead;
      }
      return temp.join(".");
    };
    NumberFormat2.customPivotFormat = function(value) {
      if (value >= 5e5) {
        value /= 1e6;
        var _a = value.toString().split(".");
        _a[0];
        var decimal = _a[1];
        return decimal && +decimal.substring(0, 1) >= 5 ? Math.ceil(value).toString() : Math.floor(value).toString();
      }
      return "";
    };
    return NumberFormat2;
  }()
);
var standalone = "stand-alone";
var latnRegex = /^[0-9]*$/;
var timeSetter = {
  minute: "setMinutes",
  hour: "setHours",
  second: "setSeconds",
  day: "setDate",
  month: "setMonth",
  milliseconds: "setMilliseconds"
};
var month = "months";
var DateParser = (
  /** @class */
  function() {
    function DateParser2() {
    }
    DateParser2.dateParser = function(culture, option, cldr) {
      var _this = this;
      var dependable = IntlBase.getDependables(cldr, culture, option.calendar);
      var numOptions = ParserBase.getCurrentNumericOptions(dependable.parserObject, ParserBase.getNumberingSystem(cldr), false, isBlazor());
      var parseOptions = {};
      var resPattern = option.format || IntlBase.getResultantPattern(option.skeleton, dependable.dateObject, option.type, false, "");
      var regexString = "";
      var hourOnly;
      if (isUndefined(resPattern)) {
        throwError("Format options or type given must be invalid");
      } else {
        resPattern = IntlBase.ConvertDateToWeekFormat(resPattern);
        parseOptions = { isIslamic: IntlBase.islamicRegex.test(option.calendar), pattern: resPattern, evalposition: {}, culture };
        var patternMatch = resPattern.match(IntlBase.dateParseRegex) || [];
        var length_1 = patternMatch.length;
        var gmtCorrection = 0;
        var zCorrectTemp = 0;
        var isgmtTraversed = false;
        var nRegx = numOptions.numericRegex;
        var numMapper = ParserBase.getNumberMapper(dependable.parserObject, ParserBase.getNumberingSystem(cldr));
        for (var i = 0; i < length_1; i++) {
          var str = patternMatch[parseInt(i.toString(), 10)];
          var len = str.length;
          var char = str[0] === "K" ? "h" : str[0];
          var isNumber2 = void 0;
          var canUpdate = void 0;
          var charKey = datePartMatcher[char];
          var optional = len === 2 ? "" : "?";
          if (isgmtTraversed) {
            gmtCorrection = zCorrectTemp;
            isgmtTraversed = false;
          }
          switch (char) {
            case "E":
            case "c":
              var weekData = void 0;
              {
                weekData = dependable.dateObject[IntlBase.days][standalone][IntlBase.monthIndex[len]];
              }
              var weekObject = ParserBase.reverseObject(weekData);
              regexString += "(" + Object.keys(weekObject).join("|") + ")";
              break;
            case "M":
            case "L":
            case "d":
            case "m":
            case "s":
            case "h":
            case "H":
            case "f":
              canUpdate = true;
              if ((char === "M" || char === "L") && len > 2) {
                var monthData = void 0;
                {
                  monthData = dependable.dateObject[month][standalone][IntlBase.monthIndex[len]];
                }
                parseOptions[charKey] = ParserBase.reverseObject(monthData);
                regexString += "(" + Object.keys(parseOptions[charKey]).join("|") + ")";
              } else if (char === "f") {
                if (len > 3) {
                  continue;
                }
                isNumber2 = true;
                regexString += "(" + nRegx + nRegx + "?" + nRegx + "?)";
              } else {
                isNumber2 = true;
                regexString += "(" + nRegx + nRegx + optional + ")";
              }
              if (char === "h") {
                parseOptions.hour12 = true;
              }
              break;
            case "W":
              var opt = len === 1 ? "?" : "";
              regexString += "(" + nRegx + opt + nRegx + ")";
              break;
            case "y":
              canUpdate = isNumber2 = true;
              if (len === 2) {
                regexString += "(" + nRegx + nRegx + ")";
              } else {
                regexString += "(" + nRegx + "{" + len + ",})";
              }
              break;
            case "a":
              canUpdate = true;
              var periodValur = getValue("dayPeriods.format.wide", dependable.dateObject);
              parseOptions[charKey] = ParserBase.reverseObject(periodValur);
              regexString += "(" + Object.keys(parseOptions[charKey]).join("|") + ")";
              break;
            case "G":
              canUpdate = true;
              var eText = len <= 3 ? "eraAbbr" : len === 4 ? "eraNames" : "eraNarrow";
              parseOptions[charKey] = ParserBase.reverseObject(getValue("eras." + eText, dependable.dateObject));
              regexString += "(" + Object.keys(parseOptions[charKey]).join("|") + "?)";
              break;
            case "z":
              var tval = (/* @__PURE__ */ new Date()).getTimezoneOffset();
              canUpdate = tval !== 0;
              parseOptions[charKey] = getValue("dates.timeZoneNames", dependable.parserObject);
              var tzone = parseOptions[charKey];
              hourOnly = len < 4;
              var hpattern = hourOnly ? "+H;-H" : tzone.hourFormat;
              hpattern = hpattern.replace(/:/g, numMapper.timeSeparator);
              regexString += "(" + this.parseTimeZoneRegx(hpattern, tzone, nRegx) + ")?";
              isgmtTraversed = true;
              zCorrectTemp = hourOnly ? 6 : 12;
              break;
            case "'":
              var iString = str.replace(/'/g, "");
              regexString += "(" + iString + ")?";
              break;
            default:
              regexString += "([\\D])";
              break;
          }
          if (canUpdate) {
            parseOptions.evalposition["" + charKey] = { isNumber: isNumber2, pos: i + 1 + gmtCorrection, hourOnly };
          }
          if (i === length_1 - 1 && !isNullOrUndefined(regexString)) {
            var regExp2 = RegExp;
            parseOptions.parserRegex = new regExp2("^" + regexString + "$", "i");
          }
        }
      }
      return function(value) {
        var parsedDateParts = _this.internalDateParse(value, parseOptions, numOptions);
        if (isNullOrUndefined(parsedDateParts) || !Object.keys(parsedDateParts).length) {
          return null;
        }
        if (parseOptions.isIslamic) {
          var dobj = {};
          var tYear = parsedDateParts.year;
          var tDate = parsedDateParts.day;
          var tMonth = parsedDateParts.month;
          var ystrig = tYear ? tYear + "" : "";
          var is2DigitYear = ystrig.length === 2;
          if (!tYear || !tMonth || !tDate || is2DigitYear) {
            dobj = HijriParser.getHijriDate(/* @__PURE__ */ new Date());
          }
          if (is2DigitYear) {
            tYear = parseInt((dobj.year + "").slice(0, 2) + ystrig, 10);
          }
          var dateObject = HijriParser.toGregorian(tYear || dobj.year, tMonth || dobj.month, tDate || dobj.date);
          parsedDateParts.year = dateObject.getFullYear();
          parsedDateParts.month = dateObject.getMonth() + 1;
          parsedDateParts.day = dateObject.getDate();
        }
        return _this.getDateObject(parsedDateParts);
      };
    };
    DateParser2.getDateObject = function(options, value) {
      var res = value || /* @__PURE__ */ new Date();
      res.setMilliseconds(0);
      var tKeys = ["hour", "minute", "second", "milliseconds", "month", "day"];
      var y = options.year;
      var desig = options.designator;
      var tzone = options.timeZone;
      if (!isUndefined(y)) {
        var len = (y + "").length;
        if (len <= 2) {
          var century = Math.floor(res.getFullYear() / 100) * 100;
          y += century;
        }
        res.setFullYear(y);
      }
      for (var _i = 0, tKeys_1 = tKeys; _i < tKeys_1.length; _i++) {
        var key = tKeys_1[_i];
        var tValue = options[key];
        if (isUndefined(tValue) && key === "day") {
          res.setDate(1);
        }
        if (!isUndefined(tValue)) {
          if (key === "month") {
            tValue -= 1;
            if (tValue < 0 || tValue > 11) {
              return /* @__PURE__ */ new Date("invalid");
            }
            var pDate = res.getDate();
            res.setDate(1);
            res[timeSetter[key]](tValue);
            var lDate = new Date(res.getFullYear(), tValue + 1, 0).getDate();
            res.setDate(pDate < lDate ? pDate : lDate);
          } else {
            if (key === "day") {
              var lastDay = new Date(res.getFullYear(), res.getMonth() + 1, 0).getDate();
              if (tValue < 1 || tValue > lastDay) {
                return null;
              }
            }
            res[timeSetter[key]](tValue);
          }
        }
      }
      if (!isUndefined(desig)) {
        var hour = res.getHours();
        if (desig === "pm") {
          res.setHours(hour + (hour === 12 ? 0 : 12));
        } else if (hour === 12) {
          res.setHours(0);
        }
      }
      if (!isUndefined(tzone)) {
        var tzValue = tzone - res.getTimezoneOffset();
        if (tzValue !== 0) {
          res.setMinutes(res.getMinutes() + tzValue);
        }
      }
      return res;
    };
    DateParser2.internalDateParse = function(value, parseOptions, num) {
      var matches2 = value.match(parseOptions.parserRegex);
      var retOptions = { "hour": 0, "minute": 0, "second": 0 };
      if (isNullOrUndefined(matches2)) {
        return null;
      } else {
        var props2 = Object.keys(parseOptions.evalposition);
        for (var _i = 0, props_1 = props2; _i < props_1.length; _i++) {
          var prop = props_1[_i];
          var curObject = parseOptions.evalposition["" + prop];
          var matchString = matches2[curObject.pos];
          if (curObject.isNumber) {
            retOptions[prop] = this.internalNumberParser(matchString, num);
          } else {
            if (prop === "timeZone" && !isUndefined(matchString)) {
              var pos = curObject.pos;
              var val = void 0;
              var tmatch = matches2[pos + 1];
              var flag = !isUndefined(tmatch);
              if (curObject.hourOnly) {
                val = this.getZoneValue(flag, tmatch, matches2[pos + 4], num) * 60;
              } else {
                val = this.getZoneValue(flag, tmatch, matches2[pos + 7], num) * 60;
                val += this.getZoneValue(flag, matches2[pos + 4], matches2[pos + 10], num);
              }
              if (!isNullOrUndefined(val)) {
                retOptions["" + prop] = val;
              }
            } else {
              matchString = prop === "month" && !parseOptions.isIslamic && (parseOptions.culture === "en" || parseOptions.culture === "en-GB" || parseOptions.culture === "en-US") ? matchString[0].toUpperCase() + matchString.substring(1).toLowerCase() : matchString;
              retOptions[prop] = parseOptions[prop][matchString];
            }
          }
        }
        if (parseOptions.hour12) {
          retOptions.hour12 = true;
        }
      }
      return retOptions;
    };
    DateParser2.internalNumberParser = function(value, option) {
      value = ParserBase.convertValueParts(value, option.numberParseRegex, option.numericPair);
      if (latnRegex.test(value)) {
        return +value;
      }
      return null;
    };
    DateParser2.parseTimeZoneRegx = function(hourFormat, tZone, nRegex) {
      var pattern = tZone.gmtFormat;
      var ret;
      var cRegex = "(" + nRegex + ")(" + nRegex + ")";
      var splitStr;
      ret = hourFormat.replace("+", "\\+");
      if (hourFormat.indexOf("HH") !== -1) {
        ret = ret.replace(/HH|mm/g, "(" + cRegex + ")");
      } else {
        ret = ret.replace(/H|m/g, "(" + cRegex + "?)");
      }
      splitStr = ret.split(";").map(function(str) {
        return pattern.replace("{0}", str);
      });
      ret = splitStr.join("|") + "|" + tZone.gmtZeroFormat;
      return ret;
    };
    DateParser2.getZoneValue = function(flag, val1, val2, num) {
      var ival = flag ? val1 : val2;
      if (!ival) {
        return 0;
      }
      var value = this.internalNumberParser(ival, num);
      if (flag) {
        return -value;
      }
      return value;
    };
    return DateParser2;
  }()
);
var regExp$1 = RegExp;
var parseRegex = new regExp$1("^([^0-9]*)(([0-9,]*[0-9]+)(.[0-9]+)?)([Ee][+-]?[0-9]+)?([^0-9]*)$");
var groupRegex = /,/g;
var keys = ["minusSign", "infinity"];
var NumberParser = (
  /** @class */
  function() {
    function NumberParser2() {
    }
    NumberParser2.numberParser = function(culture, option, cldr) {
      var _this = this;
      var dependable = IntlBase.getDependables(cldr, culture, "", true);
      var parseOptions = { custom: true };
      var numOptions;
      if (IntlBase.formatRegex.test(option.format) || !option.format) {
        extend(parseOptions, IntlBase.getProperNumericSkeleton(option.format || "N"));
        parseOptions.custom = false;
        if (!parseOptions.fractionDigits) {
          if (option.maximumFractionDigits) {
            parseOptions.maximumFractionDigits = option.maximumFractionDigits;
          }
        }
      } else {
        extend(parseOptions, IntlBase.customFormat(option.format, null, null));
      }
      getValue("numbers", dependable.parserObject);
      numOptions = ParserBase.getCurrentNumericOptions(dependable.parserObject, ParserBase.getNumberingSystem(cldr), true, isBlazor());
      parseOptions.symbolRegex = ParserBase.getSymbolRegex(Object.keys(numOptions.symbolMatch));
      parseOptions.infinity = numOptions.symbolNumberSystem[keys[1]];
      var symbolpattern;
      {
        symbolpattern = IntlBase.getSymbolPattern(parseOptions.type, numOptions.numberSystem, dependable.numericObject, parseOptions.isAccount);
        if (symbolpattern) {
          symbolpattern = symbolpattern.replace(/\u00A4/g, IntlBase.defaultCurrency);
          var split = symbolpattern.split(";");
          parseOptions.nData = IntlBase.getFormatData(split[1] || "-" + split[0], true, "");
          parseOptions.pData = IntlBase.getFormatData(split[0], true, "");
        }
      }
      return function(value) {
        return _this.getParsedNumber(value, parseOptions, numOptions);
      };
    };
    NumberParser2.getParsedNumber = function(value, options, numOptions) {
      var isNegative;
      var isPercent;
      var tempValue;
      var lead;
      var end;
      var ret;
      if (value.indexOf(options.infinity) !== -1) {
        return Infinity;
      } else {
        value = ParserBase.convertValueParts(value, options.symbolRegex, numOptions.symbolMatch);
        value = ParserBase.convertValueParts(value, numOptions.numberParseRegex, numOptions.numericPair);
        value = value.indexOf("-") !== -1 ? value.replace("-.", "-0.") : value;
        if (value.indexOf(".") === 0) {
          value = "0" + value;
        }
        var matches2 = value.match(parseRegex);
        if (isNullOrUndefined(matches2)) {
          return NaN;
        }
        lead = matches2[1];
        tempValue = matches2[2];
        var exponent = matches2[5];
        end = matches2[6];
        isNegative = options.custom ? lead === options.nData.nlead && end === options.nData.nend : lead.indexOf(options.nData.nlead) !== -1 && end.indexOf(options.nData.nend) !== -1;
        isPercent = isNegative ? options.nData.isPercent : options.pData.isPercent;
        tempValue = tempValue.replace(groupRegex, "");
        if (exponent) {
          tempValue += exponent;
        }
        ret = +tempValue;
        if (options.type === "percent" || isPercent) {
          ret = ret / 100;
        }
        if (options.custom || options.fractionDigits) {
          ret = parseFloat(ret.toFixed(options.custom ? isNegative ? options.nData.maximumFractionDigits : options.pData.maximumFractionDigits : options.fractionDigits));
        }
        if (options.maximumFractionDigits) {
          ret = this.convertMaxFracDigits(tempValue, options, ret, isNegative);
        }
        if (isNegative) {
          ret *= -1;
        }
        return ret;
      }
    };
    NumberParser2.convertMaxFracDigits = function(value, options, ret, isNegative) {
      var decimalSplitValue = value.split(".");
      if (decimalSplitValue[1] && decimalSplitValue[1].length > options.maximumFractionDigits) {
        ret = +ret.toFixed(options.custom ? isNegative ? options.nData.maximumFractionDigits : options.pData.maximumFractionDigits : options.maximumFractionDigits);
      }
      return ret;
    };
    return NumberParser2;
  }()
);
var Observer = (
  /** @class */
  function() {
    function Observer2(context) {
      this.ranArray = [];
      this.boundedEvents = {};
      if (isNullOrUndefined(context)) {
        return;
      }
      this.context = context;
    }
    Observer2.prototype.on = function(property, handler, context, id) {
      if (isNullOrUndefined(handler)) {
        return;
      }
      var cntxt = context || this.context;
      if (this.notExist(property)) {
        this.boundedEvents["" + property] = [{ handler, context: cntxt }];
        return;
      }
      if (!isNullOrUndefined(id)) {
        if (this.ranArray.indexOf(id) === -1) {
          this.ranArray.push(id);
          this.boundedEvents["" + property].push({ handler, context: cntxt, id });
        }
      } else if (!this.isHandlerPresent(this.boundedEvents["" + property], handler)) {
        this.boundedEvents["" + property].push({ handler, context: cntxt });
      }
    };
    Observer2.prototype.off = function(property, handler, id) {
      if (this.notExist(property)) {
        return;
      }
      var curObject = getValue(property, this.boundedEvents);
      if (handler) {
        for (var i = 0; i < curObject.length; i++) {
          if (id) {
            if (curObject[parseInt(i.toString(), 10)].id === id) {
              curObject.splice(i, 1);
              var indexLocation = this.ranArray.indexOf(id);
              if (indexLocation !== -1) {
                this.ranArray.splice(indexLocation, 1);
              }
              break;
            }
          } else if (handler === curObject[parseInt(i.toString(), 10)].handler) {
            curObject.splice(i, 1);
            break;
          }
        }
      } else {
        delete this.boundedEvents["" + property];
      }
    };
    Observer2.prototype.notify = function(property, argument, successHandler, errorHandler) {
      if (this.notExist(property)) {
        if (successHandler) {
          successHandler.call(this, argument);
        }
        return;
      }
      if (argument) {
        argument.name = property;
      }
      var blazor = "Blazor";
      var curObject = getValue(property, this.boundedEvents).slice(0);
      if (window["" + blazor]) {
        return this.blazorCallback(curObject, argument, successHandler, errorHandler, 0);
      } else {
        for (var _i = 0, curObject_1 = curObject; _i < curObject_1.length; _i++) {
          var cur = curObject_1[_i];
          cur.handler.call(cur.context, argument);
        }
        if (successHandler) {
          successHandler.call(this, argument);
        }
      }
    };
    Observer2.prototype.blazorCallback = function(objs, argument, successHandler, errorHandler, index) {
      var _this = this;
      var isTrigger = index === objs.length - 1;
      if (index < objs.length) {
        var obj_1 = objs[parseInt(index.toString(), 10)];
        var promise = obj_1.handler.call(obj_1.context, argument);
        if (promise && typeof promise.then === "function") {
          if (!successHandler) {
            return promise;
          }
          promise.then(function(data) {
            data = typeof data === "string" && _this.isJson(data) ? JSON.parse(data, _this.dateReviver) : data;
            extend(argument, argument, data, true);
            if (successHandler && isTrigger) {
              successHandler.call(obj_1.context, argument);
            } else {
              return _this.blazorCallback(objs, argument, successHandler, errorHandler, index + 1);
            }
          }).catch(function(data) {
            if (errorHandler) {
              errorHandler.call(obj_1.context, typeof data === "string" && _this.isJson(data) ? JSON.parse(data, _this.dateReviver) : data);
            }
          });
        } else if (successHandler && isTrigger) {
          successHandler.call(obj_1.context, argument);
        } else {
          return this.blazorCallback(objs, argument, successHandler, errorHandler, index + 1);
        }
      }
    };
    Observer2.prototype.dateReviver = function(key, value) {
      var dPattern = /^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/;
      if (isBlazor && typeof value === "string" && value.match(dPattern) !== null) {
        return new Date(value);
      }
      return value;
    };
    Observer2.prototype.isJson = function(value) {
      try {
        JSON.parse(value);
      } catch (e) {
        return false;
      }
      return true;
    };
    Observer2.prototype.destroy = function() {
      this.boundedEvents = this.context = void 0;
    };
    Observer2.prototype.notExist = function(prop) {
      return this.boundedEvents.hasOwnProperty(prop) === false || this.boundedEvents[prop].length <= 0;
    };
    Observer2.prototype.isHandlerPresent = function(boundedEvents, handler) {
      for (var _i = 0, boundedEvents_1 = boundedEvents; _i < boundedEvents_1.length; _i++) {
        var cur = boundedEvents_1[_i];
        if (cur.handler === handler) {
          return true;
        }
      }
      return false;
    };
    return Observer2;
  }()
);
var onIntlChange = new Observer();
var rightToLeft = false;
var cldrData = {};
var defaultCulture = "en-US";
var defaultCurrencyCode = "USD";
var mapper = ["numericObject", "dateObject"];
var Internationalization = (
  /** @class */
  function() {
    function Internationalization2(cultureName) {
      if (cultureName) {
        this.culture = cultureName;
      }
    }
    Internationalization2.prototype.getDateFormat = function(options) {
      return DateFormat.dateFormat(this.getCulture(), options || { type: "date", skeleton: "short" }, cldrData);
    };
    Internationalization2.prototype.getNumberFormat = function(options) {
      if (options && !options.currency) {
        options.currency = defaultCurrencyCode;
      }
      return NumberFormat.numberFormatter(this.getCulture(), options || {}, cldrData);
    };
    Internationalization2.prototype.getDateParser = function(options) {
      return DateParser.dateParser(this.getCulture(), options || { skeleton: "short", type: "date" }, cldrData);
    };
    Internationalization2.prototype.getNumberParser = function(options) {
      return NumberParser.numberParser(this.getCulture(), options || { format: "N" }, cldrData);
    };
    Internationalization2.prototype.formatNumber = function(value, option) {
      return this.getNumberFormat(option)(value);
    };
    Internationalization2.prototype.formatDate = function(value, option) {
      return this.getDateFormat(option)(value);
    };
    Internationalization2.prototype.parseDate = function(value, option) {
      return this.getDateParser(option)(value);
    };
    Internationalization2.prototype.parseNumber = function(value, option) {
      return this.getNumberParser(option)(value);
    };
    Internationalization2.prototype.getDatePattern = function(option, isExcelFormat) {
      return IntlBase.getActualDateTimeFormat(this.getCulture(), option, cldrData, isExcelFormat);
    };
    Internationalization2.prototype.getNumberPattern = function(option, isExcel) {
      return IntlBase.getActualNumberFormat(this.getCulture(), option, cldrData, isExcel);
    };
    Internationalization2.prototype.getFirstDayOfWeek = function() {
      return IntlBase.getWeekData(this.getCulture(), cldrData);
    };
    Internationalization2.prototype.getCulture = function() {
      return this.culture || defaultCulture;
    };
    return Internationalization2;
  }()
);
function getNumericObject(locale, type) {
  var numObject = IntlBase.getDependables(cldrData, locale, "", true)[mapper[0]];
  var dateObject = IntlBase.getDependables(cldrData, locale, "")[mapper[1]];
  var numSystem = getValue("defaultNumberingSystem", numObject);
  var symbPattern = getValue("symbols-numberSystem-" + numSystem, numObject);
  var pattern = IntlBase.getSymbolPattern(type || "decimal", numSystem, numObject, false);
  return extend(symbPattern, IntlBase.getFormatData(pattern, true, "", true), { "dateSeparator": IntlBase.getDateSeparator(dateObject) });
}
function getDefaultDateObject(mode) {
  return IntlBase.getDependables(cldrData, "", mode, false)[mapper[1]];
}
var regExp = RegExp;
var blazorCultureFormats = {
  "en-US": {
    "d": "M/d/y",
    "D": "EEEE, MMMM d, y",
    "f": "EEEE, MMMM d, y h:mm a",
    "F": "EEEE, MMMM d, y h:mm:s a",
    "g": "M/d/y h:mm a",
    "G": "M/d/yyyy h:mm:ss tt",
    "m": "MMMM d",
    "M": "MMMM d",
    "r": "ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",
    "R": "ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",
    "s": "yyyy'-'MM'-'dd'T'HH':'mm':'ss",
    "t": "h:mm tt",
    "T": "h:m:s tt",
    "u": "yyyy'-'MM'-'dd HH':'mm':'ss'Z'",
    "U": "dddd, MMMM d, yyyy h:mm:ss tt",
    "y": "MMMM yyyy",
    "Y": "MMMM yyyy"
  }
};
var IntlBase;
(function(IntlBase2) {
  IntlBase2.negativeDataRegex = /^(('[^']+'|''|[^*#@0,.E])*)(\*.)?((([#,]*[0,]*0+)(\.0*[0-9]*#*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/;
  IntlBase2.customRegex = /^(('[^']+'|''|[^*#@0,.])*)(\*.)?((([0#,]*[0,]*[0#]*[0#\ ]*)(\.[0#]*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/;
  IntlBase2.latnParseRegex = /0|1|2|3|4|5|6|7|8|9/g;
  var fractionRegex = /[0-9]/g;
  IntlBase2.defaultCurrency = "$";
  var mapper2 = ["infinity", "nan", "group", "decimal"];
  var patternRegex = /G|M|L|H|c|'| a|yy|y|EEEE|E/g;
  var patternMatch = {
    "G": "",
    "M": "m",
    "L": "m",
    "H": "h",
    "c": "d",
    "'": '"',
    " a": " AM/PM",
    "yy": "yy",
    "y": "yyyy",
    "EEEE": "dddd",
    "E": "ddd"
  };
  IntlBase2.dateConverterMapper = /dddd|ddd/ig;
  var defaultFirstDay = "sun";
  IntlBase2.islamicRegex = /^islamic/;
  var firstDayMapper = {
    "sun": 0,
    "mon": 1,
    "tue": 2,
    "wed": 3,
    "thu": 4,
    "fri": 5,
    "sat": 6
  };
  IntlBase2.formatRegex = new regExp("(^[ncpae]{1})([0-1]?[0-9]|20)?$", "i");
  IntlBase2.currencyFormatRegex = new regExp("(^[ca]{1})([0-1]?[0-9]|20)?$", "i");
  IntlBase2.curWithoutNumberRegex = /(c|a)$/ig;
  var typeMapper = {
    "$": "isCurrency",
    "%": "isPercent",
    "-": "isNegative",
    0: "nlead",
    1: "nend"
  };
  IntlBase2.dateParseRegex = /([a-z])\1*|'([^']|'')+'|''|./gi;
  IntlBase2.basicPatterns = ["short", "medium", "long", "full"];
  IntlBase2.defaultObject = {
    "dates": {
      "calendars": {
        "gregorian": {
          "months": {
            "stand-alone": {
              "abbreviated": {
                "1": "Jan",
                "2": "Feb",
                "3": "Mar",
                "4": "Apr",
                "5": "May",
                "6": "Jun",
                "7": "Jul",
                "8": "Aug",
                "9": "Sep",
                "10": "Oct",
                "11": "Nov",
                "12": "Dec"
              },
              "narrow": {
                "1": "J",
                "2": "F",
                "3": "M",
                "4": "A",
                "5": "M",
                "6": "J",
                "7": "J",
                "8": "A",
                "9": "S",
                "10": "O",
                "11": "N",
                "12": "D"
              },
              "wide": {
                "1": "January",
                "2": "February",
                "3": "March",
                "4": "April",
                "5": "May",
                "6": "June",
                "7": "July",
                "8": "August",
                "9": "September",
                "10": "October",
                "11": "November",
                "12": "December"
              }
            }
          },
          "days": {
            "stand-alone": {
              "abbreviated": {
                "sun": "Sun",
                "mon": "Mon",
                "tue": "Tue",
                "wed": "Wed",
                "thu": "Thu",
                "fri": "Fri",
                "sat": "Sat"
              },
              "narrow": {
                "sun": "S",
                "mon": "M",
                "tue": "T",
                "wed": "W",
                "thu": "T",
                "fri": "F",
                "sat": "S"
              },
              "short": {
                "sun": "Su",
                "mon": "Mo",
                "tue": "Tu",
                "wed": "We",
                "thu": "Th",
                "fri": "Fr",
                "sat": "Sa"
              },
              "wide": {
                "sun": "Sunday",
                "mon": "Monday",
                "tue": "Tuesday",
                "wed": "Wednesday",
                "thu": "Thursday",
                "fri": "Friday",
                "sat": "Saturday"
              }
            }
          },
          "dayPeriods": {
            "format": {
              "wide": {
                "am": "AM",
                "pm": "PM"
              }
            }
          },
          "eras": {
            "eraNames": {
              "0": "Before Christ",
              "0-alt-variant": "Before Common Era",
              "1": "Anno Domini",
              "1-alt-variant": "Common Era"
            },
            "eraAbbr": {
              "0": "BC",
              "0-alt-variant": "BCE",
              "1": "AD",
              "1-alt-variant": "CE"
            },
            "eraNarrow": {
              "0": "B",
              "0-alt-variant": "BCE",
              "1": "A",
              "1-alt-variant": "CE"
            }
          },
          "dateFormats": {
            "full": "EEEE, MMMM d, y",
            "long": "MMMM d, y",
            "medium": "MMM d, y",
            "short": "M/d/yy"
          },
          "timeFormats": {
            "full": "h:mm:ss a zzzz",
            "long": "h:mm:ss a z",
            "medium": "h:mm:ss a",
            "short": "h:mm a"
          },
          "dateTimeFormats": {
            "full": "{1} 'at' {0}",
            "long": "{1} 'at' {0}",
            "medium": "{1}, {0}",
            "short": "{1}, {0}",
            "availableFormats": {
              "d": "d",
              "E": "ccc",
              "Ed": "d E",
              "Ehm": "E h:mm a",
              "EHm": "E HH:mm",
              "Ehms": "E h:mm:ss a",
              "EHms": "E HH:mm:ss",
              "Gy": "y G",
              "GyMMM": "MMM y G",
              "GyMMMd": "MMM d, y G",
              "GyMMMEd": "E, MMM d, y G",
              "h": "h a",
              "H": "HH",
              "hm": "h:mm a",
              "Hm": "HH:mm",
              "hms": "h:mm:ss a",
              "Hms": "HH:mm:ss",
              "hmsv": "h:mm:ss a v",
              "Hmsv": "HH:mm:ss v",
              "hmv": "h:mm a v",
              "Hmv": "HH:mm v",
              "M": "L",
              "Md": "M/d",
              "MEd": "E, M/d",
              "MMM": "LLL",
              "MMMd": "MMM d",
              "MMMEd": "E, MMM d",
              "MMMMd": "MMMM d",
              "ms": "mm:ss",
              "y": "y",
              "yM": "M/y",
              "yMd": "M/d/y",
              "yMEd": "E, M/d/y",
              "yMMM": "MMM y",
              "yMMMd": "MMM d, y",
              "yMMMEd": "E, MMM d, y",
              "yMMMM": "MMMM y"
            }
          }
        },
        "islamic": {
          "months": {
            "stand-alone": {
              "abbreviated": {
                "1": "Muh.",
                "2": "Saf.",
                "3": "Rab. I",
                "4": "Rab. II",
                "5": "Jum. I",
                "6": "Jum. II",
                "7": "Raj.",
                "8": "Sha.",
                "9": "Ram.",
                "10": "Shaw.",
                "11": "Dhuʻl-Q.",
                "12": "Dhuʻl-H."
              },
              "narrow": {
                "1": "1",
                "2": "2",
                "3": "3",
                "4": "4",
                "5": "5",
                "6": "6",
                "7": "7",
                "8": "8",
                "9": "9",
                "10": "10",
                "11": "11",
                "12": "12"
              },
              "wide": {
                "1": "Muharram",
                "2": "Safar",
                "3": "Rabiʻ I",
                "4": "Rabiʻ II",
                "5": "Jumada I",
                "6": "Jumada II",
                "7": "Rajab",
                "8": "Shaʻban",
                "9": "Ramadan",
                "10": "Shawwal",
                "11": "Dhuʻl-Qiʻdah",
                "12": "Dhuʻl-Hijjah"
              }
            }
          },
          "days": {
            "stand-alone": {
              "abbreviated": {
                "sun": "Sun",
                "mon": "Mon",
                "tue": "Tue",
                "wed": "Wed",
                "thu": "Thu",
                "fri": "Fri",
                "sat": "Sat"
              },
              "narrow": {
                "sun": "S",
                "mon": "M",
                "tue": "T",
                "wed": "W",
                "thu": "T",
                "fri": "F",
                "sat": "S"
              },
              "short": {
                "sun": "Su",
                "mon": "Mo",
                "tue": "Tu",
                "wed": "We",
                "thu": "Th",
                "fri": "Fr",
                "sat": "Sa"
              },
              "wide": {
                "sun": "Sunday",
                "mon": "Monday",
                "tue": "Tuesday",
                "wed": "Wednesday",
                "thu": "Thursday",
                "fri": "Friday",
                "sat": "Saturday"
              }
            }
          },
          "dayPeriods": {
            "format": {
              "wide": {
                "am": "AM",
                "pm": "PM"
              }
            }
          },
          "eras": {
            "eraNames": {
              "0": "AH"
            },
            "eraAbbr": {
              "0": "AH"
            },
            "eraNarrow": {
              "0": "AH"
            }
          },
          "dateFormats": {
            "full": "EEEE, MMMM d, y G",
            "long": "MMMM d, y G",
            "medium": "MMM d, y G",
            "short": "M/d/y GGGGG"
          },
          "timeFormats": {
            "full": "h:mm:ss a zzzz",
            "long": "h:mm:ss a z",
            "medium": "h:mm:ss a",
            "short": "h:mm a"
          },
          "dateTimeFormats": {
            "full": "{1} 'at' {0}",
            "long": "{1} 'at' {0}",
            "medium": "{1}, {0}",
            "short": "{1}, {0}",
            "availableFormats": {
              "d": "d",
              "E": "ccc",
              "Ed": "d E",
              "Ehm": "E h:mm a",
              "EHm": "E HH:mm",
              "Ehms": "E h:mm:ss a",
              "EHms": "E HH:mm:ss",
              "Gy": "y G",
              "GyMMM": "MMM y G",
              "GyMMMd": "MMM d, y G",
              "GyMMMEd": "E, MMM d, y G",
              "h": "h a",
              "H": "HH",
              "hm": "h:mm a",
              "Hm": "HH:mm",
              "hms": "h:mm:ss a",
              "Hms": "HH:mm:ss",
              "M": "L",
              "Md": "M/d",
              "MEd": "E, M/d",
              "MMM": "LLL",
              "MMMd": "MMM d",
              "MMMEd": "E, MMM d",
              "MMMMd": "MMMM d",
              "ms": "mm:ss",
              "y": "y G",
              "yyyy": "y G",
              "yyyyM": "M/y GGGGG",
              "yyyyMd": "M/d/y GGGGG",
              "yyyyMEd": "E, M/d/y GGGGG",
              "yyyyMMM": "MMM y G",
              "yyyyMMMd": "MMM d, y G",
              "yyyyMMMEd": "E, MMM d, y G",
              "yyyyMMMM": "MMMM y G",
              "yyyyQQQ": "QQQ y G",
              "yyyyQQQQ": "QQQQ y G"
            }
          }
        }
      },
      "timeZoneNames": {
        "hourFormat": "+HH:mm;-HH:mm",
        "gmtFormat": "GMT{0}",
        "gmtZeroFormat": "GMT"
      }
    },
    "numbers": {
      "currencies": {
        "USD": {
          "displayName": "US Dollar",
          "symbol": "$",
          "symbol-alt-narrow": "$"
        },
        "EUR": {
          "displayName": "Euro",
          "symbol": "€",
          "symbol-alt-narrow": "€"
        },
        "GBP": {
          "displayName": "British Pound",
          "symbol-alt-narrow": "£"
        }
      },
      "defaultNumberingSystem": "latn",
      "minimumGroupingDigits": "1",
      "symbols-numberSystem-latn": {
        "decimal": ".",
        "group": ",",
        "list": ";",
        "percentSign": "%",
        "plusSign": "+",
        "minusSign": "-",
        "exponential": "E",
        "superscriptingExponent": "×",
        "perMille": "‰",
        "infinity": "∞",
        "nan": "NaN",
        "timeSeparator": ":"
      },
      "decimalFormats-numberSystem-latn": {
        "standard": "#,##0.###"
      },
      "percentFormats-numberSystem-latn": {
        "standard": "#,##0%"
      },
      "currencyFormats-numberSystem-latn": {
        "standard": "¤#,##0.00",
        "accounting": "¤#,##0.00;(¤#,##0.00)"
      },
      "scientificFormats-numberSystem-latn": {
        "standard": "#E0"
      }
    }
  };
  IntlBase2.blazorDefaultObject = {
    "numbers": {
      "mapper": {
        "0": "0",
        "1": "1",
        "2": "2",
        "3": "3",
        "4": "4",
        "5": "5",
        "6": "6",
        "7": "7",
        "8": "8",
        "9": "9"
      },
      "mapperDigits": "0123456789",
      "numberSymbols": {
        "decimal": ".",
        "group": ",",
        "plusSign": "+",
        "minusSign": "-",
        "percentSign": "%",
        "nan": "NaN",
        "timeSeparator": ":",
        "infinity": "∞"
      },
      "timeSeparator": ":",
      "currencySymbol": "$",
      "currencypData": {
        "nlead": "$",
        "nend": "",
        "groupSeparator": ",",
        "groupData": {
          "primary": 3
        },
        "maximumFraction": 2,
        "minimumFraction": 2
      },
      "percentpData": {
        "nlead": "",
        "nend": "%",
        "groupSeparator": ",",
        "groupData": {
          "primary": 3
        },
        "maximumFraction": 2,
        "minimumFraction": 2
      },
      "percentnData": {
        "nlead": "-",
        "nend": "%",
        "groupSeparator": ",",
        "groupData": {
          "primary": 3
        },
        "maximumFraction": 2,
        "minimumFraction": 2
      },
      "currencynData": {
        "nlead": "($",
        "nend": ")",
        "groupSeparator": ",",
        "groupData": {
          "primary": 3
        },
        "maximumFraction": 2,
        "minimumFraction": 2
      },
      "decimalnData": {
        "nlead": "-",
        "nend": "",
        "groupData": {
          "primary": 3
        },
        "maximumFraction": 2,
        "minimumFraction": 2
      },
      "decimalpData": {
        "nlead": "",
        "nend": "",
        "groupData": {
          "primary": 3
        },
        "maximumFraction": 2,
        "minimumFraction": 2
      }
    },
    "dates": {
      "dayPeriods": {
        "am": "AM",
        "pm": "PM"
      },
      "dateSeperator": "/",
      "days": {
        "abbreviated": {
          "sun": "Sun",
          "mon": "Mon",
          "tue": "Tue",
          "wed": "Wed",
          "thu": "Thu",
          "fri": "Fri",
          "sat": "Sat"
        },
        "short": {
          "sun": "Su",
          "mon": "Mo",
          "tue": "Tu",
          "wed": "We",
          "thu": "Th",
          "fri": "Fr",
          "sat": "Sa"
        },
        "wide": {
          "sun": "Sunday",
          "mon": "Monday",
          "tue": "Tuesday",
          "wed": "Wednesday",
          "thu": "Thursday",
          "fri": "Friday",
          "sat": "Saturday"
        }
      },
      "months": {
        "abbreviated": {
          "1": "Jan",
          "2": "Feb",
          "3": "Mar",
          "4": "Apr",
          "5": "May",
          "6": "Jun",
          "7": "Jul",
          "8": "Aug",
          "9": "Sep",
          "10": "Oct",
          "11": "Nov",
          "12": "Dec"
        },
        "wide": {
          "1": "January",
          "2": "February",
          "3": "March",
          "4": "April",
          "5": "May",
          "6": "June",
          "7": "July",
          "8": "August",
          "9": "September",
          "10": "October",
          "11": "November",
          "12": "December"
        }
      },
      "eras": {
        "1": "AD"
      }
    }
  };
  IntlBase2.monthIndex = {
    3: "abbreviated",
    4: "wide",
    5: "narrow",
    1: "abbreviated"
  };
  IntlBase2.month = "months";
  IntlBase2.days = "days";
  IntlBase2.patternMatcher = {
    C: "currency",
    P: "percent",
    N: "decimal",
    A: "currency",
    E: "scientific"
  };
  function getResultantPattern(skeleton, dateObject, type, isIslamic, blazorCulture) {
    var resPattern;
    var iType = type || "date";
    if (blazorCulture) {
      resPattern = compareBlazorDateFormats({ skeleton }, blazorCulture).format || compareBlazorDateFormats({ skeleton: "d" }, "en-US").format;
    } else {
      if (IntlBase2.basicPatterns.indexOf(skeleton) !== -1) {
        resPattern = getValue(iType + "Formats." + skeleton, dateObject);
        if (iType === "dateTime") {
          var dPattern = getValue("dateFormats." + skeleton, dateObject);
          var tPattern = getValue("timeFormats." + skeleton, dateObject);
          resPattern = resPattern.replace("{1}", dPattern).replace("{0}", tPattern);
        }
      } else {
        resPattern = getValue("dateTimeFormats.availableFormats." + skeleton, dateObject);
      }
      if (isUndefined(resPattern) && skeleton === "yMd") {
        resPattern = "M/d/y";
      }
    }
    return resPattern;
  }
  IntlBase2.getResultantPattern = getResultantPattern;
  function getDependables(cldr, culture, mode, isNumber2) {
    var ret = {};
    var calendartype = mode || "gregorian";
    ret.parserObject = ParserBase.getMainObject(cldr, culture) || IntlBase2.defaultObject;
    if (isNumber2) {
      ret.numericObject = getValue("numbers", ret.parserObject);
    } else {
      var dateString = "dates.calendars." + calendartype;
      ret.dateObject = getValue(dateString, ret.parserObject);
    }
    return ret;
  }
  IntlBase2.getDependables = getDependables;
  function getSymbolPattern(type, numSystem, obj, isAccount) {
    return getValue(type + "Formats-numberSystem-" + numSystem + (isAccount ? ".accounting" : ".standard"), obj) || (isAccount ? getValue(type + "Formats-numberSystem-" + numSystem + ".standard", obj) : "");
  }
  IntlBase2.getSymbolPattern = getSymbolPattern;
  function ConvertDateToWeekFormat(format) {
    var convertMapper = format.match(IntlBase2.dateConverterMapper);
    if (convertMapper && isBlazor()) {
      var tempString = convertMapper[0].length === 3 ? "EEE" : "EEEE";
      return format.replace(IntlBase2.dateConverterMapper, tempString);
    }
    return format;
  }
  IntlBase2.ConvertDateToWeekFormat = ConvertDateToWeekFormat;
  function compareBlazorDateFormats(formatOptions, culture) {
    var format = formatOptions.format || formatOptions.skeleton;
    var curFormatMapper = getValue((culture || "en-US") + "." + format, blazorCultureFormats);
    if (!curFormatMapper) {
      curFormatMapper = getValue("en-US." + format, blazorCultureFormats);
    }
    if (curFormatMapper) {
      curFormatMapper = ConvertDateToWeekFormat(curFormatMapper);
      formatOptions.format = curFormatMapper.replace(/tt/, "a");
    }
    return formatOptions;
  }
  IntlBase2.compareBlazorDateFormats = compareBlazorDateFormats;
  function getProperNumericSkeleton(skeleton) {
    var matches2 = skeleton.match(IntlBase2.formatRegex);
    var ret = {};
    var pattern = matches2[1].toUpperCase();
    ret.isAccount = pattern === "A";
    ret.type = IntlBase2.patternMatcher[pattern];
    if (skeleton.length > 1) {
      ret.fractionDigits = parseInt(matches2[2], 10);
    }
    return ret;
  }
  IntlBase2.getProperNumericSkeleton = getProperNumericSkeleton;
  function getFormatData(pattern, needFraction, cSymbol, fractionOnly) {
    var nData = fractionOnly ? {} : { nlead: "", nend: "" };
    var match = pattern.match(IntlBase2.customRegex);
    if (match) {
      if (!fractionOnly) {
        nData.nlead = changeCurrencySymbol(match[1], cSymbol);
        nData.nend = changeCurrencySymbol(match[10], cSymbol);
        nData.groupPattern = match[4];
      }
      var fraction = match[7];
      if (fraction && needFraction) {
        var fmatch = fraction.match(fractionRegex);
        if (!isNullOrUndefined(fmatch)) {
          nData.minimumFraction = fmatch.length;
        } else {
          nData.minimumFraction = 0;
        }
        nData.maximumFraction = fraction.length - 1;
      }
    }
    return nData;
  }
  IntlBase2.getFormatData = getFormatData;
  function changeCurrencySymbol(val, sym) {
    if (val) {
      return val.replace(IntlBase2.defaultCurrency, sym);
    }
    return "";
  }
  IntlBase2.changeCurrencySymbol = changeCurrencySymbol;
  function getCurrencySymbol(numericObject, currencyCode, altSymbol) {
    var symbol = altSymbol ? "." + altSymbol : ".symbol";
    var getCurrency = getValue("currencies." + currencyCode + symbol, numericObject) || getValue("currencies." + currencyCode + ".symbol-alt-narrow", numericObject) || "$";
    return getCurrency;
  }
  IntlBase2.getCurrencySymbol = getCurrencySymbol;
  function customFormat(format, dOptions, obj) {
    var options = {};
    var formatSplit = format.split(";");
    var data = ["pData", "nData", "zeroData"];
    for (var i = 0; i < formatSplit.length; i++) {
      options[data[i]] = customNumberFormat(formatSplit[i], dOptions, obj);
    }
    if (isNullOrUndefined(options.nData)) {
      options.nData = extend({}, options.pData);
      options.nData.nlead = isNullOrUndefined(dOptions) ? "-" + options.nData.nlead : dOptions.minusSymbol + options.nData.nlead;
    }
    return options;
  }
  IntlBase2.customFormat = customFormat;
  function customNumberFormat(format, dOptions, numObject) {
    var cOptions = { type: "decimal", minimumFractionDigits: 0, maximumFractionDigits: 0 };
    var pattern = format.match(IntlBase2.customRegex);
    if (isNullOrUndefined(pattern) || pattern[5] === "" && format !== "N/A") {
      cOptions.type = void 0;
      return cOptions;
    }
    cOptions.nlead = pattern[1];
    cOptions.nend = pattern[10];
    var integerPart = pattern[6];
    var spaceCapture = integerPart.match(/\ $/g) ? true : false;
    var spaceGrouping = integerPart.replace(/\ $/g, "").indexOf(" ") !== -1;
    cOptions.useGrouping = integerPart.indexOf(",") !== -1 || spaceGrouping;
    integerPart = integerPart.replace(/,/g, "");
    var fractionPart = pattern[7];
    if (integerPart.indexOf("0") !== -1) {
      cOptions.minimumIntegerDigits = integerPart.length - integerPart.indexOf("0");
    }
    if (!isNullOrUndefined(fractionPart)) {
      cOptions.minimumFractionDigits = fractionPart.lastIndexOf("0");
      cOptions.maximumFractionDigits = fractionPart.lastIndexOf("#");
      if (cOptions.minimumFractionDigits === -1) {
        cOptions.minimumFractionDigits = 0;
      }
      if (cOptions.maximumFractionDigits === -1 || cOptions.maximumFractionDigits < cOptions.minimumFractionDigits) {
        cOptions.maximumFractionDigits = cOptions.minimumFractionDigits;
      }
    }
    if (!isNullOrUndefined(dOptions)) {
      dOptions.isCustomFormat = true;
      extend(cOptions, isCurrencyPercent([cOptions.nlead, cOptions.nend], "$", dOptions.currencySymbol));
      if (!cOptions.isCurrency) {
        extend(cOptions, isCurrencyPercent([cOptions.nlead, cOptions.nend], "%", dOptions.percentSymbol));
      }
    } else {
      extend(cOptions, isCurrencyPercent([cOptions.nlead, cOptions.nend], "%", "%"));
    }
    if (!isNullOrUndefined(numObject)) {
      var symbolPattern = getSymbolPattern(cOptions.type, dOptions.numberMapper.numberSystem, numObject, false);
      if (cOptions.useGrouping) {
        cOptions.groupSeparator = spaceGrouping ? " " : dOptions.numberMapper.numberSymbols[mapper2[2]];
        cOptions.groupData = NumberFormat.getGroupingDetails(symbolPattern.split(";")[0]);
      }
      cOptions.nlead = cOptions.nlead.replace(/'/g, "");
      cOptions.nend = spaceCapture ? " " + cOptions.nend.replace(/'/g, "") : cOptions.nend.replace(/'/g, "");
    }
    return cOptions;
  }
  IntlBase2.customNumberFormat = customNumberFormat;
  function isCurrencyPercent(parts, actual, symbol) {
    var options = { nlead: parts[0], nend: parts[1] };
    for (var i = 0; i < 2; i++) {
      var part = parts[parseInt(i.toString(), 10)];
      var loc = part.indexOf(actual);
      if (loc !== -1 && (loc < part.indexOf("'") || loc > part.lastIndexOf("'"))) {
        options[typeMapper[i]] = part.substr(0, loc) + symbol + part.substr(loc + 1);
        options[typeMapper[actual]] = true;
        options.type = options.isCurrency ? "currency" : "percent";
        break;
      }
    }
    return options;
  }
  IntlBase2.isCurrencyPercent = isCurrencyPercent;
  function getDateSeparator(dateObj) {
    var value = (getValue("dateFormats.short", dateObj) || "").match(/[d‏M‏]([^d‏M])[d‏M‏]/i);
    return value ? value[1] : "/";
  }
  IntlBase2.getDateSeparator = getDateSeparator;
  function getActualDateTimeFormat(culture, options, cldr, isExcelFormat) {
    var dependable = getDependables(cldr, culture, options.calendar);
    var actualPattern = options.format || getResultantPattern(options.skeleton, dependable.dateObject, options.type);
    if (isExcelFormat) {
      actualPattern = actualPattern.replace(patternRegex, function(pattern2) {
        return patternMatch[pattern2];
      });
      if (actualPattern.indexOf("z") !== -1) {
        var tLength = actualPattern.match(/z/g).length;
        var timeZonePattern = void 0;
        var options_1 = { "timeZone": {} };
        options_1.numMapper = ParserBase.getNumberMapper(dependable.parserObject, ParserBase.getNumberingSystem(cldr));
        options_1.timeZone = getValue("dates.timeZoneNames", dependable.parserObject);
        var value = /* @__PURE__ */ new Date();
        var timezone = value.getTimezoneOffset();
        var pattern = tLength < 4 ? "+H;-H" : options_1.timeZone.hourFormat;
        pattern = pattern.replace(/:/g, options_1.numMapper.timeSeparator);
        if (timezone === 0) {
          timeZonePattern = options_1.timeZone.gmtZeroFormat;
        } else {
          timeZonePattern = DateFormat.getTimeZoneValue(timezone, pattern);
          timeZonePattern = options_1.timeZone.gmtFormat.replace(/\{0\}/, timeZonePattern);
        }
        actualPattern = actualPattern.replace(/[z]+/, '"' + timeZonePattern + '"');
      }
      actualPattern = actualPattern.replace(/ $/, "");
    }
    return actualPattern;
  }
  IntlBase2.getActualDateTimeFormat = getActualDateTimeFormat;
  function processSymbol(actual, option) {
    if (actual.indexOf(",") !== -1) {
      var split = actual.split(",");
      actual = split[0] + getValue("numberMapper.numberSymbols.group", option) + split[1].replace(".", getValue("numberMapper.numberSymbols.decimal", option));
    } else {
      actual = actual.replace(".", getValue("numberMapper.numberSymbols.decimal", option));
    }
    return actual;
  }
  function getActualNumberFormat(culture, options, cldr, isExcel) {
    var dependable = getDependables(cldr, culture, "", true);
    var parseOptions = { custom: true };
    dependable.numericObject;
    var minFrac;
    var curObj = {};
    var curMatch = (options.format || "").match(IntlBase2.currencyFormatRegex);
    IntlBase2.formatRegex.test(options.format) ? getProperNumericSkeleton(options.format || "N") : {};
    var dOptions = {};
    if (curMatch) {
      dOptions.numberMapper = ParserBase.getNumberMapper(dependable.parserObject, ParserBase.getNumberingSystem(cldr), true);
      var curCode = getCurrencySymbol(dependable.numericObject, options.currency || defaultCurrencyCode, options.altSymbol);
      var symbolPattern = getSymbolPattern("currency", dOptions.numberMapper.numberSystem, dependable.numericObject, /a/i.test(options.format));
      symbolPattern = symbolPattern.replace(/\u00A4/g, curCode);
      var split = symbolPattern.split(";");
      curObj.hasNegativePattern = split.length > 1;
      curObj.nData = getFormatData(split[1] || "-" + split[0], true, curCode);
      curObj.pData = getFormatData(split[0], false, curCode);
      if (!curMatch[2] && !options.minimumFractionDigits && !options.maximumFractionDigits) {
        minFrac = getFormatData(symbolPattern.split(";")[0], true, "", true).minimumFraction;
      }
    }
    var actualPattern;
    if (IntlBase2.formatRegex.test(options.format) || !options.format) {
      extend(parseOptions, getProperNumericSkeleton(options.format || "N"));
      parseOptions.custom = false;
      actualPattern = "###0";
      if (parseOptions.fractionDigits || options.minimumFractionDigits || options.maximumFractionDigits || minFrac) {
        var defaultMinimum = 0;
        if (parseOptions.fractionDigits) {
          options.minimumFractionDigits = options.maximumFractionDigits = parseOptions.fractionDigits;
        }
        actualPattern = fractionDigitsPattern(actualPattern, minFrac || parseOptions.fractionDigits || options.minimumFractionDigits || defaultMinimum, options.maximumFractionDigits || defaultMinimum);
      }
      if (options.minimumIntegerDigits) {
        actualPattern = minimumIntegerPattern(actualPattern, options.minimumIntegerDigits);
      }
      if (options.useGrouping) {
        actualPattern = groupingPattern(actualPattern);
      }
      if (parseOptions.type === "currency" || parseOptions.type && isBlazor()) {
        var cPattern = actualPattern;
        actualPattern = curObj.pData.nlead + cPattern + curObj.pData.nend;
        if (curObj.hasNegativePattern || isBlazor()) {
          actualPattern += ";" + curObj.nData.nlead + cPattern + curObj.nData.nend;
        }
      }
      if (parseOptions.type === "percent" && !isBlazor()) {
        actualPattern += " %";
      }
    } else {
      actualPattern = options.format.replace(/'/g, '"');
    }
    if (Object.keys(dOptions).length > 0) {
      actualPattern = !isExcel ? processSymbol(actualPattern, dOptions) : actualPattern;
    }
    return actualPattern;
  }
  IntlBase2.getActualNumberFormat = getActualNumberFormat;
  function fractionDigitsPattern(pattern, minDigits, maxDigits) {
    pattern += ".";
    for (var a = 0; a < minDigits; a++) {
      pattern += "0";
    }
    if (minDigits < maxDigits) {
      var diff = maxDigits - minDigits;
      for (var b = 0; b < diff; b++) {
        pattern += "#";
      }
    }
    return pattern;
  }
  IntlBase2.fractionDigitsPattern = fractionDigitsPattern;
  function minimumIntegerPattern(pattern, digits) {
    var temp = pattern.split(".");
    var integer = "";
    for (var x = 0; x < digits; x++) {
      integer += "0";
    }
    return temp[1] ? integer + "." + temp[1] : integer;
  }
  IntlBase2.minimumIntegerPattern = minimumIntegerPattern;
  function groupingPattern(pattern) {
    var temp = pattern.split(".");
    var integer = temp[0];
    var no = 3 - integer.length % 3;
    var hash = no && no === 1 ? "#" : no === 2 ? "##" : "";
    integer = hash + integer;
    pattern = "";
    for (var x = integer.length - 1; x > 0; x = x - 3) {
      pattern = "," + integer[x - 2] + integer[x - 1] + integer[parseInt(x.toString(), 10)] + pattern;
    }
    pattern = pattern.slice(1);
    return temp[1] ? pattern + "." + temp[1] : pattern;
  }
  IntlBase2.groupingPattern = groupingPattern;
  function getWeekData(culture, cldr) {
    var firstDay = defaultFirstDay;
    var mapper3 = getValue("supplemental.weekData.firstDay", cldr);
    var iCulture = culture;
    if (/en-/.test(iCulture)) {
      iCulture = iCulture.slice(3);
    }
    iCulture = iCulture.slice(0, 2).toUpperCase() + iCulture.substr(2);
    if (mapper3) {
      firstDay = mapper3["" + iCulture] || mapper3[iCulture.slice(0, 2)] || defaultFirstDay;
    }
    return firstDayMapper["" + firstDay];
  }
  IntlBase2.getWeekData = getWeekData;
  function replaceBlazorCurrency(pData, aCurrency, rCurrency) {
    var iCurrency = getBlazorCurrencySymbol(rCurrency);
    if (aCurrency !== iCurrency) {
      for (var _i = 0, pData_1 = pData; _i < pData_1.length; _i++) {
        var data = pData_1[_i];
        data.nend = data.nend.replace(aCurrency, iCurrency);
        data.nlead = data.nlead.replace(aCurrency, iCurrency);
      }
    }
  }
  IntlBase2.replaceBlazorCurrency = replaceBlazorCurrency;
  function getWeekOfYear(date) {
    var newYear = new Date(date.getFullYear(), 0, 1);
    var day = newYear.getDay();
    var weeknum;
    day = day >= 0 ? day : day + 7;
    var daynum = Math.floor((date.getTime() - newYear.getTime() - (date.getTimezoneOffset() - newYear.getTimezoneOffset()) * 6e4) / 864e5) + 1;
    if (day < 4) {
      weeknum = Math.floor((daynum + day - 1) / 7) + 1;
      if (weeknum > 52) {
        var nYear = new Date(date.getFullYear() + 1, 0, 1);
        var nday = nYear.getDay();
        nday = nday >= 0 ? nday : nday + 7;
        weeknum = nday < 4 ? 1 : 53;
      }
    } else {
      weeknum = Math.floor((daynum + day - 1) / 7);
    }
    return weeknum;
  }
  IntlBase2.getWeekOfYear = getWeekOfYear;
})(IntlBase || (IntlBase = {}));
var headerRegex = /^(.*?):[ \t]*([^\r\n]*)$/gm;
var defaultType = "GET";
var Ajax = (
  /** @class */
  function() {
    function Ajax2(options, type, async, contentType2) {
      this.mode = true;
      this.emitError = true;
      this.options = {};
      if (typeof options === "string") {
        this.url = options;
        this.type = type ? type.toUpperCase() : defaultType;
        this.mode = !isNullOrUndefined(async) ? async : true;
      } else if (typeof options === "object") {
        this.options = options;
        merge(this, this.options);
      }
      this.type = this.type ? this.type.toUpperCase() : defaultType;
      this.contentType = this.contentType !== void 0 ? this.contentType : contentType2;
    }
    Ajax2.prototype.send = function(data) {
      var _this = this;
      this.data = isNullOrUndefined(data) ? this.data : data;
      var eventArgs = {
        cancel: false,
        httpRequest: null
      };
      var promise = new Promise(function(resolve2, reject) {
        _this.httpRequest = new XMLHttpRequest();
        _this.httpRequest.onreadystatechange = function() {
          _this.stateChange(resolve2, reject);
        };
        if (!isNullOrUndefined(_this.onLoad)) {
          _this.httpRequest.onload = _this.onLoad;
        }
        if (!isNullOrUndefined(_this.onProgress)) {
          _this.httpRequest.onprogress = _this.onProgress;
        }
        if (!isNullOrUndefined(_this.onAbort)) {
          _this.httpRequest.onabort = _this.onAbort;
        }
        if (!isNullOrUndefined(_this.onError)) {
          _this.httpRequest.onerror = _this.onError;
        }
        if (!isNullOrUndefined(_this.onUploadProgress)) {
          _this.httpRequest.upload.onprogress = _this.onUploadProgress;
        }
        _this.httpRequest.open(_this.type, _this.url, _this.mode);
        if (!isNullOrUndefined(_this.data) && _this.contentType !== null) {
          _this.httpRequest.setRequestHeader("Content-Type", _this.contentType || "application/json; charset=utf-8");
        }
        if (_this.beforeSend) {
          eventArgs.httpRequest = _this.httpRequest;
          _this.beforeSend(eventArgs);
        }
        if (!eventArgs.cancel) {
          _this.httpRequest.send(!isNullOrUndefined(_this.data) ? _this.data : null);
        }
      });
      return promise;
    };
    Ajax2.prototype.successHandler = function(data) {
      if (this.onSuccess) {
        this.onSuccess(data, this);
      }
      return data;
    };
    Ajax2.prototype.failureHandler = function(reason) {
      if (this.onFailure) {
        this.onFailure(this.httpRequest);
      }
      return reason;
    };
    Ajax2.prototype.stateChange = function(resolve2, reject) {
      var data = this.httpRequest.responseText;
      if (this.dataType && this.dataType.toLowerCase() === "json") {
        if (data === "") {
          data = void 0;
        } else {
          try {
            data = JSON.parse(data);
          } catch (error) {
          }
        }
      }
      if (this.httpRequest.readyState === 4) {
        if (this.httpRequest.status >= 200 && this.httpRequest.status <= 299 || this.httpRequest.status === 304) {
          resolve2(this.successHandler(data));
        } else {
          if (this.emitError) {
            reject(new Error(this.failureHandler(this.httpRequest.statusText)));
          } else {
            resolve2();
          }
        }
      }
    };
    Ajax2.prototype.getResponseHeader = function(key) {
      var responseHeaders;
      var header;
      responseHeaders = {};
      var headers = headerRegex.exec(this.httpRequest.getAllResponseHeaders());
      while (headers) {
        responseHeaders[headers[1].toLowerCase()] = headers[2];
        headers = headerRegex.exec(this.httpRequest.getAllResponseHeaders());
      }
      header = responseHeaders[key.toLowerCase()];
      return isNullOrUndefined(header) ? null : header;
    };
    return Ajax2;
  }()
);
var REGX_MOBILE = /android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini|mobile/i;
var REGX_IE = /msie|trident/i;
var REGX_IE11 = /Trident\/7\./;
var REGX_IOS = /(ipad|iphone|ipod touch)/i;
var REGX_IOS7 = /(ipad|iphone|ipod touch);.*os 7_\d|(ipad|iphone|ipod touch);.*os 8_\d/i;
var REGX_ANDROID = /android/i;
var REGX_WINDOWS = /trident|windows phone|edge/i;
var REGX_VERSION = /(version)[ /]([\w.]+)/i;
var REGX_BROWSER = {
  OPERA: /(opera|opr)(?:.*version|)[ /]([\w.]+)/i,
  EDGE: /(edge)(?:.*version|)[ /]([\w.]+)/i,
  CHROME: /(chrome|crios)[ /]([\w.]+)/i,
  PANTHOMEJS: /(phantomjs)[ /]([\w.]+)/i,
  SAFARI: /(safari)[ /]([\w.]+)/i,
  WEBKIT: /(webkit)[ /]([\w.]+)/i,
  MSIE: /(msie|trident) ([\w.]+)/i,
  MOZILLA: /(mozilla)(?:.*? rv:([\w.]+)|)/i
};
if (typeof window !== "undefined") {
  window.browserDetails = window.browserDetails || {};
}
var Browser = (
  /** @class */
  function() {
    function Browser2() {
    }
    Browser2.extractBrowserDetail = function() {
      var browserInfo = { culture: {} };
      var keys2 = Object.keys(REGX_BROWSER);
      var clientInfo = [];
      for (var _i = 0, keys_1 = keys2; _i < keys_1.length; _i++) {
        var key = keys_1[_i];
        clientInfo = Browser2.userAgent.match(REGX_BROWSER["" + key]);
        if (clientInfo) {
          browserInfo.name = clientInfo[1].toLowerCase() === "opr" ? "opera" : clientInfo[1].toLowerCase();
          browserInfo.name = clientInfo[1].toLowerCase() === "crios" ? "chrome" : browserInfo.name;
          browserInfo.version = clientInfo[2];
          browserInfo.culture.name = browserInfo.culture.language = navigator.language;
          if (!!Browser2.userAgent.match(REGX_IE11)) {
            browserInfo.name = "msie";
            break;
          }
          var version2 = Browser2.userAgent.match(REGX_VERSION);
          if (browserInfo.name === "safari" && version2) {
            browserInfo.version = version2[2];
          }
          break;
        }
      }
      return browserInfo;
    };
    Browser2.getEvent = function(event) {
      var events = {
        start: {
          isPointer: "pointerdown",
          isTouch: "touchstart",
          isDevice: "mousedown"
        },
        move: {
          isPointer: "pointermove",
          isTouch: "touchmove",
          isDevice: "mousemove"
        },
        end: {
          isPointer: "pointerup",
          isTouch: "touchend",
          isDevice: "mouseup"
        },
        cancel: {
          isPointer: "pointercancel",
          isTouch: "touchcancel",
          isDevice: "mouseleave"
        }
      };
      return Browser2.isPointer ? events["" + event].isPointer : Browser2.isTouch ? events["" + event].isTouch + (!Browser2.isDevice ? " " + events["" + event].isDevice : "") : events["" + event].isDevice;
    };
    Browser2.getTouchStartEvent = function() {
      return Browser2.getEvent("start");
    };
    Browser2.getTouchEndEvent = function() {
      return Browser2.getEvent("end");
    };
    Browser2.getTouchMoveEvent = function() {
      return Browser2.getEvent("move");
    };
    Browser2.getTouchCancelEvent = function() {
      return Browser2.getEvent("cancel");
    };
    Browser2.isSafari = function() {
      return Browser2.isDevice && Browser2.isIos && Browser2.isTouch && typeof window !== "undefined" && window.navigator.userAgent.toLowerCase().indexOf("iphone") === -1 && window.navigator.userAgent.toLowerCase().indexOf("safari") > -1;
    };
    Browser2.getValue = function(key, regX) {
      var browserDetails = typeof window !== "undefined" ? window.browserDetails : {};
      if (typeof navigator !== "undefined" && navigator.platform === "MacIntel" && navigator.maxTouchPoints > 1 && Browser2.isTouch === true) {
        browserDetails["isIos"] = true;
        browserDetails["isDevice"] = true;
        browserDetails["isTouch"] = true;
        browserDetails["isPointer"] = true;
      }
      if ("undefined" === typeof browserDetails["" + key]) {
        return browserDetails["" + key] = regX.test(Browser2.userAgent);
      }
      return browserDetails["" + key];
    };
    Object.defineProperty(Browser2, "userAgent", {
      get: function() {
        return Browser2.uA;
      },
      //Properties
      /**
       * Property specifies the userAgent of the browser. Default userAgent value is based on the browser.
       * Also we can set our own userAgent.
       *
       * @param {string} uA ?
       */
      set: function(uA) {
        Browser2.uA = uA;
        window.browserDetails = {};
      },
      enumerable: true,
      configurable: true
    });
    Object.defineProperty(Browser2, "info", {
      //Read Only Properties
      /**
       * Property is to get the browser information like Name, Version and Language
       *
       * @returns {BrowserInfo} ?
       */
      get: function() {
        if (isUndefined(window.browserDetails.info)) {
          return window.browserDetails.info = Browser2.extractBrowserDetail();
        }
        return window.browserDetails.info;
      },
      enumerable: true,
      configurable: true
    });
    Object.defineProperty(Browser2, "isIE", {
      /**
       * Property is to get whether the userAgent is based IE.
       *
       * @returns {boolean} ?
       */
      get: function() {
        return Browser2.getValue("isIE", REGX_IE);
      },
      enumerable: true,
      configurable: true
    });
    Object.defineProperty(Browser2, "isTouch", {
      /**
       * Property is to get whether the browser has touch support.
       *
       * @returns {boolean} ?
       */
      get: function() {
        if (isUndefined(window.browserDetails.isTouch)) {
          return window.browserDetails.isTouch = "ontouchstart" in window.navigator || window && window.navigator && window.navigator.maxTouchPoints > 0 || "ontouchstart" in window;
        }
        return window.browserDetails.isTouch;
      },
      enumerable: true,
      configurable: true
    });
    Object.defineProperty(Browser2, "isPointer", {
      /**
       * Property is to get whether the browser has Pointer support.
       *
       * @returns {boolean} ?
       */
      get: function() {
        if (isUndefined(window.browserDetails.isPointer)) {
          return window.browserDetails.isPointer = "pointerEnabled" in window.navigator;
        }
        return window.browserDetails.isPointer;
      },
      enumerable: true,
      configurable: true
    });
    Object.defineProperty(Browser2, "isMSPointer", {
      /**
       * Property is to get whether the browser has MSPointer support.
       *
       * @returns {boolean} ?
       */
      get: function() {
        if (isUndefined(window.browserDetails.isMSPointer)) {
          return window.browserDetails.isMSPointer = "msPointerEnabled" in window.navigator;
        }
        return window.browserDetails.isMSPointer;
      },
      enumerable: true,
      configurable: true
    });
    Object.defineProperty(Browser2, "isDevice", {
      /**
       * Property is to get whether the userAgent is device based.
       *
       * @returns {boolean} ?
       */
      get: function() {
        return Browser2.getValue("isDevice", REGX_MOBILE);
      },
      enumerable: true,
      configurable: true
    });
    Object.defineProperty(Browser2, "isIos", {
      /**
       * Property is to get whether the userAgent is IOS.
       *
       * @returns {boolean} ?
       */
      get: function() {
        return Browser2.getValue("isIos", REGX_IOS);
      },
      enumerable: true,
      configurable: true
    });
    Object.defineProperty(Browser2, "isIos7", {
      /**
       * Property is to get whether the userAgent is Ios7.
       *
       * @returns {boolean} ?
       */
      get: function() {
        return Browser2.getValue("isIos7", REGX_IOS7);
      },
      enumerable: true,
      configurable: true
    });
    Object.defineProperty(Browser2, "isAndroid", {
      /**
       * Property is to get whether the userAgent is Android.
       *
       * @returns {boolean} ?
       */
      get: function() {
        return Browser2.getValue("isAndroid", REGX_ANDROID);
      },
      enumerable: true,
      configurable: true
    });
    Object.defineProperty(Browser2, "isWebView", {
      /**
       * Property is to identify whether application ran in web view.
       *
       * @returns {boolean} ?
       */
      get: function() {
        if (isUndefined(window.browserDetails.isWebView)) {
          window.browserDetails.isWebView = !(isUndefined(window.cordova) && isUndefined(window.PhoneGap) && isUndefined(window.phonegap) && window.forge !== "object");
          return window.browserDetails.isWebView;
        }
        return window.browserDetails.isWebView;
      },
      enumerable: true,
      configurable: true
    });
    Object.defineProperty(Browser2, "isWindows", {
      /**
       * Property is to get whether the userAgent is Windows.
       *
       * @returns {boolean} ?
       */
      get: function() {
        return Browser2.getValue("isWindows", REGX_WINDOWS);
      },
      enumerable: true,
      configurable: true
    });
    Object.defineProperty(Browser2, "touchStartEvent", {
      /**
       * Property is to get the touch start event. It returns event name based on browser.
       *
       * @returns {string} ?
       */
      get: function() {
        if (isUndefined(window.browserDetails.touchStartEvent)) {
          return window.browserDetails.touchStartEvent = Browser2.getTouchStartEvent();
        }
        return window.browserDetails.touchStartEvent;
      },
      enumerable: true,
      configurable: true
    });
    Object.defineProperty(Browser2, "touchMoveEvent", {
      /**
       * Property is to get the touch move event. It returns event name based on browser.
       *
       * @returns {string} ?
       */
      get: function() {
        if (isUndefined(window.browserDetails.touchMoveEvent)) {
          return window.browserDetails.touchMoveEvent = Browser2.getTouchMoveEvent();
        }
        return window.browserDetails.touchMoveEvent;
      },
      enumerable: true,
      configurable: true
    });
    Object.defineProperty(Browser2, "touchEndEvent", {
      /**
       * Property is to get the touch end event. It returns event name based on browser.
       *
       * @returns {string} ?
       */
      get: function() {
        if (isUndefined(window.browserDetails.touchEndEvent)) {
          return window.browserDetails.touchEndEvent = Browser2.getTouchEndEvent();
        }
        return window.browserDetails.touchEndEvent;
      },
      enumerable: true,
      configurable: true
    });
    Object.defineProperty(Browser2, "touchCancelEvent", {
      /**
       * Property is to cancel the touch end event.
       *
       * @returns {string} ?
       */
      get: function() {
        if (isUndefined(window.browserDetails.touchCancelEvent)) {
          return window.browserDetails.touchCancelEvent = Browser2.getTouchCancelEvent();
        }
        return window.browserDetails.touchCancelEvent;
      },
      enumerable: true,
      configurable: true
    });
    Browser2.uA = typeof navigator !== "undefined" ? navigator.userAgent : "";
    return Browser2;
  }()
);
var EventHandler = (
  /** @class */
  function() {
    function EventHandler2() {
    }
    EventHandler2.addOrGetEventData = function(element2) {
      if ("__eventList" in element2) {
        return element2.__eventList.events;
      } else {
        element2.__eventList = {};
        return element2.__eventList.events = [];
      }
    };
    EventHandler2.add = function(element2, eventName, listener, bindTo, intDebounce) {
      var eventData = EventHandler2.addOrGetEventData(element2);
      var debounceListener;
      if (intDebounce) {
        debounceListener = debounce(listener, intDebounce);
      } else {
        debounceListener = listener;
      }
      if (bindTo) {
        debounceListener = debounceListener.bind(bindTo);
      }
      var event = eventName.split(" ");
      for (var i = 0; i < event.length; i++) {
        eventData.push({
          name: event[parseInt(i.toString(), 10)],
          listener,
          debounce: debounceListener
        });
        if (Browser.isIE) {
          element2.addEventListener(event[parseInt(i.toString(), 10)], debounceListener);
        } else {
          element2.addEventListener(event[parseInt(i.toString(), 10)], debounceListener, { passive: false });
        }
      }
      return debounceListener;
    };
    EventHandler2.remove = function(element2, eventName, listener) {
      var eventData = EventHandler2.addOrGetEventData(element2);
      var event = eventName.split(" ");
      var _loop_1 = function(j2) {
        var index = -1;
        var debounceListener;
        if (eventData && eventData.length !== 0) {
          eventData.some(function(x, i) {
            return x.name === event[parseInt(j2.toString(), 10)] && x.listener === listener ? (index = i, debounceListener = x.debounce, true) : false;
          });
        }
        if (index !== -1) {
          eventData.splice(index, 1);
        }
        if (debounceListener) {
          element2.removeEventListener(event[parseInt(j2.toString(), 10)], debounceListener);
        }
      };
      for (var j = 0; j < event.length; j++) {
        _loop_1(j);
      }
    };
    EventHandler2.clearEvents = function(element2) {
      var eventData;
      var copyData;
      eventData = EventHandler2.addOrGetEventData(element2);
      copyData = extend([], copyData, eventData);
      for (var i = 0; i < copyData.length; i++) {
        element2.removeEventListener(copyData[parseInt(i.toString(), 10)].name, copyData[parseInt(i.toString(), 10)].debounce);
        eventData.shift();
      }
    };
    EventHandler2.trigger = function(element2, eventName, eventProp) {
      var eventData = EventHandler2.addOrGetEventData(element2);
      for (var _i = 0, eventData_1 = eventData; _i < eventData_1.length; _i++) {
        var event_1 = eventData_1[_i];
        if (event_1.name === eventName) {
          event_1.debounce.call(this, eventProp);
        }
      }
    };
    return EventHandler2;
  }()
);
var SVG_REG = /^svg|^path|^g/;
function createElement(tagName, properties2) {
  var element2 = SVG_REG.test(tagName) ? document.createElementNS("http://www.w3.org/2000/svg", tagName) : document.createElement(tagName);
  if (typeof properties2 === "undefined") {
    return element2;
  }
  element2.innerHTML = properties2.innerHTML ? properties2.innerHTML : "";
  if (properties2.className !== void 0) {
    element2.className = properties2.className;
  }
  if (properties2.id !== void 0) {
    element2.id = properties2.id;
  }
  if (properties2.styles !== void 0) {
    element2.setAttribute("style", properties2.styles);
  }
  if (properties2.attrs !== void 0) {
    attributes(element2, properties2.attrs);
  }
  return element2;
}
function addClass(elements, classes) {
  var classList2 = getClassList(classes);
  var regExp2 = RegExp;
  for (var _i = 0, _a = elements; _i < _a.length; _i++) {
    var ele = _a[_i];
    for (var _b = 0, classList_1 = classList2; _b < classList_1.length; _b++) {
      var className = classList_1[_b];
      if (isObject(ele)) {
        var curClass = getValue("attributes.className", ele);
        if (isNullOrUndefined(curClass)) {
          setValue("attributes.className", className, ele);
        } else if (!new regExp2("\\b" + className + "\\b", "i").test(curClass)) {
          setValue("attributes.className", curClass + " " + className, ele);
        }
      } else {
        if (!ele.classList.contains(className)) {
          ele.classList.add(className);
        }
      }
    }
  }
  return elements;
}
function removeClass(elements, classes) {
  var classList2 = getClassList(classes);
  for (var _i = 0, _a = elements; _i < _a.length; _i++) {
    var ele = _a[_i];
    var flag = isObject(ele);
    var canRemove = flag ? getValue("attributes.className", ele) : ele.className !== "";
    if (canRemove) {
      for (var _b = 0, classList_2 = classList2; _b < classList_2.length; _b++) {
        var className = classList_2[_b];
        if (flag) {
          var classes_1 = getValue("attributes.className", ele);
          var classArr = classes_1.split(" ");
          var index = classArr.indexOf(className);
          if (index !== -1) {
            classArr.splice(index, 1);
          }
          setValue("attributes.className", classArr.join(" "), ele);
        } else {
          ele.classList.remove(className);
        }
      }
    }
  }
  return elements;
}
function getClassList(classes) {
  var classList2 = [];
  if (typeof classes === "string") {
    classList2.push(classes);
  } else {
    classList2 = classes;
  }
  return classList2;
}
function isVisible(element2) {
  var ele = element2;
  return ele.style.visibility === "" && ele.offsetWidth > 0;
}
function prepend(fromElements, toElement, isEval) {
  var docFrag = document.createDocumentFragment();
  for (var _i = 0, _a = fromElements; _i < _a.length; _i++) {
    var ele = _a[_i];
    docFrag.appendChild(ele);
  }
  toElement.insertBefore(docFrag, toElement.firstElementChild);
  if (isEval) {
    executeScript(toElement);
  }
  return fromElements;
}
function append2(fromElements, toElement, isEval) {
  var docFrag = document.createDocumentFragment();
  if (fromElements instanceof NodeList) {
    while (fromElements.length > 0) {
      docFrag.appendChild(fromElements[0]);
    }
  } else {
    for (var _i = 0, _a = fromElements; _i < _a.length; _i++) {
      var ele = _a[_i];
      docFrag.appendChild(ele);
    }
  }
  toElement.appendChild(docFrag);
  if (isEval) {
    executeScript(toElement);
  }
  return fromElements;
}
function executeScript(ele) {
  var eleArray = ele.querySelectorAll("script");
  eleArray.forEach(function(element2) {
    var script = document.createElement("script");
    script.text = element2.innerHTML;
    document.head.appendChild(script);
    detach(script);
  });
}
function detach(element2) {
  var parentNode = element2.parentNode;
  if (parentNode) {
    return parentNode.removeChild(element2);
  }
}
function remove(element2) {
  var parentNode = element2.parentNode;
  EventHandler.clearEvents(element2);
  parentNode.removeChild(element2);
}
function attributes(element2, attributes2) {
  var keys2 = Object.keys(attributes2);
  var ele = element2;
  for (var _i = 0, keys_1 = keys2; _i < keys_1.length; _i++) {
    var key = keys_1[_i];
    if (isObject(ele)) {
      var iKey = key;
      if (key === "tabindex") {
        iKey = "tabIndex";
      }
      ele.attributes["" + iKey] = attributes2["" + key];
    } else {
      ele.setAttribute(key, attributes2["" + key]);
    }
  }
  return ele;
}
function select$1(selector, context, needsVDOM) {
  if (context === void 0) {
    context = document;
  }
  selector = querySelectId(selector);
  return context.querySelector(selector);
}
function selectAll(selector, context, needsVDOM) {
  if (context === void 0) {
    context = document;
  }
  selector = querySelectId(selector);
  var nodeList = context.querySelectorAll(selector);
  return nodeList;
}
function querySelectId(selector) {
  var charRegex = /(!|"|\$|%|&|'|\(|\)|\*|\/|:|;|<|=|\?|@|\]|\^|`|{|}|\||\+|~)/g;
  if (selector.match(/#[0-9]/g) || selector.match(charRegex)) {
    var idList = selector.split(",");
    for (var i = 0; i < idList.length; i++) {
      var list = idList[parseInt(i.toString(), 10)].split(" ");
      for (var j = 0; j < list.length; j++) {
        if (list[parseInt(j.toString(), 10)].indexOf("#") > -1) {
          if (!list[parseInt(j.toString(), 10)].match(/\[.*\]/)) {
            var splitId = list[parseInt(j.toString(), 10)].split("#");
            if (splitId[1].match(/^\d/) || splitId[1].match(charRegex)) {
              var setId = list[parseInt(j.toString(), 10)].split(".");
              setId[0] = setId[0].replace(/#/, "[id='") + "']";
              list[parseInt(j.toString(), 10)] = setId.join(".");
            }
          }
        }
      }
      idList[parseInt(i.toString(), 10)] = list.join(" ");
    }
    return idList.join(",");
  }
  return selector;
}
function closest(element2, selector) {
  var el = element2;
  if (typeof el.closest === "function") {
    return el.closest(selector);
  }
  while (el && el.nodeType === 1) {
    if (matches$1(el, selector)) {
      return el;
    }
    el = el.parentNode;
  }
  return null;
}
function setStyleAttribute(element2, attrs) {
  if (attrs !== void 0) {
    Object.keys(attrs).forEach(function(key) {
      element2.style[key] = attrs[key];
    });
  }
}
function classList(element2, addClasses, removeClasses) {
  addClass([element2], addClasses);
  removeClass([element2], removeClasses);
}
function matches$1(element2, selector) {
  var matches2 = element2.matches || element2.msMatchesSelector || element2.webkitMatchesSelector;
  if (matches2) {
    return matches2.call(element2, selector);
  } else {
    return [].indexOf.call(document.querySelectorAll(selector), element2) !== -1;
  }
}
var isColEName = new RegExp("]");
var Base = (
  /** @class */
  function() {
    function Base2(options, element2) {
      this.isRendered = false;
      this.isComplexArraySetter = false;
      this.isServerRendered = false;
      this.allowServerDataBinding = true;
      this.isProtectedOnChange = true;
      this.properties = {};
      this.changedProperties = {};
      this.oldProperties = {};
      this.bulkChanges = {};
      this.refreshing = false;
      this.ignoreCollectionWatch = false;
      this.finalUpdate = function() {
      };
      this.childChangedProperties = {};
      this.modelObserver = new Observer(this);
      if (!isUndefined(element2)) {
        if ("string" === typeof element2) {
          this.element = document.querySelector(element2);
        } else {
          this.element = element2;
        }
        if (!isNullOrUndefined(this.element)) {
          this.isProtectedOnChange = false;
          this.addInstance();
        }
      }
      if (!isUndefined(options)) {
        this.setProperties(options, true);
      }
      this.isDestroyed = false;
    }
    Base2.prototype.setProperties = function(prop, muteOnChange) {
      var prevDetection = this.isProtectedOnChange;
      this.isProtectedOnChange = !!muteOnChange;
      merge(this, prop);
      if (muteOnChange !== true) {
        merge(this.changedProperties, prop);
        this.dataBind();
      }
      this.finalUpdate();
      this.changedProperties = {};
      this.oldProperties = {};
      this.isProtectedOnChange = prevDetection;
    };
    Base2.callChildDataBind = function(obj, parent) {
      var keys2 = Object.keys(obj);
      for (var _i = 0, keys_1 = keys2; _i < keys_1.length; _i++) {
        var key = keys_1[_i];
        if (parent["" + key] instanceof Array) {
          for (var _a = 0, _b = parent["" + key]; _a < _b.length; _a++) {
            var obj_1 = _b[_a];
            if (obj_1.dataBind !== void 0) {
              obj_1.dataBind();
            }
          }
        } else {
          parent["" + key].dataBind();
        }
      }
    };
    Base2.prototype.clearChanges = function() {
      this.finalUpdate();
      this.changedProperties = {};
      this.oldProperties = {};
      this.childChangedProperties = {};
    };
    Base2.prototype.dataBind = function() {
      Base2.callChildDataBind(this.childChangedProperties, this);
      if (Object.getOwnPropertyNames(this.changedProperties).length) {
        var prevDetection = this.isProtectedOnChange;
        var newChanges = this.changedProperties;
        var oldChanges = this.oldProperties;
        this.clearChanges();
        this.isProtectedOnChange = true;
        this.onPropertyChanged(newChanges, oldChanges);
        this.isProtectedOnChange = prevDetection;
      }
    };
    Base2.prototype.serverDataBind = function(newChanges) {
      {
        return;
      }
    };
    Base2.prototype.saveChanges = function(key, newValue, oldValue) {
      if (this.isProtectedOnChange) {
        return;
      }
      this.oldProperties["" + key] = oldValue;
      this.changedProperties["" + key] = newValue;
      this.finalUpdate();
      this.finalUpdate = setImmediate(this.dataBind.bind(this));
    };
    Base2.prototype.addEventListener = function(eventName, handler) {
      this.modelObserver.on(eventName, handler);
    };
    Base2.prototype.removeEventListener = function(eventName, handler) {
      this.modelObserver.off(eventName, handler);
    };
    Base2.prototype.trigger = function(eventName, eventProp, successHandler, errorHandler) {
      var _this = this;
      if (this.isDestroyed !== true) {
        var prevDetection = this.isProtectedOnChange;
        this.isProtectedOnChange = false;
        var data = this.modelObserver.notify(eventName, eventProp, successHandler, errorHandler);
        if (isColEName.test(eventName)) {
          var handler = getValue(eventName, this);
          if (handler) {
            var blazor = "Blazor";
            if (window["" + blazor]) {
              var promise = handler.call(this, eventProp);
              if (promise && typeof promise.then === "function") {
                if (!successHandler) {
                  data = promise;
                } else {
                  promise.then(function(data2) {
                    if (successHandler) {
                      data2 = typeof data2 === "string" && _this.modelObserver.isJson(data2) ? JSON.parse(data2) : data2;
                      successHandler.call(_this, data2);
                    }
                  }).catch(function(data2) {
                    if (errorHandler) {
                      data2 = typeof data2 === "string" && _this.modelObserver.isJson(data2) ? JSON.parse(data2) : data2;
                      errorHandler.call(_this, data2);
                    }
                  });
                }
              } else if (successHandler) {
                successHandler.call(this, eventProp);
              }
            } else {
              handler.call(this, eventProp);
              if (successHandler) {
                successHandler.call(this, eventProp);
              }
            }
          } else if (successHandler) {
            successHandler.call(this, eventProp);
          }
        }
        this.isProtectedOnChange = prevDetection;
        return data;
      }
    };
    Base2.prototype.addInstance = function() {
      var moduleClass = "e-" + this.getModuleName().toLowerCase();
      addClass([this.element], ["e-lib", moduleClass]);
      if (!isNullOrUndefined(this.element.ej2_instances)) {
        this.element.ej2_instances.push(this);
      } else {
        setValue("ej2_instances", [this], this.element);
      }
    };
    Base2.prototype.destroy = function() {
      var _this = this;
      this.element.ej2_instances = this.element.ej2_instances.filter(function(i) {
        return i !== _this;
      });
      removeClass([this.element], ["e-" + this.getModuleName()]);
      if (this.element.ej2_instances.length === 0) {
        removeClass([this.element], ["e-lib"]);
      }
      this.clearChanges();
      this.modelObserver.destroy();
      this.isDestroyed = true;
    };
    return Base2;
  }()
);
function getComponent(elem, comp) {
  var instance;
  var i;
  var ele = typeof elem === "string" ? document.getElementById(elem) : elem;
  for (i = 0; i < ele.ej2_instances.length; i++) {
    instance = ele.ej2_instances[parseInt(i.toString(), 10)];
    if (typeof comp === "string") {
      var compName = instance.getModuleName();
      if (comp === compName) {
        return instance;
      }
    } else {
      if (instance instanceof comp) {
        return instance;
      }
    }
  }
  return void 0;
}
function getObject(instance, curKey, defaultValue, type) {
  if (!instance.properties.hasOwnProperty(curKey) || !(instance.properties[curKey] instanceof type)) {
    instance.properties["" + curKey] = createInstance(type, [instance, curKey, defaultValue]);
  }
  return instance.properties["" + curKey];
}
function getObjectArray(instance, curKey, defaultValue, type, isSetter, isFactory) {
  var result = [];
  var len = defaultValue ? defaultValue.length : 0;
  for (var i = 0; i < len; i++) {
    var curType = type;
    if (isFactory) {
      curType = type(defaultValue[parseInt(i.toString(), 10)], instance);
    }
    if (isSetter) {
      var inst = createInstance(curType, [instance, curKey, {}, true]);
      inst.setProperties(defaultValue[parseInt(i.toString(), 10)], true);
      result.push(inst);
    } else {
      result.push(createInstance(curType, [instance, curKey, defaultValue[parseInt(i.toString(), 10)], false]));
    }
  }
  return result;
}
function propertyGetter(defaultValue, curKey) {
  return function() {
    if (!this.properties.hasOwnProperty(curKey)) {
      this.properties["" + curKey] = defaultValue;
    }
    return this.properties["" + curKey];
  };
}
function propertySetter(defaultValue, curKey) {
  return function(newValue) {
    if (this.properties["" + curKey] !== newValue) {
      var oldVal = this.properties.hasOwnProperty(curKey) ? this.properties[curKey] : defaultValue;
      this.saveChanges(curKey, newValue, oldVal);
      this.properties["" + curKey] = newValue;
    }
  };
}
function complexGetter(defaultValue, curKey, type) {
  return function() {
    return getObject(this, curKey, defaultValue, type);
  };
}
function complexSetter(defaultValue, curKey, type) {
  return function(newValue) {
    getObject(this, curKey, defaultValue, type).setProperties(newValue);
  };
}
function complexArrayGetter(defaultValue, curKey, type) {
  return function() {
    var _this = this;
    if (!this.properties.hasOwnProperty(curKey)) {
      var defCollection = getObjectArray(this, curKey, defaultValue, type, false);
      this.properties["" + curKey] = defCollection;
    }
    var ignore = this.controlParent !== void 0 && this.controlParent.ignoreCollectionWatch || this.ignoreCollectionWatch;
    if (!this.properties[curKey].hasOwnProperty("push") && !ignore) {
      ["push", "pop"].forEach(function(extendFunc) {
        var descriptor = {
          value: complexArrayDefinedCallback(extendFunc, curKey, type, _this.properties["" + curKey]).bind(_this),
          configurable: true
        };
        Object.defineProperty(_this.properties["" + curKey], extendFunc, descriptor);
      });
    }
    if (!this.properties[curKey].hasOwnProperty("isComplexArray")) {
      Object.defineProperty(this.properties["" + curKey], "isComplexArray", { value: true });
    }
    return this.properties["" + curKey];
  };
}
function complexArraySetter(defaultValue, curKey, type) {
  return function(newValue) {
    this.isComplexArraySetter = true;
    var oldValueCollection = getObjectArray(this, curKey, defaultValue, type, false);
    var newValCollection = getObjectArray(this, curKey, newValue, type, true);
    this.isComplexArraySetter = false;
    this.saveChanges(curKey, newValCollection, oldValueCollection);
    this.properties["" + curKey] = newValCollection;
  };
}
function complexArrayDefinedCallback(dFunc, curKey, type, prop) {
  return function() {
    var newValue = [];
    for (var _i = 0; _i < arguments.length; _i++) {
      newValue[_i] = arguments[_i];
    }
    var keyString = this.propName ? this.getParentKey() + "." + curKey + "-" : curKey + "-";
    switch (dFunc) {
      case "push":
        for (var i = 0; i < newValue.length; i++) {
          Array.prototype["" + dFunc].apply(prop, [newValue[parseInt(i.toString(), 10)]]);
          var model_1 = getArrayModel(keyString + (prop.length - 1), newValue[parseInt(i.toString(), 10)], !this.controlParent, dFunc);
          this.serverDataBind(model_1, newValue[parseInt(i.toString(), 10)], false, dFunc);
        }
        break;
      case "pop":
        Array.prototype["" + dFunc].apply(prop);
        var model = getArrayModel(keyString + prop.length, null, !this.controlParent, dFunc);
        this.serverDataBind(model, { ejsAction: "pop" }, false, dFunc);
        break;
    }
    return prop;
  };
}
function getArrayModel(keyString, value, isControlParent, arrayFunction) {
  var modelObject = keyString;
  if (isControlParent) {
    modelObject = {};
    modelObject["" + keyString] = value;
    if (value && typeof value === "object") {
      var action = "ejsAction";
      modelObject["" + keyString]["" + action] = arrayFunction;
    }
  }
  return modelObject;
}
function Property(defaultValue) {
  return function(target, key) {
    var propertyDescriptor = {
      set: propertySetter(defaultValue, key),
      get: propertyGetter(defaultValue, key),
      enumerable: true,
      configurable: true
    };
    Object.defineProperty(target, key, propertyDescriptor);
    addPropertyCollection(target, key, "prop", defaultValue);
  };
}
function Complex(defaultValue, type) {
  return function(target, key) {
    var propertyDescriptor = {
      set: complexSetter(defaultValue, key, type),
      get: complexGetter(defaultValue, key, type),
      enumerable: true,
      configurable: true
    };
    Object.defineProperty(target, key, propertyDescriptor);
    addPropertyCollection(target, key, "complexProp", defaultValue, type);
  };
}
function Collection(defaultValue, type) {
  return function(target, key) {
    var propertyDescriptor = {
      set: complexArraySetter(defaultValue, key, type),
      get: complexArrayGetter(defaultValue, key, type),
      enumerable: true,
      configurable: true
    };
    Object.defineProperty(target, key, propertyDescriptor);
    addPropertyCollection(target, key, "colProp", defaultValue, type);
  };
}
function Event$1() {
  return function(target, key) {
    var eventDescriptor = {
      set: function(newValue) {
        var oldValue = this.properties["" + key];
        if (oldValue !== newValue) {
          var finalContext = getParentContext(this, key);
          if (isUndefined(oldValue) === false) {
            finalContext.context.removeEventListener(finalContext.prefix, oldValue);
          }
          finalContext.context.addEventListener(finalContext.prefix, newValue);
          this.properties["" + key] = newValue;
        }
      },
      get: propertyGetter(void 0, key),
      enumerable: true,
      configurable: true
    };
    Object.defineProperty(target, key, eventDescriptor);
    addPropertyCollection(target, key, "event");
  };
}
function NotifyPropertyChanges(classConstructor) {
}
function addPropertyCollection(target, key, propertyType, defaultValue, type) {
  if (isUndefined(target.propList)) {
    target.propList = {
      props: [],
      complexProps: [],
      colProps: [],
      events: [],
      propNames: [],
      complexPropNames: [],
      colPropNames: [],
      eventNames: []
    };
  }
  target.propList[propertyType + "s"].push({
    propertyName: key,
    defaultValue,
    type
  });
  target.propList[propertyType + "Names"].push(key);
}
function getParentContext(context, prefix) {
  if (context.hasOwnProperty("parentObj") === false) {
    return { context, prefix };
  } else {
    var curText = getValue("propName", context);
    if (curText) {
      prefix = curText + "-" + prefix;
    }
    return getParentContext(getValue("parentObj", context), prefix);
  }
}
var __extends$$ = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$P = globalThis && globalThis.__decorate || function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i = decorators.length - 1; i >= 0; i--)
      if (d = decorators[i])
        r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var Animation$1 = (
  /** @class */
  function(_super) {
    __extends$$(Animation2, _super);
    function Animation2(options) {
      var _this = _super.call(this, options, void 0) || this;
      _this.easing = {
        ease: "cubic-bezier(0.250, 0.100, 0.250, 1.000)",
        linear: "cubic-bezier(0.250, 0.250, 0.750, 0.750)",
        easeIn: "cubic-bezier(0.420, 0.000, 1.000, 1.000)",
        easeOut: "cubic-bezier(0.000, 0.000, 0.580, 1.000)",
        easeInOut: "cubic-bezier(0.420, 0.000, 0.580, 1.000)",
        elasticInOut: "cubic-bezier(0.5,-0.58,0.38,1.81)",
        elasticIn: "cubic-bezier(0.17,0.67,0.59,1.81)",
        elasticOut: "cubic-bezier(0.7,-0.75,0.99,1.01)"
      };
      return _this;
    }
    Animation_1 = Animation2;
    Animation2.prototype.animate = function(element2, options) {
      options = !options ? {} : options;
      var model = this.getModel(options);
      if (typeof element2 === "string") {
        var elements = Array.prototype.slice.call(selectAll(element2, document));
        for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {
          var element_1 = elements_1[_i];
          model.element = element_1;
          Animation_1.delayAnimation(model);
        }
      } else {
        model.element = element2;
        Animation_1.delayAnimation(model);
      }
    };
    Animation2.stop = function(element2, model) {
      element2.style.animation = "";
      element2.removeAttribute("e-animate");
      var animationId = element2.getAttribute("e-animation-id");
      if (animationId) {
        var frameId = parseInt(animationId, 10);
        cancelAnimationFrame(frameId);
        element2.removeAttribute("e-animation-id");
      }
      if (model && model.end) {
        model.end.call(this, model);
      }
    };
    Animation2.delayAnimation = function(model) {
      if (animationMode === "Disable") {
        if (model.begin) {
          model.begin.call(this, model);
        }
        if (model.end) {
          model.end.call(this, model);
        }
      } else {
        if (model.delay) {
          setTimeout(function() {
            Animation_1.applyAnimation(model);
          }, model.delay);
        } else {
          Animation_1.applyAnimation(model);
        }
      }
    };
    Animation2.applyAnimation = function(model) {
      var _this = this;
      model.timeStamp = 0;
      var step = 0;
      var timerId = 0;
      var prevTimeStamp = 0;
      var duration = model.duration;
      model.element.setAttribute("e-animate", "true");
      var startAnimation = function(timeStamp) {
        try {
          if (timeStamp) {
            prevTimeStamp = prevTimeStamp === 0 ? timeStamp : prevTimeStamp;
            model.timeStamp = timeStamp + model.timeStamp - prevTimeStamp;
            prevTimeStamp = timeStamp;
            if (!step && model.begin) {
              model.begin.call(_this, model);
            }
            step = step + 1;
            var avg = model.timeStamp / step;
            if (model.timeStamp < duration && model.timeStamp + avg < duration && model.element.getAttribute("e-animate")) {
              model.element.style.animation = model.name + " " + model.duration + "ms " + model.timingFunction;
              if (model.progress) {
                model.progress.call(_this, model);
              }
              requestAnimationFrame(startAnimation);
            } else {
              cancelAnimationFrame(timerId);
              model.element.removeAttribute("e-animation-id");
              model.element.removeAttribute("e-animate");
              model.element.style.animation = "";
              if (model.end) {
                model.end.call(_this, model);
              }
            }
          } else {
            timerId = requestAnimationFrame(startAnimation);
            model.element.setAttribute("e-animation-id", timerId.toString());
          }
        } catch (e) {
          cancelAnimationFrame(timerId);
          model.element.removeAttribute("e-animation-id");
          if (model.fail) {
            model.fail.call(_this, e);
          }
        }
      };
      startAnimation();
    };
    Animation2.prototype.getModel = function(options) {
      return {
        name: options.name || this.name,
        delay: options.delay || this.delay,
        duration: options.duration !== void 0 ? options.duration : this.duration,
        begin: options.begin || this.begin,
        end: options.end || this.end,
        fail: options.fail || this.fail,
        progress: options.progress || this.progress,
        timingFunction: this.easing[options.timingFunction] ? this.easing[options.timingFunction] : options.timingFunction || this.easing[this.timingFunction]
      };
    };
    Animation2.prototype.onPropertyChanged = function(newProp, oldProp) {
    };
    Animation2.prototype.getModuleName = function() {
      return "animation";
    };
    Animation2.prototype.destroy = function() {
    };
    var Animation_1;
    __decorate$P([
      Property("FadeIn")
    ], Animation2.prototype, "name", void 0);
    __decorate$P([
      Property(400)
    ], Animation2.prototype, "duration", void 0);
    __decorate$P([
      Property("ease")
    ], Animation2.prototype, "timingFunction", void 0);
    __decorate$P([
      Property(0)
    ], Animation2.prototype, "delay", void 0);
    __decorate$P([
      Event$1()
    ], Animation2.prototype, "progress", void 0);
    __decorate$P([
      Event$1()
    ], Animation2.prototype, "begin", void 0);
    __decorate$P([
      Event$1()
    ], Animation2.prototype, "end", void 0);
    __decorate$P([
      Event$1()
    ], Animation2.prototype, "fail", void 0);
    Animation2 = Animation_1 = __decorate$P([
      NotifyPropertyChanges
    ], Animation2);
    return Animation2;
  }(Base)
);
function rippleEffect(element2, rippleOptions, done) {
  var rippleModel = getRippleModel(rippleOptions);
  if (rippleModel.rippleFlag === false || rippleModel.rippleFlag === void 0 && !isRippleEnabled) {
    return function() {
    };
  }
  element2.setAttribute("data-ripple", "true");
  EventHandler.add(element2, "mousedown", rippleHandler, { parent: element2, rippleOptions: rippleModel });
  EventHandler.add(element2, "mouseup", rippleUpHandler, { parent: element2, rippleOptions: rippleModel, done });
  EventHandler.add(element2, "mouseleave", rippleLeaveHandler, { parent: element2, rippleOptions: rippleModel });
  if (Browser.isPointer) {
    EventHandler.add(element2, "transitionend", rippleLeaveHandler, { parent: element2, rippleOptions: rippleModel });
  }
  return function() {
    element2.removeAttribute("data-ripple");
    EventHandler.remove(element2, "mousedown", rippleHandler);
    EventHandler.remove(element2, "mouseup", rippleUpHandler);
    EventHandler.remove(element2, "mouseleave", rippleLeaveHandler);
    EventHandler.remove(element2, "transitionend", rippleLeaveHandler);
  };
}
function getRippleModel(rippleOptions) {
  var rippleModel = {
    selector: rippleOptions && rippleOptions.selector ? rippleOptions.selector : null,
    ignore: rippleOptions && rippleOptions.ignore ? rippleOptions.ignore : null,
    rippleFlag: rippleOptions && rippleOptions.rippleFlag,
    isCenterRipple: rippleOptions && rippleOptions.isCenterRipple,
    duration: rippleOptions && rippleOptions.duration ? rippleOptions.duration : 350
  };
  return rippleModel;
}
function rippleHandler(e) {
  var target = e.target;
  var selector = this.rippleOptions.selector;
  var element2 = selector ? closest(target, selector) : target;
  if (!element2 || this.rippleOptions && closest(target, this.rippleOptions.ignore)) {
    return;
  }
  var offset = element2.getBoundingClientRect();
  var offsetX = e.pageX - document.body.scrollLeft;
  var offsetY = e.pageY - (!document.body.scrollTop && document.documentElement ? document.documentElement.scrollTop : document.body.scrollTop);
  var pageX = Math.max(Math.abs(offsetX - offset.left), Math.abs(offsetX - offset.right));
  var pageY = Math.max(Math.abs(offsetY - offset.top), Math.abs(offsetY - offset.bottom));
  var radius = Math.sqrt(pageX * pageX + pageY * pageY);
  var diameter = radius * 2 + "px";
  var x = offsetX - offset.left - radius;
  var y = offsetY - offset.top - radius;
  if (this.rippleOptions && this.rippleOptions.isCenterRipple) {
    x = 0;
    y = 0;
    diameter = "100%";
  }
  element2.classList.add("e-ripple");
  var duration = this.rippleOptions.duration.toString();
  var styles = "width: " + diameter + ";height: " + diameter + ";left: " + x + "px;top: " + y + "px;transition-duration: " + duration + "ms;";
  var rippleElement = createElement("div", { className: "e-ripple-element", styles });
  element2.appendChild(rippleElement);
  window.getComputedStyle(rippleElement).getPropertyValue("opacity");
  rippleElement.style.transform = "scale(1)";
  if (element2 !== this.parent) {
    EventHandler.add(element2, "mouseleave", rippleLeaveHandler, { parent: this.parent, rippleOptions: this.rippleOptions });
  }
}
function rippleUpHandler(e) {
  removeRipple(e, this);
}
function rippleLeaveHandler(e) {
  removeRipple(e, this);
}
function removeRipple(e, eventArgs) {
  var duration = eventArgs.rippleOptions.duration;
  var target = e.target;
  var selector = eventArgs.rippleOptions.selector;
  var element2 = selector ? closest(target, selector) : target;
  if (!element2 || element2 && element2.className.indexOf("e-ripple") === -1) {
    return;
  }
  var rippleElements = selectAll(".e-ripple-element", element2);
  var rippleElement = rippleElements[rippleElements.length - 1];
  if (rippleElement) {
    rippleElement.style.opacity = "0.5";
  }
  if (eventArgs.parent !== element2) {
    EventHandler.remove(element2, "mouseleave", rippleLeaveHandler);
  }
  setTimeout(function() {
    if (rippleElement && rippleElement.parentNode) {
      rippleElement.parentNode.removeChild(rippleElement);
    }
    if (!element2.getElementsByClassName("e-ripple-element").length) {
      element2.classList.remove("e-ripple");
    }
    if (eventArgs.done) {
      eventArgs.done(e);
    }
  }, duration);
}
var isRippleEnabled = false;
var animationMode = "";
var MODULE_SUFFIX = "Module";
var ModuleLoader = (
  /** @class */
  function() {
    function ModuleLoader2(parent) {
      this.loadedModules = [];
      this.parent = parent;
    }
    ModuleLoader2.prototype.inject = function(requiredModules, moduleList) {
      var reqLength = requiredModules.length;
      if (reqLength === 0) {
        this.clean();
        return;
      }
      if (this.loadedModules.length) {
        this.clearUnusedModule(requiredModules);
      }
      for (var i = 0; i < reqLength; i++) {
        var modl = requiredModules[parseInt(i.toString(), 10)];
        for (var _i = 0, moduleList_1 = moduleList; _i < moduleList_1.length; _i++) {
          var module = moduleList_1[_i];
          var modName = modl.member;
          if (module && module.prototype.getModuleName() === modl.member && !this.isModuleLoaded(modName)) {
            var moduleObject = createInstance(module, modl.args);
            var memberName = this.getMemberName(modName);
            if (modl.isProperty) {
              setValue(memberName, module, this.parent);
            } else {
              setValue(memberName, moduleObject, this.parent);
            }
            var loadedModule = modl;
            loadedModule.member = memberName;
            this.loadedModules.push(loadedModule);
          }
        }
      }
    };
    ModuleLoader2.prototype.clean = function() {
      for (var _i = 0, _a = this.loadedModules; _i < _a.length; _i++) {
        var modules = _a[_i];
        if (!modules.isProperty) {
          getValue(modules.member, this.parent).destroy();
        }
      }
      this.loadedModules = [];
    };
    ModuleLoader2.prototype.clearUnusedModule = function(moduleList) {
      var _this = this;
      var usedModules = moduleList.map(function(arg) {
        return _this.getMemberName(arg.member);
      });
      var removableModule = this.loadedModules.filter(function(module) {
        return usedModules.indexOf(module.member) === -1;
      });
      for (var _i = 0, removableModule_1 = removableModule; _i < removableModule_1.length; _i++) {
        var mod = removableModule_1[_i];
        if (!mod.isProperty) {
          getValue(mod.member, this.parent).destroy();
        }
        this.loadedModules.splice(this.loadedModules.indexOf(mod), 1);
        deleteObject(this.parent, mod.member);
      }
    };
    ModuleLoader2.prototype.getMemberName = function(name) {
      return name[0].toLowerCase() + name.substring(1) + MODULE_SUFFIX;
    };
    ModuleLoader2.prototype.isModuleLoaded = function(modName) {
      for (var _i = 0, _a = this.loadedModules; _i < _a.length; _i++) {
        var mod = _a[_i];
        if (mod.member === this.getMemberName(modName)) {
          return true;
        }
      }
      return false;
    };
    return ModuleLoader2;
  }()
);
var ChildProperty = (
  /** @class */
  function() {
    function ChildProperty2(parent, propName, defaultValue, isArray2) {
      this.isComplexArraySetter = false;
      this.properties = {};
      this.changedProperties = {};
      this.childChangedProperties = {};
      this.oldProperties = {};
      this.finalUpdate = function() {
      };
      this.callChildDataBind = getValue("callChildDataBind", Base);
      this.parentObj = parent;
      this.controlParent = this.parentObj.controlParent || this.parentObj;
      this.propName = propName;
      this.isParentArray = isArray2;
      this.setProperties(defaultValue, true);
    }
    ChildProperty2.prototype.updateChange = function(val, propName) {
      if (val === true) {
        this.parentObj.childChangedProperties["" + propName] = val;
      } else {
        delete this.parentObj.childChangedProperties["" + propName];
      }
      if (this.parentObj.updateChange) {
        this.parentObj.updateChange(val, this.parentObj.propName);
      }
    };
    ChildProperty2.prototype.updateTimeOut = function() {
      if (this.parentObj.updateTimeOut) {
        this.parentObj.finalUpdate();
        this.parentObj.updateTimeOut();
      } else {
        var changeTime_1 = setTimeout(this.parentObj.dataBind.bind(this.parentObj));
        var clearUpdate = function() {
          clearTimeout(changeTime_1);
        };
        this.finalUpdate = clearUpdate;
      }
    };
    ChildProperty2.prototype.clearChanges = function() {
      this.finalUpdate();
      this.updateChange(false, this.propName);
      this.oldProperties = {};
      this.changedProperties = {};
    };
    ChildProperty2.prototype.setProperties = function(prop, muteOnChange) {
      if (muteOnChange === true) {
        merge(this, prop);
        this.updateChange(false, this.propName);
        this.clearChanges();
      } else {
        merge(this, prop);
      }
    };
    ChildProperty2.prototype.dataBind = function() {
      this.callChildDataBind(this.childChangedProperties, this);
      if (this.isParentArray) {
        var curIndex = this.parentObj[this.propName].indexOf(this);
        if (Object.keys(this.changedProperties).length) {
          setValue(this.propName + "." + curIndex, this.changedProperties, this.parentObj.changedProperties);
          setValue(this.propName + "." + curIndex, this.oldProperties, this.parentObj.oldProperties);
        }
      } else {
        this.parentObj.changedProperties[this.propName] = this.changedProperties;
        this.parentObj.oldProperties[this.propName] = this.oldProperties;
      }
      this.clearChanges();
    };
    ChildProperty2.prototype.saveChanges = function(key, newValue, oldValue, restrictServerDataBind) {
      if (this.controlParent.isProtectedOnChange) {
        return;
      }
      if (!restrictServerDataBind) {
        this.serverDataBind(key, newValue, true);
      }
      this.oldProperties["" + key] = oldValue;
      this.changedProperties["" + key] = newValue;
      this.updateChange(true, this.propName);
      this.finalUpdate();
      this.updateTimeOut();
    };
    ChildProperty2.prototype.serverDataBind = function(key, value, isSaveChanges, action) {
    };
    ChildProperty2.prototype.getParentKey = function(isSaveChanges) {
      var index = "";
      var propName = this.propName;
      if (this.isParentArray) {
        index = this.parentObj[this.propName].indexOf(this);
        var valueLength = this.parentObj[this.propName].length;
        valueLength = isSaveChanges ? valueLength : valueLength > 0 ? valueLength - 1 : 0;
        index = index !== -1 ? "-" + index : "-" + valueLength;
        propName = propName + index;
      }
      if (this.controlParent !== this.parentObj) {
        propName = this.parentObj.getParentKey() + "." + this.propName + index;
      }
      return propName;
    };
    return ChildProperty2;
  }()
);
var componentList = ["grid", "pivotview", "treegrid", "spreadsheet", "rangeNavigator", "DocumentEditor", "listbox", "inplaceeditor", "PdfViewer", "richtexteditor", "DashboardLayout", "chart", "stockChart", "circulargauge", "diagram", "heatmap", "lineargauge", "maps", "slider", "smithchart", "barcode", "sparkline", "treemap", "bulletChart", "kanban", "daterangepicker", "schedule", "gantt", "signature", "query-builder", "drop-down-tree", "carousel", "filemanager", "uploader", "accordion", "tab", "treeview"];
var bypassKey = [
  115,
  121,
  110,
  99,
  102,
  117,
  115,
  105,
  111,
  110,
  46,
  105,
  115,
  76,
  105,
  99,
  86,
  97,
  108,
  105,
  100,
  97,
  116,
  101,
  100
];
var accountURL;
var LicenseValidator = (
  /** @class */
  function() {
    function LicenseValidator2(key) {
      this.isValidated = false;
      this.isLicensed = true;
      this.version = "21.1";
      this.platform = /JavaScript|ASPNET|ASPNETCORE|ASPNETMVC|FileFormats/i;
      this.errors = {
        noLicense: "<span>This application was built using a trial version of Syncfusion Essential Studio. To remove the license validation message permanently, a valid license key must be included.</span>",
        trailExpired: "<span>This application was built using a trial version of Syncfusion Essential Studio. To remove the license validation message permanently, a valid license key must be included.</span>",
        versionMismatched: "<span>The included Syncfusion license key is invalid.</span>",
        platformMismatched: "<span>The included Syncfusion license key is invalid.</span>",
        invalidKey: "<span>The included Syncfusion license key is invalid.</span>"
      };
      this.manager = function() {
        var licKey = null;
        function set2(key2) {
          licKey = key2;
        }
        function get2() {
          return licKey;
        }
        return {
          setKey: set2,
          getKey: get2
        };
      }();
      this.npxManager = function() {
        var npxLicKey = "npxKeyReplace";
        function get2() {
          return npxLicKey;
        }
        return {
          getKey: get2
        };
      }();
      this.manager.setKey(key);
    }
    LicenseValidator2.prototype.validate = function() {
      var contentKey = [
        115,
        121,
        110,
        99,
        102,
        117,
        115,
        105,
        111,
        110,
        46,
        108,
        105,
        99,
        101,
        110,
        115,
        101,
        67,
        111,
        110,
        116,
        101,
        110,
        116
      ];
      var URLKey = [
        115,
        121,
        110,
        99,
        102,
        117,
        115,
        105,
        111,
        110,
        46,
        99,
        108,
        97,
        105,
        109,
        65,
        99,
        99,
        111,
        117,
        110,
        116,
        85,
        82,
        76
      ];
      if (!this.isValidated && (containerObject && !getValue(convertToChar(bypassKey), containerObject) && !getValue("Blazor", containerObject))) {
        var validateMsg = void 0;
        var validateURL = void 0;
        if (this.manager && this.manager.getKey() || this.npxManager && this.npxManager.getKey() !== "npxKeyReplace") {
          var result = this.getInfoFromKey();
          if (result && result.length) {
            for (var _i = 0, result_1 = result; _i < result_1.length; _i++) {
              var res = result_1[_i];
              if (!this.platform.test(res.platform) || res.invalidPlatform) {
                validateMsg = this.errors.platformMismatched;
              } else if (res.version.indexOf(this.version) === -1) {
                validateMsg = this.errors.versionMismatched;
                validateMsg = validateMsg.replace("##LicenseVersion", res.version);
                validateMsg = validateMsg.replace("##Requireversion", this.version + ".x");
              } else if (res.expiryDate) {
                var expDate = new Date(res.expiryDate);
                var currDate = /* @__PURE__ */ new Date();
                if (expDate !== currDate && expDate < currDate) {
                  validateMsg = this.errors.trailExpired;
                } else {
                  break;
                }
              }
            }
          } else {
            validateMsg = this.errors.invalidKey;
          }
        } else {
          var licenseContent = getValue(convertToChar(contentKey), containerObject);
          validateURL = getValue(convertToChar(URLKey), containerObject);
          if (licenseContent && licenseContent !== "") {
            validateMsg = licenseContent;
          } else {
            validateMsg = this.errors.noLicense;
          }
        }
        if (validateMsg && typeof document !== "undefined" && !isNullOrUndefined(document)) {
          accountURL = validateURL && validateURL !== "" ? validateURL : "https://www.syncfusion.com/account/claim-license-key?pl=SmF2YVNjcmlwdA==&vs=MjEuMQ==";
          var errorDiv = createElement("div", {
            innerHTML: `<img src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwXzE5OV80KSI+CjxwYXRoIGQ9Ik0xMiAyMUMxNi45NzA2IDIxIDIxIDE2Ljk3MDYgMjEgMTJDMjEgNy4wMjk0NCAxNi45NzA2IDMgMTIgM0M3LjAyOTQ0IDMgMyA3LjAyOTQ0IDMgMTJDMyAxNi45NzA2IDcuMDI5NDQgMjEgMTIgMjFaIiBzdHJva2U9IiM3MzczNzMiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0xMS4yNSAxMS4yNUgxMlYxNi41SDEyLjc1IiBmaWxsPSIjNjE2MDYzIi8+CjxwYXRoIGQ9Ik0xMS4yNSAxMS4yNUgxMlYxNi41SDEyLjc1IiBzdHJva2U9IiM3MzczNzMiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0xMS44MTI1IDlDMTIuNDMzOCA5IDEyLjkzNzUgOC40OTYzMiAxMi45Mzc1IDcuODc1QzEyLjkzNzUgNy4yNTM2OCAxMi40MzM4IDYuNzUgMTEuODEyNSA2Ljc1QzExLjE5MTIgNi43NSAxMC42ODc1IDcuMjUzNjggMTAuNjg3NSA3Ljg3NUMxMC42ODc1IDguNDk2MzIgMTEuMTkxMiA5IDExLjgxMjUgOVoiIGZpbGw9IiM3MzczNzMiLz4KPC9nPgo8ZGVmcz4KPGNsaXBQYXRoIGlkPSJjbGlwMF8xOTlfNCI+CjxyZWN0IHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgZmlsbD0id2hpdGUiLz4KPC9jbGlwUGF0aD4KPC9kZWZzPgo8L3N2Zz4K' style="top: 6px;
                    position: absolute;
                    left: 16px;
                    width: 24px;
                    height: 24px;"/>` + validateMsg + ' <a style="text-decoration: none;color: #0D6EFD;font-weight: 500;" href=' + accountURL + ">Claim your free account</a>"
          });
          errorDiv.setAttribute("style", "position: fixed;\n                top: 10px;\n                left: 10px;\n                right: 10px;\n                font-size: 14px;\n                background: #EEF2FF;\n                color: #222222;\n                z-index: 999999999;\n                text-align: left;\n                border: 1px solid #EEEEEE;\n                padding: 10px 11px 10px 50px;\n                border-radius: 8px;\n                font-family: Helvetica Neue, Helvetica, Arial;");
          document.body.appendChild(errorDiv);
          this.isLicensed = false;
        }
        this.isValidated = true;
        setValue(convertToChar(bypassKey), this.isValidated, containerObject);
      }
      return this.isLicensed;
    };
    LicenseValidator2.prototype.getDecryptedData = function(key) {
      try {
        return atob(key);
      } catch (error) {
        return "";
      }
    };
    LicenseValidator2.prototype.getInfoFromKey = function() {
      try {
        var licKey = "";
        var pkey = [
          5439488,
          7929856,
          5111808,
          6488064,
          4587520,
          7667712,
          5439488,
          6881280,
          5177344,
          7208960,
          4194304,
          4456448,
          6619136,
          7733248,
          5242880,
          7077888,
          6356992,
          7602176,
          4587520,
          7274496,
          7471104,
          7143424
        ];
        var decryptedStr = [];
        var resultArray = [];
        var invalidPlatform = false;
        var isNpxKey = false;
        if (this.manager.getKey()) {
          licKey = this.manager.getKey();
        } else {
          isNpxKey = true;
          licKey = this.npxManager.getKey().split("npxKeyReplace")[1];
        }
        var licKeySplit = licKey.split(";");
        for (var _i = 0, licKeySplit_1 = licKeySplit; _i < licKeySplit_1.length; _i++) {
          var lKey = licKeySplit_1[_i];
          var decodeStr = this.getDecryptedData(lKey);
          if (!decodeStr) {
            continue;
          }
          var k = 0;
          var buffr = "";
          if (!isNpxKey) {
            for (var i = 0; i < decodeStr.length; i++, k++) {
              if (k === pkey.length) {
                k = 0;
              }
              var c = decodeStr.charCodeAt(i);
              buffr += String.fromCharCode(c ^ pkey[parseInt(k.toString(), 10)] >> 16);
            }
          } else {
            var charKey = decodeStr[decodeStr.length - 1];
            var decryptedKey = [];
            for (var i = 0; i < decodeStr.length; i++) {
              decryptedKey[parseInt(i.toString(), 10)] = decodeStr[parseInt(i.toString(), 10)].charCodeAt(0) - charKey.charCodeAt(0);
            }
            for (var i = 0; i < decryptedKey.length; i++) {
              buffr += String.fromCharCode(decryptedKey[parseInt(i.toString(), 10)]);
            }
          }
          if (this.platform.test(buffr)) {
            decryptedStr = buffr.split(";");
            invalidPlatform = false;
            if (decryptedStr.length > 3) {
              resultArray.push({
                platform: decryptedStr[0],
                version: decryptedStr[1],
                expiryDate: decryptedStr[2]
              });
            }
          } else if (buffr && buffr.split(";").length > 3) {
            invalidPlatform = true;
          }
        }
        if (invalidPlatform && !resultArray.length) {
          return [{ invalidPlatform }];
        } else {
          return resultArray.length ? resultArray : null;
        }
      } catch (error) {
        return null;
      }
    };
    return LicenseValidator2;
  }()
);
var licenseValidator = new LicenseValidator();
function convertToChar(cArr) {
  var ret = "";
  for (var _i = 0, cArr_1 = cArr; _i < cArr_1.length; _i++) {
    var arr = cArr_1[_i];
    ret += String.fromCharCode(arr);
  }
  return ret;
}
function registerLicense(key) {
  licenseValidator = new LicenseValidator(key);
}
var validateLicense = function(key) {
  if (key) {
    registerLicense(key);
  }
  return licenseValidator.validate();
};
var createLicenseOverlay = function() {
  var bannerTemplate = '\n    <div style="\n    position: fixed;\n    width: 100%;\n    height: 100%;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background-color: rgba(0, 0, 0, 0.5);\n    z-index: 99999;\n    ">\n        <div style="\n    background: #FFFFFF;\n    height: 455px;\n    width: 840px;\n    font-family: Helvetica Neue, Helvetica, Arial;\n    color: #000000;\n    box-shadow: 0px 4.8px 14.4px rgb(0 0 0 / 18%), 0px 25.6px 57.6px rgb(0 0 0 / 22%);\n    display: block;\n    margin: 8% auto;\n    border-radius: 20px;\n    ">\n            <div style="\n    position: absolute;\nwidth: 838px;\nheight: 62px;\nbackground-color: #F9F9F9;\nborder: 1px solid #EEEEEE;\nborder-top-left-radius: 20px;\nborder-top-right-radius: 20px;\n">\n                <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQ2IiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMTQ2IDMyIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNNDAuNTk2NSAxNS4wMDc4SDMyLjQyNUMzMS41NTU3IDE1LjAwNzggMzAuOTAzNyAxNS4xODEyIDMwLjUxMjUgMTUuNDg0NkMzMC4xMjEzIDE1LjgzMTQgMjkuOTA0IDE2LjMwODIgMjkuOTA0IDE3LjA0NTFDMjkuOTA0IDE3LjYwODYgMzAuMDc3OCAxOC4wNDIxIDMwLjQyNTYgMTguMzAyMkMzMC43NzMzIDE4LjYwNTYgMzEuMjk0OSAxOC43MzU2IDMxLjk5MDMgMTguNzM1NkgzNi4zMzY5QzM4LjExODkgMTguNzM1NiAzOS40MjI5IDE5LjA4MjQgNDAuMTYxOCAxOS43MzI2QzQwLjk0NDIgMjAuNDI2MiA0MS4yOTE5IDIxLjU1MzIgNDEuMjkxOSAyMy4xMTM3QzQxLjI5MTkgMjQuNzE3NiA0MC44NTcyIDI1Ljg4OCAzOS45ODc5IDI2LjY2ODJDMzkuMTE4NiAyNy40MDUxIDM3LjcyNzcgMjcuNzk1MyAzNS44NTg3IDI3Ljc5NTNIMjcuMDc4N1YyNS4wMjFIMzUuMzM3MkMzNi4yOTM0IDI1LjAyMSAzNi45NDU0IDI0Ljg5MSAzNy4zMzY2IDI0LjYzMDlDMzcuNzI3NyAyNC4zNzA4IDM3LjkwMTYgMjMuODk0IDM3LjkwMTYgMjMuMjg3MUMzNy45MDE2IDIyLjYzNjkgMzcuNzI3NyAyMi4xNjAxIDM3LjM4IDIxLjlDMzcuMDMyMyAyMS42Mzk5IDM2LjQyMzggMjEuNDY2NSAzNS41NTQ1IDIxLjQ2NjVIMzEuNjQyNkMyOS44NjA1IDIxLjQ2NjUgMjguNTEzMSAyMS4xMTk4IDI3LjY4NzMgMjAuMzgyOEMyNi44NjE0IDE5LjY0NTkgMjYuNDI2OCAxOC41MTg5IDI2LjQyNjggMTcuMDAxN0MyNi40MjY4IDE1LjM1NDUgMjYuODYxNCAxNC4xNDA4IDI3LjczMDcgMTMuMzYwNkMyOC42IDEyLjU4MDMgMjkuOTkwOSAxMi4yMzM1IDMxLjkwMzQgMTIuMjMzNUg0MC41OTY1VjE1LjAwNzhaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik00OC4wNzI3IDI1LjI4MTFINTAuNTA2OFYxNi4zOTQ5SDUzLjU0OTNWMjcuNTM1MkM1My41NDkzIDI5LjA1MjQgNTMuMjAxNiAzMC4xNzk0IDUyLjUwNjIgMzAuOTE2M0M1MS44MTA3IDMxLjY1MzIgNTAuNzI0MSAzMiA0OS4yNDYzIDMySDQzLjMzNVYyOS42NTkySDQ4LjcyNDdDNDkuMjg5NyAyOS42NTkyIDQ5Ljc2NzkgMjkuNTI5MiA1MC4wNzIxIDI5LjIyNThDNTAuMzc2NCAyOC45NjU3IDUwLjU1MDIgMjguNTMyMiA1MC41NTAyIDI4LjAxMlYyNy44Mzg2SDQ3Ljg5ODlDNDYuMjAzNyAyNy44Mzg2IDQ0Ljk0MzIgMjcuNDkxOSA0NC4yNDc4IDI2Ljg0MTZDNDMuNTA4OSAyNi4xNDgxIDQzLjE2MTEgMjUuMDY0NCA0My4xNjExIDIzLjQ2MDVWMTYuMzk0OUg0Ni4xNjAyVjIzLjIwMDVDNDYuMTYwMiAyNC4wNjc0IDQ2LjI5MDYgMjQuNjMwOSA0Ni41NTE0IDI0Ljg5MUM0Ni43MjUzIDI1LjE1MTEgNDcuMjQ2OSAyNS4yODExIDQ4LjA3MjcgMjUuMjgxMVoiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTU1Ljg5NjUgMTYuMzk0OUg2MS41OTA0QzYzLjMyOTEgMTYuMzk0OSA2NC41NDYxIDE2LjY5ODMgNjUuMjg1IDE3LjM0ODVDNjYuMDIzOSAxNy45OTg4IDY2LjM3MTYgMTkuMDgyNCA2Ni4zNzE2IDIwLjU1NjNWMjcuNzk1M0g2My4zMjkxVjIwLjk0NjRDNjMuMzI5MSAyMC4wNzk0IDYzLjE5ODcgMTkuNTE1OSA2Mi45Mzc5IDE5LjI5OTJDNjIuNjc3MSAxOS4wMzkxIDYyLjE1NTUgMTguOTA5MSA2MS4zMjk3IDE4LjkwOTFINTguODk1NlYyNy44Mzg2SDU1Ljg1M1YxNi4zOTQ5SDU1Ljg5NjVaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik03NC45MzQyIDI1LjM2NzhINzguMTUwNlYyNy43OTUySDc0LjAyMTRDNzIuOTc4MiAyNy43OTUyIDcyLjEwODkgMjcuNjY1MiA3MS40NTcgMjcuNDkxOEM3MC44MDUgMjcuMjc1IDcwLjE5NjUgMjYuOTI4MyA2OS43MTgzIDI2LjQ1MTRDNjkuMTk2OCAyNS45MzEzIDY4Ljc2MjEgMjUuMjgxMSA2OC40NTc4IDI0LjU0NDJDNjguMTUzNiAyMy44MDcyIDY4LjAyMzIgMjIuOTgzNiA2OC4wMjMyIDIyLjE2QzY4LjAyMzIgMjEuMjkzMSA2OC4xNTM2IDIwLjQ2OTUgNjguNDU3OCAxOS42ODkyQzY4Ljc2MjEgMTguOTA5IDY5LjE1MzMgMTguMzAyMSA2OS43MTgzIDE3Ljc4MTlDNzAuMjM5OSAxNy4zMDUxIDcwLjgwNSAxNi45NTgzIDcxLjUwMDQgMTYuNzQxNkM3Mi4xOTU5IDE2LjUyNDkgNzMuMDIxNyAxNi40MzgyIDc0LjA2NDkgMTYuNDM4Mkg3OC4xOTQxVjE4LjkwOUg3NC45MzQyQzczLjQ5OTggMTguOTA5IDcyLjU0MzYgMTkuMTY5MSA3MS45Nzg1IDE5LjY0NTlDNzEuNDU2OSAyMC4xMjI3IDcxLjE1MjcgMjAuOTg5NyA3MS4xNTI3IDIyLjIwMzRDNzEuMTUyNyAyMi44OTY5IDcxLjI4MzEgMjMuNDYwNSA3MS41MDA0IDIzLjkzNzNDNzEuNzE3NyAyNC40MTQxIDcyLjA2NTUgMjQuNzYwOSA3Mi41MDAxIDI1LjA2NDNDNzIuNzE3NCAyNS4xOTQ0IDcyLjk3ODIgMjUuMjgxMSA3My4yODI1IDI1LjM2NzhDNzMuNjMwMiAyNS4zMjQ0IDc0LjE1MTggMjUuMzY3OCA3NC45MzQyIDI1LjM2NzhaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik04MC44NDU2IDE4LjY0ODlINzguNjcyNFYxNi4zNTE1SDgwLjg0NTZWMTUuMTgxMUM4MC44NDU2IDE0LjAxMDggODEuMDYzIDEzLjIzMDUgODEuNDk3NiAxMi44NDA0QzgxLjkzMjMgMTIuNDUwMyA4Mi43NTgxIDEyLjIzMzUgODMuOTc1MSAxMi4yMzM1SDg2Ljg0MzhWMTQuNDAwOUg4NS40MDk1Qzg0Ljg4NzkgMTQuNDAwOSA4NC41NDAyIDE0LjQ4NzYgODQuMzIyOSAxNC42NjFDODQuMTA1NSAxNC44MzQ0IDgzLjk3NTEgMTUuMDk0NSA4My45NzUxIDE1LjQ0MTJWMTYuMzUxNUg4Ni44NDM4VjE4LjY0ODlIODMuOTc1MVYyNy43OTUzSDgwLjg0NTZWMTguNjQ4OVoiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTk4LjQwNTYgMjcuNzk1M0g5Mi43MTE2QzkxLjAxNjUgMjcuNzk1MyA4OS44NDI5IDI3LjQ0ODUgODkuMDYwNSAyNi43OTgzQzg4LjMyMTYgMjYuMTQ4MSA4Ny45MzA0IDI1LjA2NDQgODcuOTMwNCAyMy41OTA2VjE2LjM5NDlIOTAuOTI5NVYyMy40MTcyQzkwLjkyOTUgMjQuMTk3NCA5MS4wNTk5IDI0LjY3NDMgOTEuMzIwNyAyNC45MzQ0QzkxLjU4MTUgMjUuMTk0NCA5Mi4xMDMxIDI1LjMyNDUgOTIuOTI4OSAyNS4zMjQ1SDk1LjM2M1YxNi4zOTQ5SDk4LjQwNTZWMjcuNzk1M1oiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTEwMC42MjIgMjUuNDExMkgxMDcuMDExQzEwNy41NzcgMjUuNDExMiAxMDguMDExIDI1LjMyNDUgMTA4LjI3MiAyNS4xNTExQzEwOC41MzMgMjQuOTc3NyAxMDguNjYzIDI0LjY3NDMgMTA4LjY2MyAyNC4zMjc1QzEwOC42NjMgMjMuOTM3NCAxMDguNTMzIDIzLjY3NzMgMTA4LjI3MiAyMy40NjA1QzEwOC4wMTEgMjMuMjg3MSAxMDcuNTc3IDIzLjIwMDUgMTA3LjA1NSAyMy4yMDA1SDEwNC40NDdDMTAyLjg4MiAyMy4yMDA1IDEwMS44MzkgMjIuOTgzNyAxMDEuMzE4IDIyLjUwNjlDMTAwLjc1MiAyMi4wMzAxIDEwMC40OTIgMjEuMjA2NSAxMDAuNDkyIDE5Ljk5MjdDMTAwLjQ5MiAxOC43NzkgMTAwLjgzOSAxNy44Njg3IDEwMS40OTEgMTcuMjYxOEMxMDIuMTQzIDE2LjY5ODMgMTAzLjE4NyAxNi4zOTQ5IDEwNC41MzQgMTYuMzk0OUgxMTEuMDU0VjE4Ljc3OUgxMDUuNzA4QzEwNC44MzggMTguNzc5IDEwNC4yNzMgMTguODY1NyAxMDQuMDEyIDE4Ljk5NTdDMTAzLjc1MiAxOS4xNjkxIDEwMy42MjEgMTkuNDI5MiAxMDMuNjIxIDE5LjgxOTRDMTAzLjYyMSAyMC4xNjYxIDEwMy43NTIgMjAuNDI2MiAxMDMuOTY5IDIwLjU5OTZDMTA0LjE4NiAyMC43NzMgMTA0LjU3NyAyMC44NTk3IDEwNS4wNTYgMjAuODU5N0gxMDcuNzk0QzEwOS4wNTQgMjAuODU5NyAxMTAuMDExIDIxLjE2MzEgMTEwLjY2MyAyMS43MjY2QzExMS4zMTUgMjIuMjkwMiAxMTEuNjYyIDIzLjE1NzEgMTExLjY2MiAyNC4yNDA4QzExMS42NjIgMjUuMjgxMSAxMTEuMzU4IDI2LjE0ODEgMTEwLjc5MyAyNi43OTgzQzExMC4yMjggMjcuNDQ4NSAxMDkuNDQ2IDI3Ljc5NTMgMTA4LjUzMyAyNy43OTUzSDEwMC43MDlWMjUuNDExMkgxMDAuNjIyWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMTE2LjU3NCAxNS4wOTQ0SDExMy40MDFWMTIuMjc2OUgxMTYuNTc0VjE1LjA5NDRaTTExNi41NzQgMjcuNzk1M0gxMTMuNDAxVjE2LjM5NDlIMTE2LjU3NFYyNy43OTUzWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMTMwLjMwOSAyMi4xMTY3QzEzMC4zMDkgMjMuODkzOSAxMjkuNzQ0IDI1LjMyNDQgMTI4LjY1NyAyNi40MDgxQzEyNy41NzEgMjcuNDkxOCAxMjYuMDkzIDI4LjAxMiAxMjQuMjI0IDI4LjAxMkMxMjIuMzU1IDI4LjAxMiAxMjAuODc3IDI3LjQ5MTggMTE5Ljc5IDI2LjQwODFDMTE4LjcwNCAyNS4zMjQ0IDExOC4xMzkgMjMuODkzOSAxMTguMTM5IDIyLjExNjdDMTE4LjEzOSAyMC4zMzk0IDExOC43MDQgMTguOTA5IDExOS43OSAxNy44MjUzQzEyMC44NzcgMTYuNzQxNiAxMjIuMzk4IDE2LjIyMTQgMTI0LjIyNCAxNi4yMjE0QzEyNi4wNDkgMTYuMjIxNCAxMjcuNTI3IDE2Ljc0MTYgMTI4LjY1NyAxNy44MjUzQzEyOS43NDQgMTguODY1NiAxMzAuMzA5IDIwLjI5NjEgMTMwLjMwOSAyMi4xMTY3Wk0xMjEuMjY4IDIyLjExNjdDMTIxLjI2OCAyMy4yMDA0IDEyMS41MjkgMjQuMDY3MyAxMjIuMDUxIDI0LjY3NDJDMTIyLjU3MiAyNS4yODExIDEyMy4yNjggMjUuNTg0NSAxMjQuMTggMjUuNTg0NUMxMjUuMDkzIDI1LjU4NDUgMTI1Ljc4OSAyNS4yODExIDEyNi4zMSAyNC42NzQyQzEyNi44MzIgMjQuMDY3MyAxMjcuMDkzIDIzLjIwMDQgMTI3LjA5MyAyMi4xMTY3QzEyNy4wOTMgMjEuMDMzIDEyNi44MzIgMjAuMTY2MSAxMjYuMzEgMTkuNjAyNUMxMjUuNzg5IDE4Ljk5NTcgMTI1LjA5MyAxOC42OTIyIDEyNC4xMzcgMTguNjkyMkMxMjMuMjI0IDE4LjY5MjIgMTIyLjUyOSAxOC45OTU3IDEyMi4wMDcgMTkuNjAyNUMxMjEuNTI5IDIwLjE2NjEgMTIxLjI2OCAyMS4wMzMgMTIxLjI2OCAyMi4xMTY3WiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMTMxLjc4NyAxNi4zOTQ5SDEzNy40ODFDMTM5LjIxOSAxNi4zOTQ5IDE0MC40MzYgMTYuNjk4MyAxNDEuMTc1IDE3LjM0ODVDMTQxLjkxNCAxNy45OTg4IDE0Mi4yNjIgMTkuMDgyNCAxNDIuMjYyIDIwLjU1NjNWMjcuNzk1M0gxMzkuMjE5VjIwLjk0NjRDMTM5LjIxOSAyMC4wNzk0IDEzOS4wODkgMTkuNTE1OSAxMzguODI4IDE5LjI5OTJDMTM4LjU2NyAxOS4wMzkxIDEzOC4wNDYgMTguOTA5MSAxMzcuMjIgMTguOTA5MUgxMzQuNzg2VjI3LjgzODZIMTMxLjc0M1YxNi4zOTQ5SDEzMS43ODdaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik03LjEyODMxIDMuNzM3NDNIMFYxMC44NDY0SDcuMTI4MzFWMy43Mzc0M1oiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTIzLjI1MTMgLTIuMTU3MjVlLTA1TDE4LjU1MTMgNS41MTY4NUwyNC4wODMxIDEwLjIwNDFMMjguNzgzMSA0LjY4NzI1TDIzLjI1MTMgLTIuMTU3MjVlLTA1WiIgZmlsbD0iI0ZGODYwMCIvPgo8cGF0aCBkPSJNMTUuNjA0MSAzLjczNzQzSDguNDc1ODNWMTAuODQ2NEgxNS42MDQxVjMuNzM3NDNaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik03LjEyODMxIDEyLjE5MDJIMFYxOS4yOTkySDcuMTI4MzFWMTIuMTkwMloiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTE1LjYwNDEgMTIuMTkwMkg4LjQ3NTgzVjE5LjI5OTJIMTUuNjA0MVYxMi4xOTAyWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMjQuMDc5NyAxMi4xOTAySDE2Ljk1MTRWMTkuMjk5MkgyNC4wNzk3VjEyLjE5MDJaIiBmaWxsPSIjRkY4NjAwIi8+CjxwYXRoIGQ9Ik03LjEyODMxIDIwLjY4NjNIMFYyNy43OTUzSDcuMTI4MzFWMjAuNjg2M1oiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTE1LjYwNDEgMjAuNjg2M0g4LjQ3NTgzVjI3Ljc5NTNIMTUuNjA0MVYyMC42ODYzWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMjQuMTIzMiAyMC42ODYzSDE2Ljk5NDlWMjcuNzk1M0gyNC4xMjMyVjIwLjY4NjNaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik0xNDYgMTUuODMxM0MxNDYgMTYuODcxNyAxNDUuMTc0IDE3LjY5NTMgMTQ0LjEzMSAxNy42OTUzQzE0My4wODggMTcuNjk1MyAxNDIuMjYyIDE2Ljg3MTcgMTQyLjI2MiAxNS44MzEzQzE0Mi4yNjIgMTQuNzkxIDE0My4wODggMTQuMDEwNyAxNDQuMTMxIDE0LjAxMDdDMTQ1LjEzMSAxMy45Njc0IDE0NiAxNC43OTEgMTQ2IDE1LjgzMTNaTTE0Mi45NTcgMTQuNzkxQzE0Mi42OTcgMTUuMDUxMSAxNDIuNTY2IDE1LjQ0MTIgMTQyLjU2NiAxNS44MzEzQzE0Mi41NjYgMTYuNjk4MyAxNDMuMjYyIDE3LjM5MTggMTQ0LjEzMSAxNy4zOTE4QzE0NSAxNy4zOTE4IDE0NS42OTYgMTYuNjk4MyAxNDUuNjk2IDE1LjgzMTNDMTQ1LjY5NiAxNS4wMDc3IDE0NSAxNC4yNzA4IDE0NC4xNzQgMTQuMjcwOEMxNDMuNjUzIDE0LjI3MDggMTQzLjI2MiAxNC40NDQyIDE0Mi45NTcgMTQuNzkxWk0xNDQuODcgMTYuOTE1SDE0NC40NzlMMTQzLjkxNCAxNi4wOTE0VjE2LjkxNUgxNDMuNjA5VjE0Ljc0NzZIMTQzLjk1N0MxNDQuNDM1IDE0Ljc0NzYgMTQ0LjY1MyAxNC45NjQ0IDE0NC42NTMgMTUuMzU0NUMxNDQuNjUzIDE1LjY1NzkgMTQ0LjQ3OSAxNS44NzQ3IDE0NC4xNzQgMTUuOTYxNEwxNDQuODcgMTYuOTE1Wk0xNDQuMDQ0IDE1LjY1NzlDMTQ0LjI2MSAxNS42NTc5IDE0NC4zOTIgMTUuNTI3OSAxNDQuMzkyIDE1LjM1NDVDMTQ0LjM5MiAxNS4xMzc4IDE0NC4yNjEgMTUuMDUxMSAxNDQuMDAxIDE1LjA1MTFIMTQzLjkxNFYxNS42NTc5SDE0NC4wNDRaIiBmaWxsPSIjMzU0M0E4Ii8+Cjwvc3ZnPgo=" style="\n    text-align: left;\n    width: 146px;\n    position: absolute;\n    top: 14px;\n    left: 31px;\n">\n            </div>\n            <div style="\n    position: relative;\n    top: 80px;\n    left: 32px;\n    font-size: 20px;\n    text-align: left;\n    font-weight: 700;\n    letter-spacing: 0.02em;\n    font-style: normal;\n    line-height: 125%;\n    ">Claim your FREE account and get a key in less than a minute</div>\n            <ul style="\n        font-size: 15px;\n        font-weight: 400;\n        color: #333333;\n        letter-spacing: 0.01em;\n        position: relative;\n        left: 32px;\n        top: 88px;\n        line-height: 180%;\n        ">\n                <li><span>Access to a 30-day free trial of any of our products.</span></li>\n                <li><span>Access to 24x5 support by developers via the <a href="https://support.syncfusion.com/create" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">support tickets</a>, <a href="https://www.syncfusion.com/forums" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">forum</a>, <a href="https://www.syncfusion.com/feedback" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">feature &amp; feedback page</a> and chat.</span></li>\n                <li><span>200+ <a href="https://www.syncfusion.com/succinctly-free-ebooks" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">ebooks </a>on the latest technologies, industry trends, and research topics.</span>\n                </li>\n                <li><span>Largest collection of over 7,000 flat and wireframe icons for free with Syncfusion <a href="https://www.syncfusion.com/succinctly-free-ebooks" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">Metro Studio.</a></span></li>\n                <li><span>Free and unlimited access to Syncfusion technical <a href="https://www.syncfusion.com/blogs/" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">blogs</a> and <a href="https://www.syncfusion.com/resources/techportal/whitepapers" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">whitepapers.</a></span></li>\n            </ul>\n            <div style="\n            font-size: 18px;\n            font-weight: 700;\n            position: relative;\n            line-height: 125%;\n            letter-spacing: 0.02em;\n            top: 90px;\n            left: 32px;\n    ">Syncfusion is trusted by 29,000+ businesses worldwide</div>\n            <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODIwIiBoZWlnaHQ9IjU2IiB2aWV3Qm94PSIwIDAgODIwIDU2IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPg0KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00MjcuNjE3IDIyLjU2NTlWMjQuNzIyNkM0MjYuNTU4IDI0LjM2MzggNDI1LjM5OCAyNC4xNTQ0IDQyNC40NzQgMjQuMTU0NEM0MjMuMzMzIDI0LjE1NDQgNDIyLjY5OCAyNC40OTEyIDQyMi42OTggMjUuMDk2M0M0MjIuNjk4IDI1LjQ4MjQgNDIyLjk3NiAyNS43MzgzIDQyMy43NzMgMjYuMDg1NEw0MjUuOTE3IDI3LjAxNzRDNDI3LjYzMyAyNy43NjM5IDQyOC40OTcgMjguODUzIDQyOC40OTcgMzAuMjY4MUM0MjguNDk3IDMyLjQ1MjIgNDI2LjU0NiAzMy44MyA0MjMuNDUyIDMzLjgzQzQyMi4zMjQgMzMuODMgNDIxLjAxOCAzMy42NzM2IDQxOS42MzYgMzMuMzcwOVYzMS4xNDE2QzQyMS4wMDYgMzEuNTAyOCA0MjIuMjYyIDMxLjY5NTcgNDIzLjIzOSAzMS42OTU3QzQyNC41MTggMzEuNjk1NyA0MjUuMjAzIDMxLjM1MDYgNDI1LjIwMyAzMC43MDc0QzQyNS4yMDMgMzAuMzIwOCA0MjQuOTM1IDMwLjAzNjcgNDI0LjMyMiAyOS43NzE3TDQyMS45NzUgMjguNzU5M0M0MjAuMjM2IDI4LjAwNzggNDE5LjQzMyAyNi45OTU0IDQxOS40MzMgMjUuNTUyMUM0MTkuNDMzIDIzLjQ4MzcgNDIxLjMxNCAyMi4xNjQ5IDQyNC4yNjUgMjIuMTY0OUM0MjUuMjk4IDIyLjE2NDkgNDI2LjU3IDIyLjMxNzEgNDI3LjYxNyAyMi41NjU5VjIyLjU2NTlaTTQzMC4xNjcgMjIuMzkwOUg0MzMuNjM1VjMzLjYwMzlINDMwLjE2N1YyMi4zOTA5Wk00NDQuOTExIDIyLjM5MDlWMjQuNDQ1MUg0MzkuNjc1VjI2Ljk3NDJINDQ0LjI0OVYyOC44MzIzSDQzOS42NzVWMzEuNDU0M0g0NDQuOTc4VjMzLjYwMzlINDM2LjMwNVYyMi4zOTA5SDQ0NC45MTFaTTQ2MS4yOTQgMjIuMzkwOVYzMy42MDM5SDQ1Ny45MzlWMjYuMjIzNkw0NTQuNjUyIDMzLjY5MTVINDUyLjUzMUw0NDkuMjY2IDI2LjIyMzZWMzMuNjAzOUg0NDYuOTQ5VjIyLjM5MDlINDUxLjE4NEw0NTQuMTc4IDI5LjIxMTRMNDU3LjE1NiAyMi4zOTA5SDQ2MS4yOTRWMjIuMzkwOVpNNDcyLjU3OSAyMi4zOTA5VjI0LjQ0NTFINDY3LjMzNVYyNi45NzQySDQ3MS45MDhWMjguODMyM0g0NjcuMzM1VjMxLjQ1NDNINDcyLjYzOFYzMy42MDM5SDQ2My45NTdWMjIuMzkwOUg0NzIuNTc5Wk00ODQuNzk0IDIyLjM5MDlWMzMuNjAzOUg0ODEuMDkzTDQ3Ni45MjYgMjYuNDEyM1YzMy42MDM5SDQ3NC42MDhWMjIuMzkwOUg0NzguNDA3TDQ4Mi40ODQgMjkuNDg3NlYyMi4zOTA5SDQ4NC43OTRaTTQ5NC44NTggMjIuNTY1OVYyNC43MjI2QzQ5My44MDcgMjQuMzY2MyA0OTIuNjQgMjQuMTU0NCA0OTEuNzMyIDI0LjE1NDRDNDkwLjU3MyAyNC4xNTQ0IDQ4OS45MzkgMjQuNDg1OCA0ODkuOTM5IDI1LjA5M0M0ODkuOTM5IDI1LjQ4ODYgNDkwLjE5OCAyNS43MjUgNDkxLjAyMyAyNi4wODU5TDQ5My4xNTcgMjcuMDE3OEM0OTQuODg1IDI3Ljc3MjIgNDk1LjczOSAyOC44NTE4IDQ5NS43MzkgMzAuMjgzNUM0OTUuNzM5IDMyLjQ1NTkgNDkzLjc4NiAzMy44MzA4IDQ5MC42OTkgMzMuODMwOEM0ODkuNTY5IDMzLjgzMDggNDg4LjI1OSAzMy42NzM2IDQ4Ni44NzggMzMuMzcxN1YzMS4xNDI0QzQ4OC4yNDcgMzEuNTAyOCA0ODkuNDk5IDMxLjY5NjUgNDkwLjQ3IDMxLjY5NjVDNDkxLjc0IDMxLjY5NjUgNDkyLjQ0NCAzMS4zNTE1IDQ5Mi40NDQgMzAuNzI4NUM0OTIuNDQ0IDMwLjMxNjMgNDkyLjE5NyAzMC4wNTA0IDQ5MS41NTUgMjkuNzcyNUw0ODkuMjE4IDI4Ljc2MDFDNDg3LjQ2NyAyOC4wMDI4IDQ4Ni42NzQgMjcuMDAyIDQ4Ni42NzQgMjUuNTUzM0M0ODYuNjc0IDIzLjQ4NjIgNDg4LjU1NiAyMi4xNjY1IDQ5MS41IDIyLjE2NjVDNDkyLjUzNiAyMi4xNjUzIDQ5My44MTMgMjIuMzE3MSA0OTQuODU4IDIyLjU2NTlWMjIuNTY1OVoiIGZpbGw9IiMwMEEwQjAiLz4NCjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMzUyLjQxMyAyNi44MTlDMzUwLjk5MiAyNS4yNzU5IDM0OS42MzggMjMuODMxNSAzNDguMzQ5IDIyLjE1NzRMMzQ3LjkyIDIxLjU5OTVDMzQ5LjQwNiAyMS4zNjkzIDM1MC42OTUgMjAuMzg0OCAzNTAuNjk1IDE4Ljc0MzNDMzUwLjY5NSAxNy4yMzMxIDM0OS41MzkgMTYuMjQ4MiAzNDcuODIxIDE2LjI0ODJDMzQ2LjU5OCAxNi4yNDgyIDM0NS43MDYgMTYuMzEzNyAzNDUuMjQzIDE2LjMxMzdDMzQ0LjcxNSAxNi4zMTM3IDM0NC4yODUgMTYuMzEzNyAzNDMuNzkgMTYuMjgwOEMzNDMuODU2IDE4LjE1MjEgMzQzLjg4OSAxOC4yODM0IDM0My44ODkgMTkuNDMyMlYyMy42MzQzQzM0My44ODkgMjQuNDU1MyAzNDMuODU2IDI1LjI3NTkgMzQzLjc5IDI2LjgxODZDMzQ0LjE1MyAyNi43MjAyIDM0NC41MTcgMjYuNzIwMiAzNDQuNzgxIDI2LjcyMDJDMzQ1LjA0NSAyNi43MjAyIDM0NS40MDkgMjYuNzUzMSAzNDUuNzA2IDI2LjgxODZDMzQ1LjY0IDI1Ljc2NzkgMzQ1LjYwNyAyNC4wMjgzIDM0NS42MDcgMjMuNjM0M1YyMS4yMDUxQzM0Ny4xNiAyMy4yMDc3IDM0OS4yMDkgMjUuNjY5NSAzNTAuMDAxIDI2LjgxODZDMzUwLjM5OCAyNi43MjAyIDM1MC43MjggMjYuNzIwMiAzNTEuMTI0IDI2LjcyMDJDMzUxLjQ1NSAyNi43MjA2IDM1MS45MTggMjYuNzIwNiAzNTIuNDEzIDI2LjgxOVYyNi44MTlaTTM0OC44NzggMTkuMDA2QzM0OC44NzggMjAuMDIzNCAzNDguMzE3IDIxLjIwNTQgMzQ2Ljc5NyAyMS4yMDU0QzM0Ni40IDIxLjIwNTQgMzQ2LjAwMyAyMS4yMDU0IDM0NS42MDcgMjEuMTcyNVYxNy4wNjg4QzM0Ni4wMDMgMTYuOTcwNCAzNDYuNDk5IDE2LjkwNDYgMzQ2Ljc2MyAxNi45MDQ2QzM0OC4wODUgMTYuOTA0OSAzNDguODc4IDE3LjY2IDM0OC44NzggMTkuMDA2VjE5LjAwNlpNMzgyLjM4IDI2Ljg4NDVDMzgxLjgxOSAyNi4yOTM2IDM4MC45NiAyNS4zNDE3IDM4MC4xMzQgMjQuNDIyM0MzODAuODI4IDIzLjY2NzIgMzgxLjU1NSAyMi41NTEgMzgxLjk4NCAyMS41OTkxQzM4MS43MTkgMjEuNDY3OCAzODEuMzU2IDIxLjIwNTEgMzgxLjA5MiAyMC45NzUzQzM4MC45OTMgMjEuNzk1OSAzODAuNDMyIDIyLjg3OTIgMzc5LjYzOSAyMy44MzE1QzM3OC41MTUgMjIuNTE4NSAzNzguMjE4IDIyLjE1NzQgMzc3LjE5MyAyMC43Nzg1QzM3OC41ODEgMTkuODkyMSAzNzkuMjQyIDE4Ljg3NDMgMzc5LjI0MiAxOC4wNTM3QzM3OS4yNDIgMTcuMTAxNyAzNzguNTgxIDE2LjExNjkgMzc2Ljk2MiAxNi4xMTY5QzM3NS4yMTEgMTYuMTE2OSAzNzQuMzUyIDE3LjIwMDIgMzc0LjM1MiAxOC40ODAzQzM3NC4zNTIgMTkuMjM1NCAzNzQuNTUgMTkuODkxNyAzNzUuMzc2IDIwLjk3NTNDMzc0LjA1NCAyMS42OTc1IDM3Mi43NjYgMjIuNzQ3OSAzNzIuNzY2IDI0LjQyMjNDMzcyLjc2NiAyNi4wNjM5IDM3NC4wODcgMjYuOTE3NCAzNzUuNzA3IDI2LjkxNzRDMzc3LjE5MyAyNi45MTc0IDM3OC4xNTEgMjYuMzI2NiAzNzguOTEyIDI1LjYzNjlMMzc5LjkwMiAyNi44MTlDMzgwLjIgMjYuNzg2MSAzODAuNTMxIDI2LjcyMDYgMzgwLjg2MSAyNi43MjA2QzM4MS4zMjQgMjYuNzIwNiAzODEuODUyIDI2Ljc4NjEgMzgyLjM4IDI2Ljg4NDVWMjYuODg0NVpNMzgzLjM3MiA0MC4wMTU4QzM4MS45MTggMzguNDczIDM4MC41OTcgMzcuMDYxMiAzNzkuMzA4IDM1LjM4NzFMMzc4Ljg3OCAzNC44Mjg4QzM4MC4zMzIgMzQuNTk5MSAzODEuNjU0IDMzLjYxNSAzODEuNjU0IDMxLjk0MDFDMzgxLjY1NCAzMC40NjMyIDM4MC40OTggMjkuNDQ1NCAzNzguNzc5IDI5LjQ0NTRDMzc3LjU1NyAyOS40NDU0IDM3Ni42MzIgMjkuNTQzNSAzNzYuMTY5IDI5LjU0MzVDMzc1LjY3MyAyOS41NDM1IDM3NS4yNDQgMjkuNTQzNSAzNzQuNzQ4IDI5LjQ3NzZDMzc0LjgxNCAzMS4zODIyIDM3NC44NDggMzEuNDgwMiAzNzQuODQ4IDMyLjYyOTRWMzYuODMxMUMzNzQuODQ4IDM3LjY1MjQgMzc0LjgxNCAzOC41MDUyIDM3NC43NDggNDAuMDE1NEMzNzUuMTEyIDM5Ljk0OTYgMzc1LjQ3NSAzOS45NDk2IDM3NS43MDcgMzkuOTQ5NkMzNzYuMDA0IDM5Ljk0OTYgMzc2LjM2OCAzOS45NDk2IDM3Ni42MzIgNDAuMDE1NEMzNzYuNTY1IDM4Ljk5OCAzNzYuNTMzIDM3LjI1ODEgMzc2LjUzMyAzNi44MzExVjM0LjQzNDhDMzc4LjExOSAzNi40MDQyIDM4MC4xNjcgMzguODk5NiAzODAuOTYgNDAuMDE1NEMzODEuMzU2IDM5Ljk0OTYgMzgxLjY4NyAzOS45NDk2IDM4Mi4wODMgMzkuOTQ5NkMzODIuMzggMzkuOTUgMzgyLjg3NiAzOS45NSAzODMuMzcyIDQwLjAxNThaTTM2Mi4xNiAyNi44MTlDMzYwLjk3MSAyNS41NzE1IDM1OC44ODkgMjIuOTc4IDM1OC4wNjMgMjEuOTkzNUwzNTcuMjM3IDIwLjk3NTdDMzU4LjA5NiAxOS45NTgzIDM1OC42OSAxOS4zMzQxIDM1OS4zMTkgMTguNTc5QzM2MC4wNDUgMTcuNzkxIDM2MC43MDYgMTYuOTcwNCAzNjEuNDk5IDE2LjI0ODJDMzYxLjEzNiAxNi4zMTM3IDM2MC45MzcgMTYuMzEzNyAzNjAuNzM5IDE2LjMxMzdDMzYwLjU0MSAxNi4zMTM3IDM2MC4zNDMgMTYuMzEzNyAzNjAuMTQ0IDE2LjI0ODJDMzU5LjkxMyAxNi42MDkzIDM1OS41NSAxNy4wNjg4IDM1OS4xNTMgMTcuNTI4N0MzNTguNzU2IDE3Ljk1NTYgMzU4LjM2IDE4LjM4MjIgMzU4LjA2MyAxOC43NDMzQzM1Ny4yMzYgMTkuNjk1MiAzNTYuNzc0IDIwLjE1NDcgMzU1LjU4NSAyMS4yNzA5VjE5LjQ2NTVDMzU1LjU4NSAxOC40MTUxIDM1NS41ODUgMTcuNzI1NSAzNTUuNjUxIDE2LjI0ODJDMzU1LjMyMSAxNi4zMTM3IDM1NC45NTcgMTYuMzEzNyAzNTQuNzI2IDE2LjMxMzdDMzU0LjQ2MSAxNi4zMTM3IDM1NC4wMzIgMTYuMzEzNyAzNTMuNzY4IDE2LjI0ODJDMzUzLjgzMyAxNy44MjM5IDM1My44NjcgMTguMjgzNCAzNTMuODY3IDE5LjQzMjVWMjMuNjM0N0MzNTMuODY3IDI0LjY4NSAzNTMuODMzIDI1LjMwODggMzUzLjc2OCAyNi44MTlDMzU0LjE2NCAyNi43MjA2IDM1NC40OTUgMjYuNzIwNiAzNTQuNzI2IDI2LjcyMDZDMzU0Ljk1NyAyNi43MjA2IDM1NS4zNTMgMjYuNzUzNSAzNTUuNjUxIDI2LjgxOUMzNTUuNTg1IDI1LjE0NDkgMzU1LjU4NSAyNC4xNTk3IDM1NS41ODUgMjMuNjM0N1YyMS40MzUyQzM1Ni44MDcgMjIuODc5NiAzNTguNjkgMjUuMjQzMyAzNTkuNzQ4IDI2LjgxOUMzNjAuMTMgMjYuNzU2MyAzNjAuNTE3IDI2LjcyMzQgMzYwLjkwNSAyNi43MjA2QzM2MS4yMDIgMjYuNzIwNiAzNjEuNjY1IDI2LjcyMDYgMzYyLjE2IDI2LjgxOVYyNi44MTlaTTM3Mi42MDEgNDAuMDE1OEMzNzIuNTY4IDM5Ljg1MTkgMzcyLjUzNSAzOS43MjA2IDM3Mi41MzUgMzkuNTIzNEMzNzIuNTM1IDM5LjM5MjggMzcyLjU2OCAzOS4yMjgxIDM3Mi42MDEgMzkuMDk2NEMzNzEuMjggMzkuMTI5NyAzNjguOTAxIDM5LjE5NTIgMzY4LjM3MiAzOS4xOTUyVjM0LjY2NDlDMzY5LjY5NCAzNC42NjQ5IDM3MC45ODIgMzQuNjY0OSAzNzIuMjcgMzQuNzk2M0MzNzIuMjM4IDM0LjYzMjQgMzcyLjIwNCAzNC40Njc3IDM3Mi4yMDQgMzQuMzM2NEMzNzIuMjA0IDM0LjIwNTggMzcyLjIwNCAzNC4wNDE5IDM3Mi4yNyAzMy44NDQ3QzM3MS4zNDYgMzMuOTQyOCAzNjkuMTk4IDMzLjk3NiAzNjguMzcyIDMzLjk3NlYzMC4yNjZDMzY5LjgyNiAzMC4yNjYgMzcwLjY4NSAzMC4yNjYgMzcxLjE4IDMwLjI5OTNMMzcyLjUwMiAzMC4zNjUxQzM3Mi40MzYgMzAuMTY3OSAzNzIuNDM2IDMwLjA2OTIgMzcyLjQzNiAyOS45MDUzQzM3Mi40MzYgMjkuNzQxNCAzNzIuNDM2IDI5LjcwODEgMzcyLjUwMiAyOS40NDU4QzM3MS40MTEgMjkuNDc4MyAzNjkuOTI1IDI5LjU0MzggMzY5LjI2NCAyOS41NDM4QzM2OC44MDIgMjkuNTQzOCAzNjcuMzQ4IDI5LjUxMTMgMzY2LjU4NyAyOS40NDU4QzM2Ni42NTQgMzAuMjY2NCAzNjYuNjg2IDMxLjYxMjMgMzY2LjY4NiAzMi41NjQyVjM2Ljg2NTFDMzY2LjY4NiAzNy40ODg1IDM2Ni42MiAzOC43MzU3IDM2Ni41ODcgNDAuMDE2MkMzNjcuNTEzIDM5Ljk1MDMgMzY4LjgwMiAzOS45NTAzIDM2OS4yNjQgMzkuOTUwM0MzNzAuMDI0IDM5Ljk1IDM3MS42NDMgMzkuOTUgMzcyLjYwMSA0MC4wMTU4Wk0zNjQuNjA1IDM5LjEyOTRDMzY0LjQ0IDM4LjgwMDggMzY0LjM0MSAzOC4zMDg4IDM2NC4yNzUgMzguMDQ2MUMzNjIuOTIgMzkuMTYxOSAzNjEuOTk1IDM5LjM5MjQgMzYwLjkzOCAzOS4zOTI0QzM1OC41OTIgMzkuMzkyNCAzNTcuMzM3IDM3LjI5MTMgMzU3LjMzNyAzNC42NjQ5QzM1Ny4zMzcgMzEuNzQzNiAzNTguNzU3IDMwLjAzNjIgMzYxLjE2OSAzMC4wMzYyQzM2Mi40MjUgMzAuMDM2MiAzNjMuNjE0IDMwLjU5NDUgMzY0LjE3NiAzMS4xNTI4QzM2NC4yMDggMzAuODg5OCAzNjQuMzA4IDMwLjM2NDggMzY0LjQ3MyAzMC4wNjg4QzM2My4zMTYgMjkuNTExMyAzNjIuMjU5IDI5LjM0NjYgMzYxLjEwMiAyOS4zNDY2QzM1Ny4yMzcgMjkuMzQ2NiAzNTUuNDUzIDMxLjc0MzYgMzU1LjQ1MyAzNC44Mjg4QzM1NS40NTMgMzguMzA5MSAzNTcuNzk4IDQwLjE0NzEgMzYwLjczOSA0MC4xNDcxQzM2Mi40MjUgNDAuMTQ3MSAzNjMuODEyIDM5LjYyMjIgMzY0LjYwNSAzOS4xMjk0VjM5LjEyOTRaTTM0Mi4zMDMgMjYuODE5QzM0MC41MTkgMjMuNDA0OSAzMzguOCAxOS4xMzczIDMzNy41NzggMTYuMTE2OUgzMzcuMzhDMzM2LjU4NyAxOC4wMjA3IDMzNS4xMzMgMjEuMjcwOSAzMzQuNzM3IDIyLjE4OTlDMzM0LjI3NCAyMy4zMDYxIDMzMy4yNSAyNS41MDU2IDMzMi41ODkgMjYuODE4NkMzMzIuODAzIDI2Ljc1MzggMzMzLjAyNiAyNi43MjA2IDMzMy4yNSAyNi43MjAyQzMzMy40NDggMjYuNzIwMiAzMzMuNjEzIDI2Ljc1MzEgMzMzLjg0NSAyNi44MTg2QzMzNC4xNzUgMjUuOTMyMiAzMzQuNjM4IDI0LjgxNiAzMzUuMTMzIDIzLjYzNDNDMzM1Ljc5NCAyMy42MDE0IDMzNi4zODkgMjMuNTY4OCAzMzYuOTg0IDIzLjU2ODhDMzM3LjYxMiAyMy41Njg4IDMzOC4yNzIgMjMuNjAxNCAzMzguOTMzIDIzLjYzNDNMMzM5LjU5NCAyNS4yMUwzNDAuMjU1IDI2LjgxODZDMzQwLjcxNyAyNi43MjAyIDM0MS4wOCAyNi43MjAyIDM0MS4zMTIgMjYuNzIwMkMzNDEuNjA5IDI2LjcyMDYgMzQxLjg3MyAyNi43MjA2IDM0Mi4zMDMgMjYuODE5VjI2LjgxOVpNMzUzLjYzNiAyOS40NDU0QzM1My40MzggMjkuNTExMyAzNTMuMjczIDI5LjU0MzUgMzUzLjEwNyAyOS41NDM1QzM1Mi45MDkgMjkuNTQzNSAzNTIuNzQ0IDI5LjUxMDkgMzUyLjU0NiAyOS40NDU0QzM1Mi42NDQgMzAuNzU4NCAzNTIuNjc4IDMyLjA3MTQgMzUyLjY3OCAzMy4zNTE5VjM2LjczMzRDMzUyLjE0OSAzNi4yNzM2IDM1MC44NiAzNS4wOTE5IDM0OS4zNzQgMzMuNzEzQzM0Ny44NiAzMi4zMDc0IDM0Ni4zOTQgMzAuODUxMSAzNDQuOTc5IDI5LjM0NjZIMzQ0Ljc0OEMzNDQuNzgxIDMwLjgyNDMgMzQ0LjgxNCAzMi40IDM0NC44MTQgMzMuODExNFYzNS44Nzk5QzM0NC44MTQgMzcuNjUyOCAzNDQuODE0IDM4LjYwNDcgMzQ0LjcxNSA0MC4wMTYyQzM0NC45OCAzOS45NTAzIDM0NS4xMTIgMzkuOTUwMyAzNDUuMzEgMzkuOTUwM0MzNDUuNDQyIDM5Ljk1MDMgMzQ1LjU3NSAzOS45NTAzIDM0NS44MDYgNDAuMDE2MkMzNDUuNzQgMzguNjcwNiAzNDUuNzA3IDM2LjQ3MDggMzQ1LjcwNyAzNS44Nzk5VjMyLjU5NjhDMzQ4LjE4NSAzNC44NjI1IDM1MS4yMjQgMzcuODgyNiAzNTMuNDcxIDQwLjE0NzVIMzUzLjYwM0MzNTMuNjAzIDM4LjkzMjkgMzUzLjUzNyAzNy43MTc5IDM1My41MzcgMzYuNTA0VjM0LjYzMjdDMzUzLjUzNiAzMi40MzI1IDM1My41MzYgMzEuMzQ5MyAzNTMuNjM2IDI5LjQ0NTRaTTM0Mi41NjcgNDAuMDE1OEMzNDIuNTM0IDM5Ljg1MTkgMzQyLjUwMSAzOS43MjA2IDM0Mi41MDEgMzkuNTIzNEMzNDIuNTAxIDM5LjM5MjggMzQyLjUzNCAzOS4yMjgxIDM0Mi41NjcgMzkuMDk2NEMzNDEuMjQ2IDM5LjEyOTcgMzM4Ljg2NyAzOS4xOTUyIDMzOC4zNzEgMzkuMTk1MlYzNC42NjQ5QzMzOS42NiAzNC42NjQ5IDM0MC45NDggMzQuNjY0OSAzNDIuMjM3IDM0Ljc5NjNDMzQyLjIwNCAzNC42MzI0IDM0Mi4xNzEgMzQuNDY3NyAzNDIuMTcxIDM0LjMzNjRDMzQyLjE3MSAzNC4yMDU4IDM0Mi4xNzEgMzQuMDQxOSAzNDIuMjM3IDMzLjg0NDdDMzQxLjMxMiAzMy45NDI4IDMzOS4xOTcgMzMuOTc2IDMzOC4zNzEgMzMuOTc2VjMwLjI2NkMzMzkuNzkyIDMwLjI2NiAzNDAuNjUxIDMwLjI2NiAzNDEuMTc5IDMwLjI5OTNMMzQyLjQ2OCAzMC4zNjUxQzM0Mi40MzUgMzAuMTY3OSAzNDIuNDM1IDMwLjA2OTIgMzQyLjQzNSAyOS45MDUzQzM0Mi40MzUgMjkuNzQxNCAzNDIuNDM1IDI5LjY3NTUgMzQyLjQ2OCAyOS40NDU4QzM0MS4zNzggMjkuNDc4MyAzMzkuODkxIDI5LjU0MzggMzM5LjIzIDI5LjU0MzhDMzM4Ljc2NyAyOS41NDM4IDMzNy4zMTQgMjkuNTExMyAzMzYuNTU0IDI5LjQ0NThDMzM2LjYyIDMwLjI2NjQgMzM2LjY1MyAzMS42MTIzIDMzNi42NTMgMzIuNTY0MlYzNi44NjUxQzMzNi42NTMgMzcuNDg4NSAzMzYuNTg3IDM4LjczNTcgMzM2LjU1NCA0MC4wMTYyQzMzNy41MTIgMzkuOTUwMyAzMzguNzY3IDM5Ljk1MDMgMzM5LjIzIDM5Ljk1MDNDMzM5Ljk5IDM5Ljk1IDM0MS42NDIgMzkuOTUgMzQyLjU2NyA0MC4wMTU4VjQwLjAxNThaTTMzMS4yMDEgMjYuODE5QzMzMC42NzMgMjMuMjQwNiAzMzAuMjEgMTkuNDk4NCAzMjkuODQ3IDE2LjExNjlDMzI5Ljc0OCAxNi4xNDk4IDMyOS43MTQgMTYuMTQ5OCAzMjkuNjQ5IDE2LjExNjlDMzI4Ljk1NSAxNy4zMzE1IDMyOC4xNjIgMTguNjQ0NSAzMjcuNTY3IDE5LjU2MzlDMzI3LjAwNiAyMC40NTAzIDMyNi4zNDUgMjEuNTAwNyAzMjUuNTg1IDIyLjYxNjlDMzIzLjk5OSAyMC41ODE3IDMyMi4zNDcgMTguMDIxMSAzMjEuMjU2IDE2LjExNjlDMzIxLjE5IDE2LjE0OTggMzIxLjE1NyAxNi4xMTY5IDMyMS4wOTEgMTYuMTE2OUMzMjAuNzI4IDE5LjQ5OCAzMjAuMjMyIDIzLjI3MzIgMzE5LjczNiAyNi44MTlDMzIwLjAwMSAyNi43MjA2IDMyMC4xNjYgMjYuNzIwNiAzMjAuMjk4IDI2LjcyMDZDMzIwLjQ5NiAyNi43MjA2IDMyMC42MjggMjYuNzUzNSAzMjAuODU5IDI2LjgxOUMzMjAuOTkyIDI0LjQ1NTMgMzIxLjI1NiAyMi4xMjQ0IDMyMS41NTMgMTkuNjYyM0MzMjIuODQyIDIxLjUzMzYgMzIzLjk2NSAyMy4xNDIyIDMyNS4yMjEgMjQuODQ5M0MzMjYuMjc4IDIzLjIwNzcgMzI3LjM2OCAyMS40MzQ4IDMyOC41NTggMTkuNjI5NEMzMjguODg4IDIyLjE1NyAzMjkuMTg2IDI0LjQ1NTMgMzI5LjM1MSAyNi44MTlDMzI5Ljc4IDI2LjcyMDYgMzMwLjA3OCAyNi43MjA2IDMzMC4yNzYgMjYuNzIwNkMzMzAuNTQgMjYuNzIwNiAzMzAuODA1IDI2LjcyMDYgMzMxLjIwMSAyNi44MTlWMjYuODE5Wk0zMzQuOTY4IDMyLjIwMjhDMzM0Ljk2OCAzMC4yOTg5IDMzMy40NDggMjkuNDQ1NCAzMzEuNTk4IDI5LjQ0NTRDMzMwLjc3MiAyOS40NDU0IDMyOS44OCAyOS41NDM1IDMyOS4yNTIgMjkuNTQzNUMzMjkuMDIxIDI5LjU0MzUgMzI4LjUyNSAyOS41NDM1IDMyNy45OTcgMjkuNDc3NkMzMjguMDMgMzAuNTI4MyAzMjguMDk2IDMxLjQxNDggMzI4LjA5NiAzMi40MzIyVjM2LjkyOTVDMzI4LjA5NiAzNy45MTQ4IDMyOC4wMyAzOC45OTggMzI3Ljk5NyA0MC4wMTU0QzMyOC40MjYgMzkuOTQ5NiAzMjguNzI0IDM5Ljk0OTYgMzI4LjkyMiAzOS45NDk2QzMyOS4xNTMgMzkuOTQ5NiAzMjkuNDg0IDM5Ljk0OTYgMzI5Ljg4IDQwLjAxNTRDMzI5LjgxNSAzOS4wMzE5IDMyOS43ODIgMzguMDQ2NSAzMjkuNzgxIDM3LjA2MDlWMzUuNDJDMzMwLjE0NSAzNS40NTI2IDMzMC41MDggMzUuNDUyNiAzMzAuOTA1IDM1LjQ1MjZDMzMyLjgyIDM1LjQ1MjYgMzM0Ljk2OCAzNC43MzA0IDMzNC45NjggMzIuMjAyOFYzMi4yMDI4Wk0zMjYuMDE0IDM2Ljg5NzNDMzI2LjAxNCAzNS4yNTU4IDMyNC45MjQgMzQuNTMzNiAzMjMuMDQgMzMuNzQ1NkMzMjEuNjg2IDMzLjE4OCAzMjAuOTkyIDMyLjY5NTYgMzIwLjk5MiAzMS42NDQ1QzMyMC45OTIgMzAuNjYgMzIxLjc1MiAzMC4wMzYyIDMyMy4wMDggMzAuMDM2MkMzMjMuODM0IDMwLjAzNjIgMzI0LjU2MSAzMC4zMzE1IDMyNS4yMjIgMzAuODU2OEMzMjUuMjg3IDMwLjQ5NTcgMzI1LjQ1MyAzMC4xMzQ3IDMyNS42NTEgMjkuODM5NEMzMjQuODU4IDI5LjQ3ODMgMzIzLjk5OSAyOS4zNDcgMzIzLjA3NCAyOS4zNDdDMzIwLjM2NSAyOS4zNDcgMzE5LjUwNSAzMC44OTA1IDMxOS41MDUgMzIuMjAzNUMzMTkuNTA1IDMzLjgxMTggMzIwLjI5OSAzNC41NjcyIDMyMi4zNDcgMzUuMzU1M0MzMjMuNjM2IDM1Ljg0NyAzMjQuMjk2IDM2LjQ3MTEgMzI0LjI5NiAzNy41NTQ0QzMyNC4yOTYgMzguNzAzNSAzMjMuNDM3IDM5LjQyNTcgMzIyLjI0OCAzOS40MjU3QzMyMS41NTQgMzkuNDI1NyAzMjAuMzY1IDM5LjA2NDYgMzE5LjUzOSAzOC4zMDk5QzMxOS41MDUgMzguNzM2MSAzMTkuNTA1IDM5LjEzMDQgMzE5LjM3MyAzOS40OTE1QzMxOS45MDIgMzkuNzU0NiAzMjEuMTI1IDQwLjE0NzkgMzIyLjIxNSA0MC4xNDc5QzMyNC45OSA0MC4xNDcxIDMyNi4wMTQgMzguNDM5NyAzMjYuMDE0IDM2Ljg5NzNWMzYuODk3M1pNMzc4LjE1MiAxNy45ODgyQzM3OC4xNTIgMTguOTczIDM3Ny40NTggMTkuNjYyMyAzNzYuNzY0IDIwLjIyMDJDMzc2LjMwMSAxOS41NjM5IDM3NS43NCAxOC42NzcxIDM3NS43NCAxNy45ODgyQzM3NS43NCAxNy4yMzMxIDM3Ni4yNjggMTYuODA2MSAzNzYuOTk1IDE2LjgwNjFDMzc3Ljk4NyAxNi44MDY1IDM3OC4xNTIgMTcuNjkyNiAzNzguMTUyIDE3Ljk4ODJWMTcuOTg4MlpNMzc4LjQ4MiAyNS4wMTMyQzM3OC4xMTkgMjUuMzQxNyAzNzcuMjYgMjUuOTY1NSAzNzYuNTMzIDI1Ljk2NTVDMzc1LjU3NCAyNS45NjU1IDM3NC40MTggMjUuMjc1OSAzNzQuNDE4IDIzLjc5ODZDMzc0LjQxOCAyMi40ODU1IDM3NS4yNzcgMjEuODk0NyAzNzUuODA2IDIxLjU2NjVDMzc3LjAyOCAyMy4yNDA2IDM3Ny4wOTUgMjMuMzM5MSAzNzguNDgyIDI1LjAxMzJaTTM3OS44MDQgMzIuMjAyOEMzNzkuODA0IDMzLjI1MzUgMzc5LjI3NSAzNC40MDI2IDM3Ny43NTUgMzQuNDAyNkMzNzcuMzI2IDM0LjQwMjYgMzc2LjkyOSAzNC40MDI2IDM3Ni41MzMgMzQuMzY5M1YzMC4yNjU2QzM3Ni45MjkgMzAuMTY3NiAzNzcuNDI1IDMwLjEzNDMgMzc3LjcyMiAzMC4xMzQzQzM3OS4wMTEgMzAuMTM0MyAzNzkuODA0IDMwLjg4OTggMzc5LjgwNCAzMi4yMDI4Wk0zMzguNjAyIDIyLjgxNDFDMzM3LjkwOSAyMi44NDY2IDMzNy41NDUgMjIuODQ2NiAzMzcuMDgyIDIyLjg0NjZDMzM2LjUyMSAyMi44NDY2IDMzNi4xOSAyMi44NDY2IDMzNS40NjMgMjIuODE0MUwzMzcuMDgyIDE5LjAwNkwzMzguNjAyIDIyLjgxNDFaTTMzMy4xNTEgMzIuMzAwOEMzMzMuMTUxIDMzLjgxMTEgMzMyLjI1OCAzNC43OTU5IDMzMC44MDUgMzQuNzk1OUMzMzAuNTA3IDM0Ljc5NTkgMzMwLjE3NyAzNC43OTU5IDMyOS43OCAzNC43MzAxVjMwLjIzMjdDMzMwLjI0MyAzMC4xNjY5IDMzMC42MzkgMzAuMTMzOSAzMzEuMDM2IDMwLjEzMzlDMzMyLjQyNCAzMC4xMzQzIDMzMy4xNTEgMzEuMDIxMSAzMzMuMTUxIDMyLjMwMDhaTTM2OS41MjggMjMuNjY3NkMzNjkuNTI4IDIyLjAyNiAzNjguNDM4IDIxLjMwMzkgMzY2LjU1NSAyMC41MTYyQzM2NS4yIDE5Ljk1ODMgMzY0LjUwNiAxOS40OTg4IDM2NC41MDYgMTguNDE1MUMzNjQuNTA2IDE3LjQ2MzIgMzY1LjI2NiAxNi44MDY1IDM2Ni41MjEgMTYuODA2NUMzNjcuMzQ4IDE2LjgwNjUgMzY4LjA3NSAxNy4xMDE3IDM2OC43MzUgMTcuNjI3NUMzNjguODAyIDE3LjI2NjQgMzY4Ljk2NyAxNi45MDQ5IDM2OS4xMzEgMTYuNjQyMkMzNjguMzcyIDE2LjI4MTEgMzY3LjQ3OSAxNi4xMTcyIDM2Ni41ODcgMTYuMTE3MkMzNjMuOTQ0IDE2LjExNzIgMzYyLjk4NiAxNy42NiAzNjIuOTg2IDE5LjAwNkMzNjIuOTg2IDIwLjU4MTcgMzYzLjgxMiAyMS4zMzY4IDM2NS44NjEgMjIuMTI0NEMzNjcuMTQ5IDIyLjYxNjkgMzY3LjgxIDIzLjI0MDYgMzY3LjgxIDI0LjM1NjhDMzY3LjgxIDI1LjQ3MyAzNjYuOTUxIDI2LjE5NTIgMzY1Ljc2MiAyNi4xOTUyQzM2NS4wMzUgMjYuMTk1MiAzNjMuODc5IDI1LjgzNDEgMzYzLjA1MiAyNS4xMTE5QzM2My4wMiAyNS41Mzg5IDM2Mi45ODYgMjUuOSAzNjIuODg3IDI2LjI2MTFDMzYzLjM4MyAyNi41MjM4IDM2NC42MDYgMjYuOTE3NCAzNjUuNzI5IDI2LjkxNzRDMzY4LjUwNCAyNi45MTc0IDM2OS41MjggMjUuMjQzMyAzNjkuNTI4IDIzLjY2NzZWMjMuNjY3NloiIGZpbGw9IiMwMzY1NTUiLz4NCjxwYXRoIGQ9Ik02NDAuNDE2IDIwLjU1NzNDNjM4LjY3MSAxOS44MzU0IDYzNy42MzEgMTkuNTU1MSA2MzYuNTk4IDE5LjU1NTFDNjM1LjUxNCAxOS41NTUxIDYzNC44MTkgMTkuOTE3IDYzNC44MTkgMjAuNDc2NUM2MzQuODE5IDIyLjE2NDUgNjQwLjk2MiAyMS42ODkzIDY0MC45NjIgMjUuNTkzNkM2NDAuOTYyIDI3Ljc0NjQgNjM5LjAyNCAyOC45OTc0IDYzNi4zMzIgMjguOTk3NEM2MzQuMjIgMjguOTk3NCA2MzMuMTggMjguNDg4IDYzMS45ODMgMjcuOTExNlYyNS40OTYyQzYzMy43MSAyNi41NjM1IDYzNC43NjggMjYuOTQwMSA2MzYuMTAxIDI2Ljk0MDFDNjM3LjI1NiAyNi45NDAxIDYzNy44NzkgMjYuNTYzNSA2MzcuODc5IDI1LjkwNjNDNjM3Ljg3OSAyNC4wNjg1IDYzMS43MzcgMjQuNzQxNSA2MzEuNzM3IDIwLjcyMTNDNjMxLjczNyAxOC43ODI3IDYzMy41MzQgMTcuNDk5IDYzNi4zMzIgMTcuNDk5QzYzNy42ODIgMTcuNDk5IDYzOC45MDEgMTcuNzYzNSA2NDAuNDE2IDE4LjM3MDdWMjAuNTU3M1pNNjQ5LjAxNiAyOC40ODQxQzY0Ny45OTIgMjguODMwNiA2NDcuMTI2IDI4Ljk5NTQgNjQ2LjI2MiAyOC45OTU0QzY0My40MDIgMjguOTk1NCA2NDEuNTUyIDI3LjQ0MjIgNjQxLjU1MiAyNS4wNzkyQzY0MS41NTIgMjIuNzU5NCA2NDMuNDczIDIxLjEyMDIgNjQ2LjE1NiAyMS4xMjAyQzY0Ni45ODUgMjEuMTIwMiA2NDguMDQ0IDIxLjMxODIgNjQ4Ljg5MSAyMS42MTIzVjIzLjM4ODFDNjQ4LjIyMSAyMy4wNTYyIDY0Ny40NDQgMjIuODc0MSA2NDYuODA5IDIyLjg3NDFDNjQ1LjI3MyAyMi44NzQxIDY0NC4yODYgMjMuNzM0MyA2NDQuMjg2IDI1LjA2MTlDNjQ0LjI4NiAyNi40MDggNjQ1LjI1NiAyNy4yOTQgNjQ2LjcyIDI3LjI5NEM2NDcuMzM3IDI3LjI5NCA2NDcuODg2IDI3LjE2MjMgNjQ5LjAxNiAyNi43NjhMNjQ5LjAxNiAyOC40ODQxWk02NzEuMzIgMjQuMjA5QzY3MS40MjUgMjMuMTU0OCA2NzIuMDgxIDIyLjU0NTcgNjczLjA4NyAyMi41NDU3QzY3NC4wNzYgMjIuNTQ1NyA2NzQuNzQ2IDIzLjE3MjEgNjc0Ljg1MiAyNC4yMDlINjcxLjMyWk02NzIuOTEgMjEuMTIyOUM2NzAuNCAyMS4xMjI5IDY2OC42MTQgMjIuNzc1NSA2NjguNjE0IDI1LjEwMTJDNjY4LjYxNCAyNy40NDQxIDY3MC40NzEgMjguOTk1NCA2NzMuMzM1IDI4Ljk5NTRDNjczLjk3IDI4Ljk5NTQgNjc1LjUwNCAyOC45OTU0IDY3Ni45NjYgMjcuOTg3VjI2LjUwNDJDNjc1Ljc2OSAyNy4yOTkzIDY3NC45NzcgMjcuNTczMSA2NzMuOTU1IDI3LjU3MzFDNjcyLjM0MSAyNy41NzMxIDY3MS4zNTQgMjYuNzk0OSA2NzEuMjY1IDI1LjQ2NjZINjc3LjExQzY3Ny4yMzIgMjIuNjkzOSA2NzUuMjc5IDIxLjEyMjkgNjcyLjkxIDIxLjEyMjlWMjEuMTIyOVpNNjc4LjA5OSAyOC44NTcySDY4MC42NTRWMjEuMjYyN0g2NzguMDk5VjI4Ljg1NzJaTTY4Ny43NjcgMjYuNzgxNUM2ODcuMjM0IDI3LjIyODEgNjg2Ljc5MiAyNy40MDcyIDY4Ni4yNDYgMjcuNDA3MkM2ODUuMDQzIDI3LjQwNzIgNjg0LjI4MSAyNi40ODM4IDY4NC4yODEgMjUuMTAwNEM2ODQuMjgxIDIzLjU4NDEgNjg1LjA0MyAyMi43MTAxIDY4Ni4zMzEgMjIuNzEwMUM2ODYuNzkyIDIyLjcxMDEgNjg3LjM5NCAyMi45MDggNjg3Ljc2NyAyMy4xNTU5VjI2Ljc4MTVaTTY4Ny43NjcgMTcuNjM5MVYyMS41OTU4QzY4Ny4wNzYgMjEuMjg0NyA2ODYuMzg4IDIxLjEyMDIgNjg1LjY0NCAyMS4xMjAyQzY4My4zMTMgMjEuMTIwMiA2ODEuNyAyMi43MjY2IDY4MS43IDI1LjA1MDdDNjgxLjcgMjcuMzI0OCA2ODMuMzEzIDI4Ljk5NzQgNjg1LjUgMjguOTk3NEM2ODYuMzY3IDI4Ljk5NzQgNjg3LjAzNyAyOC43ODU2IDY4Ny43NjcgMjguMjQzNVYyOC44NTQ5SDY5MC4zMjJWMTcuNjM5MUg2ODcuNzY3Wk02OTQuMTA1IDI0LjIwOUM2OTQuMjExIDIzLjE1NDggNjk0Ljg2NCAyMi41NDU3IDY5NS44NjggMjIuNTQ1N0M2OTYuODU4IDIyLjU0NTcgNjk3LjUzNSAyMy4xNzIxIDY5Ny42NDEgMjQuMjA5SDY5NC4xMDVaTTY5NS42OTQgMjEuMTIyOUM2OTMuMTg0IDIxLjEyMjkgNjkxLjQgMjIuNzc1NSA2OTEuNCAyNS4xMDEyQzY5MS40IDI3LjQ0NDEgNjkzLjI1OSAyOC45OTU0IDY5Ni4xMTkgMjguOTk1NEM2OTYuNzUzIDI4Ljk5NTQgNjk4LjI5IDI4Ljk5NTQgNjk5Ljc1NSAyNy45ODdWMjYuNTA0MkM2OTguNTU3IDI3LjI5OTMgNjk3Ljc2MyAyNy41NzMxIDY5Ni43MzYgMjcuNTczMUM2OTUuMTMxIDI3LjU3MzEgNjk0LjE0IDI2Ljc5NDkgNjk0LjA1MSAyNS40NjY2SDY5OS44OTRDNzAwLjAxNSAyMi42OTM5IDY5OC4wNjEgMjEuMTIyOSA2OTUuNjk0IDIxLjEyMjkiIGZpbGw9IiMwMDlFNEQiLz4NCjxwYXRoIGQ9Ik03MDMuNzIxIDIzLjQzNjhINzAzLjc1OEM3MDQuNTE3IDIxLjg1NjIgNzA1LjM2NiAyMS4xMTUgNzA2LjM1MiAyMS4xMTVDNzA2Ljg2MiAyMS4xMTUgNzA3LjMwMyAyMS4yOTY0IDcwOC4wNDQgMjEuODA3Nkw3MDcuMzQxIDIzLjkxMzNDNzA2LjY3IDIzLjUxODYgNzA2LjIyOSAyMy4zNTM1IDcwNS44MjMgMjMuMzUzNUM3MDQuODg2IDIzLjM1MzUgNzA0LjI4NiAyNC4xNzc1IDcwMy43MjEgMjUuNTcwNFYyOC44NDY2SDcwMS4xNjJWMjEuMjU0MUg3MDMuNzIxVjIzLjQzNjhaTTY4MC43NzUgMTguMDY3NEM2ODEuMDE1IDE4LjY1NzUgNjgwLjU4MyAxOS40ODA1IDY3OS44MTQgMTkuOTA0QzY3OS4wNDEgMjAuMzI3MSA2NzguMjI0IDIwLjE5MjggNjc3Ljk4NiAxOS42MDI3QzY3Ny43NDMgMTkuMDExNyA2NzguMTczIDE4LjE4NzcgNjc4Ljk0NSAxNy43NjY2QzY3OS43MTYgMTcuMzQxMSA2ODAuNTMzIDE3LjQ3NTkgNjgwLjc3NSAxOC4wNjc0WiIgZmlsbD0iIzAwOUU0RCIvPg0KPHBhdGggZD0iTTY1OC4yMiAyNC4wMjMxQzY1OC4yMiAyMS45NjUxIDY1Ni43MTkgMjEuMTIyNiA2NTUuMjM5IDIxLjEyMjZDNjU0LjIzMiAyMS4xMjI2IDY1My40MDQgMjEuNTE4NCA2NTIuNjY0IDIyLjM5MjFINjUyLjYyOVYxNy42MzkySDY1MC4wNzFWMjguODM1M0g2NTIuNjI5VjI0LjAyMzFDNjUzLjIyOCAyMy4yMTYxIDY1My43MzggMjIuODcxMSA2NTQuMzM4IDIyLjg3MTFDNjU1LjEzNCAyMi44NzExIDY1NS42NjIgMjMuMzk4NiA2NTUuNjYyIDI0LjUzMjlWMjcuMjAwOEM2NTYuNTIgMjYuNzg5NiA2NTcuMzkzIDI2LjUzNzQgNjU4LjIyIDI2LjQ0MzhWMjQuMDIzMVpNNjY0LjYzNiAyMS4xMTk5QzY2My41OTQgMjEuMTE5OSA2NjIuNzk5IDIxLjQ4MTEgNjYxLjk4NCAyMi4zNDkzVjIxLjI2MjRINjU5LjQyOFYyNi40MjM0QzY2MC4zMTMgMjYuNTA1OCA2NjEuNDQzIDI2Ljg4NDcgNjYxLjk4NCAyNy41MTA0VjIzLjk2MzRDNjYyLjY1NyAyMy4wMjMyIDY2My4xMzQgMjIuNzA5NyA2NjMuNzcgMjIuNzA5N0M2NjQuNDk0IDIyLjcwOTcgNjY1LjA0NSAyMy4xNTU2IDY2NS4wNDUgMjQuMjI2NFYyOC44MzcySDY2Ny42MDJWMjQuMDI4OUM2NjcuNjAyIDIxLjc5MjYgNjY1LjkwOCAyMS4xMTk5IDY2NC42MzYgMjEuMTE5OVYyMS4xMTk5Wk02NjkuMDE1IDMxLjAxODFINjY2LjA0M1YzMi45ODY0SDY2OC45MDlWMzMuODMxMkg2NjYuMDQzVjM1Ljg2MTlINjY5LjEwM1YzNi43MDU1SDY2NS4wNDZWMzAuMTc1Mkg2NjkuMDE1TDY2OS4wMTUgMzEuMDE4MVpNNjcxLjQ0MiAzNi43MDkzSDY3Mi4zNTJWMzAuMTczM0g2NzEuNDQyVjM2LjcwOTNaTTY3Ni44NTkgMzMuMDQ4NEM2NzcuNTA0IDMzLjA0ODQgNjc3LjkwNCAzMy40NjMxIDY3Ny45MzUgMzQuMTE0Mkg2NzUuNjE2QzY3NS43NDIgMzMuNDM0MiA2NzYuMTYxIDMzLjA0ODQgNjc2Ljg1OSAzMy4wNDg0Wk02NzUuNiAzNC42ODFINjc4Ljg0MkM2NzguODQyIDMzLjA4NjkgNjc4LjA2MiAzMi4zMTggNjc2LjgzOCAzMi4zMThDNjc1LjU2OSAzMi4zMTggNjc0LjY4OCAzMy4xOTI0IDY3NC42ODggMzQuNDk2OUM2NzQuNjg4IDM1LjY4OSA2NzUuNDg0IDM2Ljc4OTggNjc2LjkxNyAzNi43ODk4QzY3Ny42OTggMzYuNzg5OCA2NzguMjAzIDM2LjYyODEgNjc4Ljc2MyAzNi4yODJWMzUuNDU2QzY3OC4yMjIgMzUuNzg1NiA2NzcuNjk4IDM1Ljk3NTggNjc3LjE0NyAzNS45NzU4QzY3Ni4yNjUgMzUuOTc1OCA2NzUuNzQyIDM1LjUzNSA2NzUuNiAzNC42ODA2VjM0LjY4MVpNNjg0Ljc4NiAzMy41MzA5QzY4NC4yNjMgMzMuMTk2NiA2ODMuOTE0IDMzLjA5ODUgNjgzLjUxNSAzMy4wOTg1QzY4Mi42ODIgMzMuMDk4NSA2ODIuMTA1IDMzLjY5NDUgNjgyLjEwNSAzNC41NjdDNjgyLjEwNSAzNS40NTYgNjgyLjcxOSAzNS45OTE2IDY4My42NjggMzUuOTkxNkM2ODQuMDU4IDM1Ljk5MTYgNjg0LjQzIDM1Ljg5NzMgNjg0Ljg4OCAzNS43MDU5VjM2LjU0MjZDNjg0LjU4MiAzNi42Nzc0IDY4My45OTcgMzYuNzg5OCA2ODMuNTE1IDM2Ljc4OThDNjgyLjEzNiAzNi43ODk4IDY4MS4xOCAzNS45MDYyIDY4MS4xOCAzNC42NDMyQzY4MS4xOCAzMy4yMTc4IDY4Mi4wNTQgMzIuMzE4IDY4My40NTMgMzIuMzE4QzY4My45ODcgMzIuMzE4IDY4NC4zNDYgMzIuNDMzOSA2ODQuNzg3IDMyLjYxNDVMNjg0Ljc4NiAzMy41MzA5Wk02ODguOTM0IDMyLjQwMDRINjkwLjM5NVYzMy4xNjUxSDY4OC45MzRWMzUuMzc1MkM2ODguOTM0IDM1Ljg4MTEgNjg5LjMyNyAzNi4wMjc0IDY4OS41OTMgMzYuMDI3NEM2ODkuOTIyIDM2LjAyNzQgNjkwLjI2MiAzNS45MiA2OTAuNjMgMzUuNzA3OVYzNi41MDM3QzY5MC4zMSAzNi42Njc4IDY4OS44MiAzNi43ODk4IDY4OS41MTkgMzYuNzg5OEM2ODguNTI4IDM2Ljc4OTggNjg4LjAyNyAzNi4yMTYxIDY4OC4wMjcgMzUuNDM5MVYzMy4xNjUxSDY4Ny4yMjRWMzMuMDcwM0w2ODguOTM0IDMxLjUxMDJWMzIuNDAwNFpNNjkzLjg3NiAzMi40MDA0VjMzLjM5NjlINjkzLjg5NUM2OTQuMzU5IDMyLjYzNDUgNjk0LjggMzIuMzE4IDY5NS4yMyAzMi4zMThDNjk1LjYwMSAzMi4zMTggNjk1Ljk0NyAzMi40ODAxIDY5Ni4zMjkgMzIuODE2Nkw2OTUuODQ3IDMzLjU2NDRDNjk1LjU3IDMzLjMwOTEgNjk1LjIxMSAzMy4xMzMxIDY5NC45OTUgMzMuMTMzMUM2OTQuMzY4IDMzLjEzMzEgNjkzLjg3NiAzMy43MjY4IDY5My44NzYgMzQuNDYyNlYzNi43MDkzSDY5Mi45NjdWMzIuNDAwNEg2OTMuODc2Wk03MDUuNjU3IDMzLjUzMDlDNzA1LjEzMSAzMy4xOTY2IDcwNC43ODIgMzMuMDk4NSA3MDQuMzgxIDMzLjA5ODVDNzAzLjU0OSAzMy4wOTg1IDcwMi45NzcgMzMuNjk0NSA3MDIuOTc3IDM0LjU2N0M3MDIuOTc3IDM1LjQ1NiA3MDMuNTkyIDM1Ljk5MTYgNzA0LjUzNSAzNS45OTE2QzcwNC45MjUgMzUuOTkxNiA3MDUuMjk1IDM1Ljg5NzMgNzA1Ljc2IDM1LjcwNTlWMzYuNTQyNkM3MDUuNDQ3IDM2LjY3NzQgNzA0Ljg2MiAzNi43ODk4IDcwNC4zOCAzNi43ODk4QzcwMy4wMDQgMzYuNzg5OCA3MDIuMDQ0IDM1LjkwNjIgNzAyLjA0NCAzNC42NDMyQzcwMi4wNDQgMzMuMjE3OCA3MDIuOTIyIDMyLjMxOCA3MDQuMzIgMzIuMzE4QzcwNC44NTUgMzIuMzE4IDcwNS4yMTIgMzIuNDMzOSA3MDUuNjU3IDMyLjYxNDVMNzA1LjY1NyAzMy41MzA5Wk02OTguNzQyIDM2LjcwOTNINjk5LjY1MlYzMi40MDA4SDY5OC43NDJWMzYuNzA5M1oiIGZpbGw9IiMwMDlFNEQiLz4NCjxwYXRoIGQ9Ik02OTkuNjg0IDMwLjg1MjVDNjk5Ljc3MyAzMS4wNjA0IDY5OS42MTggMzEuMzU0NCA2OTkuMzQ0IDMxLjUwNDFDNjk5LjA2OCAzMS42NTQzIDY5OC43NzYgMzEuNjA2MiA2OTguNjkzIDMxLjM5NzhDNjk4LjYxIDMxLjE4NzQgNjk4Ljc2MSAzMC44OTU4IDY5OS4wMzggMzAuNzQ1NkM2OTkuMzExIDMwLjU5MzUgNjk5LjYwMSAzMC42NDIxIDY5OS42ODQgMzAuODUyNVYzMC44NTI1Wk02NTguOTQgMzEuMjAwOUM2NTguNzc5IDMxLjIwMDkgNjU4LjcxMSAzMS4yMjU1IDY1OC42NDYgMzEuMjkzOEM2NTguNjIgMzEuMzIwMyA2NTguNjEgMzEuMzQ3MiA2NTguNiAzMS40MDExTDY1Ny43ODQgMzQuMjg3QzY1Ny41OTMgMzUuMjk5MiA2NTYuMjU5IDM2LjMwOTkgNjU0LjUyMSAzNi4zMDk5SDY1Mi4xMDRMNjUyLjUyMyAzNC44MjdINjU0LjA3NkM2NTQuMjM0IDM0LjgyNyA2NTQuMzU4IDM0Ljc3MjEgNjU0LjQ2MiAzNC42NjQzQzY1NC41IDM0LjYyMjUgNjU0LjU1IDM0LjU1NyA2NTQuNTU2IDM0LjQ4OTZMNjU1LjIwMSAzMS45NjgxQzY1NS4zOTEgMzAuOTU1NSA2NTYuNTM4IDI5LjgzNjkgNjU4LjI3NiAyOS44MzY5SDY2MC43NTFMNjYwLjQzNSAzMS4yMDA5SDY1OC45NFpNNjU5LjQ5NyAzMi45NTk2TDY1OS43NzMgMzIuMDI1OUg2NjIuMjg4QzY2Mi41OTggMzAuNjcyIDY2Mi4zNTQgMjkuNDE3NyA2NjEuNDczIDI4LjU5NjFDNjU5LjY4OSAyNi45MzMyIDY1NS45NTcgMjcuNDk4MyA2NTMuMTc3IDI5Ljk3NzlDNjUyLjc0MyAzMC4zNjMgNjUyLjM3NiAzMC43NzkzIDY1Mi4wNDIgMzEuMjA0OEg2NTMuNTU2TDY1My4yMDQgMzIuMTQwNEg2NTEuMzk1QzY1MS4yMjIgMzIuNDM1NCA2NTEuMDYgMzIuNzI4MSA2NTAuOTM2IDMzLjAyNUg2NTMuMDgxTDY1Mi43MzcgMzMuOTYwN0g2NTAuNjNDNjUwLjI2OSAzNS4zOTAxIDY1MC40OTkgMzYuNzIzMyA2NTEuNDA2IDM3LjU2OTlDNjUzLjE2NyAzOS4yMTE2IDY1Ni44ODggMzguNjM0NiA2NTkuNjY3IDM2LjE1NTRDNjYwLjE1MyAzNS43MjQyIDY2MC41NTUgMzUuMjU4NyA2NjAuOTE4IDM0Ljc4MDhINjU4Ljk3M0w2NTkuMjY5IDMzLjg0NzFINjYxLjU0M0M2NjEuNzEgMzMuNTUwMSA2NjEuODYzIDMzLjI1NjUgNjYxLjk4MyAzMi45NTk2SDY1OS40OTdaIiBmaWxsPSIjMDA5RTREIi8+DQo8ZyBjbGlwLXBhdGg9InVybCgjY2xpcDBfNThfMTExKSI+DQo8cGF0aCBkPSJNNzc1LjA2OCA0MS4yMjc0Qzc2Ni4yODUgNDIuMDQ2MyA3NTcuMTMxIDQwLjc1NjQgNzU1Ljg0OCAzMy44MTlDNzU1LjIyMSAzMC4zOTkgNzU2Ljc2NSAyNi43NzI1IDc1OC44MSAyNC41MTg0VjIzLjMxNDhDNzU1LjEyNiAyNi41OCA3NTMuMTMgMzAuNzExNSA3NTQuMjggMzUuNTkyQzc1NS43NDggNDEuODUxOCA3NjMuNjAzIDQ1LjM5NjcgNzc1LjU5NSA0NC4yMTk1Qzc4MC4zNDIgNDMuNzU0NSA3ODYuNTUgNDIuMjEyIDc5MC44NjkgMzkuODE0NFYzNi40MTA5Qzc4Ni45NDkgMzguNzcxMyA3ODAuNDY4IDQwLjcyMTEgNzc1LjA2OCA0MS4yMjc0VjQxLjIyNzRaTTc5OC4yMDUgMjMuMjMzNUM3OTYuMTIyIDEyLjk1MzMgNzc2LjM3MyAxMi4zMDE2IDc2My42NDMgMjAuMTMzOFYyMC45OTg5Qzc3Ni4zNTkgMTQuMzkxNSA3OTQuMzk1IDE0LjQzMTcgNzk2LjAzNyAyMy45MDE2Qzc5Ni41ODkgMjcuMDM0MiA3OTQuODQzIDMwLjI5NzggNzkxLjcyMyAzMi4xNzdWMzQuNjM0MkM3OTUuNDc2IDMzLjI0MzIgNzk5LjMyNCAyOC43NDQyIDc5OC4yMDUgMjMuMjMzNVYyMy4yMzM1WiIgZmlsbD0iIzBFN0RDMiIvPg0KPHBhdGggZD0iTTc5MC4xNTkgMjEuNzM2OEg3ODcuODU2VjMyLjEwM0M3ODcuODU2IDMzLjMxNzkgNzg4LjQzNyAzNC4zNzQ0IDc5MC4xNTkgMzQuNTQzMlYyMS43MzY4Wk03NjIuNzM5IDI1LjUyMTdINzYwLjQzMkw3NjAuNDMxIDMyLjI5NDNDNzYwLjQzMSAzMy41MTM0IDc2MS4wMTMgMzQuNTY4OCA3NjIuNzM5IDM0LjczNDRWMjUuNTIxN1YyNS41MjE3Wk03NjAuNDMyIDIyLjA1MjFINzYyLjczMlYyNC4yNTg0SDc2MC40MzJWMjIuMDUyMVpNNzc2LjUzIDM0LjYyNzJDNzc0LjY2NiAzNC42MjcyIDc3My44NzcgMzMuMzE3NyA3NzMuODc3IDMyLjAyOFYyMy4wMzU1SDc3Ni4xNlYyNS41MjE3SDc3Ny44NzlWMjcuMzg1M0g3NzYuMTZWMzEuODg1NEM3NzYuMTYgMzIuNDExMyA3NzYuNDA3IDMyLjcwNDQgNzc2Ljk1IDMyLjcwNDRINzc3Ljg3OVYzNC42MjcyTDc3Ni41MyAzNC42MjcyVjM0LjYyNzJaTTc4MC43MzEgMzAuNzk2MUM3ODAuNzMxIDMxLjk3NjggNzgxLjQ2MSAzMi44NDQ2IDc4Mi43NTQgMzIuODQ0NkM3ODMuNzY2IDMyLjg0NDYgNzg0LjI2NiAzMi41NjA1IDc4NC44NSAzMS45NzY4TDc4Ni4yNjEgMzMuMzM0OUM3ODUuMzU3IDM0LjIzNzkgNzg0LjQwOSAzNC43ODcgNzgyLjczNyAzNC43ODdDNzgwLjU1MiAzNC43ODcgNzc4LjQ1OSAzMy41ODE5IDc3OC40NTkgMzAuMDY4NkM3NzguNDU5IDI3LjA2NTEgNzgwLjI4OCAyNS4zNjczIDc4Mi42ODYgMjUuMzY3M0M3ODUuMTI0IDI1LjM2NzMgNzg2LjUyNSAyNy4zNTQ5IDc4Ni41MjUgMjkuOTYzOVYzMC43OTYzSDc4MC43MzFWMzAuNzk2MVpNNzgyLjU4NiAyNy4yNzU2Qzc4MS44MDUgMjcuMjc1NiA3ODEuMjA0IDI3LjY4MjMgNzgwLjk1IDI4LjIzMDlDNzgwLjgwMiAyOC41NjA3IDc4MC43NDcgMjguODE3NyA3ODAuNzMxIDI5LjIyMjlINzg0LjI0OUM3ODQuMjA0IDI4LjIzMDkgNzgzLjc1OSAyNy4yNzU2IDc4Mi41ODYgMjcuMjc1NlpNNzY4LjkzOSAyNy4zODUzQzc2OS42MDggMjcuMzg1MyA3NjkuODg3IDI3LjcxOTggNzY5Ljg4NyAyOC4yNjI2VjM0LjY0MDZINzcyLjE3VjI4LjI0OTJDNzcyLjE3IDI2Ljk1NDIgNzcxLjQ4NyAyNS41MjQxIDc2OS40ODIgMjUuNTI0MUw3NjQuNzY2IDI1LjUyMTdWMzQuNjQwNkg3NjcuMDVWMjcuMzg1M0g3NjguOTM5VjI3LjM4NTNaTTc5Mi42MzcgMjMuNTg5MUM3OTIuMTI5IDIzLjU4OTEgNzkxLjcyNCAyMy4xNzU0IDc5MS43MjQgMjIuNjYyOUM3OTEuNzI0IDIyLjE1MjkgNzkyLjEyOSAyMS43MzY4IDc5Mi42MzcgMjEuNzM2OEM3OTMuMTQyIDIxLjczNjggNzkzLjU1NiAyMi4xNTI5IDc5My41NTYgMjIuNjYyOUM3OTMuNTU2IDIzLjE3NTQgNzkzLjE0MiAyMy41ODkxIDc5Mi42MzcgMjMuNTg5MVpNNzkyLjYzNyAyMS44OTEyQzc5Mi4yMTggMjEuODkxMiA3OTEuODgyIDIyLjI0MDcgNzkxLjg4MiAyMi42NjI5Qzc5MS44ODIgMjMuMDg3NiA3OTIuMjE4IDIzLjQzMDkgNzkyLjYzNyAyMy40MzA5Qzc5My4wNTUgMjMuNDMwOSA3OTMuNDAyIDIzLjA4NzYgNzkzLjQwMiAyMi42NjI5Qzc5My40MDIgMjIuMjQwNyA3OTMuMDU1IDIxLjg5MTIgNzkyLjYzNyAyMS44OTEyWk03OTMuMDQzIDIzLjIxOEg3OTIuODcyQzc5Mi44NjQgMjMuMjE3OSA3OTIuODU3IDIzLjIxNTcgNzkyLjg1MSAyMy4yMTE2Qzc5Mi44NDUgMjMuMjA3NSA3OTIuODQgMjMuMjAxNyA3OTIuODM3IDIzLjE5NDlMNzkyLjYwNSAyMi43OTdDNzkyLjU5OCAyMi43ODg1IDc5Mi41NzkgMjIuNzc4OCA3OTIuNTczIDIyLjc3ODhINzkyLjQ2N1YyMy4xNzU0Qzc5Mi40NjcgMjMuMTk1IDc5Mi40NTMgMjMuMjE4MSA3OTIuNDI4IDIzLjIxODFINzkyLjI3NEM3OTIuMjUxIDIzLjIxODEgNzkyLjIzNSAyMy4xOTUgNzkyLjIzNSAyMy4xNzU0VjIyLjE3NDlDNzkyLjIzNSAyMi4xMTY0IDc5Mi4yNTQgMjIuMDkyNCA3OTIuMzA1IDIyLjA4NUM3OTIuMzYxIDIyLjA3OSA3OTIuNTA1IDIyLjA3MTYgNzkyLjU4NiAyMi4wNzE2Qzc5Mi44NzIgMjIuMDcxNiA3OTMuMDM5IDIyLjE1NjYgNzkzLjAzOSAyMi40MjQ0VjIyLjQ0NEM3OTMuMDM5IDIyLjYwOTQgNzkyLjk1OSAyMi42OTk1IDc5Mi44MzMgMjIuNzM5N0w3OTMuMDc0IDIzLjE1NDdDNzkzLjA3OCAyMy4xNjQgNzkzLjA4IDIzLjE3MzkgNzkzLjA4IDIzLjE4NEM3OTMuMDggMjMuMTk5NyA3OTMuMDcyIDIzLjIxOCA3OTMuMDQzIDIzLjIxOFYyMy4yMThaTTc5Mi44MjEgMjIuNDI0NEM3OTIuODIxIDIyLjMxMjcgNzkyLjc1MiAyMi4yNzczIDc5Mi42MDUgMjIuMjc3M0g3OTIuNDU5VjIyLjU5NDdDNzkyLjQ4MiAyMi41OTQ3IDc5Mi41ODYgMjIuNTk5NiA3OTIuNjA1IDIyLjU5OTZDNzkyLjc1MiAyMi41OTk2IDc5Mi44MjEgMjIuNTUgNzkyLjgyMSAyMi40NDRWMjIuNDI0NFoiIGZpbGw9IiMwRTdEQzIiLz4NCjwvZz4NCjxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMV81OF8xMTEpIj4NCjxwYXRoIGQ9Ik01MzMuNzczIDIwLjk5MTFDNTI5LjI2MyAyMC45OTExIDUyNS41OTkgMjQuNjU0NyA1MjUuNTk5IDI5LjE2NDRDNTI1LjU5OSAzMy42NzQxIDUyOS4yNjMgMzcuMzM3NyA1MzMuNzczIDM3LjMzNzdDNTM4LjI4MiAzNy4zMzc3IDU0MS45NDYgMzMuNjc0MSA1NDEuOTQ2IDI5LjE2NDRDNTQxLjk0NiAyNC42NTQ3IDUzOC4yODIgMjAuOTkxMSA1MzMuNzczIDIwLjk5MTFaTTUzMy43NzMgMzYuNTE4NkM1MjkuNzEzIDM2LjUxODYgNTI2LjQxOSAzMy4yMTUgNTI2LjQxOSAyOS4xNjQ0QzUyNi40MTkgMjUuMTEzNyA1MjkuNzEzIDIxLjgxMDIgNTMzLjc3MyAyMS44MTAyQzUzNy44MzIgMjEuODEwMiA1NDEuMTI3IDI1LjExMzcgNTQxLjEyNyAyOS4xNjQ0QzU0MS4xMjcgMzMuMjE1IDUzNy44MzIgMzYuNTE4NiA1MzMuNzczIDM2LjUxODZaIiBmaWxsPSJibGFjayIvPg0KPHBhdGggZD0iTTUzNi42OSAyMy45MjUyQzUzNi42NjMgMjMuOTA3MiA1MzYuNjI3IDIzLjg5ODIgNTM2LjU5MSAyMy44OTgyQzUzNi40ODMgMjMuODk4MiA1MzYuNDAyIDIzLjk3OTIgNTM2LjQwMiAyNC4wODczVjI2LjY0MzdDNTM2LjQwMiAyNi43MzM3IDUzNi4zMyAyNi44MDU3IDUzNi4yNCAyNi44MDU3SDUzMS4yOUM1MzEuMiAyNi44MDU3IDUzMS4xMzcgMjYuNzMzNyA1MzEuMTI4IDI2LjY0MzdWMjQuMDg3M0M1MzEuMTI4IDI0LjA1MTMgNTMxLjExOSAyNC4wMjQyIDUzMS4xMDEgMjMuOTg4MkM1MzEuMDQ3IDIzLjg5ODIgNTMwLjkzIDIzLjg3MTIgNTMwLjgzOSAyMy45MjUyQzUyOS4wMTIgMjUuMDUwNCA1MjcuOTA1IDI3LjAwMzcgNTI3LjkwNSAyOS4xNjQxQzUyNy45MDUgMzEuMzI0NCA1MjkuMDEyIDMzLjI3NzcgNTMwLjg1NyAzNC40MDI5QzUzMC44ODUgMzQuNDIwOSA1MzAuOTIxIDM0LjQyOTkgNTMwLjk1NyAzNC40Mjk5QzUzMS4wNjUgMzQuNDI5OSA1MzEuMTQ2IDM0LjM0ODkgNTMxLjE0NiAzNC4yNDA5VjMxLjY4NDVDNTMxLjE0NiAzMS41OTQ0IDUzMS4yMTggMzEuNTMxNCA1MzEuMzA4IDMxLjUyMjRINTM2LjI1OEM1MzYuMzQ4IDMxLjUyMjQgNTM2LjQyIDMxLjU5NDQgNTM2LjQyIDMxLjY4NDVWMzQuMjQwOUM1MzYuNDIgMzQuMjc2OSA1MzYuNDI5IDM0LjMwMzkgNTM2LjQ0NyAzNC4zMzk5QzUzNi41MDEgMzQuNDI5OSA1MzYuNjE4IDM0LjQ1NjkgNTM2LjcwOCAzNC40MDI5QzUzOC41NTQgMzMuMjc3NyA1MzkuNjYxIDMxLjMyNDQgNTM5LjY2MSAyOS4xNjQxQzUzOS42NjEgMjcuMDAzNyA1MzguNTM2IDI1LjA1MDQgNTM2LjY5IDIzLjkyNTJWMjMuOTI1MlpNNTMwLjE5MSAzMi4zNjg2TDUzMC4yMTggMzIuNjc0Nkw1MzAuMDIgMzIuNDMxNkM1MjguNDk5IDMwLjUxNDMgNTI4LjQ5OSAyNy44MDQ4IDUzMC4wMiAyNS44ODc1TDUzMC4xOTEgMjUuNjcxNUw1MzAuMjE4IDI1LjY0NDVMNTMwLjE5MSAyNS45NTk2QzUzMC4xNjQgMjYuMjExNiA1MzAuMTU1IDI2LjQ3MjYgNTMwLjE1NSAyNi43MzM3VjMxLjU4NTRDNTMwLjE1NSAzMS44NDY1IDUzMC4xNzMgMzIuMTA3NSA1MzAuMTkxIDMyLjM2ODZaTTUzNi40MDIgMzAuMzg4M0M1MzYuNDAyIDMwLjQ3ODMgNTM2LjMzIDMwLjU1MDMgNTM2LjI0IDMwLjU1MDNINTMxLjI5QzUzMS4yIDMwLjU1MDMgNTMxLjEzNyAzMC40NzgzIDUzMS4xMjggMzAuMzg4M1YyNy45Mzk5QzUzMS4xMjggMjcuODQ5OSA1MzEuMiAyNy43Nzc4IDUzMS4yOSAyNy43Nzc4SDUzNi4yNEM1MzYuMzMgMjcuNzc3OCA1MzYuNDAyIDI3Ljg0OTkgNTM2LjQwMiAyNy45Mzk5VjMwLjM4ODNaTTUzNy41MTkgMzIuNDMxNkw1MzcuMzIxIDMyLjY3NDZMNTM3LjM0OCAzMi4zNjg2QzUzNy4zNzUgMzIuMTE2NSA1MzcuMzg0IDMxLjg1NTUgNTM3LjM4NCAzMS41OTQ0VjI2LjczMzdDNTM3LjM4NCAyNi40NzI2IDUzNy4zNzUgMjYuMjExNiA1MzcuMzQ4IDI1Ljk1OTZMNTM3LjMzOSAyNS44MjQ1TDUzNy4zMyAyNS42ODA1VjI1LjY0NDVMNTM3LjUxOSAyNS44ODc1QzUzOC4yNTcgMjYuODA1NyA1MzguNjYyIDI3Ljk3NTkgNTM4LjY2MiAyOS4xNTUxQzUzOC42NjIgMzAuMzM0MiA1MzguMjU3IDMxLjUxMzQgNTM3LjUxOSAzMi40MzE2VjMyLjQzMTZaIiBmaWxsPSJibGFjayIvPg0KPHBhdGggZD0iTTU1NC4yNzYgMjkuMDIwMkM1NTQuMjMxIDI5LjAwMjIgNTU0LjE3NyAyOC45ODQyIDU1NC4xNzcgMjguOTMwMkM1NTQuMTc3IDI4Ljg5NDIgNTU0LjE5NSAyOC44NjcyIDU1NC4yMzEgMjguODQ5MkM1NTQuMjk0IDI4LjgyMjIgNTU1Ljg1MSAyOC4yNjQxIDU1NS44NTEgMjYuNDI3OEM1NTUuODUxIDI0LjM4NDUgNTU0LjQ3NCAyMy4xNjkzIDU1Mi4xNTIgMjMuMTY5M0g1NDYuNTI2VjM1LjE3NzJINTUyLjY2NUM1NTQuNDU2IDM1LjE3NzIgNTU2LjM4MiAzMy45MDggNTU2LjM4MiAzMS44NjQ2QzU1Ni4zODIgMjkuOTExMyA1NTQuOTA2IDI5LjIyNzIgNTU0LjI3NiAyOS4wMjAyVjI5LjAyMDJaTTU0OS4zNjEgMjUuNjI2N0M1NDkuMzYxIDI1LjU4MTcgNTQ5LjM5NyAyNS41NDU2IDU0OS40NDIgMjUuNTQ1Nkg1NTEuNjc1QzU1Mi40MTMgMjUuNTQ1NiA1NTIuOTE3IDI2LjA0MDcgNTUyLjkxNyAyNi43Nzg4QzU1Mi45MTcgMjcuMzU0OSA1NTIuNDY3IDI3Ljk3NiA1NTEuNjIxIDI3Ljk3Nkg1NDkuNDQyQzU0OS4zOTcgMjcuOTc2IDU0OS4zNjEgMjcuOTQgNTQ5LjM2MSAyNy44OTVWMjUuNjI2N1pNNTUxLjY3NSAzMi44MDk4SDU0OS40NDJDNTQ5LjM5NyAzMi44MDk4IDU0OS4zNjEgMzIuNzczOCA1NDkuMzYxIDMyLjcyODhWMzAuMzM0NEM1NDkuMzYxIDMwLjI4OTQgNTQ5LjM5NyAzMC4yNTM0IDU0OS40NDIgMzAuMjUzNEg1NTEuNjIxQzU1Mi42OTIgMzAuMjUzNCA1NTMuMzA0IDMwLjcxMjUgNTUzLjMwNCAzMS41MjI2QzU1My4zMDQgMzIuMzU5NyA1NTIuNzM3IDMyLjgwOTggNTUxLjY3NSAzMi44MDk4VjMyLjgwOThaTTU3NS4zODQgMjcuOTQ5TDU3NC45NTIgMjcuODU5QzU3My45OCAyNy42NTIgNTczLjAzNSAyNy4zOTA5IDU3My4wMzUgMjYuNTUzOEM1NzMuMDM1IDI1LjcxNjcgNTczLjgxOCAyNS4zMzg2IDU3NC41OTIgMjUuMzM4NkM1NzUuNTAxIDI1LjMzODYgNTc2LjQwMSAyNS43NDM3IDU3Ny4wODYgMjYuNDQ1OEw1NzguODY4IDI0LjY4MTVDNTc4LjEwMyAyMy44MzU0IDU3Ni43NDQgMjIuODYzMiA1NzQuNTQ3IDIyLjg2MzJDNTcxLjkwMSAyMi44NjMyIDU3MC4xMTggMjQuMzY2NSA1NzAuMTE4IDI2LjYwNzhDNTcwLjExOCAyOC45NzUyIDU3MS45ODIgMjkuODY2MyA1NzMuNTQ4IDMwLjE5OTRMNTczLjk3MSAzMC4yODk0QzU3NS40OTIgMzAuNjEzNSA1NzYuMjEyIDMwLjg1NjUgNTc2LjIxMiAzMS43MjA2QzU3Ni4yMTIgMzIuNDk0NyA1NzUuNTE5IDMzLjAwNzggNTc0LjQ5MyAzMy4wMDc4QzU3My4yODcgMzMuMDA3OCA1NzIuMjE2IDMyLjQ3NjcgNTcxLjQwNiAzMS40Nzc2TDU2OS41NzggMzMuMjY4OUM1NzAuNTUxIDM0LjQyMTEgNTcxLjgzOCAzNS40NjUyIDU3NC41MjkgMzUuNDY1MkM1NzYuODI1IDM1LjQ2NTIgNTc5LjE1NiAzNC4xMzMgNTc5LjE1NiAzMS41NzY2QzU3OS4xNDcgMjguOTU3MiA1NzcuMzY1IDI4LjM2MzEgNTc1LjM4NCAyNy45NDlWMjcuOTQ5Wk01OTkuMTAzIDIzLjE2OTNWMjcuNTYyQzU5OS4xMDMgMjcuNjA3IDU5OS4wNjcgMjcuNjQzIDU5OS4wMjIgMjcuNjQzSDU5NS4zMzFDNTk1LjI4NiAyNy42NDMgNTk1LjI1IDI3LjYwNyA1OTUuMjUgMjcuNTYyVjIzLjE2OTNINTkyLjIyNlYzNS4xNzcySDU5NS4yNVYzMC40NjA0QzU5NS4yNSAzMC40MTU0IDU5NS4yODYgMzAuMzc5NCA1OTUuMzMxIDMwLjM3OTRINTk5LjAyMkM1OTkuMDY3IDMwLjM3OTQgNTk5LjEwMyAzMC40MTU0IDU5OS4xMDMgMzAuNDYwNFYzNS4xNzcySDYwMi4xNDZWMjMuMTY5M0g1OTkuMTAzWk01ODYuMTQxIDMyLjcxOThDNTg0Ljc4MiAzMi43MTk4IDU4My4zMTUgMzEuNTg1NiA1ODMuMzE1IDI5LjA5MjJDNTgzLjMxNSAyNi44MTQ4IDU4NC42OTIgMjUuNjI2NyA1ODYuMDUxIDI1LjYyNjdDNTg3LjA0MSAyNS42MjY3IDU4Ny43MzQgMjYuMDQwNyA1ODguMjgzIDI2Ljk1ODlMNTkwLjYwNiAyNS40MTk2QzU4OS40MTggMjMuNjczMyA1ODguMDA0IDIyLjg4MTIgNTg2LjAzMyAyMi44ODEyQzU4Mi4xNzEgMjIuODgxMiA1ODAuNDQzIDI2LjAwNDcgNTgwLjQ0MyAyOS4wOTIyQzU4MC40NDMgMzIuODQ1OCA1ODIuNzI5IDM1LjQ2NTIgNTg1Ljk5NyAzNS40NjUyQzU4OC40MjcgMzUuNDY1MiA1ODkuNTM1IDM0LjU3NDEgNTkwLjY5NiAzMi45MjY4TDU4OC4zNTUgMzEuMzUxNkM1ODcuODMzIDMyLjE5NzcgNTg3LjI2NiAzMi43MTk4IDU4Ni4xNDEgMzIuNzE5OFpNNTYzLjE3OCAyMi44NjMyQzU1OS44NzUgMjIuODYzMiA1NTcuNjYxIDI1LjM5MjYgNTU3LjY2MSAyOS4xNjQyQzU1Ny42NjEgMzIuOTM1OCA1NTkuODc1IDM1LjQ2NTIgNTYzLjE3OCAzNS40NjUyQzU2Ni40ODIgMzUuNDY1MiA1NjguNjk2IDMyLjkzNTggNTY4LjY5NiAyOS4xNjQyQzU2OC42OTYgMjUuMzkyNiA1NjYuNDgyIDIyLjg2MzIgNTYzLjE3OCAyMi44NjMyVjIyLjg2MzJaTTU2My4xNzggMzIuNzE5OEM1NjEuNTU4IDMyLjcxOTggNTYwLjUxNCAzMS4zMjQ2IDU2MC41MTQgMjkuMTY0MkM1NjAuNTE0IDI3LjAxMjkgNTYxLjU1OCAyNS42MjY3IDU2My4xNzggMjUuNjI2N0M1NjQuODA4IDI1LjYyNjcgNTY1Ljg2MSAyNy4wMTI5IDU2NS44NjEgMjkuMTY0MkM1NjUuODYxIDMxLjMyNDYgNTY0LjgwOCAzMi43MTk4IDU2My4xNzggMzIuNzE5OFoiIGZpbGw9IiNGODAwMDAiLz4NCjwvZz4NCjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTQ2LjM0NCAyMi4xODExQzE0Ny41OTUgMjIuMjg1NCAxNDguODQ1IDIxLjU1NTMgMTQ5LjYyNyAyMC42Mjk4QzE1MC4zOTUgMTkuNjc4MSAxNTAuOTAzIDE4LjQwMDUgMTUwLjc3MyAxNy4wOTY5QzE0OS42NjYgMTcuMTQ5MSAxNDguMjk4IDE3LjgyNjkgMTQ3LjUxNyAxOC43Nzg2QzE0Ni44IDE5LjU5OTkgMTQ2LjE4OCAyMC45Mjk2IDE0Ni4zNDQgMjIuMTgxMVpNMTQ3Ljg0MSAyMy4wNzk3QzE0OC42NTMgMjIuNzYwNiAxNDkuNjU4IDIyLjM2NTYgMTUwLjc2IDIyLjQyOTFDMTUxLjQ2MyAyMi40ODEyIDE1My40OTUgMjIuNjg5OCAxNTQuNzk4IDI0LjYxOTJDMTU0Ljc5MiAyNC42MjM3IDE1NC43NzggMjQuNjMyMyAxNTQuNzU5IDI0LjY0NUMxNTQuNDM2IDI0Ljg1NDggMTUyLjM5IDI2LjE4NzEgMTUyLjQxNCAyOC44MTY5QzE1Mi40MzkgMzEuOTQ5OSAxNTQuOTg4IDMzLjExODMgMTU1LjMyMiAzMy4yNzExQzE1NS4zNDQgMzMuMjgxMSAxNTUuMzU2IDMzLjI4NjcgMTU1LjM1OCAzMy4yODgzQzE1NS4zNTYgMzMuMjkyNiAxNTUuMzU0IDMzLjMwMSAxNTUuMzUgMzMuMzEzM0MxNTUuMjgzIDMzLjUyODggMTU0Ljg0NSAzNC45NDg5IDE1My44NDcgMzYuNDA0QzE1Mi45MjIgMzcuNzU5OCAxNTEuOTcxIDM5LjA4OTUgMTUwLjQ2IDM5LjExNTZDMTQ5Ljc0OSAzOS4xMjgzIDE0OS4yNyAzOC45MjExIDE0OC43NzIgMzguNzA1NEMxNDguMjQ3IDM4LjQ3ODUgMTQ3LjcwMSAzOC4yNDIyIDE0Ni44NCAzOC4yNDIyQzE0NS45NDcgMzguMjQyMiAxNDUuMzc2IDM4LjQ4NDggMTQ0LjgyNiAzOC43MTg0QzE0NC4zNDggMzguOTIxNCAxNDMuODg3IDM5LjExNzQgMTQzLjI0NSAzOS4xNDE3QzE0MS43ODYgMzkuMTkzOCAxNDAuNjc5IDM3LjcwNzcgMTM5Ljc1NCAzNi4zNTE5QzEzNy44NjYgMzMuNjE0MyAxMzYuNDIgMjguNjM0NCAxMzguMzc0IDI1LjI3MUMxMzkuMzI1IDIzLjU4OTMgMTQxLjA1NyAyMi41MzM0IDE0Mi45MTkgMjIuNTA3M0MxNDMuNzMyIDIyLjQ5MjUgMTQ0LjUwNyAyMi44MDA2IDE0NS4xODQgMjMuMDcwMUMxNDUuNzAyIDIzLjI3NTggMTQ2LjE2MiAyMy40NTg5IDE0Ni41NCAyMy40NTg5QzE0Ni44NzcgMjMuNDU4OSAxNDcuMzE5IDIzLjI4NTEgMTQ3Ljg0MSAyMy4wNzk3WiIgZmlsbD0iYmxhY2siLz4NCjxwYXRoIGQ9Ik0zNi44NTg3IDM3LjUyNDFIMzEuOTg3NEwzNS4wMzQyIDE5LjY2NjhIMzkuOTA1MkwzNi44NTg3IDM3LjUyNDFaIiBmaWxsPSIjMDA1NzlGIi8+DQo8cGF0aCBkPSJNNTQuNTE1NyAyMC4xMDQxQzUzLjU1NDkgMTkuNzQyOCA1Mi4wMzA5IDE5LjM0MzggNTAuMTQ2NiAxOS4zNDM4QzQ1LjMzNjEgMTkuMzQzOCA0MS45NDg2IDIxLjc3NTMgNDEuOTI3OCAyNS4yNTE2QzQxLjg4NzggMjcuODE2NSA0NC4zNTMxIDI5LjI0MSA0Ni4xOTcgMzAuMDk2MkM0OC4wODE2IDMwLjk3MDEgNDguNzIyMyAzMS41NDA1IDQ4LjcyMjMgMzIuMzE5NEM0OC43MDMxIDMzLjUxNTcgNDcuMTk5NCAzNC4wNjcyIDQ1Ljc5NjkgMzQuMDY3MkM0My44NTIxIDM0LjA2NzIgNDIuODEgMzMuNzgyOSA0MS4yMjY0IDMzLjExNzNMNDAuNTg1IDMyLjgzMkwzOS45MDMzIDM2Ljg0MDZDNDEuMDQ1OCAzNy4zMzM5IDQzLjE1MDcgMzcuNzcxNyA0NS4zMzYxIDM3Ljc5MDlDNTAuNDQ3MyAzNy43OTA5IDUzLjc3NDkgMzUuMzk3MSA1My44MTQzIDMxLjY5MjVDNTMuODMzOCAyOS42NTk3IDUyLjUzMiAyOC4xMDIgNDkuNzI1NCAyNi44MjkyQzQ4LjAyMTcgMjYuMDEyMSA0Ni45NzgzIDI1LjQ2MTIgNDYuOTc4MyAyNC42MjUyQzQ2Ljk5ODMgMjMuODY1MiA0Ny44NjA4IDIzLjA4NjggNDkuNzg0IDIzLjA4NjhDNTEuMzY3NyAyMy4wNDg2IDUyLjUzMTIgMjMuNDA5NCA1My40MTI2IDIzLjc3MDVMNTMuODUzMiAyMy45NjAxTDU0LjUxNTcgMjAuMTA0MVoiIGZpbGw9IiMwMDU3OUYiLz4NCjxwYXRoIGQ9Ik02MC45OTI0IDMxLjE5NzlDNjEuMzkzNiAzMC4xNzIgNjIuOTM3MiAyNi4yMDE2IDYyLjkzNzIgMjYuMjAxNkM2Mi45MTcgMjYuMjM5NyA2My4zMzc2IDI1LjE1NjggNjMuNTc4MSAyNC40OTE5TDYzLjkxODYgMjYuMDMwNkM2My45MTg2IDI2LjAzMDYgNjQuODQxIDMwLjMwNTEgNjUuMDQxNCAzMS4xOTc5QzY0LjI4IDMxLjE5NzkgNjEuOTU0NiAzMS4xOTc5IDYwLjk5MjQgMzEuMTk3OVpNNjcuMDA1NCAxOS42NjY4SDYzLjIzNzRDNjIuMDc1NSAxOS42NjY4IDYxLjE5MjcgMTkuOTg5NSA2MC42OTE0IDIxLjE0ODRMNTMuNDU1OCAzNy41MjM5SDU4LjU2NzFDNTguNTY3MSAzNy41MjM5IDU5LjQwODUgMzUuMzE5OSA1OS41ODk0IDM0Ljg0NTJDNjAuMTUwMSAzNC44NDUyIDY1LjEyMjMgMzQuODQ1MiA2NS44NDM3IDM0Ljg0NTJDNjUuOTgzNSAzNS40NzIxIDY2LjQyNDkgMzcuNTIzOSA2Ni40MjQ5IDM3LjUyMzlINzAuOTM1Mkw2Ny4wMDU0IDE5LjY2NjhWMTkuNjY2OFoiIGZpbGw9IiMwMDU3OUYiLz4NCjxwYXRoIGQ9Ik0yNy45MTggMTkuNjY2OEwyMy4xNDc1IDMxLjg0MzhMMjIuNjI2MiAyOS4zNzQxQzIxLjc0NDIgMjYuNTI0NSAxOC45NzgxIDIzLjQyODQgMTUuODkxNCAyMS44ODlMMjAuMjYxIDM3LjUwNTJIMjUuNDEyMkwzMy4wNjkgMTkuNjY2OEgyNy45MThWMTkuNjY2OFoiIGZpbGw9IiMwMDU3OUYiLz4NCjxwYXRoIGQ9Ik0xOC43MTg0IDE5LjY2NjhIMTAuODgxMUwxMC44MDA5IDIwLjAyNzZDMTYuOTE0NSAyMS41MDk1IDIwLjk2MzUgMjUuMDgxNSAyMi42MjcgMjkuMzc0OUwyMC45MjMyIDIxLjE2NzlDMjAuNjQyNyAyMC4wMjc0IDE5Ljc4MDcgMTkuNzA0NCAxOC43MTg0IDE5LjY2NjhaIiBmaWxsPSIjRkFBNjFBIi8+DQo8ZyBjbGlwLXBhdGg9InVybCgjY2xpcDJfNThfMTExKSI+DQo8cGF0aCBkPSJNMjIxLjE1OCAxNy40OTlWMTguOTM1NkgyMzEuMzA2VjE3LjQ5OUgyMjEuMTU4Wk0yMzIuNzQ0IDE3LjQ5OVYxOC45MzU2SDI0Ny4yMDZDMjQ3LjIwNiAxOC45MzU2IDI0NS43MjkgMTcuNDk5IDI0My43NzMgMTcuNDk5SDIzMi43NDRaTTI1MC4wNDMgMTcuNDk5VjE4LjkzNTZIMjU4Ljc5M0wyNTguMjczIDE3LjQ5OUgyNTAuMDQzWk0yNjUuMDY1IDE3LjQ5OUwyNjQuNTQ2IDE4LjkzNTZIMjczLjIxNlYxNy40OTlIMjY1LjA2NVpNMjIxLjE1OCAyMC4yOTI5VjIxLjcyOTZIMjMxLjMwNlYyMC4yOTI5SDIyMS4xNThaTTIzMi43NDQgMjAuMjk1VjIxLjcyOTdIMjQ4Ljg4NEMyNDguODg0IDIxLjcyOTcgMjQ4LjY5NiAyMC42MjM5IDI0OC4zNjcgMjAuMjk1SDIzMi43NDRaTTI1MC4wNDMgMjAuMjk1VjIxLjcyOTdIMjU5Ljc1MkwyNTkuMjcxIDIwLjI5NUgyNTAuMDQzWk0yNjQuMDI3IDIwLjI5NUwyNjMuNTQ2IDIxLjcyOTdIMjczLjIxNlYyMC4yOTVIMjY0LjAyN1YyMC4yOTVaTTIyNC4wNzQgMjMuMDg2OVYyNC41MjU3SDIyOC40NjlWMjMuMDg2OUgyMjQuMDc0VjIzLjA4NjlaTTIzNS42NjEgMjMuMDg2OVYyNC41MjU3SDI0MC4wNTZWMjMuMDg2OUgyMzUuNjYxVjIzLjA4NjlaTTI0NC4zMzEgMjMuMDg2OVYyNC41MjU3SDI0OC43MjZDMjQ4LjcyNiAyNC41MjU3IDI0OS4wMDUgMjMuNzY1OSAyNDkuMDA1IDIzLjA4NjlIMjQ0LjMzMVYyMy4wODY5Wk0yNTIuOTYgMjMuMDg2OVYyNC41MjU3SDI2MC43NTJMMjYwLjIzMiAyMy4wODY5SDI1Mi45NlYyMy4wODY5Wk0yNjMuMDY5IDIzLjA4NjlMMjYyLjU0OCAyNC41MjU3SDI3MC4zNzlWMjMuMDg2OUgyNjMuMDY5VjIzLjA4NjlaTTIyNC4wNzQgMjUuODgzVjI3LjMxOTdIMjI4LjQ2OVYyNS44ODNIMjI0LjA3NFYyNS44ODNaTTIzNS42NjEgMjUuODgzVjI3LjMxOTdIMjQ2Ljg4N0MyNDYuODg3IDI3LjMxOTcgMjQ3LjgyNiAyNi41ODI1IDI0OC4xMjUgMjUuODgzSDIzNS42NjFaTTI1Mi45NiAyNS44ODNWMjcuMzE5N0gyNTcuMzU1VjI2LjUyTDI1Ny42MzQgMjcuMzE5N0gyNjUuNjg0TDI2NS45ODQgMjYuNTJWMjcuMzE5N0gyNzAuMzc5VjI1Ljg4M0gyNjIuMTI5TDI2MS42OTEgMjcuMDk5OUwyNjEuMjUxIDI1Ljg4M0gyNTIuOTZaTTIyNC4wNzQgMjguNjc3VjMwLjExMzdIMjI4LjQ2OVYyOC42NzdIMjI0LjA3NFpNMjM1LjY2MSAyOC42NzdWMzAuMTEzN0gyNDguMTI1QzI0Ny44MjYgMjkuNDE2NSAyNDYuODg3IDI4LjY3NyAyNDYuODg3IDI4LjY3N0gyMzUuNjYxWk0yNTIuOTYgMjguNjc3VjMwLjExMzdIMjU3LjM1NVYyOC42NzdIMjUyLjk2Wk0yNTguMTUzIDI4LjY3N0wyNTguNjg1IDMwLjExMzdIMjY0LjcyMUwyNjUuMjI2IDI4LjY3N0gyNTguMTUzWk0yNjUuOTg0IDI4LjY3N1YzMC4xMTM3SDI3MC4zNzlWMjguNjc3SDI2NS45ODRaTTIyNC4wNzQgMzEuNDcxVjMyLjkwNzZIMjI4LjQ2OVYzMS40NzFIMjI0LjA3NFpNMjM1LjY2MSAzMS40NzFWMzIuOTA3NkgyNDAuMDU2VjMxLjQ3MUgyMzUuNjYxWk0yNDQuMzMxIDMxLjQ3MVYzMi45MDc2SDI0OS4wMDVDMjQ5LjAwNSAzMi4yMjk2IDI0OC43MjYgMzEuNDcxIDI0OC43MjYgMzEuNDcxSDI0NC4zMzFWMzEuNDcxWk0yNTIuOTYgMzEuNDcxVjMyLjkwNzZIMjU3LjM1NVYzMS40NzFIMjUyLjk2Wk0yNTkuMTUxIDMxLjQ3MUwyNTkuNjY2IDMyLjkwNzZIMjYzLjcxM0wyNjQuMjMyIDMxLjQ3MUgyNTkuMTUxWk0yNjUuOTg0IDMxLjQ3MVYzMi45MDc2SDI3MC4zNzlWMzEuNDcxSDI2NS45ODRaTTIyMS4yMzcgMzQuMjY1VjM1LjcwMzdIMjMxLjM4NlYzNC4yNjVIMjIxLjIzN1pNMjMyLjc0NCAzNC4yNjVWMzUuNzAzN0gyNDguMzY3QzI0OC42OTYgMzUuMzc0MyAyNDguODg0IDM0LjI2NSAyNDguODg0IDM0LjI2NUgyMzIuNzQ0VjM0LjI2NVpNMjUwLjEyMyAzNC4yNjVWMzUuNzAzN0gyNTcuMzU1VjM0LjI2NUgyNTAuMTIzWk0yNjAuMTUxIDM0LjI2NUwyNjAuNjggMzUuNzAzN0gyNjIuNzM5TDI2My4yMzYgMzQuMjY1SDI2MC4xNTFaTTI2NS45ODQgMzQuMjY1VjM1LjcwMzdIMjczLjI5NVYzNC4yNjVIMjY1Ljk4NFpNMjIxLjIzNyAzNy4wNjFWMzguNDk3N0gyMzEuMzg2VjM3LjA2MUgyMjEuMjM3Wk0yMzIuNzQ0IDM3LjA2MVYzOC40OTU2SDI0My43NzNDMjQ1LjcyOSAzOC40OTU2IDI0Ny4yMDYgMzcuMDYxIDI0Ny4yMDYgMzcuMDYxSDIzMi43NDRaTTI1MC4xMjMgMzcuMDYxVjM4LjQ5NzdIMjU3LjM1NVYzNy4wNjFIMjUwLjEyM1pNMjYxLjE1NSAzNy4wNjFMMjYxLjY2NCAzOC40OTM2TDI2MS43NTIgMzguNDk1NkwyNjIuMjY5IDM3LjA2MUgyNjEuMTU1VjM3LjA2MVpNMjY1Ljk4NCAzNy4wNjFWMzguNDk3N0gyNzMuMjk1VjM3LjA2MUgyNjUuOTg0WiIgZmlsbD0iIzFGNzBDMSIvPg0KPC9nPg0KPGRlZnM+DQo8Y2xpcFBhdGggaWQ9ImNsaXAwXzU4XzExMSI+DQo8cmVjdCB3aWR0aD0iNDQuNDQ3MyIgaGVpZ2h0PSIyOS42MzE1IiBmaWxsPSJ3aGl0ZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNzUzLjk1NSAxNC44MTU1KSIvPg0KPC9jbGlwUGF0aD4NCjxjbGlwUGF0aCBpZD0iY2xpcDFfNThfMTExIj4NCjxyZWN0IHdpZHRoPSI3Ni41NDgxIiBoZWlnaHQ9IjE2LjM1MDciIGZpbGw9IndoaXRlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1MjUuNTk5IDIwLjk4ODkpIi8+DQo8L2NsaXBQYXRoPg0KPGNsaXBQYXRoIGlkPSJjbGlwMl81OF8xMTEiPg0KPHJlY3Qgd2lkdGg9IjUyLjEzNzIiIGhlaWdodD0iMjAuOTk4NyIgZmlsbD0id2hpdGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIyMS4xNTggMTcuNDk5KSIvPg0KPC9jbGlwUGF0aD4NCjwvZGVmcz4NCjwvc3ZnPg0K" style="\n            width: 742.5px;\n            position: relative;\n            top: 107px;\n            left: 32px;\n            ">\n            <a href=' + accountURL + ' style="\n        float: left;\n        border-radius: 56px;\n        background: #0D6EFD;\n        padding-top: 8px;\n        width: 280px;\n        height: 38px;\n        text-align: center;\n        position: relative;\n        top: 127px;\n        left: 274px;\n        font-size: 16px;\n        color: white;\n        text-decoration: none;\n        letter-spacing: 0.02em;\n    ">Claim your FREE account</a>\n            <div style="\n    font-size: 14px;\n    position: relative;\n    top: 180px;\n    left: 19px;\n    letter-spacing: 0.02em;\n    font-weight: 500;\n    line-height: 125%;\n">have a Syncfusion account? <a href="https://www.syncfusion.com/account/login?ReturnUrl=/account/login" style="text-decoration: none;\ncolor: #0D6EFD;\nfont-weight: 500;">Sign In</a></div>\n        </div>\n    </div>';
  if (typeof document !== "undefined" && !isNullOrUndefined(document)) {
    var errorBackground = createElement("div", {
      innerHTML: bannerTemplate
    });
    document.body.appendChild(errorBackground);
  }
};
var __extends$_ = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$O = globalThis && globalThis.__decorate || function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i = decorators.length - 1; i >= 0; i--)
      if (d = decorators[i])
        r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var componentCount = 0;
var lastPageID;
var lastHistoryLen = 0;
var instancecount = 0;
var isvalid = true;
var isBannerAdded = false;
var Component = (
  /** @class */
  function(_super) {
    __extends$_(Component2, _super);
    function Component2(options, selector) {
      var _this = _super.call(this, options, selector) || this;
      _this.randomId = uniqueID();
      _this.isStringTemplate = false;
      _this.needsID = false;
      _this.isReactHybrid = false;
      if (isNullOrUndefined(_this.enableRtl)) {
        _this.setProperties({ "enableRtl": rightToLeft }, true);
      }
      if (isNullOrUndefined(_this.locale)) {
        _this.setProperties({ "locale": defaultCulture }, true);
      }
      _this.moduleLoader = new ModuleLoader(_this);
      _this.localObserver = new Observer(_this);
      onIntlChange.on("notifyExternalChange", _this.detectFunction, _this, _this.randomId);
      if (typeof window !== "undefined" && typeof document !== "undefined" && !validateLicense()) {
        if (componentList.indexOf(_this.getModuleName()) !== -1) {
          instancecount = instancecount + 1;
          if (instancecount > 5) {
            isvalid = false;
          }
        }
      }
      if (!isUndefined(selector)) {
        _this.appendTo();
      }
      return _this;
    }
    Component2.prototype.requiredModules = function() {
      return [];
    };
    Component2.prototype.destroy = function() {
      if (this.isDestroyed) {
        return;
      }
      if (this.enablePersistence) {
        this.setPersistData();
      }
      this.localObserver.destroy();
      if (this.refreshing) {
        return;
      }
      removeClass([this.element], ["e-control"]);
      this.trigger("destroyed", { cancel: false });
      _super.prototype.destroy.call(this);
      this.moduleLoader.clean();
      onIntlChange.off("notifyExternalChange", this.detectFunction, this.randomId);
    };
    Component2.prototype.refresh = function() {
      this.refreshing = true;
      this.moduleLoader.clean();
      this.destroy();
      this.clearChanges();
      this.localObserver = new Observer(this);
      this.preRender();
      this.injectModules();
      this.render();
      this.refreshing = false;
    };
    Component2.prototype.accessMount = function() {
      if (this.mount && !this.isReactHybrid) {
        this.mount();
      }
    };
    Component2.prototype.getRootElement = function() {
      if (this.isReactHybrid) {
        return this.actualElement;
      } else {
        return this.element;
      }
    };
    Component2.prototype.getLocalData = function() {
      var eleId = this.getModuleName() + this.element.id;
      {
        return window.localStorage.getItem(eleId);
      }
    };
    Component2.prototype.appendTo = function(selector) {
      if (!isNullOrUndefined(selector) && typeof selector === "string") {
        this.element = select$1(selector, document);
      } else if (!isNullOrUndefined(selector)) {
        this.element = selector;
      }
      if (!isNullOrUndefined(this.element)) {
        var moduleClass = "e-" + this.getModuleName().toLowerCase();
        addClass([this.element], ["e-control", moduleClass]);
        this.isProtectedOnChange = false;
        if (this.needsID && !this.element.id) {
          this.element.id = this.getUniqueID(this.getModuleName());
        }
        if (this.enablePersistence) {
          this.mergePersistData();
          window.addEventListener("unload", this.setPersistData.bind(this));
        }
        var inst = getValue("ej2_instances", this.element);
        if (!inst || inst.indexOf(this) === -1) {
          _super.prototype.addInstance.call(this);
        }
        this.preRender();
        this.injectModules();
        if (!isvalid && !isBannerAdded) {
          createLicenseOverlay();
          isBannerAdded = true;
        }
        this.render();
        if (!this.mount) {
          this.trigger("created");
        } else {
          this.accessMount();
        }
      }
    };
    Component2.prototype.renderComplete = function(wrapperElement) {
      this.isRendered = true;
    };
    Component2.prototype.dataBind = function() {
      this.injectModules();
      _super.prototype.dataBind.call(this);
    };
    Component2.prototype.on = function(event, handler, context) {
      if (typeof event === "string") {
        this.localObserver.on(event, handler, context);
      } else {
        for (var _i = 0, event_1 = event; _i < event_1.length; _i++) {
          var arg = event_1[_i];
          this.localObserver.on(arg.event, arg.handler, arg.context);
        }
      }
    };
    Component2.prototype.off = function(event, handler) {
      if (typeof event === "string") {
        this.localObserver.off(event, handler);
      } else {
        for (var _i = 0, event_2 = event; _i < event_2.length; _i++) {
          var arg = event_2[_i];
          this.localObserver.off(arg.event, arg.handler);
        }
      }
    };
    Component2.prototype.notify = function(property, argument) {
      if (this.isDestroyed !== true) {
        this.localObserver.notify(property, argument);
      }
    };
    Component2.prototype.getInjectedModules = function() {
      return this.injectedModules;
    };
    Component2.Inject = function() {
      var moduleList = [];
      for (var _i = 0; _i < arguments.length; _i++) {
        moduleList[_i] = arguments[_i];
      }
      if (!this.prototype.injectedModules) {
        this.prototype.injectedModules = [];
      }
      for (var i = 0; i < moduleList.length; i++) {
        if (this.prototype.injectedModules.indexOf(moduleList[parseInt(i.toString(), 10)]) === -1) {
          this.prototype.injectedModules.push(moduleList[parseInt(i.toString(), 10)]);
        }
      }
    };
    Component2.prototype.createElement = function(tagName, prop, isVDOM) {
      return createElement(tagName, prop);
    };
    Component2.prototype.triggerStateChange = function(handler, argument) {
      if (this.isReactHybrid) {
        this.setState();
        this.currentContext = { calls: handler, args: argument };
      }
    };
    Component2.prototype.injectModules = function() {
      if (this.injectedModules && this.injectedModules.length) {
        this.moduleLoader.inject(this.requiredModules(), this.injectedModules);
      }
    };
    Component2.prototype.detectFunction = function(args) {
      var prop = Object.keys(args);
      if (prop.length) {
        this[prop[0]] = args[prop[0]];
      }
    };
    Component2.prototype.mergePersistData = function() {
      var data;
      {
        data = window.localStorage.getItem(this.getModuleName() + this.element.id);
      }
      if (!(isNullOrUndefined(data) || data === "")) {
        this.setProperties(JSON.parse(data), true);
      }
    };
    Component2.prototype.setPersistData = function() {
      if (!this.isDestroyed) {
        {
          window.localStorage.setItem(this.getModuleName() + this.element.id, this.getPersistData());
        }
      }
    };
    Component2.prototype.renderReactTemplates = function(callback) {
      if (!isNullOrUndefined(callback)) {
        callback();
      }
    };
    Component2.prototype.clearTemplate = function(templateName, index) {
    };
    Component2.prototype.getUniqueID = function(definedName) {
      if (this.isHistoryChanged()) {
        componentCount = 0;
      }
      lastPageID = this.pageID(location.href);
      lastHistoryLen = history.length;
      return definedName + "_" + lastPageID + "_" + componentCount++;
    };
    Component2.prototype.pageID = function(url) {
      var hash = 0;
      if (url.length === 0) {
        return hash;
      }
      for (var i = 0; i < url.length; i++) {
        var char = url.charCodeAt(i);
        hash = (hash << 5) - hash + char;
        hash = hash & hash;
      }
      return Math.abs(hash);
    };
    Component2.prototype.isHistoryChanged = function() {
      return lastPageID !== this.pageID(location.href) || lastHistoryLen !== history.length;
    };
    Component2.prototype.addOnPersist = function(options) {
      var _this = this;
      var persistObj = {};
      for (var _i = 0, options_1 = options; _i < options_1.length; _i++) {
        var key = options_1[_i];
        var objValue = void 0;
        objValue = getValue(key, this);
        if (!isUndefined(objValue)) {
          setValue(key, this.getActualProperties(objValue), persistObj);
        }
      }
      return JSON.stringify(persistObj, function(key2, value) {
        return _this.getActualProperties(value);
      });
    };
    Component2.prototype.getActualProperties = function(obj) {
      if (obj instanceof ChildProperty) {
        return getValue("properties", obj);
      } else {
        return obj;
      }
    };
    Component2.prototype.ignoreOnPersist = function(options) {
      return JSON.stringify(this.iterateJsonProperties(this.properties, options));
    };
    Component2.prototype.iterateJsonProperties = function(obj, ignoreList) {
      var newObj = {};
      var _loop_1 = function(key2) {
        if (ignoreList.indexOf(key2) === -1) {
          var value = obj[key2];
          if (typeof value === "object" && !(value instanceof Array)) {
            var newList = ignoreList.filter(function(str) {
              var regExp2 = RegExp;
              return new regExp2(key2 + ".").test(str);
            }).map(function(str) {
              return str.replace(key2 + ".", "");
            });
            newObj["" + key2] = this_1.iterateJsonProperties(this_1.getActualProperties(value), newList);
          } else {
            newObj["" + key2] = value;
          }
        }
      };
      var this_1 = this;
      for (var _i = 0, _a = Object.keys(obj); _i < _a.length; _i++) {
        var key = _a[_i];
        _loop_1(key);
      }
      return newObj;
    };
    __decorate$O([
      Property(false)
    ], Component2.prototype, "enablePersistence", void 0);
    __decorate$O([
      Property()
    ], Component2.prototype, "enableRtl", void 0);
    __decorate$O([
      Property()
    ], Component2.prototype, "locale", void 0);
    Component2 = __decorate$O([
      NotifyPropertyChanges
    ], Component2);
    return Component2;
  }(Base)
);
(function() {
  if (typeof window !== "undefined") {
    window.addEventListener(
      "popstate",
      /* istanbul ignore next */
      function() {
        componentCount = 0;
      }
    );
  }
})();
var __extends$Z = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$N = globalThis && globalThis.__decorate || function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i = decorators.length - 1; i >= 0; i--)
      if (d = decorators[i])
        r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var defaultPosition = { left: 0, top: 0, bottom: 0, right: 0 };
var isDraggedObject = { isDragged: false };
var Position = (
  /** @class */
  function(_super) {
    __extends$Z(Position2, _super);
    function Position2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$N([
      Property(0)
    ], Position2.prototype, "left", void 0);
    __decorate$N([
      Property(0)
    ], Position2.prototype, "top", void 0);
    return Position2;
  }(ChildProperty)
);
var Draggable = (
  /** @class */
  function(_super) {
    __extends$Z(Draggable2, _super);
    function Draggable2(element2, options) {
      var _this = _super.call(this, options, element2) || this;
      _this.dragLimit = Draggable_1.getDefaultPosition();
      _this.borderWidth = Draggable_1.getDefaultPosition();
      _this.padding = Draggable_1.getDefaultPosition();
      _this.diffX = 0;
      _this.prevLeft = 0;
      _this.prevTop = 0;
      _this.dragProcessStarted = false;
      _this.eleTop = 0;
      _this.tapHoldTimer = 0;
      _this.externalInitialize = false;
      _this.diffY = 0;
      _this.parentScrollX = 0;
      _this.parentScrollY = 0;
      _this.droppables = {};
      _this.bind();
      return _this;
    }
    Draggable_1 = Draggable2;
    Draggable2.prototype.bind = function() {
      this.toggleEvents();
      if (Browser.isIE) {
        addClass([this.element], "e-block-touch");
      }
      this.droppables[this.scope] = {};
    };
    Draggable2.getDefaultPosition = function() {
      return extend({}, defaultPosition);
    };
    Draggable2.prototype.toggleEvents = function(isUnWire) {
      var ele;
      if (!isUndefined(this.handle)) {
        ele = select$1(this.handle, this.element);
      }
      var handler = this.enableTapHold && Browser.isDevice && Browser.isTouch ? this.mobileInitialize : this.initialize;
      if (isUnWire) {
        EventHandler.remove(ele || this.element, Browser.isSafari() ? "touchstart" : Browser.touchStartEvent, handler);
      } else {
        EventHandler.add(ele || this.element, Browser.isSafari() ? "touchstart" : Browser.touchStartEvent, handler, this);
      }
    };
    Draggable2.prototype.mobileInitialize = function(evt) {
      var _this = this;
      var target = evt.currentTarget;
      this.tapHoldTimer = setTimeout(function() {
        _this.externalInitialize = true;
        _this.removeTapholdTimer();
        _this.initialize(evt, target);
      }, this.tapHoldThreshold);
      EventHandler.add(document, Browser.isSafari() ? "touchmove" : Browser.touchMoveEvent, this.removeTapholdTimer, this);
      EventHandler.add(document, Browser.isSafari() ? "touchend" : Browser.touchEndEvent, this.removeTapholdTimer, this);
    };
    Draggable2.prototype.removeTapholdTimer = function() {
      clearTimeout(this.tapHoldTimer);
      EventHandler.remove(document, Browser.isSafari() ? "touchmove" : Browser.touchMoveEvent, this.removeTapholdTimer);
      EventHandler.remove(document, Browser.isSafari() ? "touchend" : Browser.touchEndEvent, this.removeTapholdTimer);
    };
    Draggable2.prototype.getScrollableParent = function(element2, axis) {
      var scroll = { "vertical": "scrollHeight", "horizontal": "scrollWidth" };
      var client = { "vertical": "clientHeight", "horizontal": "clientWidth" };
      if (isNullOrUndefined(element2)) {
        return null;
      }
      if (element2[scroll["" + axis]] > element2[client["" + axis]]) {
        if (axis === "vertical" ? element2.scrollTop > 0 : element2.scrollLeft > 0) {
          if (axis === "vertical") {
            this.parentScrollY = this.parentScrollY + (this.parentScrollY === 0 ? element2.scrollTop : element2.scrollTop - this.parentScrollY);
            this.tempScrollHeight = element2.scrollHeight;
          } else {
            this.parentScrollX = this.parentScrollX + (this.parentScrollX === 0 ? element2.scrollLeft : element2.scrollLeft - this.parentScrollX);
            this.tempScrollWidth = element2.scrollWidth;
          }
          if (!isNullOrUndefined(element2)) {
            return this.getScrollableParent(element2.parentNode, axis);
          } else {
            return element2;
          }
        } else {
          return this.getScrollableParent(element2.parentNode, axis);
        }
      } else {
        return this.getScrollableParent(element2.parentNode, axis);
      }
    };
    Draggable2.prototype.getScrollableValues = function() {
      this.parentScrollX = 0;
      this.parentScrollY = 0;
      this.element.classList.contains("e-dialog") && this.element.classList.contains("e-dlg-modal");
      this.getScrollableParent(this.element.parentNode, "vertical");
      this.getScrollableParent(this.element.parentNode, "horizontal");
    };
    Draggable2.prototype.initialize = function(evt, curTarget) {
      this.currentStateTarget = evt.target;
      if (this.isDragStarted()) {
        return;
      } else {
        this.isDragStarted(true);
        this.externalInitialize = false;
      }
      this.target = evt.currentTarget || curTarget;
      this.dragProcessStarted = false;
      if (this.abort) {
        var abortSelectors = this.abort;
        if (typeof abortSelectors === "string") {
          abortSelectors = [abortSelectors];
        }
        for (var i = 0; i < abortSelectors.length; i++) {
          if (!isNullOrUndefined(closest(evt.target, abortSelectors[parseInt(i.toString(), 10)]))) {
            if (this.isDragStarted()) {
              this.isDragStarted(true);
            }
            return;
          }
        }
      }
      if (this.preventDefault && !isUndefined(evt.changedTouches) && evt.type !== "touchstart") {
        evt.preventDefault();
      }
      this.element.setAttribute("aria-grabbed", "true");
      var intCoord = this.getCoordinates(evt);
      this.initialPosition = { x: intCoord.pageX, y: intCoord.pageY };
      if (!this.clone) {
        var pos = this.element.getBoundingClientRect();
        this.getScrollableValues();
        if (evt.clientX === evt.pageX) {
          this.parentScrollX = 0;
        }
        if (evt.clientY === evt.pageY) {
          this.parentScrollY = 0;
        }
        this.relativeXPosition = intCoord.pageX - (pos.left + this.parentScrollX);
        this.relativeYPosition = intCoord.pageY - (pos.top + this.parentScrollY);
      }
      if (this.externalInitialize) {
        this.intDragStart(evt);
      } else {
        EventHandler.add(document, Browser.isSafari() ? "touchmove" : Browser.touchMoveEvent, this.intDragStart, this);
        EventHandler.add(document, Browser.isSafari() ? "touchend" : Browser.touchEndEvent, this.intDestroy, this);
      }
      this.toggleEvents(true);
      if (evt.type !== "touchstart" && this.isPreventSelect) {
        document.body.classList.add("e-prevent-select");
      }
      this.externalInitialize = false;
      EventHandler.trigger(document.documentElement, Browser.isSafari() ? "touchstart" : Browser.touchStartEvent, evt);
    };
    Draggable2.prototype.intDragStart = function(evt) {
      this.removeTapholdTimer();
      var isChangeTouch = !isUndefined(evt.changedTouches);
      if (isChangeTouch && evt.changedTouches.length !== 1) {
        return;
      }
      var intCordinate = this.getCoordinates(evt);
      var pos;
      var styleProp = getComputedStyle(this.element);
      this.margin = {
        left: parseInt(styleProp.marginLeft, 10),
        top: parseInt(styleProp.marginTop, 10),
        right: parseInt(styleProp.marginRight, 10),
        bottom: parseInt(styleProp.marginBottom, 10)
      };
      var element2 = this.element;
      if (this.clone && this.dragTarget) {
        var intClosest = closest(evt.target, this.dragTarget);
        if (!isNullOrUndefined(intClosest)) {
          element2 = intClosest;
        }
      }
      if (this.isReplaceDragEle) {
        element2 = this.currentStateCheck(evt.target, element2);
      }
      this.offset = this.calculateParentPosition(element2);
      this.position = this.getMousePosition(evt, this.isDragScroll);
      var x = this.initialPosition.x - intCordinate.pageX;
      var y = this.initialPosition.y - intCordinate.pageY;
      var distance = Math.sqrt(x * x + y * y);
      if (distance >= this.distance || this.externalInitialize) {
        var ele = this.getHelperElement(evt);
        if (!ele || isNullOrUndefined(ele)) {
          return;
        }
        if (isChangeTouch) {
          evt.preventDefault();
        }
        var dragTargetElement = this.helperElement = ele;
        this.parentClientRect = this.calculateParentPosition(dragTargetElement.offsetParent);
        if (this.dragStart) {
          var curTarget = this.getProperTargetElement(evt);
          var args = {
            event: evt,
            element: element2,
            target: curTarget,
            bindEvents: null,
            dragElement: dragTargetElement
          };
          this.trigger("dragStart", args);
        }
        if (this.dragArea) {
          this.setDragArea();
        } else {
          this.dragLimit = { left: 0, right: 0, bottom: 0, top: 0 };
          this.borderWidth = { top: 0, left: 0 };
        }
        pos = { left: this.position.left - this.parentClientRect.left, top: this.position.top - this.parentClientRect.top };
        if (this.clone && !this.enableTailMode) {
          this.diffX = this.position.left - this.offset.left;
          this.diffY = this.position.top - this.offset.top;
        }
        this.getScrollableValues();
        var styles = getComputedStyle(element2);
        var marginTop = parseFloat(styles.marginTop);
        if (this.clone && marginTop !== 0) {
          pos.top += marginTop;
        }
        this.eleTop = !isNaN(parseFloat(styles.top)) ? parseFloat(styles.top) - this.offset.top : 0;
        if (this.enableScrollHandler && !this.clone) {
          pos.top -= this.parentScrollY;
          pos.left -= this.parentScrollX;
        }
        var posValue = this.getProcessedPositionValue({
          top: pos.top - this.diffY + "px",
          left: pos.left - this.diffX + "px"
        });
        if (this.dragArea && typeof this.dragArea !== "string" && this.dragArea.classList.contains("e-kanban-content") && this.dragArea.style.position === "relative") {
          pos.top += this.dragArea.scrollTop;
        }
        this.dragElePosition = { top: pos.top, left: pos.left };
        setStyleAttribute(dragTargetElement, this.getDragPosition({ position: "absolute", left: posValue.left, top: posValue.top }));
        EventHandler.remove(document, Browser.isSafari() ? "touchmove" : Browser.touchMoveEvent, this.intDragStart);
        EventHandler.remove(document, Browser.isSafari() ? "touchend" : Browser.touchEndEvent, this.intDestroy);
        {
          this.bindDragEvents(dragTargetElement);
        }
      }
    };
    Draggable2.prototype.bindDragEvents = function(dragTargetElement) {
      if (isVisible(dragTargetElement)) {
        EventHandler.add(document, Browser.isSafari() ? "touchmove" : Browser.touchMoveEvent, this.intDrag, this);
        EventHandler.add(document, Browser.isSafari() ? "touchend" : Browser.touchEndEvent, this.intDragStop, this);
        this.setGlobalDroppables(false, this.element, dragTargetElement);
      } else {
        this.toggleEvents();
        document.body.classList.remove("e-prevent-select");
      }
    };
    Draggable2.prototype.elementInViewport = function(el) {
      this.top = el.offsetTop;
      this.left = el.offsetLeft;
      this.width = el.offsetWidth;
      this.height = el.offsetHeight;
      while (el.offsetParent) {
        el = el.offsetParent;
        this.top += el.offsetTop;
        this.left += el.offsetLeft;
      }
      return this.top >= window.pageYOffset && this.left >= window.pageXOffset && this.top + this.height <= window.pageYOffset + window.innerHeight && this.left + this.width <= window.pageXOffset + window.innerWidth;
    };
    Draggable2.prototype.getProcessedPositionValue = function(value) {
      if (this.queryPositionInfo) {
        return this.queryPositionInfo(value);
      }
      return value;
    };
    Draggable2.prototype.calculateParentPosition = function(ele) {
      if (isNullOrUndefined(ele)) {
        return { left: 0, top: 0 };
      }
      var rect = ele.getBoundingClientRect();
      var style = getComputedStyle(ele);
      return {
        left: rect.left + window.pageXOffset - parseInt(style.marginLeft, 10),
        top: rect.top + window.pageYOffset - parseInt(style.marginTop, 10)
      };
    };
    Draggable2.prototype.intDrag = function(evt) {
      if (!isUndefined(evt.changedTouches) && evt.changedTouches.length !== 1) {
        return;
      }
      if (this.clone && evt.changedTouches && Browser.isDevice && Browser.isTouch) {
        evt.preventDefault();
      }
      var left;
      var top;
      this.position = this.getMousePosition(evt, this.isDragScroll);
      var docHeight = this.getDocumentWidthHeight("Height");
      if (docHeight < this.position.top) {
        this.position.top = docHeight;
      }
      var docWidth = this.getDocumentWidthHeight("Width");
      if (docWidth < this.position.left) {
        this.position.left = docWidth;
      }
      if (this.drag) {
        var curTarget = this.getProperTargetElement(evt);
        this.trigger("drag", { event: evt, element: this.element, target: curTarget });
      }
      var eleObj = this.checkTargetElement(evt);
      if (eleObj.target && eleObj.instance) {
        var flag = true;
        if (this.hoverObject) {
          if (this.hoverObject.instance !== eleObj.instance) {
            this.triggerOutFunction(evt, eleObj);
          } else {
            flag = false;
          }
        }
        if (flag) {
          eleObj.instance.dragData[this.scope] = this.droppables[this.scope];
          eleObj.instance.intOver(evt, eleObj.target);
          this.hoverObject = eleObj;
        }
      } else if (this.hoverObject) {
        this.triggerOutFunction(evt, eleObj);
      }
      var helperElement = this.droppables[this.scope].helper;
      this.parentClientRect = this.calculateParentPosition(this.helperElement.offsetParent);
      var tLeft = this.parentClientRect.left;
      var tTop = this.parentClientRect.top;
      var intCoord = this.getCoordinates(evt);
      var pagex = intCoord.pageX;
      var pagey = intCoord.pageY;
      var dLeft = this.position.left - this.diffX;
      var dTop = this.position.top - this.diffY;
      var styles = getComputedStyle(helperElement);
      if (this.dragArea) {
        if (this.pageX !== pagex || this.skipDistanceCheck) {
          var helperWidth = helperElement.offsetWidth + (parseFloat(styles.marginLeft) + parseFloat(styles.marginRight));
          if (this.dragLimit.left > dLeft && dLeft > 0) {
            left = this.dragLimit.left;
          } else if (this.dragLimit.right + window.pageXOffset < dLeft + helperWidth && dLeft > 0) {
            left = dLeft - (dLeft - this.dragLimit.right) + window.pageXOffset - helperWidth;
          } else {
            left = dLeft < 0 ? this.dragLimit.left : dLeft;
          }
        }
        if (this.pageY !== pagey || this.skipDistanceCheck) {
          var helperHeight = helperElement.offsetHeight + (parseFloat(styles.marginTop) + parseFloat(styles.marginBottom));
          if (this.dragLimit.top > dTop && dTop > 0) {
            top = this.dragLimit.top;
          } else if (this.dragLimit.bottom + window.pageYOffset < dTop + helperHeight && dTop > 0) {
            top = dTop - (dTop - this.dragLimit.bottom) + window.pageYOffset - helperHeight;
          } else {
            top = dTop < 0 ? this.dragLimit.top : dTop;
          }
        }
      } else {
        left = dLeft;
        top = dTop;
      }
      var iTop = tTop + this.borderWidth.top;
      var iLeft = tLeft + this.borderWidth.left;
      if (this.dragProcessStarted) {
        if (isNullOrUndefined(top)) {
          top = this.prevTop;
        }
        if (isNullOrUndefined(left)) {
          left = this.prevLeft;
        }
      }
      var draEleTop;
      var draEleLeft;
      if (this.helperElement.classList.contains("e-treeview")) {
        if (this.dragArea) {
          this.dragLimit.top = this.clone ? this.dragLimit.top : 0;
          draEleTop = top - iTop < 0 ? this.dragLimit.top : top - this.borderWidth.top;
          draEleLeft = left - iLeft < 0 ? this.dragLimit.left : left - this.borderWidth.left;
        } else {
          draEleTop = top - this.borderWidth.top;
          draEleLeft = left - this.borderWidth.left;
        }
      } else {
        if (this.dragArea) {
          var isDialogEle = this.helperElement.classList.contains("e-dialog");
          this.dragLimit.top = this.clone ? this.dragLimit.top : 0;
          draEleTop = top - iTop < 0 ? this.dragLimit.top : top - iTop;
          draEleLeft = left - iLeft < 0 ? isDialogEle ? left - (iLeft - this.borderWidth.left) : this.dragElePosition.left : left - iLeft;
        } else {
          draEleTop = top - iTop;
          draEleLeft = left - iLeft;
        }
      }
      var marginTop = parseFloat(getComputedStyle(this.element).marginTop);
      if (marginTop > 0) {
        if (this.clone) {
          draEleTop += marginTop;
          if (dTop < 0) {
            if (marginTop + dTop >= 0) {
              draEleTop = marginTop + dTop;
            } else {
              draEleTop -= marginTop;
            }
          }
          draEleTop = this.dragLimit.bottom < draEleTop ? this.dragLimit.bottom : draEleTop;
        }
        if (top - iTop < 0) {
          if (dTop + marginTop + (helperElement.offsetHeight - iTop) >= 0) {
            var tempDraEleTop = this.dragLimit.top + dTop - iTop;
            if (tempDraEleTop + marginTop + iTop < 0) {
              draEleTop -= marginTop + iTop;
            } else {
              draEleTop = tempDraEleTop;
            }
          } else {
            draEleTop -= marginTop + iTop;
          }
        }
      }
      if (this.dragArea && this.helperElement.classList.contains("e-treeview")) {
        var helperHeight = helperElement.offsetHeight + (parseFloat(styles.marginTop) + parseFloat(styles.marginBottom));
        draEleTop = draEleTop + helperHeight > this.dragLimit.bottom ? this.dragLimit.bottom - helperHeight : draEleTop;
      }
      if (this.enableScrollHandler && !this.clone) {
        draEleTop -= this.parentScrollY;
        draEleLeft -= this.parentScrollX;
      }
      if (this.dragArea && typeof this.dragArea !== "string" && this.dragArea.classList.contains("e-kanban-content") && this.dragArea.style.position === "relative") {
        draEleTop += this.dragArea.scrollTop;
      }
      var dragValue = this.getProcessedPositionValue({ top: draEleTop + "px", left: draEleLeft + "px" });
      setStyleAttribute(helperElement, this.getDragPosition(dragValue));
      if (!this.elementInViewport(helperElement) && this.enableAutoScroll && !this.helperElement.classList.contains("e-treeview")) {
        this.helperElement.scrollIntoView();
      }
      var elements = document.querySelectorAll(":hover");
      if (this.enableAutoScroll && this.helperElement.classList.contains("e-treeview")) {
        if (elements.length === 0) {
          elements = this.getPathElements(evt);
        }
        var scrollParent = this.getScrollParent(elements, false);
        if (this.elementInViewport(this.helperElement)) {
          this.getScrollPosition(scrollParent, draEleTop);
        } else if (!this.elementInViewport(this.helperElement)) {
          elements = [].slice.call(document.querySelectorAll(":hover"));
          if (elements.length === 0) {
            elements = this.getPathElements(evt);
          }
          scrollParent = this.getScrollParent(elements, true);
          this.getScrollPosition(scrollParent, draEleTop);
        }
      }
      this.dragProcessStarted = true;
      this.prevLeft = left;
      this.prevTop = top;
      this.position.left = left;
      this.position.top = top;
      this.pageX = pagex;
      this.pageY = pagey;
    };
    Draggable2.prototype.getScrollParent = function(node, reverse) {
      var nodeEl = reverse ? node.reverse() : node;
      var hasScroll;
      for (var i = nodeEl.length - 1; i >= 0; i--) {
        hasScroll = window.getComputedStyle(nodeEl[parseInt(i.toString(), 10)])["overflow-y"];
        if ((hasScroll === "auto" || hasScroll === "scroll") && nodeEl[parseInt(i.toString(), 10)].scrollHeight > nodeEl[parseInt(i.toString(), 10)].clientHeight) {
          return nodeEl[parseInt(i.toString(), 10)];
        }
      }
      hasScroll = window.getComputedStyle(document.scrollingElement)["overflow-y"];
      if (hasScroll === "visible") {
        document.scrollingElement.style.overflow = "auto";
        return document.scrollingElement;
      }
    };
    Draggable2.prototype.getScrollPosition = function(nodeEle, draEleTop) {
      if (nodeEle && nodeEle === document.scrollingElement) {
        if (nodeEle.clientHeight + document.scrollingElement.scrollTop - this.helperElement.clientHeight < draEleTop && nodeEle.getBoundingClientRect().height + this.parentClientRect.top > draEleTop) {
          nodeEle.scrollTop += this.helperElement.clientHeight;
        } else if (nodeEle.scrollTop > draEleTop - this.helperElement.clientHeight) {
          nodeEle.scrollTop -= this.helperElement.clientHeight;
        }
      } else if (nodeEle && nodeEle !== document.scrollingElement) {
        if (nodeEle.clientHeight + nodeEle.getBoundingClientRect().top - this.helperElement.clientHeight + document.scrollingElement.scrollTop < draEleTop) {
          nodeEle.scrollTop += this.helperElement.clientHeight;
        } else if (nodeEle.getBoundingClientRect().top > draEleTop - this.helperElement.clientHeight - document.scrollingElement.scrollTop) {
          nodeEle.scrollTop -= this.helperElement.clientHeight;
        }
      }
    };
    Draggable2.prototype.getPathElements = function(evt) {
      var elementTop = evt.clientX > 0 ? evt.clientX : 0;
      var elementLeft = evt.clientY > 0 ? evt.clientY : 0;
      return document.elementsFromPoint(elementTop, elementLeft);
    };
    Draggable2.prototype.triggerOutFunction = function(evt, eleObj) {
      this.hoverObject.instance.intOut(evt, eleObj.target);
      this.hoverObject.instance.dragData[this.scope] = null;
      this.hoverObject = null;
    };
    Draggable2.prototype.getDragPosition = function(dragValue) {
      var temp = extend({}, dragValue);
      if (this.axis) {
        if (this.axis === "x") {
          delete temp.top;
        } else if (this.axis === "y") {
          delete temp.left;
        }
      }
      return temp;
    };
    Draggable2.prototype.getDocumentWidthHeight = function(str) {
      var docBody = document.body;
      var docEle = document.documentElement;
      var returnValue = Math.max(docBody["scroll" + str], docEle["scroll" + str], docBody["offset" + str], docEle["offset" + str], docEle["client" + str]);
      return returnValue;
    };
    Draggable2.prototype.intDragStop = function(evt) {
      this.dragProcessStarted = false;
      if (!isUndefined(evt.changedTouches) && evt.changedTouches.length !== 1) {
        return;
      }
      var type = ["touchend", "pointerup", "mouseup"];
      if (type.indexOf(evt.type) !== -1) {
        if (this.dragStop) {
          var curTarget = this.getProperTargetElement(evt);
          this.trigger("dragStop", { event: evt, element: this.element, target: curTarget, helper: this.helperElement });
        }
        this.intDestroy(evt);
      } else {
        this.element.setAttribute("aria-grabbed", "false");
      }
      var eleObj = this.checkTargetElement(evt);
      if (eleObj.target && eleObj.instance) {
        eleObj.instance.dragStopCalled = true;
        eleObj.instance.dragData[this.scope] = this.droppables[this.scope];
        eleObj.instance.intDrop(evt, eleObj.target);
      }
      this.setGlobalDroppables(true);
      document.body.classList.remove("e-prevent-select");
    };
    Draggable2.prototype.intDestroy = function(evt) {
      this.dragProcessStarted = false;
      this.toggleEvents();
      document.body.classList.remove("e-prevent-select");
      this.element.setAttribute("aria-grabbed", "false");
      EventHandler.remove(document, Browser.isSafari() ? "touchmove" : Browser.touchMoveEvent, this.intDragStart);
      EventHandler.remove(document, Browser.isSafari() ? "touchend" : Browser.touchEndEvent, this.intDragStop);
      EventHandler.remove(document, Browser.isSafari() ? "touchend" : Browser.touchEndEvent, this.intDestroy);
      EventHandler.remove(document, Browser.isSafari() ? "touchmove" : Browser.touchMoveEvent, this.intDrag);
      if (this.isDragStarted()) {
        this.isDragStarted(true);
      }
    };
    Draggable2.prototype.onPropertyChanged = function(newProp, oldProp) {
    };
    Draggable2.prototype.getModuleName = function() {
      return "draggable";
    };
    Draggable2.prototype.isDragStarted = function(change) {
      if (change) {
        isDraggedObject.isDragged = !isDraggedObject.isDragged;
      }
      return isDraggedObject.isDragged;
    };
    Draggable2.prototype.setDragArea = function() {
      var eleWidthBound;
      var eleHeightBound;
      var top = 0;
      var left = 0;
      var ele;
      var type = typeof this.dragArea;
      if (type === "string") {
        ele = select$1(this.dragArea);
      } else {
        ele = this.dragArea;
      }
      if (ele) {
        var elementArea = ele.getBoundingClientRect();
        eleWidthBound = ele.scrollWidth ? ele.scrollWidth : elementArea.right - elementArea.left;
        eleHeightBound = ele.scrollHeight ? this.dragArea && !isNullOrUndefined(this.helperElement) && this.helperElement.classList.contains("e-treeview") ? ele.clientHeight : ele.scrollHeight : elementArea.bottom - elementArea.top;
        var keys2 = ["Top", "Left", "Bottom", "Right"];
        var styles = getComputedStyle(ele);
        for (var i = 0; i < keys2.length; i++) {
          var key = keys2[parseInt(i.toString(), 10)];
          var tborder = styles["border" + key + "Width"];
          var tpadding = styles["padding" + key];
          var lowerKey = key.toLowerCase();
          this.borderWidth["" + lowerKey] = isNaN(parseFloat(tborder)) ? 0 : parseFloat(tborder);
          this.padding["" + lowerKey] = isNaN(parseFloat(tpadding)) ? 0 : parseFloat(tpadding);
        }
        if (this.dragArea && !isNullOrUndefined(this.helperElement) && this.helperElement.classList.contains("e-treeview")) {
          top = elementArea.top + document.scrollingElement.scrollTop;
        } else {
          top = elementArea.top;
        }
        left = elementArea.left;
        this.dragLimit.left = left + this.borderWidth.left + this.padding.left;
        this.dragLimit.top = ele.offsetTop + this.borderWidth.top + this.padding.top;
        this.dragLimit.right = left + eleWidthBound - (this.borderWidth.right + this.padding.right);
        this.dragLimit.bottom = top + eleHeightBound - (this.borderWidth.bottom + this.padding.bottom);
      }
    };
    Draggable2.prototype.getProperTargetElement = function(evt) {
      var intCoord = this.getCoordinates(evt);
      var ele;
      var prevStyle = this.helperElement.style.pointerEvents || "";
      var isPointer = evt.type.indexOf("pointer") !== -1 && Browser.info.name === "safari" && parseInt(Browser.info.version) > 12;
      if (compareElementParent(evt.target, this.helperElement) || evt.type.indexOf("touch") !== -1 || isPointer) {
        this.helperElement.style.pointerEvents = "none";
        ele = document.elementFromPoint(intCoord.clientX, intCoord.clientY);
        this.helperElement.style.pointerEvents = prevStyle;
      } else {
        ele = evt.target;
      }
      return ele;
    };
    Draggable2.prototype.currentStateCheck = function(ele, oldEle) {
      var elem;
      if (!isNullOrUndefined(this.currentStateTarget) && this.currentStateTarget !== ele) {
        elem = this.currentStateTarget;
      } else {
        elem = !isNullOrUndefined(oldEle) ? oldEle : ele;
      }
      return elem;
    };
    Draggable2.prototype.getMousePosition = function(evt, isdragscroll) {
      var dragEle = evt.srcElement !== void 0 ? evt.srcElement : evt.target;
      var intCoord = this.getCoordinates(evt);
      var pageX;
      var pageY;
      var isOffsetParent = isNullOrUndefined(dragEle.offsetParent);
      if (isdragscroll) {
        pageX = this.clone ? intCoord.pageX : intCoord.pageX + (isOffsetParent ? 0 : dragEle.offsetParent.scrollLeft) - this.relativeXPosition;
        pageY = this.clone ? intCoord.pageY : intCoord.pageY + (isOffsetParent ? 0 : dragEle.offsetParent.scrollTop) - this.relativeYPosition;
      } else {
        pageX = this.clone ? intCoord.pageX : intCoord.pageX + window.pageXOffset - this.relativeXPosition;
        pageY = this.clone ? intCoord.pageY : intCoord.pageY + window.pageYOffset - this.relativeYPosition;
      }
      if (!this.element.classList.contains("e-dialog") && !this.element.classList.contains("e-card") && document.scrollingElement) {
        var isVerticalScroll = document.scrollingElement.scrollHeight > 0 && document.scrollingElement.scrollHeight > document.scrollingElement.clientHeight && document.scrollingElement.scrollTop > 0;
        var isHorrizontalScroll = document.scrollingElement.scrollWidth > 0 && document.scrollingElement.scrollWidth > document.scrollingElement.clientWidth && document.scrollingElement.scrollLeft > 0;
        pageX = isHorrizontalScroll ? pageX - document.scrollingElement.scrollLeft : pageX;
        pageY = isVerticalScroll ? pageY - document.scrollingElement.scrollTop : pageY;
      }
      return {
        left: pageX - (this.margin.left + this.cursorAt.left),
        top: pageY - (this.margin.top + this.cursorAt.top)
      };
    };
    Draggable2.prototype.getCoordinates = function(evt) {
      if (evt.type.indexOf("touch") > -1) {
        return evt.changedTouches[0];
      }
      return evt;
    };
    Draggable2.prototype.getHelperElement = function(evt) {
      var element2;
      if (this.clone) {
        if (this.helper) {
          element2 = this.helper({ sender: evt, element: this.target });
        } else {
          element2 = createElement("div", { className: "e-drag-helper e-block-touch", innerHTML: "Draggable" });
          document.body.appendChild(element2);
        }
      } else {
        element2 = this.element;
      }
      return element2;
    };
    Draggable2.prototype.setGlobalDroppables = function(reset, drag2, helper) {
      this.droppables[this.scope] = reset ? null : {
        draggable: drag2,
        helper,
        draggedElement: this.element
      };
    };
    Draggable2.prototype.checkTargetElement = function(evt) {
      var target = this.getProperTargetElement(evt);
      var dropIns = this.getDropInstance(target);
      if (!dropIns && target && !isNullOrUndefined(target.parentNode)) {
        var parent_1 = closest(target.parentNode, ".e-droppable") || target.parentElement;
        if (parent_1) {
          dropIns = this.getDropInstance(parent_1);
        }
      }
      return { target, instance: dropIns };
    };
    Draggable2.prototype.getDropInstance = function(ele) {
      var name = "getModuleName";
      var drop;
      var eleInst = ele && ele.ej2_instances;
      if (eleInst) {
        for (var _i = 0, eleInst_1 = eleInst; _i < eleInst_1.length; _i++) {
          var inst = eleInst_1[_i];
          if (inst["" + name]() === "droppable") {
            drop = inst;
            break;
          }
        }
      }
      return drop;
    };
    Draggable2.prototype.destroy = function() {
      this.toggleEvents(true);
      _super.prototype.destroy.call(this);
    };
    var Draggable_1;
    __decorate$N([
      Complex({}, Position)
    ], Draggable2.prototype, "cursorAt", void 0);
    __decorate$N([
      Property(true)
    ], Draggable2.prototype, "clone", void 0);
    __decorate$N([
      Property()
    ], Draggable2.prototype, "dragArea", void 0);
    __decorate$N([
      Property()
    ], Draggable2.prototype, "isDragScroll", void 0);
    __decorate$N([
      Property()
    ], Draggable2.prototype, "isReplaceDragEle", void 0);
    __decorate$N([
      Property(true)
    ], Draggable2.prototype, "isPreventSelect", void 0);
    __decorate$N([
      Event$1()
    ], Draggable2.prototype, "drag", void 0);
    __decorate$N([
      Event$1()
    ], Draggable2.prototype, "dragStart", void 0);
    __decorate$N([
      Event$1()
    ], Draggable2.prototype, "dragStop", void 0);
    __decorate$N([
      Property(1)
    ], Draggable2.prototype, "distance", void 0);
    __decorate$N([
      Property()
    ], Draggable2.prototype, "handle", void 0);
    __decorate$N([
      Property()
    ], Draggable2.prototype, "abort", void 0);
    __decorate$N([
      Property()
    ], Draggable2.prototype, "helper", void 0);
    __decorate$N([
      Property("default")
    ], Draggable2.prototype, "scope", void 0);
    __decorate$N([
      Property("")
    ], Draggable2.prototype, "dragTarget", void 0);
    __decorate$N([
      Property()
    ], Draggable2.prototype, "axis", void 0);
    __decorate$N([
      Property()
    ], Draggable2.prototype, "queryPositionInfo", void 0);
    __decorate$N([
      Property(false)
    ], Draggable2.prototype, "enableTailMode", void 0);
    __decorate$N([
      Property(false)
    ], Draggable2.prototype, "skipDistanceCheck", void 0);
    __decorate$N([
      Property(true)
    ], Draggable2.prototype, "preventDefault", void 0);
    __decorate$N([
      Property(false)
    ], Draggable2.prototype, "enableAutoScroll", void 0);
    __decorate$N([
      Property(false)
    ], Draggable2.prototype, "enableTapHold", void 0);
    __decorate$N([
      Property(750)
    ], Draggable2.prototype, "tapHoldThreshold", void 0);
    __decorate$N([
      Property(false)
    ], Draggable2.prototype, "enableScrollHandler", void 0);
    Draggable2 = Draggable_1 = __decorate$N([
      NotifyPropertyChanges
    ], Draggable2);
    return Draggable2;
  }(Base)
);
var __extends$Y = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$M = globalThis && globalThis.__decorate || function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i = decorators.length - 1; i >= 0; i--)
      if (d = decorators[i])
        r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var Droppable = (
  /** @class */
  function(_super) {
    __extends$Y(Droppable2, _super);
    function Droppable2(element2, options) {
      var _this = _super.call(this, options, element2) || this;
      _this.mouseOver = false;
      _this.dragData = {};
      _this.dragStopCalled = false;
      _this.bind();
      return _this;
    }
    Droppable2.prototype.bind = function() {
      this.wireEvents();
    };
    Droppable2.prototype.wireEvents = function() {
      EventHandler.add(this.element, Browser.isSafari() ? "touchend" : Browser.touchEndEvent, this.intDrop, this);
    };
    Droppable2.prototype.onPropertyChanged = function(newProp, oldProp) {
    };
    Droppable2.prototype.getModuleName = function() {
      return "droppable";
    };
    Droppable2.prototype.intOver = function(event, element2) {
      if (!this.mouseOver) {
        var drag2 = this.dragData[this.scope];
        this.trigger("over", { event, target: element2, dragData: drag2 });
        this.mouseOver = true;
      }
    };
    Droppable2.prototype.intOut = function(event, element2) {
      if (this.mouseOver) {
        this.trigger("out", { evt: event, target: element2 });
        this.mouseOver = false;
      }
    };
    Droppable2.prototype.intDrop = function(evt, element2) {
      if (!this.dragStopCalled) {
        return;
      } else {
        this.dragStopCalled = false;
      }
      var accept = true;
      var drag2 = this.dragData[this.scope];
      var isDrag = drag2 ? drag2.helper && isVisible(drag2.helper) : false;
      var area;
      if (isDrag) {
        area = this.isDropArea(evt, drag2.helper, element2);
        if (this.accept) {
          accept = matches$1(drag2.helper, this.accept);
        }
      }
      if (isDrag && this.drop && area.canDrop && accept) {
        this.trigger("drop", { event: evt, target: area.target, droppedElement: drag2.helper, dragData: drag2 });
      }
      this.mouseOver = false;
    };
    Droppable2.prototype.isDropArea = function(evt, helper, element2) {
      var area = { canDrop: true, target: element2 || evt.target };
      var isTouch = evt.type === "touchend";
      if (isTouch || area.target === helper) {
        helper.style.display = "none";
        var coord = isTouch ? evt.changedTouches[0] : evt;
        var ele = document.elementFromPoint(coord.clientX, coord.clientY);
        area.canDrop = false;
        area.canDrop = compareElementParent(ele, this.element);
        if (area.canDrop) {
          area.target = ele;
        }
        helper.style.display = "";
      }
      return area;
    };
    Droppable2.prototype.destroy = function() {
      EventHandler.remove(this.element, Browser.isSafari() ? "touchend" : Browser.touchEndEvent, this.intDrop);
      _super.prototype.destroy.call(this);
    };
    __decorate$M([
      Property()
    ], Droppable2.prototype, "accept", void 0);
    __decorate$M([
      Property("default")
    ], Droppable2.prototype, "scope", void 0);
    __decorate$M([
      Event$1()
    ], Droppable2.prototype, "drop", void 0);
    __decorate$M([
      Event$1()
    ], Droppable2.prototype, "over", void 0);
    __decorate$M([
      Event$1()
    ], Droppable2.prototype, "out", void 0);
    Droppable2 = __decorate$M([
      NotifyPropertyChanges
    ], Droppable2);
    return Droppable2;
  }(Base)
);
var __extends$X = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$L = globalThis && globalThis.__decorate || function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i = decorators.length - 1; i >= 0; i--)
      if (d = decorators[i])
        r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var keyCode = {
  "backspace": 8,
  "tab": 9,
  "enter": 13,
  "shift": 16,
  "control": 17,
  "alt": 18,
  "pause": 19,
  "capslock": 20,
  "space": 32,
  "escape": 27,
  "pageup": 33,
  "pagedown": 34,
  "end": 35,
  "home": 36,
  "leftarrow": 37,
  "uparrow": 38,
  "rightarrow": 39,
  "downarrow": 40,
  "insert": 45,
  "delete": 46,
  "f1": 112,
  "f2": 113,
  "f3": 114,
  "f4": 115,
  "f5": 116,
  "f6": 117,
  "f7": 118,
  "f8": 119,
  "f9": 120,
  "f10": 121,
  "f11": 122,
  "f12": 123,
  "semicolon": 186,
  "plus": 187,
  "comma": 188,
  "minus": 189,
  "dot": 190,
  "forwardslash": 191,
  "graveaccent": 192,
  "openbracket": 219,
  "backslash": 220,
  "closebracket": 221,
  "singlequote": 222
};
var KeyboardEvents = (
  /** @class */
  function(_super) {
    __extends$X(KeyboardEvents2, _super);
    function KeyboardEvents2(element2, options) {
      var _this = _super.call(this, options, element2) || this;
      _this.keyPressHandler = function(e) {
        var isAltKey = e.altKey;
        var isCtrlKey = e.ctrlKey;
        var isShiftKey = e.shiftKey;
        var curkeyCode = e.which;
        var keys2 = Object.keys(_this.keyConfigs);
        for (var _i = 0, keys_1 = keys2; _i < keys_1.length; _i++) {
          var key = keys_1[_i];
          var configCollection = _this.keyConfigs["" + key].split(",");
          for (var _a = 0, configCollection_1 = configCollection; _a < configCollection_1.length; _a++) {
            var rconfig = configCollection_1[_a];
            var rKeyObj = KeyboardEvents_1.getKeyConfigData(rconfig.trim());
            if (isAltKey === rKeyObj.altKey && isCtrlKey === rKeyObj.ctrlKey && isShiftKey === rKeyObj.shiftKey && curkeyCode === rKeyObj.keyCode) {
              e.action = key;
              if (_this.keyAction) {
                _this.keyAction(e);
              }
            }
          }
        }
      };
      _this.bind();
      return _this;
    }
    KeyboardEvents_1 = KeyboardEvents2;
    KeyboardEvents2.prototype.destroy = function() {
      this.unwireEvents();
      _super.prototype.destroy.call(this);
    };
    KeyboardEvents2.prototype.onPropertyChanged = function(newProp, oldProp) {
    };
    KeyboardEvents2.prototype.bind = function() {
      this.wireEvents();
    };
    KeyboardEvents2.prototype.getModuleName = function() {
      return "keyboard";
    };
    KeyboardEvents2.prototype.wireEvents = function() {
      this.element.addEventListener(this.eventName, this.keyPressHandler);
    };
    KeyboardEvents2.prototype.unwireEvents = function() {
      this.element.removeEventListener(this.eventName, this.keyPressHandler);
    };
    KeyboardEvents2.getKeyConfigData = function(config) {
      if (config in this.configCache) {
        return this.configCache["" + config];
      }
      var keys2 = config.toLowerCase().split("+");
      var keyData = {
        altKey: keys2.indexOf("alt") !== -1 ? true : false,
        ctrlKey: keys2.indexOf("ctrl") !== -1 ? true : false,
        shiftKey: keys2.indexOf("shift") !== -1 ? true : false,
        keyCode: null
      };
      if (keys2[keys2.length - 1].length > 1 && !!Number(keys2[keys2.length - 1])) {
        keyData.keyCode = Number(keys2[keys2.length - 1]);
      } else {
        keyData.keyCode = KeyboardEvents_1.getKeyCode(keys2[keys2.length - 1]);
      }
      KeyboardEvents_1.configCache["" + config] = keyData;
      return keyData;
    };
    KeyboardEvents2.getKeyCode = function(keyVal) {
      return keyCode["" + keyVal] || keyVal.toUpperCase().charCodeAt(0);
    };
    var KeyboardEvents_1;
    KeyboardEvents2.configCache = {};
    __decorate$L([
      Property({})
    ], KeyboardEvents2.prototype, "keyConfigs", void 0);
    __decorate$L([
      Property("keyup")
    ], KeyboardEvents2.prototype, "eventName", void 0);
    __decorate$L([
      Event$1()
    ], KeyboardEvents2.prototype, "keyAction", void 0);
    KeyboardEvents2 = KeyboardEvents_1 = __decorate$L([
      NotifyPropertyChanges
    ], KeyboardEvents2);
    return KeyboardEvents2;
  }(Base)
);
var L10n = (
  /** @class */
  function() {
    function L10n2(controlName, localeStrings, locale) {
      this.controlName = controlName;
      this.localeStrings = localeStrings;
      this.setLocale(locale || defaultCulture);
    }
    L10n2.prototype.setLocale = function(locale) {
      var intLocale = this.intGetControlConstant(L10n2.locale, locale);
      this.currentLocale = intLocale || this.localeStrings;
    };
    L10n2.load = function(localeObject) {
      this.locale = extend(this.locale, localeObject, {}, true);
    };
    L10n2.prototype.getConstant = function(prop) {
      if (!isNullOrUndefined(this.currentLocale["" + prop])) {
        return this.currentLocale["" + prop];
      } else {
        return this.localeStrings["" + prop] || "";
      }
    };
    L10n2.prototype.intGetControlConstant = function(curObject, locale) {
      if (curObject["" + locale]) {
        return curObject["" + locale][this.controlName];
      }
      return null;
    };
    L10n2.locale = {};
    return L10n2;
  }()
);
var __extends$W = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$K = globalThis && globalThis.__decorate || function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i = decorators.length - 1; i >= 0; i--)
      if (d = decorators[i])
        r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var SwipeSettings = (
  /** @class */
  function(_super) {
    __extends$W(SwipeSettings2, _super);
    function SwipeSettings2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$K([
      Property(50)
    ], SwipeSettings2.prototype, "swipeThresholdDistance", void 0);
    return SwipeSettings2;
  }(ChildProperty)
);
var swipeRegex = /(Up|Down)/;
var Touch = (
  /** @class */
  function(_super) {
    __extends$W(Touch2, _super);
    function Touch2(element2, options) {
      var _this = _super.call(this, options, element2) || this;
      _this.touchAction = true;
      _this.tapCount = 0;
      _this.startEvent = function(evt) {
        if (_this.touchAction === true) {
          var point = _this.updateChangeTouches(evt);
          if (evt.changedTouches !== void 0) {
            _this.touchAction = false;
          }
          _this.isTouchMoved = false;
          _this.movedDirection = "";
          _this.startPoint = _this.lastMovedPoint = { clientX: point.clientX, clientY: point.clientY };
          _this.startEventData = point;
          _this.hScrollLocked = _this.vScrollLocked = false;
          _this.tStampStart = Date.now();
          _this.timeOutTapHold = setTimeout(function() {
            _this.tapHoldEvent(evt);
          }, _this.tapHoldThreshold);
          EventHandler.add(_this.element, Browser.touchMoveEvent, _this.moveEvent, _this);
          EventHandler.add(_this.element, Browser.touchEndEvent, _this.endEvent, _this);
          EventHandler.add(_this.element, Browser.touchCancelEvent, _this.cancelEvent, _this);
        }
      };
      _this.moveEvent = function(evt) {
        var point = _this.updateChangeTouches(evt);
        _this.movedPoint = point;
        _this.isTouchMoved = !(point.clientX === _this.startPoint.clientX && point.clientY === _this.startPoint.clientY);
        var eScrollArgs = {};
        if (_this.isTouchMoved) {
          clearTimeout(_this.timeOutTapHold);
          _this.calcScrollPoints(evt);
          var scrollArg = {
            startEvents: _this.startEventData,
            originalEvent: evt,
            startX: _this.startPoint.clientX,
            startY: _this.startPoint.clientY,
            distanceX: _this.distanceX,
            distanceY: _this.distanceY,
            scrollDirection: _this.scrollDirection,
            velocity: _this.getVelocity(point)
          };
          eScrollArgs = extend(eScrollArgs, {}, scrollArg);
          _this.trigger("scroll", eScrollArgs);
          _this.lastMovedPoint = { clientX: point.clientX, clientY: point.clientY };
        }
      };
      _this.cancelEvent = function(evt) {
        clearTimeout(_this.timeOutTapHold);
        clearTimeout(_this.timeOutTap);
        _this.tapCount = 0;
        _this.swipeFn(evt);
        EventHandler.remove(_this.element, Browser.touchCancelEvent, _this.cancelEvent);
      };
      _this.endEvent = function(evt) {
        _this.swipeFn(evt);
        if (!_this.isTouchMoved) {
          if (typeof _this.tap === "function") {
            _this.trigger("tap", { originalEvent: evt, tapCount: ++_this.tapCount });
            _this.timeOutTap = setTimeout(function() {
              _this.tapCount = 0;
            }, _this.tapThreshold);
          }
        }
        _this.modeclear();
      };
      _this.swipeFn = function(evt) {
        clearTimeout(_this.timeOutTapHold);
        clearTimeout(_this.timeOutTap);
        var point = _this.updateChangeTouches(evt);
        var diffX = point.clientX - _this.startPoint.clientX;
        var diffY = point.clientY - _this.startPoint.clientY;
        diffX = Math.floor(diffX < 0 ? -1 * diffX : diffX);
        diffY = Math.floor(diffY < 0 ? -1 * diffY : diffX);
        _this.isTouchMoved = diffX > 1 || diffY > 1;
        var isFirefox = /Firefox/.test(Browser.userAgent);
        if (isFirefox && point.clientX === 0 && point.clientY === 0 && evt.type === "mouseup") {
          _this.isTouchMoved = false;
        }
        _this.endPoint = point;
        _this.calcPoints(evt);
        var swipeArgs = {
          originalEvent: evt,
          startEvents: _this.startEventData,
          startX: _this.startPoint.clientX,
          startY: _this.startPoint.clientY,
          distanceX: _this.distanceX,
          distanceY: _this.distanceY,
          swipeDirection: _this.movedDirection,
          velocity: _this.getVelocity(point)
        };
        if (_this.isTouchMoved) {
          var eSwipeArgs = void 0;
          var tDistance = _this.swipeSettings.swipeThresholdDistance;
          eSwipeArgs = extend(eSwipeArgs, _this.defaultArgs, swipeArgs);
          var canTrigger = false;
          var ele = _this.element;
          var scrollBool = _this.isScrollable(ele);
          var moved = swipeRegex.test(_this.movedDirection);
          if (tDistance < _this.distanceX && !moved || tDistance < _this.distanceY && moved) {
            if (!scrollBool) {
              canTrigger = true;
            } else {
              canTrigger = _this.checkSwipe(ele, moved);
            }
          }
          if (canTrigger) {
            _this.trigger("swipe", eSwipeArgs);
          }
        }
        _this.modeclear();
      };
      _this.modeclear = function() {
        _this.modeClear = setTimeout(function() {
          _this.touchAction = true;
        }, typeof _this.tap !== "function" ? 0 : 20);
        _this.lastTapTime = (/* @__PURE__ */ new Date()).getTime();
        EventHandler.remove(_this.element, Browser.touchMoveEvent, _this.moveEvent);
        EventHandler.remove(_this.element, Browser.touchEndEvent, _this.endEvent);
        EventHandler.remove(_this.element, Browser.touchCancelEvent, _this.cancelEvent);
      };
      _this.bind();
      return _this;
    }
    Touch2.prototype.onPropertyChanged = function(newProp, oldProp) {
    };
    Touch2.prototype.bind = function() {
      this.wireEvents();
      if (Browser.isIE) {
        this.element.classList.add("e-block-touch");
      }
    };
    Touch2.prototype.destroy = function() {
      this.unwireEvents();
      _super.prototype.destroy.call(this);
    };
    Touch2.prototype.wireEvents = function() {
      EventHandler.add(this.element, Browser.touchStartEvent, this.startEvent, this);
    };
    Touch2.prototype.unwireEvents = function() {
      EventHandler.remove(this.element, Browser.touchStartEvent, this.startEvent);
    };
    Touch2.prototype.getModuleName = function() {
      return "touch";
    };
    Touch2.prototype.isScrollable = function(element2) {
      var eleStyle = getComputedStyle(element2);
      var style = eleStyle.overflow + eleStyle.overflowX + eleStyle.overflowY;
      if (/(auto|scroll)/.test(style)) {
        return true;
      }
      return false;
    };
    Touch2.prototype.tapHoldEvent = function(evt) {
      this.tapCount = 0;
      this.touchAction = true;
      var eTapArgs;
      EventHandler.remove(this.element, Browser.touchMoveEvent, this.moveEvent);
      EventHandler.remove(this.element, Browser.touchEndEvent, this.endEvent);
      eTapArgs = { originalEvent: evt };
      this.trigger("tapHold", eTapArgs);
      EventHandler.remove(this.element, Browser.touchCancelEvent, this.cancelEvent);
    };
    Touch2.prototype.calcPoints = function(evt) {
      var point = this.updateChangeTouches(evt);
      this.defaultArgs = { originalEvent: evt };
      this.distanceX = Math.abs(Math.abs(point.clientX) - Math.abs(this.startPoint.clientX));
      this.distanceY = Math.abs(Math.abs(point.clientY) - Math.abs(this.startPoint.clientY));
      if (this.distanceX > this.distanceY) {
        this.movedDirection = point.clientX > this.startPoint.clientX ? "Right" : "Left";
      } else {
        this.movedDirection = point.clientY < this.startPoint.clientY ? "Up" : "Down";
      }
    };
    Touch2.prototype.calcScrollPoints = function(evt) {
      var point = this.updateChangeTouches(evt);
      this.defaultArgs = { originalEvent: evt };
      this.distanceX = Math.abs(Math.abs(point.clientX) - Math.abs(this.lastMovedPoint.clientX));
      this.distanceY = Math.abs(Math.abs(point.clientY) - Math.abs(this.lastMovedPoint.clientY));
      if ((this.distanceX > this.distanceY || this.hScrollLocked === true) && this.vScrollLocked === false) {
        this.scrollDirection = point.clientX > this.lastMovedPoint.clientX ? "Right" : "Left";
        this.hScrollLocked = true;
      } else {
        this.scrollDirection = point.clientY < this.lastMovedPoint.clientY ? "Up" : "Down";
        this.vScrollLocked = true;
      }
    };
    Touch2.prototype.getVelocity = function(pnt) {
      var newX = pnt.clientX;
      var newY = pnt.clientY;
      var newT = Date.now();
      var xDist = newX - this.startPoint.clientX;
      var yDist = newY - this.startPoint.clientX;
      var interval = newT - this.tStampStart;
      return Math.sqrt(xDist * xDist + yDist * yDist) / interval;
    };
    Touch2.prototype.checkSwipe = function(ele, flag) {
      var keys2 = ["scroll", "offset"];
      var temp = flag ? ["Height", "Top"] : ["Width", "Left"];
      if (ele[keys2[0] + temp[0]] <= ele[keys2[1] + temp[0]]) {
        return true;
      }
      return ele[keys2[0] + temp[1]] === 0 || ele[keys2[1] + temp[0]] + ele[keys2[0] + temp[1]] >= ele[keys2[0] + temp[0]];
    };
    Touch2.prototype.updateChangeTouches = function(evt) {
      var point = evt.changedTouches && evt.changedTouches.length !== 0 ? evt.changedTouches[0] : evt;
      return point;
    };
    __decorate$K([
      Event$1()
    ], Touch2.prototype, "tap", void 0);
    __decorate$K([
      Event$1()
    ], Touch2.prototype, "tapHold", void 0);
    __decorate$K([
      Event$1()
    ], Touch2.prototype, "swipe", void 0);
    __decorate$K([
      Event$1()
    ], Touch2.prototype, "scroll", void 0);
    __decorate$K([
      Property(350)
    ], Touch2.prototype, "tapThreshold", void 0);
    __decorate$K([
      Property(750)
    ], Touch2.prototype, "tapHoldThreshold", void 0);
    __decorate$K([
      Complex({}, SwipeSettings)
    ], Touch2.prototype, "swipeSettings", void 0);
    Touch2 = __decorate$K([
      NotifyPropertyChanges
    ], Touch2);
    return Touch2;
  }(Base)
);
var LINES = new RegExp("\\n|\\r|\\s\\s+", "g");
var QUOTES = new RegExp(/'|"/g);
var IF_STMT = new RegExp("if ?\\(");
var ELSEIF_STMT = new RegExp("else if ?\\(");
var ELSE_STMT = new RegExp("else");
var FOR_STMT = new RegExp("for ?\\(");
var IF_OR_FOR = new RegExp("(/if|/for)");
var CALL_FUNCTION = new RegExp("\\((.*)\\)", "");
var NOT_NUMBER = new RegExp("^[0-9]+$", "g");
var WORD = new RegExp(`[\\w"'.\\s+]+`, "g");
var DBL_QUOTED_STR = new RegExp('"(.*?)"', "g");
var WORDIF = new RegExp(`[\\w"'@#$.\\s-+]+`, "g");
var exp = new RegExp("\\${([^}]*)}", "g");
var ARR_OBJ = /^\..*/gm;
var SINGLE_SLASH = /\\/gi;
var DOUBLE_SLASH = /\\\\/gi;
var WORDFUNC = new RegExp(`[\\w"'@#$.\\s+]+`, "g");
var WINDOWFUNC = /\window\./gm;
function compile$2(template, helper, ignorePrefix) {
  var argName = "data";
  var evalExpResult = evalExp(template, argName, helper, ignorePrefix);
  var condtion = `var valueRegEx = (/value=\\'([A-Za-z0-9 _]*)((.)([\\w)(!-;?-■\\s]+)['])/g);
    var hrefRegex = (/(?:href)([\\s='"./]+)([\\w-./?=&\\\\#"]+)((.)([\\w)(!-;/?-■\\s]+)['])/g);
    if(str.match(valueRegEx)){
        var check = str.match(valueRegEx);
        var str1 = str;
        for (var i=0; i < check.length; i++) {
            var check1 = str.match(valueRegEx)[i].split('value=')[1];
            var change = check1.match(/^'/) !== null ? check1.replace(/^'/, '"') : check1;
            change =change.match(/.$/)[0] === '\\'' ? change.replace(/.$/,'"') : change;
            str1 = str1.replace(check1, change);
        }
        str = str.replace(str, str1);
    }
    else if (str.match(/(?:href='')/) === null) {
        if(str.match(hrefRegex)) {
            var check = str.match(hrefRegex);
            var str1 = str;
            for (var i=0; i < check.length; i++) {
                var check1 = str.match(hrefRegex)[i].split('href=')[1];
                if (check1) {
                    var change = check1.match(/^'/) !== null ? check1.replace(/^'/, '"') : check1;
                    change =change.match(/.$/)[0] === '\\'' ? change.replace(/.$/,'"') : change;
                    str1 = str1.replace(check1, change);
                }
            }
            str = str.replace(str, str1);
        }
    }
    `;
  var fnCode = 'var str="' + evalExpResult + '";' + condtion + " return str;";
  var fn = new Function(argName, fnCode);
  return fn.bind(helper);
}
function evalExp(str, nameSpace, helper, ignorePrefix) {
  var varCOunt = 0;
  var localKeys = [];
  var isClass = str.match(/class="([^"]+|)\s{2}/g);
  var singleSpace = "";
  if (isClass) {
    isClass.forEach(function(value) {
      singleSpace = value.replace(/\s\s+/g, " ");
      str = str.replace(value, singleSpace);
    });
  }
  return str.replace(LINES, "").replace(DBL_QUOTED_STR, "'$1'").replace(
    exp,
    // eslint-disable-next-line
    function(match, cnt, offset, matchStr) {
      var SPECIAL_CHAR = /@|#|\$/gm;
      var matches2 = cnt.match(CALL_FUNCTION);
      if (matches2) {
        var rlStr = matches2[1];
        if (ELSEIF_STMT.test(cnt)) {
          cnt = '";} ' + cnt.replace(matches2[1], rlStr.replace(WORD, function(str2) {
            str2 = str2.trim();
            return addNameSpace(str2, !QUOTES.test(str2) && localKeys.indexOf(str2) === -1, nameSpace, localKeys, ignorePrefix);
          })) + '{ \n str = str + "';
        } else if (IF_STMT.test(cnt)) {
          cnt = '"; ' + cnt.replace(matches2[1], rlStr.replace(WORDIF, function(strs) {
            return HandleSpecialCharArrObj(strs, nameSpace, localKeys, ignorePrefix);
          })) + '{ \n str = str + "';
        } else if (FOR_STMT.test(cnt)) {
          var rlStr_1 = matches2[1].split(" of ");
          cnt = '"; ' + cnt.replace(matches2[1], function(mtc) {
            localKeys.push(rlStr_1[0]);
            localKeys.push(rlStr_1[0] + "Index");
            varCOunt = varCOunt + 1;
            return "var i" + varCOunt + "=0; i" + varCOunt + " < " + addNameSpace(rlStr_1[1], true, nameSpace, localKeys, ignorePrefix) + ".length; i" + varCOunt + "++";
          }) + "{ \n " + rlStr_1[0] + "= " + addNameSpace(rlStr_1[1], true, nameSpace, localKeys, ignorePrefix) + "[i" + varCOunt + "]; \n var " + rlStr_1[0] + "Index=i" + varCOunt + '; \n str = str + "';
        } else {
          var fnStr = cnt.split("(");
          var fNameSpace = helper && helper.hasOwnProperty(fnStr[0]) ? "this." : "global";
          fNameSpace = /\./.test(fnStr[0]) ? "" : fNameSpace;
          var ftArray = matches2[1].split(",");
          if (matches2[1].length !== 0 && !/data/.test(ftArray[0]) && !/window./.test(ftArray[0])) {
            matches2[1] = fNameSpace === "global" ? nameSpace + "." + matches2[1] : matches2[1];
          }
          var splRegexp = /@|\$|#/gm;
          var arrObj = /\]\./gm;
          if (WINDOWFUNC.test(cnt) && arrObj.test(cnt) || splRegexp.test(cnt)) {
            var splArrRegexp = /@|\$|#|\]\./gm;
            if (splArrRegexp.test(cnt)) {
              cnt = '"+ ' + (fNameSpace === "global" ? "" : fNameSpace) + cnt.replace(matches2[1], rlStr.replace(WORDFUNC, function(strs) {
                return HandleSpecialCharArrObj(strs, nameSpace, localKeys, ignorePrefix);
              })) + '+ "';
            }
          } else {
            cnt = '" + ' + (fNameSpace === "global" ? "" : fNameSpace) + cnt.replace(rlStr, addNameSpace(matches2[1].replace(/,( |)data.|,/gi, "," + nameSpace + ".").replace(/,( |)data.window/gi, ",window"), fNameSpace === "global" ? false : true, nameSpace, localKeys, ignorePrefix)) + '+"';
          }
        }
      } else if (ELSE_STMT.test(cnt)) {
        cnt = '"; ' + cnt.replace(ELSE_STMT, '} else { \n str = str + "');
      } else if (!!cnt.match(IF_OR_FOR)) {
        cnt = cnt.replace(IF_OR_FOR, '"; \n } \n str = str + "');
      } else if (SPECIAL_CHAR.test(cnt)) {
        if (cnt.match(SINGLE_SLASH)) {
          cnt = SlashReplace(cnt);
        }
        cnt = '"+' + NameSpaceForspecialChar(cnt, localKeys.indexOf(cnt) === -1, nameSpace, localKeys) + '"]+"';
      } else {
        if (cnt.match(SINGLE_SLASH)) {
          cnt = SlashReplace(cnt);
          cnt = '"+' + NameSpaceForspecialChar(cnt, localKeys.indexOf(cnt) === -1, nameSpace, localKeys) + '"]+"';
        } else {
          cnt = cnt !== "" ? '"+' + addNameSpace(cnt.replace(/,/gi, "+" + nameSpace + "."), localKeys.indexOf(cnt) === -1, nameSpace, localKeys, ignorePrefix) + '+"' : " ";
        }
      }
      return cnt;
    }
  );
}
function addNameSpace(str, addNS, nameSpace, ignoreList, ignorePrefix) {
  return addNS && !NOT_NUMBER.test(str) && ignoreList.indexOf(str.split(".")[0]) === -1 && !ignorePrefix ? nameSpace + "." + str : str;
}
function NameSpaceArrObj(str, addNS, nameSpace, ignoreList) {
  var arrObjReg = /^\..*/gm;
  return addNS && !NOT_NUMBER.test(str) && ignoreList.indexOf(str.split(".")[0]) === -1 && !arrObjReg.test(str) ? nameSpace + "." + str : str;
}
function NameSpaceForspecialChar(str, addNS, nameSpace, ignoreList) {
  return addNS && !NOT_NUMBER.test(str) && ignoreList.indexOf(str.split(".")[0]) === -1 ? nameSpace + '["' + str : str;
}
function SlashReplace(tempStr) {
  var double = "\\\\";
  if (tempStr.match(DOUBLE_SLASH)) {
    tempStr = tempStr;
  } else {
    tempStr = tempStr.replace(SINGLE_SLASH, double);
  }
  return tempStr;
}
function HandleSpecialCharArrObj(str, nameSpaceNew, keys2, ignorePrefix) {
  str = str.trim();
  var windowFunc = /\window\./gm;
  if (!windowFunc.test(str)) {
    var quotes = /'|"/gm;
    var splRegexp = /@|\$|#/gm;
    if (splRegexp.test(str)) {
      str = NameSpaceForspecialChar(str, keys2.indexOf(str) === -1, nameSpaceNew, keys2) + '"]';
    }
    if (ARR_OBJ.test(str)) {
      return NameSpaceArrObj(str, !quotes.test(str) && keys2.indexOf(str) === -1, nameSpaceNew, keys2);
    } else {
      return addNameSpace(str, !quotes.test(str) && keys2.indexOf(str) === -1, nameSpaceNew, keys2, ignorePrefix);
    }
  } else {
    return str;
  }
}
var HAS_ROW = /^[\n\r.]+<tr|^<tr/;
var HAS_SVG = /^[\n\r.]+<svg|^<path|^<g/;
function getRandomId() {
  return "-" + Math.random().toString(36).substr(2, 5);
}
function compile$1(templateString, helper, ignorePrefix) {
  var compiler = engineObj.compile(templateString, helper, ignorePrefix);
  return function(data, component, propName, templateId, isStringTemplate, index, element2, root) {
    var result = compiler(data, component, propName, element2, root);
    if (typeof result === "string") {
      if (HAS_SVG.test(result)) {
        var ele = createElement("svg", { innerHTML: result });
        return ele.childNodes;
      } else {
        var ele = createElement(HAS_ROW.test(result) ? "table" : "div", { innerHTML: result });
        return ele.childNodes;
      }
    } else {
      return result;
    }
  };
}
function setTemplateEngine(classObj) {
  engineObj.compile = classObj.compile;
}
function getTemplateEngine() {
  return engineObj.compile;
}
var Engine = (
  /** @class */
  function() {
    function Engine2() {
    }
    Engine2.prototype.compile = function(templateString, helper, ignorePrefix) {
      if (helper === void 0) {
        helper = {};
      }
      return compile$2(templateString, helper);
    };
    return Engine2;
  }()
);
var engineObj = { compile: new Engine().compile };
var removeTags = [
  "script",
  "style",
  "iframe[src]",
  'link[href*="javascript:"]',
  'object[type="text/x-scriptlet"]',
  'object[data^="data:text/html;base64"]',
  'img[src^="data:text/html;base64"]',
  '[src^="javascript:"]',
  '[dynsrc^="javascript:"]',
  '[lowsrc^="javascript:"]',
  '[type^="application/x-shockwave-flash"]'
];
var removeAttrs = [
  { attribute: "href", selector: '[href*="javascript:"]' },
  { attribute: "background", selector: '[background^="javascript:"]' },
  { attribute: "style", selector: '[style*="javascript:"]' },
  { attribute: "style", selector: '[style*="expression("]' },
  { attribute: "href", selector: 'a[href^="data:text/html;base64"]' }
];
var jsEvents = [
  "onchange",
  "onclick",
  "onmouseover",
  "onmouseout",
  "onkeydown",
  "onload",
  "onerror",
  "onblur",
  "onfocus",
  "onbeforeload",
  "onbeforeunload",
  "onkeyup",
  "onsubmit",
  "onafterprint",
  "onbeforeonload",
  "onbeforeprint",
  "onblur",
  "oncanplay",
  "oncanplaythrough",
  "onchange",
  "onclick",
  "oncontextmenu",
  "ondblclick",
  "ondrag",
  "ondragend",
  "ondragenter",
  "ondragleave",
  "ondragover",
  "ondragstart",
  "ondrop",
  "ondurationchange",
  "onemptied",
  "onended",
  "onerror",
  "onerror",
  "onfocus",
  "onformchange",
  "onforminput",
  "onhaschange",
  "oninput",
  "oninvalid",
  "onkeydown",
  "onkeypress",
  "onkeyup",
  "onload",
  "onloadeddata",
  "onloadedmetadata",
  "onloadstart",
  "onmessage",
  "onmousedown",
  "onmousemove",
  "onmouseout",
  "onmouseover",
  "onmouseup",
  "onmousewheel",
  "onoffline",
  "onoine",
  "ononline",
  "onpagehide",
  "onpageshow",
  "onpause",
  "onplay",
  "onplaying",
  "onpopstate",
  "onprogress",
  "onratechange",
  "onreadystatechange",
  "onredo",
  "onresize",
  "onscroll",
  "onseeked",
  "onseeking",
  "onselect",
  "onstalled",
  "onstorage",
  "onsubmit",
  "onsuspend",
  "ontimeupdate",
  "onundo",
  "onunload",
  "onvolumechange",
  "onwaiting",
  "onmouseenter",
  "onmouseleave",
  "onmousewheel",
  "onstart",
  "onpropertychange"
];
var SanitizeHtmlHelper = (
  /** @class */
  function() {
    function SanitizeHtmlHelper2() {
    }
    SanitizeHtmlHelper2.beforeSanitize = function() {
      return {
        selectors: {
          tags: removeTags,
          attributes: removeAttrs
        }
      };
    };
    SanitizeHtmlHelper2.sanitize = function(value) {
      var item = this.beforeSanitize();
      var output = this.serializeValue(item, value);
      return output;
    };
    SanitizeHtmlHelper2.serializeValue = function(item, value) {
      this.removeAttrs = item.selectors.attributes;
      this.removeTags = item.selectors.tags;
      this.wrapElement = document.createElement("div");
      this.wrapElement.innerHTML = value;
      this.removeXssTags();
      this.removeJsEvents();
      this.removeXssAttrs();
      var tempEleValue = this.wrapElement.innerHTML;
      this.removeElement();
      return tempEleValue.replace("&amp;", "&");
    };
    SanitizeHtmlHelper2.removeElement = function() {
      var nodes = this.wrapElement.children;
      for (var j = 0; j < nodes.length; j++) {
        var attribute = nodes[parseInt(j.toString(), 10)].attributes;
        for (var i = 0; i < attribute.length; i++) {
          this.wrapElement.children[parseInt(j.toString(), 10)].removeAttribute(attribute[parseInt(i.toString(), 10)].localName);
        }
      }
    };
    SanitizeHtmlHelper2.removeXssTags = function() {
      var elements = this.wrapElement.querySelectorAll(this.removeTags.join(","));
      if (elements.length > 0) {
        elements.forEach(function(element2) {
          detach(element2);
        });
      } else {
        return;
      }
    };
    SanitizeHtmlHelper2.removeJsEvents = function() {
      var elements = this.wrapElement.querySelectorAll("[" + jsEvents.join("],[") + "]");
      if (elements.length > 0) {
        elements.forEach(function(element2) {
          jsEvents.forEach(function(attr) {
            if (element2.hasAttribute(attr)) {
              element2.removeAttribute(attr);
            }
          });
        });
      } else {
        return;
      }
    };
    SanitizeHtmlHelper2.removeXssAttrs = function() {
      var _this = this;
      this.removeAttrs.forEach(function(item, index) {
        var elements = _this.wrapElement.querySelectorAll(item.selector);
        if (elements.length > 0) {
          elements.forEach(function(element2) {
            element2.removeAttribute(item.attribute);
          });
        }
      });
    };
    return SanitizeHtmlHelper2;
  }()
);
var elementRect;
var popupRect;
var element;
var parentDocument$1;
var fixedParent = false;
function calculateRelativeBasedPosition(anchor, element2) {
  var fixedElement = false;
  var anchorPos = { left: 0, top: 0 };
  var tempAnchor = anchor;
  if (!anchor || !element2) {
    return anchorPos;
  }
  if (isNullOrUndefined(element2.offsetParent) && element2.style.position === "fixed") {
    fixedElement = true;
  }
  while ((element2.offsetParent || fixedElement) && anchor && element2.offsetParent !== anchor) {
    anchorPos.left += anchor.offsetLeft;
    anchorPos.top += anchor.offsetTop;
    anchor = anchor.offsetParent;
  }
  anchor = tempAnchor;
  while ((element2.offsetParent || fixedElement) && anchor && element2.offsetParent !== anchor) {
    anchorPos.left -= anchor.scrollLeft;
    anchorPos.top -= anchor.scrollTop;
    anchor = anchor.parentElement;
  }
  return anchorPos;
}
function calculatePosition(currentElement, positionX, positionY, parentElement, targetValues) {
  popupRect = void 0;
  popupRect = targetValues;
  fixedParent = parentElement ? true : false;
  if (!currentElement) {
    return { left: 0, top: 0 };
  }
  if (!positionX) {
    positionX = "left";
  }
  if (!positionY) {
    positionY = "top";
  }
  parentDocument$1 = currentElement.ownerDocument;
  element = currentElement;
  var pos = { left: 0, top: 0 };
  return updatePosition(positionX.toLowerCase(), positionY.toLowerCase(), pos);
}
function setPosx(value, pos) {
  pos.left = value;
}
function setPosy(value, pos) {
  pos.top = value;
}
function updatePosition(posX, posY, pos) {
  elementRect = element.getBoundingClientRect();
  switch (posY + posX) {
    case "topcenter":
      setPosx(getElementHCenter(), pos);
      setPosy(getElementTop(), pos);
      break;
    case "topright":
      setPosx(getElementRight(), pos);
      setPosy(getElementTop(), pos);
      break;
    case "centercenter":
      setPosx(getElementHCenter(), pos);
      setPosy(getElementVCenter(), pos);
      break;
    case "centerright":
      setPosx(getElementRight(), pos);
      setPosy(getElementVCenter(), pos);
      break;
    case "centerleft":
      setPosx(getElementLeft(), pos);
      setPosy(getElementVCenter(), pos);
      break;
    case "bottomcenter":
      setPosx(getElementHCenter(), pos);
      setPosy(getElementBottom(), pos);
      break;
    case "bottomright":
      setPosx(getElementRight(), pos);
      setPosy(getElementBottom(), pos);
      break;
    case "bottomleft":
      setPosx(getElementLeft(), pos);
      setPosy(getElementBottom(), pos);
      break;
    default:
    case "topleft":
      setPosx(getElementLeft(), pos);
      setPosy(getElementTop(), pos);
      break;
  }
  element = null;
  return pos;
}
function getBodyScrollTop$1() {
  return parentDocument$1.documentElement.scrollTop || parentDocument$1.body.scrollTop;
}
function getBodyScrollLeft$1() {
  return parentDocument$1.documentElement.scrollLeft || parentDocument$1.body.scrollLeft;
}
function getElementBottom() {
  return fixedParent ? elementRect.bottom : elementRect.bottom + getBodyScrollTop$1();
}
function getElementVCenter() {
  return getElementTop() + elementRect.height / 2;
}
function getElementTop() {
  return fixedParent ? elementRect.top : elementRect.top + getBodyScrollTop$1();
}
function getElementLeft() {
  return elementRect.left + getBodyScrollLeft$1();
}
function getElementRight() {
  var popupWidth = element && element.classList.contains("e-date-range-wrapper") ? popupRect ? popupRect.width : 0 : popupRect && elementRect.width >= popupRect.width ? popupRect.width : 0;
  return elementRect.right + getBodyScrollLeft$1() - popupWidth;
}
function getElementHCenter() {
  return getElementLeft() + elementRect.width / 2;
}
var parentDocument;
var targetContainer;
function fit(element2, viewPortElement, axis, position) {
  if (viewPortElement === void 0) {
    viewPortElement = null;
  }
  if (axis === void 0) {
    axis = { X: false, Y: false };
  }
  if (!axis.Y && !axis.X) {
    return { left: 0, top: 0 };
  }
  var elemData = element2.getBoundingClientRect();
  targetContainer = viewPortElement;
  parentDocument = element2.ownerDocument;
  if (!position) {
    position = calculatePosition(element2, "left", "top");
  }
  if (axis.X) {
    var containerWidth = targetContainer ? getTargetContainerWidth() : getViewPortWidth();
    var containerLeft = ContainerLeft();
    var containerRight = ContainerRight();
    var overLeft = containerLeft - position.left;
    var overRight = position.left + elemData.width - containerRight;
    if (elemData.width > containerWidth) {
      if (overLeft > 0 && overRight <= 0) {
        position.left = containerRight - elemData.width;
      } else if (overRight > 0 && overLeft <= 0) {
        position.left = containerLeft;
      } else {
        position.left = overLeft > overRight ? containerRight - elemData.width : containerLeft;
      }
    } else if (overLeft > 0) {
      position.left += overLeft;
    } else if (overRight > 0) {
      position.left -= overRight;
    }
  }
  if (axis.Y) {
    var containerHeight = targetContainer ? getTargetContainerHeight() : getViewPortHeight();
    var containerTop = ContainerTop();
    var containerBottom = ContainerBottom();
    var overTop = containerTop - position.top;
    var overBottom = position.top + elemData.height - containerBottom;
    if (elemData.height > containerHeight) {
      if (overTop > 0 && overBottom <= 0) {
        position.top = containerBottom - elemData.height;
      } else if (overBottom > 0 && overTop <= 0) {
        position.top = containerTop;
      } else {
        position.top = overTop > overBottom ? containerBottom - elemData.height : containerTop;
      }
    } else if (overTop > 0) {
      position.top += overTop;
    } else if (overBottom > 0) {
      position.top -= overBottom;
    }
  }
  return position;
}
function isCollide(element2, viewPortElement, x, y) {
  if (viewPortElement === void 0) {
    viewPortElement = null;
  }
  var elemOffset = calculatePosition(element2, "left", "top");
  if (x) {
    elemOffset.left = x;
  }
  if (y) {
    elemOffset.top = y;
  }
  var data = [];
  targetContainer = viewPortElement;
  parentDocument = element2.ownerDocument;
  var elementRect2 = element2.getBoundingClientRect();
  var top = elemOffset.top;
  var left = elemOffset.left;
  var right = elemOffset.left + elementRect2.width;
  var bottom = elemOffset.top + elementRect2.height;
  var yAxis = topCollideCheck(top, bottom);
  var xAxis = leftCollideCheck(left, right);
  if (yAxis.topSide) {
    data.push("top");
  }
  if (xAxis.rightSide) {
    data.push("right");
  }
  if (xAxis.leftSide) {
    data.push("left");
  }
  if (yAxis.bottomSide) {
    data.push("bottom");
  }
  return data;
}
function flip(element2, target, offsetX, offsetY, positionX, positionY, viewPortElement, axis, fixedParent2) {
  if (viewPortElement === void 0) {
    viewPortElement = null;
  }
  if (axis === void 0) {
    axis = { X: true, Y: true };
  }
  if (!target || !element2 || !positionX || !positionY || !axis.X && !axis.Y) {
    return;
  }
  var tEdge = {
    TL: null,
    TR: null,
    BL: null,
    BR: null
  }, eEdge = {
    TL: null,
    TR: null,
    BL: null,
    BR: null
    /* eslint-enable */
  };
  var elementRect2;
  if (window.getComputedStyle(element2).display === "none") {
    var oldVisibility = element2.style.visibility;
    element2.style.visibility = "hidden";
    element2.style.display = "block";
    elementRect2 = element2.getBoundingClientRect();
    element2.style.removeProperty("display");
    element2.style.visibility = oldVisibility;
  } else {
    elementRect2 = element2.getBoundingClientRect();
  }
  var pos = {
    posX: positionX,
    posY: positionY,
    offsetX,
    offsetY,
    position: { left: 0, top: 0 }
  };
  targetContainer = viewPortElement;
  parentDocument = target.ownerDocument;
  updateElementData(target, tEdge, pos, fixedParent2, elementRect2);
  setPosition(eEdge, pos, elementRect2);
  if (axis.X) {
    leftFlip(target, eEdge, tEdge, pos, elementRect2, true);
  }
  if (axis.Y && tEdge.TL.top > -1) {
    topFlip(target, eEdge, tEdge, pos, elementRect2, true);
  }
  setPopup(element2, pos, elementRect2);
}
function setPopup(element2, pos, elementRect2) {
  var left = 0, top = 0;
  if (element2.offsetParent != null && (getComputedStyle(element2.offsetParent).position === "absolute" || getComputedStyle(element2.offsetParent).position === "relative")) {
    var data = calculatePosition(element2.offsetParent, "left", "top", false, elementRect2);
    left = data.left;
    top = data.top;
  }
  element2.style.top = pos.position.top + pos.offsetY - top + "px";
  element2.style.left = pos.position.left + pos.offsetX - left + "px";
}
function updateElementData(target, edge, pos, fixedParent2, elementRect2) {
  pos.position = calculatePosition(target, pos.posX, pos.posY, fixedParent2, elementRect2);
  edge.TL = calculatePosition(target, "left", "top", fixedParent2, elementRect2);
  edge.TR = calculatePosition(target, "right", "top", fixedParent2, elementRect2);
  edge.BR = calculatePosition(target, "left", "bottom", fixedParent2, elementRect2);
  edge.BL = calculatePosition(target, "right", "bottom", fixedParent2, elementRect2);
}
function setPosition(eStatus, pos, elementRect2) {
  eStatus.TL = { top: pos.position.top + pos.offsetY, left: pos.position.left + pos.offsetX };
  eStatus.TR = { top: eStatus.TL.top, left: eStatus.TL.left + elementRect2.width };
  eStatus.BL = {
    top: eStatus.TL.top + elementRect2.height,
    left: eStatus.TL.left
  };
  eStatus.BR = {
    top: eStatus.TL.top + elementRect2.height,
    left: eStatus.TL.left + elementRect2.width
  };
}
function leftCollideCheck(left, right) {
  var leftSide = false, rightSide = false;
  if (left - getBodyScrollLeft() < ContainerLeft()) {
    leftSide = true;
  }
  if (right > ContainerRight()) {
    rightSide = true;
  }
  return { leftSide, rightSide };
}
function leftFlip(target, edge, tEdge, pos, elementRect2, deepCheck) {
  var collideSide = leftCollideCheck(edge.TL.left, edge.TR.left);
  if (tEdge.TL.left - getBodyScrollLeft() <= ContainerLeft()) {
    collideSide.leftSide = false;
  }
  if (tEdge.TR.left > ContainerRight()) {
    collideSide.rightSide = false;
  }
  if (collideSide.leftSide && !collideSide.rightSide || !collideSide.leftSide && collideSide.rightSide) {
    if (pos.posX === "right") {
      pos.posX = "left";
    } else {
      pos.posX = "right";
    }
    pos.offsetX = pos.offsetX + elementRect2.width;
    pos.offsetX = -1 * pos.offsetX;
    pos.position = calculatePosition(target, pos.posX, pos.posY, false);
    setPosition(edge, pos, elementRect2);
    if (deepCheck) {
      leftFlip(target, edge, tEdge, pos, elementRect2, false);
    }
  }
}
function topFlip(target, edge, tEdge, pos, elementRect2, deepCheck) {
  var collideSide = topCollideCheck(edge.TL.top, edge.BL.top);
  if (tEdge.TL.top - getBodyScrollTop() <= ContainerTop()) {
    collideSide.topSide = false;
  }
  if (tEdge.BL.top >= ContainerBottom() && target.getBoundingClientRect().bottom < window.innerHeight) {
    collideSide.bottomSide = false;
  }
  if (collideSide.topSide && !collideSide.bottomSide || !collideSide.topSide && collideSide.bottomSide) {
    if (pos.posY === "top") {
      pos.posY = "bottom";
    } else {
      pos.posY = "top";
    }
    pos.offsetY = pos.offsetY + elementRect2.height;
    pos.offsetY = -1 * pos.offsetY;
    pos.position = calculatePosition(target, pos.posX, pos.posY, false, elementRect2);
    setPosition(edge, pos, elementRect2);
    if (deepCheck) {
      topFlip(target, edge, tEdge, pos, elementRect2, false);
    }
  }
}
function topCollideCheck(top, bottom) {
  var topSide = false, bottomSide = false;
  if (top - getBodyScrollTop() < ContainerTop()) {
    topSide = true;
  }
  if (bottom > ContainerBottom()) {
    bottomSide = true;
  }
  return { topSide, bottomSide };
}
function getTargetContainerWidth() {
  return targetContainer.getBoundingClientRect().width;
}
function getTargetContainerHeight() {
  return targetContainer.getBoundingClientRect().height;
}
function getTargetContainerLeft() {
  return targetContainer.getBoundingClientRect().left;
}
function getTargetContainerTop() {
  return targetContainer.getBoundingClientRect().top;
}
function ContainerTop() {
  if (targetContainer) {
    return getTargetContainerTop();
  }
  return 0;
}
function ContainerLeft() {
  if (targetContainer) {
    return getTargetContainerLeft();
  }
  return 0;
}
function ContainerRight() {
  if (targetContainer) {
    return getBodyScrollLeft() + getTargetContainerLeft() + getTargetContainerWidth();
  }
  return getBodyScrollLeft() + getViewPortWidth();
}
function ContainerBottom() {
  if (targetContainer) {
    return getBodyScrollTop() + getTargetContainerTop() + getTargetContainerHeight();
  }
  return getBodyScrollTop() + getViewPortHeight();
}
function getBodyScrollTop() {
  return parentDocument.documentElement.scrollTop || parentDocument.body.scrollTop;
}
function getBodyScrollLeft() {
  return parentDocument.documentElement.scrollLeft || parentDocument.body.scrollLeft;
}
function getViewPortHeight() {
  return window.innerHeight;
}
function getViewPortWidth() {
  var windowWidth = window.innerWidth;
  var documentReact = document.documentElement.getBoundingClientRect();
  var offsetWidth = isNullOrUndefined(document.documentElement) ? 0 : documentReact.width;
  return windowWidth - (windowWidth - offsetWidth);
}
var __extends$V = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$J = globalThis && globalThis.__decorate || function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i = decorators.length - 1; i >= 0; i--)
      if (d = decorators[i])
        r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var PositionData = (
  /** @class */
  function(_super) {
    __extends$V(PositionData2, _super);
    function PositionData2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$J([
      Property("left")
    ], PositionData2.prototype, "X", void 0);
    __decorate$J([
      Property("top")
    ], PositionData2.prototype, "Y", void 0);
    return PositionData2;
  }(ChildProperty)
);
var CLASSNAMES$1 = {
  ROOT: "e-popup",
  RTL: "e-rtl",
  OPEN: "e-popup-open",
  CLOSE: "e-popup-close"
};
var Popup = (
  /** @class */
  function(_super) {
    __extends$V(Popup2, _super);
    function Popup2(element2, options) {
      return _super.call(this, options, element2) || this;
    }
    Popup2.prototype.onPropertyChanged = function(newProp, oldProp) {
      for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {
        var prop = _a[_i];
        switch (prop) {
          case "width":
            setStyleAttribute(this.element, { "width": formatUnit(newProp.width) });
            break;
          case "height":
            setStyleAttribute(this.element, { "height": formatUnit(newProp.height) });
            break;
          case "zIndex":
            setStyleAttribute(this.element, { "zIndex": newProp.zIndex });
            break;
          case "enableRtl":
            this.setEnableRtl();
            break;
          case "position":
          case "relateTo":
            this.refreshPosition();
            break;
          case "offsetX":
            var x = newProp.offsetX - oldProp.offsetX;
            this.element.style.left = (parseInt(this.element.style.left, 10) + x).toString() + "px";
            break;
          case "offsetY":
            var y = newProp.offsetY - oldProp.offsetY;
            this.element.style.top = (parseInt(this.element.style.top, 10) + y).toString() + "px";
            break;
          case "content":
            this.setContent();
            break;
          case "actionOnScroll":
            if (newProp.actionOnScroll !== "none") {
              this.wireScrollEvents();
            } else {
              this.unwireScrollEvents();
            }
            break;
        }
      }
    };
    Popup2.prototype.getModuleName = function() {
      return "popup";
    };
    Popup2.prototype.resolveCollision = function() {
      this.checkCollision();
    };
    Popup2.prototype.getPersistData = function() {
      return this.addOnPersist([]);
    };
    Popup2.prototype.destroy = function() {
      if (this.element.classList.contains("e-popup-open")) {
        this.unwireEvents();
      }
      this.element.classList.remove(CLASSNAMES$1.ROOT, CLASSNAMES$1.RTL, CLASSNAMES$1.OPEN, CLASSNAMES$1.CLOSE);
      _super.prototype.destroy.call(this);
    };
    Popup2.prototype.render = function() {
      this.element.classList.add(CLASSNAMES$1.ROOT);
      var styles = {};
      if (this.zIndex !== 1e3) {
        styles.zIndex = this.zIndex;
      }
      if (this.width !== "auto") {
        styles.width = formatUnit(this.width);
      }
      if (this.height !== "auto") {
        styles.height = formatUnit(this.height);
      }
      setStyleAttribute(this.element, styles);
      this.fixedParent = false;
      this.setEnableRtl();
      this.setContent();
    };
    Popup2.prototype.wireEvents = function() {
      if (Browser.isDevice) {
        EventHandler.add(window, "orientationchange", this.orientationOnChange, this);
      }
      if (this.actionOnScroll !== "none") {
        this.wireScrollEvents();
      }
    };
    Popup2.prototype.wireScrollEvents = function() {
      if (this.getRelateToElement()) {
        for (var _i = 0, _a = this.getScrollableParent(this.getRelateToElement()); _i < _a.length; _i++) {
          var parent_1 = _a[_i];
          EventHandler.add(parent_1, "scroll", this.scrollRefresh, this);
        }
      }
    };
    Popup2.prototype.unwireEvents = function() {
      if (Browser.isDevice) {
        EventHandler.remove(window, "orientationchange", this.orientationOnChange);
      }
      if (this.actionOnScroll !== "none") {
        this.unwireScrollEvents();
      }
    };
    Popup2.prototype.unwireScrollEvents = function() {
      if (this.getRelateToElement()) {
        for (var _i = 0, _a = this.getScrollableParent(this.getRelateToElement()); _i < _a.length; _i++) {
          var parent_2 = _a[_i];
          EventHandler.remove(parent_2, "scroll", this.scrollRefresh);
        }
      }
    };
    Popup2.prototype.getRelateToElement = function() {
      var relateToElement = this.relateTo === "" || isNullOrUndefined(this.relateTo) ? document.body : this.relateTo;
      this.setProperties({ relateTo: relateToElement }, true);
      return typeof this.relateTo === "string" ? document.querySelector(this.relateTo) : this.relateTo;
    };
    Popup2.prototype.scrollRefresh = function(e) {
      if (this.actionOnScroll === "reposition") {
        if (!isNullOrUndefined(this.element) && !(this.element.offsetParent === e.target || this.element.offsetParent && this.element.offsetParent.tagName === "BODY" && e.target.parentElement == null)) {
          this.refreshPosition();
        }
      } else if (this.actionOnScroll === "hide") {
        this.hide();
      }
      if (this.actionOnScroll !== "none") {
        if (this.getRelateToElement()) {
          var targetVisible = this.isElementOnViewport(this.getRelateToElement(), e.target);
          if (!targetVisible && !this.targetInvisibleStatus) {
            this.trigger("targetExitViewport");
            this.targetInvisibleStatus = true;
          } else if (targetVisible) {
            this.targetInvisibleStatus = false;
          }
        }
      }
    };
    Popup2.prototype.isElementOnViewport = function(relateToElement, scrollElement) {
      var scrollParents = this.getScrollableParent(relateToElement);
      for (var parent_3 = 0; parent_3 < scrollParents.length; parent_3++) {
        if (this.isElementVisible(relateToElement, scrollParents[parent_3])) {
          continue;
        } else {
          return false;
        }
      }
      return true;
    };
    Popup2.prototype.isElementVisible = function(relateToElement, scrollElement) {
      var rect = this.checkGetBoundingClientRect(relateToElement);
      if (!rect.height || !rect.width) {
        return false;
      }
      if (!isNullOrUndefined(this.checkGetBoundingClientRect(scrollElement))) {
        var parent_4 = scrollElement.getBoundingClientRect();
        return !(rect.bottom < parent_4.top) && (!(rect.bottom > parent_4.bottom) && (!(rect.right > parent_4.right) && !(rect.left < parent_4.left)));
      } else {
        var win = window;
        var windowView = {
          top: win.scrollY,
          left: win.scrollX,
          right: win.scrollX + win.outerWidth,
          bottom: win.scrollY + win.outerHeight
        };
        var off = calculatePosition(relateToElement);
        var ele = {
          top: off.top,
          left: off.left,
          right: off.left + rect.width,
          bottom: off.top + rect.height
        };
        var elementView = {
          top: windowView.bottom - ele.top,
          left: windowView.right - ele.left,
          bottom: ele.bottom - windowView.top,
          right: ele.right - windowView.left
        };
        return elementView.top > 0 && elementView.left > 0 && elementView.right > 0 && elementView.bottom > 0;
      }
    };
    Popup2.prototype.preRender = function() {
    };
    Popup2.prototype.setEnableRtl = function() {
      this.reposition();
      this.enableRtl ? this.element.classList.add(CLASSNAMES$1.RTL) : this.element.classList.remove(CLASSNAMES$1.RTL);
    };
    Popup2.prototype.setContent = function() {
      if (!isNullOrUndefined(this.content)) {
        this.element.innerHTML = "";
        if (typeof this.content === "string") {
          this.element.textContent = this.content;
        } else {
          var relateToElem = this.getRelateToElement();
          var props2 = this.content.props;
          if (!relateToElem.classList.contains("e-dropdown-btn") || isNullOrUndefined(props2)) {
            this.element.appendChild(this.content);
          }
        }
      }
    };
    Popup2.prototype.orientationOnChange = function() {
      var _this = this;
      setTimeout(function() {
        _this.refreshPosition();
      }, 200);
    };
    Popup2.prototype.refreshPosition = function(target, collision) {
      if (!isNullOrUndefined(target)) {
        this.checkFixedParent(target);
      }
      this.reposition();
      if (!collision) {
        this.checkCollision();
      }
    };
    Popup2.prototype.reposition = function() {
      var pos;
      var position;
      var relateToElement = this.getRelateToElement();
      if (typeof this.position.X === "number" && typeof this.position.Y === "number") {
        pos = { left: this.position.X, top: this.position.Y };
      } else if (typeof this.position.X === "string" && typeof this.position.Y === "number" || typeof this.position.X === "number" && typeof this.position.Y === "string") {
        var parentDisplay = void 0;
        var display = this.element.style.display;
        this.element.style.display = "block";
        if (this.element.classList.contains("e-dlg-modal")) {
          parentDisplay = this.element.parentElement.style.display;
          this.element.parentElement.style.display = "block";
        }
        position = this.getAnchorPosition(relateToElement, this.element, this.position, this.offsetX, this.offsetY);
        if (typeof this.position.X === "string") {
          pos = { left: position.left, top: this.position.Y };
        } else {
          pos = { left: this.position.X, top: position.top };
        }
        this.element.style.display = display;
        if (this.element.classList.contains("e-dlg-modal")) {
          this.element.parentElement.style.display = parentDisplay;
        }
      } else if (relateToElement) {
        var display = this.element.style.display;
        this.element.style.display = "block";
        pos = this.getAnchorPosition(relateToElement, this.element, this.position, this.offsetX, this.offsetY);
        this.element.style.display = display;
      } else {
        pos = { left: 0, top: 0 };
      }
      if (!isNullOrUndefined(pos)) {
        this.element.style.left = pos.left + "px";
        this.element.style.top = pos.top + "px";
      }
    };
    Popup2.prototype.checkGetBoundingClientRect = function(ele) {
      var eleRect;
      try {
        eleRect = ele.getBoundingClientRect();
        return eleRect;
      } catch (error) {
        return null;
      }
    };
    Popup2.prototype.getAnchorPosition = function(anchorEle, ele, position, offsetX, offsetY) {
      var eleRect = this.checkGetBoundingClientRect(ele);
      var anchorRect = this.checkGetBoundingClientRect(anchorEle);
      if (isNullOrUndefined(eleRect) || isNullOrUndefined(anchorRect)) {
        return null;
      }
      var anchor = anchorEle;
      var anchorPos = { left: 0, top: 0 };
      if (ele.offsetParent && ele.offsetParent.tagName === "BODY" && anchorEle.tagName === "BODY") {
        anchorPos = calculatePosition(anchorEle);
      } else {
        if (ele.classList.contains("e-dlg-modal") && anchor.tagName !== "BODY") {
          ele = ele.parentElement;
        }
        anchorPos = calculateRelativeBasedPosition(anchor, ele);
      }
      switch (position.X) {
        default:
        case "left":
          break;
        case "center":
          if (ele.classList.contains("e-dlg-modal") && anchor.tagName === "BODY" && this.targetType === "container") {
            anchorPos.left += window.innerWidth / 2 - eleRect.width / 2;
          } else if (this.targetType === "container") {
            anchorPos.left += anchorRect.width / 2 - eleRect.width / 2;
          } else {
            anchorPos.left += anchorRect.width / 2;
          }
          break;
        case "right":
          if (ele.classList.contains("e-dlg-modal") && anchor.tagName === "BODY" && this.targetType === "container") {
            anchorPos.left += window.innerWidth - eleRect.width;
          } else if (this.targetType === "container") {
            anchorPos.left += anchorRect.width - eleRect.width;
          } else {
            anchorPos.left += anchorRect.width;
          }
          break;
      }
      switch (position.Y) {
        default:
        case "top":
          break;
        case "center":
          if (ele.classList.contains("e-dlg-modal") && anchor.tagName === "BODY" && this.targetType === "container") {
            anchorPos.top += window.innerHeight / 2 - eleRect.height / 2;
          } else if (this.targetType === "container") {
            anchorPos.top += anchorRect.height / 2 - eleRect.height / 2;
          } else {
            anchorPos.top += anchorRect.height / 2;
          }
          break;
        case "bottom":
          if (ele.classList.contains("e-dlg-modal") && anchor.tagName === "BODY" && this.targetType === "container") {
            anchorPos.top += window.innerHeight - eleRect.height;
          } else if (this.targetType === "container") {
            anchorPos.top += anchorRect.height - eleRect.height;
          } else {
            anchorPos.top += anchorRect.height;
          }
          break;
      }
      anchorPos.left += offsetX;
      anchorPos.top += offsetY;
      return anchorPos;
    };
    Popup2.prototype.callFlip = function(param) {
      var relateToElement = this.getRelateToElement();
      flip(this.element, relateToElement, this.offsetX, this.offsetY, this.position.X, this.position.Y, this.viewPortElement, param, this.fixedParent);
    };
    Popup2.prototype.callFit = function(param) {
      if (isCollide(this.element, this.viewPortElement).length !== 0) {
        if (isNullOrUndefined(this.viewPortElement)) {
          var data = fit(this.element, this.viewPortElement, param);
          if (param.X) {
            this.element.style.left = data.left + "px";
          }
          if (param.Y) {
            this.element.style.top = data.top + "px";
          }
        } else {
          var elementRect2 = this.checkGetBoundingClientRect(this.element);
          var viewPortRect = this.checkGetBoundingClientRect(this.viewPortElement);
          if (isNullOrUndefined(elementRect2) || isNullOrUndefined(viewPortRect)) {
            return null;
          }
          if (param && param.Y === true) {
            if (viewPortRect.top > elementRect2.top) {
              this.element.style.top = "0px";
            } else if (viewPortRect.bottom < elementRect2.bottom) {
              this.element.style.top = parseInt(this.element.style.top, 10) - (elementRect2.bottom - viewPortRect.bottom) + "px";
            }
          }
          if (param && param.X === true) {
            if (viewPortRect.right < elementRect2.right) {
              this.element.style.left = parseInt(this.element.style.left, 10) - (elementRect2.right - viewPortRect.right) + "px";
            } else if (viewPortRect.left > elementRect2.left) {
              this.element.style.left = parseInt(this.element.style.left, 10) + (viewPortRect.left - elementRect2.left) + "px";
            }
          }
        }
      }
    };
    Popup2.prototype.checkCollision = function() {
      var horz = this.collision.X;
      var vert = this.collision.Y;
      if (horz === "none" && vert === "none") {
        return;
      }
      if (horz === "flip" && vert === "flip") {
        this.callFlip({ X: true, Y: true });
      } else if (horz === "fit" && vert === "fit") {
        this.callFit({ X: true, Y: true });
      } else {
        if (horz === "flip") {
          this.callFlip({ X: true, Y: false });
        } else if (vert === "flip") {
          this.callFlip({ Y: true, X: false });
        }
        if (horz === "fit") {
          this.callFit({ X: true, Y: false });
        } else if (vert === "fit") {
          this.callFit({ X: false, Y: true });
        }
      }
    };
    Popup2.prototype.show = function(animationOptions, relativeElement) {
      var _this = this;
      var relateToElement = this.getRelateToElement();
      if (relateToElement.classList.contains("e-filemanager")) {
        this.fmDialogContainer = this.element.getElementsByClassName("e-file-select-wrap")[0];
      }
      this.wireEvents();
      if (!isNullOrUndefined(this.fmDialogContainer) && Browser.isIos) {
        this.fmDialogContainer.style.display = "block";
      }
      if (this.zIndex === 1e3 || !isNullOrUndefined(relativeElement)) {
        var zIndexElement = isNullOrUndefined(relativeElement) ? this.element : relativeElement;
        this.zIndex = getZindexPartial(zIndexElement);
        setStyleAttribute(this.element, { "zIndex": this.zIndex });
      }
      animationOptions = !isNullOrUndefined(animationOptions) && typeof animationOptions === "object" ? animationOptions : this.showAnimation;
      if (this.collision.X !== "none" || this.collision.Y !== "none") {
        removeClass([this.element], CLASSNAMES$1.CLOSE);
        addClass([this.element], CLASSNAMES$1.OPEN);
        this.checkCollision();
        removeClass([this.element], CLASSNAMES$1.OPEN);
        addClass([this.element], CLASSNAMES$1.CLOSE);
      }
      if (!isNullOrUndefined(animationOptions)) {
        animationOptions.begin = function() {
          if (!_this.isDestroyed) {
            removeClass([_this.element], CLASSNAMES$1.CLOSE);
            addClass([_this.element], CLASSNAMES$1.OPEN);
          }
        };
        animationOptions.end = function() {
          if (!_this.isDestroyed) {
            _this.trigger("open");
          }
        };
        new Animation$1(animationOptions).animate(this.element);
      } else {
        removeClass([this.element], CLASSNAMES$1.CLOSE);
        addClass([this.element], CLASSNAMES$1.OPEN);
        this.trigger("open");
      }
    };
    Popup2.prototype.hide = function(animationOptions) {
      var _this = this;
      animationOptions = !isNullOrUndefined(animationOptions) && typeof animationOptions === "object" ? animationOptions : this.hideAnimation;
      if (!isNullOrUndefined(animationOptions)) {
        animationOptions.end = function() {
          if (!_this.isDestroyed) {
            removeClass([_this.element], CLASSNAMES$1.OPEN);
            addClass([_this.element], CLASSNAMES$1.CLOSE);
            _this.trigger("close");
          }
        };
        new Animation$1(animationOptions).animate(this.element);
      } else {
        removeClass([this.element], CLASSNAMES$1.OPEN);
        addClass([this.element], CLASSNAMES$1.CLOSE);
        this.trigger("close");
      }
      this.unwireEvents();
    };
    Popup2.prototype.getScrollableParent = function(element2) {
      this.checkFixedParent(element2);
      return getScrollableParent(element2, this.fixedParent);
    };
    Popup2.prototype.checkFixedParent = function(element2) {
      var parent = element2.parentElement;
      while (parent && parent.tagName !== "HTML") {
        var parentStyle = getComputedStyle(parent);
        if (parentStyle.position === "fixed" && !isNullOrUndefined(this.element) && this.element.offsetParent && this.element.offsetParent.tagName === "BODY" && getComputedStyle(this.element.offsetParent).overflow !== "hidden") {
          this.element.style.top = window.scrollY > parseInt(this.element.style.top, 10) ? formatUnit(window.scrollY - parseInt(this.element.style.top, 10)) : formatUnit(parseInt(this.element.style.top, 10) - window.scrollY);
          this.element.style.position = "fixed";
          this.fixedParent = true;
        }
        parent = parent.parentElement;
        if (!isNullOrUndefined(this.element) && isNullOrUndefined(this.element.offsetParent) && parentStyle.position === "fixed" && this.element.style.position === "fixed") {
          this.fixedParent = true;
        }
      }
    };
    __decorate$J([
      Property("auto")
    ], Popup2.prototype, "height", void 0);
    __decorate$J([
      Property("auto")
    ], Popup2.prototype, "width", void 0);
    __decorate$J([
      Property(null)
    ], Popup2.prototype, "content", void 0);
    __decorate$J([
      Property("container")
    ], Popup2.prototype, "targetType", void 0);
    __decorate$J([
      Property(null)
    ], Popup2.prototype, "viewPortElement", void 0);
    __decorate$J([
      Property({ X: "none", Y: "none" })
    ], Popup2.prototype, "collision", void 0);
    __decorate$J([
      Property("")
    ], Popup2.prototype, "relateTo", void 0);
    __decorate$J([
      Complex({}, PositionData)
    ], Popup2.prototype, "position", void 0);
    __decorate$J([
      Property(0)
    ], Popup2.prototype, "offsetX", void 0);
    __decorate$J([
      Property(0)
    ], Popup2.prototype, "offsetY", void 0);
    __decorate$J([
      Property(1e3)
    ], Popup2.prototype, "zIndex", void 0);
    __decorate$J([
      Property(false)
    ], Popup2.prototype, "enableRtl", void 0);
    __decorate$J([
      Property("reposition")
    ], Popup2.prototype, "actionOnScroll", void 0);
    __decorate$J([
      Property(null)
    ], Popup2.prototype, "showAnimation", void 0);
    __decorate$J([
      Property(null)
    ], Popup2.prototype, "hideAnimation", void 0);
    __decorate$J([
      Event$1()
    ], Popup2.prototype, "open", void 0);
    __decorate$J([
      Event$1()
    ], Popup2.prototype, "close", void 0);
    __decorate$J([
      Event$1()
    ], Popup2.prototype, "targetExitViewport", void 0);
    Popup2 = __decorate$J([
      NotifyPropertyChanges
    ], Popup2);
    return Popup2;
  }(Component)
);
function getScrollableParent(element2, fixedParent2) {
  var eleStyle = getComputedStyle(element2);
  var scrollParents = [];
  var overflowRegex = /(auto|scroll)/;
  var parent = element2.parentElement;
  while (parent && parent.tagName !== "HTML") {
    var parentStyle = getComputedStyle(parent);
    if (!(eleStyle.position === "absolute" && parentStyle.position === "static") && overflowRegex.test(parentStyle.overflow + parentStyle.overflowY + parentStyle.overflowX)) {
      scrollParents.push(parent);
    }
    parent = parent.parentElement;
  }
  if (!fixedParent2) {
    scrollParents.push(document);
  }
  return scrollParents;
}
function getZindexPartial(element2) {
  var parent = element2.parentElement;
  var parentZindex = [];
  while (parent) {
    if (parent.tagName !== "BODY") {
      var index = document.defaultView.getComputedStyle(parent, null).getPropertyValue("z-index");
      var position = document.defaultView.getComputedStyle(parent, null).getPropertyValue("position");
      if (index !== "auto" && position !== "static") {
        parentZindex.push(index);
      }
      parent = parent.parentElement;
    } else {
      break;
    }
  }
  var childrenZindex = [];
  for (var i = 0; i < document.body.children.length; i++) {
    if (!element2.isEqualNode(document.body.children[i])) {
      var index = document.defaultView.getComputedStyle(document.body.children[i], null).getPropertyValue("z-index");
      var position = document.defaultView.getComputedStyle(document.body.children[i], null).getPropertyValue("position");
      if (index !== "auto" && position !== "static") {
        childrenZindex.push(index);
      }
    }
  }
  childrenZindex.push("999");
  var siblingsZindex = [];
  if (!isNullOrUndefined(element2.parentElement) && element2.parentElement.tagName !== "BODY") {
    var childNodes = [].slice.call(element2.parentElement.children);
    for (var i = 0; i < childNodes.length; i++) {
      if (!element2.isEqualNode(childNodes[i])) {
        var index = document.defaultView.getComputedStyle(childNodes[i], null).getPropertyValue("z-index");
        var position = document.defaultView.getComputedStyle(childNodes[i], null).getPropertyValue("position");
        if (index !== "auto" && position !== "static") {
          siblingsZindex.push(index);
        }
      }
    }
  }
  var finalValue = parentZindex.concat(childrenZindex, siblingsZindex);
  var currentZindexValue = Math.max.apply(Math, finalValue) + 1;
  return currentZindexValue > 2147483647 ? 2147483647 : currentZindexValue;
}
function wrapperInitialize(createElement2, tag, type, element2, WRAPPER2, role) {
  var input = element2;
  if (element2.tagName === tag) {
    var ejInstance = getValue("ej2_instances", element2);
    input = createElement2("input", { attrs: { "type": type } });
    var props2 = ["change", "cssClass", "label", "labelPosition", "id"];
    for (var index = 0, len = element2.attributes.length; index < len; index++) {
      if (props2.indexOf(element2.attributes[index].nodeName) === -1) {
        input.setAttribute(element2.attributes[index].nodeName, element2.attributes[index].nodeValue);
      }
    }
    attributes(element2, { "class": WRAPPER2 });
    element2.appendChild(input);
    setValue("ej2_instances", ejInstance, input);
    deleteObject(element2, "ej2_instances");
  }
  return input;
}
function getTextNode(element2) {
  var node;
  var childnode = element2.childNodes;
  for (var i = 0; i < childnode.length; i++) {
    node = childnode[i];
    if (node.nodeType === 3) {
      return node;
    }
  }
  return null;
}
function createCheckBox(createElement2, enableRipple, options) {
  if (enableRipple === void 0) {
    enableRipple = false;
  }
  if (options === void 0) {
    options = {};
  }
  var wrapper = createElement2("div", { className: "e-checkbox-wrapper e-css" });
  if (options.cssClass) {
    addClass([wrapper], options.cssClass.split(" "));
  }
  if (options.enableRtl) {
    wrapper.classList.add("e-rtl");
  }
  if (enableRipple) {
    var rippleSpan = createElement2("span", { className: "e-ripple-container" });
    rippleEffect(rippleSpan, { isCenterRipple: true, duration: 400 });
    wrapper.appendChild(rippleSpan);
  }
  var frameSpan = createElement2("span", { className: "e-frame e-icons" });
  if (options.checked) {
    frameSpan.classList.add("e-check");
  }
  wrapper.appendChild(frameSpan);
  if (options.label) {
    var labelSpan = createElement2("span", { className: "e-label" });
    if (options.disableHtmlEncode) {
      labelSpan.textContent = options.label;
    } else {
      labelSpan.innerHTML = options.label;
    }
    wrapper.appendChild(labelSpan);
  }
  return wrapper;
}
function rippleMouseHandler(e, rippleSpan) {
  if (rippleSpan) {
    var event_1 = document.createEvent("MouseEvents");
    event_1.initEvent(e.type, false, true);
    rippleSpan.dispatchEvent(event_1);
  }
}
function setHiddenInput(proxy2, wrap) {
  if (proxy2.element.getAttribute("ejs-for")) {
    wrap.appendChild(proxy2.createElement("input", {
      attrs: { "name": proxy2.name || proxy2.element.name, "value": "false", "type": "hidden" }
    }));
  }
}
var __extends$U = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$I = globalThis && globalThis.__decorate || function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i = decorators.length - 1; i >= 0; i--)
      if (d = decorators[i])
        r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var IconPosition;
(function(IconPosition2) {
  IconPosition2["Left"] = "Left";
  IconPosition2["Right"] = "Right";
  IconPosition2["Top"] = "Top";
  IconPosition2["Bottom"] = "Bottom";
})(IconPosition || (IconPosition = {}));
var cssClassName = {
  RTL: "e-rtl",
  BUTTON: "e-btn",
  PRIMARY: "e-primary",
  ICONBTN: "e-icon-btn"
};
var Button = (
  /** @class */
  function(_super) {
    __extends$U(Button2, _super);
    function Button2(options, element2) {
      return _super.call(this, options, element2) || this;
    }
    Button2.prototype.preRender = function() {
    };
    Button2.prototype.render = function() {
      this.initialize();
      this.removeRippleEffect = rippleEffect(this.element, { selector: "." + cssClassName.BUTTON });
      this.renderComplete();
    };
    Button2.prototype.initialize = function() {
      if (this.cssClass) {
        addClass([this.element], this.cssClass.replace(/\s+/g, " ").trim().split(" "));
      }
      if (this.isPrimary) {
        this.element.classList.add(cssClassName.PRIMARY);
      }
      {
        if (this.content) {
          var tempContent = this.enableHtmlSanitizer ? SanitizeHtmlHelper.sanitize(this.content) : this.content;
          this.element.innerHTML = tempContent;
        }
        this.setIconCss();
      }
      if (this.enableRtl) {
        this.element.classList.add(cssClassName.RTL);
      }
      if (this.disabled) {
        this.controlStatus(this.disabled);
      } else {
        this.wireEvents();
      }
    };
    Button2.prototype.controlStatus = function(disabled) {
      this.element.disabled = disabled;
    };
    Button2.prototype.setIconCss = function() {
      if (this.iconCss) {
        var span = this.createElement("span", { className: "e-btn-icon " + this.iconCss });
        if (!this.element.textContent.trim()) {
          this.element.classList.add(cssClassName.ICONBTN);
        } else {
          span.classList.add("e-icon-" + this.iconPosition.toLowerCase());
          if (this.iconPosition === "Top" || this.iconPosition === "Bottom") {
            this.element.classList.add("e-" + this.iconPosition.toLowerCase() + "-icon-btn");
          }
        }
        var node = this.element.childNodes[0];
        if (node && (this.iconPosition === "Left" || this.iconPosition === "Top")) {
          this.element.insertBefore(span, node);
        } else {
          this.element.appendChild(span);
        }
      }
    };
    Button2.prototype.wireEvents = function() {
      if (this.isToggle) {
        EventHandler.add(this.element, "click", this.btnClickHandler, this);
      }
    };
    Button2.prototype.unWireEvents = function() {
      if (this.isToggle) {
        EventHandler.remove(this.element, "click", this.btnClickHandler);
      }
    };
    Button2.prototype.btnClickHandler = function() {
      if (this.element.classList.contains("e-active")) {
        this.element.classList.remove("e-active");
      } else {
        this.element.classList.add("e-active");
      }
    };
    Button2.prototype.destroy = function() {
      var classList2 = [
        cssClassName.PRIMARY,
        cssClassName.RTL,
        cssClassName.ICONBTN,
        "e-success",
        "e-info",
        "e-danger",
        "e-warning",
        "e-flat",
        "e-outline",
        "e-small",
        "e-bigger",
        "e-active",
        "e-round",
        "e-top-icon-btn",
        "e-bottom-icon-btn"
      ];
      if (this.cssClass) {
        classList2 = classList2.concat(this.cssClass.split(" "));
      }
      _super.prototype.destroy.call(this);
      removeClass([this.element], classList2);
      if (!this.element.getAttribute("class")) {
        this.element.removeAttribute("class");
      }
      if (this.disabled) {
        this.element.removeAttribute("disabled");
      }
      if (this.content) {
        this.element.innerHTML = this.element.innerHTML.replace(this.content, "");
      }
      var span = this.element.querySelector("span.e-btn-icon");
      if (span) {
        detach(span);
      }
      this.unWireEvents();
    };
    Button2.prototype.getModuleName = function() {
      return "btn";
    };
    Button2.prototype.getPersistData = function() {
      return this.addOnPersist([]);
    };
    Button2.Inject = function() {
    };
    Button2.prototype.onPropertyChanged = function(newProp, oldProp) {
      var span = this.element.querySelector("span.e-btn-icon");
      for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {
        var prop = _a[_i];
        switch (prop) {
          case "isPrimary":
            if (newProp.isPrimary) {
              this.element.classList.add(cssClassName.PRIMARY);
            } else {
              this.element.classList.remove(cssClassName.PRIMARY);
            }
            break;
          case "disabled":
            this.controlStatus(newProp.disabled);
            break;
          case "iconCss": {
            if (span) {
              if (newProp.iconCss) {
                span.className = "e-btn-icon " + newProp.iconCss;
                if (this.element.textContent.trim()) {
                  if (this.iconPosition === "Left") {
                    span.classList.add("e-icon-left");
                  } else {
                    span.classList.add("e-icon-right");
                  }
                }
              } else {
                detach(span);
              }
            } else {
              this.setIconCss();
            }
            break;
          }
          case "iconPosition":
            removeClass([this.element], ["e-top-icon-btn", "e-bottom-icon-btn"]);
            span = this.element.querySelector("span.e-btn-icon");
            if (span) {
              detach(span);
            }
            this.setIconCss();
            break;
          case "cssClass":
            if (oldProp.cssClass) {
              removeClass([this.element], oldProp.cssClass.split(" "));
            }
            if (newProp.cssClass) {
              addClass([this.element], newProp.cssClass.replace(/\s+/g, " ").trim().split(" "));
            }
            break;
          case "enableRtl":
            if (newProp.enableRtl) {
              this.element.classList.add(cssClassName.RTL);
            } else {
              this.element.classList.remove(cssClassName.RTL);
            }
            break;
          case "content": {
            var node = getTextNode(this.element);
            if (!node) {
              this.element.classList.remove(cssClassName.ICONBTN);
            }
            {
              if (this.enableHtmlSanitizer) {
                newProp.content = SanitizeHtmlHelper.sanitize(newProp.content);
              }
              this.element.innerHTML = newProp.content;
              this.setIconCss();
            }
            break;
          }
          case "isToggle":
            if (newProp.isToggle) {
              EventHandler.add(this.element, "click", this.btnClickHandler, this);
            } else {
              EventHandler.remove(this.element, "click", this.btnClickHandler);
              removeClass([this.element], ["e-active"]);
            }
            break;
        }
      }
    };
    Button2.prototype.click = function() {
      this.element.click();
    };
    Button2.prototype.focusIn = function() {
      this.element.focus();
    };
    __decorate$I([
      Property("Left")
    ], Button2.prototype, "iconPosition", void 0);
    __decorate$I([
      Property("")
    ], Button2.prototype, "iconCss", void 0);
    __decorate$I([
      Property(false)
    ], Button2.prototype, "disabled", void 0);
    __decorate$I([
      Property(false)
    ], Button2.prototype, "isPrimary", void 0);
    __decorate$I([
      Property("")
    ], Button2.prototype, "cssClass", void 0);
    __decorate$I([
      Property("")
    ], Button2.prototype, "content", void 0);
    __decorate$I([
      Property(false)
    ], Button2.prototype, "isToggle", void 0);
    __decorate$I([
      Property()
    ], Button2.prototype, "locale", void 0);
    __decorate$I([
      Property(false)
    ], Button2.prototype, "enableHtmlSanitizer", void 0);
    __decorate$I([
      Event$1()
    ], Button2.prototype, "created", void 0);
    Button2 = __decorate$I([
      NotifyPropertyChanges
    ], Button2);
    return Button2;
  }(Component)
);
var __extends$T = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$H = globalThis && globalThis.__decorate || function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i = decorators.length - 1; i >= 0; i--)
      if (d = decorators[i])
        r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var CHECK$2 = "e-check";
var DISABLED$6 = "e-checkbox-disabled";
var FRAME = "e-frame";
var INDETERMINATE$2 = "e-stop";
var LABEL$1 = "e-label";
var RIPPLE$2 = "e-ripple-container";
var RTL$9 = "e-rtl";
var WRAPPER$1 = "e-checkbox-wrapper";
var containerAttr$2 = ["title", "class", "style", "disabled", "readonly", "name", "value"];
var CheckBox = (
  /** @class */
  function(_super) {
    __extends$T(CheckBox2, _super);
    function CheckBox2(options, element2) {
      var _this = _super.call(this, options, element2) || this;
      _this.isFocused = false;
      _this.isMouseClick = false;
      _this.clickTriggered = false;
      _this.validCheck = true;
      return _this;
    }
    CheckBox2.prototype.changeState = function(state, isInitialize) {
      var frameSpan = this.getWrapper().getElementsByClassName(FRAME)[0];
      if (state === "check") {
        frameSpan.classList.remove(INDETERMINATE$2);
        frameSpan.classList.add(CHECK$2);
        this.element.checked = true;
        if ((this.element.required || this.element.closest("form") && this.element.closest("form").classList.contains("e-formvalidator")) && this.validCheck && !isInitialize) {
          this.element.checked = false;
          this.validCheck = false;
        } else if (this.element.required || this.element.closest("form") && this.element.closest("form").classList.contains("e-formvalidator")) {
          this.validCheck = true;
        }
      } else if (state === "uncheck") {
        removeClass([frameSpan], [CHECK$2, INDETERMINATE$2]);
        this.element.checked = false;
        if ((this.element.required || this.element.closest("form") && this.element.closest("form").classList.contains("e-formvalidator")) && this.validCheck && !isInitialize) {
          this.element.checked = true;
          this.validCheck = false;
        } else if (this.element.required || this.element.closest("form") && this.element.closest("form").classList.contains("e-formvalidator")) {
          this.validCheck = true;
        }
      } else {
        frameSpan.classList.remove(CHECK$2);
        frameSpan.classList.add(INDETERMINATE$2);
        this.element.indeterminate = true;
        this.indeterminate = true;
      }
    };
    CheckBox2.prototype.clickHandler = function(event) {
      if (event.target.tagName === "INPUT" && this.clickTriggered) {
        if (this.isVue) {
          this.changeState(this.checked ? "check" : "uncheck");
        }
        this.clickTriggered = false;
        return;
      }
      if (event.target.tagName === "SPAN" || event.target.tagName === "LABEL") {
        this.clickTriggered = true;
      }
      if (this.isMouseClick) {
        this.focusOutHandler();
        this.isMouseClick = false;
      }
      if (this.indeterminate) {
        this.changeState(this.checked ? "check" : "uncheck");
        this.indeterminate = false;
        this.element.indeterminate = false;
      } else if (this.checked) {
        this.changeState("uncheck");
        this.checked = false;
      } else {
        this.changeState("check");
        this.checked = true;
      }
      var changeEventArgs = { checked: this.updateVueArrayModel(false), event };
      this.trigger("change", changeEventArgs);
      event.stopPropagation();
    };
    CheckBox2.prototype.destroy = function() {
      var _this = this;
      var wrapper = this.getWrapper();
      _super.prototype.destroy.call(this);
      if (this.wrapper) {
        wrapper = this.wrapper;
        if (!this.disabled) {
          this.unWireEvents();
        }
        if (this.tagName === "INPUT") {
          if (this.getWrapper() && wrapper.parentNode) {
            wrapper.parentNode.insertBefore(this.element, wrapper);
          }
          detach(wrapper);
          this.element.checked = false;
          if (this.indeterminate) {
            this.element.indeterminate = false;
          }
          ["name", "value", "disabled"].forEach(function(key) {
            _this.element.removeAttribute(key);
          });
        } else {
          ["class"].forEach(function(key) {
            wrapper.removeAttribute(key);
          });
          wrapper.innerHTML = "";
        }
      }
    };
    CheckBox2.prototype.focusHandler = function() {
      this.isFocused = true;
    };
    CheckBox2.prototype.focusOutHandler = function() {
      var wrapper = this.getWrapper();
      if (wrapper) {
        wrapper.classList.remove("e-focus");
      }
      this.isFocused = false;
    };
    CheckBox2.prototype.getModuleName = function() {
      return "checkbox";
    };
    CheckBox2.prototype.getPersistData = function() {
      return this.addOnPersist(["checked", "indeterminate"]);
    };
    CheckBox2.prototype.getWrapper = function() {
      if (this.element && this.element.parentElement) {
        return this.element.parentElement.parentElement;
      } else {
        return null;
      }
    };
    CheckBox2.prototype.initialize = function() {
      if (isNullOrUndefined(this.initialCheckedValue)) {
        this.initialCheckedValue = this.checked;
      }
      if (this.name) {
        this.element.setAttribute("name", this.name);
      }
      if (this.value) {
        this.element.setAttribute("value", this.value);
        if (this.isVue && typeof this.value === "boolean" && this.value === true) {
          this.setProperties({ "checked": true }, true);
        }
      }
      if (this.checked) {
        this.changeState("check", true);
      }
      if (this.indeterminate) {
        this.changeState();
      }
      if (this.disabled) {
        this.setDisabled();
      }
    };
    CheckBox2.prototype.initWrapper = function() {
      var wrapper = this.element.parentElement;
      if (!wrapper.classList.contains(WRAPPER$1)) {
        wrapper = this.createElement("div", {
          className: WRAPPER$1
        });
        this.element.parentNode.insertBefore(wrapper, this.element);
      }
      var label = this.createElement("label", { attrs: { for: this.element.id } });
      var frameSpan = this.createElement("span", { className: "e-icons " + FRAME });
      wrapper.classList.add("e-wrapper");
      if (this.enableRtl) {
        wrapper.classList.add(RTL$9);
      }
      if (this.cssClass) {
        addClass([wrapper], this.cssClass.replace(/\s+/g, " ").trim().split(" "));
      }
      wrapper.appendChild(label);
      label.appendChild(this.element);
      setHiddenInput(this, label);
      label.appendChild(frameSpan);
      if (this.label) {
        this.setText(this.label);
      }
    };
    CheckBox2.prototype.keyUpHandler = function() {
      if (this.isFocused) {
        this.getWrapper().classList.add("e-focus");
      }
    };
    CheckBox2.prototype.labelMouseDownHandler = function(e) {
      this.isMouseClick = true;
      var rippleSpan = this.getWrapper().getElementsByClassName(RIPPLE$2)[0];
      rippleMouseHandler(e, rippleSpan);
    };
    CheckBox2.prototype.labelMouseUpHandler = function(e) {
      this.isMouseClick = true;
      var rippleSpan = this.getWrapper().getElementsByClassName(RIPPLE$2)[0];
      if (rippleSpan) {
        var rippleElem = rippleSpan.querySelectorAll(".e-ripple-element");
        for (var i = 0; i < rippleElem.length - 1; i++) {
          rippleSpan.removeChild(rippleSpan.childNodes[i]);
        }
        rippleMouseHandler(e, rippleSpan);
      }
    };
    CheckBox2.prototype.onPropertyChanged = function(newProp, oldProp) {
      var wrapper = this.getWrapper();
      for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {
        var prop = _a[_i];
        switch (prop) {
          case "checked":
            this.indeterminate = false;
            this.element.indeterminate = false;
            this.changeState(newProp.checked ? "check" : "uncheck");
            break;
          case "indeterminate":
            if (newProp.indeterminate) {
              this.changeState();
            } else {
              this.element.indeterminate = false;
              this.changeState(this.checked ? "check" : "uncheck");
            }
            break;
          case "disabled":
            if (newProp.disabled) {
              this.setDisabled();
              this.wrapper = this.getWrapper();
              this.unWireEvents();
            } else {
              this.element.disabled = false;
              wrapper.classList.remove(DISABLED$6);
              wrapper.setAttribute("aria-disabled", "false");
              this.wireEvents();
            }
            break;
          case "cssClass":
            if (oldProp.cssClass) {
              removeClass([wrapper], oldProp.cssClass.split(" "));
            }
            if (newProp.cssClass) {
              addClass([wrapper], newProp.cssClass.replace(/\s+/g, " ").trim().split(" "));
            }
            break;
          case "enableRtl":
            if (newProp.enableRtl) {
              wrapper.classList.add(RTL$9);
            } else {
              wrapper.classList.remove(RTL$9);
            }
            break;
          case "label":
            this.setText(newProp.label);
            break;
          case "labelPosition": {
            var label = wrapper.getElementsByClassName(LABEL$1)[0];
            var labelWrap = wrapper.getElementsByTagName("label")[0];
            detach(label);
            if (newProp.labelPosition === "After") {
              labelWrap.appendChild(label);
            } else {
              labelWrap.insertBefore(label, wrapper.getElementsByClassName(FRAME)[0]);
            }
            break;
          }
          case "name":
            this.element.setAttribute("name", newProp.name);
            break;
          case "value":
            if (this.isVue && typeof newProp.value === "object") {
              break;
            }
            this.element.setAttribute("value", newProp.value);
            break;
          case "htmlAttributes":
            this.updateHtmlAttributeToWrapper();
            break;
        }
      }
    };
    CheckBox2.prototype.preRender = function() {
      var element2 = this.element;
      this.tagName = this.element.tagName;
      element2 = wrapperInitialize(this.createElement, "EJS-CHECKBOX", "checkbox", element2, WRAPPER$1);
      this.element = element2;
      if (this.element.getAttribute("type") !== "checkbox") {
        this.element.setAttribute("type", "checkbox");
      }
      if (!this.element.id) {
        this.element.id = getUniqueID("e-" + this.getModuleName());
      }
    };
    CheckBox2.prototype.render = function() {
      this.initWrapper();
      this.initialize();
      if (!this.disabled) {
        this.wireEvents();
      }
      this.updateHtmlAttributeToWrapper();
      this.updateVueArrayModel(true);
      this.renderComplete();
      this.wrapper = this.getWrapper();
    };
    CheckBox2.prototype.setDisabled = function() {
      var wrapper = this.getWrapper();
      this.element.disabled = true;
      wrapper.classList.add(DISABLED$6);
      wrapper.setAttribute("aria-disabled", "true");
    };
    CheckBox2.prototype.setText = function(text) {
      var wrapper = this.getWrapper();
      if (!wrapper) {
        return;
      }
      var label = wrapper.getElementsByClassName(LABEL$1)[0];
      if (label) {
        label.textContent = text;
      } else {
        text = this.enableHtmlSanitizer ? SanitizeHtmlHelper.sanitize(text) : text;
        label = this.createElement("span", { className: LABEL$1, innerHTML: text });
        var labelWrap = wrapper.getElementsByTagName("label")[0];
        if (this.labelPosition === "Before") {
          labelWrap.insertBefore(label, wrapper.getElementsByClassName(FRAME)[0]);
        } else {
          labelWrap.appendChild(label);
        }
      }
    };
    CheckBox2.prototype.changeHandler = function(e) {
      e.stopPropagation();
    };
    CheckBox2.prototype.formResetHandler = function() {
      this.checked = this.initialCheckedValue;
      this.element.checked = this.initialCheckedValue;
    };
    CheckBox2.prototype.unWireEvents = function() {
      var wrapper = this.wrapper;
      EventHandler.remove(wrapper, "click", this.clickHandler);
      EventHandler.remove(this.element, "keyup", this.keyUpHandler);
      EventHandler.remove(this.element, "focus", this.focusHandler);
      EventHandler.remove(this.element, "focusout", this.focusOutHandler);
      var label = wrapper.getElementsByTagName("label")[0];
      EventHandler.remove(label, "mousedown", this.labelMouseDownHandler);
      EventHandler.remove(label, "mouseup", this.labelMouseUpHandler);
      var formElem = closest(this.element, "form");
      if (formElem) {
        EventHandler.remove(formElem, "reset", this.formResetHandler);
      }
      if (this.tagName === "EJS-CHECKBOX") {
        EventHandler.remove(this.element, "change", this.changeHandler);
      }
    };
    CheckBox2.prototype.wireEvents = function() {
      var wrapper = this.getWrapper();
      EventHandler.add(wrapper, "click", this.clickHandler, this);
      EventHandler.add(this.element, "keyup", this.keyUpHandler, this);
      EventHandler.add(this.element, "focus", this.focusHandler, this);
      EventHandler.add(this.element, "focusout", this.focusOutHandler, this);
      var label = wrapper.getElementsByTagName("label")[0];
      EventHandler.add(label, "mousedown", this.labelMouseDownHandler, this);
      EventHandler.add(label, "mouseup", this.labelMouseUpHandler, this);
      var formElem = closest(this.element, "form");
      if (formElem) {
        EventHandler.add(formElem, "reset", this.formResetHandler, this);
      }
      if (this.tagName === "EJS-CHECKBOX") {
        EventHandler.add(this.element, "change", this.changeHandler, this);
      }
    };
    CheckBox2.prototype.updateVueArrayModel = function(init) {
      if (this.isVue && typeof this.value === "object") {
        var value = this.element.value;
        if (value && this.value) {
          if (init) {
            for (var i = 0; i < this.value.length; i++) {
              if (value === this.value[i]) {
                this.changeState("check");
                this.setProperties({ "checked": true }, true);
              }
            }
          } else {
            var index = this.value.indexOf(value);
            if (this.checked) {
              if (index < 0) {
                this.value.push(value);
              }
            } else {
              if (index > -1) {
                this.value.splice(index, 1);
              }
            }
            return this.value;
          }
        }
      }
      return this.validCheck ? this.element.checked : !this.element.checked;
    };
    CheckBox2.prototype.updateHtmlAttributeToWrapper = function() {
      if (!isNullOrUndefined(this.htmlAttributes)) {
        for (var _i = 0, _a = Object.keys(this.htmlAttributes); _i < _a.length; _i++) {
          var key = _a[_i];
          if (containerAttr$2.indexOf(key) > -1) {
            var wrapper = this.getWrapper();
            if (key === "class") {
              addClass([wrapper], this.htmlAttributes["" + key].split(" "));
            } else if (key === "title") {
              wrapper.setAttribute(key, this.htmlAttributes["" + key]);
            } else if (key === "style") {
              var frameSpan = this.getWrapper().getElementsByClassName(FRAME)[0];
              frameSpan.setAttribute(key, this.htmlAttributes["" + key]);
            } else if (key === "disabled") {
              if (this.htmlAttributes["" + key] === "true") {
                this.setDisabled();
              }
              this.element.setAttribute(key, this.htmlAttributes["" + key]);
            } else {
              this.element.setAttribute(key, this.htmlAttributes["" + key]);
            }
          }
        }
      }
    };
    CheckBox2.prototype.click = function() {
      this.element.click();
    };
    CheckBox2.prototype.focusIn = function() {
      this.element.focus();
    };
    __decorate$H([
      Event$1()
    ], CheckBox2.prototype, "change", void 0);
    __decorate$H([
      Event$1()
    ], CheckBox2.prototype, "created", void 0);
    __decorate$H([
      Property(false)
    ], CheckBox2.prototype, "checked", void 0);
    __decorate$H([
      Property("")
    ], CheckBox2.prototype, "cssClass", void 0);
    __decorate$H([
      Property(false)
    ], CheckBox2.prototype, "disabled", void 0);
    __decorate$H([
      Property(false)
    ], CheckBox2.prototype, "indeterminate", void 0);
    __decorate$H([
      Property("")
    ], CheckBox2.prototype, "label", void 0);
    __decorate$H([
      Property("After")
    ], CheckBox2.prototype, "labelPosition", void 0);
    __decorate$H([
      Property("")
    ], CheckBox2.prototype, "name", void 0);
    __decorate$H([
      Property("")
    ], CheckBox2.prototype, "value", void 0);
    __decorate$H([
      Property(false)
    ], CheckBox2.prototype, "enableHtmlSanitizer", void 0);
    __decorate$H([
      Property({})
    ], CheckBox2.prototype, "htmlAttributes", void 0);
    CheckBox2 = __decorate$H([
      NotifyPropertyChanges
    ], CheckBox2);
    return CheckBox2;
  }(Component)
);
var __extends$S = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$G = globalThis && globalThis.__decorate || function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i = decorators.length - 1; i >= 0; i--)
      if (d = decorators[i])
        r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var LABEL = "e-label";
var RIPPLE$1 = "e-ripple-container";
var RTL$8 = "e-rtl";
var WRAPPER = "e-radio-wrapper";
var ATTRIBUTES = ["title", "class", "style", "disabled", "readonly", "name", "value"];
var RadioButton = (
  /** @class */
  function(_super) {
    __extends$S(RadioButton2, _super);
    function RadioButton2(options, element2) {
      var _this = _super.call(this, options, element2) || this;
      _this.isFocused = false;
      return _this;
    }
    RadioButton_1 = RadioButton2;
    RadioButton2.prototype.changeHandler = function(event) {
      this.checked = true;
      this.dataBind();
      var value = this.element.getAttribute("value");
      value = this.isVue && value ? this.element.value : this.value;
      this.trigger("change", { value, event });
      if (this.isAngular) {
        event.stopPropagation();
      }
    };
    RadioButton2.prototype.updateChange = function() {
      var input;
      var instance;
      var radioGrp = this.getRadioGroup();
      for (var i = 0; i < radioGrp.length; i++) {
        input = radioGrp[i];
        if (input !== this.element) {
          instance = getInstance(input, RadioButton_1);
          instance.checked = false;
          if (this.tagName === "EJS-RADIOBUTTON") {
            instance.angularValue = this.value;
          }
        }
      }
    };
    RadioButton2.prototype.destroy = function() {
      var _this = this;
      var radioWrap = this.wrapper;
      _super.prototype.destroy.call(this);
      if (radioWrap) {
        if (!this.disabled) {
          this.unWireEvents();
        }
        if (this.tagName === "INPUT") {
          if (radioWrap.parentNode) {
            radioWrap.parentNode.insertBefore(this.element, radioWrap);
          }
          detach(radioWrap);
          this.element.checked = false;
          ["name", "value", "disabled"].forEach(function(key) {
            _this.element.removeAttribute(key);
          });
        } else {
          ["role", "aria-checked", "class"].forEach(function(key) {
            radioWrap.removeAttribute(key);
          });
          radioWrap.innerHTML = "";
        }
      }
    };
    RadioButton2.prototype.focusHandler = function() {
      this.isFocused = true;
    };
    RadioButton2.prototype.focusOutHandler = function() {
      var label = this.getLabel();
      if (label) {
        label.classList.remove("e-focus");
      }
    };
    RadioButton2.prototype.getModuleName = function() {
      return "radio";
    };
    RadioButton2.prototype.getSelectedValue = function() {
      var input;
      var radioGrp = this.getRadioGroup();
      for (var i = 0, len = radioGrp.length; i < len; i++) {
        input = radioGrp[i];
        if (input.checked) {
          return input.value;
        }
      }
      return "";
    };
    RadioButton2.prototype.getRadioGroup = function() {
      return document.querySelectorAll('input.e-radio[name="' + this.element.getAttribute("name") + '"]');
    };
    RadioButton2.prototype.getPersistData = function() {
      return this.addOnPersist(["checked"]);
    };
    RadioButton2.prototype.getWrapper = function() {
      if (this.element) {
        return this.element.parentElement;
      } else {
        return null;
      }
    };
    RadioButton2.prototype.getLabel = function() {
      if (this.element) {
        return this.element.nextElementSibling;
      } else {
        return null;
      }
    };
    RadioButton2.prototype.initialize = function() {
      if (isNullOrUndefined(this.initialCheckedValue)) {
        this.initialCheckedValue = this.checked;
      }
      this.initWrapper();
      this.updateHtmlAttribute();
      if (this.name) {
        this.element.setAttribute("name", this.name);
      }
      var value = this.element.getAttribute("value");
      if (this.isVue && value && value === this.value) {
        this.checked = true;
      }
      if (this.isVue ? this.value && !value : this.value) {
        this.element.setAttribute("value", this.value);
      }
      if (this.checked) {
        this.element.checked = true;
      }
      if (this.disabled) {
        this.setDisabled();
      }
    };
    RadioButton2.prototype.initWrapper = function() {
      var wrapper = this.element.parentElement;
      if (!wrapper.classList.contains(WRAPPER)) {
        wrapper = this.createElement("div", { className: WRAPPER });
        this.element.parentNode.insertBefore(wrapper, this.element);
      }
      var label = this.createElement("label", { attrs: { for: this.element.id } });
      wrapper.appendChild(this.element);
      wrapper.appendChild(label);
      wrapper.classList.add("e-wrapper");
      if (this.enableRtl) {
        label.classList.add(RTL$8);
      }
      if (this.cssClass) {
        addClass([wrapper], this.cssClass.replace(/\s+/g, " ").trim().split(" "));
      }
      if (this.label) {
        this.setText(this.label);
      }
    };
    RadioButton2.prototype.keyUpHandler = function() {
      if (this.isFocused) {
        this.getLabel().classList.add("e-focus");
      }
    };
    RadioButton2.prototype.labelRippleHandler = function(e) {
      var ripple = this.getLabel().getElementsByClassName(RIPPLE$1)[0];
      rippleMouseHandler(e, ripple);
    };
    RadioButton2.prototype.formResetHandler = function() {
      this.checked = this.initialCheckedValue;
      if (this.initialCheckedValue) {
        attributes(this.element, { "checked": "true" });
      }
    };
    RadioButton2.prototype.onPropertyChanged = function(newProp, oldProp) {
      var wrap = this.getWrapper();
      var label = this.getLabel();
      for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {
        var prop = _a[_i];
        switch (prop) {
          case "checked":
            if (newProp.checked) {
              this.updateChange();
            }
            this.element.checked = newProp.checked;
            break;
          case "disabled":
            if (newProp.disabled) {
              this.setDisabled();
              this.unWireEvents();
            } else {
              this.element.disabled = false;
              this.wireEvents();
            }
            break;
          case "cssClass":
            if (oldProp.cssClass) {
              removeClass([wrap], oldProp.cssClass.split(" "));
            }
            if (newProp.cssClass) {
              addClass([wrap], newProp.cssClass.replace(/\s+/g, " ").trim().split(" "));
            }
            break;
          case "enableRtl":
            if (newProp.enableRtl) {
              label.classList.add(RTL$8);
            } else {
              label.classList.remove(RTL$8);
            }
            break;
          case "label":
            this.setText(newProp.label);
            break;
          case "labelPosition":
            if (newProp.labelPosition === "Before") {
              label.classList.add("e-right");
            } else {
              label.classList.remove("e-right");
            }
            break;
          case "name":
            this.element.setAttribute("name", newProp.name);
            break;
          case "value":
            if (!isNullOrUndefined(this.htmlAttributes) && this.htmlAttributes.value) {
              break;
            }
            this.element.setAttribute("value", newProp.value);
            break;
          case "htmlAttributes":
            this.updateHtmlAttribute();
            break;
        }
      }
    };
    RadioButton2.prototype.preRender = function() {
      var element2 = this.element;
      this.formElement = closest(this.element, "form");
      this.tagName = this.element.tagName;
      element2 = wrapperInitialize(this.createElement, "EJS-RADIOBUTTON", "radio", element2, WRAPPER);
      this.element = element2;
      if (this.element.getAttribute("type") !== "radio") {
        this.element.setAttribute("type", "radio");
      }
      if (!this.element.id) {
        this.element.id = getUniqueID("e-" + this.getModuleName());
      }
      if (this.tagName === "EJS-RADIOBUTTON") {
        var formControlName = this.element.getAttribute("formcontrolname");
        if (formControlName) {
          this.setProperties({ "name": formControlName }, true);
          this.element.setAttribute("name", formControlName);
        }
      }
    };
    RadioButton2.prototype.render = function() {
      this.initialize();
      if (!this.disabled) {
        this.wireEvents();
      }
      this.renderComplete();
      this.wrapper = this.getWrapper();
    };
    RadioButton2.prototype.setDisabled = function() {
      this.element.disabled = true;
    };
    RadioButton2.prototype.setText = function(text) {
      var label = this.getLabel();
      var textLabel = label.getElementsByClassName(LABEL)[0];
      if (textLabel) {
        textLabel.textContent = text;
      } else {
        text = this.enableHtmlSanitizer ? SanitizeHtmlHelper.sanitize(text) : text;
        textLabel = this.createElement("span", { className: LABEL, innerHTML: text });
        label.appendChild(textLabel);
      }
      if (this.labelPosition === "Before") {
        this.getLabel().classList.add("e-right");
      } else {
        this.getLabel().classList.remove("e-right");
      }
    };
    RadioButton2.prototype.updateHtmlAttribute = function() {
      if (!isNullOrUndefined(this.htmlAttributes)) {
        for (var _i = 0, _a = Object.keys(this.htmlAttributes); _i < _a.length; _i++) {
          var key = _a[_i];
          if (ATTRIBUTES.indexOf(key) > -1) {
            var wrapper = this.element.parentElement;
            if (key === "class") {
              addClass([wrapper], this.htmlAttributes["" + key].replace(/\s+/g, " ").trim().split(" "));
            } else if (key === "title" || key === "style") {
              wrapper.setAttribute(key, this.htmlAttributes["" + key]);
            } else {
              this.element.setAttribute(key, this.htmlAttributes["" + key]);
            }
          }
        }
      }
    };
    RadioButton2.prototype.unWireEvents = function() {
      var label = this.wrapper;
      EventHandler.remove(this.element, "change", this.changeHandler);
      EventHandler.remove(this.element, "focus", this.focusHandler);
      EventHandler.remove(this.element, "focusout", this.focusOutHandler);
      EventHandler.remove(this.element, "keyup", this.keyUpHandler);
      var rippleLabel = label.getElementsByTagName("label")[0];
      if (rippleLabel) {
        EventHandler.remove(rippleLabel, "mousedown", this.labelRippleHandler);
        EventHandler.remove(rippleLabel, "mouseup", this.labelRippleHandler);
      }
      if (this.formElement) {
        EventHandler.remove(this.formElement, "reset", this.formResetHandler);
      }
    };
    RadioButton2.prototype.wireEvents = function() {
      var label = this.getLabel();
      EventHandler.add(this.element, "change", this.changeHandler, this);
      EventHandler.add(this.element, "keyup", this.keyUpHandler, this);
      EventHandler.add(this.element, "focus", this.focusHandler, this);
      EventHandler.add(this.element, "focusout", this.focusOutHandler, this);
      var rippleLabel = label.getElementsByClassName(LABEL)[0];
      if (rippleLabel) {
        EventHandler.add(rippleLabel, "mousedown", this.labelRippleHandler, this);
        EventHandler.add(rippleLabel, "mouseup", this.labelRippleHandler, this);
      }
      if (this.formElement) {
        EventHandler.add(this.formElement, "reset", this.formResetHandler, this);
      }
    };
    RadioButton2.prototype.click = function() {
      this.element.click();
    };
    RadioButton2.prototype.focusIn = function() {
      this.element.focus();
    };
    var RadioButton_1;
    __decorate$G([
      Event$1()
    ], RadioButton2.prototype, "change", void 0);
    __decorate$G([
      Event$1()
    ], RadioButton2.prototype, "created", void 0);
    __decorate$G([
      Property(false)
    ], RadioButton2.prototype, "checked", void 0);
    __decorate$G([
      Property("")
    ], RadioButton2.prototype, "cssClass", void 0);
    __decorate$G([
      Property(false)
    ], RadioButton2.prototype, "disabled", void 0);
    __decorate$G([
      Property("")
    ], RadioButton2.prototype, "label", void 0);
    __decorate$G([
      Property("After")
    ], RadioButton2.prototype, "labelPosition", void 0);
    __decorate$G([
      Property("")
    ], RadioButton2.prototype, "name", void 0);
    __decorate$G([
      Property("")
    ], RadioButton2.prototype, "value", void 0);
    __decorate$G([
      Property(false)
    ], RadioButton2.prototype, "enableHtmlSanitizer", void 0);
    __decorate$G([
      Property({})
    ], RadioButton2.prototype, "htmlAttributes", void 0);
    RadioButton2 = RadioButton_1 = __decorate$G([
      NotifyPropertyChanges
    ], RadioButton2);
    return RadioButton2;
  }(Component)
);
var elementClass = ["north-west", "north", "north-east", "west", "east", "south-west", "south", "south-east"];
var RESIZE_HANDLER = "e-resize-handle";
var FOCUSED_HANDLER = "e-focused-handle";
var DIALOG_RESIZABLE = "e-dlg-resizable";
var RESTRICT_LEFT = ["e-restrict-left"];
var RESIZE_WITHIN_VIEWPORT = "e-resize-viewport";
var dialogBorderResize = ["north", "west", "east", "south"];
var targetElement;
var selectedHandler;
var originalWidth = 0;
var originalHeight = 0;
var originalX = 0;
var originalY = 0;
var originalMouseX = 0;
var originalMouseY = 0;
var minHeight;
var maxHeight;
var minWidth;
var maxWidth;
var containerElement;
var resizeStart$1 = null;
var resize = null;
var resizeEnd = null;
var resizeWestWidth;
var setLeft = true;
var previousWidth = 0;
var setWidth = true;
var proxy;
function createResize(args) {
  resizeStart$1 = args.resizeBegin;
  resize = args.resizing;
  resizeEnd = args.resizeComplete;
  targetElement = getDOMElement(args.element);
  containerElement = getDOMElement(args.boundary);
  var directions = args.direction.split(" ");
  for (var i = 0; i < directions.length; i++) {
    if (dialogBorderResize.indexOf(directions[i]) >= 0 && directions[i]) {
      setBorderResizeElm(directions[i]);
    } else if (directions[i].trim() !== "") {
      var resizeHandler = createElement("div", { className: "e-icons " + RESIZE_HANDLER + " e-" + directions[i] });
      targetElement.appendChild(resizeHandler);
    }
  }
  minHeight = args.minHeight;
  minWidth = args.minWidth;
  maxWidth = args.maxWidth;
  maxHeight = args.maxHeight;
  if (args.proxy && args.proxy.element && args.proxy.element.classList.contains("e-dialog")) {
    wireEvents(args.proxy);
  } else {
    wireEvents();
  }
}
function setBorderResizeElm(direction) {
  calculateValues();
  var borderBottom = createElement("span", {
    attrs: {
      "unselectable": "on",
      "contenteditable": "false"
    }
  });
  borderBottom.setAttribute("class", "e-dialog-border-resize e-" + direction);
  if (direction === "south") {
    borderBottom.style.height = "2px";
    borderBottom.style.width = "100%";
    borderBottom.style.bottom = "0px";
    borderBottom.style.left = "0px";
  }
  if (direction === "north") {
    borderBottom.style.height = "2px";
    borderBottom.style.width = "100%";
    borderBottom.style.top = "0px";
    borderBottom.style.left = "0px";
  }
  if (direction === "east") {
    borderBottom.style.height = "100%";
    borderBottom.style.width = "2px";
    borderBottom.style.right = "0px";
    borderBottom.style.top = "0px";
  }
  if (direction === "west") {
    borderBottom.style.height = "100%";
    borderBottom.style.width = "2px";
    borderBottom.style.left = "0px";
    borderBottom.style.top = "0px";
  }
  targetElement.appendChild(borderBottom);
}
function getDOMElement(element2) {
  var domElement;
  if (!isNullOrUndefined(element2)) {
    if (typeof element2 === "string") {
      domElement = document.querySelector(element2);
    } else {
      domElement = element2;
    }
  }
  return domElement;
}
function wireEvents(args) {
  if (isNullOrUndefined(args)) {
    args = this;
  }
  var resizers = targetElement.querySelectorAll("." + RESIZE_HANDLER);
  for (var i = 0; i < resizers.length; i++) {
    selectedHandler = resizers[i];
    EventHandler.add(selectedHandler, "mousedown", onMouseDown, args);
    var eventName = Browser.info.name === "msie" ? "pointerdown" : "touchstart";
    EventHandler.add(selectedHandler, eventName, onTouchStart, args);
  }
  var borderResizers = targetElement.querySelectorAll(".e-dialog-border-resize");
  if (!isNullOrUndefined(borderResizers)) {
    for (var i = 0; i < borderResizers.length; i++) {
      selectedHandler = borderResizers[i];
      EventHandler.add(selectedHandler, "mousedown", onMouseDown, args);
      var eventName = Browser.info.name === "msie" ? "pointerdown" : "touchstart";
      EventHandler.add(selectedHandler, eventName, onTouchStart, args);
    }
  }
}
function getEventType(e) {
  return e.indexOf("mouse") > -1 ? "mouse" : "touch";
}
function onMouseDown(e) {
  e.preventDefault();
  targetElement = e.target.parentElement;
  calculateValues();
  originalMouseX = e.pageX;
  originalMouseY = e.pageY;
  e.target.classList.add(FOCUSED_HANDLER);
  if (!isNullOrUndefined(resizeStart$1)) {
    proxy = this;
    if (resizeStart$1(e, proxy) === true) {
      return;
    }
  }
  if (this.targetEle && targetElement && targetElement.querySelector("." + DIALOG_RESIZABLE)) {
    containerElement = this.target === "body" ? null : this.targetEle;
    maxWidth = this.targetEle.clientWidth;
    maxHeight = this.targetEle.clientHeight;
  }
  var target = isNullOrUndefined(containerElement) ? document : containerElement;
  EventHandler.add(target, "mousemove", onMouseMove, this);
  EventHandler.add(document, "mouseup", onMouseUp, this);
  for (var i = 0; i < RESTRICT_LEFT.length; i++) {
    if (targetElement.classList.contains(RESTRICT_LEFT[i])) {
      setLeft = false;
    } else {
      setLeft = true;
    }
  }
}
function onMouseUp(e) {
  var touchMoveEvent = Browser.info.name === "msie" ? "pointermove" : "touchmove";
  var touchEndEvent = Browser.info.name === "msie" ? "pointerup" : "touchend";
  var target = isNullOrUndefined(containerElement) ? document : containerElement;
  var eventName = Browser.info.name === "msie" ? "pointerdown" : "touchstart";
  EventHandler.remove(target, "mousemove", onMouseMove);
  EventHandler.remove(target, touchMoveEvent, onMouseMove);
  EventHandler.remove(target, eventName, onMouseMove);
  if (!isNullOrUndefined(document.body.querySelector("." + FOCUSED_HANDLER))) {
    document.body.querySelector("." + FOCUSED_HANDLER).classList.remove(FOCUSED_HANDLER);
  }
  if (!isNullOrUndefined(resizeEnd)) {
    proxy = this;
    resizeEnd(e, proxy);
  }
  EventHandler.remove(document, "mouseup", onMouseUp);
  EventHandler.remove(document, touchEndEvent, onMouseUp);
}
function calculateValues() {
  originalWidth = parseFloat(getComputedStyle(targetElement, null).getPropertyValue("width").replace("px", ""));
  originalHeight = parseFloat(getComputedStyle(targetElement, null).getPropertyValue("height").replace("px", ""));
  originalX = targetElement.getBoundingClientRect().left;
  originalY = targetElement.getBoundingClientRect().top;
}
function onTouchStart(e) {
  targetElement = e.target.parentElement;
  calculateValues();
  var dialogResizeElement = targetElement.classList.contains("e-dialog");
  if ((e.target.classList.contains(RESIZE_HANDLER) || e.target.classList.contains("e-dialog-border-resize")) && dialogResizeElement) {
    e.target.classList.add(FOCUSED_HANDLER);
  }
  var coordinates = e.touches ? e.changedTouches[0] : e;
  originalMouseX = coordinates.pageX;
  originalMouseY = coordinates.pageY;
  if (!isNullOrUndefined(resizeStart$1)) {
    proxy = this;
    if (resizeStart$1(e, proxy) === true) {
      return;
    }
  }
  var touchMoveEvent = Browser.info.name === "msie" ? "pointermove" : "touchmove";
  var touchEndEvent = Browser.info.name === "msie" ? "pointerup" : "touchend";
  var target = isNullOrUndefined(containerElement) ? document : containerElement;
  EventHandler.add(target, touchMoveEvent, onMouseMove, this);
  EventHandler.add(document, touchEndEvent, onMouseUp, this);
}
function onMouseMove(e) {
  if (e.target.classList.contains(RESIZE_HANDLER) && e.target.classList.contains(FOCUSED_HANDLER)) {
    selectedHandler = e.target;
  } else if (!isNullOrUndefined(document.body.querySelector("." + FOCUSED_HANDLER))) {
    selectedHandler = document.body.querySelector("." + FOCUSED_HANDLER);
  }
  if (!isNullOrUndefined(selectedHandler)) {
    var resizeTowards = "";
    for (var i = 0; i < elementClass.length; i++) {
      if (selectedHandler.classList.contains("e-" + elementClass[i])) {
        resizeTowards = elementClass[i];
      }
    }
    if (!isNullOrUndefined(resize)) {
      proxy = this;
      resize(e, proxy);
    }
    switch (resizeTowards) {
      case "south":
        resizeSouth(e);
        break;
      case "north":
        resizeNorth(e);
        break;
      case "west":
        resizeWest(e);
        break;
      case "east":
        resizeEast(e);
        break;
      case "south-east":
        resizeSouth(e);
        resizeEast(e);
        break;
      case "south-west":
        resizeSouth(e);
        resizeWest(e);
        break;
      case "north-east":
        resizeNorth(e);
        resizeEast(e);
        break;
      case "north-west":
        resizeNorth(e);
        resizeWest(e);
        break;
    }
  }
}
function getClientRectValues(element2) {
  return element2.getBoundingClientRect();
}
function resizeSouth(e) {
  var documentHeight = document.documentElement.clientHeight;
  var calculateValue = false;
  var coordinates = e.touches ? e.changedTouches[0] : e;
  var currentpageY = coordinates.pageY;
  var targetRectValues = getClientRectValues(targetElement);
  var containerRectValues;
  if (!isNullOrUndefined(containerElement)) {
    containerRectValues = getClientRectValues(containerElement);
  }
  if (!isNullOrUndefined(containerElement)) {
    calculateValue = true;
  } else if (isNullOrUndefined(containerElement) && (documentHeight - currentpageY >= 0 || targetRectValues.top < 0)) {
    calculateValue = true;
  }
  var calculatedHeight = originalHeight + (currentpageY - originalMouseY);
  calculatedHeight = calculatedHeight > minHeight ? calculatedHeight : minHeight;
  var containerTop = 0;
  if (!isNullOrUndefined(containerElement)) {
    containerTop = containerRectValues.top;
  }
  var borderValue = isNullOrUndefined(containerElement) ? 0 : containerElement.offsetHeight - containerElement.clientHeight;
  var topWithoutborder = targetRectValues.top - containerTop - borderValue / 2;
  topWithoutborder = topWithoutborder < 0 ? 0 : topWithoutborder;
  if (targetRectValues.top > 0 && topWithoutborder + calculatedHeight > maxHeight) {
    calculateValue = false;
    if (targetElement.classList.contains(RESIZE_WITHIN_VIEWPORT)) {
      return;
    }
    targetElement.style.height = maxHeight - parseInt(topWithoutborder.toString(), 10) + "px";
    return;
  }
  var targetTop = 0;
  if (calculateValue) {
    if (targetRectValues.top < 0 && documentHeight + (targetRectValues.height + targetRectValues.top) > 0) {
      targetTop = targetRectValues.top;
      if (calculatedHeight + targetTop <= 30) {
        calculatedHeight = targetRectValues.height - (targetRectValues.height + targetRectValues.top) + 30;
      }
    }
    if (calculatedHeight + targetRectValues.top >= maxHeight) {
      targetElement.style.height = targetRectValues.height + (documentHeight - (targetRectValues.height + targetRectValues.top)) + "px";
    }
    var calculatedTop = isNullOrUndefined(containerElement) ? targetTop : topWithoutborder;
    if (calculatedHeight >= minHeight && calculatedHeight + calculatedTop <= maxHeight) {
      targetElement.style.height = calculatedHeight + "px";
    }
  }
}
function resizeNorth(e) {
  var calculateValue = false;
  var boundaryRectValues;
  var pageY = getEventType(e.type) === "mouse" ? e.pageY : e.touches[0].pageY;
  var targetRectValues = getClientRectValues(targetElement);
  if (!isNullOrUndefined(containerElement)) {
    boundaryRectValues = getClientRectValues(containerElement);
  }
  if (!isNullOrUndefined(containerElement) && targetRectValues.top - boundaryRectValues.top > 0) {
    calculateValue = true;
  } else if (isNullOrUndefined(containerElement) && pageY > 0) {
    calculateValue = true;
  }
  var currentHeight = originalHeight - (pageY - originalMouseY);
  if (calculateValue) {
    if (currentHeight >= minHeight && currentHeight <= maxHeight) {
      var containerTop = 0;
      if (!isNullOrUndefined(containerElement)) {
        containerTop = boundaryRectValues.top;
      }
      var top_1 = originalY - containerTop + (pageY - originalMouseY);
      top_1 = top_1 > 0 ? top_1 : 1;
      targetElement.style.height = currentHeight + "px";
      targetElement.style.top = top_1 + "px";
    }
  }
}
function resizeWest(e) {
  var documentWidth = document.documentElement.clientWidth;
  var calculateValue = false;
  var rectValues;
  if (!isNullOrUndefined(containerElement)) {
    rectValues = getClientRectValues(containerElement);
  }
  var pageX = getEventType(e.type) === "mouse" ? e.pageX : e.touches[0].pageX;
  var targetRectValues = getClientRectValues(targetElement);
  var borderValue = isNullOrUndefined(containerElement) ? 0 : containerElement.offsetWidth - containerElement.clientWidth;
  var left = isNullOrUndefined(containerElement) ? 0 : rectValues.left;
  var containerWidth = isNullOrUndefined(containerElement) ? 0 : rectValues.width;
  if (isNullOrUndefined(resizeWestWidth)) {
    if (!isNullOrUndefined(containerElement)) {
      resizeWestWidth = targetRectValues.left - left - borderValue / 2 + targetRectValues.width;
      resizeWestWidth = resizeWestWidth + (containerWidth - borderValue - resizeWestWidth);
    } else {
      resizeWestWidth = documentWidth;
    }
  }
  if (!isNullOrUndefined(containerElement) && Math.floor(targetRectValues.left - rectValues.left + targetRectValues.width + (rectValues.right - targetRectValues.right)) - borderValue <= maxWidth) {
    calculateValue = true;
  } else if (isNullOrUndefined(containerElement) && pageX >= 0) {
    calculateValue = true;
  }
  var calculatedWidth = originalWidth - (pageX - originalMouseX);
  if (setLeft) {
    calculatedWidth = calculatedWidth > resizeWestWidth ? resizeWestWidth : calculatedWidth;
  }
  if (calculateValue) {
    if (calculatedWidth >= minWidth && calculatedWidth <= maxWidth) {
      var containerLeft = 0;
      if (!isNullOrUndefined(containerElement)) {
        containerLeft = rectValues.left;
      }
      var left_1 = originalX - containerLeft + (pageX - originalMouseX);
      left_1 = left_1 > 0 ? left_1 : 1;
      if (calculatedWidth !== previousWidth && setWidth) {
        targetElement.style.width = calculatedWidth + "px";
      }
      if (setLeft) {
        targetElement.style.left = left_1 + "px";
        if (left_1 === 1) {
          setWidth = false;
        } else {
          setWidth = true;
        }
      }
    }
  }
  previousWidth = calculatedWidth;
}
function resizeEast(e) {
  var documentWidth = document.documentElement.clientWidth;
  var calculateValue = false;
  var containerRectValues;
  if (!isNullOrUndefined(containerElement)) {
    containerRectValues = getClientRectValues(containerElement);
  }
  var coordinates = e.touches ? e.changedTouches[0] : e;
  var pageX = coordinates.pageX;
  var targetRectValues = getClientRectValues(targetElement);
  if (!isNullOrUndefined(containerElement) && (targetRectValues.left - containerRectValues.left + targetRectValues.width <= maxWidth || targetRectValues.right - containerRectValues.left >= targetRectValues.width)) {
    calculateValue = true;
  } else if (isNullOrUndefined(containerElement) && documentWidth - pageX > 0) {
    calculateValue = true;
  }
  var calculatedWidth = originalWidth + (pageX - originalMouseX);
  var containerLeft = 0;
  if (!isNullOrUndefined(containerElement)) {
    containerLeft = containerRectValues.left;
  }
  if (targetRectValues.left - containerLeft + calculatedWidth > maxWidth) {
    calculateValue = false;
    if (targetElement.classList.contains(RESIZE_WITHIN_VIEWPORT)) {
      return;
    }
    targetElement.style.width = maxWidth - (targetRectValues.left - containerLeft) + "px";
  }
  if (calculateValue) {
    if (calculatedWidth >= minWidth && calculatedWidth <= maxWidth) {
      targetElement.style.width = calculatedWidth + "px";
    }
  }
}
function setMinHeight(minimumHeight) {
  minHeight = minimumHeight;
}
function setMaxWidth(value) {
  maxWidth = value;
}
function setMaxHeight(value) {
  maxHeight = value;
}
function removeResize() {
  var handlers = targetElement.querySelectorAll("." + RESIZE_HANDLER);
  for (var i = 0; i < handlers.length; i++) {
    detach(handlers[i]);
  }
  var borderResizers = targetElement.querySelectorAll(".e-dialog-border-resize");
  if (!isNullOrUndefined(borderResizers)) {
    for (var i = 0; i < borderResizers.length; i++) {
      detach(borderResizers[i]);
    }
  }
}
var __extends$R = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$F = globalThis && globalThis.__decorate || function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i = decorators.length - 1; i >= 0; i--)
      if (d = decorators[i])
        r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var ButtonProps = (
  /** @class */
  function(_super) {
    __extends$R(ButtonProps2, _super);
    function ButtonProps2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$F([
      Property(true)
    ], ButtonProps2.prototype, "isFlat", void 0);
    __decorate$F([
      Property()
    ], ButtonProps2.prototype, "buttonModel", void 0);
    __decorate$F([
      Property("Button")
    ], ButtonProps2.prototype, "type", void 0);
    __decorate$F([
      Event$1()
    ], ButtonProps2.prototype, "click", void 0);
    return ButtonProps2;
  }(ChildProperty)
);
var AnimationSettings = (
  /** @class */
  function(_super) {
    __extends$R(AnimationSettings2, _super);
    function AnimationSettings2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$F([
      Property("Fade")
    ], AnimationSettings2.prototype, "effect", void 0);
    __decorate$F([
      Property(400)
    ], AnimationSettings2.prototype, "duration", void 0);
    __decorate$F([
      Property(0)
    ], AnimationSettings2.prototype, "delay", void 0);
    return AnimationSettings2;
  }(ChildProperty)
);
var ROOT$9 = "e-dialog";
var RTL$7 = "e-rtl";
var DLG_HEADER_CONTENT = "e-dlg-header-content";
var DLG_HEADER = "e-dlg-header";
var DLG_FOOTER_CONTENT = "e-footer-content";
var MODAL_DLG = "e-dlg-modal";
var DLG_CONTENT = "e-dlg-content";
var DLG_CLOSE_ICON = "e-icon-dlg-close";
var DLG_OVERLAY = "e-dlg-overlay";
var DLG_TARGET = "e-dlg-target";
var DLG_CONTAINER = "e-dlg-container";
var SCROLL_DISABLED = "e-scroll-disabled";
var DLG_PRIMARY_BUTTON = "e-primary";
var ICON$5 = "e-icons";
var POPUP_ROOT$1 = "e-popup";
var DEVICE$2 = "e-device";
var FULLSCREEN = "e-dlg-fullscreen";
var DLG_CLOSE_ICON_BTN = "e-dlg-closeicon-btn";
var DLG_HIDE = "e-popup-close";
var DLG_SHOW = "e-popup-open";
var DLG_UTIL_DEFAULT_TITLE = "Information";
var DLG_UTIL_ROOT = "e-scroll-disabled";
var DLG_UTIL_ALERT = "e-alert-dialog";
var DLG_UTIL_CONFIRM = "e-confirm-dialog";
var DLG_RESIZABLE = "e-dlg-resizable";
var DLG_RESTRICT_LEFT_VALUE = "e-restrict-left";
var DLG_RESTRICT_WIDTH_VALUE = "e-resize-viewport";
var DLG_REF_ELEMENT = "e-dlg-ref-element";
var DLG_USER_ACTION_CLOSED = "user action";
var DLG_CLOSE_ICON_CLOSED = "close icon";
var DLG_ESCAPE_CLOSED = "escape";
var DLG_OVERLAYCLICK_CLOSED = "overlayClick";
var DLG_DRAG = "e-draggable";
var Dialog = (
  /** @class */
  function(_super) {
    __extends$R(Dialog2, _super);
    function Dialog2(options, element2) {
      var _this = _super.call(this, options, element2) || this;
      _this.needsID = true;
      return _this;
    }
    Dialog2.prototype.render = function() {
      this.initialize();
      this.initRender();
      this.wireEvents();
      if (this.width === "100%") {
        this.element.style.width = "";
      }
      if (this.minHeight !== "") {
        this.element.style.minHeight = formatUnit(this.minHeight);
      }
      if (this.enableResize) {
        this.setResize();
        if (this.animationSettings.effect === "None") {
          this.getMinHeight();
        }
      }
      this.renderComplete();
    };
    Dialog2.prototype.initializeValue = function() {
      this.dlgClosedBy = DLG_USER_ACTION_CLOSED;
    };
    Dialog2.prototype.preRender = function() {
      var _this = this;
      this.initializeValue();
      this.headerContent = null;
      this.allowMaxHeight = true;
      this.preventVisibility = true;
      this.clonedEle = this.element.cloneNode(true);
      this.closeIconClickEventHandler = function(event) {
        _this.dlgClosedBy = DLG_CLOSE_ICON_CLOSED;
        _this.hide(event);
      };
      this.dlgOverlayClickEventHandler = function(event) {
        _this.dlgClosedBy = DLG_OVERLAYCLICK_CLOSED;
        event.preventFocus = false;
        _this.trigger("overlayClick", event, function(overlayClickEventArgs) {
          if (!overlayClickEventArgs.preventFocus) {
            _this.focusContent();
          }
          _this.dlgClosedBy = DLG_USER_ACTION_CLOSED;
        });
      };
      var localeText = { close: "Close" };
      this.l10n = new L10n("dialog", localeText, this.locale);
      this.checkPositionData();
      if (isNullOrUndefined(this.target)) {
        var prevOnChange = this.isProtectedOnChange;
        this.isProtectedOnChange = true;
        this.target = document.body;
        this.isProtectedOnChange = prevOnChange;
      }
    };
    Dialog2.prototype.updatePersistData = function() {
      if (this.enablePersistence) {
        this.setProperties({
          width: parseFloat(this.element.style.width),
          height: parseFloat(this.element.style.height),
          position: { X: parseFloat(this.dragObj.element.style.left), Y: parseFloat(this.dragObj.element.style.top) }
        }, true);
      }
    };
    Dialog2.prototype.isNumberValue = function(value) {
      var isNumber2 = /^[-+]?\d*\.?\d+$/.test(value);
      return isNumber2;
    };
    Dialog2.prototype.checkPositionData = function() {
      if (!isNullOrUndefined(this.position)) {
        if (!isNullOrUndefined(this.position.X) && typeof this.position.X !== "number") {
          var isNumber2 = this.isNumberValue(this.position.X);
          if (isNumber2) {
            var prevOnChange = this.isProtectedOnChange;
            this.isProtectedOnChange = true;
            this.position.X = parseFloat(this.position.X);
            this.isProtectedOnChange = prevOnChange;
          }
        }
        if (!isNullOrUndefined(this.position.Y) && typeof this.position.Y !== "number") {
          var isNumber2 = this.isNumberValue(this.position.Y);
          if (isNumber2) {
            var prevOnChange = this.isProtectedOnChange;
            this.isProtectedOnChange = true;
            this.position.Y = parseFloat(this.position.Y);
            this.isProtectedOnChange = prevOnChange;
          }
        }
      }
    };
    Dialog2.prototype.getEle = function(list, selector) {
      var element2 = void 0;
      for (var i = 0; i < list.length; i++) {
        if (list[i].classList.contains(selector)) {
          element2 = list[i];
          break;
        }
      }
      return element2;
    };
    Dialog2.prototype.getMinHeight = function() {
      var computedHeaderHeight = "0px";
      var computedFooterHeight = "0px";
      if (!isNullOrUndefined(this.element.querySelector("." + DLG_HEADER_CONTENT))) {
        computedHeaderHeight = getComputedStyle(this.headerContent).height;
      }
      var footerEle = this.getEle(this.element.children, DLG_FOOTER_CONTENT);
      if (!isNullOrUndefined(footerEle)) {
        computedFooterHeight = getComputedStyle(footerEle).height;
      }
      var headerHeight = parseInt(computedHeaderHeight.slice(0, computedHeaderHeight.indexOf("p")), 10);
      var footerHeight = parseInt(computedFooterHeight.slice(0, computedFooterHeight.indexOf("p")), 10);
      setMinHeight(headerHeight + 30 + (isNaN(footerHeight) ? 0 : footerHeight));
      return headerHeight + 30 + footerHeight;
    };
    Dialog2.prototype.onResizeStart = function(args, dialogObj) {
      dialogObj.trigger("resizeStart", args);
      return args.cancel;
    };
    Dialog2.prototype.onResizing = function(args, dialogObj) {
      dialogObj.trigger("resizing", args);
    };
    Dialog2.prototype.onResizeComplete = function(args, dialogObj) {
      dialogObj.trigger("resizeStop", args);
      this.updatePersistData();
    };
    Dialog2.prototype.setResize = function() {
      if (this.enableResize) {
        if (this.isBlazorServerRender() && !isNullOrUndefined(this.element.querySelector(".e-icons.e-resize-handle"))) {
          return;
        }
        this.element.classList.add(DLG_RESIZABLE);
        var computedHeight = getComputedStyle(this.element).minHeight;
        var computedWidth = getComputedStyle(this.element).minWidth;
        var direction = "";
        for (var i = 0; i < this.resizeHandles.length; i++) {
          if (this.resizeHandles[i] === "All") {
            direction = "south north east west north-east north-west south-east south-west";
            break;
          } else {
            var directionValue = "";
            switch (this.resizeHandles[i].toString()) {
              case "SouthEast":
                directionValue = "south-east";
                break;
              case "SouthWest":
                directionValue = "south-west";
                break;
              case "NorthEast":
                directionValue = "north-east";
                break;
              case "NorthWest":
                directionValue = "north-west";
                break;
              default:
                directionValue = this.resizeHandles[i].toString();
                break;
            }
            direction += directionValue.toLocaleLowerCase() + " ";
          }
        }
        if (this.enableRtl && direction.trim() === "south-east") {
          direction = "south-west";
        } else if (this.enableRtl && direction.trim() === "south-west") {
          direction = "south-east";
        }
        if (this.isModal && this.enableRtl) {
          this.element.classList.add(DLG_RESTRICT_LEFT_VALUE);
        } else if (this.isModal && this.target === document.body) {
          this.element.classList.add(DLG_RESTRICT_WIDTH_VALUE);
        }
        createResize({
          element: this.element,
          direction,
          minHeight: parseInt(computedHeight.slice(0, computedWidth.indexOf("p")), 10),
          maxHeight: this.targetEle.clientHeight,
          minWidth: parseInt(computedWidth.slice(0, computedWidth.indexOf("p")), 10),
          maxWidth: this.targetEle.clientWidth,
          boundary: this.target === document.body ? null : this.targetEle,
          resizeBegin: this.onResizeStart.bind(this),
          resizeComplete: this.onResizeComplete.bind(this),
          resizing: this.onResizing.bind(this),
          proxy: this
        });
        this.wireWindowResizeEvent();
      } else {
        removeResize();
        this.unWireWindowResizeEvent();
        if (this.isModal) {
          this.element.classList.remove(DLG_RESTRICT_LEFT_VALUE);
        } else {
          this.element.classList.remove(DLG_RESTRICT_WIDTH_VALUE);
        }
        this.element.classList.remove(DLG_RESIZABLE);
      }
    };
    Dialog2.prototype.getFocusElement = function(target) {
      var value = 'input,select,textarea,button:enabled,a,[contenteditable="true"],[tabindex]';
      var items = target.querySelectorAll(value);
      return { element: items[items.length - 1] };
    };
    Dialog2.prototype.keyDown = function(event) {
      var _this = this;
      if (event.keyCode === 9) {
        if (this.isModal) {
          var buttonObj = void 0;
          if (!isNullOrUndefined(this.btnObj)) {
            buttonObj = this.btnObj[this.btnObj.length - 1];
          }
          if (isNullOrUndefined(this.btnObj) && !isNullOrUndefined(this.ftrTemplateContent)) {
            buttonObj = this.getFocusElement(this.ftrTemplateContent);
          }
          if (isNullOrUndefined(this.btnObj) && isNullOrUndefined(this.ftrTemplateContent) && !isNullOrUndefined(this.contentEle)) {
            buttonObj = this.getFocusElement(this.contentEle);
          }
          if (!isNullOrUndefined(buttonObj) && document.activeElement === buttonObj.element && !event.shiftKey) {
            event.preventDefault();
            this.focusableElements(this.element).focus();
          }
          if (document.activeElement === this.focusableElements(this.element) && event.shiftKey) {
            event.preventDefault();
            if (!isNullOrUndefined(buttonObj)) {
              buttonObj.element.focus();
            }
          }
        }
      }
      var element2 = document.activeElement;
      var isTagName = ["input", "textarea"].indexOf(element2.tagName.toLowerCase()) > -1;
      var isContentEdit = false;
      if (!isTagName) {
        isContentEdit = element2.hasAttribute("contenteditable") && element2.getAttribute("contenteditable") === "true";
      }
      if (event.keyCode === 27 && this.closeOnEscape) {
        this.dlgClosedBy = DLG_ESCAPE_CLOSED;
        var query = document.querySelector(".e-popup-open:not(.e-dialog)");
        if (!(!isNullOrUndefined(query) && !query.classList.contains("e-toolbar-pop"))) {
          this.hide(event);
        }
      }
      if (event.keyCode === 13 && !event.ctrlKey && element2.tagName.toLowerCase() !== "textarea" && isTagName && !isNullOrUndefined(this.primaryButtonEle) || event.keyCode === 13 && event.ctrlKey && (element2.tagName.toLowerCase() === "textarea" || isContentEdit) && !isNullOrUndefined(this.primaryButtonEle)) {
        var buttonIndex_1;
        var firstPrimary = this.buttons.some(function(data, index) {
          buttonIndex_1 = index;
          var buttonModel = data.buttonModel;
          return !isNullOrUndefined(buttonModel) && buttonModel.isPrimary === true;
        });
        if (firstPrimary && typeof this.buttons[buttonIndex_1].click === "function") {
          setTimeout(function() {
            _this.buttons[buttonIndex_1].click.call(_this, event);
          });
        }
      }
    };
    Dialog2.prototype.initialize = function() {
      if (!isNullOrUndefined(this.target)) {
        this.targetEle = typeof this.target === "string" ? document.querySelector(this.target) : this.target;
      }
      if (!this.isBlazorServerRender()) {
        addClass([this.element], ROOT$9);
      }
      if (Browser.isDevice) {
        addClass([this.element], DEVICE$2);
      }
      if (!this.isBlazorServerRender()) {
        this.setCSSClass();
      }
      this.setMaxHeight();
    };
    Dialog2.prototype.initRender = function() {
      var _this = this;
      this.initialRender = true;
      if (!this.isBlazorServerRender()) {
        attributes(this.element, { role: "dialog" });
      }
      if (this.zIndex === 1e3) {
        this.setzIndex(this.element, false);
        this.calculatezIndex = true;
      } else {
        this.calculatezIndex = false;
      }
      if (this.isBlazorServerRender() && isNullOrUndefined(this.headerContent)) {
        this.headerContent = this.element.getElementsByClassName("e-dlg-header-content")[0];
      }
      if (this.isBlazorServerRender() && isNullOrUndefined(this.contentEle)) {
        this.contentEle = this.element.querySelector("#" + this.element.id + "_dialog-content");
      }
      if (!this.isBlazorServerRender()) {
        this.setTargetContent();
        if (this.header !== "" && !isNullOrUndefined(this.header)) {
          this.setHeader();
        }
        this.renderCloseIcon();
        this.setContent();
        if (this.footerTemplate !== "" && !isNullOrUndefined(this.footerTemplate)) {
          this.setFooterTemplate();
        } else if (!isNullOrUndefined(this.buttons[0].buttonModel)) {
          this.setButton();
        }
      }
      if (this.isBlazorServerRender()) {
        if (!isNullOrUndefined(this.buttons[0].buttonModel) && this.footerTemplate === "") {
          this.setButton();
        }
      }
      if (this.allowDragging && !isNullOrUndefined(this.headerContent)) {
        this.setAllowDragging();
      }
      if (!this.isBlazorServerRender()) {
        attributes(this.element, { "aria-modal": this.isModal ? "true" : "false" });
        if (this.isModal) {
          this.setIsModal();
        }
      }
      if (this.isBlazorServerRender() && isNullOrUndefined(this.dlgContainer)) {
        this.dlgContainer = this.element.parentElement;
        for (var i = 0, childNodes = this.dlgContainer.children; i < childNodes.length; i++) {
          if (childNodes[i].classList.contains("e-dlg-overlay")) {
            this.dlgOverlay = childNodes[i];
          }
        }
      }
      if (this.element.classList.contains(DLG_UTIL_ALERT) !== true && this.element.classList.contains(DLG_UTIL_CONFIRM) !== true && !isNullOrUndefined(this.element.parentElement)) {
        var parentEle = this.isModal ? this.dlgContainer.parentElement : this.element.parentElement;
        this.refElement = this.createElement("div", { className: DLG_REF_ELEMENT });
        parentEle.insertBefore(this.refElement, this.isModal ? this.dlgContainer : this.element);
      }
      if (!isNullOrUndefined(this.targetEle)) {
        this.isModal ? this.targetEle.appendChild(this.dlgContainer) : this.targetEle.appendChild(this.element);
      }
      this.popupObj = new Popup(this.element, {
        height: this.height,
        width: this.width,
        zIndex: this.zIndex,
        relateTo: this.target,
        actionOnScroll: "none",
        enableRtl: this.enableRtl,
        // eslint-disable-next-line
        open: function(event) {
          var eventArgs = {
            container: _this.isModal ? _this.dlgContainer : _this.element,
            element: _this.element,
            target: _this.target,
            preventFocus: false
          };
          if (_this.enableResize) {
            _this.resetResizeIcon();
          }
          _this.trigger("open", eventArgs, function(openEventArgs) {
            if (!openEventArgs.preventFocus) {
              _this.focusContent();
            }
          });
        },
        // eslint-disable-next-line
        close: function(event) {
          if (_this.isModal) {
            addClass([_this.dlgOverlay], "e-fade");
          }
          _this.unBindEvent(_this.element);
          if (_this.isModal) {
            _this.dlgContainer.style.display = "none";
          }
          _this.trigger("close", _this.closeArgs);
          var activeEle = document.activeElement;
          if (!isNullOrUndefined(activeEle) && !isNullOrUndefined(activeEle.blur)) {
            activeEle.blur();
          }
          if (!isNullOrUndefined(_this.storeActiveElement) && !isNullOrUndefined(_this.storeActiveElement.focus)) {
            _this.storeActiveElement.focus();
          }
        }
      });
      this.positionChange();
      this.setEnableRTL();
      if (!this.isBlazorServerRender()) {
        addClass([this.element], DLG_HIDE);
        if (this.isModal) {
          this.setOverlayZindex();
        }
      }
      if (this.visible) {
        this.show();
      } else {
        if (this.isModal) {
          this.dlgOverlay.style.display = "none";
        }
      }
      this.initialRender = false;
    };
    Dialog2.prototype.resetResizeIcon = function() {
      var dialogConHeight = this.getMinHeight();
      if (this.targetEle.offsetHeight < dialogConHeight) {
        var className = this.enableRtl ? "e-south-west" : "e-south-east";
        var resizeIcon = this.element.querySelector("." + className);
        if (!isNullOrUndefined(resizeIcon)) {
          resizeIcon.style.bottom = "-" + dialogConHeight.toString() + "px";
        }
      }
    };
    Dialog2.prototype.setOverlayZindex = function(zIndexValue) {
      var zIndex;
      if (isNullOrUndefined(zIndexValue)) {
        zIndex = parseInt(this.element.style.zIndex, 10) ? parseInt(this.element.style.zIndex, 10) : this.zIndex;
      } else {
        zIndex = zIndexValue;
      }
      this.dlgOverlay.style.zIndex = (zIndex - 1).toString();
      this.dlgContainer.style.zIndex = zIndex.toString();
    };
    Dialog2.prototype.positionChange = function() {
      if (this.isModal) {
        if (!isNaN(parseFloat(this.position.X)) && !isNaN(parseFloat(this.position.Y))) {
          this.setPopupPosition();
        } else if (!isNaN(parseFloat(this.position.X)) && isNaN(parseFloat(this.position.Y)) || isNaN(parseFloat(this.position.X)) && !isNaN(parseFloat(this.position.Y))) {
          this.setPopupPosition();
        } else {
          this.element.style.top = "0px";
          this.element.style.left = "0px";
          this.dlgContainer.classList.add("e-dlg-" + this.position.X + "-" + this.position.Y);
        }
      } else {
        this.setPopupPosition();
      }
    };
    Dialog2.prototype.setPopupPosition = function() {
      this.popupObj.setProperties({
        position: {
          X: this.position.X,
          Y: this.position.Y
        }
      });
    };
    Dialog2.prototype.setAllowDragging = function() {
      var _this = this;
      var handleContent = "." + DLG_HEADER_CONTENT;
      if (!this.element.classList.contains(DLG_DRAG)) {
        this.dragObj = new Draggable(this.element, {
          clone: false,
          isDragScroll: true,
          abort: ".e-dlg-closeicon-btn",
          handle: handleContent,
          dragStart: function(event) {
            _this.trigger("dragStart", event, function(dragEventArgs) {
            });
          },
          dragStop: function(event) {
            if (_this.isModal) {
              if (!isNullOrUndefined(_this.position)) {
                _this.dlgContainer.classList.remove("e-dlg-" + _this.position.X + "-" + _this.position.Y);
              }
              _this.element.style.position = "relative";
            }
            _this.trigger("dragStop", event);
            _this.element.classList.remove(DLG_RESTRICT_LEFT_VALUE);
            _this.updatePersistData();
          },
          drag: function(event) {
            _this.trigger("drag", event);
          }
        });
        if (!isNullOrUndefined(this.targetEle)) {
          this.dragObj.dragArea = this.targetEle;
        }
      }
    };
    Dialog2.prototype.setButton = function() {
      if (!this.isBlazorServerRender()) {
        this.buttonContent = [];
        this.btnObj = [];
        for (var i = 0; i < this.buttons.length; i++) {
          var buttonType = !isNullOrUndefined(this.buttons[i].type) ? this.buttons[i].type.toLowerCase() : "button";
          var btn = this.createElement("button", { className: this.cssClass, attrs: { type: buttonType } });
          this.buttonContent.push(btn.outerHTML);
        }
        this.setFooterTemplate();
      }
      var footerBtn;
      for (var i = 0, childNodes = this.element.children; i < childNodes.length; i++) {
        if (childNodes[i].classList.contains(DLG_FOOTER_CONTENT)) {
          footerBtn = childNodes[i].querySelectorAll("button");
        }
      }
      for (var i = 0; i < this.buttons.length; i++) {
        if (!this.isBlazorServerRender()) {
          this.btnObj[i] = new Button(this.buttons[i].buttonModel);
        }
        if (this.isBlazorServerRender()) {
          this.ftrTemplateContent = this.element.querySelector("." + DLG_FOOTER_CONTENT);
        }
        if (!isNullOrUndefined(this.ftrTemplateContent) && footerBtn.length > 0) {
          if (typeof this.buttons[i].click === "function") {
            EventHandler.add(footerBtn[i], "click", this.buttons[i].click, this);
          }
          if (typeof this.buttons[i].click === "object") {
            EventHandler.add(footerBtn[i], "click", this.buttonClickHandler.bind(this, i), this);
          }
        }
        if (!this.isBlazorServerRender() && !isNullOrUndefined(this.ftrTemplateContent)) {
          this.btnObj[i].appendTo(this.ftrTemplateContent.children[i]);
          if (this.buttons[i].isFlat) {
            this.btnObj[i].element.classList.add("e-flat");
          }
          this.primaryButtonEle = this.element.getElementsByClassName("e-primary")[0];
        }
      }
    };
    Dialog2.prototype.buttonClickHandler = function(index) {
      this.trigger("buttons[" + index + "].click", {});
    };
    Dialog2.prototype.setContent = function() {
      this.contentEle = this.createElement("div", { className: DLG_CONTENT, id: this.element.id + "_dialog-content" });
      if (this.innerContentElement) {
        this.contentEle.appendChild(this.innerContentElement);
      } else if (!isNullOrUndefined(this.content) && this.content !== "" || !this.initialRender) {
        if (typeof this.content === "string" && !isBlazor()) {
          this.setTemplate(this.content, this.contentEle, "content");
        } else if (this.content instanceof HTMLElement) {
          this.contentEle.appendChild(this.content);
        } else {
          this.setTemplate(this.content, this.contentEle, "content");
        }
      }
      if (!isNullOrUndefined(this.headerContent)) {
        this.element.insertBefore(this.contentEle, this.element.children[1]);
      } else {
        this.element.insertBefore(this.contentEle, this.element.children[0]);
      }
      if (this.height === "auto") {
        if (!this.isBlazorServerRender() && Browser.isIE && this.element.style.width === "" && !isNullOrUndefined(this.width)) {
          this.element.style.width = formatUnit(this.width);
        }
        this.setMaxHeight();
      }
    };
    Dialog2.prototype.setTemplate = function(template, toElement, prop) {
      var templateFn;
      var templateProps;
      if (toElement.classList.contains(DLG_HEADER)) {
        templateProps = this.element.id + "header";
      } else if (toElement.classList.contains(DLG_FOOTER_CONTENT)) {
        templateProps = this.element.id + "footerTemplate";
      } else {
        templateProps = this.element.id + "content";
      }
      if (!isNullOrUndefined(template.outerHTML)) {
        toElement.appendChild(template);
      } else if (typeof template === "string" || typeof template !== "string" || isBlazor()) {
        if (typeof template === "string") {
          template = this.sanitizeHelper(template);
        }
        if (this.isVue || typeof template !== "string") {
          templateFn = compile$1(template);
        } else {
          toElement.innerHTML = template;
        }
      }
      var fromElements = [];
      if (!isNullOrUndefined(templateFn)) {
        var isString2 = true;
        for (var _i = 0, _a = templateFn({}, this, prop, templateProps, isString2); _i < _a.length; _i++) {
          var item = _a[_i];
          fromElements.push(item);
        }
        append2([].slice.call(fromElements), toElement);
      }
    };
    Dialog2.prototype.sanitizeHelper = function(value) {
      if (this.enableHtmlSanitizer) {
        var dialogItem = SanitizeHtmlHelper.beforeSanitize();
        var beforeEvent = {
          cancel: false,
          helper: null
        };
        extend(dialogItem, dialogItem, beforeEvent);
        this.trigger("beforeSanitizeHtml", dialogItem);
        if (dialogItem.cancel && !isNullOrUndefined(dialogItem.helper)) {
          value = dialogItem.helper(value);
        } else if (!dialogItem.cancel) {
          value = SanitizeHtmlHelper.serializeValue(dialogItem, value);
        }
      }
      return value;
    };
    Dialog2.prototype.setMaxHeight = function() {
      if (!this.allowMaxHeight) {
        return;
      }
      var display = this.element.style.display;
      this.element.style.display = "none";
      this.element.style.maxHeight = !isNullOrUndefined(this.target) && this.targetEle.offsetHeight < window.innerHeight ? this.targetEle.offsetHeight - 20 + "px" : window.innerHeight - 20 + "px";
      this.element.style.display = display;
      if (Browser.isIE && this.height === "auto" && !isNullOrUndefined(this.contentEle) && this.element.offsetHeight < this.contentEle.offsetHeight) {
        this.element.style.height = "inherit";
      }
    };
    Dialog2.prototype.setEnableRTL = function() {
      if (!this.isBlazorServerRender()) {
        this.enableRtl ? addClass([this.element], RTL$7) : removeClass([this.element], RTL$7);
      }
      if (!isNullOrUndefined(this.element.querySelector(".e-resize-handle"))) {
        removeResize();
        this.setResize();
      }
    };
    Dialog2.prototype.setTargetContent = function() {
      var _this = this;
      if (isNullOrUndefined(this.content) || this.content === "") {
        var isContent = this.element.innerHTML.replace(/\s|<(\/?|\/?)(!--!--)>/g, "") !== "";
        if (this.element.children.length > 0 || isContent) {
          this.innerContentElement = document.createDocumentFragment();
          [].slice.call(this.element.childNodes).forEach(function(el) {
            if (el.nodeType !== 8) {
              _this.innerContentElement.appendChild(el);
            }
          });
        }
      }
    };
    Dialog2.prototype.setHeader = function() {
      if (this.headerEle) {
        this.headerEle.innerHTML = "";
      } else {
        this.headerEle = this.createElement("div", { id: this.element.id + "_title", className: DLG_HEADER });
      }
      this.createHeaderContent();
      this.headerContent.appendChild(this.headerEle);
      this.setTemplate(this.header, this.headerEle, "header");
      attributes(this.element, { "aria-labelledby": this.element.id + "_title" });
      this.element.insertBefore(this.headerContent, this.element.children[0]);
      if (this.allowDragging && !isNullOrUndefined(this.headerContent)) {
        this.setAllowDragging();
      }
    };
    Dialog2.prototype.setFooterTemplate = function() {
      if (this.ftrTemplateContent) {
        this.ftrTemplateContent.innerHTML = "";
      } else {
        this.ftrTemplateContent = this.createElement("div", {
          className: DLG_FOOTER_CONTENT
        });
      }
      if (this.footerTemplate !== "" && !isNullOrUndefined(this.footerTemplate)) {
        this.setTemplate(this.footerTemplate, this.ftrTemplateContent, "footerTemplate");
      } else {
        this.ftrTemplateContent.innerHTML = this.buttonContent.join("");
      }
      this.element.appendChild(this.ftrTemplateContent);
    };
    Dialog2.prototype.createHeaderContent = function() {
      if (isNullOrUndefined(this.headerContent)) {
        this.headerContent = this.createElement("div", { id: this.element.id + "_dialog-header", className: DLG_HEADER_CONTENT });
      }
    };
    Dialog2.prototype.renderCloseIcon = function() {
      if (this.showCloseIcon) {
        this.closeIcon = this.createElement("button", { className: DLG_CLOSE_ICON_BTN, attrs: { type: "button" } });
        this.closeIconBtnObj = new Button({ cssClass: "e-flat", iconCss: DLG_CLOSE_ICON + " " + ICON$5 });
        this.closeIconTitle();
        if (!isNullOrUndefined(this.headerContent)) {
          prepend([this.closeIcon], this.headerContent);
        } else {
          this.createHeaderContent();
          prepend([this.closeIcon], this.headerContent);
          this.element.insertBefore(this.headerContent, this.element.children[0]);
        }
        this.closeIconBtnObj.appendTo(this.closeIcon);
      }
    };
    Dialog2.prototype.closeIconTitle = function() {
      this.l10n.setLocale(this.locale);
      var closeIconTitle = this.l10n.getConstant("close");
      this.closeIcon.setAttribute("title", closeIconTitle);
      this.closeIcon.setAttribute("aria-label", closeIconTitle);
    };
    Dialog2.prototype.setCSSClass = function(oldCSSClass) {
      if (oldCSSClass) {
        removeClass([this.element], oldCSSClass.split(" "));
        if (this.isModal && !isNullOrUndefined(this.dlgContainer)) {
          removeClass([this.dlgContainer], oldCSSClass.split(" "));
        }
      }
      if (this.cssClass) {
        addClass([this.element], this.cssClass.split(" "));
        if (this.isModal && !isNullOrUndefined(this.dlgContainer)) {
          addClass([this.dlgContainer], this.cssClass.split(" "));
        }
      }
    };
    Dialog2.prototype.setIsModal = function() {
      this.dlgContainer = this.createElement("div", { className: DLG_CONTAINER });
      this.setCSSClass();
      this.element.classList.remove(DLG_SHOW);
      this.element.parentNode.insertBefore(this.dlgContainer, this.element);
      this.dlgContainer.appendChild(this.element);
      addClass([this.element], MODAL_DLG);
      this.dlgOverlay = this.createElement("div", { className: DLG_OVERLAY });
      this.dlgOverlay.style.zIndex = (this.zIndex - 1).toString();
      this.dlgContainer.appendChild(this.dlgOverlay);
    };
    Dialog2.prototype.getValidFocusNode = function(items) {
      var node;
      for (var u = 0; u < items.length; u++) {
        node = items[u];
        if ((node.clientHeight > 0 || node.tagName.toLowerCase() === "a" && node.hasAttribute("href")) && node.tabIndex > -1 && !node.disabled && !this.disableElement(node, '[disabled],[aria-disabled="true"],[type="hidden"]')) {
          return node;
        } else {
          node = null;
        }
      }
      return node;
    };
    Dialog2.prototype.focusableElements = function(content) {
      if (!isNullOrUndefined(content)) {
        var value = 'input,select,textarea,button,a,[contenteditable="true"],[tabindex]';
        var items = content.querySelectorAll(value);
        return this.getValidFocusNode(items);
      }
      return null;
    };
    Dialog2.prototype.getAutoFocusNode = function(container) {
      var node = container.querySelector("." + DLG_CLOSE_ICON_BTN);
      var value = "[autofocus]";
      var items = container.querySelectorAll(value);
      var validNode = this.getValidFocusNode(items);
      if (!isNullOrUndefined(validNode)) {
        node = validNode;
      } else {
        validNode = this.focusableElements(this.contentEle);
        if (!isNullOrUndefined(validNode)) {
          return node = validNode;
        } else if (!isNullOrUndefined(this.primaryButtonEle)) {
          return this.element.querySelector("." + DLG_PRIMARY_BUTTON);
        }
      }
      return node;
    };
    Dialog2.prototype.disableElement = function(element2, t) {
      var elementMatch = element2 ? element2.matches || element2.webkitMatchesSelector || element2.msGetRegionContent : null;
      if (elementMatch) {
        for (; element2; element2 = element2.parentNode) {
          if (element2 instanceof Element && elementMatch.call(element2, t)) {
            return element2;
          }
        }
      }
      return null;
    };
    Dialog2.prototype.focusContent = function() {
      var element2 = this.getAutoFocusNode(this.element);
      var node = !isNullOrUndefined(element2) ? element2 : this.element;
      var userAgent = Browser.userAgent;
      if (userAgent.indexOf("MSIE ") > 0 || userAgent.indexOf("Trident/") > 0) {
        this.element.focus();
      }
      node.focus();
      this.unBindEvent(this.element);
      this.bindEvent(this.element);
    };
    Dialog2.prototype.bindEvent = function(element2) {
      EventHandler.add(element2, "keydown", this.keyDown, this);
    };
    Dialog2.prototype.unBindEvent = function(element2) {
      EventHandler.remove(element2, "keydown", this.keyDown);
    };
    Dialog2.prototype.updateSanitizeContent = function() {
      if (!this.isBlazorServerRender()) {
        this.contentEle.innerHTML = this.sanitizeHelper(this.content);
      }
    };
    Dialog2.prototype.isBlazorServerRender = function() {
      return isBlazor();
    };
    Dialog2.prototype.getModuleName = function() {
      return "dialog";
    };
    Dialog2.prototype.onPropertyChanged = function(newProp, oldProp) {
      if (!this.element.classList.contains(ROOT$9)) {
        return;
      }
      for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {
        var prop = _a[_i];
        switch (prop) {
          case "content":
            if (!isNullOrUndefined(this.content) && this.content !== "") {
              if (this.isBlazorServerRender()) {
                this.contentEle = this.element.querySelector(".e-dlg-content");
              }
              if (!isNullOrUndefined(this.contentEle) && this.contentEle.getAttribute("role") !== "dialog") {
                if (!this.isBlazorServerRender()) {
                  this.contentEle.innerHTML = "";
                }
                if (typeof this.content === "function") {
                  this.clearTemplate(["content"]);
                  detach(this.contentEle);
                  this.contentEle = null;
                  this.setContent();
                } else {
                  typeof this.content === "string" ? this.isBlazorServerRender() && this.contentEle.innerText === "" ? this.contentEle.insertAdjacentHTML("beforeend", this.sanitizeHelper(this.content)) : this.updateSanitizeContent() : this.contentEle.appendChild(this.content);
                }
                this.setMaxHeight();
              } else {
                if (!this.isBlazorServerRender() || isNullOrUndefined(this.element.querySelector(".e-dlg-content"))) {
                  this.setContent();
                }
              }
            } else if (!isNullOrUndefined(this.contentEle)) {
              detach(this.contentEle);
              this.contentEle = null;
            }
            break;
          case "header":
            if (this.header === "" || isNullOrUndefined(this.header)) {
              if (this.headerEle) {
                detach(this.headerEle);
                this.headerEle = null;
              }
            } else {
              if (!this.isBlazorServerRender() || isNullOrUndefined(this.element.querySelector(".e-dlg-header-content"))) {
                this.setHeader();
              }
            }
            break;
          case "footerTemplate":
            if (this.footerTemplate === "" || isNullOrUndefined(this.footerTemplate)) {
              if (!this.ftrTemplateContent) {
                return;
              }
              detach(this.ftrTemplateContent);
              this.ftrTemplateContent = null;
              this.buttons = [{}];
            } else {
              if (!this.isBlazorServerRender() || isNullOrUndefined(this.element.querySelector(".e-footer-content"))) {
                this.setFooterTemplate();
              }
              this.buttons = [{}];
            }
            break;
          case "showCloseIcon":
            if (this.element.getElementsByClassName(DLG_CLOSE_ICON).length > 0) {
              if (!this.showCloseIcon && (this.header === "" || isNullOrUndefined(this.header))) {
                detach(this.headerContent);
                this.headerContent = null;
              } else if (!this.showCloseIcon) {
                detach(this.closeIcon);
              } else {
                if (this.isBlazorServerRender()) {
                  this.wireEvents();
                }
              }
            } else {
              if (!this.isBlazorServerRender()) {
                this.renderCloseIcon();
              }
              this.wireEvents();
            }
            break;
          case "locale":
            if (this.showCloseIcon) {
              this.closeIconTitle();
            }
            break;
          case "visible":
            this.visible ? this.show() : this.hide();
            break;
          case "isModal":
            this.updateIsModal();
            break;
          case "height":
            setStyleAttribute(this.element, { "height": formatUnit(newProp.height) });
            this.updatePersistData();
            break;
          case "width":
            setStyleAttribute(this.element, { "width": formatUnit(newProp.width) });
            this.updatePersistData();
            break;
          case "zIndex":
            this.popupObj.zIndex = this.zIndex;
            if (this.isModal) {
              this.setOverlayZindex(this.zIndex);
            }
            if (this.element.style.zIndex !== this.zIndex.toString()) {
              this.calculatezIndex = false;
            }
            break;
          case "cssClass":
            this.setCSSClass(oldProp.cssClass);
            break;
          case "buttons": {
            var buttonCount = this.buttons.length;
            if (!isNullOrUndefined(this.ftrTemplateContent) && !this.isBlazorServerRender()) {
              detach(this.ftrTemplateContent);
              this.ftrTemplateContent = null;
            }
            for (var i = 0; i < buttonCount; i++) {
              if (!isNullOrUndefined(this.buttons[i].buttonModel)) {
                this.footerTemplate = "";
                this.setButton();
              }
            }
            break;
          }
          case "allowDragging":
            if (this.allowDragging && !isNullOrUndefined(this.headerContent)) {
              this.setAllowDragging();
            } else {
              this.dragObj.destroy();
            }
            break;
          case "target":
            this.setTarget(newProp.target);
            break;
          case "position":
            this.checkPositionData();
            if (this.isModal) {
              var positionX = isNullOrUndefined(oldProp.position.X) ? this.position.X : oldProp.position.X;
              var positionY = isNullOrUndefined(oldProp.position.Y) ? this.position.Y : oldProp.position.Y;
              if (this.dlgContainer.classList.contains("e-dlg-" + positionX + "-" + positionY)) {
                this.dlgContainer.classList.remove("e-dlg-" + positionX + "-" + positionY);
              }
            }
            this.positionChange();
            this.updatePersistData();
            break;
          case "enableRtl":
            this.setEnableRTL();
            break;
          case "enableResize":
            this.setResize();
            break;
          case "minHeight":
            if (this.minHeight !== "") {
              this.element.style.minHeight = formatUnit(this.minHeight);
            }
            break;
        }
      }
    };
    Dialog2.prototype.setTarget = function(target) {
      this.popupObj.relateTo = target;
      this.target = target;
      this.targetEle = typeof this.target === "string" ? document.querySelector(this.target) : this.target;
      if (this.dragObj) {
        this.dragObj.dragArea = this.targetEle;
      }
      this.setMaxHeight();
      if (this.isModal) {
        this.updateIsModal();
      }
      if (this.enableResize) {
        this.setResize();
      }
    };
    Dialog2.prototype.updateIsModal = function() {
      this.element.setAttribute("aria-modal", this.isModal ? "true" : "false");
      if (this.isModal) {
        if (isNullOrUndefined(this.dlgOverlay)) {
          this.setIsModal();
          this.element.style.top = "0px";
          this.element.style.left = "0px";
          if (!isNullOrUndefined(this.targetEle)) {
            this.targetEle.appendChild(this.dlgContainer);
          }
        }
      } else {
        removeClass([this.element], MODAL_DLG);
        removeClass([document.body], [DLG_TARGET, SCROLL_DISABLED]);
        detach(this.dlgOverlay);
        while (this.dlgContainer.firstChild) {
          this.dlgContainer.parentElement.insertBefore(this.dlgContainer.firstChild, this.dlgContainer);
        }
        this.dlgContainer.parentElement.removeChild(this.dlgContainer);
      }
      if (this.visible) {
        this.show();
      }
      this.positionChange();
      if (this.isModal && this.dlgOverlay) {
        EventHandler.add(this.dlgOverlay, "click", this.dlgOverlayClickEventHandler, this);
      }
    };
    Dialog2.prototype.setzIndex = function(zIndexElement, setPopupZindex) {
      var prevOnChange = this.isProtectedOnChange;
      this.isProtectedOnChange = true;
      var currentzIndex = getZindexPartial(zIndexElement);
      this.zIndex = currentzIndex > this.zIndex ? currentzIndex : this.zIndex;
      this.isProtectedOnChange = prevOnChange;
      if (setPopupZindex) {
        this.popupObj.zIndex = this.zIndex;
      }
    };
    Dialog2.prototype.windowResizeHandler = function() {
      setMaxWidth(this.targetEle.clientWidth);
      setMaxHeight(this.targetEle.clientHeight);
      this.setMaxHeight();
    };
    Dialog2.prototype.getPersistData = function() {
      return this.addOnPersist(["width", "height", "position"]);
    };
    Dialog2.prototype.destroy = function() {
      if (this.isDestroyed) {
        return;
      }
      var classArray = [RTL$7, MODAL_DLG, DLG_RESIZABLE, DLG_RESTRICT_LEFT_VALUE, FULLSCREEN, DEVICE$2];
      var attrs = ["role", "aria-modal", "aria-labelledby", "aria-describedby", "aria-grabbed", "tabindex", "style"];
      removeClass([this.targetEle], [DLG_TARGET, SCROLL_DISABLED]);
      if (!isNullOrUndefined(this.element) && this.element.classList.contains(FULLSCREEN)) {
        removeClass([document.body], [DLG_TARGET, SCROLL_DISABLED]);
      }
      if (this.isModal) {
        removeClass([!isNullOrUndefined(this.targetEle) ? this.targetEle : document.body], SCROLL_DISABLED);
      }
      this.unWireEvents();
      if (!isNullOrUndefined(this.btnObj)) {
        for (var i = 0; i < this.btnObj.length; i++) {
          this.btnObj[i].destroy();
        }
      }
      if (!isNullOrUndefined(this.closeIconBtnObj)) {
        this.closeIconBtnObj.destroy();
      }
      if (!isNullOrUndefined(this.dragObj)) {
        this.dragObj.destroy();
      }
      if (!isNullOrUndefined(this.popupObj.element) && this.popupObj.element.classList.contains(POPUP_ROOT$1)) {
        this.popupObj.destroy();
      }
      removeClass([this.element], classArray);
      if (!isNullOrUndefined(this.cssClass) && this.cssClass !== "") {
        removeClass([this.element], this.cssClass.split(" "));
      }
      if (!isNullOrUndefined(this.refElement) && !isNullOrUndefined(this.refElement.parentElement)) {
        this.refElement.parentElement.insertBefore(this.isModal ? this.dlgContainer : this.element, this.refElement);
        detach(this.refElement);
        this.refElement = void 0;
      }
      if (this.isModal && !this.isBlazorServerRender()) {
        detach(this.dlgOverlay);
        this.dlgContainer.parentNode.insertBefore(this.element, this.dlgContainer);
        detach(this.dlgContainer);
      }
      if (!this.isBlazorServerRender()) {
        this.element.innerHTML = this.clonedEle.innerHTML;
      }
      if (this.isBlazorServerRender()) {
        if (!isNullOrUndefined(this.element.children)) {
          for (var i = 0; i <= this.element.children.length; i++) {
            i = i - i;
            detach(this.element.children[i]);
          }
        }
      }
      for (var i = 0; i < attrs.length; i++) {
        this.element.removeAttribute(attrs[i]);
      }
      if (!this.isBlazorServerRender()) {
        _super.prototype.destroy.call(this);
      } else {
        this.isDestroyed = true;
      }
      if (this.isReact) {
        this.clearTemplate();
      }
    };
    Dialog2.prototype.wireWindowResizeEvent = function() {
      window.addEventListener("resize", this.windowResizeHandler.bind(this));
    };
    Dialog2.prototype.unWireWindowResizeEvent = function() {
      window.removeEventListener("resize", this.windowResizeHandler.bind(this));
    };
    Dialog2.prototype.wireEvents = function() {
      if (this.isBlazorServerRender() && this.showCloseIcon) {
        this.closeIcon = this.element.getElementsByClassName("e-dlg-closeicon-btn")[0];
      }
      if (this.showCloseIcon) {
        EventHandler.add(this.closeIcon, "click", this.closeIconClickEventHandler, this);
      }
      if (this.isModal && this.dlgOverlay) {
        EventHandler.add(this.dlgOverlay, "click", this.dlgOverlayClickEventHandler, this);
      }
    };
    Dialog2.prototype.unWireEvents = function() {
      if (this.showCloseIcon) {
        EventHandler.remove(this.closeIcon, "click", this.closeIconClickEventHandler);
      }
      if (this.isModal) {
        EventHandler.remove(this.dlgOverlay, "click", this.dlgOverlayClickEventHandler);
      }
      if (this.buttons.length > 0 && !isNullOrUndefined(this.buttons[0].buttonModel) && this.footerTemplate === "") {
        for (var i = 0; i < this.buttons.length; i++) {
          if (typeof this.buttons[i].click === "function") {
            EventHandler.remove(this.ftrTemplateContent.children[i], "click", this.buttons[i].click);
          }
        }
      }
    };
    Dialog2.prototype.refreshPosition = function() {
      this.popupObj.refreshPosition();
    };
    Dialog2.prototype.getDimension = function() {
      var dialogWidth = this.element.offsetWidth;
      var dialogHeight = this.element.offsetHeight;
      return { width: dialogWidth, height: dialogHeight };
    };
    Dialog2.prototype.show = function(isFullScreen) {
      var _this = this;
      if (!this.element.classList.contains(ROOT$9)) {
        return;
      }
      if (!this.element.classList.contains(DLG_SHOW) || !isNullOrUndefined(isFullScreen)) {
        if (!isNullOrUndefined(isFullScreen)) {
          this.fullScreen(isFullScreen);
        }
        var eventArgs_1 = {
          cancel: false,
          element: this.element,
          container: this.isModal ? this.dlgContainer : this.element,
          target: this.target,
          maxHeight: this.element.style.maxHeight
        };
        this.trigger("beforeOpen", eventArgs_1, function(beforeOpenArgs) {
          if (!beforeOpenArgs.cancel) {
            if (_this.element.style.maxHeight !== eventArgs_1.maxHeight) {
              _this.allowMaxHeight = false;
              _this.element.style.maxHeight = eventArgs_1.maxHeight;
            }
            _this.storeActiveElement = document.activeElement;
            _this.element.tabIndex = -1;
            if (_this.isModal && !isNullOrUndefined(_this.dlgOverlay)) {
              _this.dlgOverlay.style.display = "block";
              _this.dlgContainer.style.display = "flex";
              removeClass([_this.dlgOverlay], "e-fade");
              if (!isNullOrUndefined(_this.targetEle)) {
                if (_this.targetEle === document.body) {
                  _this.dlgContainer.style.position = "fixed";
                } else {
                  _this.dlgContainer.style.position = "absolute";
                }
                _this.dlgOverlay.style.position = "absolute";
                _this.element.style.position = "relative";
                addClass([_this.targetEle], [DLG_TARGET, SCROLL_DISABLED]);
              } else {
                addClass([document.body], [DLG_TARGET, SCROLL_DISABLED]);
              }
            }
            var openAnimation = {
              name: _this.animationSettings.effect + "In",
              duration: _this.animationSettings.duration,
              delay: _this.animationSettings.delay
            };
            var zIndexElement = _this.isModal ? _this.element.parentElement : _this.element;
            if (_this.calculatezIndex) {
              _this.setzIndex(zIndexElement, true);
              setStyleAttribute(_this.element, { "zIndex": _this.zIndex });
              if (_this.isModal) {
                _this.setOverlayZindex(_this.zIndex);
              }
            }
            _this.animationSettings.effect === "None" ? _this.popupObj.show() : _this.popupObj.show(openAnimation);
            _this.dialogOpen = true;
            var prevOnChange = _this.isProtectedOnChange;
            _this.isProtectedOnChange = true;
            _this.visible = true;
            _this.preventVisibility = true;
            _this.isProtectedOnChange = prevOnChange;
          }
        });
      }
      if (this.isReact) {
        this.renderReactTemplates();
      }
    };
    Dialog2.prototype.hide = function(event) {
      var _this = this;
      if (!this.element.classList.contains(ROOT$9)) {
        return;
      }
      if (this.preventVisibility) {
        var eventArgs = {
          cancel: false,
          isInteracted: event ? true : false,
          element: this.element,
          target: this.target,
          container: this.isModal ? this.dlgContainer : this.element,
          event,
          closedBy: this.dlgClosedBy
        };
        this.closeArgs = eventArgs;
        this.trigger("beforeClose", eventArgs, function(beforeCloseArgs) {
          if (!beforeCloseArgs.cancel) {
            if (_this.isModal) {
              if (!isNullOrUndefined(_this.targetEle)) {
                removeClass([_this.targetEle], [DLG_TARGET, SCROLL_DISABLED]);
              }
            }
            if (document.body.classList.contains(DLG_TARGET) && document.body.classList.contains(SCROLL_DISABLED)) {
              removeClass([document.body], [DLG_TARGET, SCROLL_DISABLED]);
            }
            var closeAnimation = {
              name: _this.animationSettings.effect + "Out",
              duration: _this.animationSettings.duration,
              delay: _this.animationSettings.delay
            };
            _this.animationSettings.effect === "None" ? _this.popupObj.hide() : _this.popupObj.hide(closeAnimation);
            _this.dialogOpen = false;
            var prevOnChange = _this.isProtectedOnChange;
            _this.isProtectedOnChange = true;
            _this.visible = false;
            _this.preventVisibility = false;
            _this.isProtectedOnChange = prevOnChange;
          }
          _this.dlgClosedBy = DLG_USER_ACTION_CLOSED;
        });
      }
    };
    Dialog2.prototype.fullScreen = function(args) {
      this.element.offsetTop;
      this.element.offsetLeft;
      if (args) {
        this.element.style.top = document.scrollingElement.scrollTop + "px";
        addClass([this.element], FULLSCREEN);
        var display = this.element.style.display;
        this.element.style.display = "none";
        this.element.style.maxHeight = !isNullOrUndefined(this.target) ? this.targetEle.offsetHeight + "px" : window.innerHeight + "px";
        this.element.style.display = display;
        addClass([document.body], [DLG_TARGET, SCROLL_DISABLED]);
        if (this.allowDragging && !isNullOrUndefined(this.dragObj)) {
          this.dragObj.destroy();
        }
      } else {
        removeClass([this.element], FULLSCREEN);
        removeClass([document.body], [DLG_TARGET, SCROLL_DISABLED]);
        if (this.allowDragging && !isNullOrUndefined(this.headerContent)) {
          this.setAllowDragging();
        }
      }
      return args;
    };
    Dialog2.prototype.getButtons = function(index) {
      if (!isNullOrUndefined(index)) {
        return this.btnObj[index];
      }
      return this.btnObj;
    };
    __decorate$F([
      Property("")
    ], Dialog2.prototype, "content", void 0);
    __decorate$F([
      Property(true)
    ], Dialog2.prototype, "enableHtmlSanitizer", void 0);
    __decorate$F([
      Property(false)
    ], Dialog2.prototype, "enablePersistence", void 0);
    __decorate$F([
      Property(false)
    ], Dialog2.prototype, "showCloseIcon", void 0);
    __decorate$F([
      Property(false)
    ], Dialog2.prototype, "isModal", void 0);
    __decorate$F([
      Property("")
    ], Dialog2.prototype, "header", void 0);
    __decorate$F([
      Property(true)
    ], Dialog2.prototype, "visible", void 0);
    __decorate$F([
      Property(false)
    ], Dialog2.prototype, "enableResize", void 0);
    __decorate$F([
      Property(["South-East"])
    ], Dialog2.prototype, "resizeHandles", void 0);
    __decorate$F([
      Property("auto")
    ], Dialog2.prototype, "height", void 0);
    __decorate$F([
      Property("")
    ], Dialog2.prototype, "minHeight", void 0);
    __decorate$F([
      Property("100%")
    ], Dialog2.prototype, "width", void 0);
    __decorate$F([
      Property("")
    ], Dialog2.prototype, "cssClass", void 0);
    __decorate$F([
      Property(1e3)
    ], Dialog2.prototype, "zIndex", void 0);
    __decorate$F([
      Property(null)
    ], Dialog2.prototype, "target", void 0);
    __decorate$F([
      Property("")
    ], Dialog2.prototype, "footerTemplate", void 0);
    __decorate$F([
      Property(false)
    ], Dialog2.prototype, "allowDragging", void 0);
    __decorate$F([
      Collection([{}], ButtonProps)
    ], Dialog2.prototype, "buttons", void 0);
    __decorate$F([
      Property(true)
    ], Dialog2.prototype, "closeOnEscape", void 0);
    __decorate$F([
      Complex({}, AnimationSettings)
    ], Dialog2.prototype, "animationSettings", void 0);
    __decorate$F([
      Complex({ X: "center", Y: "center" }, PositionData)
    ], Dialog2.prototype, "position", void 0);
    __decorate$F([
      Event$1()
    ], Dialog2.prototype, "created", void 0);
    __decorate$F([
      Event$1()
    ], Dialog2.prototype, "open", void 0);
    __decorate$F([
      Event$1()
    ], Dialog2.prototype, "beforeSanitizeHtml", void 0);
    __decorate$F([
      Event$1()
    ], Dialog2.prototype, "beforeOpen", void 0);
    __decorate$F([
      Event$1()
    ], Dialog2.prototype, "close", void 0);
    __decorate$F([
      Event$1()
    ], Dialog2.prototype, "beforeClose", void 0);
    __decorate$F([
      Event$1()
    ], Dialog2.prototype, "dragStart", void 0);
    __decorate$F([
      Event$1()
    ], Dialog2.prototype, "dragStop", void 0);
    __decorate$F([
      Event$1()
    ], Dialog2.prototype, "drag", void 0);
    __decorate$F([
      Event$1()
    ], Dialog2.prototype, "overlayClick", void 0);
    __decorate$F([
      Event$1()
    ], Dialog2.prototype, "resizeStart", void 0);
    __decorate$F([
      Event$1()
    ], Dialog2.prototype, "resizing", void 0);
    __decorate$F([
      Event$1()
    ], Dialog2.prototype, "resizeStop", void 0);
    __decorate$F([
      Event$1()
    ], Dialog2.prototype, "destroyed", void 0);
    Dialog2 = __decorate$F([
      NotifyPropertyChanges
    ], Dialog2);
    return Dialog2;
  }(Component)
);
var DialogUtility;
(function(DialogUtility2) {
  function alert2(args) {
    var dialogElement = createElement("div", { "className": DLG_UTIL_ALERT });
    document.body.appendChild(dialogElement);
    var alertDialogObj;
    var okButtonModel = [{
      buttonModel: { isPrimary: true, content: "OK" },
      click: function() {
        this.hide();
      }
    }];
    if (typeof args === "string") {
      alertDialogObj = createDialog({
        content: args,
        position: { X: "center", Y: "top" },
        isModal: true,
        header: DLG_UTIL_DEFAULT_TITLE,
        buttons: okButtonModel
      }, dialogElement);
    } else {
      alertDialogObj = createDialog(alertOptions(args), dialogElement);
    }
    alertDialogObj.close = function() {
      if (args && args.close) {
        args.close.apply(alertDialogObj);
      }
      alertDialogObj.destroy();
      if (alertDialogObj.element.classList.contains("e-dlg-modal")) {
        alertDialogObj.element.parentElement.remove();
        alertDialogObj.target.classList.remove(DLG_UTIL_ROOT);
      } else {
        alertDialogObj.element.remove();
      }
    };
    return alertDialogObj;
  }
  DialogUtility2.alert = alert2;
  function confirm(args) {
    var dialogElement = createElement("div", { "className": DLG_UTIL_CONFIRM });
    document.body.appendChild(dialogElement);
    var confirmDialogObj;
    var okCancelButtonModel = [{
      buttonModel: { isPrimary: true, content: "OK" },
      click: function() {
        this.hide();
      }
    }, {
      buttonModel: { content: "Cancel" },
      click: function() {
        this.hide();
      }
    }];
    if (typeof args === "string") {
      confirmDialogObj = createDialog({
        position: { X: "center", Y: "top" },
        content: args,
        isModal: true,
        header: DLG_UTIL_DEFAULT_TITLE,
        buttons: okCancelButtonModel
      }, dialogElement);
    } else {
      confirmDialogObj = createDialog(confirmOptions(args), dialogElement);
    }
    confirmDialogObj.close = function() {
      if (args && args.close) {
        args.close.apply(confirmDialogObj);
      }
      confirmDialogObj.destroy();
      if (confirmDialogObj.element.classList.contains("e-dlg-modal")) {
        confirmDialogObj.element.parentElement.remove();
        confirmDialogObj.target.classList.remove(DLG_UTIL_ROOT);
      } else {
        confirmDialogObj.element.remove();
      }
    };
    return confirmDialogObj;
  }
  DialogUtility2.confirm = confirm;
  function createDialog(options, element2) {
    var dialogObject = new Dialog(options);
    dialogObject.appendTo(element2);
    return dialogObject;
  }
  function alertOptions(option) {
    var options = {};
    options.buttons = [];
    options = formOptions(options, option);
    options = setAlertButtonModel(options, option);
    return options;
  }
  function confirmOptions(option) {
    var options = {};
    options.buttons = [];
    options = formOptions(options, option);
    options = setConfirmButtonModel(options, option);
    return options;
  }
  function formOptions(options, option) {
    options.header = !isNullOrUndefined(option.title) ? option.title : DLG_UTIL_DEFAULT_TITLE;
    options.content = !isNullOrUndefined(option.content) ? option.content : "";
    options.isModal = !isNullOrUndefined(option.isModal) ? option.isModal : true;
    options.showCloseIcon = !isNullOrUndefined(option.showCloseIcon) ? option.showCloseIcon : false;
    options.allowDragging = !isNullOrUndefined(option.isDraggable) ? option.isDraggable : false;
    options.closeOnEscape = !isNullOrUndefined(option.closeOnEscape) ? option.closeOnEscape : false;
    options.position = !isNullOrUndefined(option.position) ? option.position : { X: "center", Y: "top" };
    options.animationSettings = !isNullOrUndefined(option.animationSettings) ? option.animationSettings : { effect: "Fade", duration: 400, delay: 0 };
    options.cssClass = !isNullOrUndefined(option.cssClass) ? option.cssClass : "";
    options.zIndex = !isNullOrUndefined(option.zIndex) ? option.zIndex : 1e3;
    options.open = !isNullOrUndefined(option.open) ? option.open : null;
    options.width = !isNullOrUndefined(option.width) ? option.width : "auto";
    options.height = !isNullOrUndefined(option.height) ? option.height : "auto";
    return options;
  }
  function setAlertButtonModel(options, option) {
    var alertButtonModel = [{
      buttonModel: { isPrimary: true, content: "OK" },
      click: function() {
        this.hide();
      }
    }];
    if (!isNullOrUndefined(option.okButton)) {
      options.buttons[0] = formButtonModel(options.buttons[0], option.okButton, alertButtonModel[0]);
    } else {
      options.buttons = alertButtonModel;
    }
    return options;
  }
  function setConfirmButtonModel(options, option) {
    var okButtonModel = {
      buttonModel: { isPrimary: true, content: "OK" },
      click: function() {
        this.hide();
      }
    };
    var cancelButtonModel = {
      buttonModel: { content: "Cancel" },
      click: function() {
        this.hide();
      }
    };
    if (!isNullOrUndefined(option.okButton)) {
      options.buttons[0] = formButtonModel(options.buttons[0], option.okButton, okButtonModel);
    } else {
      options.buttons[0] = okButtonModel;
    }
    if (!isNullOrUndefined(option.cancelButton)) {
      options.buttons[1] = formButtonModel(options.buttons[1], option.cancelButton, cancelButtonModel);
    } else {
      options.buttons[1] = cancelButtonModel;
    }
    return options;
  }
  function formButtonModel(buttonModel, option, buttonPropModel) {
    var buttonProps = buttonPropModel;
    if (!isNullOrUndefined(option.text)) {
      buttonProps.buttonModel.content = option.text;
    }
    if (!isNullOrUndefined(option.icon)) {
      buttonProps.buttonModel.iconCss = option.icon;
    }
    if (!isNullOrUndefined(option.cssClass)) {
      buttonProps.buttonModel.cssClass = option.cssClass;
    }
    if (!isNullOrUndefined(option.click)) {
      buttonProps.click = option.click;
    }
    return buttonProps;
  }
})(DialogUtility || (DialogUtility = {}));
var __extends$Q = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$E = globalThis && globalThis.__decorate || function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i = decorators.length - 1; i >= 0; i--)
      if (d = decorators[i])
        r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var TOUCHEND_HIDE_DELAY = 1500;
var TAPHOLD_THRESHOLD = 500;
var SHOW_POINTER_TIP_GAP = 0;
var HIDE_POINTER_TIP_GAP = 8;
var MOUSE_TRAIL_GAP = 2;
var POINTER_ADJUST = 2;
var ROOT$8 = "e-tooltip";
var RTL$6 = "e-rtl";
var DEVICE$1 = "e-bigger";
var ICON$4 = "e-icons";
var CLOSE$1 = "e-tooltip-close";
var TOOLTIP_WRAP = "e-tooltip-wrap";
var CONTENT$3 = "e-tip-content";
var ARROW_TIP = "e-arrow-tip";
var ARROW_TIP_OUTER = "e-arrow-tip-outer";
var ARROW_TIP_INNER = "e-arrow-tip-inner";
var TIP_BOTTOM = "e-tip-bottom";
var TIP_TOP = "e-tip-top";
var TIP_LEFT = "e-tip-left";
var TIP_RIGHT = "e-tip-right";
var POPUP_ROOT = "e-popup";
var POPUP_OPEN$1 = "e-popup-open";
var POPUP_CLOSE = "e-popup-close";
var POPUP_LIB = "e-lib";
var HIDE_POPUP = "e-hidden";
var POPUP_CONTAINER = "e-tooltip-popup-container";
var Animation = (
  /** @class */
  function(_super) {
    __extends$Q(Animation2, _super);
    function Animation2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$E([
      Property({ effect: "FadeIn", duration: 150, delay: 0 })
    ], Animation2.prototype, "open", void 0);
    __decorate$E([
      Property({ effect: "FadeOut", duration: 150, delay: 0 })
    ], Animation2.prototype, "close", void 0);
    return Animation2;
  }(ChildProperty)
);
var Tooltip = (
  /** @class */
  function(_super) {
    __extends$Q(Tooltip2, _super);
    function Tooltip2(options, element2) {
      var _this = _super.call(this, options, element2) || this;
      _this.mouseMoveEvent = null;
      _this.mouseMoveTarget = null;
      _this.containerElement = null;
      _this.isBodyContainer = true;
      return _this;
    }
    Tooltip2.prototype.initialize = function() {
      this.formatPosition();
      addClass([this.element], ROOT$8);
    };
    Tooltip2.prototype.formatPosition = function() {
      var _a, _b;
      if (this.position.indexOf("Top") === 0 || this.position.indexOf("Bottom") === 0) {
        _a = this.position.split(/(?=[A-Z])/), this.tooltipPositionY = _a[0], this.tooltipPositionX = _a[1];
      } else {
        _b = this.position.split(/(?=[A-Z])/), this.tooltipPositionX = _b[0], this.tooltipPositionY = _b[1];
      }
    };
    Tooltip2.prototype.renderArrow = function() {
      this.setTipClass(this.position);
      var tip = this.createElement("div", { className: ARROW_TIP + " " + this.tipClass });
      tip.appendChild(this.createElement("div", { className: ARROW_TIP_OUTER + " " + this.tipClass }));
      tip.appendChild(this.createElement("div", { className: ARROW_TIP_INNER + " " + this.tipClass }));
      this.tooltipEle.appendChild(tip);
    };
    Tooltip2.prototype.setTipClass = function(position) {
      if (position.indexOf("Right") === 0) {
        this.tipClass = TIP_LEFT;
      } else if (position.indexOf("Bottom") === 0) {
        this.tipClass = TIP_TOP;
      } else if (position.indexOf("Left") === 0) {
        this.tipClass = TIP_RIGHT;
      } else {
        this.tipClass = TIP_BOTTOM;
      }
    };
    Tooltip2.prototype.renderPopup = function(target) {
      var elePos = this.mouseTrail ? { top: 0, left: 0 } : this.getTooltipPosition(target);
      this.tooltipEle.classList.remove(POPUP_LIB);
      this.popupObj = new Popup(this.tooltipEle, {
        height: this.height,
        width: this.width,
        position: { X: elePos.left, Y: elePos.top },
        enableRtl: this.enableRtl,
        open: this.openPopupHandler.bind(this),
        close: this.closePopupHandler.bind(this)
      });
    };
    Tooltip2.prototype.getTooltipPosition = function(target) {
      this.tooltipEle.style.display = "block";
      var pos = calculatePosition(target, this.tooltipPositionX, this.tooltipPositionY, !this.isBodyContainer, this.isBodyContainer ? null : this.containerElement.getBoundingClientRect());
      var offsetPos = this.calculateTooltipOffset(this.position);
      var collisionPosition = this.calculateElementPosition(pos, offsetPos);
      var collisionLeft = collisionPosition[0];
      var collisionTop = collisionPosition[1];
      var elePos = this.collisionFlipFit(target, collisionLeft, collisionTop);
      this.tooltipEle.style.display = "";
      return elePos;
    };
    Tooltip2.prototype.windowResize = function() {
      this.reposition(this.findTarget());
    };
    Tooltip2.prototype.reposition = function(target) {
      if (this.popupObj && target) {
        var elePos = this.getTooltipPosition(target);
        this.popupObj.position = { X: elePos.left, Y: elePos.top };
        this.popupObj.dataBind();
      }
    };
    Tooltip2.prototype.openPopupHandler = function() {
      if (!this.mouseTrail && this.needTemplateReposition()) {
        this.reposition(this.findTarget());
      }
      this.trigger("afterOpen", this.tooltipEventArgs);
      this.tooltipEventArgs = null;
    };
    Tooltip2.prototype.closePopupHandler = function() {
      if (this.isReact && !(this.opensOn === "Click" && typeof this.content === "function")) {
        this.clearTemplate(["content"]);
      }
      this.clear();
      this.trigger("afterClose", this.tooltipEventArgs);
      this.tooltipEventArgs = null;
    };
    Tooltip2.prototype.calculateTooltipOffset = function(position) {
      var pos = { top: 0, left: 0 };
      var tooltipEleWidth = this.tooltipEle.offsetWidth;
      var tooltipEleHeight = this.tooltipEle.offsetHeight;
      var arrowEle = select$1("." + ARROW_TIP, this.tooltipEle);
      var tipWidth = arrowEle ? arrowEle.offsetWidth : 0;
      var tipHeight = arrowEle ? arrowEle.offsetHeight : 0;
      var tipAdjust = this.showTipPointer ? SHOW_POINTER_TIP_GAP : HIDE_POINTER_TIP_GAP;
      var tipHeightAdjust = tipHeight / 2 + POINTER_ADJUST + (this.tooltipEle.offsetHeight - this.tooltipEle.clientHeight);
      var tipWidthAdjust = tipWidth / 2 + POINTER_ADJUST + (this.tooltipEle.offsetWidth - this.tooltipEle.clientWidth);
      if (this.mouseTrail) {
        tipAdjust += MOUSE_TRAIL_GAP;
      }
      switch (position) {
        case "RightTop":
          pos.left += tipWidth + tipAdjust;
          pos.top -= tooltipEleHeight - tipHeightAdjust;
          break;
        case "RightCenter":
          pos.left += tipWidth + tipAdjust;
          pos.top -= tooltipEleHeight / 2;
          break;
        case "RightBottom":
          pos.left += tipWidth + tipAdjust;
          pos.top -= tipHeightAdjust;
          break;
        case "BottomRight":
          pos.top += tipHeight + tipAdjust;
          pos.left -= tipWidthAdjust;
          break;
        case "BottomCenter":
          pos.top += tipHeight + tipAdjust;
          pos.left -= tooltipEleWidth / 2;
          break;
        case "BottomLeft":
          pos.top += tipHeight + tipAdjust;
          pos.left -= tooltipEleWidth - tipWidthAdjust;
          break;
        case "LeftBottom":
          pos.left -= tipWidth + tooltipEleWidth + tipAdjust;
          pos.top -= tipHeightAdjust;
          break;
        case "LeftCenter":
          pos.left -= tipWidth + tooltipEleWidth + tipAdjust;
          pos.top -= tooltipEleHeight / 2;
          break;
        case "LeftTop":
          pos.left -= tipWidth + tooltipEleWidth + tipAdjust;
          pos.top -= tooltipEleHeight - tipHeightAdjust;
          break;
        case "TopLeft":
          pos.top -= tooltipEleHeight + tipHeight + tipAdjust;
          pos.left -= tooltipEleWidth - tipWidthAdjust;
          break;
        case "TopRight":
          pos.top -= tooltipEleHeight + tipHeight + tipAdjust;
          pos.left -= tipWidthAdjust;
          break;
        default:
          pos.top -= tooltipEleHeight + tipHeight + tipAdjust;
          pos.left -= tooltipEleWidth / 2;
          break;
      }
      pos.left += this.offsetX;
      pos.top += this.offsetY;
      return pos;
    };
    Tooltip2.prototype.updateTipPosition = function(position) {
      var selEle = selectAll("." + ARROW_TIP + ",." + ARROW_TIP_OUTER + ",." + ARROW_TIP_INNER, this.tooltipEle);
      var removeList = [TIP_BOTTOM, TIP_TOP, TIP_LEFT, TIP_RIGHT];
      removeClass(selEle, removeList);
      this.setTipClass(position);
      addClass(selEle, this.tipClass);
    };
    Tooltip2.prototype.adjustArrow = function(target, position, tooltipPositionX, tooltipPositionY) {
      if (this.showTipPointer === false) {
        return;
      }
      this.updateTipPosition(position);
      var leftValue;
      var topValue;
      this.tooltipEle.style.display = "block";
      var tooltipWidth = this.tooltipEle.clientWidth;
      var tooltipHeight = this.tooltipEle.clientHeight;
      var arrowEle = select$1("." + ARROW_TIP, this.tooltipEle);
      var arrowInnerELe = select$1("." + ARROW_TIP_INNER, this.tooltipEle);
      var tipWidth = arrowEle.offsetWidth;
      var tipHeight = arrowEle.offsetHeight;
      this.tooltipEle.style.display = "";
      if (this.tipClass === TIP_BOTTOM || this.tipClass === TIP_TOP) {
        if (this.tipClass === TIP_BOTTOM) {
          topValue = "99.9%";
          arrowInnerELe.style.top = "-" + (tipHeight - 2) + "px";
        } else {
          topValue = -(tipHeight - 1) + "px";
          arrowInnerELe.style.top = "-" + (tipHeight - 6) + "px";
        }
        if (target) {
          var tipPosExclude = tooltipPositionX !== "Center" || tooltipWidth > target.offsetWidth || this.mouseTrail;
          if (tipPosExclude && tooltipPositionX === "Left" || !tipPosExclude && this.tipPointerPosition === "End") {
            leftValue = tooltipWidth - tipWidth - POINTER_ADJUST + "px";
          } else if (tipPosExclude && tooltipPositionX === "Right" || !tipPosExclude && this.tipPointerPosition === "Start") {
            leftValue = POINTER_ADJUST + "px";
          } else if (tipPosExclude && (this.tipPointerPosition === "End" || this.tipPointerPosition === "Start")) {
            leftValue = this.tipPointerPosition === "End" ? target.offsetWidth + (this.tooltipEle.offsetWidth - target.offsetWidth) / 2 - tipWidth / 2 - POINTER_ADJUST + "px" : (this.tooltipEle.offsetWidth - target.offsetWidth) / 2 - tipWidth / 2 + POINTER_ADJUST + "px";
          } else {
            leftValue = tooltipWidth / 2 - tipWidth / 2 + "px";
          }
        }
      } else {
        if (this.tipClass === TIP_RIGHT) {
          leftValue = "99.9%";
          arrowInnerELe.style.left = "-" + (tipWidth - 2) + "px";
        } else {
          leftValue = -(tipWidth - 1) + "px";
          arrowInnerELe.style.left = -tipWidth + (tipWidth - 2) + "px";
        }
        var tipPosExclude = tooltipPositionY !== "Center" || tooltipHeight > target.offsetHeight || this.mouseTrail;
        if (tipPosExclude && tooltipPositionY === "Top" || !tipPosExclude && this.tipPointerPosition === "End") {
          topValue = tooltipHeight - tipHeight - POINTER_ADJUST + "px";
        } else if (tipPosExclude && tooltipPositionY === "Bottom" || !tipPosExclude && this.tipPointerPosition === "Start") {
          topValue = POINTER_ADJUST + "px";
        } else {
          topValue = tooltipHeight / 2 - tipHeight / 2 + "px";
        }
      }
      arrowEle.style.top = topValue;
      arrowEle.style.left = leftValue;
    };
    Tooltip2.prototype.renderContent = function(target) {
      var tooltipContent = select$1("." + CONTENT$3, this.tooltipEle);
      if (this.cssClass) {
        addClass([this.tooltipEle], this.cssClass.split(" "));
      }
      if (target && !isNullOrUndefined(target.getAttribute("title"))) {
        target.setAttribute("data-content", target.getAttribute("title"));
        target.removeAttribute("title");
      }
      if (!isNullOrUndefined(this.content)) {
        tooltipContent.innerHTML = "";
        if (this.content instanceof HTMLElement) {
          tooltipContent.appendChild(this.content);
        } else if (typeof this.content === "string") {
          if (this.enableHtmlSanitizer) {
            this.setProperties({ content: SanitizeHtmlHelper.sanitize(this.content) }, true);
          }
          var tempFunction = compile$1(this.content);
          var tempArr = tempFunction({}, this, "content", this.element.id + "content", void 0, void 0, tooltipContent);
          if (tempArr) {
            if (this.enableHtmlParse) {
              var nodeList = tempArr.length;
              for (var i = 0; i < nodeList; i++) {
                tooltipContent[append2(tempArr, tooltipContent), "innerHTML"] = this.content;
              }
            } else {
              tooltipContent["textContent"] = this.content;
            }
          }
        } else {
          var templateFunction = compile$1(this.content);
          var tempArr = templateFunction({}, this, "content", this.element.id + "content", void 0, void 0, tooltipContent);
          if (tempArr) {
            append2(tempArr, tooltipContent);
          }
          this.renderReactTemplates();
        }
      } else {
        if (target && !isNullOrUndefined(target.getAttribute("data-content"))) {
          tooltipContent.innerHTML = target.getAttribute("data-content");
        }
      }
    };
    Tooltip2.prototype.renderCloseIcon = function() {
      if (!this.isSticky) {
        return;
      }
      var tipClose = this.createElement("div", { className: ICON$4 + " " + CLOSE$1 });
      this.tooltipEle.appendChild(tipClose);
      EventHandler.add(tipClose, Browser.touchStartEvent, this.onStickyClose, this);
    };
    Tooltip2.prototype.addDataTooltipId = function(target, id) {
      attributes(target, { "data-tooltip-id": id });
    };
    Tooltip2.prototype.removeDataTooltipId = function(target) {
      target.removeAttribute("data-tooltip-id");
    };
    Tooltip2.prototype.tapHoldHandler = function(evt) {
      clearTimeout(this.autoCloseTimer);
      this.targetHover(evt.originalEvent);
    };
    Tooltip2.prototype.touchEndHandler = function(e) {
      var _this = this;
      if (this.isSticky) {
        return;
      }
      var close = function() {
        _this.close();
      };
      this.autoCloseTimer = setTimeout(close, TOUCHEND_HIDE_DELAY);
    };
    Tooltip2.prototype.targetClick = function(e) {
      var target;
      if (this.target) {
        target = closest(e.target, this.target);
      } else {
        target = this.element;
      }
      if (isNullOrUndefined(target)) {
        return;
      }
      if (target.getAttribute("data-tooltip-id") === null) {
        this.targetHover(e);
      } else if (!this.isSticky) {
        this.hideTooltip(this.animation.close, e, target);
      }
    };
    Tooltip2.prototype.targetHover = function(e) {
      var target;
      if (this.target) {
        target = closest(e.target, this.target);
      } else {
        target = this.element;
      }
      if (isNullOrUndefined(target) || target.getAttribute("data-tooltip-id") !== null && this.closeDelay === 0) {
        return;
      }
      var targetList = [].slice.call(selectAll('[data-tooltip-id= "' + this.ctrlId + '_content"]', document));
      for (var _i = 0, targetList_1 = targetList; _i < targetList_1.length; _i++) {
        var target_1 = targetList_1[_i];
        this.restoreElement(target_1);
      }
      this.showTooltip(target, this.animation.open, e);
    };
    Tooltip2.prototype.mouseMoveBeforeOpen = function(e) {
      this.mouseMoveEvent = e;
    };
    Tooltip2.prototype.mouseMoveBeforeRemove = function() {
      if (this.mouseMoveTarget) {
        EventHandler.remove(this.mouseMoveTarget, "mousemove touchstart", this.mouseMoveBeforeOpen);
      }
    };
    Tooltip2.prototype.showTooltip = function(target, showAnimation, e) {
      var _this = this;
      clearTimeout(this.showTimer);
      clearTimeout(this.hideTimer);
      if (this.openDelay && this.mouseTrail) {
        this.mouseMoveBeforeRemove();
        this.mouseMoveTarget = target;
        EventHandler.add(this.mouseMoveTarget, "mousemove touchstart", this.mouseMoveBeforeOpen, this);
      }
      this.tooltipEventArgs = {
        type: e ? e.type : null,
        cancel: false,
        target,
        event: e ? e : null,
        element: this.tooltipEle,
        isInteracted: !isNullOrUndefined(e)
      };
      var observeCallback = function(beforeRenderArgs) {
        _this.beforeRenderCallback(beforeRenderArgs, target, e, showAnimation);
      };
      this.trigger("beforeRender", this.tooltipEventArgs, observeCallback.bind(this));
    };
    Tooltip2.prototype.beforeRenderCallback = function(beforeRenderArgs, target, e, showAnimation) {
      if (beforeRenderArgs.cancel) {
        this.isHidden = true;
        this.clear();
        this.mouseMoveBeforeRemove();
      } else {
        this.isHidden = false;
        if (isNullOrUndefined(this.tooltipEle)) {
          this.ctrlId = this.element.getAttribute("id") ? getUniqueID(this.element.getAttribute("id")) : getUniqueID("tooltip");
          this.tooltipEle = this.createElement("div", {
            className: TOOLTIP_WRAP + " " + POPUP_ROOT + " " + POPUP_LIB,
            attrs: {
              role: "tooltip",
              "aria-hidden": "false",
              "id": this.ctrlId + "_content"
            },
            styles: "width:" + formatUnit(this.width) + ";height:" + formatUnit(this.height) + ";position:absolute;"
          });
          if (Object.keys(this.htmlAttributes).length !== 0) {
            for (var attr in this.htmlAttributes) {
              if (attr === "class") {
                this.tooltipEle.classList.add(this.htmlAttributes["" + attr]);
              } else {
                this.tooltipEle.setAttribute(attr, this.htmlAttributes["" + attr]);
              }
            }
          }
          this.tooltipBeforeRender(target, this);
          this.tooltipAfterRender(target, e, showAnimation, this);
        } else {
          if (target) {
            this.adjustArrow(target, this.position, this.tooltipPositionX, this.tooltipPositionY);
            this.addDataTooltipId(target, this.ctrlId + "_content");
            this.renderContent(target);
            Animation$1.stop(this.tooltipEle);
            this.reposition(target);
            this.tooltipAfterRender(target, e, showAnimation, this);
          }
        }
      }
    };
    Tooltip2.prototype.appendContainer = function(ctrlObj) {
      if (typeof this.container == "string") {
        if (this.container === "body") {
          this.containerElement = document.body;
        } else {
          this.isBodyContainer = false;
          this.containerElement = select$1(this.container, document);
        }
      } else if (this.container instanceof HTMLElement) {
        this.containerElement = this.container;
        this.isBodyContainer = this.containerElement.tagName === "BODY";
      }
      if (!this.isBodyContainer) {
        addClass([this.containerElement], POPUP_CONTAINER);
      }
      this.containerElement.appendChild(ctrlObj.tooltipEle);
    };
    Tooltip2.prototype.tooltipBeforeRender = function(target, ctrlObj) {
      if (target) {
        if (Browser.isDevice) {
          addClass([ctrlObj.tooltipEle], DEVICE$1);
        }
        if (ctrlObj.width !== "auto") {
          ctrlObj.tooltipEle.style.maxWidth = formatUnit(ctrlObj.width);
        }
        ctrlObj.tooltipEle.appendChild(ctrlObj.createElement("div", { className: CONTENT$3 }));
        this.appendContainer(ctrlObj);
        removeClass([ctrlObj.tooltipEle], HIDE_POPUP);
        ctrlObj.addDataTooltipId(target, ctrlObj.ctrlId + "_content");
        ctrlObj.renderContent(target);
        addClass([ctrlObj.tooltipEle], POPUP_OPEN$1);
        if (ctrlObj.showTipPointer) {
          ctrlObj.renderArrow();
        }
        ctrlObj.renderCloseIcon();
        ctrlObj.renderPopup(target);
        ctrlObj.adjustArrow(target, ctrlObj.position, ctrlObj.tooltipPositionX, ctrlObj.tooltipPositionY);
        Animation$1.stop(ctrlObj.tooltipEle);
        ctrlObj.reposition(target);
      }
    };
    Tooltip2.prototype.tooltipAfterRender = function(target, e, showAnimation, ctrlObj) {
      if (target) {
        removeClass([ctrlObj.tooltipEle], POPUP_OPEN$1);
        addClass([ctrlObj.tooltipEle], POPUP_CLOSE);
        ctrlObj.tooltipEventArgs = {
          type: e ? e.type : null,
          cancel: false,
          target,
          event: e ? e : null,
          element: ctrlObj.tooltipEle,
          isInteracted: !isNullOrUndefined(e)
        };
        if (ctrlObj.needTemplateReposition() && !ctrlObj.mouseTrail) {
          ctrlObj.tooltipEle.style.display = "none";
        }
        var observeCallback = function(observedArgs) {
          ctrlObj.beforeOpenCallback(observedArgs, target, showAnimation, e);
        };
        ctrlObj.trigger("beforeOpen", ctrlObj.tooltipEventArgs, observeCallback.bind(ctrlObj));
      }
    };
    Tooltip2.prototype.beforeOpenCallback = function(observedArgs, target, showAnimation, e) {
      var _this = this;
      if (observedArgs.cancel) {
        this.isHidden = true;
        this.clear();
        this.mouseMoveBeforeRemove();
        this.restoreElement(target);
      } else {
        var openAnimation_1 = {
          name: showAnimation.effect,
          duration: showAnimation.duration,
          delay: showAnimation.delay,
          timingFunction: "easeOut"
        };
        if (showAnimation.effect === "None") {
          openAnimation_1 = void 0;
        }
        if (this.openDelay > 0) {
          var show = function() {
            if (_this.mouseTrail) {
              EventHandler.add(target, "mousemove touchstart mouseenter", _this.onMouseMove, _this);
            }
            if (_this.popupObj) {
              _this.popupObj.show(openAnimation_1, target);
              if (_this.mouseMoveEvent && _this.mouseTrail) {
                _this.onMouseMove(_this.mouseMoveEvent);
              }
            }
          };
          this.showTimer = setTimeout(show, this.openDelay);
        } else {
          if (this.popupObj) {
            this.popupObj.show(openAnimation_1, target);
          }
        }
      }
      if (e) {
        this.wireMouseEvents(e, target);
      }
    };
    Tooltip2.prototype.needTemplateReposition = function() {
      var tooltip = this;
      return !isNullOrUndefined(tooltip.viewContainerRef) && typeof tooltip.viewContainerRef !== "string";
    };
    Tooltip2.prototype.checkCollision = function(target, x, y) {
      var elePos = {
        left: x,
        top: y,
        position: this.position,
        horizontal: this.tooltipPositionX,
        vertical: this.tooltipPositionY
      };
      var affectedPos = isCollide(this.tooltipEle, this.checkCollideTarget(), x, y);
      if (affectedPos.length > 0) {
        elePos.horizontal = affectedPos.indexOf("left") >= 0 ? "Right" : affectedPos.indexOf("right") >= 0 ? "Left" : this.tooltipPositionX;
        elePos.vertical = affectedPos.indexOf("top") >= 0 ? "Bottom" : affectedPos.indexOf("bottom") >= 0 ? "Top" : this.tooltipPositionY;
      }
      return elePos;
    };
    Tooltip2.prototype.calculateElementPosition = function(pos, offsetPos) {
      return [
        this.isBodyContainer ? pos.left + offsetPos.left : pos.left - this.containerElement.offsetLeft + offsetPos.left + window.pageXOffset + this.containerElement.scrollLeft,
        this.isBodyContainer ? pos.top + offsetPos.top : pos.top - this.containerElement.offsetTop + offsetPos.top + window.pageYOffset + this.containerElement.scrollTop
      ];
    };
    Tooltip2.prototype.collisionFlipFit = function(target, x, y) {
      var elePos = this.checkCollision(target, x, y);
      var newpos = elePos.position;
      if (this.tooltipPositionY !== elePos.vertical) {
        newpos = this.position.indexOf("Bottom") === 0 || this.position.indexOf("Top") === 0 ? elePos.vertical + this.tooltipPositionX : this.tooltipPositionX + elePos.vertical;
      }
      if (this.tooltipPositionX !== elePos.horizontal) {
        if (newpos.indexOf("Left") === 0) {
          elePos.vertical = newpos === "LeftTop" || newpos === "LeftCenter" ? "Top" : "Bottom";
          newpos = elePos.vertical + "Left";
        }
        if (newpos.indexOf("Right") === 0) {
          elePos.vertical = newpos === "RightTop" || newpos === "RightCenter" ? "Top" : "Bottom";
          newpos = elePos.vertical + "Right";
        }
        elePos.horizontal = this.tooltipPositionX;
      }
      this.tooltipEventArgs = {
        type: null,
        cancel: false,
        target,
        event: null,
        element: this.tooltipEle,
        collidedPosition: newpos
      };
      this.trigger("beforeCollision", this.tooltipEventArgs);
      var elePosVertical = elePos.vertical;
      var elePosHorizontal = elePos.horizontal;
      if (elePos.position !== newpos) {
        var pos = calculatePosition(target, elePosHorizontal, elePosVertical, !this.isBodyContainer, this.isBodyContainer ? null : this.containerElement.getBoundingClientRect());
        this.adjustArrow(target, newpos, elePosHorizontal, elePosVertical);
        var offsetPos = this.calculateTooltipOffset(newpos);
        offsetPos.top -= this.getOffSetPosition("TopBottom", newpos, this.offsetY);
        offsetPos.left -= this.getOffSetPosition("RightLeft", newpos, this.offsetX);
        elePos.position = newpos;
        var elePosition = this.calculateElementPosition(pos, offsetPos);
        elePos.left = elePosition[0];
        elePos.top = elePosition[1];
      } else {
        this.adjustArrow(target, newpos, elePosHorizontal, elePosVertical);
      }
      var eleOffset = { left: elePos.left, top: elePos.top };
      var left = this.isBodyContainer ? fit(this.tooltipEle, this.checkCollideTarget(), { X: true, Y: false }, eleOffset).left : eleOffset.left;
      this.tooltipEle.style.display = "block";
      if (this.showTipPointer && (newpos.indexOf("Bottom") === 0 || newpos.indexOf("Top") === 0)) {
        var arrowEle = select$1("." + ARROW_TIP, this.tooltipEle);
        var arrowleft = parseInt(arrowEle.style.left, 10) - (left - elePos.left);
        if (arrowleft < 0) {
          arrowleft = 0;
        } else if (arrowleft + arrowEle.offsetWidth > this.tooltipEle.clientWidth) {
          arrowleft = this.tooltipEle.clientWidth - arrowEle.offsetWidth;
        }
        arrowEle.style.left = arrowleft.toString() + "px";
      }
      this.tooltipEle.style.display = "";
      eleOffset.left = left;
      return eleOffset;
    };
    Tooltip2.prototype.getOffSetPosition = function(positionString, newPos, offsetType) {
      return positionString.indexOf(this.position.split(/(?=[A-Z])/)[0]) !== -1 && positionString.indexOf(newPos.split(/(?=[A-Z])/)[0]) !== -1 ? 2 * offsetType : 0;
    };
    Tooltip2.prototype.checkCollideTarget = function() {
      return !this.windowCollision && this.target ? this.element : null;
    };
    Tooltip2.prototype.hideTooltip = function(hideAnimation, e, targetElement2) {
      var _this = this;
      if (this.closeDelay > 0) {
        clearTimeout(this.hideTimer);
        clearTimeout(this.showTimer);
        var hide = function() {
          if (_this.closeDelay && _this.tooltipEle && _this.isTooltipOpen) {
            return;
          }
          _this.tooltipHide(hideAnimation, e, targetElement2);
        };
        this.hideTimer = setTimeout(hide, this.closeDelay);
      } else {
        this.tooltipHide(hideAnimation, e, targetElement2);
      }
    };
    Tooltip2.prototype.tooltipHide = function(hideAnimation, e, targetElement2) {
      var _this = this;
      var target;
      if (e) {
        target = this.target ? targetElement2 || e.target : this.element;
      } else {
        target = select$1('[data-tooltip-id= "' + this.ctrlId + '_content"]', document);
      }
      this.tooltipEventArgs = {
        type: e ? e.type : null,
        cancel: false,
        target,
        event: e ? e : null,
        element: this.tooltipEle,
        isInteracted: !isNullOrUndefined(e)
      };
      this.trigger("beforeClose", this.tooltipEventArgs, function(observedArgs) {
        if (!observedArgs.cancel) {
          _this.mouseMoveBeforeRemove();
          _this.popupHide(hideAnimation, target);
        } else {
          _this.isHidden = false;
        }
      });
      this.tooltipEventArgs = null;
    };
    Tooltip2.prototype.popupHide = function(hideAnimation, target) {
      if (target) {
        this.restoreElement(target);
      }
      this.isHidden = true;
      var closeAnimation = {
        name: hideAnimation.effect,
        duration: hideAnimation.duration,
        delay: hideAnimation.delay,
        timingFunction: "easeIn"
      };
      if (hideAnimation.effect === "None") {
        closeAnimation = void 0;
      }
      if (this.popupObj) {
        this.popupObj.hide(closeAnimation);
      }
    };
    Tooltip2.prototype.restoreElement = function(target) {
      this.unwireMouseEvents(target);
      if (!isNullOrUndefined(target.getAttribute("data-content"))) {
        target.setAttribute("title", target.getAttribute("data-content"));
        target.removeAttribute("data-content");
      }
      this.removeDataTooltipId(target);
    };
    Tooltip2.prototype.clear = function() {
      if (this.tooltipEle) {
        removeClass([this.tooltipEle], POPUP_CLOSE);
        addClass([this.tooltipEle], POPUP_OPEN$1);
      }
      if (this.isHidden) {
        if (this.popupObj) {
          this.popupObj.destroy();
        }
        if (this.tooltipEle) {
          remove(this.tooltipEle);
        }
        this.tooltipEle = null;
        this.popupObj = null;
      }
    };
    Tooltip2.prototype.tooltipHover = function(e) {
      if (this.tooltipEle) {
        this.isTooltipOpen = true;
      }
    };
    Tooltip2.prototype.tooltipMouseOut = function(e) {
      this.isTooltipOpen = false;
      this.hideTooltip(this.animation.close, e, this.findTarget());
    };
    Tooltip2.prototype.onMouseOut = function(e) {
      var enteredElement = e.relatedTarget;
      if (enteredElement && !this.mouseTrail) {
        var checkForTooltipElement = closest(enteredElement, "." + TOOLTIP_WRAP + "." + POPUP_LIB + "." + POPUP_ROOT);
        if (checkForTooltipElement) {
          EventHandler.add(checkForTooltipElement, "mouseleave", this.tooltipElementMouseOut, this);
        } else {
          this.hideTooltip(this.animation.close, e, this.findTarget());
          if (this.closeDelay === 0) {
            this.clear();
          }
        }
      } else {
        this.hideTooltip(this.animation.close, e, this.findTarget());
        this.clear();
      }
    };
    Tooltip2.prototype.tooltipElementMouseOut = function(e) {
      this.hideTooltip(this.animation.close, e, this.findTarget());
      EventHandler.remove(this.element, "mouseleave", this.tooltipElementMouseOut);
      this.clear();
    };
    Tooltip2.prototype.onStickyClose = function(e) {
      this.close();
    };
    Tooltip2.prototype.onMouseMove = function(event) {
      var eventPageX = 0;
      var eventPageY = 0;
      if (event.type.indexOf("touch") > -1) {
        event.preventDefault();
        eventPageX = event.touches[0].pageX;
        eventPageY = event.touches[0].pageY;
      } else {
        eventPageX = event.pageX;
        eventPageY = event.pageY;
      }
      Animation$1.stop(this.tooltipEle);
      removeClass([this.tooltipEle], POPUP_CLOSE);
      addClass([this.tooltipEle], POPUP_OPEN$1);
      this.adjustArrow(event.target, this.position, this.tooltipPositionX, this.tooltipPositionY);
      var pos = this.calculateTooltipOffset(this.position);
      var x = eventPageX + pos.left + this.offsetX;
      var y = eventPageY + pos.top + this.offsetY;
      var elePos = this.checkCollision(event.target, x, y);
      if (this.tooltipPositionX !== elePos.horizontal || this.tooltipPositionY !== elePos.vertical) {
        var newpos = this.position.indexOf("Bottom") === 0 || this.position.indexOf("Top") === 0 ? elePos.vertical + elePos.horizontal : elePos.horizontal + elePos.vertical;
        elePos.position = newpos;
        this.adjustArrow(event.target, elePos.position, elePos.horizontal, elePos.vertical);
        var colpos = this.calculateTooltipOffset(elePos.position);
        elePos.left = eventPageX + colpos.left - this.offsetX;
        elePos.top = eventPageY + colpos.top - this.offsetY;
      }
      this.tooltipEle.style.left = elePos.left + "px";
      this.tooltipEle.style.top = elePos.top + "px";
    };
    Tooltip2.prototype.keyDown = function(event) {
      if (this.tooltipEle && event.keyCode === 27) {
        this.close();
      }
    };
    Tooltip2.prototype.touchEnd = function(e) {
      if (this.tooltipEle && closest(e.target, "." + ROOT$8) === null && !this.isSticky) {
        this.close();
      }
    };
    Tooltip2.prototype.scrollHandler = function(e) {
      if (this.tooltipEle) {
        if (!closest(e.target, "." + TOOLTIP_WRAP + "." + POPUP_LIB + "." + POPUP_ROOT)) {
          this.close();
        }
      }
    };
    Tooltip2.prototype.render = function() {
      this.initialize();
      this.wireEvents(this.opensOn);
      this.renderComplete();
    };
    Tooltip2.prototype.preRender = function() {
      this.tipClass = TIP_BOTTOM;
      this.tooltipPositionX = "Center";
      this.tooltipPositionY = "Top";
      this.isHidden = true;
    };
    Tooltip2.prototype.wireEvents = function(trigger2) {
      var triggerList = this.getTriggerList(trigger2);
      for (var _i = 0, triggerList_1 = triggerList; _i < triggerList_1.length; _i++) {
        var opensOn = triggerList_1[_i];
        if (opensOn === "Custom") {
          return;
        }
        if (opensOn === "Focus") {
          this.wireFocusEvents();
          EventHandler.add(this.element, "DOMNodeInserted", this.updateTarget, this);
        }
        if (opensOn === "Click") {
          EventHandler.add(this.element, Browser.touchStartEvent, this.targetClick, this);
        }
        if (opensOn === "Hover") {
          if (Browser.isDevice) {
            this.touchModule = new Touch(this.element, {
              tapHoldThreshold: TAPHOLD_THRESHOLD,
              tapHold: this.tapHoldHandler.bind(this)
            });
            EventHandler.add(this.element, Browser.touchEndEvent, this.touchEndHandler, this);
          } else {
            EventHandler.add(this.element, "mouseover", this.targetHover, this);
          }
        }
      }
      EventHandler.add(document, "touchend", this.touchEnd, this);
      EventHandler.add(document, "scroll wheel", this.scrollHandler, this);
      EventHandler.add(window, "resize", this.windowResize, this);
      EventHandler.add(document, "keydown", this.keyDown, this);
    };
    Tooltip2.prototype.updateTarget = function(e) {
      if (!isNullOrUndefined(this.targetsList) && !isNullOrUndefined(this.target)) {
        var target = [].slice.call(selectAll(this.target, this.element));
        if (target.length !== this.targetsList.length) {
          this.unwireEvents(this.opensOn);
          this.wireEvents(this.opensOn);
        }
      }
    };
    Tooltip2.prototype.getTriggerList = function(trigger2) {
      if (trigger2 === "Auto") {
        trigger2 = Browser.isDevice ? "Hover" : "Hover Focus";
      }
      return trigger2.split(" ");
    };
    Tooltip2.prototype.wireFocusEvents = function() {
      if (!isNullOrUndefined(this.target)) {
        var targetList = [].slice.call(selectAll(this.target, this.element));
        this.targetsList = targetList;
        for (var _i = 0, targetList_2 = targetList; _i < targetList_2.length; _i++) {
          var target = targetList_2[_i];
          EventHandler.add(target, "focus", this.targetHover, this);
        }
      } else {
        EventHandler.add(this.element, "focus", this.targetHover, this);
      }
    };
    Tooltip2.prototype.wireMouseEvents = function(e, target) {
      if (this.tooltipEle) {
        if (!this.isSticky) {
          if (e.type === "focus") {
            EventHandler.add(target, "blur", this.onMouseOut, this);
          }
          if (e.type === "mouseover") {
            EventHandler.add(target, "mouseleave", this.onMouseOut, this);
          }
          if (this.closeDelay) {
            EventHandler.add(this.tooltipEle, "mouseenter", this.tooltipHover, this);
            EventHandler.add(this.tooltipEle, "mouseleave", this.tooltipMouseOut, this);
          }
        }
        if (this.mouseTrail && this.openDelay === 0) {
          EventHandler.add(target, "mousemove touchstart mouseenter", this.onMouseMove, this);
        }
      }
    };
    Tooltip2.prototype.unwireEvents = function(trigger2) {
      var triggerList = this.getTriggerList(trigger2);
      for (var _i = 0, triggerList_2 = triggerList; _i < triggerList_2.length; _i++) {
        var opensOn = triggerList_2[_i];
        if (opensOn === "Custom") {
          return;
        }
        if (opensOn === "Focus") {
          this.unwireFocusEvents();
          EventHandler.remove(this.element, "DOMNodeInserted", this.updateTarget);
        }
        if (opensOn === "Click") {
          EventHandler.remove(this.element, Browser.touchStartEvent, this.targetClick);
        }
        if (opensOn === "Hover") {
          if (Browser.isDevice) {
            if (this.touchModule) {
              this.touchModule.destroy();
            }
            EventHandler.remove(this.element, Browser.touchEndEvent, this.touchEndHandler);
          } else {
            EventHandler.remove(this.element, "mouseover", this.targetHover);
          }
        }
      }
      EventHandler.remove(document, "touchend", this.touchEnd);
      EventHandler.remove(document, "scroll wheel", this.scrollHandler);
      EventHandler.remove(window, "resize", this.windowResize);
      EventHandler.remove(document, "keydown", this.keyDown);
    };
    Tooltip2.prototype.unwireFocusEvents = function() {
      if (!isNullOrUndefined(this.target)) {
        var targetList = [].slice.call(selectAll(this.target, this.element));
        for (var _i = 0, targetList_3 = targetList; _i < targetList_3.length; _i++) {
          var target = targetList_3[_i];
          EventHandler.remove(target, "focus", this.targetHover);
        }
      } else {
        EventHandler.remove(this.element, "focus", this.targetHover);
      }
    };
    Tooltip2.prototype.unwireMouseEvents = function(target) {
      if (!this.isSticky) {
        var triggerList = this.getTriggerList(this.opensOn);
        for (var _i = 0, triggerList_3 = triggerList; _i < triggerList_3.length; _i++) {
          var opensOn = triggerList_3[_i];
          if (opensOn === "Focus") {
            EventHandler.remove(target, "blur", this.onMouseOut);
          }
          if (opensOn === "Hover" && !Browser.isDevice) {
            EventHandler.remove(target, "mouseleave", this.onMouseOut);
          }
        }
        if (this.closeDelay) {
          EventHandler.remove(target, "mouseenter", this.tooltipHover);
          EventHandler.remove(target, "mouseleave", this.tooltipMouseOut);
        }
      }
      if (this.mouseTrail) {
        EventHandler.remove(target, "mousemove touchstart mouseenter", this.onMouseMove);
      }
    };
    Tooltip2.prototype.findTarget = function() {
      var target = select$1('[data-tooltip-id= "' + this.ctrlId + '_content"]', document);
      return target;
    };
    Tooltip2.prototype.getModuleName = function() {
      return "tooltip";
    };
    Tooltip2.prototype.getPersistData = function() {
      return this.addOnPersist([]);
    };
    Tooltip2.prototype.onPropertyChanged = function(newProp, oldProp) {
      var targetElement2 = this.findTarget();
      for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {
        var prop = _a[_i];
        switch (prop) {
          case "width":
            if (this.tooltipEle && targetElement2) {
              this.tooltipEle.style.width = this.tooltipEle.style.maxWidth = formatUnit(newProp.width);
              this.reposition(targetElement2);
            }
            break;
          case "height":
            if (this.tooltipEle && targetElement2) {
              this.tooltipEle.style.height = formatUnit(newProp.height);
              this.reposition(targetElement2);
            }
            break;
          case "content":
            if (this.tooltipEle) {
              this.renderContent();
            }
            break;
          case "opensOn":
            this.unwireEvents(oldProp.opensOn);
            this.wireEvents(newProp.opensOn);
            break;
          case "position":
            this.formatPosition();
            if (this.tooltipEle && targetElement2) {
              var arrowInnerELe = select$1("." + ARROW_TIP_INNER, this.tooltipEle);
              arrowInnerELe.style.top = arrowInnerELe.style.left = null;
              this.reposition(targetElement2);
            }
            break;
          case "tipPointerPosition":
            if (this.tooltipEle && targetElement2) {
              this.reposition(targetElement2);
            }
            break;
          case "offsetX":
            if (this.tooltipEle) {
              var x = newProp.offsetX - oldProp.offsetX;
              this.tooltipEle.style.left = (parseInt(this.tooltipEle.style.left, 10) + x).toString() + "px";
            }
            break;
          case "offsetY":
            if (this.tooltipEle) {
              var y = newProp.offsetY - oldProp.offsetY;
              this.tooltipEle.style.top = (parseInt(this.tooltipEle.style.top, 10) + y).toString() + "px";
            }
            break;
          case "cssClass":
            if (this.tooltipEle) {
              if (oldProp.cssClass) {
                removeClass([this.tooltipEle], oldProp.cssClass.split(" "));
              }
              if (newProp.cssClass) {
                addClass([this.tooltipEle], newProp.cssClass.split(" "));
              }
            }
            break;
          case "enableRtl":
            if (this.tooltipEle) {
              if (this.enableRtl) {
                addClass([this.tooltipEle], RTL$6);
              } else {
                removeClass([this.tooltipEle], RTL$6);
              }
            }
            break;
          case "container":
            if (!isNullOrUndefined(this.containerElement)) {
              removeClass([this.containerElement], POPUP_CONTAINER);
            }
            this.container = newProp.container;
            if (this.tooltipEle && targetElement2) {
              this.appendContainer(this);
              this.reposition(targetElement2);
            }
        }
      }
    };
    Tooltip2.prototype.open = function(element2, animation) {
      if (isNullOrUndefined(animation)) {
        animation = this.animation.open;
      }
      if (isNullOrUndefined(element2)) {
        element2 = this.element;
      }
      if (element2.style.display === "none") {
        return;
      }
      this.showTooltip(element2, animation);
    };
    Tooltip2.prototype.close = function(animation) {
      if (!animation) {
        animation = this.animation.close;
      }
      this.hideTooltip(animation);
    };
    Tooltip2.prototype.refresh = function(target) {
      if (this.tooltipEle) {
        this.renderContent(target);
      }
      if (this.popupObj && target) {
        this.reposition(target);
      }
    };
    Tooltip2.prototype.destroy = function() {
      _super.prototype.destroy.call(this);
      if (this.tooltipEle) {
        remove(this.tooltipEle);
      }
      if (this.popupObj) {
        this.popupObj.destroy();
      }
      removeClass([this.element], ROOT$8);
      this.unwireEvents(this.opensOn);
      this.unwireMouseEvents(this.element);
      this.tooltipEle = null;
      this.popupObj = null;
      var currentTarget = selectAll('[data-tooltip-id= "' + this.ctrlId + '_content"]', this.element);
      for (var _i = 0, currentTarget_1 = currentTarget; _i < currentTarget_1.length; _i++) {
        var target = currentTarget_1[_i];
        this.restoreElement(target);
      }
    };
    __decorate$E([
      Property("auto")
    ], Tooltip2.prototype, "width", void 0);
    __decorate$E([
      Property("auto")
    ], Tooltip2.prototype, "height", void 0);
    __decorate$E([
      Property()
    ], Tooltip2.prototype, "content", void 0);
    __decorate$E([
      Property("body")
    ], Tooltip2.prototype, "container", void 0);
    __decorate$E([
      Property()
    ], Tooltip2.prototype, "target", void 0);
    __decorate$E([
      Property("TopCenter")
    ], Tooltip2.prototype, "position", void 0);
    __decorate$E([
      Property(0)
    ], Tooltip2.prototype, "offsetX", void 0);
    __decorate$E([
      Property(0)
    ], Tooltip2.prototype, "offsetY", void 0);
    __decorate$E([
      Property(true)
    ], Tooltip2.prototype, "showTipPointer", void 0);
    __decorate$E([
      Property(true)
    ], Tooltip2.prototype, "enableHtmlParse", void 0);
    __decorate$E([
      Property(false)
    ], Tooltip2.prototype, "windowCollision", void 0);
    __decorate$E([
      Property("Auto")
    ], Tooltip2.prototype, "tipPointerPosition", void 0);
    __decorate$E([
      Property("Auto")
    ], Tooltip2.prototype, "opensOn", void 0);
    __decorate$E([
      Property(false)
    ], Tooltip2.prototype, "mouseTrail", void 0);
    __decorate$E([
      Property(false)
    ], Tooltip2.prototype, "isSticky", void 0);
    __decorate$E([
      Complex({}, Animation)
    ], Tooltip2.prototype, "animation", void 0);
    __decorate$E([
      Property(0)
    ], Tooltip2.prototype, "openDelay", void 0);
    __decorate$E([
      Property(0)
    ], Tooltip2.prototype, "closeDelay", void 0);
    __decorate$E([
      Property()
    ], Tooltip2.prototype, "cssClass", void 0);
    __decorate$E([
      Property(false)
    ], Tooltip2.prototype, "enableHtmlSanitizer", void 0);
    __decorate$E([
      Property("")
    ], Tooltip2.prototype, "htmlAttributes", void 0);
    __decorate$E([
      Event$1()
    ], Tooltip2.prototype, "beforeRender", void 0);
    __decorate$E([
      Event$1()
    ], Tooltip2.prototype, "beforeOpen", void 0);
    __decorate$E([
      Event$1()
    ], Tooltip2.prototype, "afterOpen", void 0);
    __decorate$E([
      Event$1()
    ], Tooltip2.prototype, "beforeClose", void 0);
    __decorate$E([
      Event$1()
    ], Tooltip2.prototype, "afterClose", void 0);
    __decorate$E([
      Event$1()
    ], Tooltip2.prototype, "beforeCollision", void 0);
    __decorate$E([
      Event$1()
    ], Tooltip2.prototype, "created", void 0);
    __decorate$E([
      Event$1()
    ], Tooltip2.prototype, "destroyed", void 0);
    Tooltip2 = __decorate$E([
      NotifyPropertyChanges
    ], Tooltip2);
    return Tooltip2;
  }(Component)
);
var globalTimeOut = {};
var DEFT_MAT_WIDTH = 30;
var DEFT_MAT3_WIDTH = 30;
var DEFT_FAB_WIDTH = 30;
var DEFT_FLUENT_WIDTH = 30;
var DEFT_BOOT_WIDTH = 30;
var DEFT_BOOT4_WIDTH = 36;
var DEFT_BOOT5_WIDTH = 36;
var CLS_SHOWSPIN = "e-spin-show";
var CLS_HIDESPIN = "e-spin-hide";
var CLS_MATERIALSPIN = "e-spin-material";
var CLS_MATERIAL3SPIN = "e-spin-material3";
var CLS_FABRICSPIN = "e-spin-fabric";
var CLS_FLUENTSPIN = "e-spin-fluent";
var CLS_TAILWINDSPIN = "e-spin-tailwind";
var CLS_BOOTSPIN = "e-spin-bootstrap";
var CLS_BOOT4SPIN = "e-spin-bootstrap4";
var CLS_BOOT5SPIN = "e-spin-bootstrap5";
var CLS_HIGHCONTRASTSPIN = "e-spin-high-contrast";
var CLS_SPINWRAP = "e-spinner-pane";
var CLS_SPININWRAP = "e-spinner-inner";
var CLS_SPINCIRCLE = "e-path-circle";
var CLS_SPINARC = "e-path-arc";
var CLS_SPINLABEL = "e-spin-label";
var CLS_SPINTEMPLATE = "e-spin-template";
var spinTemplate = null;
var spinCSSClass = null;
function createSpinner(args, internalCreateElement) {
  if (!args.target) {
    return;
  }
  var radius;
  var makeElement = !isNullOrUndefined(internalCreateElement) ? internalCreateElement : createElement;
  var container = create_spinner_container(args.target, makeElement);
  if (!isNullOrUndefined(args.cssClass)) {
    container.wrap.classList.add(args.cssClass);
  }
  if (!isNullOrUndefined(args.template) || !isNullOrUndefined(spinTemplate)) {
    var template = !isNullOrUndefined(args.template) ? args.template : spinTemplate;
    container.wrap.classList.add(CLS_SPINTEMPLATE);
    replaceContent(container.wrap, template, spinCSSClass);
  } else {
    var theme = !isNullOrUndefined(args.type) ? args.type : getTheme(container.wrap);
    var width = !isNullOrUndefined(args.width) ? args.width : void 0;
    radius = calculateRadius(width, theme);
    setTheme(theme, container.wrap, radius, makeElement);
    if (!isNullOrUndefined(args.label)) {
      createLabel(container.inner_wrap, args.label, makeElement);
    }
  }
  container.wrap.classList.add(CLS_HIDESPIN);
  container = null;
}
function createLabel(container, label, makeElement) {
  var labelEle = makeElement("div", {});
  labelEle.classList.add(CLS_SPINLABEL);
  labelEle.innerHTML = label;
  container.appendChild(labelEle);
  return labelEle;
}
function createMaterialSpinner(container, radius, makeElement) {
  var uniqueID2 = random_generator();
  globalTimeOut["" + uniqueID2] = { timeOut: 0, type: "Material", radius };
  create_material_element(container, uniqueID2, makeElement, CLS_MATERIALSPIN);
  mat_calculate_attributes(radius, container, "Material", CLS_MATERIALSPIN);
}
function createMaterial3Spinner(container, radius, makeElement) {
  var uniqueID2 = random_generator();
  globalTimeOut["" + uniqueID2] = { timeOut: 0, type: "Material3", radius };
  create_material_element(container, uniqueID2, makeElement, CLS_MATERIAL3SPIN);
  mat_calculate_attributes(radius, container, "Material3", CLS_MATERIAL3SPIN);
}
function createBootstrap4Spinner(container, radius, makeElement) {
  var uniqueID2 = random_generator();
  globalTimeOut["" + uniqueID2] = { timeOut: 0, type: "Bootstrap4", radius };
  create_material_element(container, uniqueID2, makeElement, CLS_BOOT4SPIN);
  mat_calculate_attributes(radius, container, "Bootstrap4", CLS_BOOT4SPIN);
}
function createBootstrap5Spinner(container, radius, makeElement) {
  var uniqueID2 = random_generator();
  globalTimeOut["" + uniqueID2] = { timeOut: 0, type: "Bootstrap5", radius };
  create_material_element(container, uniqueID2, makeElement, CLS_BOOT5SPIN);
  mat_calculate_attributes(radius, container, "Bootstrap5", CLS_BOOT5SPIN);
}
function startMatAnimate(container, uniqueID2, radius) {
  var globalObject = {};
  var timeOutVar = 0;
  globalTimeOut["" + uniqueID2].timeOut = 0;
  globalObject["" + uniqueID2] = globalVariables(uniqueID2, radius, 0, 0);
  var spinnerInfo = { uniqueID: uniqueID2, container, globalInfo: globalObject, timeOutVar };
  animateMaterial(spinnerInfo);
}
function createFabricSpinner(container, radius, makeElement) {
  var uniqueID2 = random_generator();
  globalTimeOut["" + uniqueID2] = { timeOut: 0, type: "Fabric", radius };
  create_fabric_element(container, uniqueID2, CLS_FABRICSPIN);
  fb_calculate_attributes(radius, container, CLS_FABRICSPIN);
}
function createFluentSinner(container, radius, makeElement) {
  var uniqueID2 = random_generator();
  globalTimeOut["" + uniqueID2] = { timeOut: 0, type: "Fluent", radius };
  create_fabric_element(container, uniqueID2, CLS_FLUENTSPIN);
  fb_calculate_attributes(radius, container, CLS_FLUENTSPIN);
}
function createTailwindSpinner(container, radius, makeElement) {
  var uniqueID2 = random_generator();
  globalTimeOut["" + uniqueID2] = { timeOut: 0, type: "Tailwind", radius };
  create_fabric_element(container, uniqueID2, CLS_TAILWINDSPIN);
  fb_calculate_attributes(radius, container, CLS_TAILWINDSPIN);
}
function createHighContrastSpinner(container, radius, makeElement) {
  var uniqueID2 = random_generator();
  globalTimeOut["" + uniqueID2] = { timeOut: 0, type: "HighContrast", radius };
  create_fabric_element(container, uniqueID2, CLS_HIGHCONTRASTSPIN);
  fb_calculate_attributes(radius, container, CLS_HIGHCONTRASTSPIN);
}
function getTheme(container) {
  var theme = window.getComputedStyle(container, ":after").getPropertyValue("content");
  return theme.replace(/['"]+/g, "");
}
function setTheme(theme, container, radius, makeElement) {
  var innerContainer = container.querySelector("." + CLS_SPININWRAP);
  var svg = innerContainer.querySelector("svg");
  if (!isNullOrUndefined(svg)) {
    innerContainer.removeChild(svg);
  }
  switch (theme) {
    case "Material":
      createMaterialSpinner(innerContainer, radius, makeElement);
      break;
    case "Material3":
      createMaterial3Spinner(innerContainer, radius, makeElement);
      break;
    case "Fabric":
      createFabricSpinner(innerContainer, radius);
      break;
    case "Fluent":
      createFluentSinner(innerContainer, radius);
      break;
    case "Bootstrap":
      createBootstrapSpinner(innerContainer, radius);
      break;
    case "HighContrast":
      createHighContrastSpinner(innerContainer, radius);
      break;
    case "Bootstrap4":
      createBootstrap4Spinner(innerContainer, radius, makeElement);
      break;
    case "Bootstrap5":
      createBootstrap5Spinner(innerContainer, radius, makeElement);
      break;
    case "Tailwind":
    case "Tailwind-dark":
      createTailwindSpinner(innerContainer, radius);
      break;
  }
}
function createBootstrapSpinner(innerContainer, radius, makeElement) {
  var uniqueID2 = random_generator();
  globalTimeOut["" + uniqueID2] = { timeOut: 0, type: "Bootstrap", radius };
  create_bootstrap_element(innerContainer, uniqueID2);
  boot_calculate_attributes(innerContainer, radius);
}
function create_bootstrap_element(innerContainer, uniqueID2, makeElement) {
  var svgBoot = document.createElementNS("http://www.w3.org/2000/svg", "svg");
  var viewBoxValue = 64;
  var trans = 32;
  var defaultRadius = 2;
  svgBoot.setAttribute("id", uniqueID2);
  svgBoot.setAttribute("class", CLS_BOOTSPIN);
  svgBoot.setAttribute("viewBox", "0 0 " + viewBoxValue + " " + viewBoxValue);
  innerContainer.insertBefore(svgBoot, innerContainer.firstChild);
  for (var item = 0; item <= 7; item++) {
    var bootCircle = document.createElementNS("http://www.w3.org/2000/svg", "circle");
    bootCircle.setAttribute("class", CLS_SPINCIRCLE + "_" + item);
    bootCircle.setAttribute("r", defaultRadius + "");
    bootCircle.setAttribute("transform", "translate(" + trans + "," + trans + ")");
    svgBoot.appendChild(bootCircle);
  }
}
function boot_calculate_attributes(innerContainer, radius) {
  var svg = innerContainer.querySelector("svg.e-spin-bootstrap");
  var x = 0;
  var y = 0;
  var rad = 24;
  svg.style.width = svg.style.height = radius + "px";
  var startArc = 90;
  for (var item = 0; item <= 7; item++) {
    var start = defineArcPoints(x, y, rad, startArc);
    var circleEle = svg.querySelector("." + CLS_SPINCIRCLE + "_" + item);
    circleEle.setAttribute("cx", start.x + "");
    circleEle.setAttribute("cy", start.y + "");
    startArc = startArc >= 360 ? 0 : startArc;
    startArc = startArc + 45;
  }
}
function generateSeries(begin, stop2) {
  var series = [];
  var start = begin;
  var end = stop2;
  var increment = false, count = 1;
  formSeries(start);
  function formSeries(i) {
    series.push(i);
    if (i !== end || count === 1) {
      if (i <= start && i > 1 && !increment) {
        i = parseFloat((i - 0.2).toFixed(2));
      } else if (i === 1) {
        i = 7;
        i = parseFloat((i + 0.2).toFixed(2));
        increment = true;
      } else if (i < 8 && increment) {
        i = parseFloat((i + 0.2).toFixed(2));
        if (i === 8) {
          increment = false;
        }
      } else if (i <= 8 && !increment) {
        i = parseFloat((i - 0.2).toFixed(2));
      }
      ++count;
      formSeries(i);
    }
  }
  return series;
}
function animateBootstrap(innerContainer) {
  var svg = innerContainer.querySelector("svg.e-spin-bootstrap");
  var id = svg.getAttribute("id");
  for (var i = 1; i <= 8; i++) {
    var circleEle = innerContainer.getElementsByClassName("e-path-circle_" + (i === 8 ? 0 : i))[0];
    rotation(circleEle, i, i, generateSeries(i, i), id);
  }
  function rotation(circle, start, end, series, id2) {
    var count = 0;
    boot_animate(start);
    function boot_animate(radius) {
      if (globalTimeOut["" + id2].isAnimate) {
        ++count;
        circle.setAttribute("r", radius + "");
        if (count >= series.length) {
          count = 0;
        }
        globalTimeOut[id2].timeOut = setTimeout(boot_animate.bind(null, series[count]), 18);
      }
    }
  }
}
function replaceContent(container, template, cssClass2) {
  if (!isNullOrUndefined(cssClass2)) {
    container.classList.add(cssClass2);
  }
  var inner = container.querySelector(".e-spinner-inner");
  inner.innerHTML = template;
}
function calculateRadius(width, theme) {
  var defaultSize;
  switch (theme) {
    case "Material":
      defaultSize = DEFT_MAT_WIDTH;
      break;
    case "Material3":
      defaultSize = DEFT_MAT3_WIDTH;
      break;
    case "Fabric":
      defaultSize = DEFT_FAB_WIDTH;
      break;
    case "Tailwind":
    case "Tailwind-dark":
      defaultSize = DEFT_FAB_WIDTH;
      break;
    case "Fluent":
      defaultSize = DEFT_FLUENT_WIDTH;
      break;
    case "Bootstrap4":
      defaultSize = DEFT_BOOT4_WIDTH;
      break;
    case "Bootstrap5":
      defaultSize = DEFT_BOOT5_WIDTH;
      break;
    default:
      defaultSize = DEFT_BOOT_WIDTH;
  }
  width = width ? parseFloat(width + "") : defaultSize;
  return theme === "Bootstrap" ? width : width / 2;
}
function globalVariables(id, radius, count, previousId) {
  return {
    radius,
    count,
    previousId
  };
}
function random_generator() {
  var random = "";
  var combine = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
  for (var i = 0; i < 5; i++) {
    random += combine.charAt(Math.floor(Math.random() * combine.length));
  }
  return random;
}
function create_fabric_element(innerCon, uniqueID2, themeClass, makeElement) {
  var svgFabric = document.createElementNS("http://www.w3.org/2000/svg", "svg");
  svgFabric.setAttribute("id", uniqueID2);
  svgFabric.setAttribute("class", themeClass);
  var fabricCirclePath = document.createElementNS("http://www.w3.org/2000/svg", "path");
  fabricCirclePath.setAttribute("class", CLS_SPINCIRCLE);
  var fabricCircleArc = document.createElementNS("http://www.w3.org/2000/svg", "path");
  fabricCircleArc.setAttribute("class", CLS_SPINARC);
  innerCon.insertBefore(svgFabric, innerCon.firstChild);
  svgFabric.appendChild(fabricCirclePath);
  svgFabric.appendChild(fabricCircleArc);
}
function create_material_element(innerContainer, uniqueID2, makeElement, cls) {
  var svgMaterial = document.createElementNS("http://www.w3.org/2000/svg", "svg");
  var matCirclePath = document.createElementNS("http://www.w3.org/2000/svg", "path");
  svgMaterial.setAttribute("class", cls);
  svgMaterial.setAttribute("id", uniqueID2);
  matCirclePath.setAttribute("class", CLS_SPINCIRCLE);
  innerContainer.insertBefore(svgMaterial, innerContainer.firstChild);
  svgMaterial.appendChild(matCirclePath);
}
function create_spinner_container(target, makeElement) {
  var spinnerContainer = makeElement("div", {});
  var spinnerInnerContainer = makeElement("div", {});
  spinnerContainer.classList.add(CLS_SPINWRAP);
  spinnerInnerContainer.classList.add(CLS_SPININWRAP);
  target.appendChild(spinnerContainer);
  spinnerContainer.appendChild(spinnerInnerContainer);
  return { wrap: spinnerContainer, inner_wrap: spinnerInnerContainer };
}
function animateMaterial(spinnerInfo) {
  var start = 1;
  var end = 149;
  var duration = 1333;
  var max = 75;
  createCircle(start, end, easeAnimation, duration, spinnerInfo.globalInfo[spinnerInfo.uniqueID].count, max, spinnerInfo);
  spinnerInfo.globalInfo[spinnerInfo.uniqueID].count = ++spinnerInfo.globalInfo[spinnerInfo.uniqueID].count % 4;
}
function createCircle(start, end, easing, duration, count, max, spinnerInfo) {
  var id = ++spinnerInfo.globalInfo[spinnerInfo.uniqueID].previousId;
  var startTime = (/* @__PURE__ */ new Date()).getTime();
  var change = end - start;
  var diameter = getSize(spinnerInfo.globalInfo[spinnerInfo.uniqueID].radius * 2 + "");
  var strokeSize = getStrokeSize(diameter);
  var rotate2 = -90 * (spinnerInfo.globalInfo[spinnerInfo.uniqueID].count || 0);
  mat_animation(spinnerInfo);
  function mat_animation(spinnerInfo2) {
    var currentTime = Math.max(0, Math.min((/* @__PURE__ */ new Date()).getTime() - startTime, duration));
    updatePath(easing(currentTime, start, change, duration), spinnerInfo2.container);
    if (id === spinnerInfo2.globalInfo[spinnerInfo2.uniqueID].previousId && currentTime < duration) {
      globalTimeOut[spinnerInfo2.uniqueID].timeOut = setTimeout(mat_animation.bind(null, spinnerInfo2), 1);
    } else {
      animateMaterial(spinnerInfo2);
    }
  }
  function updatePath(value, container) {
    if (!isNullOrUndefined(container.querySelector("svg.e-spin-material")) || !isNullOrUndefined(container.querySelector("svg.e-spin-material3"))) {
      var svg = void 0;
      if (!isNullOrUndefined(container.querySelector("svg.e-spin-material")) && !isNullOrUndefined(container.querySelector("svg.e-spin-material").querySelector("path.e-path-circle"))) {
        svg = container.querySelector("svg.e-spin-material");
      } else if (!isNullOrUndefined(container.querySelector("svg.e-spin-material3")) && !isNullOrUndefined(container.querySelector("svg.e-spin-material3").querySelector("path.e-path-circle"))) {
        svg = container.querySelector("svg.e-spin-material3");
      }
      if (!isNullOrUndefined(svg)) {
        var path = svg.querySelector("path.e-path-circle");
        path.setAttribute("stroke-dashoffset", getDashOffset(diameter, strokeSize, value, max) + "");
        path.setAttribute("transform", "rotate(" + rotate2 + " " + diameter / 2 + " " + diameter / 2 + ")");
      }
    }
  }
}
function mat_calculate_attributes(radius, container, type, cls) {
  var diameter = radius * 2;
  var svg = container.querySelector("svg." + cls);
  var path = svg.querySelector("path.e-path-circle");
  var strokeSize = getStrokeSize(diameter);
  var transformOrigin = diameter / 2 + "px";
  svg.setAttribute("viewBox", "0 0 " + diameter + " " + diameter);
  svg.style.width = svg.style.height = diameter + "px";
  svg.style.transformOrigin = transformOrigin + " " + transformOrigin + " " + transformOrigin;
  path.setAttribute("d", drawArc(diameter, strokeSize));
  if (type === "Material" || type === "Material3") {
    path.setAttribute("stroke-width", strokeSize + "");
    path.setAttribute("stroke-dasharray", (diameter - strokeSize) * Math.PI * 0.75 + "");
    path.setAttribute("stroke-dashoffset", getDashOffset(diameter, strokeSize, 1, 75) + "");
  }
}
function getSize(value) {
  var parsed = parseFloat(value);
  return parsed;
}
function drawArc(diameter, strokeSize) {
  var radius = diameter / 2;
  var offset = strokeSize / 2;
  return "M" + radius + "," + offset + "A" + (radius - offset) + "," + (radius - offset) + " 0 1 1 " + offset + "," + radius;
}
function getStrokeSize(diameter) {
  return 10 / 100 * diameter;
}
function getDashOffset(diameter, strokeSize, value, max) {
  return (diameter - strokeSize) * Math.PI * (3 * max / 100 - value / 100);
}
function easeAnimation(current, start, change, duration) {
  var timestamp = (current /= duration) * current;
  var timecount = timestamp * current;
  return start + change * (6 * timecount * timestamp + -15 * timestamp * timestamp + 10 * timecount);
}
function fb_calculate_attributes(radius, innerConainer, trgClass) {
  var centerX = radius;
  var centerY = radius;
  var diameter = radius * 2;
  var startArc = 315, endArc = 45;
  var svg = innerConainer.querySelector("." + trgClass);
  var circle = svg.querySelector(".e-path-circle");
  var path = svg.querySelector(".e-path-arc");
  var transformOrigin = diameter / 2 + "px";
  circle.setAttribute("d", defineCircle(centerX, centerY, radius));
  path.setAttribute("d", defineArc(centerX, centerY, radius, startArc, endArc));
  svg.setAttribute("viewBox", "0 0 " + diameter + " " + diameter);
  svg.style.transformOrigin = transformOrigin + " " + transformOrigin + " " + transformOrigin;
  svg.style.width = svg.style.height = diameter + "px";
}
function defineArcPoints(centerX, centerY, radius, angle) {
  var radians = (angle - 90) * Math.PI / 180;
  return {
    x: centerX + radius * Math.cos(radians),
    y: centerY + radius * Math.sin(radians)
  };
}
function defineArc(x, y, radius, startArc, endArc) {
  var start = defineArcPoints(x, y, radius, endArc);
  var end = defineArcPoints(x, y, radius, startArc);
  var d = [
    "M",
    start.x,
    start.y,
    "A",
    radius,
    radius,
    0,
    0,
    0,
    end.x,
    end.y
  ].join(" ");
  return d;
}
function defineCircle(x, y, radius) {
  var d = [
    "M",
    x,
    y,
    "m",
    -radius,
    0,
    "a",
    radius,
    radius,
    0,
    1,
    0,
    radius * 2,
    0,
    "a",
    radius,
    radius,
    0,
    1,
    0,
    -radius * 2,
    0
  ].join(" ");
  return d;
}
function showSpinner(container) {
  showHideSpinner(container, false);
  container = null;
}
function showHideSpinner(container, isHide) {
  var spinnerWrap;
  if (container) {
    if (container.classList.contains(CLS_SPINWRAP)) {
      spinnerWrap = container;
    } else {
      var spinWrapCollection = void 0;
      spinWrapCollection = container.querySelectorAll("." + CLS_SPINWRAP);
      spinnerWrap = Array.from(spinWrapCollection).find(function(wrap) {
        return wrap.parentElement === container;
      }) || null;
    }
  }
  if (container && spinnerWrap) {
    var inner = spinnerWrap.querySelector("." + CLS_SPININWRAP);
    var spinCheck = void 0;
    spinCheck = isHide ? !spinnerWrap.classList.contains(CLS_SPINTEMPLATE) && !spinnerWrap.classList.contains(CLS_HIDESPIN) : !spinnerWrap.classList.contains(CLS_SPINTEMPLATE) && !spinnerWrap.classList.contains(CLS_SHOWSPIN);
    if (spinCheck) {
      var svgEle = spinnerWrap.querySelector("svg");
      if (isNullOrUndefined(svgEle)) {
        return;
      }
      var id = svgEle.getAttribute("id");
      globalTimeOut["" + id].isAnimate = !isHide;
      switch (globalTimeOut["" + id].type) {
        case "Material":
        case "Material3":
          isHide ? clearTimeout(globalTimeOut[id].timeOut) : startMatAnimate(inner, id, globalTimeOut[id].radius);
          break;
        case "Bootstrap":
          isHide ? clearTimeout(globalTimeOut[id].timeOut) : animateBootstrap(inner);
          break;
      }
    }
    isHide ? classList(spinnerWrap, [CLS_HIDESPIN], [CLS_SHOWSPIN]) : classList(spinnerWrap, [CLS_SHOWSPIN], [CLS_HIDESPIN]);
    container = null;
  }
}
function hideSpinner(container) {
  showHideSpinner(container, true);
  container = null;
}
var Query = (
  /** @class */
  function() {
    function Query2(from) {
      this.subQuery = null;
      this.isChild = false;
      this.distincts = [];
      this.queries = [];
      this.key = "";
      this.fKey = "";
      if (typeof from === "string") {
        this.fromTable = from;
      } else if (from && from instanceof Array) {
        this.lookups = from;
      }
      this.expands = [];
      this.sortedColumns = [];
      this.groupedColumns = [];
      this.subQuery = null;
      this.isChild = false;
      this.params = [];
      this.lazyLoad = [];
      return this;
    }
    Query2.prototype.setKey = function(field) {
      this.key = field;
      return this;
    };
    Query2.prototype.using = function(dataManager) {
      this.dataManager = dataManager;
      return this;
    };
    Query2.prototype.execute = function(dataManager, done, fail, always) {
      dataManager = dataManager || this.dataManager;
      if (dataManager) {
        return dataManager.executeQuery(this, done, fail, always);
      }
      return DataUtil.throwError('Query - execute() : dataManager needs to be is set using "using" function or should be passed as argument');
    };
    Query2.prototype.executeLocal = function(dataManager) {
      dataManager = dataManager || this.dataManager;
      if (dataManager) {
        return dataManager.executeLocal(this);
      }
      return DataUtil.throwError('Query - executeLocal() : dataManager needs to be is set using "using" function or should be passed as argument');
    };
    Query2.prototype.clone = function() {
      var cloned = new Query2();
      cloned.queries = this.queries.slice(0);
      cloned.key = this.key;
      cloned.isChild = this.isChild;
      cloned.dataManager = this.dataManager;
      cloned.fromTable = this.fromTable;
      cloned.params = this.params.slice(0);
      cloned.expands = this.expands.slice(0);
      cloned.sortedColumns = this.sortedColumns.slice(0);
      cloned.groupedColumns = this.groupedColumns.slice(0);
      cloned.subQuerySelector = this.subQuerySelector;
      cloned.subQuery = this.subQuery;
      cloned.fKey = this.fKey;
      cloned.isCountRequired = this.isCountRequired;
      cloned.distincts = this.distincts.slice(0);
      cloned.lazyLoad = this.lazyLoad.slice(0);
      return cloned;
    };
    Query2.prototype.from = function(tableName) {
      this.fromTable = tableName;
      return this;
    };
    Query2.prototype.addParams = function(key, value) {
      if (typeof value === "function") {
        this.params.push({ key, fn: value });
      } else {
        this.params.push({ key, value });
      }
      return this;
    };
    Query2.prototype.distinct = function(fields) {
      if (typeof fields === "string") {
        this.distincts = [].slice.call([fields], 0);
      } else {
        this.distincts = fields.slice(0);
      }
      return this;
    };
    Query2.prototype.expand = function(tables) {
      if (typeof tables === "string") {
        this.expands = [].slice.call([tables], 0);
      } else {
        this.expands = tables.slice(0);
      }
      return this;
    };
    Query2.prototype.where = function(fieldName, operator, value, ignoreCase, ignoreAccent, matchCase) {
      operator = operator ? operator.toLowerCase() : null;
      var predicate = null;
      if (typeof fieldName === "string") {
        predicate = new Predicate(fieldName, operator, value, ignoreCase, ignoreAccent, matchCase);
      } else if (fieldName instanceof Predicate) {
        predicate = fieldName;
      }
      this.queries.push({
        fn: "onWhere",
        e: predicate
      });
      return this;
    };
    Query2.prototype.search = function(searchKey, fieldNames, operator, ignoreCase, ignoreAccent) {
      if (typeof fieldNames === "string") {
        fieldNames = [fieldNames];
      }
      if (!operator || operator === "none") {
        operator = "contains";
      }
      var comparer = DataUtil.fnOperators[operator];
      this.queries.push({
        fn: "onSearch",
        e: {
          fieldNames,
          operator,
          searchKey,
          ignoreCase,
          ignoreAccent,
          comparer
        }
      });
      return this;
    };
    Query2.prototype.sortBy = function(fieldName, comparer, isFromGroup) {
      return this.sortByForeignKey(fieldName, comparer, isFromGroup);
    };
    Query2.prototype.sortByForeignKey = function(fieldName, comparer, isFromGroup, direction) {
      var order = !isNullOrUndefined(direction) ? direction : "ascending";
      var sorts;
      var temp;
      if (typeof fieldName === "string" && DataUtil.endsWith(fieldName.toLowerCase(), " desc")) {
        fieldName = fieldName.replace(/ desc$/i, "");
        comparer = "descending";
      }
      if (!comparer || typeof comparer === "string") {
        order = comparer ? comparer.toLowerCase() : "ascending";
        comparer = DataUtil.fnSort(comparer);
      }
      if (isFromGroup) {
        sorts = Query2.filterQueries(this.queries, "onSortBy");
        for (var i = 0; i < sorts.length; i++) {
          temp = sorts[i].e.fieldName;
          if (typeof temp === "string") {
            if (temp === fieldName) {
              return this;
            }
          } else if (temp instanceof Array) {
            for (var j = 0; j < temp.length; j++) {
              if (temp[j] === fieldName || fieldName.toLowerCase() === temp[j] + " desc") {
                return this;
              }
            }
          }
        }
      }
      this.queries.push({
        fn: "onSortBy",
        e: {
          fieldName,
          comparer,
          direction: order
        }
      });
      return this;
    };
    Query2.prototype.sortByDesc = function(fieldName) {
      return this.sortBy(fieldName, "descending");
    };
    Query2.prototype.group = function(fieldName, fn, format) {
      this.sortBy(fieldName, null, true);
      this.queries.push({
        fn: "onGroup",
        e: {
          fieldName,
          comparer: fn ? fn : null,
          format: format ? format : null
        }
      });
      return this;
    };
    Query2.prototype.page = function(pageIndex, pageSize) {
      this.queries.push({
        fn: "onPage",
        e: {
          pageIndex,
          pageSize
        }
      });
      return this;
    };
    Query2.prototype.range = function(start, end) {
      this.queries.push({
        fn: "onRange",
        e: {
          start,
          end
        }
      });
      return this;
    };
    Query2.prototype.take = function(nos) {
      this.queries.push({
        fn: "onTake",
        e: {
          nos
        }
      });
      return this;
    };
    Query2.prototype.skip = function(nos) {
      this.queries.push({
        fn: "onSkip",
        e: { nos }
      });
      return this;
    };
    Query2.prototype.select = function(fieldNames) {
      if (typeof fieldNames === "string") {
        fieldNames = [].slice.call([fieldNames], 0);
      }
      this.queries.push({
        fn: "onSelect",
        e: { fieldNames }
      });
      return this;
    };
    Query2.prototype.hierarchy = function(query, selectorFn) {
      this.subQuerySelector = selectorFn;
      this.subQuery = query;
      return this;
    };
    Query2.prototype.foreignKey = function(key) {
      this.fKey = key;
      return this;
    };
    Query2.prototype.requiresCount = function() {
      this.isCountRequired = true;
      return this;
    };
    Query2.prototype.aggregate = function(type, field) {
      this.queries.push({
        fn: "onAggregates",
        e: { field, type }
      });
      return this;
    };
    Query2.filterQueries = function(queries, name) {
      return queries.filter(function(q) {
        return q.fn === name;
      });
    };
    Query2.filterQueryLists = function(queries, singles) {
      var filtered = queries.filter(function(q) {
        return singles.indexOf(q.fn) !== -1;
      });
      var res = {};
      for (var i = 0; i < filtered.length; i++) {
        if (!res[filtered[i].fn]) {
          res[filtered[i].fn] = filtered[i].e;
        }
      }
      return res;
    };
    return Query2;
  }()
);
var Predicate = (
  /** @class */
  function() {
    function Predicate2(field, operator, value, ignoreCase, ignoreAccent, matchCase) {
      if (ignoreCase === void 0) {
        ignoreCase = false;
      }
      this.ignoreAccent = false;
      this.isComplex = false;
      if (typeof field === "string") {
        this.field = field;
        this.operator = operator.toLowerCase();
        this.value = value;
        this.matchCase = matchCase;
        this.ignoreCase = ignoreCase;
        this.ignoreAccent = ignoreAccent;
        this.isComplex = false;
        this.comparer = DataUtil.fnOperators.processOperator(this.operator);
      } else if (field instanceof Predicate2 && value instanceof Predicate2 || value instanceof Array) {
        this.isComplex = true;
        this.condition = operator.toLowerCase();
        this.predicates = [field];
        this.matchCase = field.matchCase;
        this.ignoreCase = field.ignoreCase;
        this.ignoreAccent = field.ignoreAccent;
        if (value instanceof Array) {
          [].push.apply(this.predicates, value);
        } else {
          this.predicates.push(value);
        }
      }
      return this;
    }
    Predicate2.and = function() {
      var args = [];
      for (var _i = 0; _i < arguments.length; _i++) {
        args[_i] = arguments[_i];
      }
      return Predicate2.combinePredicates([].slice.call(args, 0), "and");
    };
    Predicate2.prototype.and = function(field, operator, value, ignoreCase, ignoreAccent) {
      return Predicate2.combine(this, field, operator, value, "and", ignoreCase, ignoreAccent);
    };
    Predicate2.or = function() {
      var args = [];
      for (var _i = 0; _i < arguments.length; _i++) {
        args[_i] = arguments[_i];
      }
      return Predicate2.combinePredicates([].slice.call(args, 0), "or");
    };
    Predicate2.prototype.or = function(field, operator, value, ignoreCase, ignoreAccent) {
      return Predicate2.combine(this, field, operator, value, "or", ignoreCase, ignoreAccent);
    };
    Predicate2.ornot = function() {
      var args = [];
      for (var _i = 0; _i < arguments.length; _i++) {
        args[_i] = arguments[_i];
      }
      return Predicate2.combinePredicates([].slice.call(args, 0), "or not");
    };
    Predicate2.prototype.ornot = function(field, operator, value, ignoreCase, ignoreAccent) {
      return Predicate2.combine(this, field, operator, value, "ornot", ignoreCase, ignoreAccent);
    };
    Predicate2.andnot = function() {
      var args = [];
      for (var _i = 0; _i < arguments.length; _i++) {
        args[_i] = arguments[_i];
      }
      return Predicate2.combinePredicates([].slice.call(args, 0), "and not");
    };
    Predicate2.prototype.andnot = function(field, operator, value, ignoreCase, ignoreAccent) {
      return Predicate2.combine(this, field, operator, value, "andnot", ignoreCase, ignoreAccent);
    };
    Predicate2.fromJson = function(json) {
      if (json instanceof Array) {
        var res = [];
        for (var i = 0, len = json.length; i < len; i++) {
          res.push(this.fromJSONData(json[i]));
        }
        return res;
      }
      var pred = json;
      return this.fromJSONData(pred);
    };
    Predicate2.prototype.validate = function(record) {
      var predicate = this.predicates ? this.predicates : [];
      var ret;
      var isAnd;
      if (!this.isComplex && this.comparer) {
        if (this.condition && this.condition.indexOf("not") !== -1) {
          this.condition = this.condition.split("not")[0] === "" ? void 0 : this.condition.split("not")[0];
          return !this.comparer.call(this, DataUtil.getObject(this.field, record), this.value, this.ignoreCase, this.ignoreAccent);
        } else {
          return this.comparer.call(this, DataUtil.getObject(this.field, record), this.value, this.ignoreCase, this.ignoreAccent);
        }
      }
      if (this.condition && this.condition.indexOf("not") !== -1) {
        isAnd = this.condition.indexOf("and") !== -1;
      } else {
        isAnd = this.condition === "and";
      }
      for (var i = 0; i < predicate.length; i++) {
        if (i > 0 && this.condition && this.condition.indexOf("not") !== -1) {
          predicate[i].condition = predicate[i].condition ? predicate[i].condition + "not" : "not";
        }
        ret = predicate[i].validate(record);
        if (isAnd) {
          if (!ret) {
            return false;
          }
        } else {
          if (ret) {
            return true;
          }
        }
      }
      return isAnd;
    };
    Predicate2.prototype.toJson = function() {
      var predicates2;
      var p2;
      if (this.isComplex) {
        predicates2 = [];
        p2 = this.predicates;
        for (var i = 0; i < p2.length; i++) {
          predicates2.push(p2[i].toJson());
        }
      }
      return {
        isComplex: this.isComplex,
        field: this.field,
        operator: this.operator,
        value: this.value,
        ignoreCase: this.ignoreCase,
        ignoreAccent: this.ignoreAccent,
        condition: this.condition,
        predicates: predicates2,
        matchCase: this.matchCase
      };
    };
    Predicate2.combinePredicates = function(predicates2, operator) {
      if (predicates2.length === 1) {
        if (!(predicates2[0] instanceof Array)) {
          return predicates2[0];
        }
        predicates2 = predicates2[0];
      }
      return new Predicate2(predicates2[0], operator, predicates2.slice(1));
    };
    Predicate2.combine = function(pred, field, operator, value, condition, ignoreCase, ignoreAccent) {
      if (field instanceof Predicate2) {
        return Predicate2[condition](pred, field);
      }
      if (typeof field === "string") {
        return Predicate2[condition](pred, new Predicate2(field, operator, value, ignoreCase, ignoreAccent));
      }
      return DataUtil.throwError("Predicate - " + condition + " : invalid arguments");
    };
    Predicate2.fromJSONData = function(json) {
      var preds = json.predicates || [];
      var len = preds.length;
      var predicates2 = [];
      var result;
      for (var i = 0; i < len; i++) {
        predicates2.push(this.fromJSONData(preds[i]));
      }
      if (!json.isComplex) {
        result = new Predicate2(json.field, json.operator, json.value, json.ignoreCase, json.ignoreAccent);
      } else {
        result = new Predicate2(predicates2[0], json.condition, predicates2.slice(1));
      }
      return result;
    };
    return Predicate2;
  }()
);
var consts$1 = { GroupGuid: "{271bbba0-1ee7}" };
var DataUtil = (
  /** @class */
  function() {
    function DataUtil2() {
    }
    DataUtil2.getValue = function(value, inst) {
      if (typeof value === "function") {
        return value.call(inst || {});
      }
      return value;
    };
    DataUtil2.endsWith = function(input, substr) {
      return input.slice && input.slice(-substr.length) === substr;
    };
    DataUtil2.notEndsWith = function(input, substr) {
      return input.slice && input.slice(-substr.length) !== substr;
    };
    DataUtil2.startsWith = function(input, start) {
      return input.slice(0, start.length) === start;
    };
    DataUtil2.notStartsWith = function(input, start) {
      return input.slice(0, start.length) !== start;
    };
    DataUtil2.wildCard = function(input, pattern) {
      var asteriskSplit;
      var optionalSplit;
      if (pattern.indexOf("*") !== -1) {
        if (pattern.charAt(0) !== "*") {
          pattern = "^" + pattern;
        }
        if (pattern.charAt(pattern.length - 1) !== "*") {
          pattern = pattern + "$";
        }
        asteriskSplit = pattern.split("*");
        for (var i = 0; i < asteriskSplit.length; i++) {
          if (asteriskSplit[i].indexOf(".") === -1) {
            asteriskSplit[i] = asteriskSplit[i] + ".*";
          } else {
            asteriskSplit[i] = asteriskSplit[i] + "*";
          }
        }
        pattern = asteriskSplit.join("");
      }
      if (pattern.indexOf("%3f") !== -1 || pattern.indexOf("?") !== -1) {
        optionalSplit = pattern.indexOf("%3f") !== -1 ? pattern.split("%3f") : pattern.split("?");
        pattern = optionalSplit.join(".");
      }
      var regexPattern = new RegExp(pattern, "g");
      return regexPattern.test(input);
    };
    DataUtil2.like = function(input, pattern) {
      if (pattern.indexOf("%") !== -1) {
        if (pattern.charAt(0) === "%" && pattern.lastIndexOf("%") < 2) {
          pattern = pattern.substring(1, pattern.length);
          return DataUtil2.startsWith(DataUtil2.toLowerCase(input), DataUtil2.toLowerCase(pattern));
        } else if (pattern.charAt(pattern.length - 1) === "%" && pattern.indexOf("%") > pattern.length - 3) {
          pattern = pattern.substring(0, pattern.length - 1);
          return DataUtil2.endsWith(DataUtil2.toLowerCase(input), DataUtil2.toLowerCase(pattern));
        } else if (pattern.lastIndexOf("%") !== pattern.indexOf("%") && pattern.lastIndexOf("%") > pattern.indexOf("%") + 1) {
          pattern = pattern.substring(pattern.indexOf("%") + 1, pattern.lastIndexOf("%"));
          return input.indexOf(pattern) !== -1;
        } else {
          return input.indexOf(pattern) !== -1;
        }
      } else {
        return false;
      }
    };
    DataUtil2.fnSort = function(order) {
      order = order ? DataUtil2.toLowerCase(order) : "ascending";
      if (order === "ascending") {
        return this.fnAscending;
      }
      return this.fnDescending;
    };
    DataUtil2.fnAscending = function(x, y) {
      if (isNullOrUndefined(x) && isNullOrUndefined(y)) {
        return -1;
      }
      if (y === null || y === void 0) {
        return -1;
      }
      if (typeof x === "string") {
        return x.localeCompare(y);
      }
      if (x === null || x === void 0) {
        return 1;
      }
      return x - y;
    };
    DataUtil2.fnDescending = function(x, y) {
      if (isNullOrUndefined(x) && isNullOrUndefined(y)) {
        return -1;
      }
      if (y === null || y === void 0) {
        return 1;
      }
      if (typeof x === "string") {
        return x.localeCompare(y) * -1;
      }
      if (x === null || x === void 0) {
        return -1;
      }
      return y - x;
    };
    DataUtil2.extractFields = function(obj, fields) {
      var newObj = {};
      for (var i = 0; i < fields.length; i++) {
        newObj = this.setValue(fields[i], this.getObject(fields[i], obj), newObj);
      }
      return newObj;
    };
    DataUtil2.select = function(jsonArray, fields) {
      var newData = [];
      for (var i = 0; i < jsonArray.length; i++) {
        newData.push(this.extractFields(jsonArray[i], fields));
      }
      return newData;
    };
    DataUtil2.group = function(jsonArray, field, aggregates, level, groupDs, format, isLazyLoad) {
      level = level || 1;
      var jsonData = jsonArray;
      var guid = "GroupGuid";
      if (jsonData.GroupGuid === consts$1[guid]) {
        var _loop_1 = function(j2) {
          if (!isNullOrUndefined(groupDs)) {
            var indx = -1;
            var temp = groupDs.filter(function(e) {
              return e.key === jsonData[j2].key;
            });
            indx = groupDs.indexOf(temp[0]);
            jsonData[j2].items = this_1.group(jsonData[j2].items, field, aggregates, jsonData.level + 1, groupDs[indx].items, format, isLazyLoad);
            jsonData[j2].count = groupDs[indx].count;
          } else {
            jsonData[j2].items = this_1.group(jsonData[j2].items, field, aggregates, jsonData.level + 1, null, format, isLazyLoad);
            jsonData[j2].count = jsonData[j2].items.length;
          }
        };
        var this_1 = this;
        for (var j = 0; j < jsonData.length; j++) {
          _loop_1(j);
        }
        jsonData.childLevels += 1;
        return jsonData;
      }
      var grouped = {};
      var groupedArray = [];
      groupedArray.GroupGuid = consts$1[guid];
      groupedArray.level = level;
      groupedArray.childLevels = 0;
      groupedArray.records = jsonData;
      var _loop_2 = function(i2) {
        var val = this_2.getVal(jsonData, i2, field);
        if (!isNullOrUndefined(format)) {
          val = format(val, field);
        }
        if (!grouped[val]) {
          grouped[val] = {
            key: val,
            count: 0,
            items: [],
            aggregates: {},
            field
          };
          groupedArray.push(grouped[val]);
          if (!isNullOrUndefined(groupDs)) {
            var tempObj = groupDs.filter(function(e) {
              return e.key === grouped[val].key;
            });
            grouped[val].count = tempObj[0].count;
          }
        }
        grouped[val].count = !isNullOrUndefined(groupDs) ? grouped[val].count : grouped[val].count += 1;
        if (!isLazyLoad || isLazyLoad && aggregates.length) {
          grouped[val].items.push(jsonData[i2]);
        }
      };
      var this_2 = this;
      for (var i = 0; i < jsonData.length; i++) {
        _loop_2(i);
      }
      if (aggregates && aggregates.length) {
        var _loop_3 = function(i2) {
          var res = {};
          var fn = void 0;
          var aggs = aggregates;
          for (var j2 = 0; j2 < aggregates.length; j2++) {
            fn = DataUtil2.aggregates[aggregates[j2].type];
            if (!isNullOrUndefined(groupDs)) {
              var temp = groupDs.filter(function(e) {
                return e.key === groupedArray[i2].key;
              });
              if (fn) {
                res[aggs[j2].field + " - " + aggs[j2].type] = fn(temp[0].items, aggs[j2].field);
              }
            } else {
              if (fn) {
                res[aggs[j2].field + " - " + aggs[j2].type] = fn(groupedArray[i2].items, aggs[j2].field);
              }
            }
          }
          groupedArray[i2].aggregates = res;
        };
        for (var i = 0; i < groupedArray.length; i++) {
          _loop_3(i);
        }
      }
      if (isLazyLoad && groupedArray.length && aggregates.length) {
        for (var i = 0; i < groupedArray.length; i++) {
          groupedArray[i].items = [];
        }
      }
      return jsonData.length && groupedArray || jsonData;
    };
    DataUtil2.buildHierarchy = function(fKey, from, source, lookup, pKey) {
      var i;
      var grp = {};
      var temp;
      if (lookup.result) {
        lookup = lookup.result;
      }
      if (lookup.GroupGuid) {
        this.throwError("DataManager: Do not have support Grouping in hierarchy");
      }
      for (i = 0; i < lookup.length; i++) {
        var fKeyData = this.getObject(fKey, lookup[i]);
        temp = grp[fKeyData] || (grp[fKeyData] = []);
        temp.push(lookup[i]);
      }
      for (i = 0; i < source.length; i++) {
        var fKeyData = this.getObject(pKey || fKey, source[i]);
        source[i][from] = grp[fKeyData];
      }
    };
    DataUtil2.getFieldList = function(obj, fields, prefix) {
      if (prefix === void 0) {
        prefix = "";
      }
      if (fields === void 0 || fields === null) {
        return this.getFieldList(obj, [], prefix);
      }
      var copyObj = obj;
      var keys2 = Object.keys(obj);
      for (var _i = 0, keys_1 = keys2; _i < keys_1.length; _i++) {
        var prop = keys_1[_i];
        if (typeof copyObj[prop] === "object" && !(copyObj[prop] instanceof Array)) {
          this.getFieldList(copyObj[prop], fields, prefix + prop + ".");
        } else {
          fields.push(prefix + prop);
        }
      }
      return fields;
    };
    DataUtil2.getObject = function(nameSpace, from) {
      if (!nameSpace) {
        return from;
      }
      if (!from) {
        return void 0;
      }
      if (nameSpace.indexOf(".") === -1) {
        return from[nameSpace];
      }
      var value = from;
      var splits = nameSpace.split(".");
      for (var i = 0; i < splits.length; i++) {
        if (value == null) {
          break;
        }
        value = value[splits[i]];
      }
      return value;
    };
    DataUtil2.setValue = function(nameSpace, value, obj) {
      var keys2 = nameSpace.toString().split(".");
      var start = obj || {};
      var fromObj = start;
      var i;
      var length = keys2.length;
      var key;
      for (i = 0; i < length; i++) {
        key = keys2[i];
        if (i + 1 === length) {
          fromObj[key] = value === void 0 ? void 0 : value;
        } else if (isNullOrUndefined(fromObj[key])) {
          fromObj[key] = {};
        }
        fromObj = fromObj[key];
      }
      return start;
    };
    DataUtil2.sort = function(ds, field, comparer) {
      if (ds.length <= 1) {
        return ds;
      }
      var middle = parseInt((ds.length / 2).toString(), 10);
      var left = ds.slice(0, middle);
      var right = ds.slice(middle);
      left = this.sort(left, field, comparer);
      right = this.sort(right, field, comparer);
      return this.merge(left, right, field, comparer);
    };
    DataUtil2.ignoreDiacritics = function(value) {
      if (typeof value !== "string") {
        return value;
      }
      var result = value.split("");
      var newValue = result.map(function(temp) {
        return temp in DataUtil2.diacritics ? DataUtil2.diacritics[temp] : temp;
      });
      return newValue.join("");
    };
    DataUtil2.merge = function(left, right, fieldName, comparer) {
      var result = [];
      var current;
      while (left.length > 0 || right.length > 0) {
        if (left.length > 0 && right.length > 0) {
          if (comparer) {
            current = comparer(this.getVal(left, 0, fieldName), this.getVal(right, 0, fieldName), left[0], right[0]) <= 0 ? left : right;
          } else {
            current = left[0][fieldName] < left[0][fieldName] ? left : right;
          }
        } else {
          current = left.length > 0 ? left : right;
        }
        result.push(current.shift());
      }
      return result;
    };
    DataUtil2.getVal = function(array, index, field) {
      return field ? this.getObject(field, array[index]) : array[index];
    };
    DataUtil2.toLowerCase = function(val) {
      return val ? typeof val === "string" ? val.toLowerCase() : val.toString() : val === 0 || val === false ? val.toString() : "";
    };
    DataUtil2.callAdaptorFunction = function(adaptor, fnName, param1, param2) {
      if (fnName in adaptor) {
        var res = adaptor[fnName](param1, param2);
        if (!isNullOrUndefined(res)) {
          param1 = res;
        }
      }
      return param1;
    };
    DataUtil2.getAddParams = function(adp, dm, query) {
      var req = {};
      DataUtil2.callAdaptorFunction(adp, "addParams", {
        dm,
        query,
        params: query.params,
        reqParams: req
      });
      return req;
    };
    DataUtil2.isPlainObject = function(obj) {
      return !!obj && obj.constructor === Object;
    };
    DataUtil2.isCors = function() {
      var xhr = null;
      var request = "XMLHttpRequest";
      try {
        xhr = new window[request]();
      } catch (e) {
      }
      return !!xhr && "withCredentials" in xhr;
    };
    DataUtil2.getGuid = function(prefix) {
      var hexs = "0123456789abcdef";
      var rand;
      return (prefix || "") + "00000000-0000-4000-0000-000000000000".replace(/0/g, function(val, i) {
        if ("crypto" in window && "getRandomValues" in crypto) {
          var arr = new Uint8Array(1);
          window.crypto.getRandomValues(arr);
          rand = arr[0] % 16 | 0;
        } else {
          rand = Math.random() * 16 | 0;
        }
        return hexs[i === 19 ? rand & 3 | 8 : rand];
      });
    };
    DataUtil2.isNull = function(val) {
      return val === void 0 || val === null;
    };
    DataUtil2.getItemFromComparer = function(array, field, comparer) {
      var keyVal;
      var current;
      var key;
      var i = 0;
      var castRequired = typeof DataUtil2.getVal(array, 0, field) === "string";
      if (array.length) {
        while (isNullOrUndefined(keyVal) && i < array.length) {
          keyVal = DataUtil2.getVal(array, i, field);
          key = array[i++];
        }
      }
      for (; i < array.length; i++) {
        current = DataUtil2.getVal(array, i, field);
        if (isNullOrUndefined(current)) {
          continue;
        }
        if (castRequired) {
          keyVal = +keyVal;
          current = +current;
        }
        if (comparer(keyVal, current) > 0) {
          keyVal = current;
          key = array[i];
        }
      }
      return key;
    };
    DataUtil2.distinct = function(json, fieldName, requiresCompleteRecord) {
      requiresCompleteRecord = isNullOrUndefined(requiresCompleteRecord) ? false : requiresCompleteRecord;
      var result = [];
      var val;
      var tmp = {};
      json.forEach(function(data, index) {
        val = typeof json[index] === "object" ? DataUtil2.getVal(json, index, fieldName) : json[index];
        if (!(val in tmp)) {
          result.push(!requiresCompleteRecord ? val : json[index]);
          tmp[val] = 1;
        }
      });
      return result;
    };
    DataUtil2.processData = function(dm, records) {
      var query = this.prepareQuery(dm);
      var sampledata = new DataManager(records);
      if (dm.requiresCounts) {
        query.requiresCount();
      }
      var result = sampledata.executeLocal(query);
      var returnValue = {
        result: dm.requiresCounts ? result.result : result,
        count: result.count,
        aggregates: JSON.stringify(result.aggregates)
      };
      return dm.requiresCounts ? returnValue : result;
    };
    DataUtil2.prepareQuery = function(dm) {
      var _this = this;
      var query = new Query();
      if (dm.select) {
        query.select(dm.select);
      }
      if (dm.where) {
        var where = DataUtil2.parse.parseJson(dm.where);
        where.filter(function(pred) {
          if (isNullOrUndefined(pred.condition)) {
            query.where(pred.field, pred.operator, pred.value, pred.ignoreCase, pred.ignoreAccent);
          } else {
            var predicateList = [];
            if (pred.field) {
              predicateList.push(new Predicate(pred.field, pred.operator, pred.value, pred.ignoreCase, pred.ignoreAccent));
            } else {
              predicateList = predicateList.concat(_this.getPredicate(pred.predicates));
            }
            if (pred.condition === "or") {
              query.where(Predicate.or(predicateList));
            } else if (pred.condition === "and") {
              query.where(Predicate.and(predicateList));
            }
          }
        });
      }
      if (dm.search) {
        var search = DataUtil2.parse.parseJson(dm.search);
        search.filter(function(e) {
          return query.search(
            e.key,
            e.fields,
            e["operator"],
            // tslint:disable-next-line:no-string-literal
            e["ignoreCase"],
            e["ignoreAccent"]
          );
        });
      }
      if (dm.aggregates) {
        dm.aggregates.filter(function(e) {
          return query.aggregate(e.type, e.field);
        });
      }
      if (dm.sorted) {
        dm.sorted.filter(function(e) {
          return query.sortBy(e.name, e.direction);
        });
      }
      if (dm.skip) {
        query.skip(dm.skip);
      }
      if (dm.take) {
        query.take(dm.take);
      }
      if (dm.group) {
        dm.group.filter(function(grp) {
          return query.group(grp);
        });
      }
      return query;
    };
    DataUtil2.getPredicate = function(pred) {
      var mainPred = [];
      for (var i = 0; i < pred.length; i++) {
        var e = pred[i];
        if (e.field) {
          mainPred.push(new Predicate(e.field, e.operator, e.value, e.ignoreCase, e.ignoreAccent));
        } else {
          var childPred = [];
          var cpre = this.getPredicate(e.predicates);
          for (var _i = 0, _a = Object.keys(cpre); _i < _a.length; _i++) {
            var prop = _a[_i];
            childPred.push(cpre[prop]);
          }
          mainPred.push(e.condition === "or" ? Predicate.or(childPred) : Predicate.and(childPred));
        }
      }
      return mainPred;
    };
    DataUtil2.serverTimezoneOffset = null;
    DataUtil2.timeZoneHandling = true;
    DataUtil2.throwError = function(error) {
      try {
        throw new Error(error);
      } catch (e) {
        throw e.message + "\n" + e.stack;
      }
    };
    DataUtil2.aggregates = {
      /**
       * Calculate sum of the given field in the data.
       *
       * @param  {Object[]} ds
       * @param  {string} field
       */
      sum: function(ds, field) {
        var result = 0;
        var val;
        var castRequired = typeof DataUtil2.getVal(ds, 0, field) !== "number";
        for (var i = 0; i < ds.length; i++) {
          val = DataUtil2.getVal(ds, i, field);
          if (!isNaN(val) && val !== null) {
            if (castRequired) {
              val = +val;
            }
            result += val;
          }
        }
        return result;
      },
      /**
       * Calculate average value of the given field in the data.
       *
       * @param  {Object[]} ds
       * @param  {string} field
       */
      average: function(ds, field) {
        return DataUtil2.aggregates.sum(ds, field) / ds.length;
      },
      /**
       * Returns the min value of the data based on the field.
       *
       * @param  {Object[]} ds
       * @param  {string|Function} field
       */
      min: function(ds, field) {
        var comparer;
        if (typeof field === "function") {
          comparer = field;
          field = null;
        }
        return DataUtil2.getObject(field, DataUtil2.getItemFromComparer(ds, field, comparer || DataUtil2.fnAscending));
      },
      /**
       * Returns the max value of the data based on the field.
       *
       * @param  {Object[]} ds
       * @param  {string} field
       * @returns number
       */
      max: function(ds, field) {
        var comparer;
        if (typeof field === "function") {
          comparer = field;
          field = null;
        }
        return DataUtil2.getObject(field, DataUtil2.getItemFromComparer(ds, field, comparer || DataUtil2.fnDescending));
      },
      /**
       * Returns the total number of true value present in the data based on the given boolean field name.
       *
       * @param  {Object[]} ds
       * @param  {string} field
       */
      truecount: function(ds, field) {
        return new DataManager(ds).executeLocal(new Query().where(field, "equal", true, true)).length;
      },
      /**
       * Returns the total number of false value present in the data based on the given boolean field name.
       *
       * @param  {Object[]} ds
       * @param  {string} field
       */
      falsecount: function(ds, field) {
        return new DataManager(ds).executeLocal(new Query().where(field, "equal", false, true)).length;
      },
      /**
       * Returns the length of the given data.
       *
       * @param {Object[]} ds
       * @param {string} field?
       * @param field
       * @returns number
       */
      count: function(ds, field) {
        return ds.length;
      }
    };
    DataUtil2.operatorSymbols = {
      "<": "lessthan",
      ">": "greaterthan",
      "<=": "lessthanorequal",
      ">=": "greaterthanorequal",
      "==": "equal",
      "!=": "notequal",
      "*=": "contains",
      "$=": "endswith",
      "^=": "startswith"
    };
    DataUtil2.odBiOperator = {
      "<": " lt ",
      ">": " gt ",
      "<=": " le ",
      ">=": " ge ",
      "==": " eq ",
      "!=": " ne ",
      "lessthan": " lt ",
      "lessthanorequal": " le ",
      "greaterthan": " gt ",
      "greaterthanorequal": " ge ",
      "equal": " eq ",
      "notequal": " ne "
    };
    DataUtil2.odUniOperator = {
      "$=": "endswith",
      "^=": "startswith",
      "*=": "substringof",
      "endswith": "endswith",
      "startswith": "startswith",
      "contains": "substringof",
      "doesnotendwith": "not endswith",
      "doesnotstartwith": "not startswith",
      "doesnotcontain": "not substringof",
      "wildcard": "wildcard",
      "like": "like"
    };
    DataUtil2.odv4UniOperator = {
      "$=": "endswith",
      "^=": "startswith",
      "*=": "contains",
      "endswith": "endswith",
      "startswith": "startswith",
      "contains": "contains",
      "doesnotendwith": "not endswith",
      "doesnotstartwith": "not startswith",
      "doesnotcontain": "not contains",
      "wildcard": "wildcard",
      "like": "like"
    };
    DataUtil2.diacritics = {
      "Ⓐ": "A",
      "Ａ": "A",
      "À": "A",
      "Á": "A",
      "Â": "A",
      "Ầ": "A",
      "Ấ": "A",
      "Ẫ": "A",
      "Ẩ": "A",
      "Ã": "A",
      "Ā": "A",
      "Ă": "A",
      "Ằ": "A",
      "Ắ": "A",
      "Ẵ": "A",
      "Ẳ": "A",
      "Ȧ": "A",
      "Ǡ": "A",
      "Ä": "A",
      "Ǟ": "A",
      "Ả": "A",
      "Å": "A",
      "Ǻ": "A",
      "Ǎ": "A",
      "Ȁ": "A",
      "Ȃ": "A",
      "Ạ": "A",
      "Ậ": "A",
      "Ặ": "A",
      "Ḁ": "A",
      "Ą": "A",
      "Ⱥ": "A",
      "Ɐ": "A",
      "Ꜳ": "AA",
      "Æ": "AE",
      "Ǽ": "AE",
      "Ǣ": "AE",
      "Ꜵ": "AO",
      "Ꜷ": "AU",
      "Ꜹ": "AV",
      "Ꜻ": "AV",
      "Ꜽ": "AY",
      "Ⓑ": "B",
      "Ｂ": "B",
      "Ḃ": "B",
      "Ḅ": "B",
      "Ḇ": "B",
      "Ƀ": "B",
      "Ƃ": "B",
      "Ɓ": "B",
      "Ⓒ": "C",
      "Ｃ": "C",
      "Ć": "C",
      "Ĉ": "C",
      "Ċ": "C",
      "Č": "C",
      "Ç": "C",
      "Ḉ": "C",
      "Ƈ": "C",
      "Ȼ": "C",
      "Ꜿ": "C",
      "Ⓓ": "D",
      "Ｄ": "D",
      "Ḋ": "D",
      "Ď": "D",
      "Ḍ": "D",
      "Ḑ": "D",
      "Ḓ": "D",
      "Ḏ": "D",
      "Đ": "D",
      "Ƌ": "D",
      "Ɗ": "D",
      "Ɖ": "D",
      "Ꝺ": "D",
      "Ǳ": "DZ",
      "Ǆ": "DZ",
      "ǲ": "Dz",
      "ǅ": "Dz",
      "Ⓔ": "E",
      "Ｅ": "E",
      "È": "E",
      "É": "E",
      "Ê": "E",
      "Ề": "E",
      "Ế": "E",
      "Ễ": "E",
      "Ể": "E",
      "Ẽ": "E",
      "Ē": "E",
      "Ḕ": "E",
      "Ḗ": "E",
      "Ĕ": "E",
      "Ė": "E",
      "Ë": "E",
      "Ẻ": "E",
      "Ě": "E",
      "Ȅ": "E",
      "Ȇ": "E",
      "Ẹ": "E",
      "Ệ": "E",
      "Ȩ": "E",
      "Ḝ": "E",
      "Ę": "E",
      "Ḙ": "E",
      "Ḛ": "E",
      "Ɛ": "E",
      "Ǝ": "E",
      "Ⓕ": "F",
      "Ｆ": "F",
      "Ḟ": "F",
      "Ƒ": "F",
      "Ꝼ": "F",
      "Ⓖ": "G",
      "Ｇ": "G",
      "Ǵ": "G",
      "Ĝ": "G",
      "Ḡ": "G",
      "Ğ": "G",
      "Ġ": "G",
      "Ǧ": "G",
      "Ģ": "G",
      "Ǥ": "G",
      "Ɠ": "G",
      "Ꞡ": "G",
      "Ᵹ": "G",
      "Ꝿ": "G",
      "Ⓗ": "H",
      "Ｈ": "H",
      "Ĥ": "H",
      "Ḣ": "H",
      "Ḧ": "H",
      "Ȟ": "H",
      "Ḥ": "H",
      "Ḩ": "H",
      "Ḫ": "H",
      "Ħ": "H",
      "Ⱨ": "H",
      "Ⱶ": "H",
      "Ɥ": "H",
      "Ⓘ": "I",
      "Ｉ": "I",
      "Ì": "I",
      "Í": "I",
      "Î": "I",
      "Ĩ": "I",
      "Ī": "I",
      "Ĭ": "I",
      "İ": "I",
      "Ï": "I",
      "Ḯ": "I",
      "Ỉ": "I",
      "Ǐ": "I",
      "Ȉ": "I",
      "Ȋ": "I",
      "Ị": "I",
      "Į": "I",
      "Ḭ": "I",
      "Ɨ": "I",
      "Ⓙ": "J",
      "Ｊ": "J",
      "Ĵ": "J",
      "Ɉ": "J",
      "Ⓚ": "K",
      "Ｋ": "K",
      "Ḱ": "K",
      "Ǩ": "K",
      "Ḳ": "K",
      "Ķ": "K",
      "Ḵ": "K",
      "Ƙ": "K",
      "Ⱪ": "K",
      "Ꝁ": "K",
      "Ꝃ": "K",
      "Ꝅ": "K",
      "Ꞣ": "K",
      "Ⓛ": "L",
      "Ｌ": "L",
      "Ŀ": "L",
      "Ĺ": "L",
      "Ľ": "L",
      "Ḷ": "L",
      "Ḹ": "L",
      "Ļ": "L",
      "Ḽ": "L",
      "Ḻ": "L",
      "Ł": "L",
      "Ƚ": "L",
      "Ɫ": "L",
      "Ⱡ": "L",
      "Ꝉ": "L",
      "Ꝇ": "L",
      "Ꞁ": "L",
      "Ǉ": "LJ",
      "ǈ": "Lj",
      "Ⓜ": "M",
      "Ｍ": "M",
      "Ḿ": "M",
      "Ṁ": "M",
      "Ṃ": "M",
      "Ɱ": "M",
      "Ɯ": "M",
      "Ⓝ": "N",
      "Ｎ": "N",
      "Ǹ": "N",
      "Ń": "N",
      "Ñ": "N",
      "Ṅ": "N",
      "Ň": "N",
      "Ṇ": "N",
      "Ņ": "N",
      "Ṋ": "N",
      "Ṉ": "N",
      "Ƞ": "N",
      "Ɲ": "N",
      "Ꞑ": "N",
      "Ꞥ": "N",
      "Ǌ": "NJ",
      "ǋ": "Nj",
      "Ⓞ": "O",
      "Ｏ": "O",
      "Ò": "O",
      "Ó": "O",
      "Ô": "O",
      "Ồ": "O",
      "Ố": "O",
      "Ỗ": "O",
      "Ổ": "O",
      "Õ": "O",
      "Ṍ": "O",
      "Ȭ": "O",
      "Ṏ": "O",
      "Ō": "O",
      "Ṑ": "O",
      "Ṓ": "O",
      "Ŏ": "O",
      "Ȯ": "O",
      "Ȱ": "O",
      "Ö": "O",
      "Ȫ": "O",
      "Ỏ": "O",
      "Ő": "O",
      "Ǒ": "O",
      "Ȍ": "O",
      "Ȏ": "O",
      "Ơ": "O",
      "Ờ": "O",
      "Ớ": "O",
      "Ỡ": "O",
      "Ở": "O",
      "Ợ": "O",
      "Ọ": "O",
      "Ộ": "O",
      "Ǫ": "O",
      "Ǭ": "O",
      "Ø": "O",
      "Ǿ": "O",
      "Ɔ": "O",
      "Ɵ": "O",
      "Ꝋ": "O",
      "Ꝍ": "O",
      "Ƣ": "OI",
      "Ꝏ": "OO",
      "Ȣ": "OU",
      "Ⓟ": "P",
      "Ｐ": "P",
      "Ṕ": "P",
      "Ṗ": "P",
      "Ƥ": "P",
      "Ᵽ": "P",
      "Ꝑ": "P",
      "Ꝓ": "P",
      "Ꝕ": "P",
      "Ⓠ": "Q",
      "Ｑ": "Q",
      "Ꝗ": "Q",
      "Ꝙ": "Q",
      "Ɋ": "Q",
      "Ⓡ": "R",
      "Ｒ": "R",
      "Ŕ": "R",
      "Ṙ": "R",
      "Ř": "R",
      "Ȑ": "R",
      "Ȓ": "R",
      "Ṛ": "R",
      "Ṝ": "R",
      "Ŗ": "R",
      "Ṟ": "R",
      "Ɍ": "R",
      "Ɽ": "R",
      "Ꝛ": "R",
      "Ꞧ": "R",
      "Ꞃ": "R",
      "Ⓢ": "S",
      "Ｓ": "S",
      "ẞ": "S",
      "Ś": "S",
      "Ṥ": "S",
      "Ŝ": "S",
      "Ṡ": "S",
      "Š": "S",
      "Ṧ": "S",
      "Ṣ": "S",
      "Ṩ": "S",
      "Ș": "S",
      "Ş": "S",
      "Ȿ": "S",
      "Ꞩ": "S",
      "Ꞅ": "S",
      "Ⓣ": "T",
      "Ｔ": "T",
      "Ṫ": "T",
      "Ť": "T",
      "Ṭ": "T",
      "Ț": "T",
      "Ţ": "T",
      "Ṱ": "T",
      "Ṯ": "T",
      "Ŧ": "T",
      "Ƭ": "T",
      "Ʈ": "T",
      "Ⱦ": "T",
      "Ꞇ": "T",
      "Ꜩ": "TZ",
      "Ⓤ": "U",
      "Ｕ": "U",
      "Ù": "U",
      "Ú": "U",
      "Û": "U",
      "Ũ": "U",
      "Ṹ": "U",
      "Ū": "U",
      "Ṻ": "U",
      "Ŭ": "U",
      "Ü": "U",
      "Ǜ": "U",
      "Ǘ": "U",
      "Ǖ": "U",
      "Ǚ": "U",
      "Ủ": "U",
      "Ů": "U",
      "Ű": "U",
      "Ǔ": "U",
      "Ȕ": "U",
      "Ȗ": "U",
      "Ư": "U",
      "Ừ": "U",
      "Ứ": "U",
      "Ữ": "U",
      "Ử": "U",
      "Ự": "U",
      "Ụ": "U",
      "Ṳ": "U",
      "Ų": "U",
      "Ṷ": "U",
      "Ṵ": "U",
      "Ʉ": "U",
      "Ⓥ": "V",
      "Ｖ": "V",
      "Ṽ": "V",
      "Ṿ": "V",
      "Ʋ": "V",
      "Ꝟ": "V",
      "Ʌ": "V",
      "Ꝡ": "VY",
      "Ⓦ": "W",
      "Ｗ": "W",
      "Ẁ": "W",
      "Ẃ": "W",
      "Ŵ": "W",
      "Ẇ": "W",
      "Ẅ": "W",
      "Ẉ": "W",
      "Ⱳ": "W",
      "Ⓧ": "X",
      "Ｘ": "X",
      "Ẋ": "X",
      "Ẍ": "X",
      "Ⓨ": "Y",
      "Ｙ": "Y",
      "Ỳ": "Y",
      "Ý": "Y",
      "Ŷ": "Y",
      "Ỹ": "Y",
      "Ȳ": "Y",
      "Ẏ": "Y",
      "Ÿ": "Y",
      "Ỷ": "Y",
      "Ỵ": "Y",
      "Ƴ": "Y",
      "Ɏ": "Y",
      "Ỿ": "Y",
      "Ⓩ": "Z",
      "Ｚ": "Z",
      "Ź": "Z",
      "Ẑ": "Z",
      "Ż": "Z",
      "Ž": "Z",
      "Ẓ": "Z",
      "Ẕ": "Z",
      "Ƶ": "Z",
      "Ȥ": "Z",
      "Ɀ": "Z",
      "Ⱬ": "Z",
      "Ꝣ": "Z",
      "ⓐ": "a",
      "ａ": "a",
      "ẚ": "a",
      "à": "a",
      "á": "a",
      "â": "a",
      "ầ": "a",
      "ấ": "a",
      "ẫ": "a",
      "ẩ": "a",
      "ã": "a",
      "ā": "a",
      "ă": "a",
      "ằ": "a",
      "ắ": "a",
      "ẵ": "a",
      "ẳ": "a",
      "ȧ": "a",
      "ǡ": "a",
      "ä": "a",
      "ǟ": "a",
      "ả": "a",
      "å": "a",
      "ǻ": "a",
      "ǎ": "a",
      "ȁ": "a",
      "ȃ": "a",
      "ạ": "a",
      "ậ": "a",
      "ặ": "a",
      "ḁ": "a",
      "ą": "a",
      "ⱥ": "a",
      "ɐ": "a",
      "ꜳ": "aa",
      "æ": "ae",
      "ǽ": "ae",
      "ǣ": "ae",
      "ꜵ": "ao",
      "ꜷ": "au",
      "ꜹ": "av",
      "ꜻ": "av",
      "ꜽ": "ay",
      "ⓑ": "b",
      "ｂ": "b",
      "ḃ": "b",
      "ḅ": "b",
      "ḇ": "b",
      "ƀ": "b",
      "ƃ": "b",
      "ɓ": "b",
      "ⓒ": "c",
      "ｃ": "c",
      "ć": "c",
      "ĉ": "c",
      "ċ": "c",
      "č": "c",
      "ç": "c",
      "ḉ": "c",
      "ƈ": "c",
      "ȼ": "c",
      "ꜿ": "c",
      "ↄ": "c",
      "ⓓ": "d",
      "ｄ": "d",
      "ḋ": "d",
      "ď": "d",
      "ḍ": "d",
      "ḑ": "d",
      "ḓ": "d",
      "ḏ": "d",
      "đ": "d",
      "ƌ": "d",
      "ɖ": "d",
      "ɗ": "d",
      "ꝺ": "d",
      "ǳ": "dz",
      "ǆ": "dz",
      "ⓔ": "e",
      "ｅ": "e",
      "è": "e",
      "é": "e",
      "ê": "e",
      "ề": "e",
      "ế": "e",
      "ễ": "e",
      "ể": "e",
      "ẽ": "e",
      "ē": "e",
      "ḕ": "e",
      "ḗ": "e",
      "ĕ": "e",
      "ė": "e",
      "ë": "e",
      "ẻ": "e",
      "ě": "e",
      "ȅ": "e",
      "ȇ": "e",
      "ẹ": "e",
      "ệ": "e",
      "ȩ": "e",
      "ḝ": "e",
      "ę": "e",
      "ḙ": "e",
      "ḛ": "e",
      "ɇ": "e",
      "ɛ": "e",
      "ǝ": "e",
      "ⓕ": "f",
      "ｆ": "f",
      "ḟ": "f",
      "ƒ": "f",
      "ꝼ": "f",
      "ⓖ": "g",
      "ｇ": "g",
      "ǵ": "g",
      "ĝ": "g",
      "ḡ": "g",
      "ğ": "g",
      "ġ": "g",
      "ǧ": "g",
      "ģ": "g",
      "ǥ": "g",
      "ɠ": "g",
      "ꞡ": "g",
      "ᵹ": "g",
      "ꝿ": "g",
      "ⓗ": "h",
      "ｈ": "h",
      "ĥ": "h",
      "ḣ": "h",
      "ḧ": "h",
      "ȟ": "h",
      "ḥ": "h",
      "ḩ": "h",
      "ḫ": "h",
      "ẖ": "h",
      "ħ": "h",
      "ⱨ": "h",
      "ⱶ": "h",
      "ɥ": "h",
      "ƕ": "hv",
      "ⓘ": "i",
      "ｉ": "i",
      "ì": "i",
      "í": "i",
      "î": "i",
      "ĩ": "i",
      "ī": "i",
      "ĭ": "i",
      "ï": "i",
      "ḯ": "i",
      "ỉ": "i",
      "ǐ": "i",
      "ȉ": "i",
      "ȋ": "i",
      "ị": "i",
      "į": "i",
      "ḭ": "i",
      "ɨ": "i",
      "ı": "i",
      "ⓙ": "j",
      "ｊ": "j",
      "ĵ": "j",
      "ǰ": "j",
      "ɉ": "j",
      "ⓚ": "k",
      "ｋ": "k",
      "ḱ": "k",
      "ǩ": "k",
      "ḳ": "k",
      "ķ": "k",
      "ḵ": "k",
      "ƙ": "k",
      "ⱪ": "k",
      "ꝁ": "k",
      "ꝃ": "k",
      "ꝅ": "k",
      "ꞣ": "k",
      "ⓛ": "l",
      "ｌ": "l",
      "ŀ": "l",
      "ĺ": "l",
      "ľ": "l",
      "ḷ": "l",
      "ḹ": "l",
      "ļ": "l",
      "ḽ": "l",
      "ḻ": "l",
      "ſ": "l",
      "ł": "l",
      "ƚ": "l",
      "ɫ": "l",
      "ⱡ": "l",
      "ꝉ": "l",
      "ꞁ": "l",
      "ꝇ": "l",
      "ǉ": "lj",
      "ⓜ": "m",
      "ｍ": "m",
      "ḿ": "m",
      "ṁ": "m",
      "ṃ": "m",
      "ɱ": "m",
      "ɯ": "m",
      "ⓝ": "n",
      "ｎ": "n",
      "ǹ": "n",
      "ń": "n",
      "ñ": "n",
      "ṅ": "n",
      "ň": "n",
      "ṇ": "n",
      "ņ": "n",
      "ṋ": "n",
      "ṉ": "n",
      "ƞ": "n",
      "ɲ": "n",
      "ŉ": "n",
      "ꞑ": "n",
      "ꞥ": "n",
      "ǌ": "nj",
      "ⓞ": "o",
      "ｏ": "o",
      "ò": "o",
      "ó": "o",
      "ô": "o",
      "ồ": "o",
      "ố": "o",
      "ỗ": "o",
      "ổ": "o",
      "õ": "o",
      "ṍ": "o",
      "ȭ": "o",
      "ṏ": "o",
      "ō": "o",
      "ṑ": "o",
      "ṓ": "o",
      "ŏ": "o",
      "ȯ": "o",
      "ȱ": "o",
      "ö": "o",
      "ȫ": "o",
      "ỏ": "o",
      "ő": "o",
      "ǒ": "o",
      "ȍ": "o",
      "ȏ": "o",
      "ơ": "o",
      "ờ": "o",
      "ớ": "o",
      "ỡ": "o",
      "ở": "o",
      "ợ": "o",
      "ọ": "o",
      "ộ": "o",
      "ǫ": "o",
      "ǭ": "o",
      "ø": "o",
      "ǿ": "o",
      "ɔ": "o",
      "ꝋ": "o",
      "ꝍ": "o",
      "ɵ": "o",
      "ƣ": "oi",
      "ȣ": "ou",
      "ꝏ": "oo",
      "ⓟ": "p",
      "ｐ": "p",
      "ṕ": "p",
      "ṗ": "p",
      "ƥ": "p",
      "ᵽ": "p",
      "ꝑ": "p",
      "ꝓ": "p",
      "ꝕ": "p",
      "ⓠ": "q",
      "ｑ": "q",
      "ɋ": "q",
      "ꝗ": "q",
      "ꝙ": "q",
      "ⓡ": "r",
      "ｒ": "r",
      "ŕ": "r",
      "ṙ": "r",
      "ř": "r",
      "ȑ": "r",
      "ȓ": "r",
      "ṛ": "r",
      "ṝ": "r",
      "ŗ": "r",
      "ṟ": "r",
      "ɍ": "r",
      "ɽ": "r",
      "ꝛ": "r",
      "ꞧ": "r",
      "ꞃ": "r",
      "ⓢ": "s",
      "ｓ": "s",
      "ß": "s",
      "ś": "s",
      "ṥ": "s",
      "ŝ": "s",
      "ṡ": "s",
      "š": "s",
      "ṧ": "s",
      "ṣ": "s",
      "ṩ": "s",
      "ș": "s",
      "ş": "s",
      "ȿ": "s",
      "ꞩ": "s",
      "ꞅ": "s",
      "ẛ": "s",
      "ⓣ": "t",
      "ｔ": "t",
      "ṫ": "t",
      "ẗ": "t",
      "ť": "t",
      "ṭ": "t",
      "ț": "t",
      "ţ": "t",
      "ṱ": "t",
      "ṯ": "t",
      "ŧ": "t",
      "ƭ": "t",
      "ʈ": "t",
      "ⱦ": "t",
      "ꞇ": "t",
      "ꜩ": "tz",
      "ⓤ": "u",
      "ｕ": "u",
      "ù": "u",
      "ú": "u",
      "û": "u",
      "ũ": "u",
      "ṹ": "u",
      "ū": "u",
      "ṻ": "u",
      "ŭ": "u",
      "ü": "u",
      "ǜ": "u",
      "ǘ": "u",
      "ǖ": "u",
      "ǚ": "u",
      "ủ": "u",
      "ů": "u",
      "ű": "u",
      "ǔ": "u",
      "ȕ": "u",
      "ȗ": "u",
      "ư": "u",
      "ừ": "u",
      "ứ": "u",
      "ữ": "u",
      "ử": "u",
      "ự": "u",
      "ụ": "u",
      "ṳ": "u",
      "ų": "u",
      "ṷ": "u",
      "ṵ": "u",
      "ʉ": "u",
      "ⓥ": "v",
      "ｖ": "v",
      "ṽ": "v",
      "ṿ": "v",
      "ʋ": "v",
      "ꝟ": "v",
      "ʌ": "v",
      "ꝡ": "vy",
      "ⓦ": "w",
      "ｗ": "w",
      "ẁ": "w",
      "ẃ": "w",
      "ŵ": "w",
      "ẇ": "w",
      "ẅ": "w",
      "ẘ": "w",
      "ẉ": "w",
      "ⱳ": "w",
      "ⓧ": "x",
      "ｘ": "x",
      "ẋ": "x",
      "ẍ": "x",
      "ⓨ": "y",
      "ｙ": "y",
      "ỳ": "y",
      "ý": "y",
      "ŷ": "y",
      "ỹ": "y",
      "ȳ": "y",
      "ẏ": "y",
      "ÿ": "y",
      "ỷ": "y",
      "ẙ": "y",
      "ỵ": "y",
      "ƴ": "y",
      "ɏ": "y",
      "ỿ": "y",
      "ⓩ": "z",
      "ｚ": "z",
      "ź": "z",
      "ẑ": "z",
      "ż": "z",
      "ž": "z",
      "ẓ": "z",
      "ẕ": "z",
      "ƶ": "z",
      "ȥ": "z",
      "ɀ": "z",
      "ⱬ": "z",
      "ꝣ": "z",
      "Ά": "Α",
      "Έ": "Ε",
      "Ή": "Η",
      "Ί": "Ι",
      "Ϊ": "Ι",
      "Ό": "Ο",
      "Ύ": "Υ",
      "Ϋ": "Υ",
      "Ώ": "Ω",
      "ά": "α",
      "έ": "ε",
      "ή": "η",
      "ί": "ι",
      "ϊ": "ι",
      "ΐ": "ι",
      "ό": "ο",
      "ύ": "υ",
      "ϋ": "υ",
      "ΰ": "υ",
      "ω": "ω",
      "ς": "σ"
    };
    DataUtil2.fnOperators = {
      /**
       * Returns true when the actual input is equal to the given input.
       *
       * @param {string|number|boolean} actual
       * @param {string|number|boolean} expected
       * @param {boolean} ignoreCase?
       * @param {boolean} ignoreAccent?
       * @param ignoreCase
       * @param ignoreAccent
       */
      equal: function(actual, expected, ignoreCase, ignoreAccent) {
        if (ignoreAccent) {
          actual = DataUtil2.ignoreDiacritics(actual);
          expected = DataUtil2.ignoreDiacritics(expected);
        }
        if (ignoreCase) {
          return DataUtil2.toLowerCase(actual) === DataUtil2.toLowerCase(expected);
        }
        return actual === expected;
      },
      /**
       * Returns true when the actual input is not equal to the given input.
       *
       * @param {string|number|boolean} actual
       * @param {string|number|boolean} expected
       * @param {boolean} ignoreCase?
       * @param ignoreCase
       * @param ignoreAccent
       */
      notequal: function(actual, expected, ignoreCase, ignoreAccent) {
        if (ignoreAccent) {
          actual = DataUtil2.ignoreDiacritics(actual);
          expected = DataUtil2.ignoreDiacritics(expected);
        }
        return !DataUtil2.fnOperators.equal(actual, expected, ignoreCase);
      },
      /**
       * Returns true when the actual input is less than to the given input.
       *
       * @param {string|number|boolean} actual
       * @param {string|number|boolean} expected
       * @param {boolean} ignoreCase?
       * @param ignoreCase
       */
      lessthan: function(actual, expected, ignoreCase) {
        if (ignoreCase) {
          return DataUtil2.toLowerCase(actual) < DataUtil2.toLowerCase(expected);
        }
        if (isNullOrUndefined(actual)) {
          actual = void 0;
        }
        return actual < expected;
      },
      /**
       * Returns true when the actual input is greater than to the given input.
       *
       * @param {string|number|boolean} actual
       * @param {string|number|boolean} expected
       * @param {boolean} ignoreCase?
       * @param ignoreCase
       */
      greaterthan: function(actual, expected, ignoreCase) {
        if (ignoreCase) {
          return DataUtil2.toLowerCase(actual) > DataUtil2.toLowerCase(expected);
        }
        return actual > expected;
      },
      /**
       * Returns true when the actual input is less than or equal to the given input.
       *
       * @param {string|number|boolean} actual
       * @param {string|number|boolean} expected
       * @param {boolean} ignoreCase?
       * @param ignoreCase
       */
      lessthanorequal: function(actual, expected, ignoreCase) {
        if (ignoreCase) {
          return DataUtil2.toLowerCase(actual) <= DataUtil2.toLowerCase(expected);
        }
        if (isNullOrUndefined(actual)) {
          actual = void 0;
        }
        return actual <= expected;
      },
      /**
       * Returns true when the actual input is greater than or equal to the given input.
       *
       * @param {string|number|boolean} actual
       * @param {string|number|boolean} expected
       * @param {boolean} ignoreCase?
       * @param ignoreCase
       */
      greaterthanorequal: function(actual, expected, ignoreCase) {
        if (ignoreCase) {
          return DataUtil2.toLowerCase(actual) >= DataUtil2.toLowerCase(expected);
        }
        return actual >= expected;
      },
      /**
       * Returns true when the actual input contains the given string.
       *
       * @param {string|number} actual
       * @param {string|number} expected
       * @param {boolean} ignoreCase?
       * @param ignoreCase
       * @param ignoreAccent
       */
      contains: function(actual, expected, ignoreCase, ignoreAccent) {
        if (ignoreAccent) {
          actual = DataUtil2.ignoreDiacritics(actual);
          expected = DataUtil2.ignoreDiacritics(expected);
        }
        if (ignoreCase) {
          return !isNullOrUndefined(actual) && !isNullOrUndefined(expected) && DataUtil2.toLowerCase(actual).indexOf(DataUtil2.toLowerCase(expected)) !== -1;
        }
        return !isNullOrUndefined(actual) && !isNullOrUndefined(expected) && actual.toString().indexOf(expected) !== -1;
      },
      /**
       * Returns true when the actual input not contains the given string.
       *
       * @param  {string|number} actual
       * @param  {string|number} expected
       * @param  {boolean} ignoreCase?
       */
      doesnotcontain: function(actual, expected, ignoreCase, ignoreAccent) {
        if (ignoreAccent) {
          actual = DataUtil2.ignoreDiacritics(actual);
          expected = DataUtil2.ignoreDiacritics(expected);
        }
        if (ignoreCase) {
          return !isNullOrUndefined(actual) && !isNullOrUndefined(expected) && DataUtil2.toLowerCase(actual).indexOf(DataUtil2.toLowerCase(expected)) === -1;
        }
        return !isNullOrUndefined(actual) && !isNullOrUndefined(expected) && actual.toString().indexOf(expected) === -1;
      },
      /**
       * Returns true when the given input value is not null.
       *
       * @param  {string|number} actual
       * @returns boolean
       */
      isnotnull: function(actual) {
        return actual !== null && actual !== void 0;
      },
      /**
       * Returns true when the given input value is null.
       *
       * @param  {string|number} actual
       * @returns boolean
       */
      isnull: function(actual) {
        return actual === null || actual === void 0;
      },
      /**
       * Returns true when the actual input starts with the given string
       *
       * @param {string} actual
       * @param {string} expected
       * @param {boolean} ignoreCase?
       * @param ignoreCase
       * @param ignoreAccent
       */
      startswith: function(actual, expected, ignoreCase, ignoreAccent) {
        if (ignoreAccent) {
          actual = DataUtil2.ignoreDiacritics(actual);
          expected = DataUtil2.ignoreDiacritics(expected);
        }
        if (ignoreCase) {
          return actual && expected && DataUtil2.startsWith(DataUtil2.toLowerCase(actual), DataUtil2.toLowerCase(expected));
        }
        return actual && expected && DataUtil2.startsWith(actual, expected);
      },
      /**
       * Returns true when the actual input not starts with the given string
       *
       * @param  {string} actual
       * @param  {string} expected
       * @param  {boolean} ignoreCase?
       */
      doesnotstartwith: function(actual, expected, ignoreCase, ignoreAccent) {
        if (ignoreAccent) {
          actual = DataUtil2.ignoreDiacritics(actual);
          expected = DataUtil2.ignoreDiacritics(expected);
        }
        if (ignoreCase) {
          return actual && expected && DataUtil2.notStartsWith(DataUtil2.toLowerCase(actual), DataUtil2.toLowerCase(expected));
        }
        return actual && expected && DataUtil2.notStartsWith(actual, expected);
      },
      /**
       * Returns true when the actual input like with the given string.
       *
       * @param  {string} actual
       * @param  {string} expected
       * @param  {boolean} ignoreCase?
       */
      like: function(actual, expected, ignoreCase, ignoreAccent) {
        if (ignoreAccent) {
          actual = DataUtil2.ignoreDiacritics(actual);
          expected = DataUtil2.ignoreDiacritics(expected);
        }
        if (ignoreCase) {
          return actual && expected && DataUtil2.like(DataUtil2.toLowerCase(actual), DataUtil2.toLowerCase(expected));
        }
        return actual && expected && DataUtil2.like(actual, expected);
      },
      /**
       * Returns true when the given input value is empty.
       *
       * @param  {string|number} actual
       * @returns boolean
       */
      isempty: function(actual) {
        return actual === void 0 || actual === "";
      },
      /**
       * Returns true when the given input value is not empty.
       *
       * @param  {string|number} actual
       * @returns boolean
       */
      isnotempty: function(actual) {
        return actual !== void 0 && actual !== "";
      },
      /**
       * Returns true when the actual input pattern(wildcard) matches with the given string.
       *
       * @param  {string|Date} actual
       * @param  {string} expected
       * @param  {boolean} ignoreCase?
       */
      wildcard: function(actual, expected, ignoreCase, ignoreAccent) {
        if (ignoreAccent) {
          actual = DataUtil2.ignoreDiacritics(actual);
          expected = DataUtil2.ignoreDiacritics(expected);
        }
        if (ignoreCase) {
          return actual && expected && typeof actual !== "object" && DataUtil2.wildCard(DataUtil2.toLowerCase(actual), DataUtil2.toLowerCase(expected));
        }
        return actual && expected && DataUtil2.wildCard(actual, expected);
      },
      /**
       * Returns true when the actual input ends with the given string.
       *
       * @param {string} actual
       * @param {string} expected
       * @param {boolean} ignoreCase?
       * @param ignoreCase
       * @param ignoreAccent
       */
      endswith: function(actual, expected, ignoreCase, ignoreAccent) {
        if (ignoreAccent) {
          actual = DataUtil2.ignoreDiacritics(actual);
          expected = DataUtil2.ignoreDiacritics(expected);
        }
        if (ignoreCase) {
          return actual && expected && DataUtil2.endsWith(DataUtil2.toLowerCase(actual), DataUtil2.toLowerCase(expected));
        }
        return actual && expected && DataUtil2.endsWith(actual, expected);
      },
      /**
       * Returns true when the actual input not ends with the given string.
       *
       * @param  {string} actual
       * @param  {string} expected
       * @param  {boolean} ignoreCase?
       */
      doesnotendwith: function(actual, expected, ignoreCase, ignoreAccent) {
        if (ignoreAccent) {
          actual = DataUtil2.ignoreDiacritics(actual);
          expected = DataUtil2.ignoreDiacritics(expected);
        }
        if (ignoreCase) {
          return actual && expected && DataUtil2.notEndsWith(DataUtil2.toLowerCase(actual), DataUtil2.toLowerCase(expected));
        }
        return actual && expected && DataUtil2.notEndsWith(actual, expected);
      },
      /**
       * It will return the filter operator based on the filter symbol.
       *
       * @param  {string} operator
       * @hidden
       */
      processSymbols: function(operator) {
        var fnName = DataUtil2.operatorSymbols[operator];
        if (fnName) {
          var fn = DataUtil2.fnOperators[fnName];
          return fn;
        }
        return DataUtil2.throwError("Query - Process Operator : Invalid operator");
      },
      /**
       * It will return the valid filter operator based on the specified operators.
       *
       * @param  {string} operator
       * @hidden
       */
      processOperator: function(operator) {
        var fn = DataUtil2.fnOperators[operator];
        if (fn) {
          return fn;
        }
        return DataUtil2.fnOperators.processSymbols(operator);
      }
    };
    DataUtil2.parse = {
      /**
       * Parse the given string to the plain JavaScript object.
       *
       * @param  {string|Object|Object[]} jsonText
       */
      parseJson: function(jsonText) {
        if (typeof jsonText === "string") {
          jsonText = JSON.parse(jsonText, DataUtil2.parse.jsonReviver);
        } else if (jsonText instanceof Array) {
          DataUtil2.parse.iterateAndReviveArray(jsonText);
        } else if (typeof jsonText === "object" && jsonText !== null) {
          DataUtil2.parse.iterateAndReviveJson(jsonText);
        }
        return jsonText;
      },
      /**
       * It will perform on array of values.
       *
       * @param  {string[]|Object[]} array
       * @hidden
       */
      iterateAndReviveArray: function(array) {
        for (var i = 0; i < array.length; i++) {
          if (typeof array[i] === "object" && array[i] !== null) {
            DataUtil2.parse.iterateAndReviveJson(array[i]);
          } else if (typeof array[i] === "string" && !/^[\s]*\[|^[\s]*\{(.)+:|\"/g.test(array[i])) {
            array[i] = DataUtil2.parse.jsonReviver("", array[i]);
          } else {
            array[i] = DataUtil2.parse.parseJson(array[i]);
          }
        }
      },
      /**
       * It will perform on JSON values
       *
       * @param  {JSON} json
       * @hidden
       */
      iterateAndReviveJson: function(json) {
        var value;
        var keys2 = Object.keys(json);
        for (var _i = 0, keys_2 = keys2; _i < keys_2.length; _i++) {
          var prop = keys_2[_i];
          if (DataUtil2.startsWith(prop, "__")) {
            continue;
          }
          value = json[prop];
          if (typeof value === "object") {
            if (value instanceof Array) {
              DataUtil2.parse.iterateAndReviveArray(value);
            } else if (value) {
              DataUtil2.parse.iterateAndReviveJson(value);
            }
          } else {
            json[prop] = DataUtil2.parse.jsonReviver(json[prop], value);
          }
        }
      },
      /**
       * It will perform on JSON values
       *
       * @param  {string} field
       * @param  {string|Date} value
       * @hidden
       */
      jsonReviver: function(field, value) {
        if (typeof value === "string") {
          var ms = /^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(value);
          var offSet = DataUtil2.timeZoneHandling ? DataUtil2.serverTimezoneOffset : null;
          if (ms) {
            return DataUtil2.dateParse.toTimeZone(new Date(parseInt(ms[1], 10)), offSet, true);
          } else if (/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(value)) {
            var isUTC = value.indexOf("Z") > -1 || value.indexOf("z") > -1;
            var arr = value.split(/[^0-9.]/);
            if (isUTC) {
              if (arr[5].indexOf(".") > -1) {
                var secondsMs = arr[5].split(".");
                arr[5] = secondsMs[0];
                arr[6] = new Date(value).getUTCMilliseconds().toString();
              } else {
                arr[6] = "00";
              }
              value = DataUtil2.dateParse.toTimeZone(new Date(parseInt(arr[0], 10), parseInt(arr[1], 10) - 1, parseInt(arr[2], 10), parseInt(arr[3], 10), parseInt(arr[4], 10), parseInt(arr[5], 10), parseInt(arr[6], 10)), DataUtil2.serverTimezoneOffset, false);
            } else {
              var utcFormat = new Date(parseInt(arr[0], 10), parseInt(arr[1], 10) - 1, parseInt(arr[2], 10), parseInt(arr[3], 10), parseInt(arr[4], 10), parseInt(arr[5], 10));
              var hrs = parseInt(arr[6], 10);
              var mins = parseInt(arr[7], 10);
              if (isNaN(hrs) && isNaN(mins)) {
                return utcFormat;
              }
              if (value.indexOf("+") > -1) {
                utcFormat.setHours(utcFormat.getHours() - hrs, utcFormat.getMinutes() - mins);
              } else {
                utcFormat.setHours(utcFormat.getHours() + hrs, utcFormat.getMinutes() + mins);
              }
              value = DataUtil2.dateParse.toTimeZone(utcFormat, DataUtil2.serverTimezoneOffset, false);
            }
            if (DataUtil2.serverTimezoneOffset == null) {
              value = DataUtil2.dateParse.addSelfOffset(value);
            }
          }
        }
        return value;
      },
      /**
       * Check wheather the given value is JSON or not.
       *
       * @param  {Object[]} jsonData
       */
      isJson: function(jsonData) {
        if (typeof jsonData[0] === "string") {
          return jsonData;
        }
        return DataUtil2.parse.parseJson(jsonData);
      },
      /**
       * Checks wheather the given value is GUID or not.
       *
       * @param  {string} value
       */
      isGuid: function(value) {
        var regex2 = /[A-Fa-f0-9]{8}(?:-[A-Fa-f0-9]{4}){3}-[A-Fa-f0-9]{12}/i;
        var match = regex2.exec(value);
        return match != null;
      },
      /**
       * The method used to replace the value based on the type.
       *
       * @param  {Object} value
       * @param  {boolean} stringify
       * @hidden
       */
      replacer: function(value, stringify) {
        if (DataUtil2.isPlainObject(value)) {
          return DataUtil2.parse.jsonReplacer(value, stringify);
        }
        if (value instanceof Array) {
          return DataUtil2.parse.arrayReplacer(value);
        }
        if (value instanceof Date) {
          return DataUtil2.parse.jsonReplacer({ val: value }, stringify).val;
        }
        return value;
      },
      /**
       * It will replace the JSON value.
       *
       * @param {string} key
       * @param {Object} val
       * @param stringify
       * @hidden
       */
      jsonReplacer: function(val, stringify) {
        var value;
        var keys2 = Object.keys(val);
        for (var _i = 0, keys_3 = keys2; _i < keys_3.length; _i++) {
          var prop = keys_3[_i];
          value = val[prop];
          if (!(value instanceof Date)) {
            continue;
          }
          var d = value;
          if (DataUtil2.serverTimezoneOffset == null) {
            val[prop] = DataUtil2.dateParse.toTimeZone(d, null).toJSON();
          } else {
            d = new Date(+d + DataUtil2.serverTimezoneOffset * 36e5);
            val[prop] = DataUtil2.dateParse.toTimeZone(DataUtil2.dateParse.addSelfOffset(d), null).toJSON();
          }
        }
        return val;
      },
      /**
       * It will replace the Array of value.
       *
       * @param  {string} key
       * @param  {Object[]} val
       * @hidden
       */
      arrayReplacer: function(val) {
        for (var i = 0; i < val.length; i++) {
          if (DataUtil2.isPlainObject(val[i])) {
            val[i] = DataUtil2.parse.jsonReplacer(val[i]);
          } else if (val[i] instanceof Date) {
            val[i] = DataUtil2.parse.jsonReplacer({ date: val[i] }).date;
          }
        }
        return val;
      },
      /**
       * It will replace the Date object with respective to UTC format value.
       *
       * @param  {string} key
       * @param  {any} value
       * @hidden
       */
      /* eslint-disable @typescript-eslint/no-explicit-any */
      /* tslint:disable-next-line:no-any */
      jsonDateReplacer: function(key, value) {
        if (key === "value" && value) {
          if (typeof value === "string") {
            var ms = /^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(value);
            if (ms) {
              value = DataUtil2.dateParse.toTimeZone(new Date(parseInt(ms[1], 10)), null, true);
            } else if (/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(value)) {
              var arr = value.split(/[^0-9]/);
              value = DataUtil2.dateParse.toTimeZone(new Date(parseInt(arr[0], 10), parseInt(arr[1], 10) - 1, parseInt(arr[2], 10), parseInt(arr[3], 10), parseInt(arr[4], 10), parseInt(arr[5], 10)), null, true);
            }
          }
          if (value instanceof Date) {
            value = DataUtil2.dateParse.addSelfOffset(value);
            if (DataUtil2.serverTimezoneOffset === null) {
              return DataUtil2.dateParse.toTimeZone(DataUtil2.dateParse.addSelfOffset(value), null).toJSON();
            } else {
              value = DataUtil2.dateParse.toTimeZone(value, value.getTimezoneOffset() / 60 * 2 - DataUtil2.serverTimezoneOffset, false);
              return value.toJSON();
            }
          }
        }
        return value;
      }
    };
    DataUtil2.dateParse = {
      addSelfOffset: function(input) {
        return new Date(+input - input.getTimezoneOffset() * 6e4);
      },
      toUTC: function(input) {
        return new Date(+input + input.getTimezoneOffset() * 6e4);
      },
      toTimeZone: function(input, offset, utc) {
        if (offset === null) {
          return input;
        }
        var unix = utc ? DataUtil2.dateParse.toUTC(input) : input;
        return new Date(+unix - offset * 36e5);
      },
      toLocalTime: function(input) {
        var datefn = input;
        var timeZone = -datefn.getTimezoneOffset();
        var differenceString = timeZone >= 0 ? "+" : "-";
        var localtimefn = function(num) {
          var norm = Math.floor(Math.abs(num));
          return (norm < 10 ? "0" : "") + norm;
        };
        var val = datefn.getFullYear() + "-" + localtimefn(datefn.getMonth() + 1) + "-" + localtimefn(datefn.getDate()) + "T" + localtimefn(datefn.getHours()) + ":" + localtimefn(datefn.getMinutes()) + ":" + localtimefn(datefn.getSeconds()) + differenceString + localtimefn(timeZone / 60) + ":" + localtimefn(timeZone % 60);
        return val;
      }
    };
    return DataUtil2;
  }()
);
var __extends$P = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var consts = { GroupGuid: "{271bbba0-1ee7}" };
var Adaptor = (
  /** @class */
  function() {
    function Adaptor2(ds) {
      this.options = {
        from: "table",
        requestType: "json",
        sortBy: "sorted",
        select: "select",
        skip: "skip",
        group: "group",
        take: "take",
        search: "search",
        count: "requiresCounts",
        where: "where",
        aggregates: "aggregates",
        expand: "expand"
      };
      this.type = Adaptor2;
      this.dataSource = ds;
      this.pvt = {};
    }
    Adaptor2.prototype.processResponse = function(data, ds, query, xhr) {
      return data;
    };
    return Adaptor2;
  }()
);
var JsonAdaptor = (
  /** @class */
  function(_super) {
    __extends$P(JsonAdaptor2, _super);
    function JsonAdaptor2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    JsonAdaptor2.prototype.processQuery = function(dataManager, query) {
      var result = dataManager.dataSource.json.slice(0);
      var count = result.length;
      var countFlg = true;
      var ret;
      var key;
      var lazyLoad = {};
      var keyCount = 0;
      var group = [];
      var page;
      for (var i = 0; i < query.lazyLoad.length; i++) {
        keyCount++;
        lazyLoad[query.lazyLoad[i].key] = query.lazyLoad[i].value;
      }
      var agg = {};
      for (var i = 0; i < query.queries.length; i++) {
        key = query.queries[i];
        if ((key.fn === "onPage" || key.fn === "onGroup") && query.lazyLoad.length) {
          if (key.fn === "onGroup") {
            group.push(key.e);
          }
          if (key.fn === "onPage") {
            page = key.e;
          }
          continue;
        }
        ret = this[key.fn].call(this, result, key.e, query);
        if (key.fn === "onAggregates") {
          agg[key.e.field + " - " + key.e.type] = ret;
        } else {
          result = ret !== void 0 ? ret : result;
        }
        if (key.fn === "onPage" || key.fn === "onSkip" || key.fn === "onTake" || key.fn === "onRange") {
          countFlg = false;
        }
        if (countFlg) {
          count = result.length;
        }
      }
      if (keyCount) {
        var args = {
          query,
          lazyLoad,
          result,
          group,
          page
        };
        var lazyLoadData = this.lazyLoadGroup(args);
        result = lazyLoadData.result;
        count = lazyLoadData.count;
      }
      if (query.isCountRequired) {
        result = {
          result,
          count,
          aggregates: agg
        };
      }
      return result;
    };
    JsonAdaptor2.prototype.lazyLoadGroup = function(args) {
      var count = 0;
      var agg = this.getAggregate(args.query);
      var result = args.result;
      if (!isNullOrUndefined(args.lazyLoad.onDemandGroupInfo)) {
        var req = args.lazyLoad.onDemandGroupInfo;
        for (var i = req.where.length - 1; i >= 0; i--) {
          result = this.onWhere(result, req.where[i]);
        }
        if (args.group.length !== req.level) {
          var field = args.group[req.level].fieldName;
          result = DataUtil.group(result, field, agg, null, null, args.group[0].comparer, true);
        }
        count = result.length;
        var data = result;
        result = result.slice(req.skip);
        result = result.slice(0, req.take);
        if (args.group.length !== req.level) {
          this.formGroupResult(result, data);
        }
      } else {
        var field = args.group[0].fieldName;
        result = DataUtil.group(result, field, agg, null, null, args.group[0].comparer, true);
        count = result.length;
        var data = result;
        if (args.page) {
          result = this.onPage(result, args.page, args.query);
        }
        this.formGroupResult(result, data);
      }
      return { result, count };
    };
    JsonAdaptor2.prototype.formGroupResult = function(result, data) {
      if (result.length && data.length) {
        var uid2 = "GroupGuid";
        var childLevel = "childLevels";
        var level = "level";
        var records = "records";
        result[uid2] = data[uid2];
        result[childLevel] = data[childLevel];
        result[level] = data[level];
        result[records] = data[records];
      }
      return result;
    };
    JsonAdaptor2.prototype.getAggregate = function(query) {
      var aggQuery = Query.filterQueries(query.queries, "onAggregates");
      var agg = [];
      if (aggQuery.length) {
        var tmp = void 0;
        for (var i = 0; i < aggQuery.length; i++) {
          tmp = aggQuery[i].e;
          agg.push({ type: tmp.type, field: DataUtil.getValue(tmp.field, query) });
        }
      }
      return agg;
    };
    JsonAdaptor2.prototype.batchRequest = function(dm, changes, e) {
      var i;
      var deletedRecordsLen = changes.deletedRecords.length;
      for (i = 0; i < changes.addedRecords.length; i++) {
        this.insert(dm, changes.addedRecords[i]);
      }
      for (i = 0; i < changes.changedRecords.length; i++) {
        this.update(dm, e.key, changes.changedRecords[i]);
      }
      for (i = 0; i < deletedRecordsLen; i++) {
        this.remove(dm, e.key, changes.deletedRecords[i]);
      }
      return changes;
    };
    JsonAdaptor2.prototype.onWhere = function(ds, e) {
      if (!ds || !ds.length) {
        return ds;
      }
      return ds.filter(function(obj) {
        if (e) {
          return e.validate(obj);
        }
      });
    };
    JsonAdaptor2.prototype.onAggregates = function(ds, e) {
      var fn = DataUtil.aggregates[e.type];
      if (!ds || !fn || ds.length === 0) {
        return null;
      }
      return fn(ds, e.field);
    };
    JsonAdaptor2.prototype.onSearch = function(ds, e) {
      if (!ds || !ds.length) {
        return ds;
      }
      if (e.fieldNames.length === 0) {
        DataUtil.getFieldList(ds[0], e.fieldNames);
      }
      return ds.filter(function(obj) {
        for (var j = 0; j < e.fieldNames.length; j++) {
          if (e.comparer.call(obj, DataUtil.getObject(e.fieldNames[j], obj), e.searchKey, e.ignoreCase, e.ignoreAccent)) {
            return true;
          }
        }
        return false;
      });
    };
    JsonAdaptor2.prototype.onSortBy = function(ds, e, query) {
      if (!ds || !ds.length) {
        return ds;
      }
      var fnCompare;
      var field = DataUtil.getValue(e.fieldName, query);
      if (!field) {
        return ds.sort(e.comparer);
      }
      if (field instanceof Array) {
        field = field.slice(0);
        for (var i = field.length - 1; i >= 0; i--) {
          if (!field[i]) {
            continue;
          }
          fnCompare = e.comparer;
          if (DataUtil.endsWith(field[i], " desc")) {
            fnCompare = DataUtil.fnSort("descending");
            field[i] = field[i].replace(" desc", "");
          }
          ds = DataUtil.sort(ds, field[i], fnCompare);
        }
        return ds;
      }
      return DataUtil.sort(ds, field, e.comparer);
    };
    JsonAdaptor2.prototype.onGroup = function(ds, e, query) {
      if (!ds || !ds.length) {
        return ds;
      }
      var agg = this.getAggregate(query);
      return DataUtil.group(ds, DataUtil.getValue(e.fieldName, query), agg, null, null, e.comparer);
    };
    JsonAdaptor2.prototype.onPage = function(ds, e, query) {
      var size2 = DataUtil.getValue(e.pageSize, query);
      var start = (DataUtil.getValue(e.pageIndex, query) - 1) * size2;
      var end = start + size2;
      if (!ds || !ds.length) {
        return ds;
      }
      return ds.slice(start, end);
    };
    JsonAdaptor2.prototype.onRange = function(ds, e) {
      if (!ds || !ds.length) {
        return ds;
      }
      return ds.slice(DataUtil.getValue(e.start), DataUtil.getValue(e.end));
    };
    JsonAdaptor2.prototype.onTake = function(ds, e) {
      if (!ds || !ds.length) {
        return ds;
      }
      return ds.slice(0, DataUtil.getValue(e.nos));
    };
    JsonAdaptor2.prototype.onSkip = function(ds, e) {
      if (!ds || !ds.length) {
        return ds;
      }
      return ds.slice(DataUtil.getValue(e.nos));
    };
    JsonAdaptor2.prototype.onSelect = function(ds, e) {
      if (!ds || !ds.length) {
        return ds;
      }
      return DataUtil.select(ds, DataUtil.getValue(e.fieldNames));
    };
    JsonAdaptor2.prototype.insert = function(dm, data, tableName, query, position) {
      if (isNullOrUndefined(position)) {
        return dm.dataSource.json.push(data);
      } else {
        return dm.dataSource.json.splice(position, 0, data);
      }
    };
    JsonAdaptor2.prototype.remove = function(dm, keyField, value, tableName) {
      var ds = dm.dataSource.json;
      var i;
      if (typeof value === "object" && !(value instanceof Date)) {
        value = DataUtil.getObject(keyField, value);
      }
      for (i = 0; i < ds.length; i++) {
        if (DataUtil.getObject(keyField, ds[i]) === value) {
          break;
        }
      }
      return i !== ds.length ? ds.splice(i, 1) : null;
    };
    JsonAdaptor2.prototype.update = function(dm, keyField, value, tableName) {
      var ds = dm.dataSource.json;
      var i;
      var key;
      if (!isNullOrUndefined(keyField)) {
        key = getValue(keyField, value);
      }
      for (i = 0; i < ds.length; i++) {
        if (!isNullOrUndefined(keyField) && getValue(keyField, ds[i]) === key) {
          break;
        }
      }
      return i < ds.length ? merge(ds[i], value) : null;
    };
    return JsonAdaptor2;
  }(Adaptor)
);
var UrlAdaptor = (
  /** @class */
  function(_super) {
    __extends$P(UrlAdaptor2, _super);
    function UrlAdaptor2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    UrlAdaptor2.prototype.processQuery = function(dm, query, hierarchyFilters) {
      var queries = this.getQueryRequest(query);
      var singles = Query.filterQueryLists(query.queries, ["onSelect", "onPage", "onSkip", "onTake", "onRange"]);
      var params = query.params;
      var url = dm.dataSource.url;
      var temp;
      var skip;
      var take = null;
      var options = this.options;
      var request = { sorts: [], groups: [], filters: [], searches: [], aggregates: [] };
      if ("onPage" in singles) {
        temp = singles.onPage;
        skip = DataUtil.getValue(temp.pageIndex, query);
        take = DataUtil.getValue(temp.pageSize, query);
        skip = (skip - 1) * take;
      } else if ("onRange" in singles) {
        temp = singles.onRange;
        skip = temp.start;
        take = temp.end - temp.start;
      }
      for (var i = 0; i < queries.sorts.length; i++) {
        temp = DataUtil.getValue(queries.sorts[i].e.fieldName, query);
        request.sorts.push(DataUtil.callAdaptorFunction(this, "onEachSort", { name: temp, direction: queries.sorts[i].e.direction }, query));
      }
      if (hierarchyFilters) {
        temp = this.getFiltersFrom(hierarchyFilters, query);
        if (temp) {
          request.filters.push(DataUtil.callAdaptorFunction(this, "onEachWhere", temp.toJson(), query));
        }
      }
      for (var i = 0; i < queries.filters.length; i++) {
        var res = DataUtil.callAdaptorFunction(this, "onEachWhere", queries.filters[i].e.toJson(), query);
        if (this.getModuleName && this.getModuleName() === "ODataV4Adaptor" && !isNullOrUndefined(queries.filters[i].e.key) && queries.filters.length > 1) {
          res = "(" + res + ")";
        }
        request.filters.push(res);
        var keys_3 = typeof request.filters[i] === "object" ? Object.keys(request.filters[i]) : [];
        for (var _i = 0, keys_1 = keys_3; _i < keys_1.length; _i++) {
          var prop = keys_1[_i];
          if (DataUtil.isNull(request[prop])) {
            delete request[prop];
          }
        }
      }
      for (var i = 0; i < queries.searches.length; i++) {
        temp = queries.searches[i].e;
        request.searches.push(DataUtil.callAdaptorFunction(this, "onEachSearch", {
          fields: temp.fieldNames,
          operator: temp.operator,
          key: temp.searchKey,
          ignoreCase: temp.ignoreCase
        }, query));
      }
      for (var i = 0; i < queries.groups.length; i++) {
        request.groups.push(DataUtil.getValue(queries.groups[i].e.fieldName, query));
      }
      for (var i = 0; i < queries.aggregates.length; i++) {
        temp = queries.aggregates[i].e;
        request.aggregates.push({ type: temp.type, field: DataUtil.getValue(temp.field, query) });
      }
      var req = {};
      this.getRequestQuery(options, query, singles, request, req);
      DataUtil.callAdaptorFunction(this, "addParams", { dm, query, params, reqParams: req });
      if (query.lazyLoad.length) {
        for (var i = 0; i < query.lazyLoad.length; i++) {
          req[query.lazyLoad[i].key] = query.lazyLoad[i].value;
        }
      }
      var keys2 = Object.keys(req);
      for (var _a = 0, keys_2 = keys2; _a < keys_2.length; _a++) {
        var prop = keys_2[_a];
        if (DataUtil.isNull(req[prop]) || req[prop] === "" || req[prop].length === 0) {
          delete req[prop];
        }
      }
      if (!(options.skip in req && options.take in req) && take !== null) {
        req[options.skip] = DataUtil.callAdaptorFunction(this, "onSkip", skip, query);
        req[options.take] = DataUtil.callAdaptorFunction(this, "onTake", take, query);
      }
      var p2 = this.pvt;
      this.pvt = {};
      if (this.options.requestType === "json") {
        return {
          data: JSON.stringify(req, DataUtil.parse.jsonDateReplacer),
          url,
          pvtData: p2,
          type: "POST",
          contentType: "application/json; charset=utf-8"
        };
      }
      temp = this.convertToQueryString(req, query, dm);
      temp = (dm.dataSource.url.indexOf("?") !== -1 ? "&" : "/") + temp;
      return {
        type: "GET",
        url: temp.length ? url.replace(/\/*$/, temp) : url,
        pvtData: p2
      };
    };
    UrlAdaptor2.prototype.getRequestQuery = function(options, query, singles, request, request1) {
      var param = "param";
      var req = request1;
      req[options.from] = query.fromTable;
      if (options.apply && query.distincts.length) {
        req[options.apply] = "onDistinct" in this ? DataUtil.callAdaptorFunction(this, "onDistinct", query.distincts) : "";
      }
      if (!query.distincts.length && options.expand) {
        req[options.expand] = "onExpand" in this && "onSelect" in singles ? DataUtil.callAdaptorFunction(this, "onExpand", { selects: DataUtil.getValue(singles.onSelect.fieldNames, query), expands: query.expands }, query) : query.expands;
      }
      req[options.select] = "onSelect" in singles && !query.distincts.length ? DataUtil.callAdaptorFunction(this, "onSelect", DataUtil.getValue(singles.onSelect.fieldNames, query), query) : "";
      req[options.count] = query.isCountRequired ? DataUtil.callAdaptorFunction(this, "onCount", query.isCountRequired, query) : "";
      req[options.search] = request.searches.length ? DataUtil.callAdaptorFunction(this, "onSearch", request.searches, query) : "";
      req[options.skip] = "onSkip" in singles ? DataUtil.callAdaptorFunction(this, "onSkip", DataUtil.getValue(singles.onSkip.nos, query), query) : "";
      req[options.take] = "onTake" in singles ? DataUtil.callAdaptorFunction(this, "onTake", DataUtil.getValue(singles.onTake.nos, query), query) : "";
      req[options.where] = request.filters.length || request.searches.length ? DataUtil.callAdaptorFunction(this, "onWhere", request.filters, query) : "";
      req[options.sortBy] = request.sorts.length ? DataUtil.callAdaptorFunction(this, "onSortBy", request.sorts, query) : "";
      req[options.group] = request.groups.length ? DataUtil.callAdaptorFunction(this, "onGroup", request.groups, query) : "";
      req[options.aggregates] = request.aggregates.length ? DataUtil.callAdaptorFunction(this, "onAggregates", request.aggregates, query) : "";
      req[param] = [];
    };
    UrlAdaptor2.prototype.convertToQueryString = function(request, query, dm) {
      return "";
    };
    UrlAdaptor2.prototype.processResponse = function(data, ds, query, xhr, request, changes) {
      if (xhr && xhr.getResponseHeader("Content-Type") && xhr.getResponseHeader("Content-Type").indexOf("application/json") !== -1) {
        var handleTimeZone = DataUtil.timeZoneHandling;
        if (ds && !ds.timeZoneHandling) {
          DataUtil.timeZoneHandling = false;
        }
        data = DataUtil.parse.parseJson(data);
        DataUtil.timeZoneHandling = handleTimeZone;
      }
      var requests = request;
      var pvt = requests.pvtData || {};
      var groupDs = data ? data.groupDs : [];
      if (xhr && xhr.getResponseHeader("Content-Type") && xhr.getResponseHeader("Content-Type").indexOf("xml") !== -1) {
        return query.isCountRequired ? { result: [], count: 0 } : [];
      }
      var d = JSON.parse(requests.data);
      if (d && d.action === "batch" && data && data.addedRecords) {
        changes.addedRecords = data.addedRecords;
        return changes;
      }
      if (data && data.d) {
        data = data.d;
      }
      var args = {};
      if (data && "count" in data) {
        args.count = data.count;
      }
      args.result = data && data.result ? data.result : data;
      var isExpand = false;
      if (Array.isArray(data.result) && data.result.length) {
        var key = "key";
        var val = "value";
        var level = "level";
        if (!isNullOrUndefined(data.result[0][key])) {
          args.result = this.formRemoteGroupedData(args.result, 1, pvt.groups.length - 1);
        }
        if (query && query.lazyLoad.length && pvt.groups.length) {
          for (var i = 0; i < query.lazyLoad.length; i++) {
            if (query.lazyLoad[i][key] === "onDemandGroupInfo") {
              var value = query.lazyLoad[i][val][level];
              if (pvt.groups.length === value) {
                isExpand = true;
              }
            }
          }
        }
      }
      if (!isExpand) {
        this.getAggregateResult(pvt, data, args, groupDs, query);
      }
      return DataUtil.isNull(args.count) ? args.result : { result: args.result, count: args.count, aggregates: args.aggregates };
    };
    UrlAdaptor2.prototype.formRemoteGroupedData = function(data, level, childLevel) {
      for (var i = 0; i < data.length; i++) {
        if (data[i].items.length && Object.keys(data[i].items[0]).indexOf("key") > -1) {
          this.formRemoteGroupedData(data[i].items, level + 1, childLevel - 1);
        }
      }
      var uid2 = "GroupGuid";
      var childLvl = "childLevels";
      var lvl = "level";
      var records = "records";
      data[uid2] = consts[uid2];
      data[lvl] = level;
      data[childLvl] = childLevel;
      data[records] = data[0].items.length ? this.getGroupedRecords(data, !isNullOrUndefined(data[0].items[records])) : [];
      return data;
    };
    UrlAdaptor2.prototype.getGroupedRecords = function(data, hasRecords) {
      var childGroupedRecords = [];
      var records = "records";
      for (var i = 0; i < data.length; i++) {
        if (!hasRecords) {
          for (var j = 0; j < data[i].items.length; j++) {
            childGroupedRecords.push(data[i].items[j]);
          }
        } else {
          childGroupedRecords = childGroupedRecords.concat(data[i].items[records]);
        }
      }
      return childGroupedRecords;
    };
    UrlAdaptor2.prototype.onGroup = function(e) {
      this.pvt.groups = e;
      return e;
    };
    UrlAdaptor2.prototype.onAggregates = function(e) {
      this.pvt.aggregates = e;
    };
    UrlAdaptor2.prototype.batchRequest = function(dm, changes, e, query, original) {
      var url;
      var key;
      return {
        type: "POST",
        url: dm.dataSource.batchUrl || dm.dataSource.crudUrl || dm.dataSource.removeUrl || dm.dataSource.url,
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        data: JSON.stringify(extend({}, {
          changed: changes.changedRecords,
          added: changes.addedRecords,
          deleted: changes.deletedRecords,
          action: "batch",
          table: e[url],
          key: e[key]
        }, DataUtil.getAddParams(this, dm, query)))
      };
    };
    UrlAdaptor2.prototype.beforeSend = function(dm, request) {
    };
    UrlAdaptor2.prototype.insert = function(dm, data, tableName, query) {
      return {
        url: dm.dataSource.insertUrl || dm.dataSource.crudUrl || dm.dataSource.url,
        data: JSON.stringify(extend({}, {
          value: data,
          table: tableName,
          action: "insert"
        }, DataUtil.getAddParams(this, dm, query)))
      };
    };
    UrlAdaptor2.prototype.remove = function(dm, keyField, value, tableName, query) {
      return {
        type: "POST",
        url: dm.dataSource.removeUrl || dm.dataSource.crudUrl || dm.dataSource.url,
        data: JSON.stringify(extend({}, {
          key: value,
          keyColumn: keyField,
          table: tableName,
          action: "remove"
        }, DataUtil.getAddParams(this, dm, query)))
      };
    };
    UrlAdaptor2.prototype.update = function(dm, keyField, value, tableName, query) {
      return {
        type: "POST",
        url: dm.dataSource.updateUrl || dm.dataSource.crudUrl || dm.dataSource.url,
        data: JSON.stringify(extend({}, {
          value,
          action: "update",
          keyColumn: keyField,
          key: DataUtil.getObject(keyField, value),
          table: tableName
        }, DataUtil.getAddParams(this, dm, query)))
      };
    };
    UrlAdaptor2.prototype.getFiltersFrom = function(data, query) {
      var key = query.fKey;
      var value;
      var prop = key;
      var pKey = query.key;
      var predicats = [];
      if (typeof data[0] !== "object") {
        prop = null;
      }
      for (var i = 0; i < data.length; i++) {
        if (typeof data[0] === "object") {
          value = DataUtil.getObject(pKey || prop, data[i]);
        } else {
          value = data[i];
        }
        predicats.push(new Predicate(key, "equal", value));
      }
      return Predicate.or(predicats);
    };
    UrlAdaptor2.prototype.getAggregateResult = function(pvt, data, args, groupDs, query) {
      var pData = data;
      if (data && data.result) {
        pData = data.result;
      }
      if (pvt && pvt.aggregates && pvt.aggregates.length) {
        var agg = pvt.aggregates;
        var fn = void 0;
        var aggregateData = pData;
        var res = {};
        if (data.aggregate) {
          aggregateData = data.aggregate;
        }
        for (var i = 0; i < agg.length; i++) {
          fn = DataUtil.aggregates[agg[i].type];
          if (fn) {
            res[agg[i].field + " - " + agg[i].type] = fn(aggregateData, agg[i].field);
          }
        }
        args.aggregates = res;
      }
      var key = "key";
      var isServerGrouping = Array.isArray(data.result) && data.result.length && !isNullOrUndefined(data.result[0][key]);
      if (pvt && pvt.groups && pvt.groups.length && !isServerGrouping) {
        var groups = pvt.groups;
        for (var i = 0; i < groups.length; i++) {
          var level = null;
          if (!isNullOrUndefined(groupDs)) {
            groupDs = DataUtil.group(groupDs, groups[i]);
          }
          var groupQuery = Query.filterQueries(query.queries, "onGroup")[i].e;
          pData = DataUtil.group(pData, groups[i], pvt.aggregates, level, groupDs, groupQuery.comparer);
        }
        args.result = pData;
      }
      return args;
    };
    UrlAdaptor2.prototype.getQueryRequest = function(query) {
      var req = { sorts: [], groups: [], filters: [], searches: [], aggregates: [] };
      req.sorts = Query.filterQueries(query.queries, "onSortBy");
      req.groups = Query.filterQueries(query.queries, "onGroup");
      req.filters = Query.filterQueries(query.queries, "onWhere");
      req.searches = Query.filterQueries(query.queries, "onSearch");
      req.aggregates = Query.filterQueries(query.queries, "onAggregates");
      return req;
    };
    UrlAdaptor2.prototype.addParams = function(options) {
      var req = options.reqParams;
      if (options.params.length) {
        req.params = {};
      }
      for (var _i = 0, _a = options.params; _i < _a.length; _i++) {
        var tmp = _a[_i];
        if (req[tmp.key]) {
          throw new Error("Query() - addParams: Custom Param is conflicting other request arguments");
        }
        req[tmp.key] = tmp.value;
        if (tmp.fn) {
          req[tmp.key] = tmp.fn.call(options.query, tmp.key, options.query, options.dm);
        }
        req.params[tmp.key] = req[tmp.key];
      }
    };
    return UrlAdaptor2;
  }(Adaptor)
);
var ODataAdaptor = (
  /** @class */
  function(_super) {
    __extends$P(ODataAdaptor2, _super);
    function ODataAdaptor2(props2) {
      var _this = _super.call(this) || this;
      _this.options = extend({}, _this.options, {
        requestType: "get",
        accept: "application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",
        multipartAccept: "multipart/mixed",
        sortBy: "$orderby",
        select: "$select",
        skip: "$skip",
        take: "$top",
        count: "$inlinecount",
        where: "$filter",
        expand: "$expand",
        batch: "$batch",
        changeSet: "--changeset_",
        batchPre: "batch_",
        contentId: "Content-Id: ",
        batchContent: "Content-Type: multipart/mixed; boundary=",
        changeSetContent: "Content-Type: application/http\nContent-Transfer-Encoding: binary ",
        batchChangeSetContentType: "Content-Type: application/json; charset=utf-8 ",
        updateType: "PUT"
      });
      extend(_this.options, props2 || {});
      return _this;
    }
    ODataAdaptor2.prototype.getModuleName = function() {
      return "ODataAdaptor";
    };
    ODataAdaptor2.prototype.onPredicate = function(predicate, query, requiresCast) {
      var returnValue = "";
      var operator;
      var guid;
      var val = predicate.value;
      var type = typeof val;
      var field = predicate.field ? ODataAdaptor2.getField(predicate.field) : null;
      if (val instanceof Date) {
        val = "datetime'" + DataUtil.parse.replacer(val) + "'";
      }
      if (type === "string") {
        val = val.replace(/'/g, "''");
        if (predicate.ignoreCase) {
          val = val.toLowerCase();
        }
        if (predicate.operator !== "like") {
          val = encodeURIComponent(val);
        }
        if (predicate.operator !== "wildcard" && predicate.operator !== "like") {
          val = "'" + val + "'";
        }
        if (requiresCast) {
          field = "cast(" + field + ", 'Edm.String')";
        }
        if (DataUtil.parse.isGuid(val)) {
          guid = "guid";
        }
        if (predicate.ignoreCase) {
          if (!guid) {
            field = "tolower(" + field + ")";
          }
          val = val.toLowerCase();
        }
      }
      if (predicate.operator === "isempty" || predicate.operator === "isnull" || predicate.operator === "isnotempty" || predicate.operator === "isnotnull") {
        operator = predicate.operator.indexOf("isnot") !== -1 ? DataUtil.odBiOperator["notequal"] : DataUtil.odBiOperator["equal"];
        val = predicate.operator === "isnull" || predicate.operator === "isnotnull" ? null : "''";
      } else {
        operator = DataUtil.odBiOperator[predicate.operator];
      }
      if (operator) {
        returnValue += field;
        returnValue += operator;
        if (guid) {
          returnValue += guid;
        }
        return returnValue + val;
      }
      if (!isNullOrUndefined(this.getModuleName) && this.getModuleName() === "ODataV4Adaptor") {
        operator = DataUtil.odv4UniOperator[predicate.operator];
      } else {
        operator = DataUtil.odUniOperator[predicate.operator];
      }
      if (operator === "like") {
        val = val;
        if (val.indexOf("%") !== -1) {
          if (val.charAt(0) === "%" && val.lastIndexOf("%") < 2) {
            val = val.substring(1, val.length);
            operator = !isNullOrUndefined(this.getModuleName) && this.getModuleName() === "ODataV4Adaptor" ? DataUtil.odv4UniOperator["startswith"] : DataUtil.odUniOperator["startswith"];
          } else if (val.charAt(val.length - 1) === "%" && val.indexOf("%") > val.length - 3) {
            val = val.substring(0, val.length - 1);
            operator = !isNullOrUndefined(this.getModuleName) && this.getModuleName() === "ODataV4Adaptor" ? DataUtil.odv4UniOperator["endswith"] : DataUtil.odUniOperator["endswith"];
          } else if (val.lastIndexOf("%") !== val.indexOf("%") && val.lastIndexOf("%") > val.indexOf("%") + 1) {
            val = val.substring(val.indexOf("%") + 1, val.lastIndexOf("%"));
            operator = !isNullOrUndefined(this.getModuleName) && this.getModuleName() === "ODataV4Adaptor" ? DataUtil.odv4UniOperator["contains"] : DataUtil.odUniOperator["contains"];
          } else {
            operator = !isNullOrUndefined(this.getModuleName) && this.getModuleName() === "ODataV4Adaptor" ? DataUtil.odv4UniOperator["contains"] : DataUtil.odUniOperator["contains"];
          }
        }
        val = encodeURIComponent(val);
        val = "'" + val + "'";
      } else if (operator === "wildcard") {
        val = val;
        if (val.indexOf("*") !== -1) {
          var splittedStringValue = val.split("*");
          var splittedValue = void 0;
          var count = 0;
          if (val.indexOf("*") !== 0 && splittedStringValue[0].indexOf("%3f") === -1 && splittedStringValue[0].indexOf("?") === -1) {
            splittedValue = splittedStringValue[0];
            splittedValue = "'" + splittedValue + "'";
            operator = !isNullOrUndefined(this.getModuleName) && this.getModuleName() === "ODataV4Adaptor" ? DataUtil.odv4UniOperator["startswith"] : DataUtil.odUniOperator["startswith"];
            returnValue += operator + "(";
            returnValue += field + ",";
            if (guid) {
              returnValue += guid;
            }
            returnValue += splittedValue + ")";
            count++;
          }
          if (val.lastIndexOf("*") !== val.length - 1 && splittedStringValue[splittedStringValue.length - 1].indexOf("%3f") === -1 && splittedStringValue[splittedStringValue.length - 1].indexOf("?") === -1) {
            splittedValue = splittedStringValue[splittedStringValue.length - 1];
            splittedValue = "'" + splittedValue + "'";
            operator = !isNullOrUndefined(this.getModuleName) && this.getModuleName() === "ODataV4Adaptor" ? DataUtil.odv4UniOperator["endswith"] : DataUtil.odUniOperator["endswith"];
            if (count > 0) {
              returnValue += " and ";
            }
            returnValue += operator + "(";
            returnValue += field + ",";
            if (guid) {
              returnValue += guid;
            }
            returnValue += splittedValue + ")";
            count++;
          }
          if (splittedStringValue.length > 2) {
            for (var i = 1; i < splittedStringValue.length - 1; i++) {
              if (splittedStringValue[i].indexOf("%3f") === -1 && splittedStringValue[i].indexOf("?") === -1) {
                splittedValue = splittedStringValue[i];
                splittedValue = "'" + splittedValue + "'";
                operator = !isNullOrUndefined(this.getModuleName) && this.getModuleName() === "ODataV4Adaptor" ? DataUtil.odv4UniOperator["contains"] : DataUtil.odUniOperator["contains"];
                if (count > 0) {
                  returnValue += " and ";
                }
                if (operator === "substringof" || operator === "not substringof") {
                  var temp = splittedValue;
                  splittedValue = field;
                  field = temp;
                }
                returnValue += operator + "(";
                returnValue += field + ",";
                if (guid) {
                  returnValue += guid;
                }
                returnValue += splittedValue + ")";
                count++;
              }
            }
          }
          if (count === 0) {
            operator = !isNullOrUndefined(this.getModuleName) && this.getModuleName() === "ODataV4Adaptor" ? DataUtil.odv4UniOperator["contains"] : DataUtil.odUniOperator["contains"];
            if (val.indexOf("?") !== -1 || val.indexOf("%3f") !== -1) {
              val = val.indexOf("?") !== -1 ? val.split("?").join("") : val.split("%3f").join("");
            }
            val = "'" + val + "'";
          } else {
            operator = "wildcard";
          }
        } else {
          operator = !isNullOrUndefined(this.getModuleName) && this.getModuleName() === "ODataV4Adaptor" ? DataUtil.odv4UniOperator["contains"] : DataUtil.odUniOperator["contains"];
          if (val.indexOf("?") !== -1 || val.indexOf("%3f") !== -1) {
            val = val.indexOf("?") !== -1 ? val.split("?").join("") : val.split("%3f").join("");
          }
          val = "'" + val + "'";
        }
      }
      if (operator === "substringof" || operator === "not substringof") {
        var temp = val;
        val = field;
        field = temp;
      }
      if (operator !== "wildcard") {
        returnValue += operator + "(";
        returnValue += field + ",";
        if (guid) {
          returnValue += guid;
        }
        returnValue += val + ")";
      }
      return returnValue;
    };
    ODataAdaptor2.prototype.addParams = function(options) {
      _super.prototype.addParams.call(this, options);
      delete options.reqParams.params;
    };
    ODataAdaptor2.prototype.onComplexPredicate = function(predicate, query, requiresCast) {
      var res = [];
      for (var i = 0; i < predicate.predicates.length; i++) {
        res.push("(" + this.onEachWhere(predicate.predicates[i], query, requiresCast) + ")");
      }
      return res.join(" " + predicate.condition + " ");
    };
    ODataAdaptor2.prototype.onEachWhere = function(filter2, query, requiresCast) {
      return filter2.isComplex ? this.onComplexPredicate(filter2, query, requiresCast) : this.onPredicate(filter2, query, requiresCast);
    };
    ODataAdaptor2.prototype.onWhere = function(filters) {
      if (this.pvt.search) {
        filters.push(this.onEachWhere(this.pvt.search, null, true));
      }
      return filters.join(" and ");
    };
    ODataAdaptor2.prototype.onEachSearch = function(e) {
      if (e.fields && e.fields.length === 0) {
        DataUtil.throwError("Query() - Search : oData search requires list of field names to search");
      }
      var filter2 = this.pvt.search || [];
      for (var i = 0; i < e.fields.length; i++) {
        filter2.push(new Predicate(e.fields[i], e.operator, e.key, e.ignoreCase));
      }
      this.pvt.search = filter2;
    };
    ODataAdaptor2.prototype.onSearch = function(e) {
      this.pvt.search = Predicate.or(this.pvt.search);
      return "";
    };
    ODataAdaptor2.prototype.onEachSort = function(e) {
      var res = [];
      if (e.name instanceof Array) {
        for (var i = 0; i < e.name.length; i++) {
          res.push(ODataAdaptor2.getField(e.name[i]) + (e.direction === "descending" ? " desc" : ""));
        }
      } else {
        res.push(ODataAdaptor2.getField(e.name) + (e.direction === "descending" ? " desc" : ""));
      }
      return res.join(",");
    };
    ODataAdaptor2.prototype.onSortBy = function(e) {
      return e.reverse().join(",");
    };
    ODataAdaptor2.prototype.onGroup = function(e) {
      this.pvt.groups = e;
      return [];
    };
    ODataAdaptor2.prototype.onSelect = function(e) {
      for (var i = 0; i < e.length; i++) {
        e[i] = ODataAdaptor2.getField(e[i]);
      }
      return e.join(",");
    };
    ODataAdaptor2.prototype.onAggregates = function(e) {
      this.pvt.aggregates = e;
      return "";
    };
    ODataAdaptor2.prototype.onCount = function(e) {
      return e === true ? "allpages" : "";
    };
    ODataAdaptor2.prototype.beforeSend = function(dm, request, settings) {
      if (DataUtil.endsWith(settings.url, this.options.batch) && settings.type.toLowerCase() === "post") {
        request.setRequestHeader("Accept", this.options.multipartAccept);
        request.setRequestHeader("DataServiceVersion", "2.0");
        request.overrideMimeType("text/plain; charset=x-user-defined");
      } else {
        request.setRequestHeader("Accept", this.options.accept);
      }
      request.setRequestHeader("DataServiceVersion", "2.0");
      request.setRequestHeader("MaxDataServiceVersion", "2.0");
    };
    ODataAdaptor2.prototype.processResponse = function(data, ds, query, xhr, request, changes) {
      var metaCheck = "odata.metadata";
      if (request && request.type === "GET" && !this.rootUrl && data[metaCheck]) {
        var dataUrls = data[metaCheck].split("/$metadata#");
        this.rootUrl = dataUrls[0];
        this.resourceTableName = dataUrls[1];
      }
      var pvtData = "pvtData";
      if (!isNullOrUndefined(data.d)) {
        var dataCopy = query && query.isCountRequired ? data.d.results : data.d;
        var metaData = "__metadata";
        if (!isNullOrUndefined(dataCopy)) {
          for (var i = 0; i < dataCopy.length; i++) {
            if (!isNullOrUndefined(dataCopy[i][metaData])) {
              delete dataCopy[i][metaData];
            }
          }
        }
      }
      var pvt = request && request[pvtData];
      var emptyAndBatch = this.processBatchResponse(data, query, xhr, request, changes);
      if (emptyAndBatch) {
        return emptyAndBatch;
      }
      var versionCheck = xhr && request.getResponseHeader("DataServiceVersion");
      var count = null;
      var version2 = versionCheck && parseInt(versionCheck, 10) || 2;
      if (query && query.isCountRequired) {
        var oDataCount = "__count";
        if (data[oDataCount] || data["odata.count"]) {
          count = data[oDataCount] || data["odata.count"];
        }
        if (data.d) {
          data = data.d;
        }
        if (data[oDataCount] || data["odata.count"]) {
          count = data[oDataCount] || data["odata.count"];
        }
      }
      if (version2 === 3 && data.value) {
        data = data.value;
      }
      if (data.d) {
        data = data.d;
      }
      if (version2 < 3 && data.results) {
        data = data.results;
      }
      var args = {};
      args.count = count;
      args.result = data;
      this.getAggregateResult(pvt, data, args, null, query);
      return DataUtil.isNull(count) ? args.result : { result: args.result, count: args.count, aggregates: args.aggregates };
    };
    ODataAdaptor2.prototype.convertToQueryString = function(request, query, dm) {
      var res = [];
      var table = "table";
      var tableName = request[table] || "";
      var format = "$format";
      delete request[table];
      if (dm.dataSource.requiresFormat) {
        request[format] = "json";
      }
      var keys2 = Object.keys(request);
      for (var _i = 0, keys_4 = keys2; _i < keys_4.length; _i++) {
        var prop = keys_4[_i];
        res.push(prop + "=" + request[prop]);
      }
      res = res.join("&");
      if (dm.dataSource.url && dm.dataSource.url.indexOf("?") !== -1 && !tableName) {
        return res;
      }
      return res.length ? tableName + "?" + res : tableName || "";
    };
    ODataAdaptor2.prototype.localTimeReplacer = function(key, convertObj) {
      for (var _i = 0, _a = !isNullOrUndefined(convertObj) ? Object.keys(convertObj) : []; _i < _a.length; _i++) {
        var prop = _a[_i];
        if (convertObj[prop] instanceof Date) {
          convertObj[prop] = DataUtil.dateParse.toLocalTime(convertObj[prop]);
        }
      }
      return convertObj;
    };
    ODataAdaptor2.prototype.insert = function(dm, data, tableName) {
      return {
        url: (dm.dataSource.insertUrl || dm.dataSource.url).replace(/\/*$/, tableName ? "/" + tableName : ""),
        data: JSON.stringify(data, this.options.localTime ? this.localTimeReplacer : null)
      };
    };
    ODataAdaptor2.prototype.remove = function(dm, keyField, value, tableName) {
      var url;
      if (typeof value === "string" && !DataUtil.parse.isGuid(value)) {
        url = "('" + value + "')";
      } else {
        url = "(" + value + ")";
      }
      return {
        type: "DELETE",
        url: (dm.dataSource.removeUrl || dm.dataSource.url).replace(/\/*$/, tableName ? "/" + tableName : "") + url
      };
    };
    ODataAdaptor2.prototype.update = function(dm, keyField, value, tableName, query, original) {
      if (this.options.updateType === "PATCH" && !isNullOrUndefined(original)) {
        value = this.compareAndRemove(value, original, keyField);
      }
      var url;
      if (typeof value[keyField] === "string" && !DataUtil.parse.isGuid(value[keyField])) {
        url = "('" + value[keyField] + "')";
      } else {
        url = "(" + value[keyField] + ")";
      }
      return {
        type: this.options.updateType,
        url: (dm.dataSource.updateUrl || dm.dataSource.url).replace(/\/*$/, tableName ? "/" + tableName : "") + url,
        data: JSON.stringify(value, this.options.localTime ? this.localTimeReplacer : null),
        accept: this.options.accept
      };
    };
    ODataAdaptor2.prototype.batchRequest = function(dm, changes, e, query, original) {
      var initialGuid = e.guid = DataUtil.getGuid(this.options.batchPre);
      var url = this.rootUrl ? this.rootUrl + "/" + this.options.batch : dm.dataSource.url.replace(/\/*$/, "/" + this.options.batch);
      e.url = this.resourceTableName ? this.resourceTableName : e.url;
      var args = {
        url: e.url,
        key: e.key,
        cid: 1,
        cSet: DataUtil.getGuid(this.options.changeSet)
      };
      var req = "--" + initialGuid + "\n";
      req += "Content-Type: multipart/mixed; boundary=" + args.cSet.replace("--", "") + "\n";
      this.pvt.changeSet = 0;
      req += this.generateInsertRequest(changes.addedRecords, args, dm);
      req += this.generateUpdateRequest(changes.changedRecords, args, dm, original ? original.changedRecords : []);
      req += this.generateDeleteRequest(changes.deletedRecords, args, dm);
      req += args.cSet + "--\n";
      req += "--" + initialGuid + "--";
      return {
        type: "POST",
        url,
        dataType: "json",
        contentType: "multipart/mixed; charset=UTF-8;boundary=" + initialGuid,
        data: req
      };
    };
    ODataAdaptor2.prototype.generateDeleteRequest = function(arr, e, dm) {
      if (!arr) {
        return "";
      }
      var req = "";
      var stat = {
        "method": "DELETE ",
        "url": function(data, i, key) {
          var url = DataUtil.getObject(key, data[i]);
          if (typeof url === "number" || DataUtil.parse.isGuid(url)) {
            return "(" + url + ")";
          } else if (url instanceof Date) {
            var dateTime = data[i][key];
            return "(" + dateTime.toJSON() + ")";
          } else {
            return "('" + url + "')";
          }
        },
        "data": function(data, i) {
          return "";
        }
      };
      req = this.generateBodyContent(arr, e, stat, dm);
      return req + "\n";
    };
    ODataAdaptor2.prototype.generateInsertRequest = function(arr, e, dm) {
      if (!arr) {
        return "";
      }
      var req = "";
      var stat = {
        "method": "POST ",
        "url": function(data, i, key) {
          return "";
        },
        "data": function(data, i) {
          return JSON.stringify(data[i]) + "\n\n";
        }
      };
      req = this.generateBodyContent(arr, e, stat, dm);
      return req;
    };
    ODataAdaptor2.prototype.generateUpdateRequest = function(arr, e, dm, org) {
      var _this = this;
      if (!arr) {
        return "";
      }
      var req = "";
      arr.forEach(function(change) {
        return change = _this.compareAndRemove(change, org.filter(function(o) {
          return DataUtil.getObject(e.key, o) === DataUtil.getObject(e.key, change);
        })[0], e.key);
      });
      var stat = {
        "method": this.options.updateType + " ",
        "url": function(data, i, key) {
          if (typeof data[i][key] === "number" || DataUtil.parse.isGuid(data[i][key])) {
            return "(" + data[i][key] + ")";
          } else if (data[i][key] instanceof Date) {
            var date = data[i][key];
            return "(" + date.toJSON() + ")";
          } else {
            return "('" + data[i][key] + "')";
          }
        },
        "data": function(data, i) {
          return JSON.stringify(data[i]) + "\n\n";
        }
      };
      req = this.generateBodyContent(arr, e, stat, dm);
      return req;
    };
    ODataAdaptor2.getField = function(prop) {
      return prop.replace(/\./g, "/");
    };
    ODataAdaptor2.prototype.generateBodyContent = function(arr, e, stat, dm) {
      var req = "";
      for (var i = 0; i < arr.length; i++) {
        req += "\n" + e.cSet + "\n";
        req += this.options.changeSetContent + "\n\n";
        req += stat.method;
        if (stat.method === "POST ") {
          req += (dm.dataSource.insertUrl || dm.dataSource.crudUrl || e.url) + stat.url(arr, i, e.key) + " HTTP/1.1\n";
        } else if (stat.method === "PUT " || stat.method === "PATCH ") {
          req += (dm.dataSource.updateUrl || dm.dataSource.crudUrl || e.url) + stat.url(arr, i, e.key) + " HTTP/1.1\n";
        } else if (stat.method === "DELETE ") {
          req += (dm.dataSource.removeUrl || dm.dataSource.crudUrl || e.url) + stat.url(arr, i, e.key) + " HTTP/1.1\n";
        }
        req += "Accept: " + this.options.accept + "\n";
        req += "Content-Id: " + this.pvt.changeSet++ + "\n";
        req += this.options.batchChangeSetContentType + "\n";
        if (!isNullOrUndefined(arr[i]["@odata.etag"])) {
          req += "If-Match: " + arr[i]["@odata.etag"] + "\n\n";
          delete arr[i]["@odata.etag"];
        } else {
          req += "\n";
        }
        req += stat.data(arr, i);
      }
      return req;
    };
    ODataAdaptor2.prototype.processBatchResponse = function(data, query, xhr, request, changes) {
      if (xhr && xhr.getResponseHeader("Content-Type") && xhr.getResponseHeader("Content-Type").indexOf("xml") !== -1) {
        return query.isCountRequired ? { result: [], count: 0 } : [];
      }
      if (request && this.options.batch && DataUtil.endsWith(request.url, this.options.batch) && request.type.toLowerCase() === "post") {
        var guid = xhr.getResponseHeader("Content-Type");
        var cIdx = void 0;
        var jsonObj = void 0;
        var d = data + "";
        guid = guid.substring(guid.indexOf("=batchresponse") + 1);
        d = d.split(guid);
        if (d.length < 2) {
          return {};
        }
        d = d[1];
        var exVal = /(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(d);
        if (exVal) {
          d.replace(exVal[0], "");
        }
        var changeGuid = exVal ? exVal[1] : "";
        d = d.split(changeGuid);
        for (var i = d.length; i > -1; i--) {
          if (!/\bContent-ID:/i.test(d[i]) || !/\bHTTP.+201/.test(d[i])) {
            continue;
          }
          cIdx = parseInt(/\bContent-ID: (\d+)/i.exec(d[i])[1], 10);
          if (changes.addedRecords[cIdx]) {
            jsonObj = DataUtil.parse.parseJson(/^\{.+\}/m.exec(d[i])[0]);
            extend({}, changes.addedRecords[cIdx], this.processResponse(jsonObj));
          }
        }
        return changes;
      }
      return null;
    };
    ODataAdaptor2.prototype.compareAndRemove = function(data, original, key) {
      var _this = this;
      if (isNullOrUndefined(original)) {
        return data;
      }
      Object.keys(data).forEach(function(prop) {
        if (prop !== key && prop !== "@odata.etag") {
          if (DataUtil.isPlainObject(data[prop])) {
            _this.compareAndRemove(data[prop], original[prop]);
            var final = Object.keys(data[prop]).filter(function(data2) {
              return data2 !== "@odata.etag";
            });
            if (final.length === 0) {
              delete data[prop];
            }
          } else if (data[prop] === original[prop]) {
            delete data[prop];
          } else if (data[prop] && original[prop] && data[prop].valueOf() === original[prop].valueOf()) {
            delete data[prop];
          }
        }
      });
      return data;
    };
    return ODataAdaptor2;
  }(UrlAdaptor)
);
(function(_super) {
  __extends$P(ODataV4Adaptor, _super);
  function ODataV4Adaptor(props2) {
    var _this = _super.call(this, props2) || this;
    _this.options = extend({}, _this.options, {
      requestType: "get",
      accept: "application/json, text/javascript, */*; q=0.01",
      multipartAccept: "multipart/mixed",
      sortBy: "$orderby",
      select: "$select",
      skip: "$skip",
      take: "$top",
      count: "$count",
      search: "$search",
      where: "$filter",
      expand: "$expand",
      batch: "$batch",
      changeSet: "--changeset_",
      batchPre: "batch_",
      contentId: "Content-Id: ",
      batchContent: "Content-Type: multipart/mixed; boundary=",
      changeSetContent: "Content-Type: application/http\nContent-Transfer-Encoding: binary ",
      batchChangeSetContentType: "Content-Type: application/json; charset=utf-8 ",
      updateType: "PATCH",
      localTime: false,
      apply: "$apply"
    });
    extend(_this.options, props2 || {});
    return _this;
  }
  ODataV4Adaptor.prototype.getModuleName = function() {
    return "ODataV4Adaptor";
  };
  ODataV4Adaptor.prototype.onCount = function(e) {
    return e === true ? "true" : "";
  };
  ODataV4Adaptor.prototype.onPredicate = function(predicate, query, requiresCast) {
    var returnValue = "";
    var val = predicate.value;
    var isDate2 = val instanceof Date;
    if (query instanceof Query) {
      var queries = this.getQueryRequest(query);
      for (var i = 0; i < queries.filters.length; i++) {
        if (queries.filters[i].e.key === predicate.value) {
          requiresCast = true;
        }
      }
    }
    returnValue = _super.prototype.onPredicate.call(this, predicate, query, requiresCast);
    if (isDate2) {
      returnValue = returnValue.replace(/datetime'(.*)'$/, "$1");
    }
    if (DataUtil.parse.isGuid(val)) {
      returnValue = returnValue.replace("guid", "").replace(/'/g, "");
    }
    return returnValue;
  };
  ODataV4Adaptor.prototype.onEachSearch = function(e) {
    var search = this.pvt.searches || [];
    search.push(e.key);
    this.pvt.searches = search;
  };
  ODataV4Adaptor.prototype.onSearch = function(e) {
    return this.pvt.searches.join(" OR ");
  };
  ODataV4Adaptor.prototype.onExpand = function(e) {
    var _this = this;
    var selected = {};
    var expanded = {};
    var expands = e.expands.slice();
    var exArr = [];
    var selects = e.selects.filter(function(item) {
      return item.indexOf(".") > -1;
    });
    selects.forEach(function(select2) {
      var splits = select2.split(".");
      if (!(splits[0] in selected)) {
        selected[splits[0]] = [];
      }
      if (splits.length === 2) {
        if (selected[splits[0]].length && Object.keys(selected).indexOf(splits[0]) !== -1) {
          if (selected[splits[0]][0].indexOf("$expand") !== -1 && selected[splits[0]][0].indexOf(";$select=") === -1) {
            selected[splits[0]][0] = selected[splits[0]][0] + ";$select=" + splits[1];
          } else {
            selected[splits[0]][0] = selected[splits[0]][0] + "," + splits[1];
          }
        } else {
          selected[splits[0]].push("$select=" + splits[1]);
        }
      } else {
        var sel = "$select=" + splits[splits.length - 1];
        var exp2 = "";
        var close_1 = "";
        for (var i = 1; i < splits.length - 1; i++) {
          exp2 = exp2 + "$expand=" + splits[i] + "(";
          close_1 = close_1 + ")";
        }
        var combineVal = exp2 + sel + close_1;
        if (selected[splits[0]].length && Object.keys(selected).indexOf(splits[0]) !== -1 && _this.expandQueryIndex(selected[splits[0]], true)) {
          var idx = _this.expandQueryIndex(selected[splits[0]]);
          selected[splits[0]][idx] = selected[splits[0]][idx] + combineVal.replace("$expand=", ",");
        } else {
          selected[splits[0]].push(combineVal);
        }
      }
    });
    Object.keys(selected).forEach(function(expand) {
      if (expands.indexOf(expand) === -1) {
        expands.push(expand);
      }
    });
    expands.forEach(function(expand) {
      expanded[expand] = expand in selected ? expand + "(" + selected[expand].join(";") + ")" : expand;
    });
    Object.keys(expanded).forEach(function(ex) {
      return exArr.push(expanded[ex]);
    });
    return exArr.join(",");
  };
  ODataV4Adaptor.prototype.expandQueryIndex = function(query, isExpand) {
    for (var i = 0; i < query.length; i++) {
      if (query[i].indexOf("$expand") !== -1) {
        return isExpand ? true : i;
      }
    }
    return isExpand ? false : 0;
  };
  ODataV4Adaptor.prototype.onDistinct = function(distinctFields) {
    var fields = distinctFields.map(function(field) {
      return ODataAdaptor.getField(field);
    }).join(",");
    return "groupby((" + fields + "))";
  };
  ODataV4Adaptor.prototype.onSelect = function(e) {
    return _super.prototype.onSelect.call(this, e.filter(function(item) {
      return item.indexOf(".") === -1;
    }));
  };
  ODataV4Adaptor.prototype.beforeSend = function(dm, request, settings) {
    if (settings.type === "POST" || settings.type === "PUT" || settings.type === "PATCH") {
      request.setRequestHeader("Prefer", "return=representation");
    }
    request.setRequestHeader("Accept", this.options.accept);
  };
  ODataV4Adaptor.prototype.processResponse = function(data, ds, query, xhr, request, changes) {
    var metaName = "@odata.context";
    var metaV4Name = "@context";
    if (request && request.type === "GET" && !this.rootUrl && (data[metaName] || data[metaV4Name])) {
      var dataUrl = data[metaName] ? data[metaName].split("/$metadata#") : data[metaV4Name].split("/$metadata#");
      this.rootUrl = dataUrl[0];
      this.resourceTableName = dataUrl[1];
    }
    var pvtData = "pvtData";
    var pvt = request && request[pvtData];
    var emptyAndBatch = _super.prototype.processBatchResponse.call(this, data, query, xhr, request, changes);
    if (emptyAndBatch) {
      return emptyAndBatch;
    }
    var count = null;
    var dataCount = "@odata.count";
    var dataV4Count = "@count";
    if (query && query.isCountRequired) {
      if (dataCount in data) {
        count = data[dataCount];
      } else if (dataV4Count in data) {
        count = data[dataV4Count];
      }
    }
    data = !isNullOrUndefined(data.value) ? data.value : data;
    var args = {};
    args.count = count;
    args.result = data;
    this.getAggregateResult(pvt, data, args, null, query);
    return DataUtil.isNull(count) ? args.result : { result: args.result, count, aggregates: args.aggregates };
  };
  return ODataV4Adaptor;
})(ODataAdaptor);
(function(_super) {
  __extends$P(WebApiAdaptor, _super);
  function WebApiAdaptor() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  WebApiAdaptor.prototype.getModuleName = function() {
    return "WebApiAdaptor";
  };
  WebApiAdaptor.prototype.insert = function(dm, data, tableName) {
    return {
      type: "POST",
      url: dm.dataSource.url,
      data: JSON.stringify(data)
    };
  };
  WebApiAdaptor.prototype.remove = function(dm, keyField, value, tableName) {
    return {
      type: "DELETE",
      url: dm.dataSource.url + "/" + value,
      data: JSON.stringify(value)
    };
  };
  WebApiAdaptor.prototype.update = function(dm, keyField, value, tableName) {
    return {
      type: "PUT",
      url: dm.dataSource.url,
      data: JSON.stringify(value)
    };
  };
  WebApiAdaptor.prototype.batchRequest = function(dm, changes, e) {
    var _this = this;
    var initialGuid = e.guid = DataUtil.getGuid(this.options.batchPre);
    var url = dm.dataSource.url.replace(/\/*$/, "/" + this.options.batch);
    e.url = this.resourceTableName ? this.resourceTableName : e.url;
    var req = [];
    var _loop_1 = function(i2, x2) {
      changes.addedRecords.forEach(function(j, d) {
        var stat = {
          "method": "POST ",
          "url": function(data, i3, key) {
            return "";
          },
          "data": function(data, i3) {
            return JSON.stringify(data[i3]) + "\n\n";
          }
        };
        req.push("--" + initialGuid);
        req.push("Content-Type: application/http; msgtype=request", "");
        req.push("POST /api/" + (dm.dataSource.insertUrl || dm.dataSource.crudUrl || e.url) + stat.url(changes.addedRecords, i2, e.key) + " HTTP/1.1");
        req.push("Content-Type: application/json; charset=utf-8");
        req.push("Host: " + location.host);
        req.push("", j ? JSON.stringify(j) : "");
      });
    };
    for (var i = 0, x = changes.addedRecords.length; i < x; i++) {
      _loop_1(i);
    }
    var _loop_2 = function(i2, x2) {
      changes.changedRecords.forEach(function(j, d) {
        var stat = {
          "method": _this.options.updateType + " ",
          "url": function(data, i3, key) {
            return "";
          },
          "data": function(data, i3) {
            return JSON.stringify(data[i3]) + "\n\n";
          }
        };
        req.push("--" + initialGuid);
        req.push("Content-Type: application/http; msgtype=request", "");
        req.push("PUT /api/" + (dm.dataSource.updateUrl || dm.dataSource.crudUrl || e.url) + stat.url(changes.changedRecords, i2, e.key) + " HTTP/1.1");
        req.push("Content-Type: application/json; charset=utf-8");
        req.push("Host: " + location.host);
        req.push("", j ? JSON.stringify(j) : "");
      });
    };
    for (var i = 0, x = changes.changedRecords.length; i < x; i++) {
      _loop_2(i);
    }
    var _loop_3 = function(i2, x2) {
      changes.deletedRecords.forEach(function(j, d) {
        var state = {
          "mtd": "DELETE ",
          "url": function(data, i3, key) {
            var url2 = DataUtil.getObject(key, data[i3]);
            if (typeof url2 === "number" || DataUtil.parse.isGuid(url2)) {
              return "/" + url2;
            } else if (url2 instanceof Date) {
              var datTime = data[i3][key];
              return "/" + datTime.toJSON();
            } else {
              return "/'" + url2 + "'";
            }
          },
          "data": function(data, i3) {
            return "";
          }
        };
        req.push("--" + initialGuid);
        req.push("Content-Type: application/http; msgtype=request", "");
        req.push("DELETE /api/" + (dm.dataSource.removeUrl || dm.dataSource.crudUrl || e.url) + state.url(changes.deletedRecords, i2, e.key) + " HTTP/1.1");
        req.push("Content-Type: application/json; charset=utf-8");
        req.push("Host: " + location.host);
        req.push("", j ? JSON.stringify(j) : "");
      });
    };
    for (var i = 0, x = changes.deletedRecords.length; i < x; i++) {
      _loop_3(i);
    }
    req.push("--" + initialGuid + "--", "");
    return {
      type: "POST",
      url,
      contentType: "multipart/mixed; boundary=" + initialGuid,
      data: req.join("\r\n")
    };
  };
  WebApiAdaptor.prototype.beforeSend = function(dm, request, settings) {
    request.setRequestHeader("Accept", "application/json, text/javascript, */*; q=0.01");
  };
  WebApiAdaptor.prototype.processResponse = function(data, ds, query, xhr, request, changes) {
    var pvtData = "pvtData";
    var pvt = request && request[pvtData];
    var count = null;
    var args = {};
    if (request && request.type.toLowerCase() !== "post") {
      var versionCheck = xhr && request.getResponseHeader("DataServiceVersion");
      var version2 = versionCheck && parseInt(versionCheck, 10) || 2;
      if (query && query.isCountRequired) {
        if (!DataUtil.isNull(data.Count)) {
          count = data.Count;
        }
      }
      if (version2 < 3 && data.Items) {
        data = data.Items;
      }
      args.count = count;
      args.result = data;
      this.getAggregateResult(pvt, data, args, null, query);
    }
    args.result = args.result || data;
    return DataUtil.isNull(count) ? args.result : { result: args.result, count: args.count, aggregates: args.aggregates };
  };
  return WebApiAdaptor;
})(ODataAdaptor);
(function(_super) {
  __extends$P(WebMethodAdaptor, _super);
  function WebMethodAdaptor() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  WebMethodAdaptor.prototype.processQuery = function(dm, query, hierarchyFilters) {
    var obj = new UrlAdaptor().processQuery(dm, query, hierarchyFilters);
    var getData = "data";
    var data = DataUtil.parse.parseJson(obj[getData]);
    var result = {};
    var value = "value";
    if (data.param) {
      for (var i = 0; i < data.param.length; i++) {
        var param = data.param[i];
        var key = Object.keys(param)[0];
        result[key] = param[key];
      }
    }
    result[value] = data;
    var pvtData = "pvtData";
    var url = "url";
    return {
      data: JSON.stringify(result),
      url: obj[url],
      pvtData: obj[pvtData],
      type: "POST",
      contentType: "application/json; charset=utf-8"
    };
  };
  return WebMethodAdaptor;
})(UrlAdaptor);
var RemoteSaveAdaptor = (
  /** @class */
  function(_super) {
    __extends$P(RemoteSaveAdaptor2, _super);
    function RemoteSaveAdaptor2() {
      var _this = _super.call(this) || this;
      setValue("beforeSend", UrlAdaptor.prototype.beforeSend, _this);
      return _this;
    }
    RemoteSaveAdaptor2.prototype.insert = function(dm, data, tableName, query, position) {
      this.pvt.position = position;
      this.updateType = "add";
      return {
        url: dm.dataSource.insertUrl || dm.dataSource.crudUrl || dm.dataSource.url,
        data: JSON.stringify(extend({}, {
          value: data,
          table: tableName,
          action: "insert"
        }, DataUtil.getAddParams(this, dm, query)))
      };
    };
    RemoteSaveAdaptor2.prototype.remove = function(dm, keyField, val, tableName, query) {
      _super.prototype.remove.call(this, dm, keyField, val);
      return {
        type: "POST",
        url: dm.dataSource.removeUrl || dm.dataSource.crudUrl || dm.dataSource.url,
        data: JSON.stringify(extend({}, {
          key: val,
          keyColumn: keyField,
          table: tableName,
          action: "remove"
        }, DataUtil.getAddParams(this, dm, query)))
      };
    };
    RemoteSaveAdaptor2.prototype.update = function(dm, keyField, val, tableName, query) {
      this.updateType = "update";
      this.updateKey = keyField;
      return {
        type: "POST",
        url: dm.dataSource.updateUrl || dm.dataSource.crudUrl || dm.dataSource.url,
        data: JSON.stringify(extend({}, {
          value: val,
          action: "update",
          keyColumn: keyField,
          key: val[keyField],
          table: tableName
        }, DataUtil.getAddParams(this, dm, query)))
      };
    };
    RemoteSaveAdaptor2.prototype.processResponse = function(data, ds, query, xhr, request, changes, e) {
      var i;
      var newData = request ? JSON.parse(request.data) : data;
      data = newData.action === "batch" ? DataUtil.parse.parseJson(data) : data;
      if (this.updateType === "add") {
        _super.prototype.insert.call(this, ds, data, null, null, this.pvt.position);
      }
      if (this.updateType === "update") {
        _super.prototype.update.call(this, ds, this.updateKey, data);
      }
      this.updateType = void 0;
      if (data.added) {
        for (i = 0; i < data.added.length; i++) {
          _super.prototype.insert.call(this, ds, data.added[i]);
        }
      }
      if (data.changed) {
        for (i = 0; i < data.changed.length; i++) {
          _super.prototype.update.call(this, ds, e.key, data.changed[i]);
        }
      }
      if (data.deleted) {
        for (i = 0; i < data.deleted.length; i++) {
          _super.prototype.remove.call(this, ds, e.key, data.deleted[i]);
        }
      }
      return data;
    };
    RemoteSaveAdaptor2.prototype.batchRequest = function(dm, changes, e, query, original) {
      return {
        type: "POST",
        url: dm.dataSource.batchUrl || dm.dataSource.crudUrl || dm.dataSource.url,
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        data: JSON.stringify(extend({}, {
          changed: changes.changedRecords,
          added: changes.addedRecords,
          deleted: changes.deletedRecords,
          action: "batch",
          table: e.url,
          key: e.key
        }, DataUtil.getAddParams(this, dm, query)))
      };
    };
    RemoteSaveAdaptor2.prototype.addParams = function(options) {
      var urlParams = new UrlAdaptor();
      urlParams.addParams(options);
    };
    return RemoteSaveAdaptor2;
  }(JsonAdaptor)
);
var CustomDataAdaptor = (
  /** @class */
  function(_super) {
    __extends$P(CustomDataAdaptor2, _super);
    function CustomDataAdaptor2(props2) {
      var _this = _super.call(this) || this;
      _this.options = extend({}, _this.options, {
        getData: new Function(),
        addRecord: new Function(),
        updateRecord: new Function(),
        deleteRecord: new Function(),
        batchUpdate: new Function()
      });
      extend(_this.options, props2 || {});
      return _this;
    }
    CustomDataAdaptor2.prototype.getModuleName = function() {
      return "CustomDataAdaptor";
    };
    return CustomDataAdaptor2;
  }(UrlAdaptor)
);
(function(_super) {
  __extends$P(GraphQLAdaptor, _super);
  function GraphQLAdaptor(options) {
    var _this = _super.call(this) || this;
    _this.opt = options;
    _this.schema = _this.opt.response;
    _this.query = _this.opt.query;
    _this.getVariables = _this.opt.getVariables ? _this.opt.getVariables : function() {
    };
    _this.getQuery = function() {
      return _this.query;
    };
    return _this;
  }
  GraphQLAdaptor.prototype.getModuleName = function() {
    return "GraphQLAdaptor";
  };
  GraphQLAdaptor.prototype.processQuery = function(datamanager, query) {
    var urlQuery = _super.prototype.processQuery.apply(this, arguments);
    var dm = JSON.parse(urlQuery.data);
    var keys2 = [
      "skip",
      "take",
      "sorted",
      "table",
      "select",
      "where",
      "search",
      "requiresCounts",
      "aggregates",
      "params"
    ];
    var temp = {};
    var str = "searchwhereparams";
    keys2.filter(function(e) {
      temp[e] = str.indexOf(e) > -1 ? JSON.stringify(dm[e]) : dm[e];
    });
    var vars = this.getVariables() || {};
    vars["datamanager"] = temp;
    var data = JSON.stringify({
      query: this.getQuery(),
      variables: vars
    });
    urlQuery.data = data;
    return urlQuery;
  };
  GraphQLAdaptor.prototype.processResponse = function(resData, ds, query, xhr, request) {
    var res = resData;
    var count;
    var aggregates;
    var result = getValue(this.schema.result, res.data);
    if (this.schema.count) {
      count = getValue(this.schema.count, res.data);
    }
    if (this.schema.aggregates) {
      aggregates = getValue(this.schema.aggregates, res.data);
      aggregates = !isNullOrUndefined(aggregates) ? DataUtil.parse.parseJson(aggregates) : aggregates;
    }
    var pvt = request.pvtData || {};
    var args = { result, aggregates };
    var data = args;
    if (pvt && pvt.groups && pvt.groups.length) {
      this.getAggregateResult(pvt, data, args, null, query);
    }
    return !isNullOrUndefined(count) ? { result: args.result, count, aggregates } : args.result;
  };
  GraphQLAdaptor.prototype.insert = function() {
    var inserted = _super.prototype.insert.apply(this, arguments);
    return this.generateCrudData(inserted, "insert");
  };
  GraphQLAdaptor.prototype.update = function() {
    var inserted = _super.prototype.update.apply(this, arguments);
    return this.generateCrudData(inserted, "update");
  };
  GraphQLAdaptor.prototype.remove = function() {
    var inserted = _super.prototype.remove.apply(this, arguments);
    return this.generateCrudData(inserted, "remove");
  };
  GraphQLAdaptor.prototype.batchRequest = function(dm, changes, e, query, original) {
    var batch = _super.prototype.batchRequest.apply(this, arguments);
    var bData = JSON.parse(batch.data);
    bData.key = e.key;
    batch.data = JSON.stringify(bData);
    return this.generateCrudData(batch, "batch");
  };
  GraphQLAdaptor.prototype.generateCrudData = function(crudData, action) {
    var parsed = JSON.parse(crudData.data);
    crudData.data = JSON.stringify({
      query: this.opt.getMutation(action),
      variables: parsed
    });
    return crudData;
  };
  return GraphQLAdaptor;
})(UrlAdaptor);
var CacheAdaptor = (
  /** @class */
  function(_super) {
    __extends$P(CacheAdaptor2, _super);
    function CacheAdaptor2(adaptor, timeStamp, pageSize) {
      var _this = _super.call(this) || this;
      _this.isCrudAction = false;
      _this.isInsertAction = false;
      if (!isNullOrUndefined(adaptor)) {
        _this.cacheAdaptor = adaptor;
      }
      _this.pageSize = pageSize;
      _this.guidId = DataUtil.getGuid("cacheAdaptor");
      var obj = { keys: [], results: [] };
      window.localStorage.setItem(_this.guidId, JSON.stringify(obj));
      var guid = _this.guidId;
      if (!isNullOrUndefined(timeStamp)) {
        setInterval(function() {
          var data = DataUtil.parse.parseJson(window.localStorage.getItem(guid));
          var forDel = [];
          for (var i = 0; i < data.results.length; i++) {
            var currentTime = +/* @__PURE__ */ new Date();
            var requestTime = +new Date(data.results[i].timeStamp);
            data.results[i].timeStamp = currentTime - requestTime;
            if (currentTime - requestTime > timeStamp) {
              forDel.push(i);
            }
          }
          for (var i = 0; i < forDel.length; i++) {
            data.results.splice(forDel[i], 1);
            data.keys.splice(forDel[i], 1);
          }
          window.localStorage.removeItem(guid);
          window.localStorage.setItem(guid, JSON.stringify(data));
        }, timeStamp);
      }
      return _this;
    }
    CacheAdaptor2.prototype.generateKey = function(url, query) {
      var queries = this.getQueryRequest(query);
      var singles = Query.filterQueryLists(query.queries, ["onSelect", "onPage", "onSkip", "onTake", "onRange"]);
      var key = url;
      var page = "onPage";
      if (page in singles) {
        key += singles[page].pageIndex;
      }
      queries.sorts.forEach(function(obj) {
        key += obj.e.direction + obj.e.fieldName;
      });
      queries.groups.forEach(function(obj) {
        key += obj.e.fieldName;
      });
      queries.searches.forEach(function(obj) {
        key += obj.e.searchKey;
      });
      for (var filter2 = 0; filter2 < queries.filters.length; filter2++) {
        var currentFilter = queries.filters[filter2];
        if (currentFilter.e.isComplex) {
          var newQuery = query.clone();
          newQuery.queries = [];
          for (var i = 0; i < currentFilter.e.predicates.length; i++) {
            newQuery.queries.push({ fn: "onWhere", e: currentFilter.e.predicates[i], filter: query.queries.filter });
          }
          key += currentFilter.e.condition + this.generateKey(url, newQuery);
        } else {
          key += currentFilter.e.field + currentFilter.e.operator + currentFilter.e.value;
        }
      }
      return key;
    };
    CacheAdaptor2.prototype.processQuery = function(dm, query, hierarchyFilters) {
      var key = this.generateKey(dm.dataSource.url, query);
      var cachedItems = DataUtil.parse.parseJson(window.localStorage.getItem(this.guidId));
      var data = cachedItems ? cachedItems.results[cachedItems.keys.indexOf(key)] : null;
      if (data != null && !this.isCrudAction && !this.isInsertAction) {
        return data;
      }
      this.isCrudAction = null;
      this.isInsertAction = null;
      return this.cacheAdaptor.processQuery.apply(this.cacheAdaptor, [].slice.call(arguments, 0));
    };
    CacheAdaptor2.prototype.processResponse = function(data, ds, query, xhr, request, changes) {
      if (this.isInsertAction || request && this.cacheAdaptor.options.batch && DataUtil.endsWith(request.url, this.cacheAdaptor.options.batch) && request.type.toLowerCase() === "post") {
        return this.cacheAdaptor.processResponse(data, ds, query, xhr, request, changes);
      }
      data = this.cacheAdaptor.processResponse.apply(this.cacheAdaptor, [].slice.call(arguments, 0));
      var key = query ? this.generateKey(ds.dataSource.url, query) : ds.dataSource.url;
      var obj = {};
      obj = DataUtil.parse.parseJson(window.localStorage.getItem(this.guidId));
      var index = obj.keys.indexOf(key);
      if (index !== -1) {
        obj.results.splice(index, 1);
        obj.keys.splice(index, 1);
      }
      obj.results[obj.keys.push(key) - 1] = { keys: key, result: data.result, timeStamp: /* @__PURE__ */ new Date(), count: data.count };
      while (obj.results.length > this.pageSize) {
        obj.results.splice(0, 1);
        obj.keys.splice(0, 1);
      }
      window.localStorage.setItem(this.guidId, JSON.stringify(obj));
      return data;
    };
    CacheAdaptor2.prototype.beforeSend = function(dm, request, settings) {
      if (!isNullOrUndefined(this.cacheAdaptor.options.batch) && DataUtil.endsWith(settings.url, this.cacheAdaptor.options.batch) && settings.type.toLowerCase() === "post") {
        request.setRequestHeader("Accept", this.cacheAdaptor.options.multipartAccept);
      }
      if (!dm.dataSource.crossDomain) {
        request.setRequestHeader("Accept", this.cacheAdaptor.options.accept);
      }
    };
    CacheAdaptor2.prototype.update = function(dm, keyField, value, tableName) {
      this.isCrudAction = true;
      return this.cacheAdaptor.update(dm, keyField, value, tableName);
    };
    CacheAdaptor2.prototype.insert = function(dm, data, tableName) {
      this.isInsertAction = true;
      return this.cacheAdaptor.insert(dm, data, tableName);
    };
    CacheAdaptor2.prototype.remove = function(dm, keyField, value, tableName) {
      this.isCrudAction = true;
      return this.cacheAdaptor.remove(dm, keyField, value, tableName);
    };
    CacheAdaptor2.prototype.batchRequest = function(dm, changes, e) {
      return this.cacheAdaptor.batchRequest(dm, changes, e);
    };
    return CacheAdaptor2;
  }(UrlAdaptor)
);
var DataManager = (
  /** @class */
  function() {
    function DataManager2(dataSource, query, adaptor) {
      var _this = this;
      this.dateParse = true;
      this.timeZoneHandling = true;
      this.requests = [];
      if (!dataSource && !this.dataSource) {
        dataSource = [];
      }
      adaptor = adaptor || dataSource.adaptor;
      if (dataSource && dataSource.timeZoneHandling === false) {
        this.timeZoneHandling = dataSource.timeZoneHandling;
      }
      var data;
      if (dataSource instanceof Array) {
        data = {
          json: dataSource,
          offline: true
        };
      } else if (typeof dataSource === "object") {
        if (!dataSource.json) {
          dataSource.json = [];
        }
        data = {
          url: dataSource.url,
          insertUrl: dataSource.insertUrl,
          removeUrl: dataSource.removeUrl,
          updateUrl: dataSource.updateUrl,
          crudUrl: dataSource.crudUrl,
          batchUrl: dataSource.batchUrl,
          json: dataSource.json,
          headers: dataSource.headers,
          accept: dataSource.accept,
          data: dataSource.data,
          timeTillExpiration: dataSource.timeTillExpiration,
          cachingPageSize: dataSource.cachingPageSize,
          enableCaching: dataSource.enableCaching,
          requestType: dataSource.requestType,
          key: dataSource.key,
          crossDomain: dataSource.crossDomain,
          jsonp: dataSource.jsonp,
          dataType: dataSource.dataType,
          offline: dataSource.offline !== void 0 ? dataSource.offline : dataSource.adaptor instanceof RemoteSaveAdaptor || dataSource.adaptor instanceof CustomDataAdaptor ? false : dataSource.url ? false : true,
          requiresFormat: dataSource.requiresFormat
        };
      } else {
        DataUtil.throwError("DataManager: Invalid arguments");
      }
      if (data.requiresFormat === void 0 && !DataUtil.isCors()) {
        data.requiresFormat = isNullOrUndefined(data.crossDomain) ? true : data.crossDomain;
      }
      if (data.dataType === void 0) {
        data.dataType = "json";
      }
      this.dataSource = data;
      this.defaultQuery = query;
      if (data.url && data.offline && !data.json.length) {
        this.isDataAvailable = false;
        this.adaptor = adaptor || new ODataAdaptor();
        this.dataSource.offline = false;
        this.ready = this.executeQuery(query || new Query());
        this.ready.then(function(e) {
          _this.dataSource.offline = true;
          _this.isDataAvailable = true;
          data.json = e.result;
          _this.adaptor = new JsonAdaptor();
        });
      } else {
        this.adaptor = data.offline ? new JsonAdaptor() : new ODataAdaptor();
      }
      if (!data.jsonp && this.adaptor instanceof ODataAdaptor) {
        data.jsonp = "callback";
      }
      this.adaptor = adaptor || this.adaptor;
      if (data.enableCaching) {
        this.adaptor = new CacheAdaptor(this.adaptor, data.timeTillExpiration, data.cachingPageSize);
      }
      return this;
    }
    DataManager2.prototype.setDefaultQuery = function(query) {
      this.defaultQuery = query;
      return this;
    };
    DataManager2.prototype.executeLocal = function(query) {
      if (!this.defaultQuery && !(query instanceof Query)) {
        DataUtil.throwError("DataManager - executeLocal() : A query is required to execute");
      }
      if (!this.dataSource.json) {
        DataUtil.throwError("DataManager - executeLocal() : Json data is required to execute");
      }
      query = query || this.defaultQuery;
      var result = this.adaptor.processQuery(this, query);
      if (query.subQuery) {
        var from = query.subQuery.fromTable;
        var lookup = query.subQuery.lookups;
        var res = query.isCountRequired ? result.result : result;
        if (lookup && lookup instanceof Array) {
          DataUtil.buildHierarchy(query.subQuery.fKey, from, res, lookup, query.subQuery.key);
        }
        for (var j = 0; j < res.length; j++) {
          if (res[j][from] instanceof Array) {
            res[j] = extend({}, {}, res[j]);
            res[j][from] = this.adaptor.processResponse(query.subQuery.using(new DataManager2(res[j][from].slice(0))).executeLocal(), this, query);
          }
        }
      }
      return this.adaptor.processResponse(result, this, query);
    };
    DataManager2.prototype.executeQuery = function(query, done, fail, always) {
      var _this = this;
      var makeRequest = "makeRequest";
      if (typeof query === "function") {
        always = fail;
        fail = done;
        done = query;
        query = null;
      }
      if (!query) {
        query = this.defaultQuery;
      }
      if (!(query instanceof Query)) {
        DataUtil.throwError("DataManager - executeQuery() : A query is required to execute");
      }
      var deffered = new Deferred$1();
      var args = { query };
      if (!this.dataSource.offline && (this.dataSource.url !== void 0 && this.dataSource.url !== "") || !isNullOrUndefined(this.adaptor[makeRequest]) || this.isCustomDataAdaptor(this.adaptor)) {
        var result = this.adaptor.processQuery(this, query);
        if (!isNullOrUndefined(this.adaptor[makeRequest])) {
          this.adaptor[makeRequest](result, deffered, args, query);
        } else if (!isNullOrUndefined(result.url) || this.isCustomDataAdaptor(this.adaptor)) {
          this.requests = [];
          this.makeRequest(result, deffered, args, query);
        } else {
          args = DataManager2.getDeferedArgs(query, result, args);
          deffered.resolve(args);
        }
      } else {
        DataManager2.nextTick(function() {
          var res = _this.executeLocal(query);
          args = DataManager2.getDeferedArgs(query, res, args);
          deffered.resolve(args);
        });
      }
      if (done || fail) {
        deffered.promise.then(done, fail);
      }
      if (always) {
        deffered.promise.then(always, always);
      }
      return deffered.promise;
    };
    DataManager2.getDeferedArgs = function(query, result, args) {
      if (query.isCountRequired) {
        args.result = result.result;
        args.count = result.count;
        args.aggregates = result.aggregates;
      } else {
        args.result = result;
      }
      return args;
    };
    DataManager2.nextTick = function(fn) {
      (window.setImmediate || window.setTimeout)(fn, 0);
    };
    DataManager2.prototype.extendRequest = function(url, fnSuccess, fnFail) {
      return extend({}, {
        type: "GET",
        dataType: this.dataSource.dataType,
        crossDomain: this.dataSource.crossDomain,
        jsonp: this.dataSource.jsonp,
        cache: true,
        processData: false,
        onSuccess: fnSuccess,
        onFailure: fnFail
      }, url);
    };
    DataManager2.prototype.makeRequest = function(url, deffered, args, query) {
      var _this = this;
      var isSelector = !!query.subQuerySelector;
      var fnFail = function(e) {
        args.error = e;
        deffered.reject(args);
      };
      var process = function(data, count, xhr, request2, actual, aggregates, virtualSelectRecords) {
        args.xhr = xhr;
        args.count = count ? parseInt(count.toString(), 10) : 0;
        args.result = data;
        args.request = request2;
        args.aggregates = aggregates;
        args.actual = actual;
        args.virtualSelectRecords = virtualSelectRecords;
        deffered.resolve(args);
      };
      var fnQueryChild = function(data, selector) {
        var subDeffer = new Deferred$1();
        var childArgs = { parent: args };
        query.subQuery.isChild = true;
        var subUrl = _this.adaptor.processQuery(_this, query.subQuery, data ? _this.adaptor.processResponse(data) : selector);
        var childReq = _this.makeRequest(subUrl, subDeffer, childArgs, query.subQuery);
        if (!isSelector) {
          subDeffer.then(function(subData) {
            if (data) {
              DataUtil.buildHierarchy(query.subQuery.fKey, query.subQuery.fromTable, data, subData, query.subQuery.key);
              process(data, subData.count, subData.xhr);
            }
          }, fnFail);
        }
        return childReq;
      };
      var fnSuccess = function(data, request2) {
        if (_this.isGraphQLAdaptor(_this.adaptor)) {
          if (!isNullOrUndefined(data["errors"])) {
            return fnFail(data["errors"]);
          }
        }
        if (_this.isCustomDataAdaptor(_this.adaptor)) {
          request2 = extend({}, _this.ajaxReqOption, request2);
        }
        if (request2.httpRequest.getResponseHeader("Content-Type").indexOf("xml") === -1 && _this.dateParse) {
          data = DataUtil.parse.parseJson(data);
        }
        var result = _this.adaptor.processResponse(data, _this, query, request2.httpRequest, request2);
        var count = 0;
        var aggregates = null;
        var virtualSelectRecords = "virtualSelectRecords";
        var virtualRecords = data[virtualSelectRecords];
        if (query.isCountRequired) {
          count = result.count;
          aggregates = result.aggregates;
          result = result.result;
        }
        if (!query.subQuery) {
          process(result, count, request2.httpRequest, request2.type, data, aggregates, virtualRecords);
          return;
        }
        if (!isSelector) {
          fnQueryChild(result, request2);
        }
      };
      var req = this.extendRequest(url, fnSuccess, fnFail);
      if (!this.isCustomDataAdaptor(this.adaptor)) {
        var ajax_1 = new Ajax(req);
        ajax_1.beforeSend = function() {
          _this.beforeSend(ajax_1.httpRequest, ajax_1);
        };
        req = ajax_1.send();
        req.catch(function(e) {
          return true;
        });
        this.requests.push(ajax_1);
      } else {
        this.ajaxReqOption = req;
        var request = req;
        this.adaptor.options.getData({
          data: request.data,
          onSuccess: request.onSuccess,
          onFailure: request.onFailure
        });
      }
      if (isSelector) {
        var promise = void 0;
        var res = query.subQuerySelector.call(this, { query: query.subQuery, parent: query });
        if (res && res.length) {
          promise = Promise.all([req, fnQueryChild(null, res)]);
          promise.then(function() {
            var args2 = [];
            for (var _i = 0; _i < arguments.length; _i++) {
              args2[_i] = arguments[_i];
            }
            var result = args2[0];
            var pResult = _this.adaptor.processResponse(result[0], _this, query, _this.requests[0].httpRequest, _this.requests[0]);
            var count = 0;
            if (query.isCountRequired) {
              count = pResult.count;
              pResult = pResult.result;
            }
            var cResult = _this.adaptor.processResponse(result[1], _this, query.subQuery, _this.requests[1].httpRequest, _this.requests[1]);
            count = 0;
            if (query.subQuery.isCountRequired) {
              count = cResult.count;
              cResult = cResult.result;
            }
            DataUtil.buildHierarchy(query.subQuery.fKey, query.subQuery.fromTable, pResult, cResult, query.subQuery.key);
            isSelector = false;
            process(pResult, count, _this.requests[0].httpRequest);
          });
        } else {
          isSelector = false;
        }
      }
      return req;
    };
    DataManager2.prototype.beforeSend = function(request, settings) {
      this.adaptor.beforeSend(this, request, settings);
      var headers = this.dataSource.headers;
      var props2;
      for (var i = 0; headers && i < headers.length; i++) {
        props2 = [];
        var keys2 = Object.keys(headers[i]);
        for (var _i = 0, keys_1 = keys2; _i < keys_1.length; _i++) {
          var prop = keys_1[_i];
          props2.push(prop);
          request.setRequestHeader(prop, headers[i][prop]);
        }
      }
    };
    DataManager2.prototype.saveChanges = function(changes, key, tableName, query, original) {
      var _this = this;
      if (tableName instanceof Query) {
        query = tableName;
        tableName = null;
      }
      var args = {
        url: tableName,
        key: key || this.dataSource.key
      };
      var req = this.adaptor.batchRequest(this, changes, args, query || new Query(), original);
      var doAjaxRequest = "doAjaxRequest";
      if (this.dataSource.offline) {
        return req;
      }
      if (!isNullOrUndefined(this.adaptor[doAjaxRequest])) {
        return this.adaptor[doAjaxRequest](req);
      } else if (!this.isCustomDataAdaptor(this.adaptor)) {
        var deff_1 = new Deferred$1();
        var ajax_2 = new Ajax(req);
        ajax_2.beforeSend = function() {
          _this.beforeSend(ajax_2.httpRequest, ajax_2);
        };
        ajax_2.onSuccess = function(data, request) {
          if (_this.isGraphQLAdaptor(_this.adaptor)) {
            if (!isNullOrUndefined(data["errors"])) {
              ajax_2.onFailure(JSON.stringify(data["errors"]));
            }
          }
          deff_1.resolve(_this.adaptor.processResponse(data, _this, null, request.httpRequest, request, changes, args));
        };
        ajax_2.onFailure = function(e) {
          deff_1.reject([{ error: e }]);
        };
        ajax_2.send().catch(function(e) {
          return true;
        });
        return deff_1.promise;
      } else {
        return this.doAjaxRequest(req, this.adaptor.options.batchUpdate);
      }
    };
    DataManager2.prototype.insert = function(data, tableName, query, position) {
      if (tableName instanceof Query) {
        query = tableName;
        tableName = null;
      }
      var req = this.adaptor.insert(this, data, tableName, query, position);
      var doAjaxRequest = "doAjaxRequest";
      if (this.dataSource.offline) {
        return req;
      }
      if (!isNullOrUndefined(this.adaptor[doAjaxRequest])) {
        return this.adaptor[doAjaxRequest](req);
      } else {
        return this.doAjaxRequest(req, this.adaptor.options.addRecord);
      }
    };
    DataManager2.prototype.remove = function(keyField, value, tableName, query) {
      if (typeof value === "object") {
        value = DataUtil.getObject(keyField, value);
      }
      if (tableName instanceof Query) {
        query = tableName;
        tableName = null;
      }
      var res = this.adaptor.remove(this, keyField, value, tableName, query);
      var doAjaxRequest = "doAjaxRequest";
      if (this.dataSource.offline) {
        return res;
      }
      if (!isNullOrUndefined(this.adaptor[doAjaxRequest])) {
        return this.adaptor[doAjaxRequest](res);
      } else {
        var remove2 = this.adaptor.options.deleteRecord;
        return this.doAjaxRequest(res, remove2);
      }
    };
    DataManager2.prototype.update = function(keyField, value, tableName, query, original) {
      if (tableName instanceof Query) {
        query = tableName;
        tableName = null;
      }
      var res = this.adaptor.update(this, keyField, value, tableName, query, original);
      var doAjaxRequest = "doAjaxRequest";
      if (this.dataSource.offline) {
        return res;
      }
      if (!isNullOrUndefined(this.adaptor[doAjaxRequest])) {
        return this.adaptor[doAjaxRequest](res);
      } else {
        var update = this.adaptor.options.updateRecord;
        return this.doAjaxRequest(res, update);
      }
    };
    DataManager2.prototype.isCustomDataAdaptor = function(dataSource) {
      return this.adaptor.getModuleName && this.adaptor.getModuleName() === "CustomDataAdaptor";
    };
    DataManager2.prototype.isGraphQLAdaptor = function(dataSource) {
      return this.adaptor.getModuleName && this.adaptor.getModuleName() === "GraphQLAdaptor";
    };
    DataManager2.prototype.successFunc = function(record, request) {
      if (this.isGraphQLAdaptor(this.adaptor)) {
        var data = JSON.parse(record);
        if (!isNullOrUndefined(data["errors"])) {
          this.failureFunc(JSON.stringify(data["errors"]));
        }
      }
      if (this.isCustomDataAdaptor(this.adaptor)) {
        request = extend({}, this.ajaxReqOption, request);
      }
      try {
        DataUtil.parse.parseJson(record);
      } catch (e) {
        record = [];
      }
      record = this.adaptor.processResponse(DataUtil.parse.parseJson(record), this, null, request.httpRequest, request);
      this.ajaxDeffered.resolve(record);
    };
    DataManager2.prototype.failureFunc = function(e) {
      this.ajaxDeffered.reject([{ error: e }]);
    };
    DataManager2.prototype.doAjaxRequest = function(res, ajaxFunc) {
      var _this = this;
      res = extend({}, {
        type: "POST",
        contentType: "application/json; charset=utf-8",
        processData: false
      }, res);
      this.ajaxDeffered = new Deferred$1();
      if (!this.isCustomDataAdaptor(this.adaptor)) {
        var ajax_3 = new Ajax(res);
        ajax_3.beforeSend = function() {
          _this.beforeSend(ajax_3.httpRequest, ajax_3);
        };
        ajax_3.onSuccess = this.successFunc.bind(this);
        ajax_3.onFailure = this.failureFunc.bind(this);
        ajax_3.send().catch(function(e) {
          return true;
        });
      } else {
        this.ajaxReqOption = res;
        ajaxFunc.call(this, {
          data: res.data,
          onSuccess: this.successFunc.bind(this),
          onFailure: this.failureFunc.bind(this)
        });
      }
      return this.ajaxDeffered.promise;
    };
    return DataManager2;
  }()
);
var Deferred$1 = (
  /** @class */
  function() {
    function Deferred2() {
      var _this = this;
      this.promise = new Promise(function(resolve2, reject) {
        _this.resolve = resolve2;
        _this.reject = reject;
      });
      this.then = this.promise.then.bind(this.promise);
      this.catch = this.promise.catch.bind(this.promise);
    }
    return Deferred2;
  }()
);
var actionBegin$1 = "actionBegin";
var actionComplete$1 = "actionComplete";
var actionFailure$1 = "actionFailure";
var cardClick = "cardClick";
var cardDoubleClick = "cardDoubleClick";
var cardRendered = "cardRendered";
var queryCellInfo = "queryCellInfo";
var dataBinding$1 = "dataBinding";
var dataBound$1 = "dataBound";
var dragStart$1 = "dragStart";
var drag$1 = "drag";
var dragStop$1 = "dragStop";
var dialogOpen = "dialogOpen";
var dialogClose = "dialogClose";
var contentReady$1 = "content-ready";
var dataReady$1 = "data-ready";
var bottomSpace = 25;
var cardSpace = 16;
var toggleWidth = 50;
var dataSourceChanged = "dataSourceChanged";
var dataStateChange = "dataStateChange";
var Data$1 = (
  /** @class */
  function() {
    function Data2(parent) {
      this.dataState = { isPending: false, resolver: null, isDataChanged: false };
      this.parent = parent;
      this.keyField = this.parent.cardSettings.headerField;
      this.dataState = { isDataChanged: false };
      this.isObservable = false;
      this.initDataManager(parent.dataSource, parent.query);
      this.refreshDataManager();
    }
    Data2.prototype.initDataManager = function(dataSource, query) {
      this.dataManager = dataSource instanceof DataManager ? dataSource : new DataManager(dataSource);
      this.query = query instanceof Query ? query : new Query();
      this.kanbanData = new DataManager(this.parent.kanbanData);
    };
    Data2.prototype.getQuery = function() {
      return this.query.clone();
    };
    Data2.prototype.getData = function(query) {
      if (this.parent.dataSource && "result" in this.parent.dataSource) {
        var def2 = this.eventPromise({ requestType: "" }, query);
        this.isObservable = true;
        return def2.promise;
      }
      return this.dataManager.executeQuery(query);
    };
    Data2.prototype.setState = function(state) {
      return this.dataState = state;
    };
    Data2.prototype.getStateEventArgument = function(query) {
      var adaptr = new UrlAdaptor();
      var dm = new DataManager({ url: "", adaptor: new UrlAdaptor() });
      var state = adaptr.processQuery(dm, query);
      var data = JSON.parse(state.data);
      return extend(data, state.pvtData);
    };
    Data2.prototype.eventPromise = function(args, query, index) {
      var _this = this;
      var dataArgs = args;
      var state = this.getStateEventArgument(query);
      var def2 = new Deferred$1();
      var deff = new Deferred$1();
      if (args.requestType !== void 0 && this.dataState.isDataChanged !== false) {
        state.action = args;
        if (args.requestType === "cardChanged" || args.requestType === "cardRemoved" || args.requestType === "cardCreated") {
          var editArgs_1 = args;
          editArgs_1.promise = deff.promise;
          editArgs_1.state = state;
          editArgs_1.index = index;
          this.setState({ isPending: true, resolver: deff.resolve });
          dataArgs.endEdit = deff.resolve;
          dataArgs.cancelEdit = deff.reject;
          this.parent.trigger(dataSourceChanged, editArgs_1);
          deff.promise.then(function() {
            _this.setState({ isPending: true, resolver: def2.resolve });
            _this.parent.trigger(dataStateChange, state);
            editArgs_1.addedRecords.forEach(function(data) {
              _this.parent.kanbanData.push(data);
            });
            editArgs_1.changedRecords.forEach(function(changedRecord) {
              var cardObj = _this.parent.kanbanData.filter(function(data) {
                return data[_this.parent.cardSettings.headerField] === changedRecord[_this.parent.cardSettings.headerField];
              })[0];
              extend(cardObj, changedRecord);
            });
            editArgs_1.deletedRecords.forEach(function(deletedRecord) {
              var index2 = _this.parent.kanbanData.findIndex(function(data) {
                return data[_this.parent.cardSettings.headerField] === deletedRecord[_this.parent.cardSettings.headerField];
              });
              _this.parent.kanbanData.splice(index2, 1);
            });
          }).catch(function() {
            _this.parent.hideSpinner();
          });
        } else {
          this.setState({ isPending: true, resolver: def2.resolve });
          this.parent.trigger(dataStateChange, state);
        }
      } else {
        this.setState({});
        def2.resolve(this.parent.dataSource);
      }
      return def2;
    };
    Data2.prototype.getTable = function() {
      if (this.parent.query) {
        var query = this.getQuery();
        return query.fromTable;
      } else {
        return null;
      }
    };
    Data2.prototype.refreshDataManager = function() {
      var _this = this;
      var dataManager = this.getData(this.getQuery());
      dataManager.then(function(e) {
        return _this.dataManagerSuccess(e);
      }).catch(function(e) {
        return _this.dataManagerFailure(e);
      });
    };
    Data2.prototype.dataManagerSuccess = function(e, type, offlineArgs, index) {
      var _this = this;
      if (this.parent.isDestroyed) {
        return;
      }
      if (type) {
        var resultData = extend([], e.result, null, true);
        this.parent.kanbanData = resultData;
      } else {
        this.parent.trigger(dataBinding$1, e, function(args) {
          var resultData2 = extend([], args.result, null, true);
          _this.parent.kanbanData = resultData2;
          _this.parent.notify(dataReady$1, { processedData: resultData2 });
          _this.parent.trigger(dataBound$1, null, function() {
            return _this.parent.hideSpinner();
          });
        });
      }
    };
    Data2.prototype.dataManagerFailure = function(e) {
      var _this = this;
      if (this.parent.isDestroyed) {
        return;
      }
      this.parent.trigger(actionFailure$1, { error: e }, function() {
        return _this.parent.hideSpinner();
      });
    };
    Data2.prototype.updateDataManager = function(updateType, params, type, data, index) {
      var _this = this;
      this.parent.showSpinner();
      var promise;
      var actionArgs = {
        requestType: type,
        cancel: false,
        addedRecords: params.addedRecords,
        changedRecords: params.changedRecords,
        deletedRecords: params.deletedRecords
      };
      this.setState({ isDataChanged: true });
      this.eventPromise(actionArgs, this.query, index);
      this.parent.trigger(actionComplete$1, actionArgs, function(offlineArgs) {
        if (!offlineArgs.cancel) {
          switch (updateType) {
            case "insert":
              promise = _this.dataManager.insert(data, _this.getTable(), _this.getQuery());
              break;
            case "update":
              promise = _this.dataManager.update(_this.keyField, data, _this.getTable(), _this.getQuery());
              break;
            case "delete":
              promise = _this.dataManager.remove(_this.keyField, data, _this.getTable(), _this.getQuery());
              break;
            case "batch":
              promise = _this.dataManager.saveChanges(params, _this.keyField, _this.getTable(), _this.getQuery());
              break;
          }
          if (_this.dataManager.dataSource.offline) {
            if (!_this.isObservable) {
              _this.kanbanData = _this.dataManager;
              _this.parent.kanbanData = _this.dataManager.dataSource.json;
              _this.refreshUI(offlineArgs, index);
            }
          } else {
            promise.then(function(args) {
              if (_this.parent.isDestroyed) {
                return;
              }
              var dataManager = _this.getData(_this.getQuery());
              dataManager.then(function(e) {
                return _this.dataManagerSuccess(e, "DataSourceChange", offlineArgs, index);
              }).catch(function(e) {
                return _this.dataManagerFailure(e);
              });
              if (offlineArgs.requestType === "cardCreated") {
                if (!Array.isArray(args)) {
                  offlineArgs.addedRecords[0] = extend(offlineArgs.addedRecords[0], args);
                } else {
                  _this.modifyArrayData(offlineArgs.addedRecords, args);
                }
              } else if (offlineArgs.requestType === "cardChanged") {
                if (!Array.isArray(args)) {
                  offlineArgs.changedRecords[0] = extend(offlineArgs.changedRecords[0], args);
                } else {
                  _this.modifyArrayData(offlineArgs.changedRecords, args);
                }
              } else if (offlineArgs.requestType === "cardRemoved") {
                if (!Array.isArray(args)) {
                  offlineArgs.deletedRecords[0] = extend(offlineArgs.deletedRecords[0], args);
                } else {
                  _this.modifyArrayData(offlineArgs.deletedRecords, args);
                }
              }
              _this.refreshUI(offlineArgs, index);
            }).catch(function(e) {
              _this.dataManagerFailure(e);
            });
          }
        }
      });
    };
    Data2.prototype.modifyArrayData = function(onLineData, e) {
      if (onLineData.length === e.length) {
        for (var i = 0; i < e.length; i++) {
          onLineData[i] = extend(onLineData[i], e[i]);
        }
      }
      return onLineData;
    };
    Data2.prototype.refreshUI = function(args, position) {
      var _this = this;
      this.parent.layoutModule.columnData = this.parent.layoutModule.getColumnCards();
      if (this.parent.swimlaneSettings.keyField) {
        this.parent.layoutModule.kanbanRows = this.parent.layoutModule.getRows();
        this.parent.layoutModule.swimlaneData = this.parent.layoutModule.getSwimlaneCards();
      }
      args.addedRecords.forEach(function(data, index) {
        if (_this.parent.swimlaneSettings.keyField && !data[_this.parent.swimlaneSettings.keyField]) {
          data[_this.parent.swimlaneSettings.keyField] = "";
        }
        _this.parent.layoutModule.renderCardBasedOnIndex(data, position + index);
      });
      args.changedRecords.forEach(function(data) {
        if (_this.parent.swimlaneSettings.keyField && !data[_this.parent.swimlaneSettings.keyField]) {
          data[_this.parent.swimlaneSettings.keyField] = "";
        }
        _this.parent.layoutModule.removeCard(data);
        _this.parent.layoutModule.renderCardBasedOnIndex(data, position);
        if (_this.parent.layoutModule.isSelectedCard) {
          _this.parent.actionModule.SingleCardSelection(data);
        }
        if (_this.parent.sortSettings.field && _this.parent.sortSettings.sortBy === "Index" && _this.parent.sortSettings.direction === "Descending" && position > 0) {
          --position;
        }
      });
      args.deletedRecords.forEach(function(data) {
        _this.parent.layoutModule.removeCard(data);
      });
      this.parent.layoutModule.refresh();
      this.parent.renderTemplates();
      this.parent.notify(contentReady$1, {});
      this.parent.trigger(dataBound$1, args, function() {
        return _this.parent.hideSpinner();
      });
    };
    return Data2;
  }()
);
var __extends$O = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$D = globalThis && globalThis.__decorate || function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i = decorators.length - 1; i >= 0; i--)
      if (d = decorators[i])
        r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var SwimlaneSettings = (
  /** @class */
  function(_super) {
    __extends$O(SwimlaneSettings2, _super);
    function SwimlaneSettings2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$D([
      Property()
    ], SwimlaneSettings2.prototype, "keyField", void 0);
    __decorate$D([
      Property()
    ], SwimlaneSettings2.prototype, "textField", void 0);
    __decorate$D([
      Property(false)
    ], SwimlaneSettings2.prototype, "showEmptyRow", void 0);
    __decorate$D([
      Property(true)
    ], SwimlaneSettings2.prototype, "showItemCount", void 0);
    __decorate$D([
      Property(false)
    ], SwimlaneSettings2.prototype, "allowDragAndDrop", void 0);
    __decorate$D([
      Property()
    ], SwimlaneSettings2.prototype, "template", void 0);
    __decorate$D([
      Property("Ascending")
    ], SwimlaneSettings2.prototype, "sortDirection", void 0);
    __decorate$D([
      Property()
    ], SwimlaneSettings2.prototype, "sortComparer", void 0);
    __decorate$D([
      Property(true)
    ], SwimlaneSettings2.prototype, "showUnassignedRow", void 0);
    __decorate$D([
      Property(false)
    ], SwimlaneSettings2.prototype, "enableFrozenRows", void 0);
    return SwimlaneSettings2;
  }(ChildProperty)
);
var __extends$N = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$C = globalThis && globalThis.__decorate || function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i = decorators.length - 1; i >= 0; i--)
      if (d = decorators[i])
        r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var CardSettings = (
  /** @class */
  function(_super) {
    __extends$N(CardSettings2, _super);
    function CardSettings2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$C([
      Property(true)
    ], CardSettings2.prototype, "showHeader", void 0);
    __decorate$C([
      Property()
    ], CardSettings2.prototype, "headerField", void 0);
    __decorate$C([
      Property()
    ], CardSettings2.prototype, "contentField", void 0);
    __decorate$C([
      Property()
    ], CardSettings2.prototype, "tagsField", void 0);
    __decorate$C([
      Property()
    ], CardSettings2.prototype, "grabberField", void 0);
    __decorate$C([
      Property()
    ], CardSettings2.prototype, "footerCssField", void 0);
    __decorate$C([
      Property()
    ], CardSettings2.prototype, "template", void 0);
    __decorate$C([
      Property("Single")
    ], CardSettings2.prototype, "selectionType", void 0);
    return CardSettings2;
  }(ChildProperty)
);
var __extends$M = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$B = globalThis && globalThis.__decorate || function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i = decorators.length - 1; i >= 0; i--)
      if (d = decorators[i])
        r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var DialogSettings = (
  /** @class */
  function(_super) {
    __extends$M(DialogSettings2, _super);
    function DialogSettings2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$B([
      Property()
    ], DialogSettings2.prototype, "template", void 0);
    __decorate$B([
      Property([])
    ], DialogSettings2.prototype, "fields", void 0);
    __decorate$B([
      Property(null)
    ], DialogSettings2.prototype, "model", void 0);
    return DialogSettings2;
  }(ChildProperty)
);
var __extends$L = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$A = globalThis && globalThis.__decorate || function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i = decorators.length - 1; i >= 0; i--)
      if (d = decorators[i])
        r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var Columns = (
  /** @class */
  function(_super) {
    __extends$L(Columns2, _super);
    function Columns2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$A([
      Property()
    ], Columns2.prototype, "keyField", void 0);
    __decorate$A([
      Property()
    ], Columns2.prototype, "headerText", void 0);
    __decorate$A([
      Property()
    ], Columns2.prototype, "template", void 0);
    __decorate$A([
      Property(false)
    ], Columns2.prototype, "allowToggle", void 0);
    __decorate$A([
      Property(true)
    ], Columns2.prototype, "isExpanded", void 0);
    __decorate$A([
      Property()
    ], Columns2.prototype, "minCount", void 0);
    __decorate$A([
      Property()
    ], Columns2.prototype, "maxCount", void 0);
    __decorate$A([
      Property(true)
    ], Columns2.prototype, "showItemCount", void 0);
    __decorate$A([
      Property(false)
    ], Columns2.prototype, "showAddButton", void 0);
    __decorate$A([
      Property(true)
    ], Columns2.prototype, "allowDrag", void 0);
    __decorate$A([
      Property(true)
    ], Columns2.prototype, "allowDrop", void 0);
    __decorate$A([
      Property([])
    ], Columns2.prototype, "transitionColumns", void 0);
    return Columns2;
  }(ChildProperty)
);
var __extends$K = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$z = globalThis && globalThis.__decorate || function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i = decorators.length - 1; i >= 0; i--)
      if (d = decorators[i])
        r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var StackedHeaders = (
  /** @class */
  function(_super) {
    __extends$K(StackedHeaders2, _super);
    function StackedHeaders2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$z([
      Property()
    ], StackedHeaders2.prototype, "text", void 0);
    __decorate$z([
      Property()
    ], StackedHeaders2.prototype, "keyFields", void 0);
    return StackedHeaders2;
  }(ChildProperty)
);
var __extends$J = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$y = globalThis && globalThis.__decorate || function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i = decorators.length - 1; i >= 0; i--)
      if (d = decorators[i])
        r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var SortSettings = (
  /** @class */
  function(_super) {
    __extends$J(SortSettings2, _super);
    function SortSettings2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$y([
      Property("Index")
    ], SortSettings2.prototype, "sortBy", void 0);
    __decorate$y([
      Property()
    ], SortSettings2.prototype, "field", void 0);
    __decorate$y([
      Property("Ascending")
    ], SortSettings2.prototype, "direction", void 0);
    return SortSettings2;
  }(ChildProperty)
);
var ROOT_CLASS = "e-kanban";
var RTL_CLASS$1 = "e-rtl";
var DEVICE_CLASS$1 = "e-device";
var ICON_CLASS = "e-icons";
var TEMPLATE_CLASS = "e-template";
var SWIMLANE_CLASS = "e-swimlane";
var TABLE_CLASS = "e-kanban-table";
var HEADER_CLASS = "e-kanban-header";
var HEADER_TABLE_CLASS = "e-header-table";
var HEADER_CELLS_CLASS$1 = "e-header-cells";
var HEADER_WRAP_CLASS = "e-header-wrap";
var HEADER_TITLE_CLASS = "e-header-title";
var HEADER_TEXT_CLASS = "e-header-text";
var HEADER_ICON_CLASS = "e-header-icon";
var STACKED_HEADER_ROW_CLASS = "e-stacked-header-row";
var STACKED_HEADER_CELL_CLASS = "e-stacked-header-cell";
var CONTENT_CELLS_CLASS = "e-content-cells";
var CONTENT_CLASS = "e-kanban-content";
var CONTENT_TABLE_CLASS$1 = "e-content-table";
var HEADER_ROW_TOGGLE_CLASS = "e-toggle-header";
var HEADER_ROW_CLASS$1 = "e-header-row";
var CONTENT_ROW_CLASS = "e-content-row";
var SWIMLANE_ROW_CLASS = "e-swimlane-row";
var SWIMLANE_ROW_EXPAND_CLASS = "e-swimlane-row-expand";
var SWIMLANE_ROW_COLLAPSE_CLASS = "e-swimlane-row-collapse";
var SWIMLANE_ROW_TEXT_CLASS = "e-swimlane-text";
var CARD_ITEM_COUNT_CLASS = "e-item-count";
var CARD_WRAPPER_CLASS = "e-card-wrapper";
var CARD_CLASS = "e-card";
var DROPPABLE_CLASS = "e-droppable";
var DRAG_CLASS = "e-drag";
var DROP_CLASS = "e-drop";
var DISABLED_CLASS = "e-disabled";
var CARD_HEADER_CLASS = "e-card-header";
var CARD_CONTENT_CLASS = "e-card-content";
var CARD_HEADER_TEXT_CLASS = "e-card-header-caption";
var CARD_HEADER_TITLE_CLASS = "e-card-header-title";
var CARD_TAGS_CLASS = "e-card-tags";
var CARD_TAG_CLASS = "e-card-tag";
var CARD_COLOR_CLASS = "e-card-color";
var CARD_LABEL_CLASS = "e-card-label";
var CARD_FOOTER_CLASS = "e-card-footer";
var EMPTY_CARD_CLASS = "e-empty-card";
var CARD_FOOTER_CSS_CLASS = "e-card-footer-css";
var COLUMN_EXPAND_CLASS = "e-column-expand";
var COLUMN_COLLAPSE_CLASS = "e-column-collapse";
var COLLAPSE_HEADER_TEXT_CLASS = "e-collapse-header-text";
var COLLAPSED_CLASS = "e-collapsed";
var DIALOG_CLASS = "e-kanban-dialog";
var FORM_CLASS$1 = "e-kanban-form";
var FORM_WRAPPER_CLASS = "e-kanban-form-wrapper";
var ERROR_VALIDATION_CLASS$1 = "e-kanban-error";
var FIELD_CLASS = "e-field";
var DRAGGED_CLONE_CLASS = "e-target-dragged-clone";
var CLONED_CARD_CLASS = "e-cloned-card";
var DRAGGED_CARD_CLASS = "e-kanban-dragged-card";
var DROPPED_CLONE_CLASS = "e-target-dropped-clone";
var DROPPING_CLASS = "e-dropping";
var BORDER_CLASS = "e-kanban-border";
var TOGGLE_VISIBLE_CLASS = "e-toggle-visible";
var MULTI_CARD_WRAPPER_CLASS = "e-multi-card-wrapper";
var MULTI_ACTIVE_CLASS = "e-multi-active";
var TARGET_MULTI_CLONE_CLASS = "e-target-multi-clone";
var MULTI_COLUMN_KEY_CLASS = "e-column-key";
var CARD_SELECTION_CLASS = "e-selection";
var TOOLTIP_CLASS = "e-kanban-tooltip";
var TOOLTIP_TEXT_CLASS = "e-tooltip-text";
var SWIMLANE_HEADER_CLASS = "e-swimlane-header";
var SWIMLANE_HEADER_TOOLBAR_CLASS = "e-swimlane-header-toolbar";
var TOOLBAR_MENU_CLASS = "e-toolbar-menu";
var TOOLBAR_MENU_ICON_CLASS = "e-icon-menu";
var TOOLBAR_LEVEL_TITLE_CLASS = "e-toolbar-level-title";
var TOOLBAR_SWIMLANE_NAME_CLASS = "e-toolbar-swimlane-name";
var SWIMLANE_OVERLAY_CLASS = "e-swimlane-overlay";
var SWIMLANE_CONTENT_CLASS = "e-swimlane-content";
var SWIMLANE_RESOURCE_CLASS = "e-swimlane-resource";
var SWIMLANE_TREE_CLASS = "e-swimlane-tree";
var LIMITS_CLASS = "e-limits";
var MAX_COUNT_CLASS = "e-max-count";
var MIN_COUNT_CLASS = "e-min-count";
var MAX_COLOR_CLASS = "e-max-color";
var MIN_COLOR_CLASS = "e-min-color";
var POPUP_HEADER_CLASS$1 = "e-popup-header";
var CLOSE_CLASS$1 = "e-close";
var POPUP_CONTENT_CLASS$1 = "e-popup-content";
var POPUP_WRAPPER_CLASS$1 = "e-mobile-popup-wrapper";
var CLOSE_ICON_CLASS$1 = "e-close-icon";
var POPUP_OPEN_CLASS = "e-popup-open";
var DIALOG_CONTENT_CONTAINER = "e-kanban-dialog-content";
var SHOW_ADD_BUTTON = "e-show-add-button";
var SHOW_ADD_ICON = "e-show-add-icon";
var SHOW_ADD_FOCUS = "e-show-add-focus";
var FROZEN_SWIMLANE_ROW_CLASS = "e-frozen-swimlane-row";
var FROZEN_ROW_CLASS = "e-frozen-row";
var Action = (
  /** @class */
  function() {
    function Action2(parent) {
      this.parent = parent;
      this.columnToggleArray = [];
      this.selectionArray = [];
      this.lastCardSelection = null;
      this.lastSelectionRow = null;
      this.lastCard = null;
      this.selectedCardsElement = [];
      this.selectedCardsData = [];
      this.hideColumnKeys = [];
    }
    Action2.prototype.clickHandler = function(e) {
      var elementSelector = "." + CARD_CLASS + ",." + HEADER_ICON_CLASS + ",." + CONTENT_ROW_CLASS + "." + SWIMLANE_ROW_CLASS + ",." + SHOW_ADD_BUTTON + ",." + FROZEN_SWIMLANE_ROW_CLASS + ",." + CONTENT_ROW_CLASS + ":not(." + SWIMLANE_ROW_CLASS + ") ." + CONTENT_CELLS_CLASS;
      var target = closest(e.target, elementSelector);
      if (!target) {
        return;
      }
      if (target.classList.contains(CARD_CLASS)) {
        if (this.parent.allowKeyboard) {
          this.parent.keyboardModule.cardTabIndexRemove();
        }
        this.cardClick(e);
      } else if (target.classList.contains(HEADER_ICON_CLASS)) {
        this.columnExpandCollapse(e);
      } else if (target.classList.contains(CONTENT_ROW_CLASS) && target.classList.contains(SWIMLANE_ROW_CLASS)) {
        this.rowExpandCollapse(e);
      } else if (target.classList.contains(SHOW_ADD_BUTTON)) {
        this.addButtonClick(target);
      } else if (target.classList.contains(FROZEN_SWIMLANE_ROW_CLASS)) {
        var swimlaneRows = [].slice.call(this.parent.element.querySelectorAll("." + SWIMLANE_ROW_CLASS));
        var targetIcon = this.parent.layoutModule.frozenSwimlaneRow.querySelector("." + ICON_CLASS);
        this.rowExpandCollapse(e, swimlaneRows[this.parent.layoutModule.frozenOrder]);
        var isCollapsed = targetIcon.classList.contains(SWIMLANE_ROW_COLLAPSE_CLASS) ? true : false;
        if (isCollapsed) {
          classList(targetIcon, [SWIMLANE_ROW_EXPAND_CLASS], [SWIMLANE_ROW_COLLAPSE_CLASS]);
        } else {
          classList(targetIcon, [SWIMLANE_ROW_COLLAPSE_CLASS], [SWIMLANE_ROW_EXPAND_CLASS]);
        }
      }
    };
    Action2.prototype.addButtonClick = function(target) {
      var _this = this;
      var newData = {};
      if (this.parent.kanbanData.length === 0) {
        newData[this.parent.cardSettings.headerField] = 1;
      } else if (typeof this.parent.kanbanData[0][this.parent.cardSettings.headerField] === "number") {
        var id = this.parent.kanbanData.map(function(obj) {
          return parseInt(obj[_this.parent.cardSettings.headerField], 10);
        });
        newData[this.parent.cardSettings.headerField] = Math.max.apply(Math, id) + 1;
      }
      newData[this.parent.keyField] = closest(target, "." + CONTENT_CELLS_CLASS).getAttribute("data-key");
      if (this.parent.sortSettings.sortBy === "Index") {
        newData[this.parent.sortSettings.field] = 1;
        if (closest(target, "." + CONTENT_CELLS_CLASS).querySelector("." + CARD_CLASS)) {
          var card = this.parent.sortSettings.direction === "Ascending" ? target.nextElementSibling.classList.contains(BORDER_CLASS) ? target.nextElementSibling.nextElementSibling.lastElementChild : target.nextElementSibling.lastElementChild : target.nextElementSibling.classList.contains(BORDER_CLASS) ? target.nextElementSibling.nextElementSibling.firstElementChild : target.nextElementSibling.firstElementChild;
          var data = this.parent.getCardDetails(card);
          newData[this.parent.sortSettings.field] = data[this.parent.sortSettings.field] + 1;
        }
      }
      if (this.parent.kanbanData.length !== 0 && this.parent.swimlaneSettings.keyField && closest(target, "." + CONTENT_ROW_CLASS).previousElementSibling) {
        newData[this.parent.swimlaneSettings.keyField] = closest(target, "." + CONTENT_ROW_CLASS).previousElementSibling.getAttribute("data-key");
      }
      this.parent.openDialog("Add", newData);
    };
    Action2.prototype.doubleClickHandler = function(e) {
      var target = closest(e.target, "." + CARD_CLASS);
      if (target) {
        this.cardDoubleClick(e);
      }
    };
    Action2.prototype.cardClick = function(e, selectedCard) {
      var _this = this;
      var target = closest(selectedCard ? selectedCard : e.target, "." + CARD_CLASS);
      var cardClickObj = this.parent.getCardDetails(target);
      if (cardClickObj) {
        this.parent.activeCardData = { data: cardClickObj, element: target };
        var args = { data: cardClickObj, element: target, cancel: false, event: e };
        this.parent.trigger(cardClick, args, function(clickArgs) {
          if (!clickArgs.cancel) {
            if (target.classList.contains(CARD_SELECTION_CLASS) && e.type === "click") {
              removeClass([target], CARD_SELECTION_CLASS);
              _this.parent.layoutModule.disableAttributeSelection(target);
            } else {
              var isCtrlKey = e.ctrlKey;
              if (_this.parent.isAdaptive && _this.parent.touchModule) {
                isCtrlKey = _this.parent.touchModule.mobilePopup && _this.parent.touchModule.tabHold || isCtrlKey;
              }
              _this.cardSelection(target, isCtrlKey, e.shiftKey);
            }
            if (_this.parent.isAdaptive && _this.parent.touchModule) {
              _this.parent.touchModule.updatePopupContent();
            }
            var cell = closest(target, "." + CONTENT_CELLS_CLASS);
            if (_this.parent.allowKeyboard) {
              var element2 = [].slice.call(cell.querySelectorAll("." + CARD_CLASS));
              element2.forEach(function(e2) {
                e2.setAttribute("tabindex", "0");
              });
              _this.parent.keyboardModule.addRemoveTabIndex("Remove");
            }
          }
        });
      }
    };
    Action2.prototype.cardDoubleClick = function(e) {
      var _this = this;
      var target = closest(e.target, "." + CARD_CLASS);
      var cardDoubleClickObj = this.parent.getCardDetails(target);
      this.parent.activeCardData = { data: cardDoubleClickObj, element: target };
      this.cardSelection(target, false, false);
      var args = { data: cardDoubleClickObj, element: target, cancel: false, event: e };
      this.parent.trigger(cardDoubleClick, args, function(doubleClickArgs) {
        if (!doubleClickArgs.cancel) {
          _this.parent.dialogModule.openDialog("Edit", args.data);
        }
      });
    };
    Action2.prototype.rowExpandCollapse = function(e, isFrozenElem) {
      var _this = this;
      var headerTarget = e instanceof HTMLElement ? e : e.target;
      var currentSwimlaneHeader = !isNullOrUndefined(isFrozenElem) ? isFrozenElem : headerTarget;
      var args = { cancel: false, target: headerTarget, requestType: "rowExpandCollapse" };
      this.parent.trigger(actionBegin$1, args, function(actionArgs) {
        if (!actionArgs.cancel) {
          var target = closest(currentSwimlaneHeader, "." + SWIMLANE_ROW_CLASS);
          var key = target.getAttribute("data-key");
          var tgtRow = _this.parent.element.querySelector("." + CONTENT_ROW_CLASS + (":nth-child(" + (target.rowIndex + 2) + ")"));
          var targetIcon = target.querySelector("." + SWIMLANE_ROW_EXPAND_CLASS + ",." + SWIMLANE_ROW_COLLAPSE_CLASS);
          var isCollapsed = target.classList.contains(COLLAPSED_CLASS) ? true : false;
          var tabIndex_1;
          if (isCollapsed) {
            removeClass([tgtRow, target], COLLAPSED_CLASS);
            classList(targetIcon, [SWIMLANE_ROW_EXPAND_CLASS], [SWIMLANE_ROW_COLLAPSE_CLASS]);
            _this.parent.swimlaneToggleArray.splice(_this.parent.swimlaneToggleArray.indexOf(key), 1);
            tabIndex_1 = "0";
          } else {
            addClass([tgtRow, target], COLLAPSED_CLASS);
            classList(targetIcon, [SWIMLANE_ROW_COLLAPSE_CLASS], [SWIMLANE_ROW_EXPAND_CLASS]);
            _this.parent.swimlaneToggleArray.push(key);
            tabIndex_1 = "-1";
          }
          targetIcon.setAttribute("aria-label", isCollapsed ? key + " Expand" : key + " Collapse");
          target.setAttribute("aria-expanded", isCollapsed.toString());
          tgtRow.setAttribute("aria-expanded", isCollapsed.toString());
          var rows = [].slice.call(tgtRow.querySelectorAll("." + CONTENT_CELLS_CLASS));
          rows.forEach(function(cell) {
            cell.setAttribute("tabindex", tabIndex_1);
          });
          _this.parent.notify(contentReady$1, {});
          _this.parent.trigger(actionComplete$1, { target: headerTarget, requestType: "rowExpandCollapse" });
        }
      });
    };
    Action2.prototype.columnExpandCollapse = function(e) {
      var _this = this;
      var headerTarget = e instanceof HTMLElement ? e : e.target;
      var args = { cancel: false, target: headerTarget, requestType: "columnExpandCollapse" };
      this.parent.trigger(actionBegin$1, args, function(actionArgs) {
        if (!actionArgs.cancel) {
          var target = closest(headerTarget, "." + HEADER_CELLS_CLASS$1);
          var colIndex = target.cellIndex;
          _this.columnToggle(target);
          var collapsed = _this.parent.element.querySelectorAll("." + HEADER_CELLS_CLASS$1 + "." + COLLAPSED_CLASS).length;
          if (collapsed === _this.parent.columns.length - _this.hideColumnKeys.length) {
            var index = colIndex + 1 === collapsed ? 1 : colIndex + 2;
            var headerSelector = "." + HEADER_CELLS_CLASS$1 + ":not(." + STACKED_HEADER_CELL_CLASS + "):nth-child(" + index + ")";
            var nextCol = _this.parent.element.querySelector(headerSelector);
            addClass([nextCol], COLLAPSED_CLASS);
            _this.columnToggle(nextCol);
          }
          _this.parent.notify(contentReady$1, {});
          _this.parent.trigger(actionComplete$1, { target: headerTarget, requestType: "columnExpandCollapse" });
        }
      });
    };
    Action2.prototype.columnToggle = function(target) {
      var _this = this;
      var colIndex = target.cellIndex;
      var elementSelector = "." + CONTENT_ROW_CLASS + ":not(." + SWIMLANE_ROW_CLASS + ")";
      var targetRow = [].slice.call(this.parent.element.querySelectorAll(elementSelector));
      var colSelector = "." + TABLE_CLASS + " col:nth-child(" + (colIndex + 1) + ")";
      var targetIcon = target.querySelector("." + COLUMN_EXPAND_CLASS + ",." + COLUMN_COLLAPSE_CLASS);
      var colGroup = [].slice.call(this.parent.element.querySelectorAll(colSelector));
      if (target.classList.contains(COLLAPSED_CLASS)) {
        removeClass(colGroup, COLLAPSED_CLASS);
        if (this.parent.isAdaptive) {
          colGroup.forEach(function(col) {
            return col.style.width = formatUnit(_this.parent.layoutModule.getWidth());
          });
        }
        classList(targetIcon, [COLUMN_EXPAND_CLASS], [COLUMN_COLLAPSE_CLASS]);
        var _loop_1 = function(row2) {
          var targetCol = row2.querySelector("." + CONTENT_CELLS_CLASS + ":nth-child(" + (colIndex + 1) + ")");
          removeClass([targetCol, target], COLLAPSED_CLASS);
          remove(targetCol.querySelector("." + COLLAPSE_HEADER_TEXT_CLASS));
          target.setAttribute("aria-expanded", "true");
          targetCol.setAttribute("aria-expanded", "true");
          var collapsedCell = [].slice.call(targetCol.parentElement.querySelectorAll("." + COLLAPSED_CLASS));
          collapsedCell.forEach(function(cell) {
            var collapasedText = cell.querySelector("." + COLLAPSE_HEADER_TEXT_CLASS);
            collapasedText.style.height = "auto";
            if (collapasedText && targetCol.getBoundingClientRect().height < collapasedText.getBoundingClientRect().height + 10) {
              collapasedText.style.height = targetCol.getBoundingClientRect().height - 4 + "px";
            }
          });
        };
        for (var _i = 0, targetRow_1 = targetRow; _i < targetRow_1.length; _i++) {
          var row = targetRow_1[_i];
          _loop_1(row);
        }
        this.columnToggleArray.splice(this.columnToggleArray.indexOf(target.getAttribute("data-key")), 1);
        this.parent.columns[colIndex].setProperties({ isExpanded: true }, true);
        target.querySelector(".e-header-icon").setAttribute("aria-label", target.getAttribute("data-key") + " Expand");
      } else {
        addClass(colGroup, COLLAPSED_CLASS);
        if (this.parent.isAdaptive) {
          colGroup.forEach(function(col) {
            return col.style.width = formatUnit(toggleWidth);
          });
        }
        classList(targetIcon, [COLUMN_COLLAPSE_CLASS], [COLUMN_EXPAND_CLASS]);
        var key = target.getAttribute("data-key");
        var _loop_2 = function(row2) {
          var targetCol = row2.querySelector("." + CONTENT_CELLS_CLASS + '[data-key="' + key + '"]');
          var index = targetCol.cellIndex;
          var text = (this_1.parent.columns[index].showItemCount ? "[" + targetCol.querySelectorAll("." + CARD_CLASS).length + "] " : "") + this_1.parent.columns[index].headerText;
          targetCol.appendChild(createElement("div", { className: COLLAPSE_HEADER_TEXT_CLASS, innerHTML: text }));
          addClass([targetCol, target], COLLAPSED_CLASS);
          target.setAttribute("aria-expanded", "false");
          targetCol.setAttribute("aria-expanded", "false");
          var collapsedCell = [].slice.call(targetCol.parentElement.querySelectorAll("." + COLLAPSED_CLASS));
          collapsedCell.forEach(function(cell) {
            var collapasedText = cell.querySelector("." + COLLAPSE_HEADER_TEXT_CLASS);
            if (collapasedText && targetCol.getBoundingClientRect().height < collapasedText.getBoundingClientRect().height + 10) {
              collapasedText.style.height = targetCol.getBoundingClientRect().height - 4 + "px";
            }
          });
        };
        var this_1 = this;
        for (var _a = 0, targetRow_2 = targetRow; _a < targetRow_2.length; _a++) {
          var row = targetRow_2[_a];
          _loop_2(row);
        }
        this.columnToggleArray.push(target.getAttribute("data-key"));
        this.parent.columns[colIndex].setProperties({ isExpanded: false }, true);
        target.querySelector(".e-header-icon").setAttribute("aria-label", key + " Collapse");
      }
    };
    Action2.prototype.cardSelection = function(target, isCtrl, isShift) {
      var _this = this;
      if (!target) {
        return;
      }
      var cards = this.parent.getSelectedCards();
      if (this.parent.cardSettings.selectionType !== "None") {
        var contentRow = closest(target, "." + CONTENT_ROW_CLASS);
        var index = !isNullOrUndefined(this.lastSelectionRow) ? this.lastSelectionRow.rowIndex : contentRow.rowIndex;
        if (index !== contentRow.rowIndex && (isCtrl || isShift) && this.parent.cardSettings.selectionType === "Multiple") {
          return;
        }
        if (cards.length !== 0 && (!isCtrl || this.parent.cardSettings.selectionType === "Single")) {
          removeClass(cards, CARD_SELECTION_CLASS);
          this.parent.layoutModule.disableAttributeSelection(cards);
          cards.forEach(function(el) {
            _this.selectionArray.splice(_this.selectionArray.indexOf(el.getAttribute("data-id")), 1);
            _this.selectedCardsElement.splice(_this.selectedCardsElement.indexOf(el), 1);
            _this.selectedCardsData.splice(_this.selectedCardsData.indexOf(_this.parent.getCardDetails(el), 1));
          });
        }
        if (cards.length > 0 && isShift && this.parent.cardSettings.selectionType === "Multiple") {
          var curCards_1 = [];
          var start = void 0;
          var end = void 0;
          var i = void 0;
          var allCards = [].slice.call(contentRow.querySelectorAll("." + CARD_CLASS));
          allCards.forEach(function(el) {
            return curCards_1.push(el.getAttribute("data-id"));
          });
          var curId = target.getAttribute("data-id");
          var lastId = this.lastCard.getAttribute("data-id");
          var curIndex = end = curCards_1.indexOf(curId);
          var lastIndex = start = curCards_1.indexOf(lastId);
          var select2 = curIndex > lastIndex ? "next" : "prev";
          if (select2 === "prev") {
            start = curIndex;
            end = lastIndex;
          }
          for (i = start; i <= end; i++) {
            var card = allCards[i];
            addClass([card], CARD_SELECTION_CLASS);
            card.setAttribute("aria-selected", "true");
            card.setAttribute("tabindex", "0");
            this.selectionArray.push(card.getAttribute("data-id"));
            this.selectedCardsElement.push(card);
            this.selectedCardsData.push(this.parent.getCardDetails(card));
            this.lastCardSelection = card;
            if (select2 === "prev") {
              this.lastCardSelection = allCards[start];
            }
          }
        } else {
          addClass([target], CARD_SELECTION_CLASS);
          target.setAttribute("aria-selected", "true");
          target.setAttribute("tabindex", "0");
          this.selectionArray.push(target.getAttribute("data-id"));
          this.selectedCardsElement.push(target);
          this.selectedCardsData.push(this.parent.getCardDetails(target));
          this.lastCard = this.lastCardSelection = target;
          this.lastSelectionRow = closest(target, "." + CONTENT_ROW_CLASS);
          if (this.lastSelectionRow.previousElementSibling) {
            var elementSelector = "." + SWIMLANE_ROW_EXPAND_CLASS + ",." + SWIMLANE_ROW_COLLAPSE_CLASS;
            var parentEle = this.lastSelectionRow.previousElementSibling.querySelector(elementSelector);
            if (parentEle && parentEle.classList.contains(SWIMLANE_ROW_COLLAPSE_CLASS)) {
              this.rowExpandCollapse(parentEle);
            }
          }
        }
      }
    };
    Action2.prototype.addColumn = function(columnOptions, index) {
      var addColumn = createInstance(Columns, [this.parent, "columns", columnOptions, true]);
      this.parent.columns.splice(index, 0, addColumn);
      this.parent.notify(dataReady$1, { processedData: this.parent.kanbanData });
    };
    Action2.prototype.deleteColumn = function(index) {
      var listKey = this.parent.element.querySelectorAll("." + HEADER_CELLS_CLASS$1).item(index);
      if (listKey && listKey.classList.contains(HEADER_ROW_TOGGLE_CLASS)) {
        this.columnToggleArray.splice(this.columnToggleArray.indexOf(listKey.getAttribute("data-key"), 0));
      }
      this.parent.columns.splice(index, 1);
      if (this.parent.columns.length === 0) {
        detach(this.parent.element.querySelector("." + HEADER_CLASS));
        detach(this.parent.element.querySelector("." + CONTENT_CLASS));
      } else {
        this.parent.notify(dataReady$1, { processedData: this.parent.kanbanData });
      }
    };
    Action2.prototype.showColumn = function(key) {
      var index = this.hideColumnKeys.indexOf(key.toString());
      if (index !== -1) {
        this.hideColumnKeys.splice(index, 1);
        this.parent.notify(dataReady$1, { processedData: this.parent.kanbanData });
      }
    };
    Action2.prototype.hideColumn = function(key) {
      this.hideColumnKeys.push(key.toString());
      this.parent.notify(dataReady$1, { processedData: this.parent.kanbanData });
    };
    Action2.prototype.SingleCardSelection = function(data) {
      if (this.parent.cardSettings.selectionType !== "None" && data[this.parent.cardSettings.headerField]) {
        var card = this.parent.element.querySelector('.e-card[data-id="' + // eslint-disable-next-line no-useless-escape
        data[this.parent.cardSettings.headerField].toString() + '"]');
        if (card) {
          addClass([card], CARD_SELECTION_CLASS);
          card.setAttribute("aria-selected", "true");
          card.setAttribute("tabindex", "0");
        }
      }
    };
    return Action2;
  }()
);
var Crud$1 = (
  /** @class */
  function() {
    function Crud2(parent) {
      this.parent = parent;
    }
    Crud2.prototype.addCard = function(cardData, index) {
      var _this = this;
      var args = {
        cancel: false,
        requestType: "cardCreate",
        addedRecords: cardData instanceof Array ? cardData : [cardData],
        changedRecords: [],
        deletedRecords: []
      };
      this.parent.trigger(actionBegin$1, args, function(addArgs) {
        if (!addArgs.cancel) {
          var modifiedData_1 = [];
          if (_this.parent.sortSettings.field && _this.parent.sortSettings.sortBy === "Index") {
            if (cardData instanceof Array) {
              modifiedData_1 = cardData;
            } else {
              modifiedData_1.push(cardData);
            }
            modifiedData_1.forEach(function(data, index2) {
              if (!data[_this.parent.sortSettings.field]) {
                var columnData = _this.parent.getColumnData(data[_this.parent.keyField]);
                if (_this.parent.sortSettings.direction === "Ascending" && columnData.length > 0) {
                  data[_this.parent.sortSettings.field] = columnData[columnData.length - 1][_this.parent.sortSettings.field] + index2 + 1;
                } else if (_this.parent.sortSettings.direction === "Descending" && columnData.length > 0) {
                  data[_this.parent.sortSettings.field] = columnData[0][_this.parent.sortSettings.field] + index2 + 1;
                }
                if (columnData.length === 0) {
                  data[_this.parent.sortSettings.field] = 1;
                }
              }
            });
            if (!(cardData instanceof Array)) {
              if (!index && _this.parent.sortSettings.direction === "Descending") {
                _this.parent.getColumnData(modifiedData_1[0][_this.parent.keyField]).filter(function(obj, count) {
                  if (obj[_this.parent.sortSettings.field] === modifiedData_1[0][_this.parent.sortSettings.field]) {
                    index = count + 1;
                  }
                });
              }
            }
            if (index !== 0 && !index && _this.parent.sortSettings.direction === "Descending") {
              index = 0;
            }
            modifiedData_1 = _this.priorityOrder(modifiedData_1, index);
          }
          var addedRecords = cardData instanceof Array ? cardData : [cardData];
          var changedRecords = _this.parent.sortSettings.field && _this.parent.sortSettings.sortBy === "Index" ? modifiedData_1 : [];
          var editParms = { addedRecords, changedRecords, deletedRecords: [] };
          var type = cardData instanceof Array || modifiedData_1.length > 0 ? "batch" : "insert";
          _this.parent.dataModule.updateDataManager(type, editParms, "cardCreated", cardData, index);
        }
      });
    };
    Crud2.prototype.getIndexFromData = function(data) {
      var cardElement = this.parent.element.querySelector("." + CARD_CLASS + '[data-id="' + data[this.parent.cardSettings.headerField] + '"]');
      var element2 = closest(cardElement, "." + CONTENT_CELLS_CLASS);
      var index = [].slice.call(element2.querySelectorAll("." + CARD_CLASS)).indexOf(cardElement);
      return index;
    };
    Crud2.prototype.updateCard = function(cardData, index) {
      var _this = this;
      var args = {
        requestType: "cardChange",
        cancel: false,
        addedRecords: [],
        changedRecords: cardData instanceof Array ? cardData : [cardData],
        deletedRecords: []
      };
      index = isNullOrUndefined(index) ? this.getIndexFromData(args.changedRecords[0]) : index;
      this.parent.trigger(actionBegin$1, args, function(updateArgs) {
        if (!updateArgs.cancel) {
          if (_this.parent.sortSettings.field && _this.parent.sortSettings.sortBy === "Index") {
            var modifiedData = [];
            if (cardData instanceof Array) {
              modifiedData = cardData;
            } else {
              modifiedData.push(cardData);
            }
            cardData = _this.priorityOrder(modifiedData, index);
          }
          var editParms = {
            addedRecords: [],
            changedRecords: cardData instanceof Array ? cardData : [cardData],
            deletedRecords: []
          };
          var type = cardData instanceof Array ? "batch" : "update";
          _this.parent.dataModule.updateDataManager(type, editParms, "cardChanged", cardData, index);
        }
      });
    };
    Crud2.prototype.deleteCard = function(cardData) {
      var _this = this;
      var editParms = { addedRecords: [], changedRecords: [], deletedRecords: [] };
      if (typeof cardData === "string" || typeof cardData === "number") {
        editParms.deletedRecords = this.parent.kanbanData.filter(function(data) {
          return data[_this.parent.cardSettings.headerField] === cardData;
        });
      } else {
        editParms.deletedRecords = cardData instanceof Array ? cardData : [cardData];
      }
      var args = {
        requestType: "cardRemove",
        cancel: false,
        addedRecords: [],
        changedRecords: [],
        deletedRecords: editParms.deletedRecords
      };
      this.parent.trigger(actionBegin$1, args, function(deleteArgs) {
        if (!deleteArgs.cancel) {
          var type = editParms.deletedRecords.length > 1 ? "batch" : "delete";
          var cardData_1 = editParms.deletedRecords;
          _this.parent.dataModule.updateDataManager(type, editParms, "cardRemoved", cardData_1[0]);
        }
      });
    };
    Crud2.prototype.priorityOrder = function(cardData, cardIndex) {
      var _this = this;
      var cardsId = cardData.map(function(obj) {
        return obj[_this.parent.cardSettings.headerField];
      });
      var num = cardData[cardData.length - 1][this.parent.sortSettings.field];
      var allModifiedKeys = cardData.map(function(obj) {
        return obj[_this.parent.keyField];
      });
      var modifiedKey = allModifiedKeys.filter(function(key, index) {
        return allModifiedKeys.indexOf(key) === index;
      }).sort();
      var columnAllDatas;
      var finalData = [];
      var originalIndex = [];
      var _loop_1 = function(columnKey2) {
        var keyData = cardData.filter(function(cardObj) {
          return cardObj[_this.parent.keyField] === columnKey2;
        });
        columnAllDatas = this_1.parent.layoutModule.getColumnData(columnKey2);
        for (var _i2 = 0, _a = keyData; _i2 < _a.length; _i2++) {
          var data = _a[_i2];
          if (this_1.parent.swimlaneSettings.keyField) {
            var swimlaneDatas = this_1.parent.getSwimlaneData(data[this_1.parent.swimlaneSettings.keyField]);
            columnAllDatas = this_1.parent.getColumnData(columnKey2, swimlaneDatas);
          }
        }
        keyData.forEach(function(key) {
          return finalData.push(key);
        });
        if (!isNullOrUndefined(cardIndex)) {
          var _loop_2 = function(j2) {
            columnAllDatas.filter(function(data2, index) {
              if (data2[_this.parent.cardSettings.headerField] === cardsId[j2] && index <= cardIndex) {
                originalIndex.push(index);
              }
            });
          };
          for (var j = 0; j < cardsId.length; j++) {
            _loop_2(j);
          }
          if (originalIndex.length > 0) {
            cardIndex = cardIndex + originalIndex.length;
          }
          if (this_1.parent.sortSettings.direction === "Ascending") {
            for (var i = cardIndex; i < columnAllDatas.length; i++) {
              if (cardsId.indexOf(columnAllDatas[i][this_1.parent.cardSettings.headerField]) === -1) {
                columnAllDatas[i][this_1.parent.sortSettings.field] = ++num;
                finalData.push(columnAllDatas[i]);
              }
            }
          } else {
            for (var i = cardIndex - 1; i >= 0; i--) {
              if (cardsId.indexOf(columnAllDatas[i][this_1.parent.cardSettings.headerField]) === -1) {
                columnAllDatas[i][this_1.parent.sortSettings.field] = ++num;
                finalData.push(columnAllDatas[i]);
              }
            }
          }
        }
      };
      var this_1 = this;
      for (var _i = 0, modifiedKey_1 = modifiedKey; _i < modifiedKey_1.length; _i++) {
        var columnKey = modifiedKey_1[_i];
        _loop_1(columnKey);
      }
      return finalData;
    };
    return Crud2;
  }()
);
var DragAndDrop$1 = (
  /** @class */
  function() {
    function DragAndDrop2(parent) {
      this.insertClone = "afterend";
      this.parent = parent;
      this.dragObj = {
        element: null,
        cloneElement: null,
        instance: null,
        targetClone: null,
        draggedClone: null,
        targetCloneMulti: null,
        selectedCards: [],
        pageX: 0,
        pageY: 0,
        navigationInterval: null,
        cardDetails: [],
        modifiedData: []
      };
      this.dragEdges = { left: false, right: false, top: false, bottom: false };
      this.isDragging = false;
      this.isExternalDrop = false;
    }
    DragAndDrop2.prototype.wireDragEvents = function(element2) {
      var dragContainment;
      if (!this.parent.element != null && this.parent.externalDropId.length === 0) {
        dragContainment = this.parent.element.querySelector("." + CONTENT_CLASS);
      }
      this.dragObj.instance = new Draggable(element2, {
        clone: true,
        enableTapHold: this.parent.isAdaptive,
        enableTailMode: true,
        cursorAt: { top: -10, left: -10 },
        dragArea: dragContainment,
        dragStart: this.dragStart.bind(this),
        drag: this.drag.bind(this),
        dragStop: this.dragStop.bind(this),
        enableAutoScroll: false,
        helper: this.dragHelper.bind(this)
      });
    };
    DragAndDrop2.prototype.dragHelper = function(e) {
      if (this.parent.isAdaptive && this.parent.touchModule.mobilePopup && this.parent.touchModule.mobilePopup.element.classList.contains(POPUP_OPEN_CLASS)) {
        this.parent.touchModule.mobilePopup.hide();
      }
      this.dragObj.element = closest(e.sender.target, "." + CARD_CLASS);
      if (isNullOrUndefined(this.dragObj.element)) {
        return null;
      }
      this.dragObj.element.style.width = formatUnit(this.dragObj.element.offsetWidth);
      var cloneWrapper = createElement("div", { innerHTML: this.dragObj.element.outerHTML });
      this.dragObj.cloneElement = cloneWrapper.children.item(0);
      addClass([this.dragObj.cloneElement], CLONED_CARD_CLASS);
      this.dragObj.element.parentElement.appendChild(this.dragObj.cloneElement);
      this.dragObj.targetCloneMulti = createElement("div", { className: TARGET_MULTI_CLONE_CLASS });
      this.dragObj.targetClone = createElement("div", {
        className: DROPPED_CLONE_CLASS,
        styles: "width:100%;height:" + formatUnit(this.dragObj.element.offsetHeight)
      });
      this.dragObj.modifiedData = [];
      return this.dragObj.cloneElement;
    };
    DragAndDrop2.prototype.dragStart = function(e) {
      var _this = this;
      this.dragObj.selectedCards = this.dragObj.element;
      this.borderElm = this.parent.element.querySelectorAll("." + BORDER_CLASS);
      if (this.dragObj.element.classList.contains(CARD_SELECTION_CLASS)) {
        var className = "." + CARD_CLASS + "." + CARD_SELECTION_CLASS + ":not(." + CLONED_CARD_CLASS + ")";
        var closestEle = closest(this.dragObj.element, "." + CONTENT_ROW_CLASS);
        this.dragObj.selectedCards = [].slice.call(closestEle.querySelectorAll(className));
        this.dragObj.selectedCards.forEach(function(element2) {
          _this.dragObj.cardDetails.push(_this.parent.getCardDetails(element2));
        });
      } else {
        this.dragObj.cardDetails = [this.parent.getCardDetails(this.dragObj.element)];
      }
      var dragArgs = { cancel: false, data: this.dragObj.cardDetails, event: e, element: this.dragObj.selectedCards };
      this.parent.trigger(dragStart$1, dragArgs, function(dragEventArgs) {
        if (dragEventArgs.cancel) {
          _this.removeElement(_this.dragObj.cloneElement);
          _this.dragObj.instance.intDestroy(e);
          _this.dragObj.element = null;
          _this.dragObj.targetClone = null;
          _this.dragObj.draggedClone = null;
          _this.dragObj.cloneElement = null;
          _this.dragObj.targetCloneMulti = null;
          return;
        }
        if (_this.dragObj.element.classList.contains(CARD_SELECTION_CLASS)) {
          _this.dragObj.selectedCards.forEach(function(element2) {
            _this.draggedClone(element2);
          });
          if (_this.dragObj.selectedCards.length > 1) {
            _this.dragObj.cloneElement.innerHTML = "";
            var drag2 = createElement("div", {
              className: "e-multi-card-text",
              innerHTML: _this.dragObj.selectedCards.length + " Cards"
            });
            _this.dragObj.cloneElement.appendChild(drag2);
            classList(_this.dragObj.cloneElement, ["e-multi-card-clone"], [CARD_SELECTION_CLASS]);
            _this.parent.layoutModule.disableAttributeSelection(_this.dragObj.cloneElement);
            _this.dragObj.cloneElement.style.width = "90px";
          }
        } else {
          _this.draggedClone(_this.dragObj.element);
        }
        EventHandler.add(document.body, "keydown", _this.keydownHandler, _this);
        _this.parent.notify(contentReady$1, {});
      });
    };
    DragAndDrop2.prototype.draggedClone = function(element2) {
      this.dragObj.draggedClone = createElement("div", {
        className: DRAGGED_CLONE_CLASS,
        styles: "width:" + formatUnit(element2.offsetWidth - 1) + ";height:" + formatUnit(element2.offsetHeight)
      });
      element2.insertAdjacentElement("afterend", this.dragObj.draggedClone);
      addClass([element2], DRAGGED_CARD_CLASS);
    };
    DragAndDrop2.prototype.drag = function(e) {
      var _this = this;
      if (!e.target) {
        return;
      }
      var cardElement = closest(e.target, "." + ROOT_CLASS + " ." + CARD_CLASS);
      var target = cardElement || e.target;
      var selector = "." + CONTENT_ROW_CLASS + ":not(." + SWIMLANE_ROW_CLASS + ") ." + CONTENT_CELLS_CLASS + "." + DROPPABLE_CLASS;
      var contentCell = closest(target, selector);
      var cellDimension;
      var borderElem;
      var dropElement;
      if (target.nextElementSibling && target.nextElementSibling.lastChild) {
        dropElement = target.nextElementSibling.lastChild.previousElementSibling;
      }
      this.externalDrop(target);
      this.kanbanObj = this.parent.isExternalKanbanDrop ? this.parent.externalDropObj : this.parent;
      this.calculateArgs(e);
      if (contentCell && document.body.style.cursor !== "not-allowed") {
        var targetKey = this.getColumnKey(contentCell);
        var keys2 = targetKey.split(",");
        this.multiCloneRemove();
        var isDrag = targetKey === this.getColumnKey(closest(this.dragObj.draggedClone, "." + CONTENT_CELLS_CLASS)) ? true : false;
        if (keys2.length === 1 || isDrag) {
          if (target.classList.contains(DRAGGED_CLONE_CLASS)) {
            this.removeElement(this.dragObj.targetClone, this.kanbanObj);
          }
          if (target.classList.contains(CARD_CLASS) || this.insertClone === "beforebegin") {
            var element2 = target.classList.contains(DRAGGED_CLONE_CLASS) ? target.previousElementSibling.classList.contains(DRAGGED_CARD_CLASS) ? null : target.previousElementSibling : target.previousElementSibling;
            this.insertClone = "afterend";
            if (isNullOrUndefined(element2)) {
              var pageY = target.classList.contains(DRAGGED_CLONE_CLASS) ? this.dragObj.pageY / 2 : this.dragObj.pageY;
              var height = target.classList.contains(DRAGGED_CLONE_CLASS) ? target.offsetHeight : target.offsetHeight / 2;
              if (pageY - (this.kanbanObj.element.getBoundingClientRect().top + target.offsetTop) < height) {
                this.insertClone = "beforebegin";
              }
            }
            if (target.classList.contains(CARD_CLASS)) {
              target.insertAdjacentElement(this.insertClone, this.dragObj.targetClone);
            }
          } else if (target.classList.contains(CONTENT_CELLS_CLASS) && !closest(target, "." + SWIMLANE_ROW_CLASS)) {
            if (target.querySelectorAll("." + DRAGGED_CARD_CLASS).length !== 0 && target.querySelectorAll("." + CARD_CLASS + ":not(.e-kanban-dragged-card):not(.e-cloned-card)").length === 0) {
              return;
            } else {
              target.querySelector("." + CARD_WRAPPER_CLASS).appendChild(this.dragObj.targetClone);
            }
          } else if (target.classList.contains(CARD_WRAPPER_CLASS) && !closest(target, "." + SWIMLANE_ROW_CLASS) && contentCell.querySelectorAll("." + CARD_CLASS).length === 0) {
            target.appendChild(this.dragObj.targetClone);
          } else if (target.classList.contains(BORDER_CLASS) && !closest(target, "." + SWIMLANE_ROW_CLASS) && (target.nextElementSibling && target.nextElementSibling.classList.contains(CARD_WRAPPER_CLASS)) && this.dragObj.targetClone && (!dropElement || !dropElement.classList.contains(DROPPED_CLONE_CLASS))) {
            target.nextElementSibling.appendChild(this.dragObj.targetClone);
          }
        } else if (keys2.length > 1 && (contentCell.classList.contains(DROPPING_CLASS) || contentCell.firstChild && contentCell.firstChild.classList.contains(DROPPING_CLASS))) {
          this.multiCloneCreate(keys2, contentCell);
        }
        this.kanbanObj.notify(contentReady$1, {});
      }
      if (this.kanbanObj.element.querySelectorAll("." + DROPPING_CLASS).length === 0) {
        this.cellDropping();
      }
      var isCollapsed = false;
      if (contentCell) {
        isCollapsed = contentCell.classList.contains(COLLAPSED_CLASS) && contentCell.classList.contains(DROPPING_CLASS);
        if (contentCell.getAttribute("aria-expanded") === "true" || !contentCell.parentElement.hasAttribute("aria-expanded")) {
          cellDimension = contentCell.getBoundingClientRect();
          this.updateDimension(cellDimension);
        }
        borderElem = contentCell.querySelector("." + BORDER_CLASS);
      }
      if (target && target.tagName === "TABLE" && !isNullOrUndefined(target.querySelector("." + CONTENT_ROW_CLASS))) {
        cellDimension = target.querySelector("." + CONTENT_ROW_CLASS).getBoundingClientRect();
        this.updateDimension(cellDimension, target);
      }
      if (isCollapsed) {
        this.toggleVisible(target);
        addClass([contentCell], TOGGLE_VISIBLE_CLASS);
      }
      var tColumn = [].slice.call(this.kanbanObj.element.querySelectorAll("." + TOGGLE_VISIBLE_CLASS));
      if (tColumn.length > 0 && !target.classList.contains(TOGGLE_VISIBLE_CLASS) && !closest(target, "." + TOGGLE_VISIBLE_CLASS)) {
        this.toggleVisible(target, tColumn.slice(-1)[0]);
        removeClass(tColumn, TOGGLE_VISIBLE_CLASS);
      }
      this.kanbanObj.notify(contentReady$1, {});
      var multiKeyTarget = closest(target, "." + MULTI_COLUMN_KEY_CLASS);
      if (multiKeyTarget) {
        var columnKeys = [].slice.call(this.kanbanObj.element.querySelectorAll("." + MULTI_COLUMN_KEY_CLASS + ":not(." + DISABLED_CLASS + ")")).filter(function(element3) {
          return _this.getColumnKey(element3) === _this.getColumnKey(multiKeyTarget);
        });
        if (columnKeys.length > 0) {
          addClass(columnKeys, MULTI_ACTIVE_CLASS);
          if (columnKeys[0].previousElementSibling) {
            addClass([columnKeys[0].previousElementSibling], "e-multi-bottom-border");
          }
        }
      }
      document.body.style.cursor = contentCell && contentCell.classList.contains(DROPPING_CLASS) || contentCell && borderElem && borderElem.classList.contains(DROPPING_CLASS) ? "" : "not-allowed";
      if (cardElement && !closest(cardElement, "." + CONTENT_CELLS_CLASS).classList.contains(DROPPING_CLASS) && !(contentCell && borderElem && borderElem.classList.contains(DROPPING_CLASS))) {
        cardElement.style.cursor = "not-allowed";
        document.body.style.cursor = "not-allowed";
      }
      if (this.isExternalDrop && document.body.style.cursor === "not-allowed") {
        document.body.style.cursor = "";
      }
      if (document.body.style.cursor === "not-allowed") {
        this.removeElement(this.dragObj.targetClone, this.kanbanObj);
        this.multiCloneRemove();
      }
      this.updateScrollPosition();
      var dragArgs = { data: this.dragObj.cardDetails, event: e, element: this.dragObj.selectedCards };
      this.kanbanObj.trigger(drag$1, dragArgs);
      this.parent.isExternalKanbanDrop = false;
      this.isExternalDrop = false;
    };
    DragAndDrop2.prototype.removeElement = function(element2, kanbanObj) {
      kanbanObj = kanbanObj ? kanbanObj : this.parent;
      if (kanbanObj.element.getElementsByClassName(element2.className).length > 0) {
        remove(element2);
      }
    };
    DragAndDrop2.prototype.externalDrop = function(target) {
      var _this = this;
      this.parent.externalDropId.forEach(function(externalDropId) {
        var targetRootElement = closest(target, externalDropId);
        if (targetRootElement) {
          if (targetRootElement.classList.contains("e-kanban")) {
            _this.parent.externalDropObj = document.querySelector(externalDropId).ej2_instances[0];
            _this.parent.isExternalKanbanDrop = true;
            var className = "." + CONTENT_ROW_CLASS + ":not(." + SWIMLANE_ROW_CLASS + "):not(." + COLLAPSED_CLASS + ") ." + CONTENT_CELLS_CLASS;
            var cells = [].slice.call(_this.parent.externalDropObj.element.querySelectorAll(className));
            addClass(cells, DROPPING_CLASS);
          } else {
            _this.isExternalDrop = true;
          }
        }
      });
    };
    DragAndDrop2.prototype.multiCloneCreate = function(keys2, contentCell) {
      var offsetHeight = contentCell.offsetHeight;
      var limitEle = contentCell.querySelector("." + LIMITS_CLASS);
      if (limitEle) {
        offsetHeight -= limitEle.offsetHeight;
      }
      this.dragObj.targetCloneMulti.style.height = formatUnit(offsetHeight);
      if (contentCell.querySelector("." + SHOW_ADD_BUTTON)) {
        addClass([contentCell.querySelector("." + SHOW_ADD_BUTTON)], MULTI_CARD_WRAPPER_CLASS);
      }
      addClass([contentCell.querySelector("." + CARD_WRAPPER_CLASS)], MULTI_CARD_WRAPPER_CLASS);
      contentCell.querySelector("." + CARD_WRAPPER_CLASS).style.height = "auto";
      contentCell.style.borderStyle = "none";
      this.removeElement(this.dragObj.targetClone);
      for (var _i = 0, keys_1 = keys2; _i < keys_1.length; _i++) {
        var key = keys_1[_i];
        var dragCell = closest(this.dragObj.draggedClone, "." + CONTENT_CELLS_CLASS);
        var transition = this.kanbanObj.columns[dragCell.cellIndex].transitionColumns;
        var allowTransition = this.allowedTransition(this.dragObj.element.getAttribute("data-key"), key, transition);
        var name_1 = allowTransition ? "" : " " + DISABLED_CLASS;
        var colKey = createElement("div", {
          className: MULTI_COLUMN_KEY_CLASS + name_1,
          attrs: { "data-key": key.trim() }
        });
        var text = createElement("div", { className: "e-text", innerHTML: key.trim() });
        contentCell.appendChild(this.dragObj.targetCloneMulti).appendChild(colKey).appendChild(text);
        colKey.style.cursor = allowTransition ? "" : "not-allowed";
        colKey.style.lineHeight = colKey.style.height = formatUnit(offsetHeight / keys2.length);
        text.style.top = formatUnit(offsetHeight / 2 - text.offsetHeight / 2);
      }
    };
    DragAndDrop2.prototype.allowedTransition = function(currentCardKey, targetCardKey, allowedKey) {
      var allowTransition = true;
      var targetKey = targetCardKey.split(",");
      for (var i = 0; i < targetKey.length; i++) {
        if (currentCardKey === targetKey[i].trim()) {
          return true;
        }
        if (allowedKey) {
          if (allowedKey.length === 1 && allowedKey[0].length === 0) {
            return true;
          }
          for (var j = 0; j < allowedKey.length; j++) {
            if (targetKey[i].trim() === allowedKey[j].trim()) {
              return true;
            } else {
              allowTransition = false;
            }
          }
        }
      }
      return allowTransition;
    };
    DragAndDrop2.prototype.cellDropping = function() {
      var _this = this;
      var dragCell = closest(this.dragObj.draggedClone, "." + CONTENT_CELLS_CLASS);
      var dragRow = closest(this.dragObj.draggedClone, "." + CONTENT_ROW_CLASS);
      if (dragCell && dragCell.classList.contains(DROP_CLASS)) {
        addClass([dragCell], DROPPING_CLASS);
      }
      this.addDropping(dragRow, dragCell);
      if (this.kanbanObj.swimlaneSettings.keyField && this.kanbanObj.swimlaneSettings.allowDragAndDrop) {
        var className = "." + CONTENT_ROW_CLASS + ":not(." + SWIMLANE_ROW_CLASS + "):not(." + COLLAPSED_CLASS + ")";
        var rows = [].slice.call(this.kanbanObj.element.querySelectorAll(className));
        [].slice.call(rows).forEach(function(row) {
          if (dragRow !== row) {
            _this.addDropping(row, dragCell);
          }
        });
      }
    };
    DragAndDrop2.prototype.addDropping = function(dragRow, dragCell) {
      var _this = this;
      if (dragCell && this.borderElm && this.borderElm.length !== 0) {
        if (dragCell.classList.contains(DROPPING_CLASS)) {
          removeClass([dragCell], DROPPING_CLASS);
        }
        var cellDimension = dragCell.getBoundingClientRect();
        this.updateDimension(cellDimension);
      } else if (dragCell && dragRow) {
        [].slice.call(dragRow.children).forEach(function(cell) {
          var transition = _this.kanbanObj.columns[dragCell.cellIndex].transitionColumns;
          if (cell !== dragCell && cell.classList.contains(DROP_CLASS) && _this.allowedTransition(dragCell.getAttribute("data-key"), cell.getAttribute("data-key"), transition)) {
            addClass([cell], DROPPING_CLASS);
          }
        });
      }
    };
    DragAndDrop2.prototype.updateDimension = function(dimensions, target) {
      [].slice.call(this.borderElm).forEach(function(element2) {
        if (element2.parentElement && (element2.parentElement.getAttribute("aria-expanded") === "true" || !element2.parentElement.hasAttribute("aria-expanded"))) {
          addClass([element2], DROPPING_CLASS);
        }
        var hasAddButton = element2.previousElementSibling;
        element2.style.height = parseInt(dimensions.height.toString(), 10) - (hasAddButton && hasAddButton.classList.contains(SHOW_ADD_BUTTON) ? hasAddButton.offsetHeight + hasAddButton.offsetTop : 0) + "px";
        if (!target || target.tagName !== "TABLE") {
          element2.style.width = parseInt(dimensions.width.toString(), 10) + "px";
        }
        element2.style.left = element2.parentElement.getBoundingClientRect().left - closest(element2, ".e-kanban").getBoundingClientRect().left + "px";
      });
    };
    DragAndDrop2.prototype.keydownHandler = function(e) {
      if (e.code === "Escape" && this.dragObj.cloneElement) {
        EventHandler.remove(this.dragObj.cloneElement, "keydown", this.keydownHandler);
        this.dragObj.element.removeAttribute("aria-grabbed");
        this.dragStopClear();
        this.dragStopPostClear();
      }
    };
    DragAndDrop2.prototype.dragStop = function(e) {
      var _this = this;
      var contentCell = closest(this.dragObj.targetClone, "." + CONTENT_CELLS_CLASS);
      var columnKey;
      var dropIndex;
      EventHandler.remove(document.body, "keydown", this.keydownHandler);
      [].slice.call(this.borderElm).forEach(function(element3) {
        element3.classList.remove(DROPPING_CLASS);
      });
      if (this.dragObj.targetClone.parentElement) {
        var isMultipleDrag = this.dragObj.selectedCards && this.dragObj.selectedCards.length > 1 && this.parent.sortSettings.sortBy === "Index";
        var className = !isMultipleDrag ? "." + CARD_CLASS + ":not(." + DRAGGED_CARD_CLASS + "),." + DROPPED_CLONE_CLASS : "." + CARD_CLASS + ",." + DROPPED_CLONE_CLASS;
        var element2 = [].slice.call(this.dragObj.targetClone.parentElement.querySelectorAll(className));
        dropIndex = !isMultipleDrag ? element2.indexOf(this.dragObj.targetClone) : element2.indexOf(this.dragObj.targetClone) - 1;
      }
      if (!isNullOrUndefined(this.kanbanObj) && this.kanbanObj.element.querySelector("." + TARGET_MULTI_CLONE_CLASS)) {
        columnKey = closest(e.target, "." + MULTI_COLUMN_KEY_CLASS + ":not(." + DISABLED_CLASS + ")");
      }
      if (contentCell || columnKey) {
        var cardStatus_1;
        if (contentCell) {
          cardStatus_1 = this.getColumnKey(contentCell);
        } else {
          cardStatus_1 = this.getColumnKey(columnKey);
          contentCell = closest(columnKey, "." + CONTENT_CELLS_CLASS);
        }
        if (this.dragObj.selectedCards instanceof HTMLElement) {
          this.updateDroppedData(this.dragObj.selectedCards, cardStatus_1, contentCell);
        } else {
          this.dragObj.selectedCards.forEach(function(element3) {
            _this.updateDroppedData(element3, cardStatus_1, contentCell);
          });
        }
        if (this.parent.sortSettings.field && this.parent.sortSettings.sortBy === "Index") {
          this.changeOrder(this.dragObj.modifiedData, e.helper);
        }
      }
      if (this.dragObj.modifiedData.length === 0) {
        this.dragObj.modifiedData = this.dragObj.cardDetails;
      }
      var dragArgs = {
        cancel: false,
        data: this.dragObj.modifiedData,
        event: e,
        element: this.dragObj.selectedCards,
        dropIndex
      };
      this.parent.trigger(dragStop$1, dragArgs, function(dragEventArgs) {
        _this.dragStopClear();
        if (!dragEventArgs.cancel) {
          if (contentCell || columnKey) {
            var updateCard = dragEventArgs.data instanceof Array && dragEventArgs.data.length > 1 ? dragEventArgs.data : dragEventArgs.data[0];
            _this.parent.crudModule.updateCard(updateCard, dragEventArgs.dropIndex);
          }
        }
        _this.dragStopPostClear();
      });
    };
    DragAndDrop2.prototype.dragStopClear = function() {
      this.removeElement(this.dragObj.draggedClone);
      this.removeElement(this.dragObj.targetClone, this.kanbanObj);
      this.removeElement(this.dragObj.cloneElement);
      var dragMultiClone = [].slice.call(this.parent.element.querySelectorAll("." + DRAGGED_CLONE_CLASS));
      dragMultiClone.forEach(function(clone) {
        remove(clone);
      });
      this.dragObj.element.style.removeProperty("width");
      this.multiCloneRemove();
      if (this.dragObj.selectedCards instanceof HTMLElement) {
        removeClass([this.dragObj.selectedCards], DRAGGED_CARD_CLASS);
      } else {
        removeClass(this.dragObj.selectedCards, DRAGGED_CARD_CLASS);
      }
      clearInterval(this.dragObj.navigationInterval);
      this.dragObj.navigationInterval = null;
      if (document.body.style.cursor === "not-allowed") {
        document.body.style.cursor = "";
      }
      var styleCards = [].slice.call(this.parent.element.querySelectorAll("." + CARD_CLASS + "[style]"));
      styleCards.forEach(function(styleCard) {
        styleCard.style.cursor = "";
      });
      var className = "." + CONTENT_ROW_CLASS + ":not(." + SWIMLANE_ROW_CLASS + ")";
      var cells = [].slice.call(this.parent.element.querySelectorAll(className + " ." + CONTENT_CELLS_CLASS));
      cells.forEach(function(cell) {
        return removeClass([cell], DROPPING_CLASS);
      });
      if (this.parent.externalDropObj) {
        var externalCells = [].slice.call(this.parent.externalDropObj.element.querySelectorAll(className + " ." + CONTENT_CELLS_CLASS));
        externalCells.forEach(function(externalCell) {
          return removeClass([externalCell], DROPPING_CLASS);
        });
      }
    };
    DragAndDrop2.prototype.dragStopPostClear = function() {
      if (this.parent.isAdaptive) {
        this.parent.touchModule.tabHold = false;
      }
      this.dragObj.cardDetails = this.dragObj.modifiedData = [];
      this.isDragging = false;
      this.parent.isExternalKanbanDrop = false;
      this.parent.externalDropObj = null;
    };
    DragAndDrop2.prototype.updateDroppedData = function(element2, cardStatus, contentCell) {
      var crudObj = this.parent.getCardDetails(element2);
      var crudData = extend({}, crudObj, null, true);
      if (cardStatus.split(",").length === 1) {
        crudData[this.parent.keyField] = cardStatus;
      }
      if (this.parent.swimlaneSettings.keyField && this.parent.swimlaneSettings.allowDragAndDrop) {
        var prev = closest(contentCell, "." + CONTENT_ROW_CLASS).previousElementSibling;
        if (this.parent.isAdaptive) {
          var keyField = this.parent.layoutModule.kanbanRows[this.parent.layoutModule.swimlaneIndex].keyField;
          crudData[this.parent.swimlaneSettings.keyField] = keyField;
        } else {
          crudData[this.parent.swimlaneSettings.keyField] = this.getColumnKey(prev);
        }
      }
      this.dragObj.modifiedData.push(crudData);
    };
    DragAndDrop2.prototype.changeOrder = function(modifieddata, draggedCard) {
      var _this = this;
      var prevele = false;
      var element2;
      if (this.kanbanObj.sortSettings.direction === "Ascending") {
        element2 = draggedCard === this.dragObj.targetClone.previousElementSibling && (this.dragObj.targetClone.previousElementSibling && this.dragObj.targetClone.previousElementSibling.previousElementSibling) ? this.dragObj.targetClone.previousElementSibling.previousElementSibling : this.dragObj.targetClone.previousElementSibling;
      } else {
        element2 = this.dragObj.targetClone.nextElementSibling;
      }
      if (element2 && !element2.classList.contains(DRAGGED_CARD_CLASS) && !element2.classList.contains(CLONED_CARD_CLASS) && !element2.classList.contains(DRAGGED_CLONE_CLASS)) {
        prevele = true;
      } else if (this.dragObj.targetClone.nextElementSibling && this.kanbanObj.sortSettings.direction === "Ascending") {
        element2 = this.dragObj.targetClone.nextElementSibling;
      } else if (this.dragObj.targetClone.previousElementSibling && this.kanbanObj.sortSettings.direction === "Descending") {
        element2 = this.dragObj.targetClone.previousElementSibling;
      } else {
        return;
      }
      if (element2.classList.contains(CARD_CLASS)) {
        var obj = this.kanbanObj.getCardDetails(element2);
        var keyIndex_1 = obj[this.kanbanObj.sortSettings.field];
        if (modifieddata.length > 1 && this.kanbanObj.sortSettings.direction === "Descending") {
          modifieddata = modifieddata.reverse();
        }
        modifieddata.forEach(function(data, index) {
          if (prevele) {
            data[_this.kanbanObj.sortSettings.field] = ++keyIndex_1;
          } else if (keyIndex_1 !== 1 && index <= data[_this.kanbanObj.sortSettings.field]) {
            data[_this.kanbanObj.sortSettings.field] = --keyIndex_1;
          } else if (keyIndex_1 === 1) {
            data[_this.kanbanObj.sortSettings.field] = index + 1;
          }
        });
      }
    };
    DragAndDrop2.prototype.toggleVisible = function(target, tColumn) {
      var _this = this;
      var headerCells = "." + HEADER_CELLS_CLASS$1 + ":not(." + STACKED_HEADER_CELL_CLASS + ")";
      var lists = [].slice.call(this.kanbanObj.element.querySelectorAll(headerCells));
      lists.forEach(function(list) {
        if (_this.getColumnKey(list) === _this.getColumnKey(tColumn || target)) {
          _this.kanbanObj.actionModule.columnToggle(list);
        }
      });
      var cloneTarget = closest(this.dragObj.draggedClone, "." + CONTENT_CELLS_CLASS);
      if (cloneTarget) {
        var width = formatUnit(cloneTarget.offsetWidth - cardSpace);
        this.dragObj.draggedClone.style.width = width;
        this.dragObj.cloneElement.style.width = width;
      }
    };
    DragAndDrop2.prototype.multiCloneRemove = function() {
      var cloneMulti = !isNullOrUndefined(this.kanbanObj) ? [].slice.call(this.kanbanObj.element.querySelectorAll("." + TARGET_MULTI_CLONE_CLASS)) : [];
      if (cloneMulti.length > 0) {
        var columnKey = [].slice.call(this.kanbanObj.element.querySelectorAll("." + MULTI_COLUMN_KEY_CLASS));
        columnKey.forEach(function(node) {
          return remove(node);
        });
        cloneMulti.forEach(function(node) {
          var cell = closest(node, "." + CONTENT_CELLS_CLASS);
          if (cell) {
            cell.style.borderStyle = "";
            if (cell.querySelector("." + SHOW_ADD_BUTTON)) {
              removeClass([cell.querySelector("." + SHOW_ADD_BUTTON)], MULTI_CARD_WRAPPER_CLASS);
            }
            removeClass([cell.querySelector("." + CARD_WRAPPER_CLASS)], MULTI_CARD_WRAPPER_CLASS);
          }
        });
        this.removeElement(this.dragObj.targetCloneMulti, this.kanbanObj);
      }
    };
    DragAndDrop2.prototype.calculateArgs = function(e) {
      var eventArgs = this.getPageCoordinates(e);
      this.dragObj.pageY = eventArgs.pageY;
      this.dragObj.pageX = eventArgs.pageX;
      this.isDragging = true;
      if (this.kanbanObj.isAdaptive && this.kanbanObj.tooltipModule) {
        this.kanbanObj.tooltipModule.tooltipObj.close();
      }
    };
    DragAndDrop2.prototype.getPageCoordinates = function(e) {
      var eventArgs = e.event;
      return eventArgs && eventArgs.changedTouches ? eventArgs.changedTouches[0] : e.changedTouches ? e.changedTouches[0] : eventArgs || e;
    };
    DragAndDrop2.prototype.getColumnKey = function(target) {
      if (target && target.getAttribute("data-key")) {
        return target.getAttribute("data-key").trim();
      }
      return "";
    };
    DragAndDrop2.prototype.updateScrollPosition = function() {
      var _this = this;
      if (isNullOrUndefined(this.dragObj.navigationInterval)) {
        this.dragObj.navigationInterval = window.setInterval(function() {
          _this.autoScroll();
        }, 100);
      }
    };
    DragAndDrop2.prototype.autoScrollValidation = function() {
      var pageY = this.dragObj.pageY;
      var pageX = this.dragObj.pageX;
      var autoScrollDistance = 30;
      var dragEdges = { left: false, right: false, top: false, bottom: false };
      var viewBoundaries = this.kanbanObj.element.querySelector("." + CONTENT_CLASS).getBoundingClientRect();
      if (pageY < viewBoundaries.top + autoScrollDistance + window.pageYOffset && pageY > viewBoundaries.top + window.pageYOffset) {
        dragEdges.top = true;
      }
      if (pageY > viewBoundaries.bottom - autoScrollDistance + window.pageYOffset && pageY < viewBoundaries.bottom + window.pageYOffset) {
        dragEdges.bottom = true;
      }
      if (pageX < viewBoundaries.left + autoScrollDistance + window.pageXOffset && pageX > viewBoundaries.left + window.pageXOffset) {
        dragEdges.left = true;
      }
      if (pageX > viewBoundaries.right - autoScrollDistance + window.pageXOffset && pageX < viewBoundaries.right + window.pageXOffset) {
        dragEdges.right = true;
      }
      this.dragEdges = dragEdges;
    };
    DragAndDrop2.prototype.autoScroll = function() {
      this.autoScrollValidation();
      var scrollSensitivity = 30;
      if (this.kanbanObj.isAdaptive) {
        var parent_1;
        if (this.dragEdges.top || this.dragEdges.bottom) {
          if (this.dragObj.targetClone) {
            parent_1 = closest(this.dragObj.targetClone, "." + CARD_WRAPPER_CLASS);
          } else {
            parent_1 = closest(this.dragObj.draggedClone, "." + CARD_WRAPPER_CLASS);
          }
        } else if (this.dragEdges.right || this.dragEdges.left) {
          parent_1 = this.kanbanObj.element.querySelector("." + CONTENT_CLASS);
        }
        if (parent_1) {
          var yIsScrollable = parent_1.offsetHeight <= parent_1.scrollHeight;
          var xIsScrollable = parent_1.offsetWidth <= parent_1.scrollWidth;
          var yInBounds = parent_1.scrollTop >= 0 && parent_1.scrollTop + parent_1.offsetHeight <= parent_1.scrollHeight;
          var xInBounds = parent_1.scrollLeft >= 0 && parent_1.scrollLeft + parent_1.offsetWidth <= parent_1.scrollWidth;
          if (yIsScrollable && yInBounds && (this.dragEdges.top || this.dragEdges.bottom)) {
            parent_1.scrollTop += this.dragEdges.top ? -(scrollSensitivity + 36) : scrollSensitivity;
          }
          if (xIsScrollable && xInBounds && (this.dragEdges.left || this.dragEdges.right)) {
            var scroll_1 = this.kanbanObj.layoutModule.getWidth() * (this.kanbanObj.columns.length - 1) > parent_1.scrollLeft;
            if (scroll_1 || this.dragEdges.left) {
              parent_1.scrollLeft += this.dragEdges.left ? -scrollSensitivity : scrollSensitivity;
            }
          }
        }
      } else {
        var parent_2 = this.kanbanObj.element.querySelector("." + CONTENT_CLASS);
        var column = this.dragObj.targetClone.parentElement;
        var yScrollable = parent_2.offsetHeight <= parent_2.scrollHeight;
        var xScrollable = parent_2.offsetWidth <= parent_2.scrollWidth;
        var yBounds = yScrollable && parent_2.scrollTop >= 0 && parent_2.scrollTop + parent_2.offsetHeight <= parent_2.scrollHeight;
        var xBounds = xScrollable && parent_2.scrollLeft >= 0 && parent_2.scrollLeft + parent_2.offsetWidth <= parent_2.scrollWidth;
        if (yBounds && (this.dragEdges.top || this.dragEdges.bottom)) {
          parent_2.scrollTop += this.dragEdges.top ? -scrollSensitivity : scrollSensitivity;
          if (this.parent.swimlaneSettings.enableFrozenRows) {
            this.dragObj.cloneElement.style.top = !this.dragEdges.top ? parseInt(this.dragObj.cloneElement.style.top, 10) + scrollSensitivity + "px" : parseInt(this.dragObj.cloneElement.style.top, 10) - scrollSensitivity + "px";
          }
          if (column) {
            column.scrollTop += this.dragEdges.top ? -scrollSensitivity : scrollSensitivity;
          }
        }
        if (xBounds && (this.dragEdges.left || this.dragEdges.right)) {
          parent_2.scrollLeft += this.dragEdges.left ? -scrollSensitivity : scrollSensitivity;
          if (column) {
            column.scrollLeft += this.dragEdges.left ? -scrollSensitivity : scrollSensitivity;
          }
        }
        if (this.dragObj.pageY - window.scrollY < scrollSensitivity) {
          window.scrollTo(window.scrollX, window.scrollY - scrollSensitivity);
        } else if (window.innerHeight - (this.dragObj.pageY - window.scrollY) < scrollSensitivity) {
          window.scrollTo(window.scrollX, window.scrollY + scrollSensitivity);
        }
      }
    };
    DragAndDrop2.prototype.unWireDragEvents = function(element2) {
      var dragInstance = element2.ej2_instances[0];
      if (dragInstance && !dragInstance.isDestroyed) {
        dragInstance.destroy();
      }
    };
    return DragAndDrop2;
  }()
);
var queryString = "";
var prevString = "";
var matches = [];
var activeClass = "e-active";
var prevElementId = "";
function incrementalSearch(keyCode2, items, selectedIndex, ignoreCase, elementId) {
  queryString += String.fromCharCode(keyCode2);
  setTimeout(function() {
    queryString = "";
  }, 1e3);
  var index;
  queryString = ignoreCase ? queryString.toLowerCase() : queryString;
  if (prevElementId === elementId && prevString === queryString) {
    for (var i = 0; i < matches.length; i++) {
      if (matches[i].classList.contains(activeClass)) {
        index = i;
        break;
      }
    }
    index = index + 1;
    return matches[index] ? matches[index] : matches[0];
  } else {
    var listItems = items;
    var strLength = queryString.length;
    var text = void 0;
    var item = void 0;
    selectedIndex = selectedIndex ? selectedIndex + 1 : 0;
    var i = selectedIndex;
    matches = [];
    do {
      if (i === listItems.length) {
        i = -1;
      }
      if (i === -1) {
        index = 0;
      } else {
        index = i;
      }
      item = listItems[index];
      text = ignoreCase ? item.innerText.toLowerCase() : item.innerText;
      if (text.substr(0, strLength) === queryString) {
        matches.push(listItems[index]);
      }
      i++;
    } while (i !== selectedIndex);
    prevString = queryString;
    prevElementId = elementId;
    return matches[0];
  }
}
function Search(inputVal, items, searchType, ignoreCase, dataSource, fields, type) {
  var listItems = items;
  ignoreCase = ignoreCase !== void 0 && ignoreCase !== null ? ignoreCase : true;
  var itemData = { item: null, index: null };
  if (inputVal && inputVal.length) {
    var strLength = inputVal.length;
    var queryStr = ignoreCase ? inputVal.toLocaleLowerCase() : inputVal;
    queryStr = escapeCharRegExp(queryStr);
    var _loop_1 = function(i2, itemsData2) {
      var item = itemsData2[i2];
      var text = void 0;
      var filterValue;
      if (items && dataSource) {
        var checkField_1 = item;
        var fieldValue_1 = fields.text.split(".");
        dataSource.filter(function(data) {
          Array.prototype.slice.call(fieldValue_1).forEach(function(value) {
            if (type === "object" && checkField_1.textContent.toString().indexOf(data[value]) !== -1 && checkField_1.getAttribute("data-value") === data[fields.value].toString() || type === "string" && checkField_1.textContent.toString().indexOf(data) !== -1) {
              filterValue = type === "object" ? data[value] : data;
            }
          });
        });
      }
      text = dataSource && filterValue ? (ignoreCase ? filterValue.toLocaleLowerCase() : filterValue).replace(/^\s+|\s+$/g, "") : (ignoreCase ? item.textContent.toLocaleLowerCase() : item.textContent).replace(/^\s+|\s+$/g, "");
      if (searchType === "Equal" && text === queryStr || searchType === "StartsWith" && text.substr(0, strLength) === queryStr || searchType === "EndsWith" && text.substr(text.length - queryStr.length) === queryStr || searchType === "Contains" && new RegExp(queryStr, "g").test(text)) {
        itemData.item = item;
        itemData.index = i2;
        return { value: { item, index: i2 } };
      }
    };
    for (var i = 0, itemsData = listItems; i < itemsData.length; i++) {
      var state_1 = _loop_1(i, itemsData);
      if (typeof state_1 === "object")
        return state_1.value;
    }
    return itemData;
  }
  return itemData;
}
function escapeCharRegExp(value) {
  return value.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");
}
function resetIncrementalSearchValues(elementId) {
  if (prevElementId === elementId) {
    prevElementId = "";
    prevString = "";
    queryString = "";
    matches = [];
  }
}
var cssClass = {
  li: "e-list-item",
  ul: "e-list-parent e-ul",
  group: "e-list-group-item",
  icon: "e-list-icon",
  text: "e-list-text",
  check: "e-list-check",
  checked: "e-checked",
  selected: "e-selected",
  expanded: "e-expanded",
  textContent: "e-text-content",
  hasChild: "e-has-child",
  level: "e-level",
  url: "e-list-url",
  collapsible: "e-icon-collapsible",
  disabled: "e-disabled",
  image: "e-list-img",
  iconWrapper: "e-icon-wrapper",
  anchorWrap: "e-anchor-wrap",
  navigable: "e-navigable"
};
var ListBase;
(function(ListBase2) {
  ListBase2.defaultMappedFields = {
    id: "id",
    text: "text",
    url: "url",
    value: "value",
    isChecked: "isChecked",
    enabled: "enabled",
    expanded: "expanded",
    selected: "selected",
    iconCss: "iconCss",
    child: "child",
    isVisible: "isVisible",
    hasChildren: "hasChildren",
    tooltip: "tooltip",
    htmlAttributes: "htmlAttributes",
    urlAttributes: "urlAttributes",
    imageAttributes: "imageAttributes",
    imageUrl: "imageUrl",
    groupBy: null,
    sortBy: null
  };
  var defaultAriaAttributes = {
    level: 1,
    listRole: "presentation",
    itemRole: "presentation",
    groupItemRole: "group",
    itemText: "list-item",
    wrapperRole: "presentation"
  };
  var defaultListBaseOptions = {
    showCheckBox: false,
    showIcon: false,
    enableHtmlSanitizer: false,
    expandCollapse: false,
    fields: ListBase2.defaultMappedFields,
    ariaAttributes: defaultAriaAttributes,
    listClass: "",
    itemClass: "",
    processSubChild: false,
    sortOrder: "None",
    template: null,
    groupTemplate: null,
    headerTemplate: null,
    expandIconClass: "e-icon-collapsible",
    moduleName: "list",
    expandIconPosition: "Right",
    itemNavigable: false
  };
  function createList(createElement2, dataSource, options, isSingleLevel, componentInstance) {
    var curOpt = extend({}, defaultListBaseOptions, options);
    var ariaAttributes = extend({}, defaultAriaAttributes, curOpt.ariaAttributes);
    var type = typeofData(dataSource).typeof;
    if (type === "string" || type === "number") {
      return createListFromArray(createElement2, dataSource, isSingleLevel, options, componentInstance);
    } else {
      return createListFromJson(createElement2, dataSource, options, ariaAttributes.level, isSingleLevel, componentInstance);
    }
  }
  ListBase2.createList = createList;
  function createListFromArray(createElement2, dataSource, isSingleLevel, options, componentInstance) {
    var subChild = createListItemFromArray(createElement2, dataSource, isSingleLevel, options, componentInstance);
    return generateUL(createElement2, subChild, null, options);
  }
  ListBase2.createListFromArray = createListFromArray;
  function createListItemFromArray(createElement2, dataSource, isSingleLevel, options, componentInstance) {
    var subChild = [];
    var curOpt = extend({}, defaultListBaseOptions, options);
    cssClass = getModuleClass(curOpt.moduleName);
    var id = generateId();
    for (var i = 0; i < dataSource.length; i++) {
      if (isNullOrUndefined(dataSource[i])) {
        continue;
      }
      var li = void 0;
      if (curOpt.itemCreating && typeof curOpt.itemCreating === "function") {
        var curData = {
          dataSource,
          curData: dataSource[i],
          text: dataSource[i],
          options: curOpt
        };
        curOpt.itemCreating(curData);
      }
      if (isSingleLevel) {
        li = generateSingleLevelLI(createElement2, dataSource[i], void 0, null, null, [], null, id, i, options);
      } else {
        li = generateLI(createElement2, dataSource[i], void 0, null, null, options, componentInstance);
      }
      if (curOpt.itemCreated && typeof curOpt.itemCreated === "function") {
        var curData = {
          dataSource,
          curData: dataSource[i],
          text: dataSource[i],
          item: li,
          options: curOpt
        };
        curOpt.itemCreated(curData);
      }
      subChild.push(li);
    }
    return subChild;
  }
  ListBase2.createListItemFromArray = createListItemFromArray;
  function createListItemFromJson(createElement2, dataSource, options, level, isSingleLevel, componentInstance) {
    var curOpt = extend({}, defaultListBaseOptions, options);
    cssClass = getModuleClass(curOpt.moduleName);
    var fields = componentInstance && (componentInstance.getModuleName() === "listview" || componentInstance.getModuleName() === "multiselect") ? curOpt.fields : extend({}, ListBase2.defaultMappedFields, curOpt.fields);
    var ariaAttributes = extend({}, defaultAriaAttributes, curOpt.ariaAttributes);
    var id;
    var checkboxElement = [];
    if (level) {
      ariaAttributes.level = level;
    }
    var child = [];
    var li;
    var anchorElement;
    if (dataSource && dataSource.length && !isNullOrUndefined(typeofData(dataSource).item) && // eslint-disable-next-line no-prototype-builtins
    !typeofData(dataSource).item.hasOwnProperty(fields.id)) {
      id = generateId();
    }
    for (var i = 0; i < dataSource.length; i++) {
      var fieldData = getFieldValues(dataSource[i], fields);
      if (isNullOrUndefined(dataSource[i])) {
        continue;
      }
      if (curOpt.itemCreating && typeof curOpt.itemCreating === "function") {
        var curData = {
          dataSource,
          curData: dataSource[i],
          text: fieldData[fields.text],
          options: curOpt,
          fields
        };
        curOpt.itemCreating(curData);
      }
      var curItem = dataSource[i];
      if (curOpt.itemCreating && typeof curOpt.itemCreating === "function") {
        fieldData = getFieldValues(dataSource[i], fields);
      }
      if (fieldData.hasOwnProperty(fields.id) && !isNullOrUndefined(fieldData[fields.id])) {
        id = fieldData[fields.id];
      }
      var innerEle = [];
      if (curOpt.showCheckBox) {
        if (curOpt.itemNavigable && (fieldData[fields.url] || fieldData[fields.urlAttributes])) {
          checkboxElement.push(createElement2("input", { className: cssClass.check, attrs: { type: "checkbox" } }));
        } else {
          innerEle.push(createElement2("input", { className: cssClass.check, attrs: { type: "checkbox" } }));
        }
      }
      if (isSingleLevel === true) {
        if (curOpt.showIcon && fieldData.hasOwnProperty(fields.iconCss) && !isNullOrUndefined(fieldData[fields.iconCss])) {
          innerEle.push(createElement2("span", { className: cssClass.icon + " " + fieldData[fields.iconCss] }));
        }
        li = generateSingleLevelLI(
          createElement2,
          curItem,
          fieldData,
          fields,
          curOpt.itemClass,
          innerEle,
          // eslint-disable-next-line no-prototype-builtins
          curItem.hasOwnProperty("isHeader") && curItem.isHeader ? true : false,
          id,
          i,
          options
        );
        anchorElement = li.querySelector("." + cssClass.anchorWrap);
        if (curOpt.itemNavigable && checkboxElement.length) {
          prepend(checkboxElement, li.firstElementChild);
        }
      } else {
        li = generateLI(createElement2, curItem, fieldData, fields, curOpt.itemClass, options, componentInstance);
        li.classList.add(cssClass.level + "-" + ariaAttributes.level);
        li.setAttribute("aria-level", ariaAttributes.level.toString());
        if (ariaAttributes.groupItemRole == "presentation") {
          li.removeAttribute("aria-level");
        }
        anchorElement = li.querySelector("." + cssClass.anchorWrap);
        if (fieldData.hasOwnProperty(fields.tooltip)) {
          li.setAttribute("title", fieldData[fields.tooltip]);
        }
        if (fieldData.hasOwnProperty(fields.htmlAttributes) && fieldData[fields.htmlAttributes]) {
          setAttribute(li, fieldData[fields.htmlAttributes]);
        }
        if (fieldData.hasOwnProperty(fields.enabled) && fieldData[fields.enabled] === false) {
          li.classList.add(cssClass.disabled);
        }
        if (fieldData.hasOwnProperty(fields.isVisible) && fieldData[fields.isVisible] === false) {
          li.style.display = "none";
        }
        if (fieldData.hasOwnProperty(fields.imageUrl) && !isNullOrUndefined(fieldData[fields.imageUrl]) && !curOpt.template) {
          var attr = { src: fieldData[fields.imageUrl] };
          merge(attr, fieldData[fields.imageAttributes]);
          var imageElemnt = createElement2("img", { className: cssClass.image, attrs: attr });
          if (anchorElement) {
            anchorElement.insertAdjacentElement("afterbegin", imageElemnt);
          } else {
            prepend([imageElemnt], li.firstElementChild);
          }
        }
        if (curOpt.showIcon && fieldData.hasOwnProperty(fields.iconCss) && !isNullOrUndefined(fieldData[fields.iconCss]) && !curOpt.template) {
          var iconElement = createElement2("div", { className: cssClass.icon + " " + fieldData[fields.iconCss] });
          if (anchorElement) {
            anchorElement.insertAdjacentElement("afterbegin", iconElement);
          } else {
            prepend([iconElement], li.firstElementChild);
          }
        }
        if (innerEle.length) {
          prepend(innerEle, li.firstElementChild);
        }
        if (curOpt.itemNavigable && checkboxElement.length) {
          prepend(checkboxElement, li.firstElementChild);
        }
        processSubChild(createElement2, fieldData, fields, dataSource, curOpt, li, ariaAttributes.level);
      }
      if (anchorElement) {
        addClass([li], [cssClass.navigable]);
      }
      if (curOpt.itemCreated && typeof curOpt.itemCreated === "function") {
        var curData = {
          dataSource,
          curData: dataSource[i],
          text: fieldData[fields.text],
          item: li,
          options: curOpt,
          fields
        };
        curOpt.itemCreated(curData);
      }
      checkboxElement = [];
      child.push(li);
    }
    return child;
  }
  ListBase2.createListItemFromJson = createListItemFromJson;
  function createListFromJson(createElement2, dataSource, options, level, isSingleLevel, componentInstance) {
    var curOpt = extend({}, defaultListBaseOptions, options);
    var li = createListItemFromJson(createElement2, dataSource, options, level, isSingleLevel, componentInstance);
    return generateUL(createElement2, li, curOpt.listClass, options);
  }
  ListBase2.createListFromJson = createListFromJson;
  function getSiblingLI(elementArray, element2, isPrevious) {
    cssClass = getModuleClass(defaultListBaseOptions.moduleName);
    if (!elementArray || !elementArray.length) {
      return void 0;
    }
    var siblingLI;
    var liIndex;
    var liCollections = Array.prototype.slice.call(elementArray);
    if (element2) {
      liIndex = indexOf(element2, liCollections);
    } else {
      liIndex = isPrevious === true ? liCollections.length : -1;
    }
    siblingLI = liCollections[liIndex + (isPrevious === true ? -1 : 1)];
    while (siblingLI && (!isVisible(siblingLI) || siblingLI.classList.contains(cssClass.disabled))) {
      liIndex = liIndex + (isPrevious === true ? -1 : 1);
      siblingLI = liCollections[liIndex];
    }
    return siblingLI;
  }
  ListBase2.getSiblingLI = getSiblingLI;
  function indexOf(item, elementArray) {
    if (!elementArray || !item) {
      return void 0;
    } else {
      var liCollections = elementArray;
      liCollections = Array.prototype.slice.call(elementArray);
      return liCollections.indexOf(item);
    }
  }
  ListBase2.indexOf = indexOf;
  function groupDataSource(dataSource, fields, sortOrder) {
    if (sortOrder === void 0) {
      sortOrder = "None";
    }
    var curFields = extend({}, ListBase2.defaultMappedFields, fields);
    var cusQuery = new Query().group(curFields.groupBy);
    cusQuery = addSorting(sortOrder, "key", cusQuery);
    var ds = getDataSource(dataSource, cusQuery);
    dataSource = [];
    for (var j = 0; j < ds.length; j++) {
      var itemObj = ds[j].items;
      var grpItem = {};
      var hdr = "isHeader";
      grpItem[curFields.text] = ds[j].key;
      grpItem["" + hdr] = true;
      var newtext = curFields.text;
      if (newtext === "id") {
        newtext = "text";
        grpItem["" + newtext] = ds[j].key;
      }
      grpItem._id = "group-list-item-" + (ds[j].key ? ds[j].key.toString().trim() : "undefined");
      grpItem.items = itemObj;
      dataSource.push(grpItem);
      for (var k = 0; k < itemObj.length; k++) {
        dataSource.push(itemObj[k]);
      }
    }
    return dataSource;
  }
  ListBase2.groupDataSource = groupDataSource;
  function addSorting(sortOrder, sortBy, query) {
    if (query === void 0) {
      query = new Query();
    }
    if (sortOrder === "Ascending") {
      query.sortBy(sortBy, "ascending", true);
    } else if (sortOrder === "Descending") {
      query.sortBy(sortBy, "descending", true);
    } else {
      for (var i = 0; i < query.queries.length; i++) {
        if (query.queries[i].fn === "onSortBy") {
          query.queries.splice(i, 1);
        }
      }
    }
    return query;
  }
  ListBase2.addSorting = addSorting;
  function getDataSource(dataSource, query) {
    return new DataManager(dataSource).executeLocal(query);
  }
  ListBase2.getDataSource = getDataSource;
  function createJsonFromElement(element2, options) {
    var curOpt = extend({}, defaultListBaseOptions, options);
    var fields = extend({}, ListBase2.defaultMappedFields, curOpt.fields);
    var curEle = element2.cloneNode(true);
    var jsonAr = [];
    curEle.classList.add("json-parent");
    var childs = curEle.querySelectorAll(".json-parent>li");
    curEle.classList.remove("json-parent");
    for (var i = 0; i < childs.length; i++) {
      var li = childs[i];
      var anchor = li.querySelector("a");
      var ul = li.querySelector("ul");
      var json = {};
      var childNodes = anchor ? anchor.childNodes : li.childNodes;
      var keys2 = Object.keys(childNodes);
      for (var i_1 = 0; i_1 < childNodes.length; i_1++) {
        if (!childNodes[Number(keys2[i_1])].hasChildNodes()) {
          json[fields.text] = childNodes[Number(keys2[i_1])].textContent;
        }
      }
      var attributes_1 = getAllAttributes(li);
      if (attributes_1.id) {
        json[fields.id] = attributes_1.id;
        delete attributes_1.id;
      } else {
        json[fields.id] = generateId();
      }
      if (Object.keys(attributes_1).length) {
        json[fields.htmlAttributes] = attributes_1;
      }
      if (anchor) {
        attributes_1 = getAllAttributes(anchor);
        if (Object.keys(attributes_1).length) {
          json[fields.urlAttributes] = attributes_1;
        }
      }
      if (ul) {
        json[fields.child] = createJsonFromElement(ul, options);
      }
      jsonAr.push(json);
    }
    return jsonAr;
  }
  ListBase2.createJsonFromElement = createJsonFromElement;
  function typeofData(data) {
    var match = { typeof: null, item: null };
    for (var i = 0; i < data.length; i++) {
      if (!isNullOrUndefined(data[i])) {
        return match = { typeof: typeof data[i], item: data[i] };
      }
    }
    return match;
  }
  function setAttribute(element2, elementAttributes) {
    var attr = {};
    merge(attr, elementAttributes);
    if (attr.class) {
      addClass([element2], attr.class.split(" "));
      delete attr.class;
    }
    attributes(element2, attr);
  }
  function getAllAttributes(element2) {
    var attributes2 = {};
    var attr = element2.attributes;
    for (var index = 0; index < attr.length; index++) {
      attributes2[attr[index].nodeName] = attr[index].nodeValue;
    }
    return attributes2;
  }
  function renderContentTemplate(createElement2, template, dataSource, fields, options, componentInstance) {
    cssClass = getModuleClass(defaultListBaseOptions.moduleName);
    var ulElement = createElement2("ul", { className: cssClass.ul, attrs: { role: "presentation" } });
    var curOpt = extend({}, defaultListBaseOptions, options);
    var curFields = extend({}, ListBase2.defaultMappedFields, fields);
    var compiledString = compileTemplate(template);
    var liCollection = [];
    var value;
    var id = generateId();
    for (var i = 0; i < dataSource.length; i++) {
      var fieldData = getFieldValues(dataSource[i], curFields);
      var curItem = dataSource[i];
      var isHeader = curItem.isHeader;
      if (typeof dataSource[i] === "string" || typeof dataSource[i] === "number") {
        value = curItem;
      } else {
        value = fieldData[curFields.value];
      }
      if (curOpt.itemCreating && typeof curOpt.itemCreating === "function") {
        var curData = {
          dataSource,
          curData: curItem,
          text: value,
          options: curOpt,
          fields: curFields
        };
        curOpt.itemCreating(curData);
      }
      if (curOpt.itemCreating && typeof curOpt.itemCreating === "function") {
        fieldData = getFieldValues(dataSource[i], curFields);
        if (typeof dataSource[i] === "string" || typeof dataSource[i] === "number") {
          value = curItem;
        } else {
          value = fieldData[curFields.value];
        }
      }
      var li = createElement2("li", {
        id: id + "-" + i,
        className: isHeader ? cssClass.group : cssClass.li,
        attrs: { role: "presentation" }
      });
      if (isHeader) {
        if (typeof dataSource[i] === "string" || typeof dataSource[i] === "number") {
          li.innerText = curItem;
        } else {
          li.innerText = fieldData[curFields.text];
        }
      } else {
        var currentID = isHeader ? curOpt.groupTemplateID : curOpt.templateID;
        if (isHeader) {
          if (componentInstance && componentInstance.getModuleName() != "listview") {
            var compiledElement = compiledString(curItem, componentInstance, "headerTemplate", currentID, !!curOpt.isStringTemplate, null, li);
            if (compiledElement) {
              append2(compiledElement, li);
            }
          } else {
            append2(compiledString(curItem, componentInstance, "headerTemplate", currentID, !!curOpt.isStringTemplate), li);
          }
        } else {
          if (componentInstance && componentInstance.getModuleName() !== "listview") {
            var compiledElement = compiledString(curItem, componentInstance, "template", currentID, !!curOpt.isStringTemplate, null, li);
            if (compiledElement) {
              append2(compiledElement, li);
            }
          } else {
            append2(compiledString(curItem, componentInstance, "template", currentID, !!curOpt.isStringTemplate), li);
          }
        }
        li.setAttribute("data-value", isNullOrUndefined(value) ? "null" : value);
        li.setAttribute("role", "option");
      }
      if (curOpt.itemCreated && typeof curOpt.itemCreated === "function") {
        var curData = {
          dataSource,
          curData: curItem,
          text: value,
          item: li,
          options: curOpt,
          fields: curFields
        };
        curOpt.itemCreated(curData);
      }
      liCollection.push(li);
    }
    append2(liCollection, ulElement);
    return ulElement;
  }
  ListBase2.renderContentTemplate = renderContentTemplate;
  function renderGroupTemplate(groupTemplate, groupDataSource2, fields, headerItems, options, componentInstance) {
    var compiledString = compileTemplate(groupTemplate);
    var curFields = extend({}, ListBase2.defaultMappedFields, fields);
    var curOpt = extend({}, defaultListBaseOptions, options);
    var category = curFields.groupBy;
    for (var _i = 0, headerItems_1 = headerItems; _i < headerItems_1.length; _i++) {
      var header = headerItems_1[_i];
      var headerData = {};
      headerData["" + category] = header.textContent;
      header.innerHTML = "";
      if (componentInstance && componentInstance.getModuleName() !== "listview") {
        var compiledElement = compiledString(headerData, componentInstance, "groupTemplate", curOpt.groupTemplateID, !!curOpt.isStringTemplate, null, header);
        if (compiledElement) {
          append2(compiledElement, header);
        }
      } else {
        append2(compiledString(headerData, componentInstance, "groupTemplate", curOpt.groupTemplateID, !!curOpt.isStringTemplate), header);
      }
    }
    return headerItems;
  }
  ListBase2.renderGroupTemplate = renderGroupTemplate;
  function generateId() {
    return Math.floor((1 + Math.random()) * 65536).toString(16).substring(1);
  }
  ListBase2.generateId = generateId;
  function processSubChild(createElement2, fieldData, fields, ds, options, element2, level) {
    var subDS = fieldData[fields.child] || [];
    var hasChildren = fieldData[fields.hasChildren];
    if (subDS.length) {
      hasChildren = true;
      element2.classList.add(cssClass.hasChild);
      if (options.processSubChild) {
        var subLi = createListFromJson(createElement2, subDS, options, ++level);
        element2.appendChild(subLi);
      }
    }
    if (!!options.expandCollapse && hasChildren && !options.template) {
      element2.firstElementChild.classList.add(cssClass.iconWrapper);
      var expandElement = options.expandIconPosition === "Left" ? prepend : append2;
      expandElement([createElement2("div", { className: "e-icons " + options.expandIconClass })], element2.querySelector("." + cssClass.textContent));
    }
  }
  function generateSingleLevelLI(createElement2, item, fieldData, fields, className, innerElements, grpLI, id, index, options) {
    var curOpt = extend({}, defaultListBaseOptions, options);
    var ariaAttributes = extend({}, defaultAriaAttributes, curOpt.ariaAttributes);
    var text = item;
    var value = item;
    var dataSource;
    if (typeof item !== "string" && typeof item !== "number" && typeof item !== "boolean") {
      dataSource = item;
      text = typeof fieldData[fields.text] === "boolean" || typeof fieldData[fields.text] === "number" ? fieldData[fields.text] : fieldData[fields.text] || "";
      value = fieldData[fields.value];
    }
    var elementID;
    if (!isNullOrUndefined(dataSource) && !isNullOrUndefined(fieldData[fields.id]) && fieldData[fields.id] !== "") {
      elementID = id;
    } else {
      elementID = id + "-" + index;
    }
    var li = createElement2("li", {
      className: (grpLI === true ? cssClass.group : cssClass.li) + " " + (isNullOrUndefined(className) ? "" : className),
      id: elementID,
      attrs: ariaAttributes.groupItemRole !== "" && ariaAttributes.itemRole !== "" ? { role: grpLI === true ? ariaAttributes.groupItemRole : ariaAttributes.itemRole } : {}
    });
    if (dataSource && fieldData.hasOwnProperty(fields.enabled) && fieldData[fields.enabled].toString() === "false") {
      li.classList.add(cssClass.disabled);
    }
    if (grpLI) {
      li.innerText = text;
    } else {
      li.setAttribute("data-value", isNullOrUndefined(value) ? "null" : value);
      li.setAttribute("role", "option");
      if (dataSource && fieldData.hasOwnProperty(fields.htmlAttributes) && fieldData[fields.htmlAttributes]) {
        setAttribute(li, fieldData[fields.htmlAttributes]);
      }
      if (innerElements.length && !curOpt.itemNavigable) {
        append2(innerElements, li);
      }
      if (dataSource && (fieldData[fields.url] || fieldData[fields.urlAttributes] && fieldData[fields.urlAttributes].href)) {
        li.appendChild(anchorTag(createElement2, dataSource, fields, text, innerElements, curOpt.itemNavigable));
      } else {
        if (innerElements.length && curOpt.itemNavigable) {
          append2(innerElements, li);
        }
        li.appendChild(document.createTextNode(text));
      }
    }
    return li;
  }
  function getModuleClass(moduleName) {
    return {
      li: "e-" + moduleName + "-item",
      ul: "e-" + moduleName + "-parent e-ul",
      group: "e-" + moduleName + "-group-item",
      icon: "e-" + moduleName + "-icon",
      text: "e-" + moduleName + "-text",
      check: "e-" + moduleName + "-check",
      checked: "e-checked",
      selected: "e-selected",
      expanded: "e-expanded",
      textContent: "e-text-content",
      hasChild: "e-has-child",
      level: "e-level",
      url: "e-" + moduleName + "-url",
      collapsible: "e-icon-collapsible",
      disabled: "e-disabled",
      image: "e-" + moduleName + "-img",
      iconWrapper: "e-icon-wrapper",
      anchorWrap: "e-anchor-wrap",
      navigable: "e-navigable"
    };
  }
  function anchorTag(createElement2, dataSource, fields, text, innerElements, isFullNavigation) {
    var fieldData = getFieldValues(dataSource, fields);
    var attr = { href: fieldData[fields.url] };
    if (fieldData.hasOwnProperty(fields.urlAttributes) && fieldData[fields.urlAttributes]) {
      merge(attr, fieldData[fields.urlAttributes]);
      attr.href = fieldData[fields.url] ? fieldData[fields.url] : fieldData[fields.urlAttributes].href;
    }
    var anchorTag2;
    if (!isFullNavigation) {
      anchorTag2 = createElement2("a", { className: cssClass.text + " " + cssClass.url, innerHTML: text });
    } else {
      anchorTag2 = createElement2("a", { className: cssClass.text + " " + cssClass.url });
      var anchorWrapper = createElement2("div", { className: cssClass.anchorWrap });
      if (innerElements && innerElements.length) {
        append2(innerElements, anchorWrapper);
      }
      anchorWrapper.appendChild(document.createTextNode(text));
      append2([anchorWrapper], anchorTag2);
    }
    setAttribute(anchorTag2, attr);
    return anchorTag2;
  }
  function generateLI(createElement2, item, fieldData, fields, className, options, componentInstance) {
    var curOpt = extend({}, defaultListBaseOptions, options);
    var ariaAttributes = extend({}, defaultAriaAttributes, curOpt.ariaAttributes);
    var text = item;
    var uID;
    var grpLI;
    var dataSource;
    if (typeof item !== "string" && typeof item !== "number") {
      dataSource = item;
      text = fieldData[fields.text] || "";
      uID = isNullOrUndefined(fieldData["_id"]) ? fieldData[fields.id] : fieldData["_id"];
      grpLI = item.hasOwnProperty("isHeader") && item.isHeader ? true : false;
    }
    if (options && options.enableHtmlSanitizer) {
      text = text;
    }
    var li = createElement2("li", {
      className: (grpLI === true ? cssClass.group : cssClass.li) + " " + (isNullOrUndefined(className) ? "" : className),
      attrs: ariaAttributes.groupItemRole !== "" && ariaAttributes.itemRole !== "" ? { role: grpLI === true ? ariaAttributes.groupItemRole : ariaAttributes.itemRole } : {}
    });
    if (!isNullOrUndefined(uID) === true) {
      li.setAttribute("data-uid", uID);
    } else {
      li.setAttribute("data-uid", generateId());
    }
    if (grpLI && options && options.groupTemplate) {
      var compiledString = compileTemplate(options.groupTemplate);
      if (componentInstance && componentInstance.getModuleName() !== "listview") {
        var compiledElement = compiledString(item, componentInstance, "groupTemplate", curOpt.groupTemplateID, !!curOpt.isStringTemplate, null, li);
        if (compiledElement) {
          append2(compiledElement, li);
        }
      } else {
        append2(compiledString(item, componentInstance, "groupTemplate", curOpt.groupTemplateID, !!curOpt.isStringTemplate), li);
      }
    } else if (!grpLI && options && options.template) {
      var compiledString = compileTemplate(options.template);
      if (componentInstance && componentInstance.getModuleName() !== "listview") {
        var compiledElement = compiledString(item, componentInstance, "template", curOpt.templateID, !!curOpt.isStringTemplate, null, li);
        if (compiledElement) {
          append2(compiledElement, li);
        }
      } else {
        append2(compiledString(item, componentInstance, "template", curOpt.templateID, !!curOpt.isStringTemplate), li);
      }
    } else {
      var innerDiv = createElement2("div", {
        className: cssClass.textContent,
        attrs: ariaAttributes.wrapperRole !== "" ? { role: ariaAttributes.wrapperRole } : {}
      });
      if (dataSource && (fieldData[fields.url] || fieldData[fields.urlAttributes] && fieldData[fields.urlAttributes].href)) {
        innerDiv.appendChild(anchorTag(createElement2, dataSource, fields, text, null, curOpt.itemNavigable));
      } else {
        var element2 = createElement2("span", {
          className: cssClass.text,
          attrs: ariaAttributes.itemText !== "" ? { role: ariaAttributes.itemText } : {}
        });
        if (options && options.enableHtmlSanitizer) {
          element2.innerText = text;
        } else {
          element2.innerHTML = text;
        }
        innerDiv.appendChild(element2);
      }
      li.appendChild(innerDiv);
    }
    return li;
  }
  function generateUL(createElement2, liElement, className, options) {
    var curOpt = extend({}, defaultListBaseOptions, options);
    var ariaAttributes = extend({}, defaultAriaAttributes, curOpt.ariaAttributes);
    cssClass = getModuleClass(curOpt.moduleName);
    var ulElement = createElement2("ul", {
      className: cssClass.ul + " " + (isNullOrUndefined(className) ? "" : className),
      attrs: ariaAttributes.listRole !== "" ? { role: ariaAttributes.listRole } : {}
    });
    append2(liElement, ulElement);
    return ulElement;
  }
  ListBase2.generateUL = generateUL;
  function generateIcon(createElement2, liElement, className, options) {
    var curOpt = extend({}, defaultListBaseOptions, options);
    cssClass = getModuleClass(curOpt.moduleName);
    var expandElement = curOpt.expandIconPosition === "Left" ? prepend : append2;
    expandElement([createElement2("div", {
      className: "e-icons " + curOpt.expandIconClass + " " + (isNullOrUndefined(className) ? "" : className)
    })], liElement.querySelector("." + cssClass.textContent));
    return liElement;
  }
  ListBase2.generateIcon = generateIcon;
})(ListBase || (ListBase = {}));
function getFieldValues(dataItem, fields) {
  var fieldData = {};
  if (isNullOrUndefined(dataItem) || typeof dataItem === "string" || typeof dataItem === "number" || !isNullOrUndefined(dataItem.isHeader)) {
    return dataItem;
  } else {
    for (var _i = 0, _a = Object.keys(fields); _i < _a.length; _i++) {
      var field = _a[_i];
      var dataField = fields["" + field];
      var value = !isNullOrUndefined(dataField) && typeof dataField === "string" ? getValue(dataField, dataItem) : void 0;
      if (!isNullOrUndefined(value)) {
        fieldData["" + dataField] = value;
      }
    }
  }
  return fieldData;
}
function compileTemplate(template) {
  if (template) {
    try {
      if (document.querySelector(template)) {
        return compile$1(document.querySelector(template).innerHTML.trim());
      } else {
        return compile$1(template);
      }
    } catch (e) {
      return compile$1(template);
    }
  }
  return void 0;
}
var __extends$I = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$x = globalThis && globalThis.__decorate || function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i = decorators.length - 1; i >= 0; i--)
      if (d = decorators[i])
        r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var FieldSettings = (
  /** @class */
  function(_super) {
    __extends$I(FieldSettings2, _super);
    function FieldSettings2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$x([
      Property()
    ], FieldSettings2.prototype, "text", void 0);
    __decorate$x([
      Property()
    ], FieldSettings2.prototype, "value", void 0);
    __decorate$x([
      Property()
    ], FieldSettings2.prototype, "iconCss", void 0);
    __decorate$x([
      Property()
    ], FieldSettings2.prototype, "groupBy", void 0);
    __decorate$x([
      Property()
    ], FieldSettings2.prototype, "htmlAttributes", void 0);
    return FieldSettings2;
  }(ChildProperty)
);
var dropDownBaseClasses = {
  root: "e-dropdownbase",
  rtl: "e-rtl",
  content: "e-content",
  selected: "e-active",
  hover: "e-hover",
  noData: "e-nodata",
  fixedHead: "e-fixed-head",
  focus: "e-item-focus",
  li: "e-list-item",
  group: "e-list-group-item",
  disabled: "e-disabled",
  grouping: "e-dd-group"
};
var ITEMTEMPLATE_PROPERTY = "ItemTemplate";
var DISPLAYTEMPLATE_PROPERTY = "DisplayTemplate";
var SPINNERTEMPLATE_PROPERTY = "SpinnerTemplate";
var VALUETEMPLATE_PROPERTY = "ValueTemplate";
var GROUPTEMPLATE_PROPERTY = "GroupTemplate";
var HEADERTEMPLATE_PROPERTY = "HeaderTemplate";
var FOOTERTEMPLATE_PROPERTY = "FooterTemplate";
var NORECORDSTEMPLATE_PROPERTY = "NoRecordsTemplate";
var ACTIONFAILURETEMPLATE_PROPERTY = "ActionFailureTemplate";
var HIDE_GROUPLIST = "e-hide-group-header";
var DropDownBase = (
  /** @class */
  function(_super) {
    __extends$I(DropDownBase2, _super);
    function DropDownBase2(options, element2) {
      var _this = _super.call(this, options, element2) || this;
      _this.preventChange = false;
      _this.isAngular = false;
      _this.isPreventChange = false;
      _this.isDynamicDataChange = false;
      _this.addedNewItem = false;
      return _this;
    }
    DropDownBase2.prototype.getPropObject = function(prop, newProp, oldProp) {
      var newProperty = new Object();
      var oldProperty = new Object();
      var propName = function(prop2) {
        return prop2;
      };
      newProperty[propName(prop)] = newProp[propName(prop)];
      oldProperty[propName(prop)] = oldProp[propName(prop)];
      var data = new Object();
      data.newProperty = newProperty;
      data.oldProperty = oldProperty;
      return data;
    };
    DropDownBase2.prototype.getValueByText = function(text, ignoreCase, ignoreAccent) {
      var value = null;
      if (!isNullOrUndefined(this.listData)) {
        if (ignoreCase) {
          value = this.checkValueCase(text, true, ignoreAccent);
        } else {
          value = this.checkValueCase(text, false, ignoreAccent);
        }
      }
      return value;
    };
    DropDownBase2.prototype.checkValueCase = function(text, ignoreCase, ignoreAccent, isTextByValue) {
      var _this = this;
      var value = null;
      if (isTextByValue) {
        value = text;
      }
      var dataSource = this.listData;
      var fields = this.fields;
      var type = this.typeOfData(dataSource).typeof;
      if (type === "string" || type === "number" || type === "boolean") {
        for (var _i = 0, dataSource_1 = dataSource; _i < dataSource_1.length; _i++) {
          var item = dataSource_1[_i];
          if (!isNullOrUndefined(item)) {
            if (ignoreAccent) {
              value = this.checkingAccent(String(item), text, ignoreCase);
            } else {
              if (ignoreCase) {
                if (this.checkIgnoreCase(String(item), text)) {
                  value = this.getItemValue(String(item), text, ignoreCase);
                }
              } else {
                if (this.checkNonIgnoreCase(String(item), text)) {
                  value = this.getItemValue(String(item), text, ignoreCase, isTextByValue);
                }
              }
            }
          }
        }
      } else {
        if (ignoreCase) {
          dataSource.filter(function(item2) {
            var itemValue = getValue(fields.value, item2);
            if (!isNullOrUndefined(itemValue) && _this.checkIgnoreCase(getValue(fields.text, item2).toString(), text)) {
              value = getValue(fields.value, item2);
            }
          });
        } else {
          if (isTextByValue) {
            var compareValue_1 = null;
            compareValue_1 = value;
            dataSource.filter(function(item2) {
              var itemValue = getValue(fields.value, item2);
              if (!isNullOrUndefined(itemValue) && !isNullOrUndefined(value) && itemValue.toString() === compareValue_1.toString()) {
                value = getValue(fields.text, item2);
              }
            });
          } else {
            dataSource.filter(function(item2) {
              if (_this.checkNonIgnoreCase(getValue(fields.text, item2), text)) {
                value = getValue(fields.value, item2);
              }
            });
          }
        }
      }
      return value;
    };
    DropDownBase2.prototype.checkingAccent = function(item, text, ignoreCase) {
      var dataItem = DataUtil.ignoreDiacritics(String(item));
      var textItem = DataUtil.ignoreDiacritics(text.toString());
      var value = null;
      if (ignoreCase) {
        if (this.checkIgnoreCase(dataItem, textItem)) {
          value = this.getItemValue(String(item), text, ignoreCase);
        }
      } else {
        if (this.checkNonIgnoreCase(String(item), text)) {
          value = this.getItemValue(String(item), text, ignoreCase);
        }
      }
      return value;
    };
    DropDownBase2.prototype.checkIgnoreCase = function(item, text) {
      return String(item).toLowerCase() === text.toString().toLowerCase() ? true : false;
    };
    DropDownBase2.prototype.checkNonIgnoreCase = function(item, text) {
      return String(item) === text.toString() ? true : false;
    };
    DropDownBase2.prototype.getItemValue = function(dataItem, typedText, ignoreCase, isTextByValue) {
      var value = null;
      var dataSource = this.listData;
      var type = this.typeOfData(dataSource).typeof;
      if (isTextByValue) {
        value = dataItem.toString();
      } else {
        if (ignoreCase) {
          value = type === "string" ? String(dataItem) : this.getFormattedValue(String(dataItem));
        } else {
          value = type === "string" ? typedText : this.getFormattedValue(typedText);
        }
      }
      return value;
    };
    DropDownBase2.prototype.templateCompiler = function(baseTemplate) {
      var checkTemplate = false;
      if (baseTemplate) {
        try {
          checkTemplate = selectAll(baseTemplate, document).length ? true : false;
        } catch (exception) {
          checkTemplate = false;
        }
      }
      return checkTemplate;
    };
    DropDownBase2.prototype.l10nUpdate = function(actionFailure2) {
      var ele = this.getModuleName() === "listbox" ? this.ulElement : this.list;
      if (this.noRecordsTemplate !== "No records found" || this.actionFailureTemplate !== "Request failed") {
        var template = actionFailure2 ? this.actionFailureTemplate : this.noRecordsTemplate;
        var compiledString = void 0;
        var templateId = actionFailure2 ? this.actionFailureTemplateId : this.noRecordsTemplateId;
        ele.innerHTML = "";
        var tempaltecheck = this.templateCompiler(template);
        if (tempaltecheck) {
          compiledString = compile$1(select$1(template, document).innerHTML.trim());
        } else {
          compiledString = compile$1(template);
        }
        var templateName = actionFailure2 ? "actionFailureTemplate" : "noRecordsTemplate";
        var noDataCompTemp = compiledString({}, this, templateName, templateId, this.isStringTemplate, null, ele);
        if (noDataCompTemp && noDataCompTemp.length > 0) {
          for (var i = 0; i < noDataCompTemp.length; i++) {
            if (this.getModuleName() === "listbox" && templateName === "noRecordsTemplate") {
              noDataCompTemp[i].classList.add("e-list-nr-template");
            }
            ele.appendChild(noDataCompTemp[i]);
          }
        }
        this.renderReactTemplates();
      } else {
        var l10nLocale = { noRecordsTemplate: "No records found", actionFailureTemplate: "Request failed" };
        var componentLocale = new L10n(this.getLocaleName(), {}, this.locale);
        if (componentLocale.getConstant("actionFailureTemplate") !== "") {
          this.l10n = componentLocale;
        } else {
          this.l10n = new L10n(this.getModuleName() === "listbox" ? "listbox" : this.getModuleName() === "mention" ? "mention" : "dropdowns", l10nLocale, this.locale);
        }
        var content = actionFailure2 ? this.l10n.getConstant("actionFailureTemplate") : this.l10n.getConstant("noRecordsTemplate");
        if (this.getModuleName() === "listbox") {
          var liElem = this.createElement("li");
          liElem.textContent = content;
          ele.appendChild(liElem);
          liElem.classList.add("e-list-nrt");
          liElem.setAttribute("role", "option");
        } else {
          if (!isNullOrUndefined(ele)) {
            ele.innerHTML = content;
          }
        }
      }
    };
    DropDownBase2.prototype.getLocaleName = function() {
      return "drop-down-base";
    };
    DropDownBase2.prototype.getTextByValue = function(value) {
      var text = this.checkValueCase(value, false, false, true);
      return text;
    };
    DropDownBase2.prototype.getFormattedValue = function(value) {
      if (this.listData && this.listData.length) {
        var item = void 0;
        if (this.properties.allowCustomValue && this.properties.value && this.properties.value instanceof Array && this.properties.value.length > 0) {
          item = this.typeOfData(this.properties.value);
        } else {
          item = this.typeOfData(this.listData);
        }
        if (typeof getValue(this.fields.value ? this.fields.value : "value", item.item) === "number" || item.typeof === "number") {
          return parseFloat(value);
        }
        if (typeof getValue(this.fields.value ? this.fields.value : "value", item.item) === "boolean" || item.typeof === "boolean") {
          return value === "true" || "" + value === "true";
        }
      }
      return value;
    };
    DropDownBase2.prototype.setEnableRtl = function() {
      if (!isNullOrUndefined(this.enableRtlElements)) {
        if (this.list) {
          this.enableRtlElements.push(this.list);
        }
        if (this.enableRtl) {
          addClass(this.enableRtlElements, dropDownBaseClasses.rtl);
        } else {
          removeClass(this.enableRtlElements, dropDownBaseClasses.rtl);
        }
      }
    };
    DropDownBase2.prototype.initialize = function(e) {
      this.bindEvent = true;
      this.actionFailureTemplateId = "" + this.element.id + ACTIONFAILURETEMPLATE_PROPERTY;
      if (this.element.tagName === "UL") {
        var jsonElement = ListBase.createJsonFromElement(this.element);
        this.setProperties({ fields: { text: "text", value: "text" } }, true);
        this.resetList(jsonElement, this.fields);
      } else if (this.element.tagName === "SELECT") {
        var dataSource = this.dataSource instanceof Array ? this.dataSource.length > 0 ? true : false : !isNullOrUndefined(this.dataSource) ? true : false;
        if (!dataSource) {
          this.renderItemsBySelect();
        } else if (this.isDynamicDataChange) {
          this.setListData(this.dataSource, this.fields, this.query);
        }
      } else {
        this.setListData(this.dataSource, this.fields, this.query, e);
      }
    };
    DropDownBase2.prototype.getPersistData = function() {
      return this.addOnPersist([]);
    };
    DropDownBase2.prototype.updateDataAttribute = function(value) {
      var invalidAttr = ["class", "style", "id", "type", "aria-expanded", "aria-autocomplete", "aria-readonly"];
      var attr = {};
      for (var a = 0; a < this.element.attributes.length; a++) {
        if (invalidAttr.indexOf(this.element.attributes[a].name) === -1 && !(this.getModuleName() === "dropdownlist" && this.element.attributes[a].name === "readonly")) {
          attr[this.element.attributes[a].name] = this.element.getAttribute(this.element.attributes[a].name);
        }
      }
      extend(attr, value, attr);
      this.setProperties({ htmlAttributes: attr }, true);
    };
    DropDownBase2.prototype.renderItemsBySelect = function() {
      var element2 = this.element;
      var fields = { value: "value", text: "text" };
      var jsonElement = [];
      var group = element2.querySelectorAll("select>optgroup");
      var option = element2.querySelectorAll("select>option");
      this.getJSONfromOption(jsonElement, option, fields);
      if (group.length) {
        for (var i = 0; i < group.length; i++) {
          var item = group[i];
          var optionGroup = {};
          optionGroup[fields.text] = item.label;
          optionGroup.isHeader = true;
          var child = item.querySelectorAll("option");
          jsonElement.push(optionGroup);
          this.getJSONfromOption(jsonElement, child, fields);
        }
        element2.querySelectorAll("select>option");
      }
      this.updateFields(fields.text, fields.value, this.fields.groupBy, this.fields.htmlAttributes, this.fields.iconCss);
      this.resetList(jsonElement, fields);
    };
    DropDownBase2.prototype.updateFields = function(text, value, groupBy, htmlAttributes, iconCss) {
      var field = {
        "fields": {
          text,
          value,
          groupBy: !isNullOrUndefined(groupBy) ? groupBy : this.fields && this.fields.groupBy,
          htmlAttributes: !isNullOrUndefined(htmlAttributes) ? htmlAttributes : this.fields && this.fields.htmlAttributes,
          iconCss: !isNullOrUndefined(iconCss) ? iconCss : this.fields && this.fields.iconCss
        }
      };
      this.setProperties(field, true);
    };
    DropDownBase2.prototype.getJSONfromOption = function(items, options, fields) {
      for (var _i = 0, options_1 = options; _i < options_1.length; _i++) {
        var option = options_1[_i];
        var json = {};
        json[fields.text] = option.innerText;
        json[fields.value] = !isNullOrUndefined(option.getAttribute(fields.value)) ? option.getAttribute(fields.value) : option.innerText;
        items.push(json);
      }
    };
    DropDownBase2.prototype.preRender = function() {
      this.scrollTimer = -1;
      this.enableRtlElements = [];
      this.isRequested = false;
      this.isDataFetched = false;
      this.itemTemplateId = "" + this.element.id + ITEMTEMPLATE_PROPERTY;
      this.displayTemplateId = "" + this.element.id + DISPLAYTEMPLATE_PROPERTY;
      this.spinnerTemplateId = "" + this.element.id + SPINNERTEMPLATE_PROPERTY;
      this.valueTemplateId = "" + this.element.id + VALUETEMPLATE_PROPERTY;
      this.groupTemplateId = "" + this.element.id + GROUPTEMPLATE_PROPERTY;
      this.headerTemplateId = "" + this.element.id + HEADERTEMPLATE_PROPERTY;
      this.footerTemplateId = "" + this.element.id + FOOTERTEMPLATE_PROPERTY;
      this.noRecordsTemplateId = "" + this.element.id + NORECORDSTEMPLATE_PROPERTY;
    };
    DropDownBase2.prototype.setListData = function(dataSource, fields, query, event) {
      var _this = this;
      fields = fields ? fields : this.fields;
      var ulElement;
      this.isActive = true;
      var eventArgs = { cancel: false, data: dataSource, query };
      this.isPreventChange = this.isAngular && this.preventChange ? true : this.isPreventChange;
      this.trigger("actionBegin", eventArgs, function(eventArgs2) {
        if (!eventArgs2.cancel) {
          _this.showSpinner();
          if (dataSource instanceof DataManager) {
            _this.isRequested = true;
            if (_this.isDataFetched) {
              _this.emptyDataRequest(fields);
              return;
            }
            eventArgs2.data.executeQuery(_this.getQuery(eventArgs2.query)).then(function(e) {
              _this.isPreventChange = _this.isAngular && _this.preventChange ? true : _this.isPreventChange;
              _this.trigger("actionComplete", e, function(e2) {
                if (!e2.cancel) {
                  var listItems2 = e2.result;
                  if (listItems2.length === 0) {
                    _this.isDataFetched = true;
                  }
                  ulElement = _this.renderItems(listItems2, fields);
                  _this.onActionComplete(ulElement, listItems2, e2);
                  if (_this.groupTemplate) {
                    _this.renderGroupTemplate(ulElement);
                  }
                  _this.isRequested = false;
                  _this.bindChildItems(listItems2, ulElement, fields, e2);
                }
              });
            }).catch(function(e) {
              _this.isRequested = false;
              _this.onActionFailure(e);
              _this.hideSpinner();
            });
          } else {
            var dataManager = new DataManager(eventArgs2.data);
            var listItems = _this.getQuery(eventArgs2.query).executeLocal(dataManager);
            var localDataArgs = { cancel: false, result: listItems };
            _this.isPreventChange = _this.isAngular && _this.preventChange ? true : _this.isPreventChange;
            _this.trigger("actionComplete", localDataArgs, function(localDataArgs2) {
              if (!localDataArgs2.cancel) {
                ulElement = _this.renderItems(localDataArgs2.result, fields);
                _this.onActionComplete(ulElement, localDataArgs2.result, event);
                if (_this.groupTemplate) {
                  _this.renderGroupTemplate(ulElement);
                }
                _this.bindChildItems(localDataArgs2.result, ulElement, fields);
                setTimeout(function() {
                  if (_this.getModuleName() === "multiselect" && _this.itemTemplate != null && (ulElement.childElementCount > 0 && (ulElement.children[0].childElementCount > 0 || _this.fields.groupBy && ulElement.children[1] && ulElement.children[1].childElementCount > 0))) {
                    _this.updateDataList();
                  }
                });
              }
            });
          }
        }
      });
    };
    DropDownBase2.prototype.bindChildItems = function(listItems, ulElement, fields, e) {
      var _this = this;
      if (listItems.length >= 100 && this.getModuleName() === "autocomplete") {
        setTimeout(function() {
          var childNode = _this.remainingItems(_this.sortedData, fields);
          append2(childNode, ulElement);
          _this.liCollections = _this.list.querySelectorAll("." + dropDownBaseClasses.li);
          _this.updateListValues();
          _this.raiseDataBound(listItems, e);
        }, 0);
      } else {
        this.raiseDataBound(listItems, e);
      }
    };
    DropDownBase2.prototype.updateListValues = function() {
    };
    DropDownBase2.prototype.findListElement = function(list, findNode, attribute, value) {
      var liElement = null;
      if (list) {
        var listArr = [].slice.call(list.querySelectorAll(findNode));
        for (var index = 0; index < listArr.length; index++) {
          if (listArr[index].getAttribute(attribute) === value + "") {
            liElement = listArr[index];
            break;
          }
        }
      }
      return liElement;
    };
    DropDownBase2.prototype.raiseDataBound = function(listItems, e) {
      this.hideSpinner();
      var dataBoundEventArgs = {
        items: listItems,
        e
      };
      this.trigger("dataBound", dataBoundEventArgs);
    };
    DropDownBase2.prototype.remainingItems = function(dataSource, fields) {
      var spliceData = new DataManager(dataSource).executeLocal(new Query().skip(100));
      if (this.itemTemplate) {
        var listElements = this.templateListItem(spliceData, fields);
        return [].slice.call(listElements.childNodes);
      }
      var type = this.typeOfData(spliceData).typeof;
      if (type === "string" || type === "number" || type === "boolean") {
        return ListBase.createListItemFromArray(this.createElement, spliceData, true, this.listOption(spliceData, fields), this);
      }
      return ListBase.createListItemFromJson(this.createElement, spliceData, this.listOption(spliceData, fields), 1, true, this);
    };
    DropDownBase2.prototype.emptyDataRequest = function(fields) {
      var listItems = [];
      this.onActionComplete(this.renderItems(listItems, fields), listItems);
      this.isRequested = false;
      this.hideSpinner();
    };
    DropDownBase2.prototype.showSpinner = function() {
    };
    DropDownBase2.prototype.hideSpinner = function() {
    };
    DropDownBase2.prototype.onActionFailure = function(e) {
      this.liCollections = [];
      this.trigger("actionFailure", e);
      this.l10nUpdate(true);
      if (!isNullOrUndefined(this.list)) {
        addClass([this.list], dropDownBaseClasses.noData);
      }
    };
    DropDownBase2.prototype.onActionComplete = function(ulElement, list, e) {
      this.listData = list;
      if (this.isReact) {
        this.clearTemplate(["itemTemplate", "groupTemplate", "actionFailureTemplate", "noRecordsTemplate"]);
      }
      this.fixedHeaderElement = isNullOrUndefined(this.fixedHeaderElement) ? this.fixedHeaderElement : null;
      if (this.getModuleName() === "multiselect" && this.properties.allowCustomValue && this.fields.groupBy) {
        for (var i = 0; i < ulElement.childElementCount; i++) {
          if (ulElement.children[i].classList.contains("e-list-group-item")) {
            if (isNullOrUndefined(ulElement.children[i].innerHTML) || ulElement.children[i].innerHTML == "") {
              addClass([ulElement.children[i]], HIDE_GROUPLIST);
            }
          }
        }
      }
      if (!isNullOrUndefined(this.list)) {
        this.list.innerHTML = "";
        this.list.appendChild(ulElement);
        this.liCollections = this.list.querySelectorAll("." + dropDownBaseClasses.li);
        this.ulElement = this.list.querySelector("ul");
        this.postRender(this.list, list, this.bindEvent);
      }
    };
    DropDownBase2.prototype.postRender = function(listElement, list, bindEvent) {
      var focusItem = listElement.querySelector("." + dropDownBaseClasses.li);
      var selectedItem = listElement.querySelector("." + dropDownBaseClasses.selected);
      if (focusItem && !selectedItem) {
        focusItem.classList.add(dropDownBaseClasses.focus);
      }
      if (list.length <= 0) {
        this.l10nUpdate();
        addClass([listElement], dropDownBaseClasses.noData);
      } else {
        listElement.classList.remove(dropDownBaseClasses.noData);
      }
    };
    DropDownBase2.prototype.getQuery = function(query) {
      return query ? query : this.query ? this.query : new Query();
    };
    DropDownBase2.prototype.renderGroupTemplate = function(listEle) {
      if (this.fields.groupBy !== null && this.dataSource || this.element.querySelector("." + dropDownBaseClasses.group)) {
        var dataSource = this.dataSource;
        var option = { groupTemplateID: this.groupTemplateId, isStringTemplate: this.isStringTemplate };
        var headerItems = listEle.querySelectorAll("." + dropDownBaseClasses.group);
        var groupcheck = this.templateCompiler(this.groupTemplate);
        if (groupcheck) {
          var groupValue = select$1(this.groupTemplate, document).innerHTML.trim();
          var tempHeaders = ListBase.renderGroupTemplate(groupValue, dataSource, this.fields.properties, headerItems, option, this);
          if (this.isGroupChecking) {
            for (var i = 0; i < tempHeaders.length; i++) {
              this.notify("addItem", { module: "CheckBoxSelection", item: tempHeaders[i] });
            }
          }
        } else {
          var tempHeaders = ListBase.renderGroupTemplate(this.groupTemplate, dataSource, this.fields.properties, headerItems, option, this);
          if (this.isGroupChecking) {
            for (var i = 0; i < tempHeaders.length; i++) {
              this.notify("addItem", { module: "CheckBoxSelection", item: tempHeaders[i] });
            }
          }
        }
        this.renderReactTemplates();
      }
    };
    DropDownBase2.prototype.createListItems = function(dataSource, fields) {
      if (dataSource && fields.groupBy || this.element.querySelector("optgroup")) {
        if (fields.groupBy) {
          if (this.sortOrder !== "None") {
            dataSource = this.getSortedDataSource(dataSource);
          }
          dataSource = ListBase.groupDataSource(dataSource, fields.properties, this.sortOrder);
        }
        addClass([this.list], dropDownBaseClasses.grouping);
      } else {
        dataSource = this.getSortedDataSource(dataSource);
      }
      var options = this.listOption(dataSource, fields);
      var spliceData = dataSource.length > 100 ? new DataManager(dataSource).executeLocal(new Query().take(100)) : dataSource;
      this.sortedData = dataSource;
      return ListBase.createList(this.createElement, this.getModuleName() === "autocomplete" ? spliceData : dataSource, options, true, this);
    };
    DropDownBase2.prototype.listOption = function(dataSource, fields) {
      var iconCss = isNullOrUndefined(fields.iconCss) ? false : true;
      var fieldValues = !isNullOrUndefined(fields.properties) ? fields.properties : fields;
      var options = fields.text !== null || fields.value !== null ? {
        fields: fieldValues,
        showIcon: iconCss,
        ariaAttributes: { groupItemRole: "presentation" }
      } : { fields: { value: "text" } };
      return extend({}, options, fields, true);
    };
    DropDownBase2.prototype.setFloatingHeader = function(e) {
      if (!isNullOrUndefined(this.list) && !this.list.classList.contains(dropDownBaseClasses.noData)) {
        if (isNullOrUndefined(this.fixedHeaderElement)) {
          this.fixedHeaderElement = this.createElement("div", { className: dropDownBaseClasses.fixedHead });
          if (!isNullOrUndefined(this.list) && !this.list.querySelector("li").classList.contains(dropDownBaseClasses.group)) {
            this.fixedHeaderElement.style.display = "none";
          }
          if (!isNullOrUndefined(this.fixedHeaderElement) && !isNullOrUndefined(this.list)) {
            prepend([this.fixedHeaderElement], this.list);
          }
          this.setFixedHeader();
        }
        if (!isNullOrUndefined(this.fixedHeaderElement) && this.fixedHeaderElement.style.zIndex === "0") {
          this.setFixedHeader();
        }
        this.scrollStop(e);
      }
    };
    DropDownBase2.prototype.scrollStop = function(e) {
      var target = !isNullOrUndefined(e) ? e.target : this.list;
      var liHeight = parseInt(getComputedStyle(this.getValidLi(), null).getPropertyValue("height"), 10);
      var topIndex = Math.round(target.scrollTop / liHeight);
      var liCollections = this.list.querySelectorAll("li:not(.e-hide-listitem)");
      for (var i = topIndex; i > -1; i--) {
        if (!isNullOrUndefined(liCollections[i]) && liCollections[i].classList.contains(dropDownBaseClasses.group)) {
          var currentLi = liCollections[i];
          this.fixedHeaderElement.innerHTML = currentLi.innerHTML;
          this.fixedHeaderElement.style.top = target.scrollTop + "px";
          this.fixedHeaderElement.style.display = "block";
          break;
        } else {
          this.fixedHeaderElement.style.display = "none";
          this.fixedHeaderElement.style.top = "none";
        }
      }
    };
    DropDownBase2.prototype.getValidLi = function() {
      return this.liCollections[0];
    };
    DropDownBase2.prototype.renderItems = function(listData, fields) {
      var ulElement;
      if (this.itemTemplate && listData) {
        var dataSource = listData;
        if (dataSource && fields.groupBy) {
          if (this.sortOrder !== "None") {
            dataSource = this.getSortedDataSource(dataSource);
          }
          dataSource = ListBase.groupDataSource(dataSource, fields.properties, this.sortOrder);
        } else {
          dataSource = this.getSortedDataSource(dataSource);
        }
        this.sortedData = dataSource;
        var spliceData = dataSource.length > 100 ? new DataManager(dataSource).executeLocal(new Query().take(100)) : dataSource;
        ulElement = this.templateListItem(this.getModuleName() === "autocomplete" ? spliceData : dataSource, fields);
      } else {
        ulElement = this.createListItems(listData, fields);
      }
      return ulElement;
    };
    DropDownBase2.prototype.templateListItem = function(dataSource, fields) {
      var option = this.listOption(dataSource, fields);
      option.templateID = this.itemTemplateId;
      option.isStringTemplate = this.isStringTemplate;
      var itemcheck = this.templateCompiler(this.itemTemplate);
      if (itemcheck) {
        var itemValue = select$1(this.itemTemplate, document).innerHTML.trim();
        return ListBase.renderContentTemplate(this.createElement, itemValue, dataSource, fields.properties, option, this);
      } else {
        return ListBase.renderContentTemplate(this.createElement, this.itemTemplate, dataSource, fields.properties, option, this);
      }
    };
    DropDownBase2.prototype.typeOfData = function(items) {
      var item = { typeof: null, item: null };
      for (var i = 0; !isNullOrUndefined(items) && i < items.length; i++) {
        if (!isNullOrUndefined(items[i])) {
          var listDataType = typeof items[i] === "string" || typeof items[i] === "number" || typeof items[i] === "boolean";
          var isNullData = listDataType ? isNullOrUndefined(items[i]) : isNullOrUndefined(getValue(this.fields.value ? this.fields.value : "value", items[i]));
          if (!isNullData) {
            return item = { typeof: typeof items[i], item: items[i] };
          }
        }
      }
      return item;
    };
    DropDownBase2.prototype.setFixedHeader = function() {
      if (!isNullOrUndefined(this.list)) {
        this.list.parentElement.style.display = "block";
      }
      var borderWidth = 0;
      if (this.list && this.list.parentElement) {
        borderWidth = parseInt(document.defaultView.getComputedStyle(this.list.parentElement, null).getPropertyValue("border-width"), 10);
        if (isNaN(borderWidth)) {
          var borderTopWidth = parseInt(document.defaultView.getComputedStyle(this.list.parentElement, null).getPropertyValue("border-top-width"), 10);
          var borderBottomWidth = parseInt(document.defaultView.getComputedStyle(this.list.parentElement, null).getPropertyValue("border-bottom-width"), 10);
          var borderLeftWidth = parseInt(document.defaultView.getComputedStyle(this.list.parentElement, null).getPropertyValue("border-left-width"), 10);
          var borderRightWidth = parseInt(document.defaultView.getComputedStyle(this.list.parentElement, null).getPropertyValue("border-right-width"), 10);
          borderWidth = borderTopWidth + borderBottomWidth + borderLeftWidth + borderRightWidth;
        }
      }
      if (!isNullOrUndefined(this.liCollections)) {
        var liWidth = this.getValidLi().offsetWidth - borderWidth;
        this.fixedHeaderElement.style.width = liWidth.toString() + "px";
      }
      setStyleAttribute(this.fixedHeaderElement, { zIndex: 10 });
      var firstLi = this.ulElement.querySelector("." + dropDownBaseClasses.group + ":not(.e-hide-listitem)");
      this.fixedHeaderElement.innerHTML = firstLi.innerHTML;
    };
    DropDownBase2.prototype.getSortedDataSource = function(dataSource) {
      if (dataSource && this.sortOrder !== "None") {
        var textField = this.fields.text ? this.fields.text : "text";
        if (this.typeOfData(dataSource).typeof === "string" || this.typeOfData(dataSource).typeof === "number" || this.typeOfData(dataSource).typeof === "boolean") {
          textField = "";
        }
        dataSource = ListBase.getDataSource(dataSource, ListBase.addSorting(this.sortOrder, textField));
      }
      return dataSource;
    };
    DropDownBase2.prototype.getIndexByValue = function(value) {
      var index;
      var listItems = this.getItems();
      for (var i = 0; i < listItems.length; i++) {
        if (!isNullOrUndefined(value) && listItems[i].getAttribute("data-value") === value.toString()) {
          index = i;
          break;
        }
      }
      return index;
    };
    DropDownBase2.prototype.dispatchEvent = function(element2, type) {
      var evt = document.createEvent("HTMLEvents");
      evt.initEvent(type, false, true);
      element2.dispatchEvent(evt);
    };
    DropDownBase2.prototype.setFields = function() {
      if (this.fields.value && !this.fields.text) {
        this.updateFields(this.fields.value, this.fields.value);
      } else if (!this.fields.value && this.fields.text) {
        this.updateFields(this.fields.text, this.fields.text);
      } else if (!this.fields.value && !this.fields.text) {
        this.updateFields("text", "text");
      }
    };
    DropDownBase2.prototype.resetList = function(dataSource, fields, query, e) {
      if (this.list) {
        if (this.element.tagName === "SELECT" && this.element.options.length > 0 || this.element.tagName === "UL" && this.element.childNodes.length > 0) {
          var data = dataSource instanceof Array ? dataSource.length > 0 : !isNullOrUndefined(dataSource);
          if (!data && this.selectData && this.selectData.length > 0) {
            dataSource = this.selectData;
          }
        }
        dataSource = this.getModuleName() === "combobox" && this.selectData && dataSource instanceof Array && dataSource.length < this.selectData.length && this.addedNewItem ? this.selectData : dataSource;
        this.addedNewItem = false;
        this.setListData(dataSource, fields, query, e);
      }
    };
    DropDownBase2.prototype.updateSelectElementData = function(isFiltering) {
      if (isFiltering && isNullOrUndefined(this.selectData) && this.listData && this.listData.length > 0) {
        this.selectData = this.listData;
      }
    };
    DropDownBase2.prototype.updateSelection = function() {
    };
    DropDownBase2.prototype.renderList = function() {
      this.render();
    };
    DropDownBase2.prototype.updateDataSource = function(props2) {
      this.resetList(this.dataSource);
    };
    DropDownBase2.prototype.setUpdateInitial = function(props2, newProp) {
      this.isDataFetched = false;
      var updateData = {};
      for (var j = 0; props2.length > j; j++) {
        if (newProp[props2[j]] && props2[j] === "fields") {
          this.setFields();
          updateData[props2[j]] = newProp[props2[j]];
        } else if (newProp[props2[j]]) {
          updateData[props2[j]] = newProp[props2[j]];
        }
      }
      if (Object.keys(updateData).length > 0) {
        if (Object.keys(updateData).indexOf("dataSource") === -1) {
          updateData.dataSource = this.dataSource;
        }
        this.updateDataSource(updateData);
      }
    };
    DropDownBase2.prototype.onPropertyChanged = function(newProp, oldProp) {
      if (this.getModuleName() === "dropdownbase") {
        this.setUpdateInitial(["fields", "query", "dataSource"], newProp);
      }
      this.setUpdateInitial(["sortOrder", "itemTemplate"], newProp);
      for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {
        var prop = _a[_i];
        switch (prop) {
          case "query":
          case "sortOrder":
          case "dataSource":
          case "itemTemplate":
            break;
          case "enableRtl":
            this.setEnableRtl();
            break;
          case "groupTemplate":
            this.renderGroupTemplate(this.list);
            if (this.ulElement && this.fixedHeaderElement) {
              var firstLi = this.ulElement.querySelector("." + dropDownBaseClasses.group);
              this.fixedHeaderElement.innerHTML = firstLi.innerHTML;
            }
            break;
          case "locale":
            if (this.list && (!isNullOrUndefined(this.liCollections) && this.liCollections.length === 0)) {
              this.l10nUpdate();
            }
            break;
          case "zIndex":
            this.setProperties({ zIndex: newProp.zIndex }, true);
            this.setZIndex();
            break;
        }
      }
    };
    DropDownBase2.prototype.render = function(e, isEmptyData) {
      this.list = this.createElement("div", { className: dropDownBaseClasses.content, attrs: { "tabindex": "0" } });
      this.list.classList.add(dropDownBaseClasses.root);
      this.setFields();
      var rippleModel = { duration: 300, selector: "." + dropDownBaseClasses.li };
      this.rippleFun = rippleEffect(this.list, rippleModel);
      var group = this.element.querySelector("select>optgroup");
      if ((this.fields.groupBy || !isNullOrUndefined(group)) && !this.isGroupChecking) {
        EventHandler.add(this.list, "scroll", this.setFloatingHeader, this);
      }
      if (this.getModuleName() === "dropdownbase") {
        if (this.element.getAttribute("tabindex")) {
          this.list.setAttribute("tabindex", this.element.getAttribute("tabindex"));
        }
        removeClass([this.element], dropDownBaseClasses.root);
        this.element.style.display = "none";
        var wrapperElement = this.createElement("div");
        this.element.parentElement.insertBefore(wrapperElement, this.element);
        wrapperElement.appendChild(this.element);
        wrapperElement.appendChild(this.list);
      }
      this.setEnableRtl();
      if (!isEmptyData) {
        this.initialize(e);
      }
    };
    DropDownBase2.prototype.getModuleName = function() {
      return "dropdownbase";
    };
    DropDownBase2.prototype.getItems = function() {
      return this.ulElement.querySelectorAll("." + dropDownBaseClasses.li);
    };
    DropDownBase2.prototype.addItem = function(items, itemIndex) {
      if (!this.list || this.list.textContent === this.noRecordsTemplate && this.getModuleName() !== "listbox") {
        this.renderList();
      }
      if (this.sortOrder !== "None" && isNullOrUndefined(itemIndex)) {
        var newList = [].slice.call(this.listData);
        newList.push(items);
        newList = this.getSortedDataSource(newList);
        if (this.fields.groupBy) {
          newList = ListBase.groupDataSource(newList, this.fields.properties, this.sortOrder);
          itemIndex = newList.indexOf(items);
        } else {
          itemIndex = newList.indexOf(items);
        }
      }
      var itemsCount = this.getItems().length;
      var selectedItemValue = this.list.querySelector("." + dropDownBaseClasses.selected);
      items = items instanceof Array ? items : [items];
      var index;
      index = isNullOrUndefined(itemIndex) || itemIndex < 0 || itemIndex > itemsCount - 1 ? itemsCount : itemIndex;
      var fields = this.fields;
      if (items && fields.groupBy) {
        items = ListBase.groupDataSource(items, fields.properties);
      }
      var liCollections = [];
      for (var i = 0; i < items.length; i++) {
        var item = items[i];
        var isHeader = item.isHeader;
        var li = this.createElement("li", { className: isHeader ? dropDownBaseClasses.group : dropDownBaseClasses.li, id: "option-add-" + i });
        var itemText = item instanceof Object ? getValue(fields.text, item) : item;
        if (isHeader) {
          li.innerText = itemText;
        }
        if (this.itemTemplate && !isHeader) {
          var itemCheck = this.templateCompiler(this.itemTemplate);
          var compiledString = itemCheck ? compile$1(select$1(this.itemTemplate, document).innerHTML.trim()) : compile$1(this.itemTemplate);
          var addItemTemplate = compiledString(item, this, "itemTemplate", this.itemTemplateId, this.isStringTemplate, null, li);
          if (addItemTemplate) {
            append2(addItemTemplate, li);
          }
        } else if (!isHeader) {
          li.appendChild(document.createTextNode(itemText));
        }
        li.setAttribute("data-value", item instanceof Object ? getValue(fields.value, item) : item);
        li.setAttribute("role", "option");
        this.notify("addItem", { module: "CheckBoxSelection", item: li });
        liCollections.push(li);
        this.listData.push(item);
        if (this.sortOrder === "None" && isNullOrUndefined(itemIndex) && index === 0) {
          index = null;
        }
        this.updateActionCompleteData(li, item, index);
        this.trigger("beforeItemRender", { element: li, item });
      }
      if (itemsCount === 0 && isNullOrUndefined(this.list.querySelector("ul"))) {
        if (!isNullOrUndefined(this.list)) {
          this.list.innerHTML = "";
          this.list.classList.remove(dropDownBaseClasses.noData);
          if (!isNullOrUndefined(this.ulElement)) {
            this.list.appendChild(this.ulElement);
          }
        }
        this.liCollections = liCollections;
        if (!isNullOrUndefined(liCollections) && !isNullOrUndefined(this.ulElement)) {
          append2(liCollections, this.ulElement);
        }
        this.updateAddItemList(this.list, itemsCount);
      } else {
        if (this.getModuleName() === "listbox" && itemsCount === 0) {
          this.ulElement.innerHTML = "";
        }
        var attr = [];
        for (var i = 0; i < items.length; i++) {
          var listGroupItem = this.ulElement.querySelectorAll(".e-list-group-item");
          for (var j = 0; j < listGroupItem.length; j++) {
            attr[j] = listGroupItem[j].innerText;
          }
          if (attr.indexOf(liCollections[i].innerText) > -1 && fields.groupBy) {
            for (var j = 0; j < listGroupItem.length; j++) {
              if (attr[j] === liCollections[i].innerText) {
                if (this.sortOrder === "None") {
                  this.ulElement.insertBefore(liCollections[i + 1], listGroupItem[j + 1]);
                } else {
                  this.ulElement.insertBefore(liCollections[i + 1], this.ulElement.childNodes[itemIndex]);
                }
                i = i + 1;
                break;
              }
            }
          } else {
            if (this.liCollections[index]) {
              this.liCollections[index].parentNode.insertBefore(liCollections[i], this.liCollections[index]);
            } else {
              this.ulElement.appendChild(liCollections[i]);
            }
          }
          var tempLi = [].slice.call(this.liCollections);
          tempLi.splice(index, 0, liCollections[i]);
          this.liCollections = tempLi;
          index += 1;
          if (this.getModuleName() === "multiselect") {
            this.updateDataList();
          }
        }
      }
      if (selectedItemValue || itemIndex === 0) {
        this.updateSelection();
      }
      this.addedNewItem = true;
    };
    DropDownBase2.prototype.validationAttribute = function(target, hidden) {
      var name = target.getAttribute("name") ? target.getAttribute("name") : target.getAttribute("id");
      hidden.setAttribute("name", name);
      target.removeAttribute("name");
      var attributes2 = ["required", "aria-required", "form"];
      for (var i = 0; i < attributes2.length; i++) {
        if (!target.getAttribute(attributes2[i])) {
          continue;
        }
        var attr = target.getAttribute(attributes2[i]);
        hidden.setAttribute(attributes2[i], attr);
        target.removeAttribute(attributes2[i]);
      }
    };
    DropDownBase2.prototype.setZIndex = function() {
    };
    DropDownBase2.prototype.updateActionCompleteData = function(li, item, index) {
    };
    DropDownBase2.prototype.updateAddItemList = function(list, itemCount) {
    };
    DropDownBase2.prototype.updateDataList = function() {
    };
    DropDownBase2.prototype.getDataByValue = function(value) {
      if (!isNullOrUndefined(this.listData)) {
        var type = this.typeOfData(this.listData).typeof;
        if (type === "string" || type === "number" || type === "boolean") {
          for (var _i = 0, _a = this.listData; _i < _a.length; _i++) {
            var item = _a[_i];
            if (!isNullOrUndefined(item) && item === value) {
              return item;
            }
          }
        } else {
          for (var _b = 0, _c = this.listData; _b < _c.length; _b++) {
            var item = _c[_b];
            if (!isNullOrUndefined(item) && getValue(this.fields.value ? this.fields.value : "value", item) === value) {
              return item;
            }
          }
        }
      }
      return null;
    };
    DropDownBase2.prototype.destroy = function() {
      if (document.body.contains(this.list)) {
        EventHandler.remove(this.list, "scroll", this.setFloatingHeader);
        if (!isNullOrUndefined(this.rippleFun)) {
          this.rippleFun();
        }
        detach(this.list);
      }
      this.liCollections = null;
      this.ulElement = null;
      this.list = null;
      this.enableRtlElements = null;
      this.rippleFun = null;
      _super.prototype.destroy.call(this);
    };
    __decorate$x([
      Complex({ text: null, value: null, iconCss: null, groupBy: null }, FieldSettings)
    ], DropDownBase2.prototype, "fields", void 0);
    __decorate$x([
      Property(null)
    ], DropDownBase2.prototype, "itemTemplate", void 0);
    __decorate$x([
      Property(null)
    ], DropDownBase2.prototype, "groupTemplate", void 0);
    __decorate$x([
      Property("No records found")
    ], DropDownBase2.prototype, "noRecordsTemplate", void 0);
    __decorate$x([
      Property("Request failed")
    ], DropDownBase2.prototype, "actionFailureTemplate", void 0);
    __decorate$x([
      Property("None")
    ], DropDownBase2.prototype, "sortOrder", void 0);
    __decorate$x([
      Property([])
    ], DropDownBase2.prototype, "dataSource", void 0);
    __decorate$x([
      Property(null)
    ], DropDownBase2.prototype, "query", void 0);
    __decorate$x([
      Property("StartsWith")
    ], DropDownBase2.prototype, "filterType", void 0);
    __decorate$x([
      Property(true)
    ], DropDownBase2.prototype, "ignoreCase", void 0);
    __decorate$x([
      Property(1e3)
    ], DropDownBase2.prototype, "zIndex", void 0);
    __decorate$x([
      Property(false)
    ], DropDownBase2.prototype, "ignoreAccent", void 0);
    __decorate$x([
      Property()
    ], DropDownBase2.prototype, "locale", void 0);
    __decorate$x([
      Event$1()
    ], DropDownBase2.prototype, "actionBegin", void 0);
    __decorate$x([
      Event$1()
    ], DropDownBase2.prototype, "actionComplete", void 0);
    __decorate$x([
      Event$1()
    ], DropDownBase2.prototype, "actionFailure", void 0);
    __decorate$x([
      Event$1()
    ], DropDownBase2.prototype, "select", void 0);
    __decorate$x([
      Event$1()
    ], DropDownBase2.prototype, "dataBound", void 0);
    __decorate$x([
      Event$1()
    ], DropDownBase2.prototype, "created", void 0);
    __decorate$x([
      Event$1()
    ], DropDownBase2.prototype, "destroyed", void 0);
    DropDownBase2 = __decorate$x([
      NotifyPropertyChanges
    ], DropDownBase2);
    return DropDownBase2;
  }(Component)
);
var CLASSNAMES = {
  RTL: "e-rtl",
  DISABLE: "e-disabled",
  INPUT: "e-input",
  TEXTAREA: "e-multi-line-input",
  INPUTGROUP: "e-input-group",
  FLOATINPUT: "e-float-input",
  FLOATLINE: "e-float-line",
  FLOATTEXT: "e-float-text",
  FLOATTEXTCONTENT: "e-float-text-content",
  CLEARICON: "e-clear-icon",
  CLEARICONHIDE: "e-clear-icon-hide",
  LABELTOP: "e-label-top",
  LABELBOTTOM: "e-label-bottom",
  NOFLOATLABEL: "e-no-float-label",
  INPUTCUSTOMTAG: "e-input-custom-tag",
  FLOATCUSTOMTAG: "e-float-custom-tag"
};
var Input;
(function(Input2) {
  var floatType;
  var isBindClearAction = true;
  function createInput(args, internalCreateElement) {
    var makeElement = !isNullOrUndefined(internalCreateElement) ? internalCreateElement : createElement;
    var inputObject2 = { container: null, buttons: [], clearButton: null };
    floatType = args.floatLabelType;
    isBindClearAction = args.bindClearAction;
    if (isNullOrUndefined(args.floatLabelType) || args.floatLabelType === "Never") {
      inputObject2.container = createInputContainer(args, CLASSNAMES.INPUTGROUP, CLASSNAMES.INPUTCUSTOMTAG, "span", makeElement);
      args.element.parentNode.insertBefore(inputObject2.container, args.element);
      addClass([args.element], CLASSNAMES.INPUT);
      inputObject2.container.appendChild(args.element);
    } else {
      createFloatingInput(args, inputObject2, makeElement);
    }
    bindInitialEvent(args);
    if (!isNullOrUndefined(args.properties) && !isNullOrUndefined(args.properties.showClearButton) && args.properties.showClearButton && args.element.tagName !== "TEXTAREA") {
      setClearButton(args.properties.showClearButton, args.element, inputObject2, true, makeElement);
      inputObject2.clearButton.setAttribute("role", "button");
      if (inputObject2.container.classList.contains(CLASSNAMES.FLOATINPUT)) {
        addClass([inputObject2.container], CLASSNAMES.INPUTGROUP);
      }
    }
    if (!isNullOrUndefined(args.buttons) && args.element.tagName !== "TEXTAREA") {
      for (var i = 0; i < args.buttons.length; i++) {
        inputObject2.buttons.push(appendSpan(args.buttons[i], inputObject2.container, makeElement));
      }
    }
    if (!isNullOrUndefined(args.element) && args.element.tagName === "TEXTAREA") {
      addClass([inputObject2.container], CLASSNAMES.TEXTAREA);
    }
    validateInputType(inputObject2.container, args.element);
    inputObject2 = setPropertyValue(args, inputObject2);
    createSpanElement(inputObject2.container, makeElement);
    return inputObject2;
  }
  Input2.createInput = createInput;
  function bindInitialEvent(args) {
    checkInputValue(args.floatLabelType, args.element);
    args.element.addEventListener("focus", function() {
      var parent = getParentNode(this);
      if (parent.classList.contains("e-input-group") || parent.classList.contains("e-outline") || parent.classList.contains("e-filled")) {
        parent.classList.add("e-input-focus");
      }
      setTimeout(function() {
        Input2.calculateWidth(args.element, parent);
      }, 80);
    });
    args.element.addEventListener("blur", function() {
      var parent = getParentNode(this);
      if (parent.classList.contains("e-input-group") || parent.classList.contains("e-outline") || parent.classList.contains("e-filled")) {
        parent.classList.remove("e-input-focus");
      }
      setTimeout(function() {
        Input2.calculateWidth(args.element, parent);
      }, 80);
    });
    args.element.addEventListener("input", function() {
      checkInputValue(floatType, args.element);
    });
  }
  Input2.bindInitialEvent = bindInitialEvent;
  function checkInputValue(floatLabelType, inputElement) {
    var inputValue = inputElement.value;
    if (inputValue !== "" && !isNullOrUndefined(inputValue) && inputElement.parentElement) {
      inputElement.parentElement.classList.add("e-valid-input");
    } else if (floatLabelType !== "Always" && inputElement.parentElement) {
      inputElement.parentElement.classList.remove("e-valid-input");
    }
  }
  function _focusFn() {
    var label = getParentNode(this).getElementsByClassName("e-float-text")[0];
    if (!isNullOrUndefined(label)) {
      addClass([label], CLASSNAMES.LABELTOP);
      if (label.classList.contains(CLASSNAMES.LABELBOTTOM)) {
        removeClass([label], CLASSNAMES.LABELBOTTOM);
      }
    }
  }
  function _blurFn() {
    var parent = getParentNode(this);
    if (parent.getElementsByTagName("textarea")[0] ? parent.getElementsByTagName("textarea")[0].value === "" : parent.getElementsByTagName("input")[0].value === "") {
      var label = parent.getElementsByClassName("e-float-text")[0];
      if (!isNullOrUndefined(label)) {
        if (label.classList.contains(CLASSNAMES.LABELTOP)) {
          removeClass([label], CLASSNAMES.LABELTOP);
        }
        addClass([label], CLASSNAMES.LABELBOTTOM);
      }
    }
  }
  function wireFloatingEvents(element2) {
    element2.addEventListener("focus", _focusFn);
    element2.addEventListener("blur", _blurFn);
  }
  Input2.wireFloatingEvents = wireFloatingEvents;
  function unwireFloatingEvents(element2) {
    element2.removeEventListener("focus", _focusFn);
    element2.removeEventListener("blur", _blurFn);
  }
  function createFloatingInput(args, inputObject2, internalCreateElement) {
    var makeElement = !isNullOrUndefined(internalCreateElement) ? internalCreateElement : createElement;
    if (args.floatLabelType === "Auto") {
      wireFloatingEvents(args.element);
    }
    if (isNullOrUndefined(inputObject2.container)) {
      inputObject2.container = createInputContainer(args, CLASSNAMES.FLOATINPUT, CLASSNAMES.FLOATCUSTOMTAG, "div", makeElement);
      if (args.element.parentNode) {
        args.element.parentNode.insertBefore(inputObject2.container, args.element);
      }
    } else {
      if (!isNullOrUndefined(args.customTag)) {
        inputObject2.container.classList.add(CLASSNAMES.FLOATCUSTOMTAG);
      }
      inputObject2.container.classList.add(CLASSNAMES.FLOATINPUT);
    }
    var floatLinelement = makeElement("span", { className: CLASSNAMES.FLOATLINE });
    var floatLabelElement = makeElement("label", { className: CLASSNAMES.FLOATTEXT });
    if (!isNullOrUndefined(args.element.id) && args.element.id !== "") {
      floatLabelElement.id = "label_" + args.element.id.replace(/ /g, "_");
      attributes(args.element, { "aria-labelledby": floatLabelElement.id });
    }
    if (!isNullOrUndefined(args.element.placeholder) && args.element.placeholder !== "") {
      floatLabelElement.innerText = encodePlaceHolder(args.element.placeholder);
      args.element.removeAttribute("placeholder");
    }
    if (!isNullOrUndefined(args.properties) && !isNullOrUndefined(args.properties.placeholder) && args.properties.placeholder !== "") {
      floatLabelElement.innerText = encodePlaceHolder(args.properties.placeholder);
    }
    if (!floatLabelElement.innerText) {
      inputObject2.container.classList.add(CLASSNAMES.NOFLOATLABEL);
    }
    if (inputObject2.container.classList.contains("e-float-icon-left")) {
      var inputWrap = inputObject2.container.querySelector(".e-input-in-wrap");
      inputWrap.appendChild(args.element);
      inputWrap.appendChild(floatLinelement);
      inputWrap.appendChild(floatLabelElement);
    } else {
      inputObject2.container.appendChild(args.element);
      inputObject2.container.appendChild(floatLinelement);
      inputObject2.container.appendChild(floatLabelElement);
    }
    updateLabelState(args.element.value, floatLabelElement);
    if (args.floatLabelType === "Always") {
      if (floatLabelElement.classList.contains(CLASSNAMES.LABELBOTTOM)) {
        removeClass([floatLabelElement], CLASSNAMES.LABELBOTTOM);
      }
      addClass([floatLabelElement], CLASSNAMES.LABELTOP);
    }
    if (args.floatLabelType === "Auto") {
      args.element.addEventListener("input", function(event) {
        updateLabelState(args.element.value, floatLabelElement, args.element);
      });
      args.element.addEventListener("blur", function(event) {
        updateLabelState(args.element.value, floatLabelElement);
      });
    }
    if (!isNullOrUndefined(args.element.getAttribute("id"))) {
      floatLabelElement.setAttribute("for", args.element.getAttribute("id"));
    }
  }
  function checkFloatLabelType(type, container) {
    if (type === "Always" && container.classList.contains("e-outline")) {
      container.classList.add("e-valid-input");
    }
  }
  function setPropertyValue(args, inputObject2) {
    if (!isNullOrUndefined(args.properties)) {
      for (var _i = 0, _a = Object.keys(args.properties); _i < _a.length; _i++) {
        var prop = _a[_i];
        switch (prop) {
          case "cssClass":
            setCssClass(args.properties.cssClass, [inputObject2.container]);
            checkFloatLabelType(args.floatLabelType, inputObject2.container);
            break;
          case "enabled":
            setEnabled(args.properties.enabled, args.element, args.floatLabelType, inputObject2.container);
            break;
          case "enableRtl":
            setEnableRtl(args.properties.enableRtl, [inputObject2.container]);
            break;
          case "placeholder":
            setPlaceholder(args.properties.placeholder, args.element);
            break;
          case "readonly":
            setReadonly(args.properties.readonly, args.element);
            break;
        }
      }
    }
    return inputObject2;
  }
  function updateIconState(value, button, readonly2) {
    if (value && !readonly2) {
      removeClass([button], CLASSNAMES.CLEARICONHIDE);
    } else {
      addClass([button], CLASSNAMES.CLEARICONHIDE);
    }
  }
  function updateLabelState(value, label, element2) {
    if (element2 === void 0) {
      element2 = null;
    }
    if (value) {
      addClass([label], CLASSNAMES.LABELTOP);
      if (label.classList.contains(CLASSNAMES.LABELBOTTOM)) {
        removeClass([label], CLASSNAMES.LABELBOTTOM);
      }
    } else {
      var isNotFocused = element2 != null ? element2 !== document.activeElement : true;
      if (isNotFocused) {
        if (label.classList.contains(CLASSNAMES.LABELTOP)) {
          removeClass([label], CLASSNAMES.LABELTOP);
        }
        addClass([label], CLASSNAMES.LABELBOTTOM);
      }
    }
  }
  function getParentNode(element2) {
    var parentNode = isNullOrUndefined(element2.parentNode) ? element2 : element2.parentNode;
    if (parentNode && parentNode.classList.contains("e-input-in-wrap")) {
      parentNode = parentNode.parentNode;
    }
    return parentNode;
  }
  function createClearButton(element2, inputObject2, initial, internalCreateElement) {
    var makeElement = !isNullOrUndefined(internalCreateElement) ? internalCreateElement : createElement;
    var button = makeElement("span", { className: CLASSNAMES.CLEARICON });
    var container = inputObject2.container;
    if (!isNullOrUndefined(initial)) {
      container.appendChild(button);
    } else {
      var baseElement = inputObject2.container.classList.contains(CLASSNAMES.FLOATINPUT) ? inputObject2.container.querySelector("." + CLASSNAMES.FLOATTEXT) : element2;
      baseElement.insertAdjacentElement("afterend", button);
    }
    if (!isNullOrUndefined(container) && container.classList.contains(CLASSNAMES.FLOATINPUT)) {
      addClass([container], CLASSNAMES.INPUTGROUP);
    }
    addClass([button], CLASSNAMES.CLEARICONHIDE);
    wireClearBtnEvents(element2, button);
    button.setAttribute("aria-label", "close");
    return button;
  }
  function wireClearBtnEvents(element2, button, container) {
    if (isBindClearAction === void 0 || isBindClearAction) {
      button.addEventListener("click", function(event) {
        if (!(element2.classList.contains(CLASSNAMES.DISABLE) || element2.readOnly)) {
          event.preventDefault();
          if (element2 !== document.activeElement) {
            element2.focus();
          }
          element2.value = "";
          addClass([button], CLASSNAMES.CLEARICONHIDE);
        }
      });
    }
    element2.addEventListener("input", function(event) {
      updateIconState(element2.value, button);
    });
    element2.addEventListener("focus", function(event) {
      updateIconState(element2.value, button, element2.readOnly);
    });
    element2.addEventListener("blur", function(event) {
      setTimeout(function() {
        addClass([button], CLASSNAMES.CLEARICONHIDE);
      }, 200);
    });
  }
  Input2.wireClearBtnEvents = wireClearBtnEvents;
  function destroy2() {
  }
  Input2.destroy = destroy2;
  function validateLabel(element2, floatLabelType) {
    var parent = getParentNode(element2);
    if (parent.classList.contains(CLASSNAMES.FLOATINPUT) && floatLabelType === "Auto") {
      var label = getParentNode(element2).getElementsByClassName("e-float-text")[0];
      updateLabelState(element2.value, label, element2);
    }
  }
  function createInputContainer(args, className, tagClass, tag, internalCreateElement) {
    var makeElement = !isNullOrUndefined(internalCreateElement) ? internalCreateElement : createElement;
    var container;
    if (!isNullOrUndefined(args.customTag)) {
      container = makeElement(args.customTag, { className });
      container.classList.add(tagClass);
    } else {
      container = makeElement(tag, { className });
    }
    container.classList.add("e-control-wrapper");
    return container;
  }
  function encodePlaceHolder(placeholder) {
    var result = "";
    if (!isNullOrUndefined(placeholder) && placeholder !== "") {
      var spanEle = document.createElement("span");
      spanEle.innerHTML = '<input  placeholder="' + placeholder + '"/>';
      var hiddenInput = spanEle.children[0];
      result = hiddenInput.placeholder;
    }
    return result;
  }
  function setValue2(value, element2, floatLabelType, clearButton) {
    element2.value = value;
    calculateWidth(element2, element2.parentElement);
    if (!isNullOrUndefined(floatLabelType) && floatLabelType === "Auto") {
      validateLabel(element2, floatLabelType);
    }
    if (!isNullOrUndefined(clearButton) && clearButton) {
      var parentElement = getParentNode(element2);
      if (!isNullOrUndefined(parentElement)) {
        var button = parentElement.getElementsByClassName(CLASSNAMES.CLEARICON)[0];
        if (!isNullOrUndefined(button)) {
          if (element2.value && !isNullOrUndefined(parentElement) && parentElement.classList.contains("e-input-focus")) {
            removeClass([button], CLASSNAMES.CLEARICONHIDE);
          } else {
            addClass([button], CLASSNAMES.CLEARICONHIDE);
          }
        }
      }
    }
    checkInputValue(floatLabelType, element2);
  }
  Input2.setValue = setValue2;
  function setCssClass(cssClass2, elements, oldClass) {
    if (!isNullOrUndefined(oldClass) && oldClass !== "") {
      removeClass(elements, oldClass.split(" "));
    }
    if (!isNullOrUndefined(cssClass2) && cssClass2 !== "") {
      addClass(elements, cssClass2.split(" "));
    }
  }
  Input2.setCssClass = setCssClass;
  function calculateWidth(element2, container, moduleName) {
    var elementWidth = moduleName === "multiselect" ? element2 : element2.clientWidth - parseInt(getComputedStyle(element2, null).getPropertyValue("padding-left"), 10);
    if (!isNullOrUndefined(container.getElementsByClassName("e-float-text-content")[0])) {
      if (container.getElementsByClassName("e-float-text-content")[0].classList.contains("e-float-text-overflow")) {
        container.getElementsByClassName("e-float-text-content")[0].classList.remove("e-float-text-overflow");
      }
      if (elementWidth < container.getElementsByClassName("e-float-text-content")[0].clientWidth || elementWidth === container.getElementsByClassName("e-float-text-content")[0].clientWidth) {
        container.getElementsByClassName("e-float-text-content")[0].classList.add("e-float-text-overflow");
      }
    }
  }
  Input2.calculateWidth = calculateWidth;
  function setWidth2(width, container) {
    if (typeof width === "number") {
      container.style.width = formatUnit(width);
    } else if (typeof width === "string") {
      container.style.width = width.match(/px|%|em/) ? width : formatUnit(width);
    }
    calculateWidth(container.firstChild, container);
  }
  Input2.setWidth = setWidth2;
  function setPlaceholder(placeholder, element2) {
    placeholder = encodePlaceHolder(placeholder);
    var parentElement = getParentNode(element2);
    if (parentElement.classList.contains(CLASSNAMES.FLOATINPUT)) {
      if (!isNullOrUndefined(placeholder) && placeholder !== "") {
        parentElement.getElementsByClassName("e-float-text-content")[0] ? parentElement.getElementsByClassName(CLASSNAMES.FLOATTEXT)[0].children[0].textContent = placeholder : parentElement.getElementsByClassName(CLASSNAMES.FLOATTEXT)[0].textContent = placeholder;
        parentElement.classList.remove(CLASSNAMES.NOFLOATLABEL);
        element2.removeAttribute("placeholder");
      } else {
        parentElement.classList.add(CLASSNAMES.NOFLOATLABEL);
        parentElement.getElementsByClassName("e-float-text-content")[0] ? parentElement.getElementsByClassName(CLASSNAMES.FLOATTEXT)[0].children[0].textContent = "" : parentElement.getElementsByClassName(CLASSNAMES.FLOATTEXT)[0].textContent = "";
      }
    } else {
      if (!isNullOrUndefined(placeholder) && placeholder !== "") {
        attributes(element2, { "placeholder": placeholder });
      } else {
        element2.removeAttribute("placeholder");
      }
    }
  }
  Input2.setPlaceholder = setPlaceholder;
  function setReadonly(isReadonly2, element2, floatLabelType) {
    if (isReadonly2) {
      attributes(element2, { readonly: "" });
    } else {
      element2.removeAttribute("readonly");
    }
    if (!isNullOrUndefined(floatLabelType)) {
      validateLabel(element2, floatLabelType);
    }
  }
  Input2.setReadonly = setReadonly;
  function setEnableRtl(isRtl, elements) {
    if (isRtl) {
      addClass(elements, CLASSNAMES.RTL);
    } else {
      removeClass(elements, CLASSNAMES.RTL);
    }
  }
  Input2.setEnableRtl = setEnableRtl;
  function setEnabled(isEnable, element2, floatLabelType, inputContainer) {
    var disabledAttrs = { "disabled": "disabled", "aria-disabled": "true" };
    var considerWrapper = isNullOrUndefined(inputContainer) ? false : true;
    if (isEnable) {
      element2.classList.remove(CLASSNAMES.DISABLE);
      removeAttributes(disabledAttrs, element2);
      if (considerWrapper) {
        removeClass([inputContainer], CLASSNAMES.DISABLE);
      }
    } else {
      element2.classList.add(CLASSNAMES.DISABLE);
      addAttributes(disabledAttrs, element2);
      if (considerWrapper) {
        addClass([inputContainer], CLASSNAMES.DISABLE);
      }
    }
    if (!isNullOrUndefined(floatLabelType)) {
      validateLabel(element2, floatLabelType);
    }
  }
  Input2.setEnabled = setEnabled;
  function setClearButton(isClear, element2, inputObject2, initial, internalCreateElement) {
    var makeElement = !isNullOrUndefined(internalCreateElement) ? internalCreateElement : createElement;
    if (isClear) {
      inputObject2.clearButton = createClearButton(element2, inputObject2, initial, makeElement);
    } else {
      remove(inputObject2.clearButton);
      inputObject2.clearButton = null;
    }
  }
  Input2.setClearButton = setClearButton;
  function removeAttributes(attrs, element2) {
    for (var _i = 0, _a = Object.keys(attrs); _i < _a.length; _i++) {
      var key = _a[_i];
      var parentElement = getParentNode(element2);
      if (key === "disabled") {
        element2.classList.remove(CLASSNAMES.DISABLE);
      }
      if (key === "disabled" && parentElement.classList.contains(CLASSNAMES.INPUTGROUP)) {
        parentElement.classList.remove(CLASSNAMES.DISABLE);
      }
      if (key === "placeholder" && parentElement.classList.contains(CLASSNAMES.FLOATINPUT)) {
        parentElement.getElementsByClassName(CLASSNAMES.FLOATTEXT)[0].textContent = "";
      } else {
        element2.removeAttribute(key);
      }
    }
  }
  Input2.removeAttributes = removeAttributes;
  function addAttributes(attrs, element2) {
    for (var _i = 0, _a = Object.keys(attrs); _i < _a.length; _i++) {
      var key = _a[_i];
      var parentElement = getParentNode(element2);
      if (key === "disabled") {
        element2.classList.add(CLASSNAMES.DISABLE);
      }
      if (key === "disabled" && parentElement.classList.contains(CLASSNAMES.INPUTGROUP)) {
        parentElement.classList.add(CLASSNAMES.DISABLE);
      }
      if (key === "placeholder" && parentElement.classList.contains(CLASSNAMES.FLOATINPUT)) {
        parentElement.getElementsByClassName(CLASSNAMES.FLOATTEXT)[0].textContent = attrs["" + key];
      } else {
        element2.setAttribute(key, attrs["" + key]);
      }
    }
  }
  Input2.addAttributes = addAttributes;
  function removeFloating2(input) {
    var container = input.container;
    if (!isNullOrUndefined(container) && container.classList.contains(CLASSNAMES.FLOATINPUT)) {
      var inputEle = container.querySelector("textarea") ? container.querySelector("textarea") : container.querySelector("input");
      var placeholder = container.querySelector("." + CLASSNAMES.FLOATTEXT).textContent;
      var clearButton = container.querySelector(".e-clear-icon") !== null;
      detach(container.querySelector("." + CLASSNAMES.FLOATLINE));
      detach(container.querySelector("." + CLASSNAMES.FLOATTEXT));
      classList(container, [CLASSNAMES.INPUTGROUP], [CLASSNAMES.FLOATINPUT]);
      unwireFloatingEvents(inputEle);
      attributes(inputEle, { "placeholder": placeholder });
      inputEle.classList.add(CLASSNAMES.INPUT);
      if (!clearButton && inputEle.tagName === "INPUT") {
        inputEle.removeAttribute("required");
      }
    }
  }
  Input2.removeFloating = removeFloating2;
  function addFloating(input, type, placeholder, internalCreateElement) {
    var makeElement = !isNullOrUndefined(internalCreateElement) ? internalCreateElement : createElement;
    var container = closest(input, "." + CLASSNAMES.INPUTGROUP);
    floatType = type;
    if (type !== "Never") {
      var customTag = container.tagName;
      customTag = customTag !== "DIV" && customTag !== "SPAN" ? customTag : null;
      var args = {
        element: input,
        floatLabelType: type,
        customTag,
        properties: { placeholder }
      };
      var iconEle = container.querySelector(".e-clear-icon");
      var inputObj = { container };
      input.classList.remove(CLASSNAMES.INPUT);
      createFloatingInput(args, inputObj, makeElement);
      createSpanElement(inputObj.container, makeElement);
      calculateWidth(args.element, inputObj.container);
      var isPrependIcon = container.classList.contains("e-float-icon-left");
      if (isNullOrUndefined(iconEle)) {
        if (isPrependIcon) {
          var inputWrap = container.querySelector(".e-input-in-wrap");
          iconEle = inputWrap.querySelector(".e-input-group-icon");
        } else {
          iconEle = container.querySelector(".e-input-group-icon");
        }
      }
      if (isNullOrUndefined(iconEle)) {
        if (isPrependIcon) {
          iconEle = container.querySelector(".e-input-group-icon");
        }
        if (isNullOrUndefined(iconEle)) {
          container.classList.remove(CLASSNAMES.INPUTGROUP);
        }
      } else {
        var floatLine = container.querySelector("." + CLASSNAMES.FLOATLINE);
        var floatText = container.querySelector("." + CLASSNAMES.FLOATTEXT);
        var wrapper = isPrependIcon ? container.querySelector(".e-input-in-wrap") : container;
        wrapper.insertBefore(input, iconEle);
        wrapper.insertBefore(floatLine, iconEle);
        wrapper.insertBefore(floatText, iconEle);
      }
    }
    checkFloatLabelType(type, input.parentElement);
  }
  Input2.addFloating = addFloating;
  function createSpanElement(inputObject2, makeElement) {
    if (inputObject2.classList.contains("e-outline") && inputObject2.getElementsByClassName("e-float-text")[0]) {
      var labelSpanElement = makeElement("span", { className: CLASSNAMES.FLOATTEXTCONTENT });
      labelSpanElement.innerHTML = inputObject2.getElementsByClassName("e-float-text")[0].innerHTML;
      inputObject2.getElementsByClassName("e-float-text")[0].innerHTML = "";
      inputObject2.getElementsByClassName("e-float-text")[0].appendChild(labelSpanElement);
    }
  }
  Input2.createSpanElement = createSpanElement;
  function setRipple(isRipple, inputObj) {
    for (var i = 0; i < inputObj.length; i++) {
      _internalRipple(isRipple, inputObj[parseInt(i.toString())].container);
    }
  }
  Input2.setRipple = setRipple;
  function _internalRipple(isRipple, container, button) {
    var argsButton = [];
    argsButton.push(button);
    var buttons = isNullOrUndefined(button) ? container.querySelectorAll(".e-input-group-icon") : argsButton;
    if (isRipple && buttons.length > 0) {
      for (var index = 0; index < buttons.length; index++) {
        buttons[parseInt(index.toString())].addEventListener("mousedown", _onMouseDownRipple, false);
        buttons[parseInt(index.toString())].addEventListener("mouseup", _onMouseUpRipple, false);
      }
    } else if (buttons.length > 0) {
      for (var index = 0; index < buttons.length; index++) {
        buttons[parseInt(index.toString())].removeEventListener("mousedown", _onMouseDownRipple, this);
        buttons[parseInt(index.toString())].removeEventListener("mouseup", _onMouseUpRipple, this);
      }
    }
  }
  function _onMouseRipple(container, button) {
    if (!container.classList.contains("e-disabled") && !container.querySelector("input").readOnly) {
      button.classList.add("e-input-btn-ripple");
    }
  }
  function _onMouseDownRipple() {
    var ele = this;
    var parentEle = this.parentElement;
    while (!parentEle.classList.contains("e-input-group")) {
      parentEle = parentEle.parentElement;
    }
    _onMouseRipple(parentEle, ele);
  }
  function _onMouseUpRipple() {
    var ele = this;
    setTimeout(function() {
      ele.classList.remove("e-input-btn-ripple");
    }, 500);
  }
  function createIconEle(iconClass, makeElement) {
    var button = makeElement("span", { className: iconClass });
    button.classList.add("e-input-group-icon");
    return button;
  }
  function addIcon(position, icons, container, input, internalCreate) {
    var result = typeof icons === "string" ? icons.split(",") : icons;
    if (position.toLowerCase() === "append") {
      for (var _i = 0, result_1 = result; _i < result_1.length; _i++) {
        var icon = result_1[_i];
        appendSpan(icon, container, internalCreate);
      }
    } else {
      for (var _a = 0, result_2 = result; _a < result_2.length; _a++) {
        var icon = result_2[_a];
        prependSpan(icon, container, input, internalCreate);
      }
    }
    if (container.getElementsByClassName("e-input-group-icon")[0] && container.getElementsByClassName("e-float-text-overflow")[0]) {
      container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon");
    }
  }
  Input2.addIcon = addIcon;
  function prependSpan(iconClass, container, inputElement, internalCreateElement) {
    var makeElement = !isNullOrUndefined(internalCreateElement) ? internalCreateElement : createElement;
    var button = createIconEle(iconClass, makeElement);
    container.classList.add("e-float-icon-left");
    var innerWrapper = container.querySelector(".e-input-in-wrap");
    if (isNullOrUndefined(innerWrapper)) {
      innerWrapper = makeElement("span", { className: "e-input-in-wrap" });
      inputElement.parentNode.insertBefore(innerWrapper, inputElement);
      var result = container.querySelectorAll(inputElement.tagName + " ~ *");
      innerWrapper.appendChild(inputElement);
      for (var i = 0; i < result.length; i++) {
        innerWrapper.appendChild(result[parseInt(i.toString())]);
      }
    }
    innerWrapper.parentNode.insertBefore(button, innerWrapper);
    if (!container.classList.contains(CLASSNAMES.INPUTGROUP)) {
      container.classList.add(CLASSNAMES.INPUTGROUP);
    }
    _internalRipple(true, container, button);
    return button;
  }
  Input2.prependSpan = prependSpan;
  function appendSpan(iconClass, container, internalCreateElement) {
    var makeElement = !isNullOrUndefined(internalCreateElement) ? internalCreateElement : createElement;
    var button = createIconEle(iconClass, makeElement);
    if (!container.classList.contains(CLASSNAMES.INPUTGROUP)) {
      container.classList.add(CLASSNAMES.INPUTGROUP);
    }
    var wrap = container.classList.contains("e-float-icon-left") ? container.querySelector(".e-input-in-wrap") : container;
    wrap.appendChild(button);
    _internalRipple(true, container, button);
    return button;
  }
  Input2.appendSpan = appendSpan;
  function validateInputType(containerElement2, input) {
    if (input.type === "hidden") {
      containerElement2.classList.add("e-hidden");
    } else if (containerElement2.classList.contains("e-hidden")) {
      containerElement2.classList.remove("e-hidden");
    }
  }
  Input2.validateInputType = validateInputType;
})(Input || (Input = {}));
var __extends$H = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$w = globalThis && globalThis.__decorate || function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i = decorators.length - 1; i >= 0; i--)
      if (d = decorators[i])
        r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var ROOT$7 = "e-control-wrapper e-numeric";
var SPINICON = "e-input-group-icon";
var SPINUP = "e-spin-up";
var SPINDOWN = "e-spin-down";
var ERROR$3 = "e-error";
var INCREMENT = "increment";
var DECREMENT = "decrement";
var INTREGEXP = new RegExp("^(-)?(\\d*)$");
var DECIMALSEPARATOR = ".";
var COMPONENT = "e-numerictextbox";
var CONTROL$4 = "e-control";
var NUMERIC_FOCUS = "e-input-focus";
var HIDDENELEMENT = "e-numeric-hidden";
var wrapperAttributes$1 = ["title", "style", "class"];
var selectionTimeOut = 0;
var NumericTextBox = (
  /** @class */
  function(_super) {
    __extends$H(NumericTextBox2, _super);
    function NumericTextBox2(options, element2) {
      var _this = _super.call(this, options, element2) || this;
      _this.isVue = false;
      _this.preventChange = false;
      _this.isAngular = false;
      _this.isDynamicChange = false;
      _this.numericOptions = options;
      return _this;
    }
    NumericTextBox2.prototype.preRender = function() {
      this.isPrevFocused = false;
      this.decimalSeparator = ".";
      this.intRegExp = new RegExp("/^(-)?(d*)$/");
      this.isCalled = false;
      var ejInstance = getValue("ej2_instances", this.element);
      this.cloneElement = this.element.cloneNode(true);
      removeClass([this.cloneElement], [CONTROL$4, COMPONENT, "e-lib"]);
      this.angularTagName = null;
      this.formEle = closest(this.element, "form");
      if (this.element.tagName === "EJS-NUMERICTEXTBOX") {
        this.angularTagName = this.element.tagName;
        var input = this.createElement("input");
        var index = 0;
        for (index; index < this.element.attributes.length; index++) {
          var attributeName = this.element.attributes[index].nodeName;
          if (attributeName !== "id" && attributeName !== "class") {
            input.setAttribute(this.element.attributes[index].nodeName, this.element.attributes[index].nodeValue);
            input.innerHTML = this.element.innerHTML;
          } else if (attributeName === "class") {
            input.setAttribute(attributeName, this.element.className.split(" ").filter(function(item) {
              return item.indexOf("ng-") !== 0;
            }).join(" "));
          }
        }
        if (this.element.hasAttribute("name")) {
          this.element.removeAttribute("name");
        }
        this.element.classList.remove("e-control", "e-numerictextbox");
        this.element.appendChild(input);
        this.element = input;
        setValue("ej2_instances", ejInstance, this.element);
      }
      attributes(this.element, { "role": "spinbutton", "tabindex": "0", "autocomplete": "off" });
      var localeText = {
        incrementTitle: "Increment value",
        decrementTitle: "Decrement value",
        placeholder: this.placeholder
      };
      this.l10n = new L10n("numerictextbox", localeText, this.locale);
      if (this.l10n.getConstant("placeholder") !== "") {
        this.setProperties({ placeholder: this.placeholder || this.l10n.getConstant("placeholder") }, true);
      }
      if (!this.element.hasAttribute("id")) {
        this.element.setAttribute("id", getUniqueID("numerictextbox"));
      }
      this.isValidState = true;
      this.inputStyle = null;
      this.inputName = null;
      this.cultureInfo = {};
      this.initCultureInfo();
      this.initCultureFunc();
      this.prevValue = this.value;
      this.updateHTMLAttrToElement();
      this.checkAttributes(false);
      if (this.formEle) {
        this.inputEleValue = this.value;
      }
      this.validateMinMax();
      this.validateStep();
      if (this.placeholder === null) {
        this.updatePlaceholder();
      }
    };
    NumericTextBox2.prototype.render = function() {
      if (this.element.tagName.toLowerCase() === "input") {
        this.createWrapper();
        if (this.showSpinButton) {
          this.spinBtnCreation();
        }
        this.setElementWidth(this.width);
        if (!this.container.classList.contains("e-input-group")) {
          this.container.classList.add("e-input-group");
        }
        this.changeValue(this.value === null || isNaN(this.value) ? null : this.strictMode ? this.trimValue(this.value) : this.value);
        this.wireEvents();
        if (this.value !== null && !isNaN(this.value)) {
          if (this.decimals) {
            this.setProperties({ value: this.roundNumber(this.value, this.decimals) }, true);
          }
        }
        if (this.element.getAttribute("value") || this.value) {
          this.element.setAttribute("value", this.element.value);
          this.hiddenInput.setAttribute("value", this.hiddenInput.value);
        }
        this.elementPrevValue = this.element.value;
        if (this.element.hasAttribute("data-val")) {
          this.element.setAttribute("data-val", "false");
        }
        if (!isNullOrUndefined(closest(this.element, "fieldset")) && closest(this.element, "fieldset").disabled) {
          this.enabled = false;
        }
        this.renderComplete();
      }
    };
    NumericTextBox2.prototype.checkAttributes = function(isDynamic) {
      var attributes2 = isDynamic ? isNullOrUndefined(this.htmlAttributes) ? [] : Object.keys(this.htmlAttributes) : ["value", "min", "max", "step", "disabled", "readonly", "style", "name", "placeholder"];
      for (var _i = 0, attributes_1 = attributes2; _i < attributes_1.length; _i++) {
        var prop = attributes_1[_i];
        if (!isNullOrUndefined(this.element.getAttribute(prop))) {
          switch (prop) {
            case "disabled":
              if (isNullOrUndefined(this.numericOptions) || this.numericOptions["enabled"] === void 0 || isDynamic) {
                var enabled = this.element.getAttribute(prop) === "disabled" || this.element.getAttribute(prop) === "" || this.element.getAttribute(prop) === "true" ? false : true;
                this.setProperties({ enabled }, !isDynamic);
              }
              break;
            case "readonly":
              if (isNullOrUndefined(this.numericOptions) || this.numericOptions["readonly"] === void 0 || isDynamic) {
                var readonly2 = this.element.getAttribute(prop) === "readonly" || this.element.getAttribute(prop) === "" || this.element.getAttribute(prop) === "true" ? true : false;
                this.setProperties({ readonly: readonly2 }, !isDynamic);
              }
              break;
            case "placeholder":
              if (isNullOrUndefined(this.numericOptions) || this.numericOptions["placeholder"] === void 0 || isDynamic) {
                this.setProperties({ placeholder: this.element.placeholder }, !isDynamic);
              }
              break;
            case "value":
              if (isNullOrUndefined(this.numericOptions) || this.numericOptions["value"] === void 0 || isDynamic) {
                var setNumber = this.instance.getNumberParser({ format: "n" })(this.element.getAttribute(prop));
                this.setProperties(setValue(prop, setNumber, {}), !isDynamic);
              }
              break;
            case "min":
              if (isNullOrUndefined(this.numericOptions) || this.numericOptions["min"] === void 0 || isDynamic) {
                var minValue = this.instance.getNumberParser({ format: "n" })(this.element.getAttribute(prop));
                if (minValue !== null && !isNaN(minValue)) {
                  this.setProperties(setValue(prop, minValue, {}), !isDynamic);
                }
              }
              break;
            case "max":
              if (isNullOrUndefined(this.numericOptions) || this.numericOptions["max"] === void 0 || isDynamic) {
                var maxValue = this.instance.getNumberParser({ format: "n" })(this.element.getAttribute(prop));
                if (maxValue !== null && !isNaN(maxValue)) {
                  this.setProperties(setValue(prop, maxValue, {}), !isDynamic);
                }
              }
              break;
            case "step":
              if (isNullOrUndefined(this.numericOptions) || this.numericOptions["step"] === void 0 || isDynamic) {
                var stepValue = this.instance.getNumberParser({ format: "n" })(this.element.getAttribute(prop));
                if (stepValue !== null && !isNaN(stepValue)) {
                  this.setProperties(setValue(prop, stepValue, {}), !isDynamic);
                }
              }
              break;
            case "style":
              this.inputStyle = this.element.getAttribute(prop);
              break;
            case "name":
              this.inputName = this.element.getAttribute(prop);
              break;
            default:
              {
                var value = this.instance.getNumberParser({ format: "n" })(this.element.getAttribute(prop));
                if (value !== null && !isNaN(value) || prop === "value") {
                  this.setProperties(setValue(prop, value, {}), true);
                }
              }
              break;
          }
        }
      }
    };
    NumericTextBox2.prototype.updatePlaceholder = function() {
      this.setProperties({ placeholder: this.l10n.getConstant("placeholder") }, true);
    };
    NumericTextBox2.prototype.initCultureFunc = function() {
      this.instance = new Internationalization(this.locale);
    };
    NumericTextBox2.prototype.initCultureInfo = function() {
      this.cultureInfo.format = this.format;
      if (getValue("currency", this) !== null) {
        setValue("currency", this.currency, this.cultureInfo);
        this.setProperties({ currencyCode: this.currency }, true);
      }
    };
    NumericTextBox2.prototype.createWrapper = function() {
      var updatedCssClassValue = this.cssClass;
      if (!isNullOrUndefined(this.cssClass) && this.cssClass !== "") {
        updatedCssClassValue = this.getNumericValidClassList(this.cssClass);
      }
      var inputObj = Input.createInput({
        element: this.element,
        floatLabelType: this.floatLabelType,
        properties: {
          readonly: this.readonly,
          placeholder: this.placeholder,
          cssClass: updatedCssClassValue,
          enableRtl: this.enableRtl,
          showClearButton: this.showClearButton,
          enabled: this.enabled
        }
      }, this.createElement);
      this.inputWrapper = inputObj;
      this.container = inputObj.container;
      this.container.setAttribute("class", ROOT$7 + " " + this.container.getAttribute("class"));
      this.updateHTMLAttrToWrapper();
      if (this.readonly) {
        attributes(this.element, { "aria-readonly": "true" });
      }
      this.hiddenInput = this.createElement("input", { attrs: {
        type: "text",
        "validateHidden": "true",
        "class": HIDDENELEMENT
      } });
      this.inputName = this.inputName !== null ? this.inputName : this.element.id;
      this.element.removeAttribute("name");
      attributes(this.hiddenInput, { "name": this.inputName });
      this.container.insertBefore(this.hiddenInput, this.container.childNodes[1]);
      this.updateDataAttribute(false);
      if (this.inputStyle !== null) {
        attributes(this.container, { "style": this.inputStyle });
      }
    };
    NumericTextBox2.prototype.updateDataAttribute = function(isDynamic) {
      var attr = {};
      if (!isDynamic) {
        for (var a = 0; a < this.element.attributes.length; a++) {
          attr[this.element.attributes[a].name] = this.element.getAttribute(this.element.attributes[a].name);
        }
      } else {
        attr = this.htmlAttributes;
      }
      for (var _i = 0, _a = Object.keys(attr); _i < _a.length; _i++) {
        var key = _a[_i];
        if (key.indexOf("data") === 0) {
          this.hiddenInput.setAttribute(key, attr["" + key]);
        }
      }
    };
    NumericTextBox2.prototype.updateHTMLAttrToElement = function() {
      if (!isNullOrUndefined(this.htmlAttributes)) {
        for (var _i = 0, _a = Object.keys(this.htmlAttributes); _i < _a.length; _i++) {
          var pro = _a[_i];
          if (wrapperAttributes$1.indexOf(pro) < 0) {
            this.element.setAttribute(pro, this.htmlAttributes["" + pro]);
          }
        }
      }
    };
    NumericTextBox2.prototype.updateCssClass = function(newClass, oldClass) {
      Input.setCssClass(this.getNumericValidClassList(newClass), [this.container], this.getNumericValidClassList(oldClass));
    };
    NumericTextBox2.prototype.getNumericValidClassList = function(numericClassName) {
      var result = numericClassName;
      if (!isNullOrUndefined(numericClassName) && numericClassName !== "") {
        result = numericClassName.replace(/\s+/g, " ").trim();
      }
      return result;
    };
    NumericTextBox2.prototype.updateHTMLAttrToWrapper = function() {
      if (!isNullOrUndefined(this.htmlAttributes)) {
        for (var _i = 0, _a = Object.keys(this.htmlAttributes); _i < _a.length; _i++) {
          var pro = _a[_i];
          if (wrapperAttributes$1.indexOf(pro) > -1) {
            if (pro === "class") {
              var updatedClassValue = this.getNumericValidClassList(this.htmlAttributes["" + pro]);
              if (updatedClassValue !== "") {
                addClass([this.container], updatedClassValue.split(" "));
              }
            } else if (pro === "style") {
              var numericStyle = this.container.getAttribute(pro);
              numericStyle = !isNullOrUndefined(numericStyle) ? numericStyle + this.htmlAttributes["" + pro] : this.htmlAttributes["" + pro];
              this.container.setAttribute(pro, numericStyle);
            } else {
              this.container.setAttribute(pro, this.htmlAttributes["" + pro]);
            }
          }
        }
      }
    };
    NumericTextBox2.prototype.setElementWidth = function(width) {
      if (!isNullOrUndefined(width)) {
        if (typeof width === "number") {
          this.container.style.width = formatUnit(width);
        } else if (typeof width === "string") {
          this.container.style.width = width.match(/px|%|em/) ? width : formatUnit(width);
        }
      }
    };
    NumericTextBox2.prototype.spinBtnCreation = function() {
      this.spinDown = Input.appendSpan(SPINICON + " " + SPINDOWN, this.container, this.createElement);
      attributes(this.spinDown, {
        "title": this.l10n.getConstant("decrementTitle")
      });
      this.spinUp = Input.appendSpan(SPINICON + " " + SPINUP, this.container, this.createElement);
      attributes(this.spinUp, {
        "title": this.l10n.getConstant("incrementTitle")
      });
      this.wireSpinBtnEvents();
    };
    NumericTextBox2.prototype.validateMinMax = function() {
      if (!(typeof this.min === "number" && !isNaN(this.min))) {
        this.setProperties({ min: -Number.MAX_VALUE }, true);
      }
      if (!(typeof this.max === "number" && !isNaN(this.max))) {
        this.setProperties({ max: Number.MAX_VALUE }, true);
      }
      if (this.decimals !== null) {
        if (this.min !== -Number.MAX_VALUE) {
          this.setProperties({ min: this.instance.getNumberParser({ format: "n" })(this.formattedValue(this.decimals, this.min)) }, true);
        }
        if (this.max !== Number.MAX_VALUE) {
          this.setProperties({ max: this.instance.getNumberParser({ format: "n" })(this.formattedValue(this.decimals, this.max)) }, true);
        }
      }
      this.setProperties({ min: this.min > this.max ? this.max : this.min }, true);
      if (this.min !== -Number.MAX_VALUE) {
        attributes(this.element, { "aria-valuemin": this.min.toString() });
      }
      if (this.max !== Number.MAX_VALUE) {
        attributes(this.element, { "aria-valuemax": this.max.toString() });
      }
    };
    NumericTextBox2.prototype.formattedValue = function(decimals, value) {
      return this.instance.getNumberFormat({
        maximumFractionDigits: decimals,
        minimumFractionDigits: decimals,
        useGrouping: false
      })(value);
    };
    NumericTextBox2.prototype.validateStep = function() {
      if (this.decimals !== null) {
        this.setProperties({ step: this.instance.getNumberParser({ format: "n" })(this.formattedValue(this.decimals, this.step)) }, true);
      }
    };
    NumericTextBox2.prototype.action = function(operation, event) {
      this.isInteract = true;
      var value = this.isFocused ? this.instance.getNumberParser({ format: "n" })(this.element.value) : this.value;
      this.changeValue(this.performAction(value, this.step, operation));
      this.raiseChangeEvent(event);
    };
    NumericTextBox2.prototype.checkErrorClass = function() {
      if (this.isValidState) {
        removeClass([this.container], ERROR$3);
      } else {
        addClass([this.container], ERROR$3);
      }
      attributes(this.element, { "aria-invalid": this.isValidState ? "false" : "true" });
    };
    NumericTextBox2.prototype.bindClearEvent = function() {
      if (this.showClearButton) {
        EventHandler.add(this.inputWrapper.clearButton, "mousedown touchstart", this.resetHandler, this);
      }
    };
    NumericTextBox2.prototype.resetHandler = function(e) {
      e.preventDefault();
      if (!this.inputWrapper.clearButton.classList.contains("e-clear-icon-hide") || this.inputWrapper.container.classList.contains("e-static-clear")) {
        this.clear(e);
      }
      this.isInteract = true;
      this.raiseChangeEvent(e);
    };
    NumericTextBox2.prototype.clear = function(event) {
      this.setProperties({ value: null }, true);
      this.setElementValue("");
      this.hiddenInput.value = "";
      var formElement = closest(this.element, "form");
      if (formElement) {
        var element2 = this.element.nextElementSibling;
        var keyupEvent = document.createEvent("KeyboardEvent");
        keyupEvent.initEvent("keyup", false, true);
        element2.dispatchEvent(keyupEvent);
      }
    };
    NumericTextBox2.prototype.resetFormHandler = function() {
      if (this.element.tagName === "EJS-NUMERICTEXTBOX") {
        this.updateValue(null);
      } else {
        this.updateValue(this.inputEleValue);
      }
    };
    NumericTextBox2.prototype.setSpinButton = function() {
      if (!isNullOrUndefined(this.spinDown)) {
        attributes(this.spinDown, {
          "title": this.l10n.getConstant("decrementTitle"),
          "aria-label": this.l10n.getConstant("decrementTitle")
        });
      }
      if (!isNullOrUndefined(this.spinUp)) {
        attributes(this.spinUp, {
          "title": this.l10n.getConstant("incrementTitle"),
          "aria-label": this.l10n.getConstant("incrementTitle")
        });
      }
    };
    NumericTextBox2.prototype.wireEvents = function() {
      EventHandler.add(this.element, "focus", this.focusHandler, this);
      EventHandler.add(this.element, "blur", this.focusOutHandler, this);
      EventHandler.add(this.element, "keydown", this.keyDownHandler, this);
      EventHandler.add(this.element, "keyup", this.keyUpHandler, this);
      EventHandler.add(this.element, "input", this.inputHandler, this);
      EventHandler.add(this.element, "keypress", this.keyPressHandler, this);
      EventHandler.add(this.element, "change", this.changeHandler, this);
      EventHandler.add(this.element, "paste", this.pasteHandler, this);
      if (this.enabled) {
        this.bindClearEvent();
        if (this.formEle) {
          EventHandler.add(this.formEle, "reset", this.resetFormHandler, this);
        }
      }
    };
    NumericTextBox2.prototype.wireSpinBtnEvents = function() {
      EventHandler.add(this.spinUp, Browser.touchStartEvent, this.mouseDownOnSpinner, this);
      EventHandler.add(this.spinDown, Browser.touchStartEvent, this.mouseDownOnSpinner, this);
      EventHandler.add(this.spinUp, Browser.touchEndEvent, this.mouseUpOnSpinner, this);
      EventHandler.add(this.spinDown, Browser.touchEndEvent, this.mouseUpOnSpinner, this);
      EventHandler.add(this.spinUp, Browser.touchMoveEvent, this.touchMoveOnSpinner, this);
      EventHandler.add(this.spinDown, Browser.touchMoveEvent, this.touchMoveOnSpinner, this);
    };
    NumericTextBox2.prototype.unwireEvents = function() {
      EventHandler.remove(this.element, "focus", this.focusHandler);
      EventHandler.remove(this.element, "blur", this.focusOutHandler);
      EventHandler.remove(this.element, "keyup", this.keyUpHandler);
      EventHandler.remove(this.element, "input", this.inputHandler);
      EventHandler.remove(this.element, "keydown", this.keyDownHandler);
      EventHandler.remove(this.element, "keypress", this.keyPressHandler);
      EventHandler.remove(this.element, "change", this.changeHandler);
      EventHandler.remove(this.element, "paste", this.pasteHandler);
      if (this.formEle) {
        EventHandler.remove(this.formEle, "reset", this.resetFormHandler);
      }
    };
    NumericTextBox2.prototype.unwireSpinBtnEvents = function() {
      EventHandler.remove(this.spinUp, Browser.touchStartEvent, this.mouseDownOnSpinner);
      EventHandler.remove(this.spinDown, Browser.touchStartEvent, this.mouseDownOnSpinner);
      EventHandler.remove(this.spinUp, Browser.touchEndEvent, this.mouseUpOnSpinner);
      EventHandler.remove(this.spinDown, Browser.touchEndEvent, this.mouseUpOnSpinner);
      EventHandler.remove(this.spinUp, Browser.touchMoveEvent, this.touchMoveOnSpinner);
      EventHandler.remove(this.spinDown, Browser.touchMoveEvent, this.touchMoveOnSpinner);
    };
    NumericTextBox2.prototype.changeHandler = function(event) {
      event.stopPropagation();
      if (!this.element.value.length) {
        this.setProperties({ value: null }, true);
      }
      var parsedInput = this.instance.getNumberParser({ format: "n" })(this.element.value);
      this.updateValue(parsedInput, event);
    };
    NumericTextBox2.prototype.raiseChangeEvent = function(event) {
      if (this.prevValue !== this.value) {
        var eventArgs = {};
        this.changeEventArgs = {
          value: this.value,
          previousValue: this.prevValue,
          isInteracted: this.isInteract,
          isInteraction: this.isInteract,
          event
        };
        if (event) {
          this.changeEventArgs.event = event;
        }
        if (this.changeEventArgs.event === void 0) {
          this.changeEventArgs.isInteracted = false;
          this.changeEventArgs.isInteraction = false;
        }
        merge(eventArgs, this.changeEventArgs);
        this.prevValue = this.value;
        this.isInteract = false;
        this.elementPrevValue = this.element.value;
        this.preventChange = false;
        this.trigger("change", eventArgs);
      }
    };
    NumericTextBox2.prototype.pasteHandler = function() {
      var _this = this;
      if (!this.enabled || this.readonly) {
        return;
      }
      var beforeUpdate = this.element.value;
      setTimeout(function() {
        if (!_this.numericRegex().test(_this.element.value)) {
          _this.setElementValue(beforeUpdate);
        }
      });
    };
    NumericTextBox2.prototype.preventHandler = function() {
      var _this = this;
      var iOS = !!navigator.platform && /iPad|iPhone|iPod/.test(navigator.platform);
      setTimeout(function() {
        if (_this.element.selectionStart > 0) {
          var currentPos = _this.element.selectionStart;
          var prevPos = _this.element.selectionStart - 1;
          var start = 0;
          var valArray = _this.element.value.split("");
          var numericObject = getNumericObject(_this.locale);
          var decimalSeparator = getValue("decimal", numericObject);
          var ignoreKeyCode = decimalSeparator.charCodeAt(0);
          if (_this.element.value[prevPos] === " " && _this.element.selectionStart > 0 && !iOS) {
            if (isNullOrUndefined(_this.prevVal)) {
              _this.element.value = _this.element.value.trim();
            } else if (prevPos !== 0) {
              _this.element.value = _this.prevVal;
            } else if (prevPos === 0) {
              _this.element.value = _this.element.value.trim();
            }
            _this.element.setSelectionRange(prevPos, prevPos);
          } else if (isNaN(parseFloat(_this.element.value[_this.element.selectionStart - 1])) && _this.element.value[_this.element.selectionStart - 1].charCodeAt(0) !== 45) {
            if (valArray.indexOf(_this.element.value[_this.element.selectionStart - 1]) !== valArray.lastIndexOf(_this.element.value[_this.element.selectionStart - 1]) && _this.element.value[_this.element.selectionStart - 1].charCodeAt(0) === ignoreKeyCode || _this.element.value[_this.element.selectionStart - 1].charCodeAt(0) !== ignoreKeyCode) {
              _this.element.value = _this.element.value.substring(0, prevPos) + _this.element.value.substring(currentPos, _this.element.value.length);
              _this.element.setSelectionRange(prevPos, prevPos);
              if (isNaN(parseFloat(_this.element.value[_this.element.selectionStart - 1])) && _this.element.selectionStart > 0 && _this.element.value.length) {
                _this.preventHandler();
              }
            }
          } else if (isNaN(parseFloat(_this.element.value[_this.element.selectionStart - 2])) && _this.element.selectionStart > 1 && _this.element.value[_this.element.selectionStart - 2].charCodeAt(0) !== 45) {
            if (valArray.indexOf(_this.element.value[_this.element.selectionStart - 2]) !== valArray.lastIndexOf(_this.element.value[_this.element.selectionStart - 2]) && _this.element.value[_this.element.selectionStart - 2].charCodeAt(0) === ignoreKeyCode || _this.element.value[_this.element.selectionStart - 2].charCodeAt(0) !== ignoreKeyCode) {
              _this.element.setSelectionRange(prevPos, prevPos);
              _this.nextEle = _this.element.value[_this.element.selectionStart];
              _this.cursorPosChanged = true;
              _this.preventHandler();
            }
          }
          if (_this.cursorPosChanged === true && _this.element.value[_this.element.selectionStart] === _this.nextEle && isNaN(parseFloat(_this.element.value[_this.element.selectionStart - 1]))) {
            _this.element.setSelectionRange(_this.element.selectionStart + 1, _this.element.selectionStart + 1);
            _this.cursorPosChanged = false;
            _this.nextEle = null;
          }
          if (_this.element.value.trim() === "") {
            _this.element.setSelectionRange(start, start);
          }
          if (_this.element.selectionStart > 0) {
            if (_this.element.value[_this.element.selectionStart - 1].charCodeAt(0) === 45 && _this.element.selectionStart > 1) {
              if (isNullOrUndefined(_this.prevVal)) {
                _this.element.value = _this.element.value;
              } else {
                _this.element.value = _this.prevVal;
              }
              _this.element.setSelectionRange(_this.element.selectionStart, _this.element.selectionStart);
            }
            if (_this.element.value[_this.element.selectionStart - 1] === decimalSeparator && _this.decimals === 0 && _this.validateDecimalOnType) {
              _this.element.value = _this.element.value.substring(0, prevPos) + _this.element.value.substring(currentPos, _this.element.value.length);
            }
          }
          _this.prevVal = _this.element.value;
        }
      });
    };
    NumericTextBox2.prototype.keyUpHandler = function() {
      if (!this.enabled || this.readonly) {
        return;
      }
      var iOS = !!navigator.platform && /iPad|iPhone|iPod/.test(navigator.platform);
      if (!iOS && Browser.isDevice) {
        this.preventHandler();
      }
      var parseValue = this.instance.getNumberParser({ format: "n" })(this.element.value);
      parseValue = parseValue === null || isNaN(parseValue) ? null : parseValue;
      this.hiddenInput.value = parseValue || parseValue === 0 ? parseValue.toString() : null;
      var formElement = closest(this.element, "form");
      if (formElement) {
        var element2 = this.element.nextElementSibling;
        var keyupEvent = document.createEvent("KeyboardEvent");
        keyupEvent.initEvent("keyup", false, true);
        element2.dispatchEvent(keyupEvent);
      }
    };
    NumericTextBox2.prototype.inputHandler = function(event) {
      var numerictextboxObj = this;
      if (!this.enabled || this.readonly) {
        return;
      }
      var iOS = !!navigator.platform && /iPad|iPhone|iPod/.test(navigator.platform);
      var fireFox = navigator.userAgent.toLowerCase().indexOf("firefox") > -1;
      if ((fireFox || iOS) && Browser.isDevice) {
        this.preventHandler();
      }
      if (this.isAngular && this.element.value !== getValue("decimal", getNumericObject(this.locale)) && this.element.value !== getValue("minusSign", getNumericObject(this.locale))) {
        var parsedValue = this.instance.getNumberParser({ format: "n" })(this.element.value);
        parsedValue = isNaN(parsedValue) ? null : parsedValue;
        numerictextboxObj.localChange({ value: parsedValue });
        this.preventChange = true;
      }
      if (this.isVue) {
        var current = this.instance.getNumberParser({ format: "n" })(this.element.value);
        var previous = this.instance.getNumberParser({ format: "n" })(this.elementPrevValue);
        var nonZeroRegex = new RegExp("[^0-9]+$");
        if (nonZeroRegex.test(this.element.value) || (this.elementPrevValue.indexOf(".") !== -1 || this.elementPrevValue.indexOf("-") !== -1) && this.element.value[this.element.value.length - 1] === "0") {
          current = this.value;
        }
        var eventArgs = {
          event,
          value: current === null || isNaN(current) ? null : current,
          previousValue: previous === null || isNaN(previous) ? null : previous
        };
        this.preventChange = true;
        this.elementPrevValue = this.element.value;
        this.trigger("input", eventArgs);
      }
    };
    NumericTextBox2.prototype.keyDownHandler = function(event) {
      if (!this.readonly) {
        switch (event.keyCode) {
          case 38:
            event.preventDefault();
            this.action(INCREMENT, event);
            break;
          case 40:
            event.preventDefault();
            this.action(DECREMENT, event);
            break;
        }
      }
    };
    NumericTextBox2.prototype.performAction = function(value, step, operation) {
      if (value === null || isNaN(value)) {
        value = 0;
      }
      var updatedValue = operation === INCREMENT ? value + step : value - step;
      updatedValue = this.correctRounding(value, step, updatedValue);
      return this.strictMode ? this.trimValue(updatedValue) : updatedValue;
    };
    NumericTextBox2.prototype.correctRounding = function(value, step, result) {
      var floatExp = new RegExp("[,.](.*)");
      var floatValue = floatExp.test(value.toString());
      var floatStep = floatExp.test(step.toString());
      if (floatValue || floatStep) {
        var valueCount = floatValue ? floatExp.exec(value.toString())[0].length : 0;
        var stepCount = floatStep ? floatExp.exec(step.toString())[0].length : 0;
        var max = Math.max(valueCount, stepCount);
        return value = this.roundValue(result, max);
      }
      return result;
    };
    NumericTextBox2.prototype.roundValue = function(result, precision) {
      precision = precision || 0;
      var divide = Math.pow(10, precision);
      return result *= divide, result = Math.round(result) / divide;
    };
    NumericTextBox2.prototype.updateValue = function(value, event) {
      if (event) {
        this.isInteract = true;
      }
      if (value !== null && !isNaN(value)) {
        if (this.decimals) {
          value = this.roundNumber(value, this.decimals);
        }
      }
      this.changeValue(value === null || isNaN(value) ? null : this.strictMode ? this.trimValue(value) : value);
      if (!this.isDynamicChange) {
        this.raiseChangeEvent(event);
      }
    };
    NumericTextBox2.prototype.updateCurrency = function(prop, propVal) {
      setValue(prop, propVal, this.cultureInfo);
      this.updateValue(this.value);
    };
    NumericTextBox2.prototype.changeValue = function(value) {
      if (!(value || value === 0)) {
        value = null;
        this.setProperties({ value }, true);
      } else {
        var numberOfDecimals = this.getNumberOfDecimals(value);
        this.setProperties({ value: this.roundNumber(value, numberOfDecimals) }, true);
      }
      this.modifyText();
      if (!this.strictMode) {
        this.validateState();
      }
    };
    NumericTextBox2.prototype.modifyText = function() {
      if (this.value || this.value === 0) {
        var value = this.formatNumber();
        var elementValue = this.isFocused ? value : this.instance.getNumberFormat(this.cultureInfo)(this.value);
        this.setElementValue(elementValue);
        attributes(this.element, { "aria-valuenow": value });
        this.hiddenInput.value = this.value.toString();
        if (this.value !== null && this.serverDecimalSeparator) {
          this.hiddenInput.value = this.hiddenInput.value.replace(".", this.serverDecimalSeparator);
        }
      } else {
        this.setElementValue("");
        this.element.removeAttribute("aria-valuenow");
        this.hiddenInput.value = null;
      }
    };
    NumericTextBox2.prototype.setElementValue = function(val, element2) {
      Input.setValue(val, element2 ? element2 : this.element, this.floatLabelType, this.showClearButton);
    };
    NumericTextBox2.prototype.validateState = function() {
      this.isValidState = true;
      if (this.value || this.value === 0) {
        this.isValidState = !(this.value > this.max || this.value < this.min);
      }
      this.checkErrorClass();
    };
    NumericTextBox2.prototype.getNumberOfDecimals = function(value) {
      var numberOfDecimals;
      var EXPREGEXP = new RegExp("[eE][-+]?([0-9]+)");
      var valueString = value.toString();
      if (EXPREGEXP.test(valueString)) {
        var result = EXPREGEXP.exec(valueString);
        if (!isNullOrUndefined(result)) {
          valueString = value.toFixed(Math.min(parseInt(result[1], 10), 20));
        }
      }
      var decimalPart = valueString.split(".")[1];
      numberOfDecimals = !decimalPart || !decimalPart.length ? 0 : decimalPart.length;
      if (this.decimals !== null) {
        numberOfDecimals = numberOfDecimals < this.decimals ? numberOfDecimals : this.decimals;
      }
      return numberOfDecimals;
    };
    NumericTextBox2.prototype.formatNumber = function() {
      var numberOfDecimals = this.getNumberOfDecimals(this.value);
      return this.instance.getNumberFormat({
        maximumFractionDigits: numberOfDecimals,
        minimumFractionDigits: numberOfDecimals,
        useGrouping: false
      })(this.value);
    };
    NumericTextBox2.prototype.trimValue = function(value) {
      if (value > this.max) {
        return this.max;
      }
      if (value < this.min) {
        return this.min;
      }
      return value;
    };
    NumericTextBox2.prototype.roundNumber = function(value, precision) {
      var result = value;
      var decimals = precision || 0;
      var result1 = result.toString().split("e");
      result = Math.round(Number(result1[0] + "e" + (result1[1] ? Number(result1[1]) + decimals : decimals)));
      var result2 = result.toString().split("e");
      result = Number(result2[0] + "e" + (result2[1] ? Number(result2[1]) - decimals : -decimals));
      return Number(result.toFixed(decimals));
    };
    NumericTextBox2.prototype.cancelEvent = function(event) {
      event.preventDefault();
      return false;
    };
    NumericTextBox2.prototype.keyPressHandler = function(event) {
      if (!this.enabled || this.readonly) {
        return true;
      }
      if (!Browser.isDevice && Browser.info.version === "11.0" && event.keyCode === 13) {
        var parsedInput = this.instance.getNumberParser({ format: "n" })(this.element.value);
        this.updateValue(parsedInput, event);
        return true;
      }
      if (event.which === 0 || event.metaKey || event.ctrlKey || event.keyCode === 8 || event.keyCode === 13) {
        return true;
      }
      var currentChar = String.fromCharCode(event.which);
      var decimalSeparator = getValue("decimal", getNumericObject(this.locale));
      var isAlterNumPadDecimalChar = event.code === "NumpadDecimal" && currentChar !== decimalSeparator;
      if (isAlterNumPadDecimalChar) {
        currentChar = decimalSeparator;
      }
      var text = this.element.value;
      text = text.substring(0, this.element.selectionStart) + currentChar + text.substring(this.element.selectionEnd);
      if (!this.numericRegex().test(text)) {
        event.preventDefault();
        event.stopPropagation();
        return false;
      } else {
        if (isAlterNumPadDecimalChar) {
          var start = this.element.selectionStart + 1;
          this.element.value = text;
          this.element.setSelectionRange(start, start);
          event.preventDefault();
          event.stopPropagation();
        }
        return true;
      }
    };
    NumericTextBox2.prototype.numericRegex = function() {
      var numericObject = getNumericObject(this.locale);
      var decimalSeparator = getValue("decimal", numericObject);
      var fractionRule = "*";
      if (decimalSeparator === DECIMALSEPARATOR) {
        decimalSeparator = "\\" + decimalSeparator;
      }
      if (this.decimals === 0 && this.validateDecimalOnType) {
        return INTREGEXP;
      }
      if (this.decimals && this.validateDecimalOnType) {
        fractionRule = "{0," + this.decimals + "}";
      }
      return new RegExp("^(-)?(((\\d+(" + decimalSeparator + "\\d" + fractionRule + ")?)|(" + decimalSeparator + "\\d" + fractionRule + ")))?$");
    };
    NumericTextBox2.prototype.mouseWheel = function(event) {
      event.preventDefault();
      var delta;
      var rawEvent = event;
      if (rawEvent.wheelDelta) {
        delta = rawEvent.wheelDelta / 120;
      } else if (rawEvent.detail) {
        delta = -rawEvent.detail / 3;
      }
      if (delta > 0) {
        this.action(INCREMENT, event);
      } else if (delta < 0) {
        this.action(DECREMENT, event);
      }
      this.cancelEvent(event);
    };
    NumericTextBox2.prototype.focusHandler = function(event) {
      var _this = this;
      clearTimeout(selectionTimeOut);
      this.focusEventArgs = { event, value: this.value, container: this.container };
      this.trigger("focus", this.focusEventArgs);
      if (!this.enabled || this.readonly) {
        return;
      }
      this.isFocused = true;
      removeClass([this.container], ERROR$3);
      this.prevValue = this.value;
      if (this.value || this.value === 0) {
        var formatValue_1 = this.formatNumber();
        this.setElementValue(formatValue_1);
        if (!this.isPrevFocused) {
          if (!Browser.isDevice && Browser.info.version === "11.0") {
            this.element.setSelectionRange(0, formatValue_1.length);
          } else {
            var delay = Browser.isDevice && Browser.isIos ? 600 : 0;
            selectionTimeOut = setTimeout(function() {
              _this.element.setSelectionRange(0, formatValue_1.length);
            }, delay);
          }
        }
      }
      if (!Browser.isDevice) {
        EventHandler.add(this.element, "mousewheel DOMMouseScroll", this.mouseWheel, this);
      }
    };
    NumericTextBox2.prototype.focusOutHandler = function(event) {
      var _this = this;
      this.blurEventArgs = { event, value: this.value, container: this.container };
      this.trigger("blur", this.blurEventArgs);
      if (!this.enabled || this.readonly) {
        return;
      }
      if (this.isPrevFocused) {
        event.preventDefault();
        if (Browser.isDevice) {
          var value_1 = this.element.value;
          this.element.focus();
          this.isPrevFocused = false;
          var ele_1 = this.element;
          setTimeout(function() {
            _this.setElementValue(value_1, ele_1);
          }, 200);
        }
      } else {
        this.isFocused = false;
        if (!this.element.value.length) {
          this.setProperties({ value: null }, true);
        }
        var parsedInput = this.instance.getNumberParser({ format: "n" })(this.element.value);
        this.updateValue(parsedInput);
        if (!Browser.isDevice) {
          EventHandler.remove(this.element, "mousewheel DOMMouseScroll", this.mouseWheel);
        }
      }
      var formElement = closest(this.element, "form");
      if (formElement) {
        var element2 = this.element.nextElementSibling;
        var focusEvent = document.createEvent("FocusEvent");
        focusEvent.initEvent("focusout", false, true);
        element2.dispatchEvent(focusEvent);
      }
    };
    NumericTextBox2.prototype.mouseDownOnSpinner = function(event) {
      var _this = this;
      if (this.isFocused) {
        this.isPrevFocused = true;
        event.preventDefault();
      }
      if (!this.getElementData(event)) {
        return;
      }
      this.getElementData(event);
      var target = event.currentTarget;
      var action = target.classList.contains(SPINUP) ? INCREMENT : DECREMENT;
      EventHandler.add(target, "mouseleave", this.mouseUpClick, this);
      this.timeOut = setInterval(function() {
        _this.isCalled = true;
        _this.action(action, event);
      }, 150);
      EventHandler.add(document, "mouseup", this.mouseUpClick, this);
    };
    NumericTextBox2.prototype.touchMoveOnSpinner = function(event) {
      var target;
      if (event.type === "touchmove") {
        var touchEvent = event.touches;
        target = touchEvent.length && document.elementFromPoint(touchEvent[0].pageX, touchEvent[0].pageY);
      } else {
        target = document.elementFromPoint(event.clientX, event.clientY);
      }
      if (!target.classList.contains(SPINICON)) {
        clearInterval(this.timeOut);
      }
    };
    NumericTextBox2.prototype.mouseUpOnSpinner = function(event) {
      this.prevValue = this.value;
      if (this.isPrevFocused) {
        this.element.focus();
        if (!Browser.isDevice) {
          this.isPrevFocused = false;
        }
      }
      if (!Browser.isDevice) {
        event.preventDefault();
      }
      if (!this.getElementData(event)) {
        return;
      }
      var target = event.currentTarget;
      var action = target.classList.contains(SPINUP) ? INCREMENT : DECREMENT;
      EventHandler.remove(target, "mouseleave", this.mouseUpClick);
      if (!this.isCalled) {
        this.action(action, event);
      }
      this.isCalled = false;
      EventHandler.remove(document, "mouseup", this.mouseUpClick);
      var formElement = closest(this.element, "form");
      if (formElement) {
        var element2 = this.element.nextElementSibling;
        var keyupEvent = document.createEvent("KeyboardEvent");
        keyupEvent.initEvent("keyup", false, true);
        element2.dispatchEvent(keyupEvent);
      }
    };
    NumericTextBox2.prototype.getElementData = function(event) {
      if (event.which && event.which === 3 || event.button && event.button === 2 || !this.enabled || this.readonly) {
        return false;
      }
      clearInterval(this.timeOut);
      return true;
    };
    NumericTextBox2.prototype.floatLabelTypeUpdate = function() {
      Input.removeFloating(this.inputWrapper);
      var hiddenInput = this.hiddenInput;
      this.hiddenInput.remove();
      Input.addFloating(this.element, this.floatLabelType, this.placeholder, this.createElement);
      this.container.insertBefore(hiddenInput, this.container.childNodes[1]);
    };
    NumericTextBox2.prototype.mouseUpClick = function(event) {
      event.stopPropagation();
      clearInterval(this.timeOut);
      this.isCalled = false;
      EventHandler.remove(this.spinUp, "mouseleave", this.mouseUpClick);
      EventHandler.remove(this.spinDown, "mouseleave", this.mouseUpClick);
    };
    NumericTextBox2.prototype.increment = function(step) {
      if (step === void 0) {
        step = this.step;
      }
      this.isInteract = false;
      this.changeValue(this.performAction(this.value, step, INCREMENT));
      this.raiseChangeEvent();
    };
    NumericTextBox2.prototype.decrement = function(step) {
      if (step === void 0) {
        step = this.step;
      }
      this.isInteract = false;
      this.changeValue(this.performAction(this.value, step, DECREMENT));
      this.raiseChangeEvent();
    };
    NumericTextBox2.prototype.destroy = function() {
      this.unwireEvents();
      detach(this.hiddenInput);
      if (this.showSpinButton) {
        this.unwireSpinBtnEvents();
        detach(this.spinUp);
        detach(this.spinDown);
      }
      var attrArray = [
        "aria-labelledby",
        "role",
        "autocomplete",
        "aria-readonly",
        "aria-disabled",
        "autocapitalize",
        "spellcheck",
        "aria-autocomplete",
        "tabindex",
        "aria-valuemin",
        "aria-valuemax",
        "aria-valuenow",
        "aria-invalid"
      ];
      for (var i = 0; i < attrArray.length; i++) {
        this.element.removeAttribute(attrArray[i]);
      }
      this.element.classList.remove("e-input");
      this.container.insertAdjacentElement("afterend", this.element);
      detach(this.container);
      this.spinUp = null;
      this.spinDown = null;
      this.container = null;
      this.hiddenInput = null;
      this.changeEventArgs = null;
      this.blurEventArgs = null;
      this.focusEventArgs = null;
      this.inputWrapper = null;
      Input.destroy();
      _super.prototype.destroy.call(this);
    };
    NumericTextBox2.prototype.getText = function() {
      return this.element.value;
    };
    NumericTextBox2.prototype.focusIn = function() {
      if (document.activeElement !== this.element && this.enabled) {
        this.element.focus();
        addClass([this.container], [NUMERIC_FOCUS]);
      }
    };
    NumericTextBox2.prototype.focusOut = function() {
      if (document.activeElement === this.element && this.enabled) {
        this.element.blur();
        removeClass([this.container], [NUMERIC_FOCUS]);
      }
    };
    NumericTextBox2.prototype.getPersistData = function() {
      var keyEntity = ["value"];
      return this.addOnPersist(keyEntity);
    };
    NumericTextBox2.prototype.onPropertyChanged = function(newProp, oldProp) {
      for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {
        var prop = _a[_i];
        switch (prop) {
          case "width":
            this.setElementWidth(newProp.width);
            Input.calculateWidth(this.element, this.container);
            break;
          case "cssClass":
            this.updateCssClass(newProp.cssClass, oldProp.cssClass);
            break;
          case "enabled":
            Input.setEnabled(newProp.enabled, this.element);
            this.bindClearEvent();
            break;
          case "enableRtl":
            Input.setEnableRtl(newProp.enableRtl, [this.container]);
            break;
          case "readonly":
            Input.setReadonly(newProp.readonly, this.element);
            if (this.readonly) {
              attributes(this.element, { "aria-readonly": "true" });
            } else {
              this.element.removeAttribute("aria-readonly");
            }
            break;
          case "htmlAttributes":
            this.updateHTMLAttrToElement();
            this.updateHTMLAttrToWrapper();
            this.updateDataAttribute(true);
            this.checkAttributes(true);
            Input.validateInputType(this.container, this.element);
            break;
          case "placeholder":
            Input.setPlaceholder(newProp.placeholder, this.element);
            Input.calculateWidth(this.element, this.container);
            break;
          case "step":
            this.step = newProp.step;
            this.validateStep();
            break;
          case "showSpinButton":
            this.updateSpinButton(newProp);
            break;
          case "showClearButton":
            this.updateClearButton(newProp);
            break;
          case "floatLabelType":
            this.floatLabelType = newProp.floatLabelType;
            this.floatLabelTypeUpdate();
            break;
          case "value":
            this.isDynamicChange = (this.isAngular || this.isVue) && this.preventChange;
            this.updateValue(newProp.value);
            if (this.isDynamicChange) {
              this.preventChange = false;
              this.isDynamicChange = false;
            }
            break;
          case "min":
          case "max":
            setValue(prop, getValue(prop, newProp), this);
            this.validateMinMax();
            this.updateValue(this.value);
            break;
          case "strictMode":
            this.strictMode = newProp.strictMode;
            this.updateValue(this.value);
            this.validateState();
            break;
          case "locale":
            this.initCultureFunc();
            this.l10n.setLocale(this.locale);
            this.setSpinButton();
            this.updatePlaceholder();
            Input.setPlaceholder(this.placeholder, this.element);
            this.updateValue(this.value);
            break;
          case "currency":
            {
              var propVal = getValue(prop, newProp);
              this.setProperties({ currencyCode: propVal }, true);
              this.updateCurrency(prop, propVal);
            }
            break;
          case "currencyCode":
            {
              var propValue = getValue(prop, newProp);
              this.setProperties({ currency: propValue }, true);
              this.updateCurrency("currency", propValue);
            }
            break;
          case "format":
            setValue(prop, getValue(prop, newProp), this);
            this.initCultureInfo();
            this.updateValue(this.value);
            break;
          case "decimals":
            this.decimals = newProp.decimals;
            this.updateValue(this.value);
        }
      }
    };
    NumericTextBox2.prototype.updateClearButton = function(newProp) {
      Input.setClearButton(newProp.showClearButton, this.element, this.inputWrapper, void 0, this.createElement);
      this.bindClearEvent();
    };
    NumericTextBox2.prototype.updateSpinButton = function(newProp) {
      if (newProp.showSpinButton) {
        this.spinBtnCreation();
      } else {
        detach(this.spinUp);
        detach(this.spinDown);
      }
    };
    NumericTextBox2.prototype.getModuleName = function() {
      return "numerictextbox";
    };
    __decorate$w([
      Property("")
    ], NumericTextBox2.prototype, "cssClass", void 0);
    __decorate$w([
      Property(null)
    ], NumericTextBox2.prototype, "value", void 0);
    __decorate$w([
      Property(-Number.MAX_VALUE)
    ], NumericTextBox2.prototype, "min", void 0);
    __decorate$w([
      Property(Number.MAX_VALUE)
    ], NumericTextBox2.prototype, "max", void 0);
    __decorate$w([
      Property(1)
    ], NumericTextBox2.prototype, "step", void 0);
    __decorate$w([
      Property(null)
    ], NumericTextBox2.prototype, "width", void 0);
    __decorate$w([
      Property(null)
    ], NumericTextBox2.prototype, "placeholder", void 0);
    __decorate$w([
      Property({})
    ], NumericTextBox2.prototype, "htmlAttributes", void 0);
    __decorate$w([
      Property(true)
    ], NumericTextBox2.prototype, "showSpinButton", void 0);
    __decorate$w([
      Property(false)
    ], NumericTextBox2.prototype, "readonly", void 0);
    __decorate$w([
      Property(true)
    ], NumericTextBox2.prototype, "enabled", void 0);
    __decorate$w([
      Property(false)
    ], NumericTextBox2.prototype, "showClearButton", void 0);
    __decorate$w([
      Property(false)
    ], NumericTextBox2.prototype, "enablePersistence", void 0);
    __decorate$w([
      Property("n2")
    ], NumericTextBox2.prototype, "format", void 0);
    __decorate$w([
      Property(null)
    ], NumericTextBox2.prototype, "decimals", void 0);
    __decorate$w([
      Property(null)
    ], NumericTextBox2.prototype, "currency", void 0);
    __decorate$w([
      Property(null)
    ], NumericTextBox2.prototype, "currencyCode", void 0);
    __decorate$w([
      Property(true)
    ], NumericTextBox2.prototype, "strictMode", void 0);
    __decorate$w([
      Property(false)
    ], NumericTextBox2.prototype, "validateDecimalOnType", void 0);
    __decorate$w([
      Property("Never")
    ], NumericTextBox2.prototype, "floatLabelType", void 0);
    __decorate$w([
      Event$1()
    ], NumericTextBox2.prototype, "created", void 0);
    __decorate$w([
      Event$1()
    ], NumericTextBox2.prototype, "destroyed", void 0);
    __decorate$w([
      Event$1()
    ], NumericTextBox2.prototype, "change", void 0);
    __decorate$w([
      Event$1()
    ], NumericTextBox2.prototype, "focus", void 0);
    __decorate$w([
      Event$1()
    ], NumericTextBox2.prototype, "blur", void 0);
    NumericTextBox2 = __decorate$w([
      NotifyPropertyChanges
    ], NumericTextBox2);
    return NumericTextBox2;
  }(Component)
);
var __extends$G = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$v = globalThis && globalThis.__decorate || function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i = decorators.length - 1; i >= 0; i--)
      if (d = decorators[i])
        r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var TicksData = (
  /** @class */
  function(_super) {
    __extends$G(TicksData2, _super);
    function TicksData2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$v([
      Property("None")
    ], TicksData2.prototype, "placement", void 0);
    __decorate$v([
      Property(10)
    ], TicksData2.prototype, "largeStep", void 0);
    __decorate$v([
      Property(1)
    ], TicksData2.prototype, "smallStep", void 0);
    __decorate$v([
      Property(false)
    ], TicksData2.prototype, "showSmallTicks", void 0);
    __decorate$v([
      Property(null)
    ], TicksData2.prototype, "format", void 0);
    return TicksData2;
  }(ChildProperty)
);
var ColorRangeData = (
  /** @class */
  function(_super) {
    __extends$G(ColorRangeData2, _super);
    function ColorRangeData2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$v([
      Property(null)
    ], ColorRangeData2.prototype, "color", void 0);
    __decorate$v([
      Property(null)
    ], ColorRangeData2.prototype, "start", void 0);
    __decorate$v([
      Property(null)
    ], ColorRangeData2.prototype, "end", void 0);
    return ColorRangeData2;
  }(ChildProperty)
);
var LimitData = (
  /** @class */
  function(_super) {
    __extends$G(LimitData2, _super);
    function LimitData2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$v([
      Property(false)
    ], LimitData2.prototype, "enabled", void 0);
    __decorate$v([
      Property(null)
    ], LimitData2.prototype, "minStart", void 0);
    __decorate$v([
      Property(null)
    ], LimitData2.prototype, "minEnd", void 0);
    __decorate$v([
      Property(null)
    ], LimitData2.prototype, "maxStart", void 0);
    __decorate$v([
      Property(null)
    ], LimitData2.prototype, "maxEnd", void 0);
    __decorate$v([
      Property(false)
    ], LimitData2.prototype, "startHandleFixed", void 0);
    __decorate$v([
      Property(false)
    ], LimitData2.prototype, "endHandleFixed", void 0);
    return LimitData2;
  }(ChildProperty)
);
var TooltipData = (
  /** @class */
  function(_super) {
    __extends$G(TooltipData2, _super);
    function TooltipData2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$v([
      Property("")
    ], TooltipData2.prototype, "cssClass", void 0);
    __decorate$v([
      Property("Before")
    ], TooltipData2.prototype, "placement", void 0);
    __decorate$v([
      Property("Focus")
    ], TooltipData2.prototype, "showOn", void 0);
    __decorate$v([
      Property(false)
    ], TooltipData2.prototype, "isVisible", void 0);
    __decorate$v([
      Property(null)
    ], TooltipData2.prototype, "format", void 0);
    return TooltipData2;
  }(ChildProperty)
);
var bootstrapTooltipOffset = 6;
var bootstrap4TooltipOffset = 3;
var classNames$1 = {
  root: "e-slider",
  rtl: "e-rtl",
  sliderHiddenInput: "e-slider-input",
  controlWrapper: "e-control-wrapper",
  sliderHandle: "e-handle",
  rangeBar: "e-range",
  sliderButton: "e-slider-button",
  firstButton: "e-first-button",
  secondButton: "e-second-button",
  scale: "e-scale",
  tick: "e-tick",
  large: "e-large",
  tickValue: "e-tick-value",
  sliderTooltip: "e-slider-tooltip",
  sliderHover: "e-slider-hover",
  sliderFirstHandle: "e-handle-first",
  sliderSecondHandle: "e-handle-second",
  sliderDisabled: "e-disabled",
  sliderContainer: "e-slider-container",
  horizontalTooltipBefore: "e-slider-horizontal-before",
  horizontalTooltipAfter: "e-slider-horizontal-after",
  verticalTooltipBefore: "e-slider-vertical-before",
  verticalTooltipAfter: "e-slider-vertical-after",
  materialTooltip: "e-material-tooltip",
  materialTooltipOpen: "e-material-tooltip-open",
  materialTooltipActive: "e-tooltip-active",
  materialSlider: "e-material-slider",
  sliderTrack: "e-slider-track",
  sliderHorizantalColor: "e-slider-horizantal-color",
  sliderVerticalColor: "e-slider-vertical-color",
  sliderHandleFocused: "e-handle-focused",
  verticalSlider: "e-vertical",
  horizontalSlider: "e-horizontal",
  sliderHandleStart: "e-handle-start",
  sliderTooltipStart: "e-material-tooltip-start",
  sliderTabHandle: "e-tab-handle",
  sliderButtonIcon: "e-button-icon",
  sliderSmallSize: "e-small-size",
  sliderTickPosition: "e-tick-pos",
  sliderFirstTick: "e-first-tick",
  sliderLastTick: "e-last-tick",
  sliderButtonClass: "e-slider-btn",
  sliderTooltipWrapper: "e-tooltip-wrap",
  sliderTabTrack: "e-tab-track",
  sliderTabRange: "e-tab-range",
  sliderActiveHandle: "e-handle-active",
  sliderMaterialHandle: "e-material-handle",
  sliderMaterialRange: "e-material-range",
  sliderMaterialDefault: "e-material-default",
  materialTooltipShow: "e-material-tooltip-show",
  materialTooltipHide: "e-material-tooltip-hide",
  readonly: "e-read-only",
  limits: "e-limits",
  limitBarDefault: "e-limit-bar",
  limitBarFirst: "e-limit-first",
  limitBarSecond: "e-limit-second",
  dragHorizontal: "e-drag-horizontal",
  dragVertical: "e-drag-vertical"
};
var Slider = (
  /** @class */
  function(_super) {
    __extends$G(Slider2, _super);
    function Slider2(options, element2) {
      var _this = _super.call(this, options, element2) || this;
      _this.horDir = "left";
      _this.verDir = "bottom";
      _this.transition = {
        handle: "left .4s cubic-bezier(.25, .8, .25, 1), right .4s cubic-bezier(.25, .8, .25, 1), top .4s cubic-bezier(.25, .8, .25, 1) , bottom .4s cubic-bezier(.25, .8, .25, 1)",
        rangeBar: "all .4s cubic-bezier(.25, .8, .25, 1)"
      };
      _this.transitionOnMaterialTooltip = {
        handle: "left 1ms ease-out, right 1ms ease-out, bottom 1ms ease-out, top 1ms ease-out",
        rangeBar: "left 1ms ease-out, right 1ms ease-out, bottom 1ms ease-out, width 1ms ease-out, height 1ms ease-out"
      };
      _this.scaleTransform = "transform .4s cubic-bezier(.25, .8, .25, 1)";
      _this.customAriaText = null;
      _this.drag = true;
      _this.isDragComplete = false;
      _this.initialTooltip = true;
      return _this;
    }
    Slider2.prototype.preRender = function() {
      var localeText = { incrementTitle: "Increase", decrementTitle: "Decrease" };
      this.l10n = new L10n("slider", localeText, this.locale);
      this.isElementFocused = false;
      this.tickElementCollection = [];
      this.tooltipFormatInfo = {};
      this.ticksFormatInfo = {};
      this.initCultureInfo();
      this.initCultureFunc();
      this.formChecker();
    };
    Slider2.prototype.formChecker = function() {
      var formElement = closest(this.element, "form");
      if (formElement) {
        this.isForm = true;
        if (!isNullOrUndefined(this.formResetValue)) {
          this.setProperties({ "value": this.formResetValue }, true);
        }
        this.formResetValue = this.value;
        if (this.type === "Range" && (isNullOrUndefined(this.formResetValue) || typeof this.formResetValue !== "object")) {
          this.formResetValue = [parseFloat(formatUnit(this.min)), parseFloat(formatUnit(this.max))];
        } else if (isNullOrUndefined(this.formResetValue)) {
          this.formResetValue = parseFloat(formatUnit(this.min));
        }
        this.formElement = formElement;
      } else {
        this.isForm = false;
      }
    };
    Slider2.prototype.initCultureFunc = function() {
      this.internationalization = new Internationalization(this.locale);
    };
    Slider2.prototype.initCultureInfo = function() {
      this.tooltipFormatInfo.format = !isNullOrUndefined(this.tooltip.format) ? this.tooltip.format : null;
      this.ticksFormatInfo.format = !isNullOrUndefined(this.ticks.format) ? this.ticks.format : null;
    };
    Slider2.prototype.formatString = function(value, formatInfo) {
      var formatValue = null;
      var formatString = null;
      if (value || value === 0) {
        formatValue = this.formatNumber(value);
        var numberOfDecimals = this.numberOfDecimals(value);
        formatString = this.internationalization.getNumberFormat(formatInfo)(this.makeRoundNumber(value, numberOfDecimals));
      }
      return { elementVal: formatValue, formatString };
    };
    Slider2.prototype.formatNumber = function(value) {
      var numberOfDecimals = this.numberOfDecimals(value);
      return this.internationalization.getNumberFormat({
        maximumFractionDigits: numberOfDecimals,
        minimumFractionDigits: numberOfDecimals,
        useGrouping: false
      })(value);
    };
    Slider2.prototype.numberOfDecimals = function(value) {
      var decimalPart = value.toString().split(".")[1];
      var numberOfDecimals = !decimalPart || !decimalPart.length ? 0 : decimalPart.length;
      return numberOfDecimals;
    };
    Slider2.prototype.makeRoundNumber = function(value, precision) {
      var decimals = precision || 0;
      return Number(value.toFixed(decimals));
    };
    Slider2.prototype.fractionalToInteger = function(value) {
      value = this.numberOfDecimals(value) === 0 ? Number(value).toFixed(this.noOfDecimals) : value;
      var tens = 1;
      for (var i = 0; i < this.noOfDecimals; i++) {
        tens *= 10;
      }
      value = Number((value * tens).toFixed(0));
      return value;
    };
    Slider2.prototype.render = function() {
      var _this = this;
      this.initialize();
      this.initRender();
      this.wireEvents();
      this.setZindex();
      this.renderComplete();
      if (this.element.tagName === "EJS-SLIDER") {
        if (this.getTheme(this.sliderContainer) == "none") {
          setTimeout(function() {
            _this.refresh();
          }, 0);
        }
      }
    };
    Slider2.prototype.initialize = function() {
      addClass([this.element], classNames$1.root);
      this.setCSSClass();
    };
    Slider2.prototype.setElementWidth = function(width) {
      if (!isNullOrUndefined(width)) {
        if (typeof width === "number") {
          this.sliderContainer.style.width = formatUnit(width);
        } else if (typeof width === "string") {
          this.sliderContainer.style.width = width.match(/px|%|em/) ? width : formatUnit(width);
        }
      }
    };
    Slider2.prototype.setCSSClass = function(oldCSSClass) {
      if (oldCSSClass) {
        removeClass([this.element], oldCSSClass.split(" "));
      }
      if (this.cssClass) {
        addClass([this.element], this.cssClass.split(" "));
      }
    };
    Slider2.prototype.setEnabled = function() {
      if (!this.enabled) {
        addClass([this.sliderContainer], [classNames$1.sliderDisabled]);
        if (this.tooltip.isVisible && this.tooltipElement && this.tooltip.showOn === "Always") {
          this.tooltipElement.classList.add(classNames$1.sliderDisabled);
        }
        this.unwireEvents();
      } else {
        removeClass([this.sliderContainer], [classNames$1.sliderDisabled]);
        if (this.tooltip.isVisible && this.tooltipElement && this.tooltip.showOn === "Always") {
          this.tooltipElement.classList.remove(classNames$1.sliderDisabled);
        }
        this.wireEvents();
      }
    };
    Slider2.prototype.getTheme = function(container) {
      var theme = window.getComputedStyle(container, ":after").getPropertyValue("content");
      return theme.replace(/['"]+/g, "");
    };
    Slider2.prototype.initRender = function() {
      this.sliderContainer = this.createElement("div", { className: classNames$1.sliderContainer + " " + classNames$1.controlWrapper });
      this.element.parentNode.insertBefore(this.sliderContainer, this.element);
      this.sliderContainer.appendChild(this.element);
      this.sliderTrack = this.createElement("div", { className: classNames$1.sliderTrack });
      this.element.appendChild(this.sliderTrack);
      this.setElementWidth(this.width);
      this.element.tabIndex = -1;
      this.getThemeInitialization();
      this.setHandler();
      this.createRangeBar();
      if (this.limits.enabled) {
        this.createLimitBar();
      }
      this.setOrientClass();
      this.hiddenInput = this.createElement("input", {
        attrs: {
          type: "hidden",
          value: isNullOrUndefined(this.value) ? this.min.toString() : this.value.toString(),
          name: this.element.getAttribute("name") || this.element.getAttribute("id") || "_" + (Math.random() * 1e3).toFixed(0) + "slider",
          class: classNames$1.sliderHiddenInput
        }
      });
      this.hiddenInput.tabIndex = -1;
      this.sliderContainer.appendChild(this.hiddenInput);
      if (this.showButtons) {
        this.setButtons();
      }
      this.setEnableRTL();
      if (this.type === "Range") {
        this.rangeValueUpdate();
      } else {
        this.value = isNullOrUndefined(this.value) ? parseFloat(formatUnit(this.min.toString())) : this.value;
      }
      this.previousVal = this.type !== "Range" ? this.checkHandleValue(parseFloat(formatUnit(this.value.toString()))) : [
        this.checkHandleValue(parseFloat(formatUnit(this.value[0].toString()))),
        this.checkHandleValue(parseFloat(formatUnit(this.value[1].toString())))
      ];
      this.previousChanged = this.previousVal;
      if (!isNullOrUndefined(this.element.hasAttribute("name"))) {
        this.element.removeAttribute("name");
      }
      this.setValue();
      if (this.limits.enabled) {
        this.setLimitBar();
      }
      if (this.ticks.placement !== "None") {
        this.renderScale();
      }
      if (this.tooltip.isVisible) {
        this.renderTooltip();
      }
      if (!this.enabled) {
        addClass([this.sliderContainer], [classNames$1.sliderDisabled]);
      } else {
        removeClass([this.sliderContainer], [classNames$1.sliderDisabled]);
      }
      if (this.readonly) {
        addClass([this.sliderContainer], [classNames$1.readonly]);
      } else {
        removeClass([this.sliderContainer], [classNames$1.readonly]);
      }
    };
    Slider2.prototype.getThemeInitialization = function() {
      this.isMaterial = this.getTheme(this.sliderContainer) === "material" || this.getTheme(this.sliderContainer) === "material-dark";
      this.isBootstrap = this.getTheme(this.sliderContainer) === "bootstrap" || this.getTheme(this.sliderContainer) === "bootstrap-dark";
      this.isBootstrap4 = this.getTheme(this.sliderContainer) === "bootstrap4";
      this.isTailwind = this.getTheme(this.sliderContainer) === "tailwind" || this.getTheme(this.sliderContainer) === "tailwind-dark";
      this.isBootstrap5 = this.getTheme(this.sliderContainer) === "bootstrap5";
      this.isFluent = this.getTheme(this.sliderContainer) === "FluentUI";
      this.isMaterialTooltip = this.isMaterial && this.type !== "Range" && this.tooltip.isVisible;
    };
    Slider2.prototype.createRangeBar = function() {
      if (this.type !== "Default") {
        this.rangeBar = this.createElement("div", { attrs: { class: classNames$1.rangeBar } });
        this.element.appendChild(this.rangeBar);
        if (this.drag && this.type === "Range") {
          if (this.orientation === "Horizontal") {
            this.rangeBar.classList.add(classNames$1.dragHorizontal);
          } else {
            this.rangeBar.classList.add(classNames$1.dragVertical);
          }
        }
      }
    };
    Slider2.prototype.createLimitBar = function() {
      var firstElementClassName = this.type !== "Range" ? classNames$1.limitBarDefault : classNames$1.limitBarFirst;
      firstElementClassName += " " + classNames$1.limits;
      this.limitBarFirst = this.createElement("div", {
        attrs: { class: firstElementClassName }
      });
      this.element.appendChild(this.limitBarFirst);
      if (this.type === "Range") {
        this.limitBarSecond = this.createElement("div", {
          attrs: {
            class: classNames$1.limitBarSecond + " " + classNames$1.limits
          }
        });
        this.element.appendChild(this.limitBarSecond);
      }
    };
    Slider2.prototype.setOrientClass = function() {
      if (this.orientation !== "Vertical") {
        this.sliderContainer.classList.remove(classNames$1.verticalSlider);
        this.sliderContainer.classList.add(classNames$1.horizontalSlider);
        this.firstHandle.setAttribute("aria-orientation", "horizontal");
        if (this.type === "Range") {
          this.secondHandle.setAttribute("aria-orientation", "horizontal");
        }
      } else {
        this.sliderContainer.classList.remove(classNames$1.horizontalSlider);
        this.sliderContainer.classList.add(classNames$1.verticalSlider);
        this.firstHandle.setAttribute("aria-orientation", "vertical");
        if (this.type === "Range") {
          this.secondHandle.setAttribute("aria-orientation", "vertical");
        }
      }
    };
    Slider2.prototype.setAriaAttributes = function(element2) {
      var _this = this;
      var min = this.min;
      var max = this.max;
      if (!isNullOrUndefined(this.customValues) && this.customValues.length > 0) {
        min = this.customValues[0];
        max = this.customValues[this.customValues.length - 1];
      }
      if (this.type !== "Range") {
        attributes(element2, {
          "aria-valuemin": min.toString(),
          "aria-valuemax": max.toString()
        });
      } else {
        var range = !isNullOrUndefined(this.customValues) && this.customValues.length > 0 ? [
          [min.toString(), this.customValues[this.value[1]].toString()],
          [this.customValues[this.value[0]].toString(), max.toString()]
        ] : [[min.toString(), this.value[1].toString()], [this.value[0].toString(), max.toString()]];
        range.forEach(function(range2, index) {
          var element3 = index === 0 ? _this.firstHandle : _this.secondHandle;
          if (element3) {
            attributes(element3, {
              "aria-valuemin": range2[0],
              "aria-valuemax": range2[1]
            });
          }
        });
      }
    };
    Slider2.prototype.createSecondHandle = function() {
      this.secondHandle = this.createElement("div", {
        attrs: {
          class: classNames$1.sliderHandle,
          "role": "slider",
          tabIndex: "0",
          "aria-label": "slider"
        }
      });
      this.secondHandle.classList.add(classNames$1.sliderSecondHandle);
      this.element.appendChild(this.secondHandle);
    };
    Slider2.prototype.createFirstHandle = function() {
      this.firstHandle = this.createElement("div", {
        attrs: {
          class: classNames$1.sliderHandle,
          "role": "slider",
          tabIndex: "0",
          "aria-label": "slider"
        }
      });
      this.firstHandle.classList.add(classNames$1.sliderFirstHandle);
      this.element.appendChild(this.firstHandle);
      if (this.isMaterialTooltip) {
        this.materialHandle = this.createElement("div", {
          attrs: {
            class: classNames$1.sliderHandle + " " + classNames$1.sliderMaterialHandle
          }
        });
        this.element.appendChild(this.materialHandle);
      }
    };
    Slider2.prototype.wireFirstHandleEvt = function(destroy2) {
      if (!destroy2) {
        EventHandler.add(this.firstHandle, "mousedown touchstart", this.handleFocus, this);
        EventHandler.add(this.firstHandle, "transitionend", this.transitionEnd, this);
        EventHandler.add(this.firstHandle, "mouseenter touchenter", this.handleOver, this);
        EventHandler.add(this.firstHandle, "mouseleave touchend", this.handleLeave, this);
      } else {
        EventHandler.remove(this.firstHandle, "mousedown touchstart", this.handleFocus);
        EventHandler.remove(this.firstHandle, "transitionend", this.transitionEnd);
        EventHandler.remove(this.firstHandle, "mouseenter touchenter", this.handleOver);
        EventHandler.remove(this.firstHandle, "mouseleave touchend", this.handleLeave);
      }
    };
    Slider2.prototype.wireSecondHandleEvt = function(destroy2) {
      if (!destroy2) {
        EventHandler.add(this.secondHandle, "mousedown touchstart", this.handleFocus, this);
        EventHandler.add(this.secondHandle, "transitionend", this.transitionEnd, this);
        EventHandler.add(this.secondHandle, "mouseenter touchenter", this.handleOver, this);
        EventHandler.add(this.secondHandle, "mouseleave touchend", this.handleLeave, this);
      } else {
        EventHandler.remove(this.secondHandle, "mousedown touchstart", this.handleFocus);
        EventHandler.remove(this.secondHandle, "transitionend", this.transitionEnd);
        EventHandler.remove(this.secondHandle, "mouseenter touchenter", this.handleOver);
        EventHandler.remove(this.secondHandle, "mouseleave touchend", this.handleLeave);
      }
    };
    Slider2.prototype.handleStart = function() {
      if (this.type !== "Range") {
        this.firstHandle.classList[this.handlePos1 === 0 ? "add" : "remove"](classNames$1.sliderHandleStart);
        if (this.isMaterialTooltip) {
          this.materialHandle.classList[this.handlePos1 === 0 ? "add" : "remove"](classNames$1.sliderHandleStart);
          if (this.tooltipElement) {
            this.tooltipElement.classList[this.handlePos1 === 0 ? "add" : "remove"](classNames$1.sliderTooltipStart);
          }
        }
      }
    };
    Slider2.prototype.transitionEnd = function(e) {
      if (e.propertyName !== "transform") {
        this.handleStart();
        if (!this.enableAnimation) {
          this.getHandle().style.transition = "none";
        }
        if (this.type !== "Default") {
          this.rangeBar.style.transition = "none";
        }
        if (this.isMaterial && this.tooltip.isVisible && this.type === "Default") {
          this.tooltipElement.style.transition = this.transition.handle;
        }
        this.tooltipToggle(this.getHandle());
        this.closeTooltip();
      }
    };
    Slider2.prototype.handleFocusOut = function() {
      if (this.firstHandle.classList.contains(classNames$1.sliderHandleFocused)) {
        this.firstHandle.classList.remove(classNames$1.sliderHandleFocused);
      }
      if (this.type === "Range") {
        if (this.secondHandle.classList.contains(classNames$1.sliderHandleFocused)) {
          this.secondHandle.classList.remove(classNames$1.sliderHandleFocused);
        }
      }
    };
    Slider2.prototype.handleFocus = function(e) {
      this.focusSliderElement();
      this.sliderBarClick(e);
      if (e.currentTarget === this.firstHandle) {
        this.firstHandle.classList.add(classNames$1.sliderHandleFocused);
        this.firstHandle.classList.add(classNames$1.sliderTabHandle);
      } else {
        this.secondHandle.classList.add(classNames$1.sliderHandleFocused);
        this.secondHandle.classList.add(classNames$1.sliderTabHandle);
      }
      EventHandler.add(document, "mousemove touchmove", this.sliderBarMove, this);
      EventHandler.add(document, "mouseup touchend", this.sliderBarUp, this);
    };
    Slider2.prototype.handleOver = function(e) {
      if (this.tooltip.isVisible && this.tooltip.showOn === "Hover") {
        this.tooltipToggle(e.currentTarget);
      }
      if (this.type === "Default") {
        this.tooltipToggle(this.getHandle());
      }
    };
    Slider2.prototype.handleLeave = function(e) {
      if (this.tooltip.isVisible && this.tooltip.showOn === "Hover" && !e.currentTarget.classList.contains(classNames$1.sliderHandleFocused) && !e.currentTarget.classList.contains(classNames$1.sliderTabHandle)) {
        this.closeTooltip();
      }
    };
    Slider2.prototype.setHandler = function() {
      if (this.min > this.max) {
        this.min = this.max;
      }
      this.createFirstHandle();
      if (this.type === "Range") {
        this.createSecondHandle();
      }
    };
    Slider2.prototype.setEnableRTL = function() {
      this.enableRtl && this.orientation !== "Vertical" ? addClass([this.sliderContainer], classNames$1.rtl) : removeClass([this.sliderContainer], classNames$1.rtl);
      var preDir = this.orientation !== "Vertical" ? this.horDir : this.verDir;
      if (this.enableRtl) {
        this.horDir = "right";
        this.verDir = "bottom";
      } else {
        this.horDir = "left";
        this.verDir = "bottom";
      }
      var currDir = this.orientation !== "Vertical" ? this.horDir : this.verDir;
      if (preDir !== currDir) {
        if (this.orientation === "Horizontal") {
          setStyleAttribute(this.firstHandle, { "right": "", "left": "auto" });
          if (this.type === "Range") {
            setStyleAttribute(this.secondHandle, { "top": "", "left": "auto" });
          }
        }
      }
      this.setBarColor();
    };
    Slider2.prototype.tooltipValue = function() {
      var _this = this;
      var text;
      var args = {
        value: this.value,
        text: ""
      };
      if (this.initialTooltip) {
        this.initialTooltip = false;
        this.setTooltipContent();
        args.text = text = this.tooltipObj.content;
        this.trigger("tooltipChange", args, function(observedArgs) {
          _this.addTooltipClass(observedArgs.text);
          if (text !== observedArgs.text) {
            _this.customAriaText = observedArgs.text;
            _this.tooltipObj.content = observedArgs.text;
            _this.setAriaAttrValue(_this.firstHandle);
            if (_this.type === "Range") {
              _this.setAriaAttrValue(_this.secondHandle);
            }
          }
        });
        if (this.isMaterialTooltip) {
          this.setPreviousVal("change", this.value);
        }
      }
    };
    Slider2.prototype.setTooltipContent = function() {
      var content;
      content = this.formatContent(this.tooltipFormatInfo, false);
      this.tooltipObj.content = content;
    };
    Slider2.prototype.formatContent = function(formatInfo, ariaContent) {
      var content = "";
      var handle1 = this.handleVal1;
      var handle2 = this.handleVal2;
      if (!isNullOrUndefined(this.customValues) && this.customValues.length > 0) {
        handle1 = this.customValues[this.handleVal1];
        handle2 = this.customValues[this.handleVal2];
      }
      if (!ariaContent) {
        if (this.type === "Range") {
          if (this.enableRtl && this.orientation !== "Vertical") {
            content = !isNullOrUndefined(formatInfo.format) ? this.formatString(handle2, formatInfo).formatString + " - " + this.formatString(handle1, formatInfo).formatString : handle2.toString() + " - " + handle1.toString();
          } else {
            content = !isNullOrUndefined(formatInfo.format) ? this.formatString(handle1, formatInfo).formatString + " - " + this.formatString(handle2, formatInfo).formatString : handle1.toString() + " - " + handle2.toString();
          }
        } else {
          if (!isNullOrUndefined(handle1)) {
            content = !isNullOrUndefined(formatInfo.format) ? this.formatString(handle1, formatInfo).formatString : handle1.toString();
          }
        }
        return content;
      } else {
        if (this.type === "Range") {
          if (this.enableRtl && this.orientation !== "Vertical") {
            content = !isNullOrUndefined(this.tooltip) && !isNullOrUndefined(this.tooltip.format) ? this.formatString(handle2, formatInfo).elementVal + " - " + this.formatString(handle1, formatInfo).elementVal : handle2.toString() + " - " + handle1.toString();
          } else {
            content = !isNullOrUndefined(this.tooltip) && !isNullOrUndefined(this.tooltip.format) ? this.formatString(handle1, formatInfo).elementVal + " - " + this.formatString(handle2, formatInfo).elementVal : handle1.toString() + " - " + handle2.toString();
          }
        } else {
          if (!isNullOrUndefined(handle1)) {
            content = !isNullOrUndefined(this.tooltip) && !isNullOrUndefined(this.tooltip.format) ? this.formatString(handle1, formatInfo).elementVal : handle1.toString();
          }
        }
        return content;
      }
    };
    Slider2.prototype.addTooltipClass = function(content) {
      if (this.isMaterialTooltip) {
        var count = content.toString().length;
        if (!this.tooltipElement) {
          var cssClass2 = count > 4 ? classNames$1.sliderMaterialRange : classNames$1.sliderMaterialDefault;
          this.tooltipObj.cssClass = classNames$1.sliderTooltip + " " + cssClass2;
        } else {
          var cssClass2 = count > 4 ? { oldCss: classNames$1.sliderMaterialDefault, newCss: classNames$1.sliderMaterialRange } : { oldCss: classNames$1.sliderMaterialRange, newCss: classNames$1.sliderMaterialDefault };
          this.tooltipElement.classList.remove(cssClass2.oldCss);
          if (!this.tooltipElement.classList.contains(cssClass2.newCss)) {
            this.tooltipElement.classList.add(cssClass2.newCss);
            this.tooltipElement.style.transform = count > 4 ? "scale(1)" : this.getTooltipTransformProperties(this.previousTooltipClass).rotate;
          }
        }
      }
    };
    Slider2.prototype.tooltipPlacement = function() {
      return this.orientation === "Horizontal" ? this.tooltip.placement === "Before" ? "TopCenter" : "BottomCenter" : this.tooltip.placement === "Before" ? "LeftCenter" : "RightCenter";
    };
    Slider2.prototype.tooltipBeforeOpen = function(args) {
      this.tooltipElement = args.element;
      if (this.tooltip.cssClass) {
        addClass([this.tooltipElement], this.tooltip.cssClass.split(" ").filter(function(css) {
          return css;
        }));
      }
      args.target.removeAttribute("aria-describedby");
      if (this.isMaterialTooltip) {
        this.tooltipElement.firstElementChild.classList.add(classNames$1.materialTooltipHide);
        this.handleStart();
        this.setTooltipTransform();
      }
    };
    Slider2.prototype.tooltipCollision = function(position) {
      if (this.isBootstrap || this.isBootstrap4 || this.isMaterial && !this.isMaterialTooltip) {
        var tooltipOffsetValue = this.isBootstrap4 ? bootstrap4TooltipOffset : bootstrapTooltipOffset;
        switch (position) {
          case "TopCenter":
            this.tooltipObj.setProperties({ "offsetY": -tooltipOffsetValue }, false);
            break;
          case "BottomCenter":
            this.tooltipObj.setProperties({ "offsetY": tooltipOffsetValue }, false);
            break;
          case "LeftCenter":
            this.tooltipObj.setProperties({ "offsetX": -tooltipOffsetValue }, false);
            break;
          case "RightCenter":
            this.tooltipObj.setProperties({ "offsetX": tooltipOffsetValue }, false);
            break;
        }
      }
    };
    Slider2.prototype.materialTooltipEventCallBack = function(event) {
      this.sliderBarClick(event);
      EventHandler.add(document, "mousemove touchmove", this.sliderBarMove, this);
      EventHandler.add(document, "mouseup touchend", this.sliderBarUp, this);
    };
    Slider2.prototype.wireMaterialTooltipEvent = function(destroy2) {
      if (this.isMaterialTooltip) {
        if (!destroy2) {
          EventHandler.add(this.tooltipElement, "mousedown touchstart", this.materialTooltipEventCallBack, this);
        } else {
          EventHandler.remove(this.tooltipElement, "mousedown touchstart", this.materialTooltipEventCallBack);
        }
      }
    };
    Slider2.prototype.tooltipPositionCalculation = function(position) {
      var cssClass2;
      switch (position) {
        case "TopCenter":
          cssClass2 = classNames$1.horizontalTooltipBefore;
          break;
        case "BottomCenter":
          cssClass2 = classNames$1.horizontalTooltipAfter;
          break;
        case "LeftCenter":
          cssClass2 = classNames$1.verticalTooltipBefore;
          break;
        case "RightCenter":
          cssClass2 = classNames$1.verticalTooltipAfter;
          break;
      }
      return cssClass2;
    };
    Slider2.prototype.getTooltipTransformProperties = function(className) {
      var transformProperties;
      if (this.tooltipElement) {
        var position = this.orientation === "Horizontal" ? this.tooltipElement.clientHeight + 14 - this.tooltipElement.clientHeight / 2 : this.tooltipElement.clientWidth + 14 - this.tooltipElement.clientWidth / 2;
        transformProperties = this.orientation === "Horizontal" ? className === classNames$1.horizontalTooltipBefore ? { rotate: "rotate(45deg)", translate: "translateY(" + position + "px)" } : { rotate: "rotate(225deg)", translate: "translateY(" + -position + "px)" } : className === classNames$1.verticalTooltipBefore ? { rotate: "rotate(-45deg)", translate: "translateX(" + position + "px)" } : { rotate: "rotate(-225deg)", translate: "translateX(" + -position + "px)" };
      }
      return transformProperties;
    };
    Slider2.prototype.openMaterialTooltip = function() {
      var _this = this;
      if (this.isMaterialTooltip) {
        this.refreshTooltip(this.firstHandle);
        var tooltipContentElement = this.tooltipElement.firstElementChild;
        tooltipContentElement.classList.remove(classNames$1.materialTooltipHide);
        tooltipContentElement.classList.add(classNames$1.materialTooltipShow);
        this.firstHandle.style.cursor = "default";
        this.tooltipElement.style.transition = this.scaleTransform;
        this.tooltipElement.classList.add(classNames$1.materialTooltipOpen);
        this.materialHandle.style.transform = "scale(0)";
        if (tooltipContentElement.innerText.length > 4) {
          this.tooltipElement.style.transform = "scale(1)";
        } else {
          this.tooltipElement.style.transform = this.getTooltipTransformProperties(this.previousTooltipClass).rotate;
        }
        if (this.type === "Default") {
          setTimeout(function() {
            _this.tooltipElement.style.transition = _this.transition.handle;
          }, 2500);
        } else {
          setTimeout(function() {
            _this.tooltipElement.style.transition = "none";
          }, 2500);
        }
      }
    };
    Slider2.prototype.closeMaterialTooltip = function() {
      var _this = this;
      if (this.isMaterialTooltip) {
        var tooltipContentElement = this.tooltipElement.firstElementChild;
        this.tooltipElement.style.transition = this.scaleTransform;
        tooltipContentElement.classList.remove(classNames$1.materialTooltipShow);
        tooltipContentElement.classList.add(classNames$1.materialTooltipHide);
        this.firstHandle.style.cursor = "-webkit-grab";
        this.firstHandle.style.cursor = "grab";
        if (this.materialHandle) {
          this.materialHandle.style.transform = "scale(1)";
        }
        this.tooltipElement.classList.remove(classNames$1.materialTooltipOpen);
        this.setTooltipTransform();
        this.tooltipTarget = void 0;
        setTimeout(function() {
          _this.tooltipElement.style.transition = "none";
        }, 2500);
      }
    };
    Slider2.prototype.checkTooltipPosition = function(args) {
      var tooltipClass = this.tooltipPositionCalculation(args.collidedPosition);
      if (this.tooltipCollidedPosition === void 0 || this.tooltipCollidedPosition !== args.collidedPosition || !args.element.classList.contains(tooltipClass)) {
        if (this.isMaterialTooltip) {
          if (tooltipClass !== void 0) {
            args.element.classList.remove(this.previousTooltipClass);
            args.element.classList.add(tooltipClass);
            this.previousTooltipClass = tooltipClass;
          }
          if (args.element.style.transform && args.element.classList.contains(classNames$1.materialTooltipOpen) && args.element.firstElementChild.innerText.length <= 4) {
            args.element.style.transform = this.getTooltipTransformProperties(this.previousTooltipClass).rotate;
          }
        }
        this.tooltipCollidedPosition = args.collidedPosition;
      }
      if (this.isMaterialTooltip && this.tooltipElement && this.tooltipElement.style.transform.indexOf("translate") !== -1) {
        this.setTooltipTransform();
      }
    };
    Slider2.prototype.setTooltipTransform = function() {
      var transformProperties = this.getTooltipTransformProperties(this.previousTooltipClass);
      if (this.tooltipElement.firstElementChild.innerText.length > 4) {
        this.tooltipElement.style.transform = transformProperties.translate + " scale(0.01)";
      } else {
        this.tooltipElement.style.transform = transformProperties.translate + " " + transformProperties.rotate + " scale(0.01)";
      }
    };
    Slider2.prototype.renderTooltip = function() {
      this.tooltipObj = new Tooltip({
        showTipPointer: this.isBootstrap || this.isMaterial || this.isBootstrap4 || this.isTailwind || this.isBootstrap5 || this.isFluent,
        cssClass: classNames$1.sliderTooltip,
        height: this.isMaterial ? 30 : "auto",
        animation: { open: { effect: "None" }, close: { effect: "FadeOut", duration: 500 } },
        opensOn: "Custom",
        beforeOpen: this.tooltipBeforeOpen.bind(this),
        beforeCollision: this.checkTooltipPosition.bind(this),
        beforeClose: this.tooltipBeforeClose.bind(this),
        enableHtmlSanitizer: this.enableHtmlSanitizer
      });
      this.tooltipObj.appendTo(this.firstHandle);
      this.initializeTooltipProps();
    };
    Slider2.prototype.initializeTooltipProps = function() {
      var tooltipShowOn = this.tooltip.showOn === "Auto" ? "Hover" : this.tooltip.showOn;
      this.setProperties({ tooltip: { showOn: tooltipShowOn } }, true);
      this.tooltipObj.position = this.tooltipPlacement();
      this.tooltipCollision(this.tooltipObj.position);
      [this.firstHandle, this.rangeBar, this.secondHandle].forEach(function(handle) {
        if (!isNullOrUndefined(handle)) {
          handle.style.transition = "none";
        }
      });
      if (this.isMaterialTooltip) {
        this.sliderContainer.classList.add(classNames$1.materialSlider);
        this.tooltipValue();
        this.tooltipObj.animation.close.effect = "None";
        this.tooltipObj.open(this.firstHandle);
      }
    };
    Slider2.prototype.tooltipBeforeClose = function() {
      this.tooltipElement = void 0;
      this.tooltipCollidedPosition = void 0;
    };
    Slider2.prototype.setButtons = function() {
      this.firstBtn = this.createElement("div", { className: classNames$1.sliderButton + " " + classNames$1.firstButton });
      this.firstBtn.appendChild(this.createElement("span", { className: classNames$1.sliderButtonIcon }));
      if (this.isTailwind) {
        this.firstBtn.querySelector("span").classList.add("e-icons");
      }
      this.firstBtn.tabIndex = -1;
      this.secondBtn = this.createElement("div", { className: classNames$1.sliderButton + " " + classNames$1.secondButton });
      this.secondBtn.appendChild(this.createElement("span", { className: classNames$1.sliderButtonIcon }));
      if (this.isTailwind) {
        this.secondBtn.querySelector("span").classList.add("e-icons");
      }
      this.secondBtn.tabIndex = -1;
      this.sliderContainer.classList.add(classNames$1.sliderButtonClass);
      this.sliderContainer.appendChild(this.firstBtn);
      this.sliderContainer.appendChild(this.secondBtn);
      this.sliderContainer.appendChild(this.element);
      this.buttonTitle();
    };
    Slider2.prototype.buttonTitle = function() {
      var enabledRTL = this.enableRtl && this.orientation !== "Vertical";
      this.l10n.setLocale(this.locale);
      var decrementTitle = this.l10n.getConstant("decrementTitle");
      var incrementTitle = this.l10n.getConstant("incrementTitle");
      attributes(enabledRTL ? this.secondBtn : this.firstBtn, { "aria-label": decrementTitle, title: decrementTitle });
      attributes(enabledRTL ? this.firstBtn : this.secondBtn, { "aria-label": incrementTitle, title: incrementTitle });
    };
    Slider2.prototype.buttonFocusOut = function() {
      if (this.isMaterial) {
        this.getHandle().classList.remove("e-large-thumb-size");
      }
    };
    Slider2.prototype.repeatButton = function(args) {
      var hVal = this.handleValueUpdate();
      var enabledRTL = this.enableRtl && this.orientation !== "Vertical";
      var value;
      if (args.target.parentElement.classList.contains(classNames$1.firstButton) || args.target.classList.contains(classNames$1.firstButton)) {
        enabledRTL ? value = this.add(hVal, parseFloat(this.step.toString()), true) : value = this.add(hVal, parseFloat(this.step.toString()), false);
      } else if (args.target.parentElement.classList.contains(classNames$1.secondButton) || args.target.classList.contains(classNames$1.secondButton)) {
        enabledRTL ? value = this.add(hVal, parseFloat(this.step.toString()), false) : value = this.add(hVal, parseFloat(this.step.toString()), true);
      }
      if (this.limits.enabled) {
        value = this.getLimitCorrectedValues(value);
      }
      if (value >= this.min && value <= this.max) {
        this.changeHandleValue(value);
        this.tooltipToggle(this.getHandle());
      }
    };
    Slider2.prototype.repeatHandlerMouse = function(args) {
      args.preventDefault();
      if (args.type === "mousedown" || args.type === "touchstart") {
        this.buttonClick(args);
        this.repeatInterval = setInterval(this.repeatButton.bind(this), 180, args);
      }
    };
    Slider2.prototype.materialChange = function() {
      if (!this.getHandle().classList.contains("e-large-thumb-size")) {
        this.getHandle().classList.add("e-large-thumb-size");
      }
    };
    Slider2.prototype.focusHandle = function() {
      if (!this.getHandle().classList.contains(classNames$1.sliderTabHandle)) {
        this.getHandle().classList.add(classNames$1.sliderTabHandle);
      }
    };
    Slider2.prototype.repeatHandlerUp = function(e) {
      this.changeEvent("changed", e);
      this.closeTooltip();
      clearInterval(this.repeatInterval);
      this.getHandle().focus();
    };
    Slider2.prototype.customTickCounter = function(bigNum) {
      var tickCount = 4;
      if (!isNullOrUndefined(this.customValues) && this.customValues.length > 0) {
        if (bigNum > 4) {
          tickCount = 3;
        }
        if (bigNum > 7) {
          tickCount = 2;
        }
        if (bigNum > 14) {
          tickCount = 1;
        }
        if (bigNum > 28) {
          tickCount = 0;
        }
      }
      return tickCount;
    };
    Slider2.prototype.renderScale = function() {
      var orien = this.orientation === "Vertical" ? "v" : "h";
      this.noOfDecimals = this.numberOfDecimals(this.step);
      this.ul = this.createElement("ul", {
        className: classNames$1.scale + " e-" + orien + "-scale " + classNames$1.tick + "-" + this.ticks.placement.toLowerCase(),
        attrs: { role: "presentation", tabIndex: "-1", "aria-hidden": "true" }
      });
      this.ul.style.zIndex = "-1";
      if (Browser.isAndroid && orien === "h") {
        this.ul.classList.add(classNames$1.sliderTickPosition);
      }
      var smallStep = this.ticks.smallStep;
      if (!this.ticks.showSmallTicks) {
        this.ticks.largeStep > 0 ? smallStep = this.ticks.largeStep : smallStep = parseFloat(formatUnit(this.max)) - parseFloat(formatUnit(this.min));
      } else if (smallStep <= 0) {
        smallStep = parseFloat(formatUnit(this.step));
      }
      var min = this.fractionalToInteger(this.min);
      var max = this.fractionalToInteger(this.max);
      var steps = this.fractionalToInteger(smallStep);
      var bigNum = !isNullOrUndefined(this.customValues) && this.customValues.length > 0 && this.customValues.length - 1;
      var customStep = this.customTickCounter(bigNum);
      var count = !isNullOrUndefined(this.customValues) && this.customValues.length > 0 ? bigNum * customStep + bigNum : Math.abs((max - min) / steps);
      this.element.appendChild(this.ul);
      var li;
      var start = parseFloat(this.min.toString());
      if (orien === "v") {
        start = parseFloat(this.max.toString());
      }
      var left = 0;
      var islargeTick;
      var tickWidth = 100 / count;
      if (tickWidth === Infinity) {
        tickWidth = 5;
      }
      for (var i = 0, y = !isNullOrUndefined(this.customValues) && this.customValues.length > 0 ? this.customValues.length - 1 : 0, k = 0; i <= count; i++) {
        li = this.createElement("li", {
          attrs: {
            class: classNames$1.tick,
            role: "presentation",
            tabIndex: "-1",
            "aria-hidden": "true"
          }
        });
        if (!isNullOrUndefined(this.customValues) && this.customValues.length > 0) {
          islargeTick = i % (customStep + 1) === 0;
          if (islargeTick) {
            if (orien === "h") {
              start = this.customValues[k];
              k++;
            } else {
              start = this.customValues[y];
              y--;
            }
            li.setAttribute("title", start.toString());
          }
        } else {
          li.setAttribute("title", start.toString());
          if (this.numberOfDecimals(this.max) === 0 && this.numberOfDecimals(this.min) === 0 && this.numberOfDecimals(this.step) === 0) {
            if (orien === "h") {
              islargeTick = (start - parseFloat(this.min.toString())) % this.ticks.largeStep === 0 ? true : false;
            } else {
              islargeTick = Math.abs(start - parseFloat(this.max.toString())) % this.ticks.largeStep === 0 ? true : false;
            }
          } else {
            var largestep = this.fractionalToInteger(this.ticks.largeStep);
            var startValue = this.fractionalToInteger(start);
            if (orien === "h") {
              islargeTick = (startValue - min) % largestep === 0 ? true : false;
            } else {
              islargeTick = Math.abs(startValue - parseFloat(max.toString())) % largestep === 0 ? true : false;
            }
          }
        }
        if (islargeTick) {
          li.classList.add(classNames$1.large);
        }
        orien === "h" ? li.style.width = tickWidth + "%" : li.style.height = tickWidth + "%";
        var repeat = islargeTick ? this.ticks.placement === "Both" ? 2 : 1 : 0;
        if (islargeTick) {
          for (var j = 0; j < repeat; j++) {
            this.createTick(li, start, tickWidth);
          }
        } else if (isNullOrUndefined(this.customValues)) {
          this.formatTicksValue(li, start);
        }
        this.ul.appendChild(li);
        this.tickElementCollection.push(li);
        var decimalPoints = void 0;
        if (isNullOrUndefined(this.customValues)) {
          if (this.numberOfDecimals(smallStep) > this.numberOfDecimals(start)) {
            decimalPoints = this.numberOfDecimals(smallStep);
          } else {
            decimalPoints = this.numberOfDecimals(start);
          }
          if (orien === "h") {
            start = this.makeRoundNumber(start + smallStep, decimalPoints);
          } else {
            start = this.makeRoundNumber(start - smallStep, decimalPoints);
          }
          left = this.makeRoundNumber(left + smallStep, decimalPoints);
        }
      }
      this.ticksAlignment(orien, tickWidth);
    };
    Slider2.prototype.ticksAlignment = function(orien, tickWidth, triggerEvent2) {
      if (triggerEvent2 === void 0) {
        triggerEvent2 = true;
      }
      this.firstChild = this.ul.firstElementChild;
      this.lastChild = this.ul.lastElementChild;
      this.firstChild.classList.add(classNames$1.sliderFirstTick);
      this.lastChild.classList.add(classNames$1.sliderLastTick);
      this.sliderContainer.classList.add(classNames$1.scale + "-" + this.ticks.placement.toLowerCase());
      if (orien === "h") {
        this.firstChild.style.width = tickWidth / 2 + "%";
        this.lastChild.style.width = tickWidth / 2 + "%";
      } else {
        this.firstChild.style.height = tickWidth / 2 + "%";
        this.lastChild.style.height = tickWidth / 2 + "%";
      }
      var eventArgs = { ticksWrapper: this.ul, tickElements: this.tickElementCollection };
      if (triggerEvent2) {
        this.trigger("renderedTicks", eventArgs);
      }
      this.scaleAlignment();
    };
    Slider2.prototype.createTick = function(li, start, tickWidth) {
      var span = this.createElement("span", {
        className: classNames$1.tickValue + " " + classNames$1.tick + "-" + this.ticks.placement.toLowerCase(),
        attrs: { role: "presentation", tabIndex: "-1", "aria-hidden": "true" }
      });
      li.appendChild(span);
      if (isNullOrUndefined(this.customValues)) {
        this.formatTicksValue(li, start, span, tickWidth);
      } else {
        if (this.enableHtmlSanitizer) {
          span.innerHTML = SanitizeHtmlHelper.sanitize(start.toString());
        } else {
          span.innerHTML = start.toString();
        }
      }
    };
    Slider2.prototype.formatTicksValue = function(li, start, spanElement, tickWidth) {
      var _this = this;
      var tickText = this.formatNumber(start);
      var text = !isNullOrUndefined(this.ticks) && !isNullOrUndefined(this.ticks.format) ? this.formatString(start, this.ticksFormatInfo).formatString : tickText;
      var eventArgs = { value: start, text, tickElement: li };
      this.trigger("renderingTicks", eventArgs, function(observedArgs) {
        li.setAttribute("title", observedArgs.text.toString());
        if (spanElement) {
          if (_this.enableHtmlSanitizer) {
            spanElement.innerHTML = SanitizeHtmlHelper.sanitize(observedArgs.text.toString());
          } else {
            spanElement.innerHTML = observedArgs.text.toString();
          }
        }
      });
    };
    Slider2.prototype.scaleAlignment = function() {
      this.tickValuePosition();
      this.orientation === "Vertical" ? "v" : "h";
      if (this.orientation === "Vertical") {
        this.element.getBoundingClientRect().width <= 15 ? this.sliderContainer.classList.add(classNames$1.sliderSmallSize) : this.sliderContainer.classList.remove(classNames$1.sliderSmallSize);
      } else {
        this.element.getBoundingClientRect().height <= 15 ? this.sliderContainer.classList.add(classNames$1.sliderSmallSize) : this.sliderContainer.classList.remove(classNames$1.sliderSmallSize);
      }
    };
    Slider2.prototype.tickValuePosition = function() {
      this.firstChild = this.element.querySelector("ul").children[0];
      var first = this.firstChild.getBoundingClientRect();
      var firstChild;
      var otherChild;
      var smallStep = this.ticks.smallStep;
      var count = Math.abs(parseFloat(formatUnit(this.max)) - parseFloat(formatUnit(this.min))) / smallStep;
      if (this.firstChild.children.length > 0) {
        firstChild = this.firstChild.children[0].getBoundingClientRect();
      }
      var tickElements = [this.sliderContainer.querySelectorAll("." + classNames$1.tick + "." + classNames$1.large + " ." + classNames$1.tickValue)];
      var other;
      if (this.ticks.placement === "Both") {
        other = [].slice.call(tickElements[0], 2);
      } else {
        other = [].slice.call(tickElements[0], 1);
      }
      var tickWidth = this.orientation === "Vertical" ? first.height * 2 : first.width * 2;
      for (var i = 0; i < this.firstChild.children.length; i++) {
        if (this.orientation === "Vertical") {
          this.firstChild.children[i].style.top = -(firstChild.height / 2) + "px";
        } else {
          if (!this.enableRtl) {
            this.firstChild.children[i].style.left = -(firstChild.width / 2) + "px";
          } else {
            this.firstChild.children[i].style.left = (tickWidth - this.firstChild.children[i].getBoundingClientRect().width) / 2 + "px";
          }
        }
      }
      for (var i = 0; i < other.length; i++) {
        otherChild = other[i].getBoundingClientRect();
        if (this.orientation === "Vertical") {
          setStyleAttribute(other[i], { top: (tickWidth - otherChild.height) / 2 + "px" });
        } else {
          setStyleAttribute(other[i], { left: (tickWidth - otherChild.width) / 2 + "px" });
        }
      }
      if (this.enableRtl && this.lastChild.children.length && count !== 0) {
        this.lastChild.children[0].style.left = -(this.lastChild.getBoundingClientRect().width / 2) + "px";
        if (this.ticks.placement === "Both") {
          this.lastChild.children[1].style.left = -(this.lastChild.getBoundingClientRect().width / 2) + "px";
        }
      }
      if (count === 0) {
        if (this.orientation === "Horizontal") {
          if (!this.enableRtl) {
            this.firstChild.classList.remove(classNames$1.sliderLastTick);
            this.firstChild.style.left = this.firstHandle.style.left;
          } else {
            this.firstChild.classList.remove(classNames$1.sliderLastTick);
            this.firstChild.style.right = this.firstHandle.style.right;
            this.firstChild.children[0].style.left = this.firstChild.getBoundingClientRect().width / 2 + 2 + "px";
            if (this.ticks.placement === "Both") {
              this.firstChild.children[1].style.left = this.firstChild.getBoundingClientRect().width / 2 + 2 + "px";
            }
          }
        }
        if (this.orientation === "Vertical") {
          this.firstChild.classList.remove(classNames$1.sliderLastTick);
        }
      }
    };
    Slider2.prototype.setAriaAttrValue = function(element2) {
      var ariaValueText;
      var isTickFormatted = !isNullOrUndefined(this.ticks) && !isNullOrUndefined(this.ticks.format) ? true : false;
      var text = !isTickFormatted ? this.formatContent(this.ticksFormatInfo, false) : this.formatContent(this.tooltipFormatInfo, false);
      var valuenow = isTickFormatted ? this.formatContent(this.ticksFormatInfo, true) : this.formatContent(this.tooltipFormatInfo, true);
      text = !this.customAriaText ? text : this.customAriaText;
      if (text.split(" - ").length === 2) {
        ariaValueText = text.split(" - ");
      } else {
        ariaValueText = [text, text];
      }
      this.setAriaAttributes(element2);
      if (this.type !== "Range") {
        attributes(element2, { "aria-valuenow": valuenow, "aria-valuetext": text });
      } else {
        !this.enableRtl ? element2 === this.firstHandle ? attributes(element2, { "aria-valuenow": valuenow.split(" - ")[0], "aria-valuetext": ariaValueText[0] }) : attributes(element2, { "aria-valuenow": valuenow.split(" - ")[1], "aria-valuetext": ariaValueText[1] }) : element2 === this.firstHandle ? attributes(element2, { "aria-valuenow": valuenow.split(" - ")[1], "aria-valuetext": ariaValueText[1] }) : attributes(element2, { "aria-valuenow": valuenow.split(" - ")[0], "aria-valuetext": ariaValueText[0] });
      }
    };
    Slider2.prototype.handleValueUpdate = function() {
      var hVal;
      if (this.type === "Range") {
        if (this.activeHandle === 1) {
          hVal = this.handleVal1;
        } else {
          hVal = this.handleVal2;
        }
      } else {
        hVal = this.handleVal1;
      }
      return hVal;
    };
    Slider2.prototype.getLimitCorrectedValues = function(value) {
      if (this.type === "MinRange" || this.type === "Default") {
        value = this.getLimitValueAndPosition(value, this.limits.minStart, this.limits.minEnd)[0];
      } else {
        if (this.activeHandle === 1) {
          value = this.getLimitValueAndPosition(value, this.limits.minStart, this.limits.minEnd)[0];
        } else {
          value = this.getLimitValueAndPosition(value, this.limits.maxStart, this.limits.maxEnd)[0];
        }
      }
      return value;
    };
    Slider2.prototype.focusSliderElement = function() {
      if (!this.isElementFocused) {
        this.element.focus();
        this.isElementFocused = true;
      }
    };
    Slider2.prototype.buttonClick = function(args) {
      this.focusSliderElement();
      var value;
      var enabledRTL = this.enableRtl && this.orientation !== "Vertical";
      var hVal = this.handleValueUpdate();
      if (args.keyCode === 40 || args.keyCode === 37 || args.currentTarget.classList.contains(classNames$1.firstButton)) {
        enabledRTL ? value = this.add(hVal, parseFloat(this.step.toString()), true) : value = this.add(hVal, parseFloat(this.step.toString()), false);
      } else if (args.keyCode === 38 || args.keyCode === 39 || args.currentTarget.classList.contains(classNames$1.secondButton)) {
        enabledRTL ? value = this.add(hVal, parseFloat(this.step.toString()), false) : value = this.add(hVal, parseFloat(this.step.toString()), true);
      } else if (args.keyCode === 33 || args.currentTarget.classList.contains(classNames$1.firstButton)) {
        enabledRTL ? value = this.add(hVal, parseFloat(this.ticks.largeStep.toString()), false) : value = this.add(hVal, parseFloat(this.ticks.largeStep.toString()), true);
      } else if (args.keyCode === 34 || args.currentTarget.classList.contains(classNames$1.secondButton)) {
        enabledRTL ? value = this.add(hVal, parseFloat(this.ticks.largeStep.toString()), true) : value = this.add(hVal, parseFloat(this.ticks.largeStep.toString()), false);
      } else if (args.keyCode === 36) {
        value = parseFloat(this.min.toString());
      } else if (args.keyCode === 35) {
        value = parseFloat(this.max.toString());
      }
      if (this.limits.enabled) {
        value = this.getLimitCorrectedValues(value);
      }
      this.changeHandleValue(value);
      if (this.isMaterial && !this.tooltip.isVisible && !this.getHandle().classList.contains(classNames$1.sliderTabHandle)) {
        this.materialChange();
      }
      this.tooltipToggle(this.getHandle());
      this.getHandle().focus();
      this.focusHandle();
      if (args.currentTarget.classList.contains(classNames$1.firstButton)) {
        EventHandler.add(this.firstBtn, "mouseup touchend", this.buttonUp, this);
      }
      if (args.currentTarget.classList.contains(classNames$1.secondButton)) {
        EventHandler.add(this.secondBtn, "mouseup touchend", this.buttonUp, this);
      }
    };
    Slider2.prototype.tooltipToggle = function(target) {
      if (this.isMaterialTooltip) {
        !this.tooltipElement.classList.contains(classNames$1.materialTooltipOpen) ? this.openMaterialTooltip() : this.refreshTooltip(this.firstHandle);
      } else {
        !this.tooltipElement ? this.openTooltip(target) : this.refreshTooltip(target);
      }
    };
    Slider2.prototype.buttonUp = function(args) {
      if (args.currentTarget.classList.contains(classNames$1.firstButton)) {
        EventHandler.remove(this.firstBtn, "mouseup touchend", this.buttonUp);
      }
      if (args.currentTarget.classList.contains(classNames$1.secondButton)) {
        EventHandler.remove(this.secondBtn, "mouseup touchend", this.buttonUp);
      }
    };
    Slider2.prototype.setRangeBar = function() {
      if (this.orientation === "Horizontal") {
        if (this.type === "MinRange") {
          this.enableRtl ? this.rangeBar.style.right = "0px" : this.rangeBar.style.left = "0px";
          setStyleAttribute(this.rangeBar, { "width": isNullOrUndefined(this.handlePos1) ? 0 : this.handlePos1 + "px" });
        } else {
          this.enableRtl ? this.rangeBar.style.right = this.handlePos1 + "px" : this.rangeBar.style.left = this.handlePos1 + "px";
          setStyleAttribute(this.rangeBar, { "width": this.handlePos2 - this.handlePos1 + "px" });
        }
      } else {
        if (this.type === "MinRange") {
          this.rangeBar.style.bottom = "0px";
          setStyleAttribute(this.rangeBar, { "height": isNullOrUndefined(this.handlePos1) ? 0 : this.handlePos1 + "px" });
        } else {
          this.rangeBar.style.bottom = this.handlePos1 + "px";
          setStyleAttribute(this.rangeBar, { "height": this.handlePos2 - this.handlePos1 + "px" });
        }
      }
    };
    Slider2.prototype.checkValidValueAndPos = function(value) {
      value = this.checkHandleValue(value);
      value = this.checkHandlePosition(value);
      return value;
    };
    Slider2.prototype.setLimitBarPositions = function(fromMinPostion, fromMaxpostion, toMinPostion, toMaxpostion) {
      if (this.orientation === "Horizontal") {
        if (!this.enableRtl) {
          this.limitBarFirst.style.left = fromMinPostion + "px";
          this.limitBarFirst.style.width = fromMaxpostion - fromMinPostion + "px";
        } else {
          this.limitBarFirst.style.right = fromMinPostion + "px";
          this.limitBarFirst.style.width = fromMaxpostion - fromMinPostion + "px";
        }
      } else {
        this.limitBarFirst.style.bottom = fromMinPostion + "px";
        this.limitBarFirst.style.height = fromMaxpostion - fromMinPostion + "px";
      }
      if (this.type === "Range") {
        if (this.orientation === "Horizontal") {
          if (!this.enableRtl) {
            this.limitBarSecond.style.left = toMinPostion + "px";
            this.limitBarSecond.style.width = toMaxpostion - toMinPostion + "px";
          } else {
            this.limitBarSecond.style.right = toMinPostion + "px";
            this.limitBarSecond.style.width = toMaxpostion - toMinPostion + "px";
          }
        } else {
          this.limitBarSecond.style.bottom = toMinPostion + "px";
          this.limitBarSecond.style.height = toMaxpostion - toMinPostion + "px";
        }
      }
    };
    Slider2.prototype.setLimitBar = function() {
      if (this.type === "Default" || this.type === "MinRange") {
        var fromPosition = this.getLimitValueAndPosition(this.limits.minStart, this.limits.minStart, this.limits.minEnd, true)[0];
        fromPosition = this.checkValidValueAndPos(fromPosition);
        var toPosition = this.getLimitValueAndPosition(this.limits.minEnd, this.limits.minStart, this.limits.minEnd, true)[0];
        toPosition = this.checkValidValueAndPos(toPosition);
        this.setLimitBarPositions(fromPosition, toPosition);
      } else if (this.type === "Range") {
        var fromMinPostion = this.getLimitValueAndPosition(this.limits.minStart, this.limits.minStart, this.limits.minEnd, true)[0];
        fromMinPostion = this.checkValidValueAndPos(fromMinPostion);
        var fromMaxpostion = this.getLimitValueAndPosition(this.limits.minEnd, this.limits.minStart, this.limits.minEnd, true)[0];
        fromMaxpostion = this.checkValidValueAndPos(fromMaxpostion);
        var toMinPostion = this.getLimitValueAndPosition(this.limits.maxStart, this.limits.maxStart, this.limits.maxEnd, true)[0];
        toMinPostion = this.checkValidValueAndPos(toMinPostion);
        var toMaxpostion = this.getLimitValueAndPosition(this.limits.maxEnd, this.limits.maxStart, this.limits.maxEnd, true)[0];
        toMaxpostion = this.checkValidValueAndPos(toMaxpostion);
        this.setLimitBarPositions(fromMinPostion, fromMaxpostion, toMinPostion, toMaxpostion);
      }
    };
    Slider2.prototype.getLimitValueAndPosition = function(currentValue, minValue, maxValue, limitBar) {
      if (isNullOrUndefined(minValue)) {
        minValue = this.min;
        if (isNullOrUndefined(currentValue) && limitBar) {
          currentValue = minValue;
        }
      }
      if (isNullOrUndefined(maxValue)) {
        maxValue = this.max;
        if (isNullOrUndefined(currentValue) && limitBar) {
          currentValue = maxValue;
        }
      }
      if (currentValue < minValue) {
        currentValue = minValue;
      }
      if (currentValue > maxValue) {
        currentValue = maxValue;
      }
      return [currentValue, this.checkHandlePosition(currentValue)];
    };
    Slider2.prototype.setValue = function() {
      if (!isNullOrUndefined(this.customValues) && this.customValues.length > 0) {
        this.min = 0;
        this.max = this.customValues.length - 1;
        this.setBarColor();
      }
      this.setAriaAttributes(this.firstHandle);
      this.handleVal1 = isNullOrUndefined(this.value) ? this.checkHandleValue(parseFloat(this.min.toString())) : this.checkHandleValue(parseFloat(this.value.toString()));
      this.handlePos1 = this.checkHandlePosition(this.handleVal1);
      this.preHandlePos1 = this.handlePos1;
      isNullOrUndefined(this.activeHandle) ? this.type === "Range" ? this.activeHandle = 2 : this.activeHandle = 1 : (
        // eslint-disable-next-line no-self-assign
        this.activeHandle = this.activeHandle
      );
      if (this.type === "Default" || this.type === "MinRange") {
        if (this.limits.enabled) {
          var values = this.getLimitValueAndPosition(this.handleVal1, this.limits.minStart, this.limits.minEnd);
          this.handleVal1 = values[0];
          this.handlePos1 = values[1];
          this.preHandlePos1 = this.handlePos1;
        }
        this.setHandlePosition(null);
        this.handleStart();
        this.value = this.handleVal1;
        this.setAriaAttrValue(this.firstHandle);
        this.changeEvent("changed", null);
      } else {
        this.validateRangeValue();
      }
      if (this.type !== "Default") {
        this.setRangeBar();
      }
      if (this.limits.enabled) {
        this.setLimitBar();
      }
    };
    Slider2.prototype.rangeValueUpdate = function() {
      if (this.value === null || typeof this.value !== "object") {
        this.value = [parseFloat(formatUnit(this.min)), parseFloat(formatUnit(this.max))];
      }
    };
    Slider2.prototype.validateRangeValue = function() {
      this.rangeValueUpdate();
      this.setRangeValue();
    };
    Slider2.prototype.modifyZindex = function() {
      if (this.type === "Range") {
        if (this.activeHandle === 1) {
          this.firstHandle.style.zIndex = this.zIndex + 4 + "";
          this.secondHandle.style.zIndex = this.zIndex + 3 + "";
        } else {
          this.firstHandle.style.zIndex = this.zIndex + 3 + "";
          this.secondHandle.style.zIndex = this.zIndex + 4 + "";
        }
      } else if (this.isMaterialTooltip && this.tooltipElement) {
        this.tooltipElement.style.zIndex = getZindexPartial(this.element) + "";
      }
    };
    Slider2.prototype.setHandlePosition = function(event) {
      var _this = this;
      var handle;
      var pos = this.activeHandle === 1 ? this.handlePos1 : this.handlePos2;
      if (this.isMaterialTooltip) {
        handle = [this.firstHandle, this.materialHandle];
      } else {
        handle = [this.getHandle()];
      }
      this.handleStart();
      handle.forEach(function(handle2) {
        if (_this.orientation === "Horizontal") {
          _this.enableRtl ? handle2.style.right = pos + "px" : handle2.style.left = pos + "px";
        } else {
          handle2.style.bottom = pos + "px";
        }
      });
      this.changeEvent("change", event);
    };
    Slider2.prototype.getHandle = function() {
      return this.activeHandle === 1 ? this.firstHandle : this.secondHandle;
    };
    Slider2.prototype.setRangeValue = function() {
      this.updateRangeValue();
      this.activeHandle = 1;
      this.setHandlePosition(null);
      this.activeHandle = 2;
      this.setHandlePosition(null);
      this.activeHandle = 1;
    };
    Slider2.prototype.changeEvent = function(eventName, e) {
      var previous = eventName === "change" ? this.previousVal : this.previousChanged;
      if (this.type !== "Range") {
        this.setProperties({ "value": this.handleVal1 }, true);
        if (previous !== this.value && (!this.isMaterialTooltip || !this.initialTooltip)) {
          this.trigger(eventName, this.changeEventArgs(eventName, e));
          this.initialTooltip = true;
          this.setPreviousVal(eventName, this.value);
        }
        this.setAriaAttrValue(this.firstHandle);
      } else {
        var value = this.value = [this.handleVal1, this.handleVal2];
        this.setProperties({ "value": value }, true);
        if (previous.length === this.value.length && this.value[0] !== previous[0] || this.value[1] !== previous[1]) {
          this.initialTooltip = false;
          this.trigger(eventName, this.changeEventArgs(eventName, e));
          this.initialTooltip = true;
          this.setPreviousVal(eventName, this.value);
        }
        this.setAriaAttrValue(this.getHandle());
      }
      this.hiddenInput.value = this.value.toString();
    };
    Slider2.prototype.changeEventArgs = function(eventName, e) {
      var eventArgs;
      if (this.tooltip.isVisible && this.tooltipObj && this.initialTooltip) {
        this.tooltipValue();
        eventArgs = {
          value: this.value,
          previousValue: eventName === "change" ? this.previousVal : this.previousChanged,
          action: eventName,
          text: this.tooltipObj.content,
          isInteracted: isNullOrUndefined(e) ? false : true
        };
      } else {
        eventArgs = {
          value: this.value,
          previousValue: eventName === "change" ? this.previousVal : this.previousChanged,
          action: eventName,
          text: isNullOrUndefined(this.ticksFormatInfo.format) ? this.value.toString() : this.type !== "Range" ? this.formatString(this.value, this.ticksFormatInfo).formatString : this.formatString(this.value[0], this.ticksFormatInfo).formatString + " - " + this.formatString(this.value[1], this.ticksFormatInfo).formatString,
          isInteracted: isNullOrUndefined(e) ? false : true
        };
      }
      return eventArgs;
    };
    Slider2.prototype.setPreviousVal = function(eventName, value) {
      if (eventName === "change") {
        this.previousVal = value;
      } else {
        this.previousChanged = value;
      }
    };
    Slider2.prototype.updateRangeValue = function() {
      var values = this.value.toString().split(",").map(Number);
      if (this.enableRtl && this.orientation !== "Vertical" || this.rtl) {
        this.value = [values[1], values[0]];
      } else {
        this.value = [values[0], values[1]];
      }
      if (this.enableRtl && this.orientation !== "Vertical") {
        this.handleVal1 = this.checkHandleValue(this.value[1]);
        this.handleVal2 = this.checkHandleValue(this.value[0]);
      } else {
        this.handleVal1 = this.checkHandleValue(this.value[0]);
        this.handleVal2 = this.checkHandleValue(this.value[1]);
      }
      this.handlePos1 = this.checkHandlePosition(this.handleVal1);
      this.handlePos2 = this.checkHandlePosition(this.handleVal2);
      if (this.handlePos1 > this.handlePos2) {
        this.handlePos1 = this.handlePos2;
        this.handleVal1 = this.handleVal2;
      }
      this.preHandlePos1 = this.handlePos1;
      this.preHandlePos2 = this.handlePos2;
      if (this.limits.enabled) {
        this.activeHandle = 1;
        var values_1 = this.getLimitValueAndPosition(this.handleVal1, this.limits.minStart, this.limits.minEnd);
        this.handleVal1 = values_1[0];
        this.handlePos1 = values_1[1];
        this.preHandlePos1 = this.handlePos1;
        this.activeHandle = 2;
        values_1 = this.getLimitValueAndPosition(this.handleVal2, this.limits.maxStart, this.limits.maxEnd);
        this.handleVal2 = values_1[0];
        this.handlePos2 = values_1[1];
        this.preHandlePos2 = this.handlePos2;
      }
    };
    Slider2.prototype.checkHandlePosition = function(value) {
      var pos;
      value = 100 * (value - parseFloat(formatUnit(this.min))) / (parseFloat(formatUnit(this.max)) - parseFloat(formatUnit(this.min)));
      if (this.orientation === "Horizontal") {
        pos = this.element.getBoundingClientRect().width * (value / 100);
      } else {
        pos = this.element.getBoundingClientRect().height * (value / 100);
      }
      if (parseFloat(formatUnit(this.max)) === parseFloat(formatUnit(this.min))) {
        if (this.orientation === "Horizontal") {
          pos = this.element.getBoundingClientRect().width;
        } else {
          pos = this.element.getBoundingClientRect().height;
        }
      }
      return pos;
    };
    Slider2.prototype.checkHandleValue = function(value) {
      if (this.min > this.max) {
        this.min = this.max;
      }
      if (this.min === this.max) {
        return parseFloat(formatUnit(this.max));
      }
      var handle = this.tempStartEnd();
      if (value < handle.start) {
        value = handle.start;
      } else if (value > handle.end) {
        value = handle.end;
      }
      return value;
    };
    Slider2.prototype.reposition = function() {
      var _this = this;
      this.firstHandle.style.transition = "none";
      if (this.type !== "Default") {
        this.rangeBar.style.transition = "none";
      }
      if (this.type === "Range") {
        this.secondHandle.style.transition = "none";
      }
      this.handlePos1 = this.checkHandlePosition(this.handleVal1);
      if (this.handleVal2) {
        this.handlePos2 = this.checkHandlePosition(this.handleVal2);
      }
      if (this.orientation === "Horizontal") {
        this.enableRtl ? this.firstHandle.style.right = this.handlePos1 + "px" : this.firstHandle.style.left = this.handlePos1 + "px";
        if (this.isMaterialTooltip) {
          this.enableRtl ? this.materialHandle.style.right = this.handlePos1 + "px" : this.materialHandle.style.left = this.handlePos1 + "px";
        }
        if (this.type === "MinRange") {
          this.enableRtl ? this.rangeBar.style.right = "0px" : this.rangeBar.style.left = "0px";
          setStyleAttribute(this.rangeBar, { "width": isNullOrUndefined(this.handlePos1) ? 0 : this.handlePos1 + "px" });
        } else if (this.type === "Range") {
          this.enableRtl ? this.secondHandle.style.right = this.handlePos2 + "px" : this.secondHandle.style.left = this.handlePos2 + "px";
          this.enableRtl ? this.rangeBar.style.right = this.handlePos1 + "px" : this.rangeBar.style.left = this.handlePos1 + "px";
          setStyleAttribute(this.rangeBar, { "width": this.handlePos2 - this.handlePos1 + "px" });
        }
      } else {
        this.firstHandle.style.bottom = this.handlePos1 + "px";
        if (this.isMaterialTooltip) {
          this.materialHandle.style.bottom = this.handlePos1 + "px";
        }
        if (this.type === "MinRange") {
          this.rangeBar.style.bottom = "0px";
          setStyleAttribute(this.rangeBar, { "height": isNullOrUndefined(this.handlePos1) ? 0 : this.handlePos1 + "px" });
        } else if (this.type === "Range") {
          this.secondHandle.style.bottom = this.handlePos2 + "px";
          this.rangeBar.style.bottom = this.handlePos1 + "px";
          setStyleAttribute(this.rangeBar, { "height": this.handlePos2 - this.handlePos1 + "px" });
        }
      }
      if (this.limits.enabled) {
        this.setLimitBar();
      }
      if (this.ticks.placement !== "None" && this.ul) {
        this.removeElement(this.ul);
        this.ul = void 0;
        this.renderScale();
      }
      this.handleStart();
      if (!this.tooltip.isVisible) {
        setTimeout(function() {
          _this.firstHandle.style.transition = _this.scaleTransform;
          if (_this.type === "Range") {
            _this.secondHandle.style.transition = _this.scaleTransform;
          }
        });
      }
      this.refreshTooltip(this.tooltipTarget);
      this.setBarColor();
    };
    Slider2.prototype.changeHandleValue = function(value) {
      var position = null;
      if (this.activeHandle === 1) {
        if (!(this.limits.enabled && this.limits.startHandleFixed)) {
          this.handleVal1 = this.checkHandleValue(value);
          this.handlePos1 = this.checkHandlePosition(this.handleVal1);
          if (this.type === "Range" && this.handlePos1 > this.handlePos2) {
            this.handlePos1 = this.handlePos2;
            this.handleVal1 = this.handleVal2;
          }
          if (this.handlePos1 !== this.preHandlePos1) {
            position = this.preHandlePos1 = this.handlePos1;
          }
        }
        this.modifyZindex();
      } else {
        if (!(this.limits.enabled && this.limits.endHandleFixed)) {
          this.handleVal2 = this.checkHandleValue(value);
          this.handlePos2 = this.checkHandlePosition(this.handleVal2);
          if (this.type === "Range" && this.handlePos2 < this.handlePos1) {
            this.handlePos2 = this.handlePos1;
            this.handleVal2 = this.handleVal1;
          }
          if (this.handlePos2 !== this.preHandlePos2) {
            position = this.preHandlePos2 = this.handlePos2;
          }
        }
        this.modifyZindex();
      }
      if (position !== null) {
        if (this.type !== "Default") {
          this.setRangeBar();
        }
        this.setHandlePosition(null);
      }
    };
    Slider2.prototype.tempStartEnd = function() {
      if (this.min > this.max) {
        return {
          start: this.max,
          end: this.min
        };
      } else {
        return {
          start: this.min,
          end: this.max
        };
      }
    };
    Slider2.prototype.xyToPosition = function(position) {
      var pos;
      if (this.min === this.max) {
        return 100;
      }
      if (this.orientation === "Horizontal") {
        var left = position.x - this.element.getBoundingClientRect().left;
        var num = this.element.offsetWidth / 100;
        this.val = left / num;
      } else {
        var top_1 = position.y - this.element.getBoundingClientRect().top;
        var num = this.element.offsetHeight / 100;
        this.val = 100 - top_1 / num;
      }
      var val = this.stepValueCalculation(this.val);
      if (val < 0) {
        val = 0;
      } else if (val > 100) {
        val = 100;
      }
      if (this.enableRtl && this.orientation !== "Vertical") {
        val = 100 - val;
      }
      if (this.orientation === "Horizontal") {
        pos = this.element.getBoundingClientRect().width * (val / 100);
      } else {
        pos = this.element.getBoundingClientRect().height * (val / 100);
      }
      return pos;
    };
    Slider2.prototype.stepValueCalculation = function(value) {
      if (this.step === 0) {
        this.step = 1;
      }
      var percentStep = parseFloat(formatUnit(this.step)) / ((parseFloat(formatUnit(this.max)) - parseFloat(formatUnit(this.min))) / 100);
      var remain = value % Math.abs(percentStep);
      if (remain !== 0) {
        if (percentStep / 2 > remain) {
          value -= remain;
        } else {
          value += Math.abs(percentStep) - remain;
        }
      }
      return value;
    };
    Slider2.prototype.add = function(a, b, addition) {
      var x = Math.pow(10, 3);
      var val;
      if (addition) {
        val = (Math.round(a * x) + Math.round(b * x)) / x;
      } else {
        val = (Math.round(a * x) - Math.round(b * x)) / x;
      }
      return val;
    };
    Slider2.prototype.positionToValue = function(pos) {
      var val;
      var diff = parseFloat(formatUnit(this.max)) - parseFloat(formatUnit(this.min));
      if (this.orientation === "Horizontal") {
        val = pos / this.element.getBoundingClientRect().width * diff;
      } else {
        val = pos / this.element.getBoundingClientRect().height * diff;
      }
      var total = this.add(val, parseFloat(this.min.toString()), true);
      return total;
    };
    Slider2.prototype.sliderBarClick = function(evt) {
      evt.preventDefault();
      var pos;
      if (evt.type === "mousedown" || evt.type === "mouseup" || evt.type === "click") {
        pos = { x: evt.clientX, y: evt.clientY };
      } else if (evt.type === "touchend" || evt.type === "touchstart") {
        pos = { x: evt.changedTouches[0].clientX, y: evt.changedTouches[0].clientY };
      }
      var handlepos = this.xyToPosition(pos);
      var handleVal = this.positionToValue(handlepos);
      if (this.type === "Range" && this.handlePos2 - handlepos < handlepos - this.handlePos1) {
        this.activeHandle = 2;
        if (!(this.limits.enabled && this.limits.endHandleFixed)) {
          if (this.limits.enabled) {
            var value = this.getLimitValueAndPosition(handleVal, this.limits.maxStart, this.limits.maxEnd);
            handleVal = value[0];
            handlepos = value[1];
          }
          this.secondHandle.classList.add(classNames$1.sliderActiveHandle);
          this.handlePos2 = this.preHandlePos2 = handlepos;
          this.handleVal2 = handleVal;
        }
        this.modifyZindex();
        this.secondHandle.focus();
      } else {
        this.activeHandle = 1;
        if (!(this.limits.enabled && this.limits.startHandleFixed)) {
          if (this.limits.enabled) {
            var value = this.getLimitValueAndPosition(handleVal, this.limits.minStart, this.limits.minEnd);
            handleVal = value[0];
            handlepos = value[1];
          }
          this.firstHandle.classList.add(classNames$1.sliderActiveHandle);
          this.handlePos1 = this.preHandlePos1 = handlepos;
          this.handleVal1 = handleVal;
        }
        this.modifyZindex();
        this.firstHandle.focus();
      }
      if (this.isMaterialTooltip) {
        this.tooltipElement.classList.add(classNames$1.materialTooltipActive);
      }
      var focusedElement = this.element.querySelector("." + classNames$1.sliderTabHandle);
      if (focusedElement && this.getHandle() !== focusedElement) {
        focusedElement.classList.remove(classNames$1.sliderTabHandle);
      }
      var handle = this.activeHandle === 1 ? this.firstHandle : this.secondHandle;
      var behindElement;
      if ((evt.type === "click" || evt.type === "mousedown") && evt.target === handle) {
        var eventX = evt.clientX, eventY = evt.clientY;
        behindElement = document.elementFromPoint(eventX, eventY);
      }
      if (evt.target === handle && behindElement != handle) {
        if (this.isMaterial && !this.tooltip.isVisible && !this.getHandle().classList.contains(classNames$1.sliderTabHandle)) {
          this.materialChange();
        }
        this.sliderBarUp(evt);
        this.tooltipToggle(this.getHandle());
        return;
      }
      if (!this.checkRepeatedValue(handleVal)) {
        return;
      }
      var transition = this.isMaterial && this.tooltip.isVisible ? this.transitionOnMaterialTooltip : this.transition;
      this.getHandle().style.transition = transition.handle;
      if (this.type !== "Default") {
        this.rangeBar.style.transition = transition.rangeBar;
      }
      this.setHandlePosition(evt);
      if (this.isMaterialTooltip) {
        this.initialTooltip = false;
      }
      this.changeEvent("changed", evt);
      if (this.type !== "Default") {
        this.setRangeBar();
      }
    };
    Slider2.prototype.handleValueAdjust = function(handleValue, assignValue, handleNumber) {
      if (handleNumber === 1) {
        this.handleVal1 = assignValue;
        this.handleVal2 = this.handleVal1 + this.minDiff;
      } else if (handleNumber === 2) {
        this.handleVal2 = assignValue;
        this.handleVal1 = this.handleVal2 - this.minDiff;
      }
      this.handlePos1 = this.checkHandlePosition(this.handleVal1);
      this.handlePos2 = this.checkHandlePosition(this.handleVal2);
    };
    Slider2.prototype.dragRangeBarMove = function(event) {
      var _a, _b;
      if (event.type !== "touchmove") {
        event.preventDefault();
      }
      this.rangeBarDragged = true;
      var pos;
      this.rangeBar.style.transition = "none";
      this.firstHandle.style.transition = "none";
      this.secondHandle.style.transition = "none";
      var xPostion;
      var yPostion;
      if (event.type === "mousemove") {
        _a = [event.clientX, event.clientY], xPostion = _a[0], yPostion = _a[1];
      } else {
        _b = [event.changedTouches[0].clientX, event.changedTouches[0].clientY], xPostion = _b[0], yPostion = _b[1];
      }
      if (!(this.limits.enabled && this.limits.startHandleFixed) && !(this.limits.enabled && this.limits.endHandleFixed)) {
        if (!this.enableRtl) {
          pos = { x: xPostion - this.firstPartRemain, y: yPostion + this.secondPartRemain };
        } else {
          pos = { x: xPostion + this.secondPartRemain, y: yPostion + this.secondPartRemain };
        }
        this.handlePos1 = this.xyToPosition(pos);
        this.handleVal1 = this.positionToValue(this.handlePos1);
        if (!this.enableRtl) {
          pos = { x: xPostion + this.secondPartRemain, y: yPostion - this.firstPartRemain };
        } else {
          pos = { x: xPostion - this.firstPartRemain, y: yPostion - this.firstPartRemain };
        }
        this.handlePos2 = this.xyToPosition(pos);
        this.handleVal2 = this.positionToValue(this.handlePos2);
        if (this.limits.enabled) {
          var value = this.getLimitValueAndPosition(this.handleVal1, this.limits.minStart, this.limits.minEnd);
          this.handleVal1 = value[0];
          this.handlePos1 = value[1];
          if (this.handleVal1 === this.limits.minEnd) {
            this.handleValueAdjust(this.handleVal1, this.limits.minEnd, 1);
          }
          if (this.handleVal1 === this.limits.minStart) {
            this.handleValueAdjust(this.handleVal1, this.limits.minStart, 1);
          }
          value = this.getLimitValueAndPosition(this.handleVal2, this.limits.maxStart, this.limits.maxEnd);
          this.handleVal2 = value[0];
          this.handlePos2 = value[1];
          if (this.handleVal2 === this.limits.maxStart) {
            this.handleValueAdjust(this.handleVal2, this.limits.maxStart, 2);
          }
          if (this.handleVal2 === this.limits.maxEnd) {
            this.handleValueAdjust(this.handleVal2, this.limits.maxEnd, 2);
          }
        }
        if (this.handleVal2 === this.max) {
          this.handleValueAdjust(this.handleVal2, this.max, 2);
        }
        if (this.handleVal1 === this.min) {
          this.handleValueAdjust(this.handleVal1, this.min, 1);
        }
      }
      this.activeHandle = 1;
      this.setHandlePosition(event);
      this.activeHandle = 2;
      this.setHandlePosition(event);
      this.tooltipToggle(this.rangeBar);
      this.setRangeBar();
    };
    Slider2.prototype.sliderBarUp = function(event) {
      this.changeEvent("changed", event);
      this.handleFocusOut();
      this.firstHandle.classList.remove(classNames$1.sliderActiveHandle);
      if (this.type === "Range") {
        this.initialTooltip = false;
        this.secondHandle.classList.remove(classNames$1.sliderActiveHandle);
      }
      this.closeTooltip();
      if (this.isMaterial) {
        this.getHandle().classList.remove("e-large-thumb-size");
        if (this.isMaterialTooltip) {
          this.tooltipElement.classList.remove(classNames$1.materialTooltipActive);
        }
      }
      EventHandler.remove(document, "mousemove touchmove", this.sliderBarMove);
      EventHandler.remove(document, "mouseup touchend", this.sliderBarUp);
    };
    Slider2.prototype.sliderBarMove = function(evt) {
      if (evt.type !== "touchmove") {
        evt.preventDefault();
      }
      var pos;
      if (evt.type === "mousemove") {
        pos = { x: evt.clientX, y: evt.clientY };
      } else {
        pos = { x: evt.changedTouches[0].clientX, y: evt.changedTouches[0].clientY };
      }
      var handlepos = this.xyToPosition(pos);
      var handleVal = this.positionToValue(handlepos);
      handlepos = Math.round(handlepos);
      if (this.type !== "Range" && this.activeHandle === 1) {
        if (!(this.limits.enabled && this.limits.startHandleFixed)) {
          if (this.limits.enabled) {
            var valueAndPostion = this.getLimitValueAndPosition(handleVal, this.limits.minStart, this.limits.minEnd);
            handlepos = valueAndPostion[1];
            handleVal = valueAndPostion[0];
          }
          this.handlePos1 = handlepos;
          this.handleVal1 = handleVal;
        }
        this.firstHandle.classList.add(classNames$1.sliderActiveHandle);
      }
      if (this.type === "Range") {
        if (this.activeHandle === 1) {
          this.firstHandle.classList.add(classNames$1.sliderActiveHandle);
          if (!(this.limits.enabled && this.limits.startHandleFixed)) {
            if (handlepos > this.handlePos2) {
              handlepos = this.handlePos2;
              handleVal = this.handleVal2;
            }
            if (handlepos !== this.preHandlePos1) {
              if (this.limits.enabled) {
                var value = this.getLimitValueAndPosition(handleVal, this.limits.minStart, this.limits.minEnd);
                handleVal = value[0];
                handlepos = value[1];
              }
              this.handlePos1 = this.preHandlePos1 = handlepos;
              this.handleVal1 = handleVal;
              this.activeHandle = 1;
            }
          }
        } else if (this.activeHandle === 2) {
          this.secondHandle.classList.add(classNames$1.sliderActiveHandle);
          if (!(this.limits.enabled && this.limits.endHandleFixed)) {
            if (handlepos < this.handlePos1) {
              handlepos = this.handlePos1;
              handleVal = this.handleVal1;
            }
            if (handlepos !== this.preHandlePos2) {
              if (this.limits.enabled) {
                var value = this.getLimitValueAndPosition(handleVal, this.limits.maxStart, this.limits.maxEnd);
                handleVal = value[0];
                handlepos = value[1];
              }
              this.handlePos2 = this.preHandlePos2 = handlepos;
              this.handleVal2 = handleVal;
              this.activeHandle = 2;
            }
          }
        }
      }
      if (!this.checkRepeatedValue(handleVal)) {
        return;
      }
      this.getHandle().style.transition = this.scaleTransform;
      if (this.type !== "Default") {
        this.rangeBar.style.transition = "none";
      }
      this.setHandlePosition(evt);
      if (this.isMaterial && !this.tooltip.isVisible && !this.getHandle().classList.contains(classNames$1.sliderTabHandle)) {
        this.materialChange();
      }
      this.tooltipToggle(this.getHandle());
      if (this.type !== "Default") {
        this.setRangeBar();
      }
    };
    Slider2.prototype.dragRangeBarUp = function(event) {
      if (!this.rangeBarDragged) {
        this.focusSliderElement();
        this.sliderBarClick(event);
      } else {
        this.isDragComplete = true;
      }
      this.changeEvent("changed", event);
      this.closeTooltip();
      EventHandler.remove(document, "mousemove touchmove", this.dragRangeBarMove);
      EventHandler.remove(document, "mouseup touchend", this.dragRangeBarUp);
      this.rangeBarDragged = false;
    };
    Slider2.prototype.checkRepeatedValue = function(currentValue) {
      if (this.type === "Range") {
        var previousVal = this.enableRtl && this.orientation !== "Vertical" ? this.activeHandle === 1 ? this.previousVal[1] : this.previousVal[0] : this.activeHandle === 1 ? this.previousVal[0] : this.previousVal[1];
        if (currentValue === previousVal) {
          return 0;
        }
      } else {
        if (currentValue === this.previousVal) {
          return 0;
        }
      }
      return 1;
    };
    Slider2.prototype.refreshTooltip = function(target) {
      if (this.tooltip.isVisible && this.tooltipObj) {
        this.tooltipValue();
        if (target) {
          this.tooltipObj.refresh(target);
          this.tooltipTarget = target;
        }
      }
    };
    Slider2.prototype.openTooltip = function(target) {
      if (this.tooltip.isVisible && this.tooltipObj && !this.isMaterialTooltip) {
        this.tooltipValue();
        this.tooltipObj.open(target);
        this.tooltipTarget = target;
      }
    };
    Slider2.prototype.closeTooltip = function() {
      if (this.tooltip.isVisible && this.tooltipObj && this.tooltip.showOn !== "Always" && !this.isMaterialTooltip) {
        this.tooltipValue();
        this.tooltipObj.close();
        this.tooltipTarget = void 0;
      }
    };
    Slider2.prototype.keyDown = function(event) {
      switch (event.keyCode) {
        case 37:
        case 38:
        case 39:
        case 40:
        case 33:
        case 34:
        case 36:
        case 35:
          event.preventDefault();
          this.buttonClick(event);
          break;
      }
    };
    Slider2.prototype.wireButtonEvt = function(destroy2) {
      if (!destroy2) {
        EventHandler.add(this.firstBtn, "mouseleave touchleave", this.buttonFocusOut, this);
        EventHandler.add(this.secondBtn, "mouseleave touchleave", this.buttonFocusOut, this);
        EventHandler.add(this.firstBtn, "mousedown touchstart", this.repeatHandlerMouse, this);
        EventHandler.add(this.firstBtn, "mouseup mouseleave touchup touchend", this.repeatHandlerUp, this);
        EventHandler.add(this.secondBtn, "mousedown touchstart", this.repeatHandlerMouse, this);
        EventHandler.add(this.secondBtn, "mouseup mouseleave touchup touchend", this.repeatHandlerUp, this);
        EventHandler.add(this.firstBtn, "focusout", this.sliderFocusOut, this);
        EventHandler.add(this.secondBtn, "focusout", this.sliderFocusOut, this);
      } else {
        EventHandler.remove(this.firstBtn, "mouseleave touchleave", this.buttonFocusOut);
        EventHandler.remove(this.secondBtn, "mouseleave touchleave", this.buttonFocusOut);
        EventHandler.remove(this.firstBtn, "mousedown touchstart", this.repeatHandlerMouse);
        EventHandler.remove(this.firstBtn, "mouseup mouseleave touchup touchend", this.repeatHandlerUp);
        EventHandler.remove(this.secondBtn, "mousedown touchstart", this.repeatHandlerMouse);
        EventHandler.remove(this.secondBtn, "mouseup mouseleave touchup touchend", this.repeatHandlerUp);
        EventHandler.remove(this.firstBtn, "focusout", this.sliderFocusOut);
        EventHandler.remove(this.secondBtn, "focusout", this.sliderFocusOut);
      }
    };
    Slider2.prototype.rangeBarMousedown = function(event) {
      var _a, _b;
      event.preventDefault();
      this.focusSliderElement();
      if (this.type === "Range" && this.drag && event.target === this.rangeBar) {
        var xPostion = void 0;
        var yPostion = void 0;
        if (event.type === "mousedown") {
          _a = [event.clientX, event.clientY], xPostion = _a[0], yPostion = _a[1];
        } else if (event.type === "touchstart") {
          _b = [event.changedTouches[0].clientX, event.changedTouches[0].clientY], xPostion = _b[0], yPostion = _b[1];
        }
        if (this.orientation === "Horizontal") {
          this.firstPartRemain = xPostion - this.rangeBar.getBoundingClientRect().left;
          this.secondPartRemain = this.rangeBar.getBoundingClientRect().right - xPostion;
        } else {
          this.firstPartRemain = yPostion - this.rangeBar.getBoundingClientRect().top;
          this.secondPartRemain = this.rangeBar.getBoundingClientRect().bottom - yPostion;
        }
        this.minDiff = this.handleVal2 - this.handleVal1;
        this.tooltipToggle(this.rangeBar);
        var focusedElement = this.element.querySelector("." + classNames$1.sliderTabHandle);
        if (focusedElement) {
          focusedElement.classList.remove(classNames$1.sliderTabHandle);
        }
        EventHandler.add(document, "mousemove touchmove", this.dragRangeBarMove, this);
        EventHandler.add(document, "mouseup touchend", this.dragRangeBarUp, this);
      }
    };
    Slider2.prototype.elementClick = function(event) {
      if (this.isDragComplete) {
        this.isDragComplete = false;
        return;
      }
      event.preventDefault();
      this.focusSliderElement();
      this.sliderBarClick(event);
      this.focusHandle();
    };
    Slider2.prototype.wireEvents = function() {
      this.onresize = this.reposition.bind(this);
      window.addEventListener("resize", this.onresize);
      if (this.enabled && !this.readonly) {
        EventHandler.add(this.element, "click", this.elementClick, this);
        if (this.type === "Range" && this.drag) {
          EventHandler.add(this.rangeBar, "mousedown touchstart", this.rangeBarMousedown, this);
        }
        EventHandler.add(this.sliderContainer, "keydown", this.keyDown, this);
        EventHandler.add(this.sliderContainer, "keyup", this.keyUp, this);
        EventHandler.add(this.element, "focusout", this.sliderFocusOut, this);
        EventHandler.add(this.sliderContainer, "mouseover mouseout touchstart touchend", this.hover, this);
        this.wireFirstHandleEvt(false);
        if (this.type === "Range") {
          this.wireSecondHandleEvt(false);
        }
        if (this.showButtons) {
          this.wireButtonEvt(false);
        }
        this.wireMaterialTooltipEvent(false);
        if (this.isForm) {
          EventHandler.add(this.formElement, "reset", this.formResetHandler, this);
        }
      }
    };
    Slider2.prototype.unwireEvents = function() {
      EventHandler.remove(this.element, "click", this.elementClick);
      if (this.type === "Range" && this.drag) {
        EventHandler.remove(this.rangeBar, "mousedown touchstart", this.rangeBarMousedown);
      }
      EventHandler.remove(this.sliderContainer, "keydown", this.keyDown);
      EventHandler.remove(this.sliderContainer, "keyup", this.keyUp);
      EventHandler.remove(this.element, "focusout", this.sliderFocusOut);
      EventHandler.remove(this.sliderContainer, "mouseover mouseout touchstart touchend", this.hover);
      this.wireFirstHandleEvt(true);
      if (this.type === "Range") {
        this.wireSecondHandleEvt(true);
      }
      if (this.showButtons) {
        this.wireButtonEvt(true);
      }
      this.wireMaterialTooltipEvent(true);
      EventHandler.remove(this.element, "reset", this.formResetHandler);
    };
    Slider2.prototype.formResetHandler = function() {
      this.setProperties({ "value": this.formResetValue }, true);
      this.setValue();
    };
    Slider2.prototype.keyUp = function(event) {
      if (event.keyCode === 9 && event.target.classList.contains(classNames$1.sliderHandle)) {
        this.focusSliderElement();
        if (!event.target.classList.contains(classNames$1.sliderTabHandle)) {
          if (this.element.querySelector("." + classNames$1.sliderTabHandle)) {
            this.element.querySelector("." + classNames$1.sliderTabHandle).classList.remove(classNames$1.sliderTabHandle);
          }
          event.target.classList.add(classNames$1.sliderTabHandle);
          var parentElement = event.target.parentElement;
          if (parentElement === this.element) {
            parentElement.querySelector("." + classNames$1.sliderTrack).classList.add(classNames$1.sliderTabTrack);
            if (this.type === "Range" || this.type === "MinRange") {
              parentElement.querySelector("." + classNames$1.rangeBar).classList.add(classNames$1.sliderTabRange);
            }
          }
          if (this.type === "Range") {
            event.target.previousSibling.classList.contains(classNames$1.sliderHandle) ? this.activeHandle = 2 : this.activeHandle = 1;
          }
          this.getHandle().focus();
          this.tooltipToggle(this.getHandle());
        }
      }
      this.closeTooltip();
      this.changeEvent("changed", event);
    };
    Slider2.prototype.hover = function(event) {
      if (!isNullOrUndefined(event)) {
        if (event.type === "mouseover" || event.type === "touchmove" || event.type === "mousemove" || event.type === "pointermove" || event.type === "touchstart") {
          this.sliderContainer.classList.add(classNames$1.sliderHover);
        } else {
          this.sliderContainer.classList.remove(classNames$1.sliderHover);
          var curTarget = event.currentTarget;
          if (this.tooltip.isVisible && this.tooltip.showOn !== "Always" && this.tooltipObj && this.isMaterialTooltip && !curTarget.classList.contains(classNames$1.sliderHandleFocused) && !curTarget.classList.contains(classNames$1.sliderTabHandle)) {
            this.closeMaterialTooltip();
          }
        }
      }
    };
    Slider2.prototype.sliderFocusOut = function(event) {
      if (event.relatedTarget !== this.secondHandle && event.relatedTarget !== this.firstHandle && event.relatedTarget !== this.element && event.relatedTarget !== this.firstBtn && event.relatedTarget !== this.secondBtn) {
        this.closeMaterialTooltip();
        this.closeTooltip();
        if (this.element.querySelector("." + classNames$1.sliderTabHandle)) {
          this.element.querySelector("." + classNames$1.sliderTabHandle).classList.remove(classNames$1.sliderTabHandle);
        }
        if (this.element.querySelector("." + classNames$1.sliderTabTrack)) {
          this.element.querySelector("." + classNames$1.sliderTabTrack).classList.remove(classNames$1.sliderTabTrack);
          if ((this.type === "Range" || this.type === "MinRange") && this.element.querySelector("." + classNames$1.sliderTabRange)) {
            this.element.querySelector("." + classNames$1.sliderTabRange).classList.remove(classNames$1.sliderTabRange);
          }
        }
        this.hiddenInput.focus();
        this.hiddenInput.blur();
        this.isElementFocused = false;
      }
    };
    Slider2.prototype.removeElement = function(element2) {
      if (element2.parentNode) {
        element2.parentNode.removeChild(element2);
      }
    };
    Slider2.prototype.changeSliderType = function(type, args) {
      if (this.isMaterialTooltip && this.materialHandle) {
        this.sliderContainer.classList.remove(classNames$1.materialSlider);
        this.removeElement(this.materialHandle);
        this.materialHandle = void 0;
      }
      this.removeElement(this.firstHandle);
      this.firstHandle = void 0;
      if (type !== "Default") {
        if (type === "Range") {
          this.removeElement(this.secondHandle);
          this.secondHandle = void 0;
        }
        this.removeElement(this.rangeBar);
        this.rangeBar = void 0;
      }
      if (this.tooltip.isVisible && !isNullOrUndefined(this.tooltipObj)) {
        this.tooltipObj.destroy();
        this.tooltipElement = void 0;
        this.tooltipCollidedPosition = void 0;
      }
      if (this.limits.enabled) {
        if (type === "MinRange" || type === "Default") {
          if (!isNullOrUndefined(this.limitBarFirst)) {
            this.removeElement(this.limitBarFirst);
            this.limitBarFirst = void 0;
          }
        } else {
          if (!isNullOrUndefined(this.limitBarSecond)) {
            this.removeElement(this.limitBarSecond);
            this.limitBarSecond = void 0;
          }
        }
      }
      this.activeHandle = 1;
      this.getThemeInitialization();
      if (this.type === "Range") {
        this.rangeValueUpdate();
      }
      this.createRangeBar();
      if (this.limits.enabled) {
        this.createLimitBar();
      }
      this.setHandler();
      this.setOrientClass();
      this.wireFirstHandleEvt(false);
      if (this.type === "Range") {
        this.wireSecondHandleEvt(false);
      }
      this.setValue();
      if (this.tooltip.isVisible) {
        this.renderTooltip();
        this.wireMaterialTooltipEvent(false);
      }
      this.setBarColor();
      if (args !== "tooltip") {
        this.updateConfig();
      }
    };
    Slider2.prototype.changeRtl = function() {
      if (!this.enableRtl && this.type === "Range") {
        this.value = [this.handleVal2, this.handleVal1];
      }
      this.updateConfig();
      if (this.tooltip.isVisible) {
        this.tooltipObj.refresh(this.firstHandle);
      }
      if (this.showButtons) {
        var enabledRTL = this.enableRtl && this.orientation !== "Vertical";
        attributes(enabledRTL ? this.secondBtn : this.firstBtn, { "aria-label": "Decrease", title: "Decrease" });
        attributes(enabledRTL ? this.firstBtn : this.secondBtn, { "aria-label": "Increase", title: "Increase" });
      }
    };
    Slider2.prototype.changeOrientation = function() {
      this.changeSliderType(this.type, "null");
    };
    Slider2.prototype.updateConfig = function() {
      this.setEnableRTL();
      this.setValue();
      if (this.tooltip.isVisible) {
        this.refreshTooltip(this.tooltipTarget);
      }
      if (this.ticks.placement !== "None") {
        if (this.ul) {
          this.removeElement(this.ul);
          this.ul = void 0;
          this.renderScale();
        }
      }
      this.limitsPropertyChange();
    };
    Slider2.prototype.limitsPropertyChange = function() {
      if (this.limits.enabled) {
        if (isNullOrUndefined(this.limitBarFirst) && this.type !== "Range") {
          this.createLimitBar();
        }
        if (isNullOrUndefined(this.limitBarFirst) && isNullOrUndefined(this.limitBarSecond) && this.type === "Range") {
          this.createLimitBar();
        }
        this.setLimitBar();
        this.setValue();
      } else {
        if (!isNullOrUndefined(this.limitBarFirst)) {
          detach(this.limitBarFirst);
        }
        if (!isNullOrUndefined(this.limitBarSecond)) {
          detach(this.limitBarSecond);
        }
      }
    };
    Slider2.prototype.getPersistData = function() {
      var keyEntity = ["value"];
      return this.addOnPersist(keyEntity);
    };
    Slider2.prototype.destroy = function() {
      _super.prototype.destroy.call(this);
      this.unwireEvents();
      window.removeEventListener("resize", this.onresize);
      removeClass([this.sliderContainer], [classNames$1.sliderDisabled]);
      this.firstHandle.removeAttribute("aria-orientation");
      if (this.type === "Range") {
        this.secondHandle.removeAttribute("aria-orientation");
      }
      this.sliderContainer.parentNode.insertBefore(this.element, this.sliderContainer);
      detach(this.sliderContainer);
      if (this.tooltip.isVisible) {
        this.tooltipObj.destroy();
      }
      this.element.innerHTML = "";
    };
    Slider2.prototype.onPropertyChanged = function(newProp, oldProp) {
      var _this = this;
      for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {
        var prop = _a[_i];
        switch (prop) {
          case "cssClass":
            this.setCSSClass(oldProp.cssClass);
            break;
          case "value":
            if (newProp && oldProp) {
              var value = isNullOrUndefined(newProp.value) ? this.type === "Range" ? [this.min, this.max] : this.min : newProp.value;
              this.setProperties({ "value": value }, true);
              if (!isNullOrUndefined(oldProp.value) && oldProp.value.toString() !== value.toString()) {
                this.setValue();
                this.refreshTooltip(this.tooltipTarget);
                if (this.type === "Range") {
                  if (isNullOrUndefined(newProp.value) || oldProp.value[1] === value[1]) {
                    this.activeHandle = 1;
                  } else {
                    this.activeHandle = 2;
                  }
                }
              }
            }
            break;
          case "min":
          case "step":
          case "max":
            this.setMinMaxValue();
            break;
          case "tooltip":
            if (!isNullOrUndefined(newProp.tooltip) && !isNullOrUndefined(oldProp.tooltip)) {
              this.setTooltip(prop);
            }
            break;
          case "type":
            if (!isNullOrUndefined(oldProp) && Object.keys(oldProp).length && !isNullOrUndefined(oldProp.type)) {
              this.changeSliderType(oldProp.type, prop);
              this.setZindex();
            }
            break;
          case "enableRtl":
            if (oldProp.enableRtl !== newProp.enableRtl && this.orientation !== "Vertical") {
              this.rtl = oldProp.enableRtl;
              this.changeRtl();
            }
            break;
          case "limits":
            this.limitsPropertyChange();
            break;
          case "orientation":
            this.changeOrientation();
            break;
          case "ticks":
            if (!isNullOrUndefined(this.sliderContainer.querySelector("." + classNames$1.scale))) {
              detach(this.ul);
              Array.prototype.forEach.call(this.sliderContainer.classList, function(className) {
                if (className.match(/e-scale-/)) {
                  _this.sliderContainer.classList.remove(className);
                }
              });
            }
            if (this.ticks.placement !== "None") {
              this.renderScale();
              this.setZindex();
            }
            break;
          case "locale":
            if (this.showButtons) {
              this.buttonTitle();
            }
            break;
          case "showButtons":
            if (newProp.showButtons) {
              this.setButtons();
              this.reposition();
              if (this.enabled && !this.readonly) {
                this.wireButtonEvt(false);
              }
            } else {
              if (this.firstBtn && this.secondBtn) {
                this.sliderContainer.removeChild(this.firstBtn);
                this.sliderContainer.removeChild(this.secondBtn);
                this.sliderContainer.classList.remove(classNames$1.sliderButtonClass);
                this.firstBtn = void 0;
                this.secondBtn = void 0;
                this.reposition();
              }
            }
            break;
          case "enabled":
            this.setEnabled();
            break;
          case "readonly":
            this.setReadOnly();
            break;
          case "customValues":
            this.setValue();
            this.reposition();
            break;
          case "colorRange":
            this.reposition();
            break;
          case "width":
            this.setElementWidth(newProp.width);
            this.setMinMaxValue();
            if (this.limits) {
              this.limitsPropertyChange();
            }
            break;
        }
      }
    };
    Slider2.prototype.setReadOnly = function() {
      if (this.readonly) {
        this.unwireEvents();
        this.sliderContainer.classList.add(classNames$1.readonly);
      } else {
        this.wireEvents();
        this.sliderContainer.classList.remove(classNames$1.readonly);
      }
    };
    Slider2.prototype.setMinMaxValue = function() {
      var _this = this;
      this.setValue();
      this.refreshTooltip(this.tooltipTarget);
      if (!isNullOrUndefined(this.sliderContainer.querySelector("." + classNames$1.scale))) {
        if (this.ul) {
          detach(this.ul);
          Array.prototype.forEach.call(this.sliderContainer.classList, function(className) {
            if (className.match(/e-scale-/)) {
              _this.sliderContainer.classList.remove(className);
            }
          });
        }
      }
      if (this.ticks.placement !== "None") {
        this.renderScale();
        this.setZindex();
      }
    };
    Slider2.prototype.setZindex = function() {
      this.zIndex = 6;
      if (!isNullOrUndefined(this.ticks) && this.ticks.placement !== "None") {
        this.ul.style.zIndex = this.zIndex + -7 + "";
        this.element.style.zIndex = this.zIndex + 2 + "";
      }
      if (!this.isMaterial && !isNullOrUndefined(this.ticks) && this.ticks.placement === "Both") {
        this.element.style.zIndex = this.zIndex + 2 + "";
      }
      this.firstHandle.style.zIndex = this.zIndex + 3 + "";
      if (this.type === "Range") {
        this.secondHandle.style.zIndex = this.zIndex + 4 + "";
      }
    };
    Slider2.prototype.setTooltip = function(args) {
      this.changeSliderType(this.type, args);
    };
    Slider2.prototype.setBarColor = function() {
      var trackPosition;
      var trackClassName;
      var child = this.sliderTrack.lastElementChild;
      while (child) {
        this.sliderTrack.removeChild(child);
        child = this.sliderTrack.lastElementChild;
      }
      for (var i = 0; i < this.colorRange.length; i++) {
        if (!isNullOrUndefined(this.colorRange[i].start) && !isNullOrUndefined(this.colorRange[i].end)) {
          if (this.colorRange[i].end > this.colorRange[i].start) {
            if (this.colorRange[i].start < this.min) {
              this.colorRange[i].start = this.min;
            }
            if (this.colorRange[i].end > this.max) {
              this.colorRange[i].end = this.max;
            }
            var startingPosition = this.checkHandlePosition(this.colorRange[i].start);
            var endPosition = this.checkHandlePosition(this.colorRange[i].end);
            var trackContainer = this.createElement("div");
            trackContainer.style.backgroundColor = this.colorRange[i].color;
            trackContainer.style.border = "1px solid " + this.colorRange[i].color;
            if (this.orientation === "Horizontal") {
              trackClassName = classNames$1.sliderHorizantalColor;
              if (this.enableRtl) {
                if (isNullOrUndefined(this.customValues)) {
                  trackPosition = this.checkHandlePosition(this.max) - this.checkHandlePosition(this.colorRange[i].end);
                } else {
                  trackPosition = this.checkHandlePosition(this.customValues.length - this.colorRange[i].end - 1);
                }
              } else {
                trackPosition = this.checkHandlePosition(this.colorRange[i].start);
              }
              trackContainer.style.width = endPosition - startingPosition + "px";
              trackContainer.style.left = trackPosition + "px";
            } else {
              trackClassName = classNames$1.sliderVerticalColor;
              trackPosition = this.checkHandlePosition(this.colorRange[i].start);
              trackContainer.style.height = endPosition - startingPosition + "px";
              trackContainer.style.bottom = trackPosition + "px";
            }
            trackContainer.classList.add(trackClassName);
            this.sliderTrack.appendChild(trackContainer);
          }
        }
      }
    };
    Slider2.prototype.getModuleName = function() {
      return "slider";
    };
    __decorate$v([
      Property(null)
    ], Slider2.prototype, "value", void 0);
    __decorate$v([
      Property(null)
    ], Slider2.prototype, "customValues", void 0);
    __decorate$v([
      Property(1)
    ], Slider2.prototype, "step", void 0);
    __decorate$v([
      Property(null)
    ], Slider2.prototype, "width", void 0);
    __decorate$v([
      Property(0)
    ], Slider2.prototype, "min", void 0);
    __decorate$v([
      Property(100)
    ], Slider2.prototype, "max", void 0);
    __decorate$v([
      Property(false)
    ], Slider2.prototype, "readonly", void 0);
    __decorate$v([
      Property("Default")
    ], Slider2.prototype, "type", void 0);
    __decorate$v([
      Collection([{}], ColorRangeData)
    ], Slider2.prototype, "colorRange", void 0);
    __decorate$v([
      Complex({}, TicksData)
    ], Slider2.prototype, "ticks", void 0);
    __decorate$v([
      Complex({}, LimitData)
    ], Slider2.prototype, "limits", void 0);
    __decorate$v([
      Property(true)
    ], Slider2.prototype, "enabled", void 0);
    __decorate$v([
      Complex({}, TooltipData)
    ], Slider2.prototype, "tooltip", void 0);
    __decorate$v([
      Property(false)
    ], Slider2.prototype, "showButtons", void 0);
    __decorate$v([
      Property(true)
    ], Slider2.prototype, "enableAnimation", void 0);
    __decorate$v([
      Property("Horizontal")
    ], Slider2.prototype, "orientation", void 0);
    __decorate$v([
      Property("")
    ], Slider2.prototype, "cssClass", void 0);
    __decorate$v([
      Property(false)
    ], Slider2.prototype, "enableHtmlSanitizer", void 0);
    __decorate$v([
      Event$1()
    ], Slider2.prototype, "created", void 0);
    __decorate$v([
      Event$1()
    ], Slider2.prototype, "change", void 0);
    __decorate$v([
      Event$1()
    ], Slider2.prototype, "changed", void 0);
    __decorate$v([
      Event$1()
    ], Slider2.prototype, "renderingTicks", void 0);
    __decorate$v([
      Event$1()
    ], Slider2.prototype, "renderedTicks", void 0);
    __decorate$v([
      Event$1()
    ], Slider2.prototype, "tooltipChange", void 0);
    Slider2 = __decorate$v([
      NotifyPropertyChanges
    ], Slider2);
    return Slider2;
  }(Component)
);
var __extends$F = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$u = globalThis && globalThis.__decorate || function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i = decorators.length - 1; i >= 0; i--)
      if (d = decorators[i])
        r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var regex = {
  /* eslint-disable no-useless-escape */
  EMAIL: new RegExp("^[A-Za-z0-9._%+-]{1,}@[A-Za-z0-9._%+-]{1,}([.]{1}[a-zA-Z0-9]{2,}|[.]{1}[a-zA-Z0-9]{2,4}[.]{1}[a-zA-Z0-9]{2,4})$"),
  /* eslint-disable-next-line security/detect-unsafe-regex */
  URL: /^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/m,
  DATE_ISO: new RegExp("^([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])$"),
  DIGITS: new RegExp("^[0-9]*$"),
  PHONE: new RegExp("^[+]?[0-9]{9,13}$"),
  CREDITCARD: new RegExp("^\\d{13,16}$")
  /* eslint-enable no-useless-escape */
};
var ErrorOption;
(function(ErrorOption2) {
  ErrorOption2[ErrorOption2["Message"] = 0] = "Message";
  ErrorOption2[ErrorOption2["Label"] = 1] = "Label";
})(ErrorOption || (ErrorOption = {}));
var FormValidator = (
  /** @class */
  function(_super) {
    __extends$F(FormValidator2, _super);
    function FormValidator2(element2, options) {
      var _this = _super.call(this, options, element2) || this;
      _this.validated = [];
      _this.errorRules = [];
      _this.allowSubmit = false;
      _this.required = "required";
      _this.infoElement = null;
      _this.inputElement = null;
      _this.selectQuery = "input:not([type=reset]):not([type=button]), select, textarea";
      _this.localyMessage = {};
      _this.defaultMessages = {
        required: "This field is required.",
        email: "Please enter a valid email address.",
        url: "Please enter a valid URL.",
        date: "Please enter a valid date.",
        dateIso: "Please enter a valid date ( ISO ).",
        creditcard: "Please enter valid card number",
        number: "Please enter a valid number.",
        digits: "Please enter only digits.",
        maxLength: "Please enter no more than {0} characters.",
        minLength: "Please enter at least {0} characters.",
        rangeLength: "Please enter a value between {0} and {1} characters long.",
        range: "Please enter a value between {0} and {1}.",
        max: "Please enter a value less than or equal to {0}.",
        min: "Please enter a value greater than or equal to {0}.",
        regex: "Please enter a correct value.",
        tel: "Please enter a valid phone number.",
        pattern: "Please enter a correct pattern value.",
        equalTo: "Please enter the valid match text"
      };
      if (typeof _this.rules === "undefined") {
        _this.rules = {};
      }
      _this.l10n = new L10n("formValidator", _this.defaultMessages, _this.locale);
      if (_this.locale) {
        _this.localeFunc();
      }
      onIntlChange.on("notifyExternalChange", _this.afterLocalization, _this);
      element2 = typeof element2 === "string" ? select$1(element2, document) : element2;
      if (_this.element != null) {
        _this.element.setAttribute("novalidate", "");
        _this.inputElements = selectAll(_this.selectQuery, _this.element);
        _this.createHTML5Rules();
        _this.wireEvents();
      } else {
        return void 0;
      }
      return _this;
    }
    FormValidator_1 = FormValidator2;
    FormValidator2.prototype.addRules = function(name, rules) {
      if (name) {
        if (this.rules.hasOwnProperty(name)) {
          extend(this.rules["" + name], rules, {});
        } else {
          this.rules["" + name] = rules;
        }
      }
    };
    FormValidator2.prototype.removeRules = function(name, rules) {
      if (!name && !rules) {
        this.rules = {};
      } else if (this.rules["" + name] && !rules) {
        delete this.rules["" + name];
      } else if (!isNullOrUndefined(this.rules["" + name] && rules)) {
        for (var i = 0; i < rules.length; i++) {
          delete this.rules["" + name][rules[parseInt(i.toString())]];
        }
      } else {
        return;
      }
    };
    FormValidator2.prototype.validate = function(selected) {
      var rules = Object.keys(this.rules);
      if (selected && rules.length) {
        this.validateRules(selected);
        return rules.indexOf(selected) !== -1 && this.errorRules.filter(function(data) {
          return data.name === selected;
        }).length === 0;
      } else {
        this.errorRules = [];
        for (var _i = 0, rules_1 = rules; _i < rules_1.length; _i++) {
          var name_1 = rules_1[_i];
          this.validateRules(name_1);
        }
        return this.errorRules.length === 0;
      }
    };
    FormValidator2.prototype.reset = function() {
      this.element.reset();
      this.clearForm();
    };
    FormValidator2.prototype.getInputElement = function(name) {
      this.inputElement = select$1('[name="' + name + '"]', this.element);
      return this.inputElement;
    };
    FormValidator2.prototype.destroy = function() {
      this.reset();
      this.unwireEvents();
      this.rules = {};
      var elements = selectAll("." + this.errorClass + ", ." + this.validClass, this.element);
      for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {
        var element2 = elements_1[_i];
        detach(element2);
      }
      _super.prototype.destroy.call(this);
      onIntlChange.off("notifyExternalChange", this.afterLocalization);
    };
    FormValidator2.prototype.onPropertyChanged = function(newProp, oldProp) {
      for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {
        var prop = _a[_i];
        switch (prop) {
          case "locale":
            this.localeFunc();
            break;
        }
      }
    };
    FormValidator2.prototype.localeFunc = function() {
      for (var _i = 0, _a = Object.keys(this.defaultMessages); _i < _a.length; _i++) {
        var key = _a[_i];
        this.l10n.setLocale(this.locale);
        var value = this.l10n.getConstant(key);
        this.localyMessage["" + key] = value;
      }
    };
    FormValidator2.prototype.getModuleName = function() {
      return "formValidator";
    };
    FormValidator2.prototype.afterLocalization = function(args) {
      this.locale = args.locale;
      this.localeFunc();
    };
    FormValidator2.prototype.refresh = function() {
      this.unwireEvents();
      this.inputElements = selectAll(this.selectQuery, this.element);
      this.wireEvents();
    };
    FormValidator2.prototype.clearForm = function() {
      this.errorRules = [];
      this.validated = [];
      var elements = selectAll(this.selectQuery, this.element);
      for (var _i = 0, elements_2 = elements; _i < elements_2.length; _i++) {
        var element2 = elements_2[_i];
        var input = element2;
        input.removeAttribute("aria-invalid");
        input.classList.remove(this.errorClass);
        if (input.name.length > 0) {
          this.getInputElement(input.name);
          this.getErrorElement(input.name);
          this.hideMessage(input.name);
        }
        input.classList.remove(this.validClass);
      }
    };
    FormValidator2.prototype.createHTML5Rules = function() {
      var defRules = [
        "required",
        "validateHidden",
        "regex",
        "rangeLength",
        "maxLength",
        "minLength",
        "dateIso",
        "digits",
        "pattern",
        "data-val-required",
        "type",
        "data-validation",
        "min",
        "max",
        "range",
        "equalTo",
        "data-val-minlength-min",
        "data-val-equalto-other",
        "data-val-maxlength-max",
        "data-val-range-min",
        "data-val-regex-pattern",
        "data-val-length-max",
        "data-val-creditcard",
        "data-val-phone"
      ];
      var acceptedTypes = ["hidden", "email", "url", "date", "number", "tel"];
      for (var _i = 0, _a = this.inputElements; _i < _a.length; _i++) {
        var input = _a[_i];
        var allRule = {};
        for (var _b = 0, defRules_1 = defRules; _b < defRules_1.length; _b++) {
          var rule = defRules_1[_b];
          if (input.getAttribute(rule) !== null) {
            switch (rule) {
              case "required":
                this.defRule(input, allRule, rule, input.required);
                break;
              case "data-validation":
                rule = input.getAttribute(rule);
                this.defRule(input, allRule, rule, true);
                break;
              case "type":
                if (acceptedTypes.indexOf(input.type) !== -1) {
                  this.defRule(input, allRule, input.type, true);
                }
                break;
              case "rangeLength":
              case "range":
                this.defRule(input, allRule, rule, JSON.parse(input.getAttribute(rule)));
                break;
              case "equalTo":
                {
                  var id = input.getAttribute(rule);
                  this.defRule(input, allRule, rule, id);
                }
                break;
              default:
                if (input.getAttribute("data-val") === "true") {
                  this.annotationRule(input, allRule, rule, input.getAttribute(rule));
                } else {
                  this.defRule(input, allRule, rule, input.getAttribute(rule));
                }
            }
          }
        }
        if (Object.keys(allRule).length !== 0) {
          this.addRules(input.name, allRule);
        }
      }
    };
    FormValidator2.prototype.annotationRule = function(input, ruleCon, ruleName, value) {
      var annotationRule = ruleName.split("-");
      var rulesList = ["required", "creditcard", "phone", "maxlength", "minlength", "range", "regex", "equalto"];
      var ruleFirstName = annotationRule[annotationRule.length - 1];
      var ruleSecondName = annotationRule[annotationRule.length - 2];
      if (rulesList.indexOf(ruleFirstName) !== -1) {
        switch (ruleFirstName) {
          case "required":
            this.defRule(input, ruleCon, "required", value);
            break;
          case "creditcard":
            this.defRule(input, ruleCon, "creditcard", value);
            break;
          case "phone":
            this.defRule(input, ruleCon, "tel", value);
            break;
        }
      } else if (rulesList.indexOf(ruleSecondName) !== -1) {
        switch (ruleSecondName) {
          case "maxlength":
            this.defRule(input, ruleCon, "maxLength", value);
            break;
          case "minlength":
            this.defRule(input, ruleCon, "minLength", value);
            break;
          case "range":
            {
              var minvalue = input.getAttribute("data-val-range-min");
              var maxvalue = input.getAttribute("data-val-range-max");
              this.defRule(input, ruleCon, "range", [minvalue, maxvalue]);
            }
            break;
          case "equalto":
            {
              var id = input.getAttribute(ruleName).split(".");
              this.defRule(input, ruleCon, "equalTo", id[id.length - 1]);
            }
            break;
          case "regex":
            this.defRule(input, ruleCon, "regex", value);
            break;
        }
      }
    };
    FormValidator2.prototype.defRule = function(input, ruleCon, ruleName, value) {
      var message = input.getAttribute("data-" + ruleName + "-message");
      var annotationMessage = input.getAttribute("data-val-" + ruleName);
      var customMessage;
      if (this.rules[input.name] && ruleName !== "validateHidden" && ruleName !== "hidden") {
        this.getInputElement(input.name);
        customMessage = this.getErrorMessage(this.rules[input.name]["" + ruleName], ruleName);
      }
      if (message) {
        value = [value, message];
      } else if (annotationMessage) {
        value = [value, annotationMessage];
      } else if (customMessage) {
        value = [value, customMessage];
      }
      ruleCon["" + ruleName] = value;
    };
    FormValidator2.prototype.wireEvents = function() {
      for (var _i = 0, _a = this.inputElements; _i < _a.length; _i++) {
        var input = _a[_i];
        if (FormValidator_1.isCheckable(input)) {
          EventHandler.add(input, "click", this.clickHandler, this);
        } else if (input.tagName === "SELECT") {
          EventHandler.add(input, "change", this.changeHandler, this);
        } else {
          EventHandler.add(input, "focusout", this.focusOutHandler, this);
          EventHandler.add(input, "keyup", this.keyUpHandler, this);
        }
      }
      EventHandler.add(this.element, "submit", this.submitHandler, this);
      EventHandler.add(this.element, "reset", this.resetHandler, this);
    };
    FormValidator2.prototype.unwireEvents = function() {
      for (var _i = 0, _a = this.inputElements; _i < _a.length; _i++) {
        var input = _a[_i];
        EventHandler.clearEvents(input);
      }
      EventHandler.remove(this.element, "submit", this.submitHandler);
      EventHandler.remove(this.element, "reset", this.resetHandler);
    };
    FormValidator2.prototype.focusOutHandler = function(e) {
      this.trigger("focusout", e);
      var element2 = e.target;
      if (this.rules[element2.name]) {
        if (this.rules[element2.name][this.required] || element2.value.length > 0) {
          this.validate(element2.name);
        } else if (this.validated.indexOf(element2.name) === -1) {
          this.validated.push(element2.name);
        }
      }
    };
    FormValidator2.prototype.keyUpHandler = function(e) {
      this.trigger("keyup", e);
      var element2 = e.target;
      var excludeKeys = [16, 17, 18, 20, 35, 36, 37, 38, 39, 40, 45, 144, 225];
      if (e.which === 9 && (!this.rules[element2.name] || this.rules[element2.name] && !this.rules[element2.name][this.required])) {
        return;
      }
      if (this.validated.indexOf(element2.name) !== -1 && this.rules[element2.name] && excludeKeys.indexOf(e.which) === -1) {
        this.validate(element2.name);
      }
    };
    FormValidator2.prototype.clickHandler = function(e) {
      this.trigger("click", e);
      var element2 = e.target;
      if (element2.type !== "submit") {
        this.validate(element2.name);
      } else if (element2.getAttribute("formnovalidate") !== null) {
        this.allowSubmit = true;
      }
    };
    FormValidator2.prototype.changeHandler = function(e) {
      this.trigger("change", e);
      var element2 = e.target;
      this.validate(element2.name);
    };
    FormValidator2.prototype.submitHandler = function(e) {
      this.trigger("submit", e);
      if (!this.allowSubmit && !this.validate()) {
        e.preventDefault();
      } else {
        this.allowSubmit = false;
      }
    };
    FormValidator2.prototype.resetHandler = function() {
      this.clearForm();
    };
    FormValidator2.prototype.validateRules = function(name) {
      if (!this.rules["" + name]) {
        return;
      }
      var rules = Object.keys(this.rules["" + name]);
      var hiddenType = false;
      var validateHiddenType = false;
      var vhPos = rules.indexOf("validateHidden");
      var hPos = rules.indexOf("hidden");
      this.getInputElement(name);
      if (hPos !== -1) {
        hiddenType = true;
      }
      if (vhPos !== -1) {
        validateHiddenType = true;
      }
      if (!hiddenType || hiddenType && validateHiddenType) {
        if (vhPos !== -1) {
          rules.splice(vhPos, 1);
        }
        if (hPos !== -1) {
          rules.splice(hPos - 1, 1);
        }
        this.getErrorElement(name);
        for (var _i = 0, rules_2 = rules; _i < rules_2.length; _i++) {
          var rule = rules_2[_i];
          var errorMessage = this.getErrorMessage(this.rules["" + name]["" + rule], rule);
          var errorRule = { name, message: errorMessage };
          var eventArgs = {
            inputName: name,
            element: this.inputElement,
            message: errorMessage
          };
          if (!this.isValid(name, rule) && !this.inputElement.classList.contains(this.ignore)) {
            this.removeErrorRules(name);
            this.errorRules.push(errorRule);
            this.inputElement.setAttribute("aria-invalid", "true");
            this.inputElement.setAttribute("aria-describedby", this.inputElement.id + "-info");
            this.inputElement.classList.add(this.errorClass);
            this.inputElement.classList.remove(this.validClass);
            if (!this.infoElement) {
              this.createErrorElement(name, errorRule.message, this.inputElement);
            } else {
              this.showMessage(errorRule);
            }
            eventArgs.errorElement = this.infoElement;
            eventArgs.status = "failure";
            this.inputElement.classList.add(this.errorClass);
            this.inputElement.classList.remove(this.validClass);
            this.optionalValidationStatus(name, eventArgs);
            this.trigger("validationComplete", eventArgs);
            if (rule === "required") {
              this.inputElement.setAttribute("aria-required", "true");
            }
            break;
          } else {
            this.hideMessage(name);
            eventArgs.status = "success";
            this.trigger("validationComplete", eventArgs);
          }
        }
      } else {
        return;
      }
    };
    FormValidator2.prototype.optionalValidationStatus = function(name, refer) {
      if (!this.rules["" + name][this.required] && !this.inputElement.value.length && !isNullOrUndefined(this.infoElement)) {
        this.infoElement.innerHTML = this.inputElement.value;
        this.infoElement.setAttribute("aria-invalid", "false");
        refer.status = "";
        this.hideMessage(name);
      }
    };
    FormValidator2.prototype.isValid = function(name, rule) {
      var params = this.rules["" + name]["" + rule];
      var param = params instanceof Array && typeof params[1] === "string" ? params[0] : params;
      var currentRule = this.rules["" + name]["" + rule];
      var args = { value: this.inputElement.value, param, element: this.inputElement, formElement: this.element };
      this.trigger("validationBegin", args);
      if (!args.param && rule === "required") {
        return true;
      }
      if (currentRule && typeof currentRule[0] === "function") {
        var fn = currentRule[0];
        return fn.call(this, { element: this.inputElement, value: this.inputElement.value });
      } else if (FormValidator_1.isCheckable(this.inputElement)) {
        if (rule !== "required") {
          return true;
        }
        return selectAll('input[name="' + name + '"]:checked', this.element).length > 0;
      } else {
        return FormValidator_1.checkValidator["" + rule](args);
      }
    };
    FormValidator2.prototype.getErrorMessage = function(ruleValue, rule) {
      var message = this.inputElement.getAttribute("data-" + rule + "-message") ? this.inputElement.getAttribute("data-" + rule + "-message") : ruleValue instanceof Array && typeof ruleValue[1] === "string" ? ruleValue[1] : Object.keys(this.localyMessage).length !== 0 ? this.localyMessage["" + rule] : this.defaultMessages["" + rule];
      var formats = message.match(/{(\d)}/g);
      if (!isNullOrUndefined(formats)) {
        for (var i = 0; i < formats.length; i++) {
          var value = ruleValue instanceof Array ? ruleValue[parseInt(i.toString())] : ruleValue;
          message = message.replace(formats[parseInt(i.toString())], value);
        }
      }
      return message;
    };
    FormValidator2.prototype.createErrorElement = function(name, message, input) {
      var errorElement = createElement(this.errorElement, {
        className: this.errorClass,
        innerHTML: message,
        attrs: { for: name }
      });
      if (this.errorOption === ErrorOption.Message) {
        errorElement.classList.remove(this.errorClass);
        errorElement.classList.add("e-message");
        errorElement = createElement(this.errorContainer, { className: this.errorClass, innerHTML: errorElement.outerHTML });
      }
      errorElement.id = this.inputElement.name + "-info";
      if (this.element.querySelector('[data-valmsg-for="' + input.id + '"]')) {
        this.element.querySelector('[data-valmsg-for="' + input.id + '"]').appendChild(errorElement);
      } else if (input.hasAttribute("data-msg-containerid") === true) {
        var containerId = input.getAttribute("data-msg-containerid");
        var divElement = select$1("#" + containerId, this.element);
        divElement.appendChild(errorElement);
      } else if (this.customPlacement != null) {
        this.customPlacement.call(this, this.inputElement, errorElement);
      } else {
        this.inputElement.parentNode.insertBefore(errorElement, this.inputElement.nextSibling);
      }
      errorElement.style.display = "block";
      this.getErrorElement(name);
      this.validated.push(name);
      this.checkRequired(name);
    };
    FormValidator2.prototype.getErrorElement = function(name) {
      this.infoElement = select$1(this.errorElement + "." + this.errorClass, this.inputElement.parentElement);
      if (!this.infoElement) {
        this.infoElement = select$1(this.errorElement + "." + this.errorClass + '[for="' + name + '"]', this.element);
      }
      return this.infoElement;
    };
    FormValidator2.prototype.removeErrorRules = function(name) {
      for (var i = 0; i < this.errorRules.length; i++) {
        var rule = this.errorRules[parseInt(i.toString())];
        if (rule.name === name) {
          this.errorRules.splice(i, 1);
        }
      }
    };
    FormValidator2.prototype.showMessage = function(errorRule) {
      this.infoElement.style.display = "block";
      this.infoElement.innerHTML = errorRule.message;
      this.checkRequired(errorRule.name);
    };
    FormValidator2.prototype.hideMessage = function(name) {
      if (this.infoElement) {
        this.infoElement.style.display = "none";
        this.removeErrorRules(name);
        this.inputElement.classList.add(this.validClass);
        this.inputElement.classList.remove(this.errorClass);
        this.inputElement.setAttribute("aria-invalid", "false");
      }
    };
    FormValidator2.prototype.checkRequired = function(name) {
      if (!this.rules["" + name][this.required] && !this.inputElement.value.length && !isNullOrUndefined(this.infoElement)) {
        this.infoElement.innerHTML = this.inputElement.value;
        this.infoElement.setAttribute("aria-invalid", "false");
        this.hideMessage(name);
      }
    };
    FormValidator2.isCheckable = function(input) {
      var inputType = input.getAttribute("type");
      return inputType && (inputType === "checkbox" || inputType === "radio" || inputType === "submit");
    };
    var FormValidator_1;
    FormValidator2.checkValidator = {
      required: function(option) {
        return !isNaN(Date.parse(option.value)) ? !isNaN(new Date(option.value).getTime()) : option.value.toString().length > 0;
      },
      email: function(option) {
        return regex.EMAIL.test(option.value);
      },
      url: function(option) {
        return regex.URL.test(option.value);
      },
      dateIso: function(option) {
        return regex.DATE_ISO.test(option.value);
      },
      tel: function(option) {
        return regex.PHONE.test(option.value);
      },
      creditcard: function(option) {
        return regex.CREDITCARD.test(option.value);
      },
      number: function(option) {
        return !isNaN(Number(option.value)) && option.value.indexOf(" ") === -1;
      },
      digits: function(option) {
        return regex.DIGITS.test(option.value);
      },
      maxLength: function(option) {
        return option.value.length <= option.param;
      },
      minLength: function(option) {
        return option.value.length >= option.param;
      },
      rangeLength: function(option) {
        var param = option.param;
        return option.value.length >= param[0] && option.value.length <= param[1];
      },
      range: function(option) {
        var param = option.param;
        return !isNaN(Number(option.value)) && Number(option.value) >= param[0] && Number(option.value) <= param[1];
      },
      date: function(option) {
        return !isNaN(new Date(option.value).getTime());
      },
      max: function(option) {
        if (!isNaN(Number(option.value))) {
          return +option.value <= option.param;
        }
        return new Date(option.value).getTime() <= new Date(JSON.parse(JSON.stringify(option.param))).getTime();
      },
      min: function(option) {
        if (!isNaN(Number(option.value))) {
          return +option.value >= option.param;
        } else if (option.value.indexOf(",") !== -1) {
          var uNum = option.value.replace(/,/g, "");
          return parseFloat(uNum) >= option.param;
        } else {
          return new Date(option.value).getTime() >= new Date(JSON.parse(JSON.stringify(option.param))).getTime();
        }
      },
      regex: function(option) {
        return new RegExp(option.param).test(option.value);
      },
      equalTo: function(option) {
        var compareTo = option.formElement.querySelector("#" + option.param);
        option.param = compareTo.value;
        return option.param === option.value;
      }
    };
    __decorate$u([
      Property("")
    ], FormValidator2.prototype, "locale", void 0);
    __decorate$u([
      Property("e-hidden")
    ], FormValidator2.prototype, "ignore", void 0);
    __decorate$u([
      Property()
    ], FormValidator2.prototype, "rules", void 0);
    __decorate$u([
      Property("e-error")
    ], FormValidator2.prototype, "errorClass", void 0);
    __decorate$u([
      Property("e-valid")
    ], FormValidator2.prototype, "validClass", void 0);
    __decorate$u([
      Property("label")
    ], FormValidator2.prototype, "errorElement", void 0);
    __decorate$u([
      Property("div")
    ], FormValidator2.prototype, "errorContainer", void 0);
    __decorate$u([
      Property(ErrorOption.Label)
    ], FormValidator2.prototype, "errorOption", void 0);
    __decorate$u([
      Event$1()
    ], FormValidator2.prototype, "focusout", void 0);
    __decorate$u([
      Event$1()
    ], FormValidator2.prototype, "keyup", void 0);
    __decorate$u([
      Event$1()
    ], FormValidator2.prototype, "click", void 0);
    __decorate$u([
      Event$1()
    ], FormValidator2.prototype, "change", void 0);
    __decorate$u([
      Event$1()
    ], FormValidator2.prototype, "submit", void 0);
    __decorate$u([
      Event$1()
    ], FormValidator2.prototype, "validationBegin", void 0);
    __decorate$u([
      Event$1()
    ], FormValidator2.prototype, "validationComplete", void 0);
    __decorate$u([
      Event$1()
    ], FormValidator2.prototype, "customPlacement", void 0);
    FormValidator2 = FormValidator_1 = __decorate$u([
      NotifyPropertyChanges
    ], FormValidator2);
    return FormValidator2;
  }(Base)
);
var __extends$E = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$t = globalThis && globalThis.__decorate || function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i = decorators.length - 1; i >= 0; i--)
      if (d = decorators[i])
        r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
function getModel(props2, model) {
  var obj = extend({}, props2);
  for (var _i = 0, _a = Object.keys(obj); _i < _a.length; _i++) {
    var prop = _a[_i];
    if (model.indexOf(prop) < 0) {
      deleteObject(obj, prop);
    }
  }
  return obj;
}
function upDownKeyHandler(ul, keyCode2) {
  var defaultIdx = keyCode2 === 40 ? 0 : ul.childElementCount - 1;
  var liIdx = defaultIdx;
  var li;
  var selectedLi = ul.querySelector(".e-selected");
  if (selectedLi) {
    selectedLi.classList.remove("e-selected");
  }
  for (var i = 0, len = ul.children.length; i < len; i++) {
    if (ul.children[i].classList.contains("e-focused")) {
      li = ul.children[i];
      liIdx = i;
      li.classList.remove("e-focused");
      if (keyCode2 === 40) {
        liIdx++;
      } else {
        liIdx--;
      }
      if (liIdx === (keyCode2 === 40 ? ul.childElementCount : -1)) {
        liIdx = defaultIdx;
      }
    }
  }
  li = ul.children[liIdx];
  liIdx = isValidLI(ul, li, liIdx, keyCode2);
  if (liIdx !== -1) {
    addClass([ul.children[liIdx]], "e-focused");
    ul.children[liIdx].focus();
  }
}
function isValidLI(ul, li, index, keyCode2, count) {
  if (count === void 0) {
    count = 0;
  }
  if (li.classList.contains("e-separator") || li.classList.contains("e-disabled")) {
    if (index === (keyCode2 === 40 ? ul.childElementCount - 1 : 0)) {
      index = keyCode2 === 40 ? 0 : ul.childElementCount - 1;
    } else {
      if (keyCode2 === 40) {
        index++;
      } else {
        index--;
      }
    }
  }
  li = ul.children[index];
  if (li.classList.contains("e-separator") || li.classList.contains("e-disabled")) {
    count++;
    if (count === ul.childElementCount) {
      return index = -1;
    }
    index = isValidLI(ul, li, index, keyCode2, count);
  }
  return index;
}
function setBlankIconStyle(popup, blankIcon) {
  var blankIconList = [].slice.call(popup.getElementsByClassName("e-blank-icon"));
  if (blankIcon) {
    var menuItem = [].slice.call(popup.getElementsByClassName("e-item"));
    menuItem.forEach(function(li) {
      if (li.style.paddingLeft || li.style.paddingRight) {
        li.removeAttribute("style");
      }
    });
  }
  if (!blankIconList.length) {
    return;
  }
  var iconLi = popup.querySelector(".e-item:not(.e-blank-icon):not(.e-separator)");
  if (isNullOrUndefined(iconLi)) {
    return;
  }
  if (iconLi.classList.contains("e-url")) {
    iconLi = iconLi.querySelector(".e-menu-url");
  }
  var icon = iconLi.querySelector(".e-menu-icon");
  var cssProp;
  var enableRtl = popup.classList.contains("e-rtl");
  if (enableRtl) {
    cssProp = { padding: "paddingRight", margin: "marginLeft" };
  } else {
    cssProp = { padding: "paddingLeft", margin: "marginRight" };
  }
  var size2 = parseInt(getComputedStyle(icon).fontSize, 10) + parseInt(enableRtl ? getComputedStyle(icon)[cssProp.margin] : getComputedStyle(icon)[cssProp.margin], 10) + parseInt(getComputedStyle(iconLi).paddingLeft, 10) + "px";
  blankIconList.forEach(function(li) {
    if (li.classList.contains("e-url")) {
      li.querySelector(".e-menu-url").style[cssProp.padding] = size2;
    } else {
      li.style[cssProp.padding] = size2;
    }
  });
}
var Item$1 = (
  /** @class */
  function(_super) {
    __extends$E(Item2, _super);
    function Item2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$t([
      Property("")
    ], Item2.prototype, "iconCss", void 0);
    __decorate$t([
      Property("")
    ], Item2.prototype, "id", void 0);
    __decorate$t([
      Property(false)
    ], Item2.prototype, "separator", void 0);
    __decorate$t([
      Property("")
    ], Item2.prototype, "text", void 0);
    __decorate$t([
      Property("")
    ], Item2.prototype, "url", void 0);
    __decorate$t([
      Property(false)
    ], Item2.prototype, "disabled", void 0);
    return Item2;
  }(ChildProperty)
);
var __extends$D = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$s = globalThis && globalThis.__decorate || function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i = decorators.length - 1; i >= 0; i--)
      if (d = decorators[i])
        r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var classNames = {
  DISABLED: "e-disabled",
  FOCUS: "e-focused",
  ICON: "e-menu-icon",
  ITEM: "e-item",
  POPUP: "e-dropdown-popup",
  RTL: "e-rtl",
  SEPARATOR: "e-separator",
  VERTICAL: "e-vertical"
};
var DropDownButton = (
  /** @class */
  function(_super) {
    __extends$D(DropDownButton2, _super);
    function DropDownButton2(options, element2) {
      var _this = _super.call(this, options, element2) || this;
      _this.isPopupCreated = true;
      return _this;
    }
    DropDownButton2.prototype.preRender = function() {
    };
    DropDownButton2.prototype.getPersistData = function() {
      return this.addOnPersist([]);
    };
    DropDownButton2.prototype.toggle = function() {
      if (this.canOpen()) {
        this.openPopUp();
      } else {
        this.closePopup();
      }
    };
    DropDownButton2.prototype.render = function() {
      this.initialize();
      if (!this.disabled) {
        this.wireEvents();
      }
      this.renderComplete();
    };
    DropDownButton2.prototype.addItems = function(items, text) {
      var newItem;
      var idx = this.items.length;
      for (var j = 0, len = this.items.length; j < len; j++) {
        if (text === this.items[j].text) {
          idx = j;
          break;
        }
      }
      for (var i = items.length - 1; i >= 0; i--) {
        newItem = new Item$1(this, "items", items[i], true);
        this.items.splice(idx, 0, newItem);
      }
      if (!this.canOpen()) {
        this.createItems();
      }
    };
    DropDownButton2.prototype.removeItems = function(items, isUniqueId) {
      var refresh = false;
      for (var i = 0, len = items.length; i < len; i++) {
        for (var j = 0, len_1 = this.items.length; j < len_1; j++) {
          if (items[i] === (isUniqueId ? this.items[j].id : this.items[j].text)) {
            this.items.splice(j, 1);
            refresh = true;
            break;
          }
        }
      }
      if (refresh && this.getULElement()) {
        this.createItems();
      }
    };
    DropDownButton2.prototype.createPopup = function() {
      var _a;
      var div = this.createElement("div", {
        className: classNames.POPUP,
        id: this.element.id + "-popup"
      });
      document.body.appendChild(div);
      this.dropDown = new Popup(div, {
        relateTo: this.element,
        collision: { X: "fit", Y: "flip" },
        position: { X: "left", Y: "bottom" },
        targetType: "relative",
        content: this.target ? this.getTargetElement() : "",
        enableRtl: this.enableRtl
      });
      if (this.dropDown.element.style.position === "fixed") {
        this.dropDown.refreshPosition(this.element);
      }
      this.dropDown.hide();
      attributes(this.element, (_a = {}, _a["aria-haspopup"] = this.items.length || this.target ? "true" : "false", _a["aria-expanded"] = "false", _a["type"] = "button", _a["aria-label"] = this.element.textContent ? this.element.textContent : "dropdownbutton", _a));
      if (this.cssClass) {
        addClass([div], this.cssClass.replace(/\s+/g, " ").trim().split(" "));
      }
      this.isPopupCreated = true;
    };
    DropDownButton2.prototype.getTargetElement = function() {
      return typeof this.target === "string" ? select$1(this.target) : this.target;
    };
    DropDownButton2.prototype.createItems = function(appendItems) {
      var items = this.items;
      var showIcon = this.hasIcon(this.items, "iconCss");
      var span;
      var item;
      var li;
      var eventArgs;
      var ul = this.getULElement();
      if (ul) {
        ul.innerHTML = "";
      } else {
        ul = this.createElement("ul", {
          attrs: { "role": "menu", "tabindex": "0" }
        });
      }
      for (var i = 0; i < items.length; i++) {
        item = items[i];
        var tempItem = item.text;
        li = this.createElement("li", {
          innerHTML: item.url ? "" : tempItem,
          className: item.separator ? classNames.ITEM + " " + classNames.SEPARATOR : classNames.ITEM,
          attrs: item.separator ? { "role": "separator", "tabindex": "-1" } : { "role": "menuitem", "tabindex": "-1", "aria-label": tempItem },
          id: item.id ? item.id : getUniqueID("e-" + this.getModuleName() + "-item")
        });
        if (this.enableHtmlSanitizer) {
          li.textContent = item.url ? "" : tempItem;
        } else {
          li.innerHTML = item.url ? "" : tempItem;
        }
        if (item.url) {
          li.appendChild(this.createAnchor(item));
          li.classList.add("e-url");
        }
        if (item.iconCss) {
          span = this.createElement("span", { className: classNames.ICON + " " + item.iconCss });
          if (item.url) {
            li.childNodes[0].appendChild(span);
          } else {
            li.insertBefore(span, li.childNodes[0]);
          }
        } else {
          if (showIcon && !item.separator) {
            li.classList.add("e-blank-icon");
          }
        }
        if (item.disabled) {
          li.classList.add("e-disabled");
        }
        eventArgs = { item, element: li };
        this.trigger("beforeItemRender", eventArgs);
        ul.appendChild(li);
      }
      if (appendItems) {
        this.getPopUpElement().appendChild(ul);
      }
      if (showIcon) {
        setBlankIconStyle(this.getPopUpElement());
      }
    };
    DropDownButton2.prototype.hasIcon = function(items, field) {
      for (var i = 0, len = items.length; i < len; i++) {
        if (items[i]["" + field]) {
          return true;
        }
      }
      return false;
    };
    DropDownButton2.prototype.createAnchor = function(item) {
      var tempItem = this.enableHtmlSanitizer ? SanitizeHtmlHelper.sanitize(item.text) : item.text;
      return this.createElement("a", { className: "e-menu-text e-menu-url", innerHTML: tempItem, attrs: { "href": item.url } });
    };
    DropDownButton2.prototype.initialize = function() {
      this.button = new Button({
        iconCss: this.iconCss,
        iconPosition: this.iconPosition,
        cssClass: this.cssClass,
        content: this.content,
        disabled: this.disabled,
        enableRtl: this.enableRtl,
        enablePersistence: this.enablePersistence
      });
      this.button.createElement = this.createElement;
      this.button.appendTo(this.element);
      if (!this.element.id) {
        this.element.id = getUniqueID("e-" + this.getModuleName());
      }
      this.appendArrowSpan();
      this.setActiveElem([this.element]);
      if (this.target && !this.isColorPicker() || !this.createPopupOnClick) {
        this.createPopup();
      } else {
        this.isPopupCreated = false;
      }
    };
    DropDownButton2.prototype.isColorPicker = function() {
      if (!this.element) {
        return false;
      }
      var prevElem = this.element.previousSibling;
      if (prevElem && prevElem.classList && prevElem.classList.contains("e-split-colorpicker")) {
        return true;
      }
      return false;
    };
    DropDownButton2.prototype.appendArrowSpan = function() {
      this.element.appendChild(this.createElement("span", {
        className: "e-btn-icon e-icons e-icon-" + (this.cssClass.indexOf(classNames.VERTICAL) > -1 ? "bottom" : "right") + " e-caret"
      }));
    };
    DropDownButton2.prototype.setActiveElem = function(elem) {
      this.activeElem = elem;
    };
    DropDownButton2.prototype.getModuleName = function() {
      return "dropdown-btn";
    };
    DropDownButton2.prototype.canOpen = function() {
      var val = false;
      if (this.isPopupCreated) {
        val = this.getPopUpElement().classList.contains("e-popup-close");
      }
      return val;
    };
    DropDownButton2.prototype.destroy = function() {
      var _this = this;
      _super.prototype.destroy.call(this);
      if (this.getModuleName() === "dropdown-btn") {
        var classList_1;
        if (this.element.querySelector("span.e-caret")) {
          detach(this.element.querySelector("span.e-caret"));
        }
        if (this.cssClass) {
          classList_1 = this.cssClass.split(" ");
        }
        this.button.destroy();
        if (classList_1) {
          removeClass([this.element], classList_1);
        }
        removeClass(this.activeElem, ["e-active"]);
        var attrList = this.element.getAttribute("class") ? ["aria-haspopup", "aria-expanded", "aria-owns", "type"] : ["aria-haspopup", "aria-expanded", "aria-owns", "type", "class"];
        attrList.forEach(function(key) {
          _this.element.removeAttribute(key);
        });
        this.popupUnWireEvents();
        this.destroyPopup();
        this.isPopupCreated = false;
        if (!this.disabled) {
          this.unWireEvents();
        }
      }
    };
    DropDownButton2.prototype.destroyPopup = function() {
      if (this.isPopupCreated) {
        this.dropDown.destroy();
        if (this.getPopUpElement()) {
          var popupEle = document.getElementById(this.getPopUpElement().id);
          if (popupEle) {
            removeClass([popupEle], ["e-popup-open", "e-popup-close"]);
            detach(popupEle);
          }
        }
        EventHandler.remove(this.getPopUpElement(), "click", this.clickHandler);
        EventHandler.remove(this.getPopUpElement(), "keydown", this.keyBoardHandler);
        if (this.isPopupCreated) {
          this.dropDown = void 0;
        }
      }
      this.isPopupCreated = false;
    };
    DropDownButton2.prototype.getPopUpElement = function() {
      var val = null;
      if (this.dropDown) {
        val = this.dropDown.element;
      }
      return val;
    };
    DropDownButton2.prototype.getULElement = function() {
      var val = null;
      if (this.getPopUpElement()) {
        val = this.getPopUpElement().children[0];
      }
      return val;
    };
    DropDownButton2.prototype.wireEvents = function() {
      this.delegateMousedownHandler = this.mousedownHandler.bind(this);
      if (!this.createPopupOnClick) {
        EventHandler.add(document, "mousedown touchstart", this.delegateMousedownHandler, this);
      }
      EventHandler.add(this.element, "click", this.clickHandler, this);
      EventHandler.add(this.element, "keydown", this.keyBoardHandler, this);
    };
    DropDownButton2.prototype.popupWireEvents = function() {
      var popupElement = this.getPopUpElement();
      if (this.createPopupOnClick) {
        EventHandler.add(document, "mousedown touchstart", this.delegateMousedownHandler, this);
      }
      if (popupElement) {
        EventHandler.add(popupElement, "click", this.clickHandler, this);
        EventHandler.add(popupElement, "keydown", this.keyBoardHandler, this);
        if (this.closeActionEvents) {
          EventHandler.add(popupElement, this.closeActionEvents, this.focusoutHandler, this);
        }
      }
      this.rippleFn = rippleEffect(popupElement, { selector: "." + classNames.ITEM });
    };
    DropDownButton2.prototype.popupUnWireEvents = function() {
      var popupElement = this.getPopUpElement();
      if (this.createPopupOnClick) {
        EventHandler.remove(document, "mousedown touchstart", this.delegateMousedownHandler);
      }
      if (popupElement && popupElement.parentElement) {
        EventHandler.remove(popupElement, "click", this.clickHandler);
        EventHandler.remove(popupElement, "keydown", this.keyBoardHandler);
        if (this.closeActionEvents) {
          EventHandler.remove(popupElement, this.closeActionEvents, this.focusoutHandler);
        }
      }
    };
    DropDownButton2.prototype.keyBoardHandler = function(e) {
      if (e.target === this.element && (e.keyCode === 9 || !e.altKey && e.keyCode === 40 || e.keyCode === 38)) {
        return;
      }
      switch (e.keyCode) {
        case 38:
        case 40:
          if (e.altKey && (e.keyCode === 38 || e.keyCode === 40)) {
            this.keyEventHandler(e);
          } else {
            this.upDownKeyHandler(e);
          }
          break;
        case 9:
        case 13:
        case 27:
        case 32:
          this.keyEventHandler(e);
          break;
      }
    };
    DropDownButton2.prototype.upDownKeyHandler = function(e) {
      if (this.target && (e.keyCode === 38 || e.keyCode === 40)) {
        return;
      }
      e.preventDefault();
      upDownKeyHandler(this.getULElement(), e.keyCode);
    };
    DropDownButton2.prototype.keyEventHandler = function(e) {
      if (this.target && (e.keyCode === 13 || e.keyCode === 9)) {
        return;
      }
      if (e.keyCode === 13 && this.activeElem[0].classList.contains("e-split-btn")) {
        this.activeElem[0].focus();
        return;
      }
      if (e.target && e.target.className.indexOf("e-edit-template") > -1 && e.keyCode === 32) {
        return;
      }
      if (e.keyCode !== 9) {
        e.preventDefault();
      }
      if (e.keyCode === 27 || e.keyCode === 38 || e.keyCode === 9) {
        if (!this.canOpen()) {
          this.closePopup(e, this.element);
        }
      } else {
        this.clickHandler(e);
      }
    };
    DropDownButton2.prototype.getLI = function(elem) {
      return elem.tagName === "LI" ? elem : closest(elem, "li");
    };
    DropDownButton2.prototype.mousedownHandler = function(e) {
      var trgt = e.target;
      if (this.dropDown && !this.canOpen() && !(closest(trgt, '[id="' + this.getPopUpElement().id + '"]') || closest(trgt, '[id="' + this.element.id + '"]'))) {
        this.closePopup(e);
      }
    };
    DropDownButton2.prototype.focusoutHandler = function(e) {
      if (this.isPopupCreated && !this.canOpen()) {
        var liTarget = e.relatedTarget;
        if (liTarget && liTarget.className.indexOf("e-item") > -1) {
          var li = this.getLI(liTarget);
          if (li) {
            var liIdx = Array.prototype.indexOf.call(this.getULElement().children, li);
            var item = this.items[liIdx];
            if (item) {
              var selectEventArgs = { element: li, item };
              this.trigger("select", selectEventArgs);
            }
          }
        }
        this.closePopup(e);
      }
    };
    DropDownButton2.prototype.clickHandler = function(e) {
      var trgt = e.target;
      if (closest(trgt, '[id="' + this.element.id + '"]')) {
        if (!this.createPopupOnClick || this.target && !this.isColorPicker()) {
          if (this.getPopUpElement().classList.contains("e-popup-close")) {
            this.openPopUp(e);
          } else {
            this.closePopup(e);
          }
        } else if (this.isPopupCreated) {
          this.closePopup(e, this.activeElem[0]);
        } else {
          this.createPopup();
          this.openPopUp(e);
        }
      } else {
        if (closest(trgt, '[id="' + this.getPopUpElement().id + '"]')) {
          var eventArgs = void 0;
          var liIdx = void 0;
          var item = void 0;
          var li = this.getLI(trgt);
          if (li) {
            liIdx = Array.prototype.indexOf.call(this.getULElement().children, li);
            item = this.items[liIdx];
            if (item) {
              eventArgs = { element: li, item };
              this.trigger("select", eventArgs);
            }
            this.closePopup(e, this.activeElem[0]);
          }
        }
      }
    };
    DropDownButton2.prototype.openPopUp = function(e) {
      var _this = this;
      if (e === void 0) {
        e = null;
      }
      var popupElem = this.getPopUpElement();
      if (!this.target) {
        this.createItems(true);
      } else {
        if (this.activeElem.length > 1) {
          var splitButton = getComponent(this.activeElem[0], "split-btn");
          if (splitButton.isReact && popupElem.childNodes.length < 1) {
            splitButton.appendReactElement(this.getTargetElement(), this.getPopUpElement());
            this.renderReactTemplates();
          }
        } else {
          if (this.isReact && popupElem.childNodes.length < 1) {
            this.appendReactElement(this.getTargetElement(), this.getPopUpElement());
            this.renderReactTemplates();
          }
        }
      }
      var ul = this.getULElement();
      this.popupWireEvents();
      var beforeOpenArgs = { element: ul, items: this.items, event: e, cancel: false };
      this.trigger("beforeOpen", beforeOpenArgs, function(observedArgs) {
        if (!observedArgs.cancel) {
          var ul_1 = _this.getULElement();
          _this.dropDown.show(null, _this.element);
          addClass([_this.element], "e-active");
          _this.element.setAttribute("aria-expanded", "true");
          _this.element.setAttribute("aria-owns", _this.getPopUpElement().id);
          if (ul_1) {
            ul_1.focus();
          }
          var openArgs = { element: ul_1, items: _this.items };
          _this.trigger("open", openArgs);
          if (_this.enableRtl && ul_1.parentElement.style.left !== "0px") {
            var popupRect2 = ul_1.parentElement.offsetWidth - _this.element.offsetWidth;
            ul_1.parentElement.style.left = parseFloat(ul_1.parentElement.style.left) - popupRect2 + "px";
          }
        }
      });
    };
    DropDownButton2.prototype.closePopup = function(e, focusEle) {
      var _this = this;
      if (e === void 0) {
        e = null;
      }
      var ul = this.getULElement();
      var beforeCloseArgs = { element: ul, items: this.items, event: e, cancel: false };
      this.trigger("beforeClose", beforeCloseArgs, function(observedArgs) {
        if (!observedArgs.cancel) {
          var popupElement = _this.getPopUpElement();
          if (popupElement) {
            EventHandler.remove(popupElement, "keydown", _this.keyBoardHandler);
          }
          _this.popupUnWireEvents();
          var ul_2 = _this.getULElement();
          var selectedLi = void 0;
          if (ul_2) {
            selectedLi = ul_2.querySelector(".e-selected");
          }
          if (selectedLi) {
            selectedLi.classList.remove("e-selected");
          }
          _this.dropDown.hide();
          removeClass(_this.activeElem, "e-active");
          _this.element.setAttribute("aria-expanded", "false");
          _this.element.removeAttribute("aria-owns");
          if (focusEle) {
            focusEle.focus();
          }
          var closeArgs = { element: ul_2, items: _this.items };
          _this.trigger("close", closeArgs);
          if (!_this.target && ul_2) {
            detach(ul_2);
          }
          if (!_this.target || _this.isColorPicker()) {
            if (_this.createPopupOnClick) {
              _this.destroyPopup();
            }
          }
          if (_this.target) {
            _this.isPopupCreated = _this.createPopupOnClick ? false : true;
          }
        } else {
          if (ul) {
            ul.focus();
          }
        }
      });
    };
    DropDownButton2.prototype.unWireEvents = function() {
      if (!this.createPopupOnClick) {
        EventHandler.remove(document, "mousedown touchstart", this.delegateMousedownHandler);
      }
      EventHandler.remove(this.element, "click", this.clickHandler);
      EventHandler.remove(this.element, "keydown", this.keyBoardHandler);
      if (this.isPopupCreated) {
        EventHandler.remove(this.getPopUpElement(), "click", this.clickHandler);
        EventHandler.remove(this.getPopUpElement(), "keydown", this.keyBoardHandler);
      }
    };
    DropDownButton2.prototype.onPropertyChanged = function(newProp, oldProp) {
      var btnModel = ["content", "cssClass", "iconCss", "iconPosition", "disabled", "enableRtl"];
      this.button.setProperties(getModel(newProp, btnModel));
      var popupElement;
      if (this.isPopupCreated) {
        popupElement = this.getPopUpElement();
        this.dropDown.setProperties(getModel(newProp, ["enableRtl"]));
      }
      for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {
        var prop = _a[_i];
        switch (prop) {
          case "content":
            if (!this.element.querySelector("span.e-caret")) {
              this.appendArrowSpan();
            }
            break;
          case "disabled":
            if (newProp.disabled) {
              this.unWireEvents();
              if (this.isPopupCreated && !this.canOpen()) {
                this.closePopup();
              }
            } else {
              this.wireEvents();
            }
            break;
          case "cssClass":
            if (newProp.cssClass.indexOf(classNames.VERTICAL) > -1 || oldProp.cssClass.indexOf(classNames.VERTICAL) > -1) {
              if (!this.element.querySelector("span.e-caret")) {
                this.appendArrowSpan();
              }
              var arrowSpan = this.element.querySelector("span.e-caret");
              newProp.cssClass.indexOf(classNames.VERTICAL) > -1 ? classList(arrowSpan, ["e-icon-bottom"], ["e-icon-right"]) : classList(arrowSpan, ["e-icon-right"], ["e-icon-bottom"]);
            }
            if (this.isPopupCreated) {
              if (oldProp.cssClass) {
                removeClass([popupElement], oldProp.cssClass.split(" "));
              }
              if (newProp.cssClass) {
                addClass([popupElement], newProp.cssClass.replace(/\s+/g, " ").trim().split(" "));
              }
            }
            break;
          case "target":
            this.dropDown.content = this.getTargetElement();
            this.dropDown.dataBind();
            break;
          case "items":
            if (this.isPopupCreated && this.getULElement()) {
              this.createItems();
            }
            break;
          case "createPopupOnClick":
            if (newProp.createPopupOnClick) {
              this.destroyPopup();
            } else {
              this.createPopup();
            }
            break;
        }
      }
    };
    DropDownButton2.prototype.focusIn = function() {
      this.element.focus();
    };
    __decorate$s([
      Property("")
    ], DropDownButton2.prototype, "content", void 0);
    __decorate$s([
      Property("")
    ], DropDownButton2.prototype, "cssClass", void 0);
    __decorate$s([
      Property(false)
    ], DropDownButton2.prototype, "disabled", void 0);
    __decorate$s([
      Property("")
    ], DropDownButton2.prototype, "iconCss", void 0);
    __decorate$s([
      Property("Left")
    ], DropDownButton2.prototype, "iconPosition", void 0);
    __decorate$s([
      Property(false)
    ], DropDownButton2.prototype, "enableHtmlSanitizer", void 0);
    __decorate$s([
      Collection([], Item$1)
    ], DropDownButton2.prototype, "items", void 0);
    __decorate$s([
      Property(false)
    ], DropDownButton2.prototype, "createPopupOnClick", void 0);
    __decorate$s([
      Property("")
    ], DropDownButton2.prototype, "target", void 0);
    __decorate$s([
      Property("")
    ], DropDownButton2.prototype, "closeActionEvents", void 0);
    __decorate$s([
      Event$1()
    ], DropDownButton2.prototype, "beforeItemRender", void 0);
    __decorate$s([
      Event$1()
    ], DropDownButton2.prototype, "beforeOpen", void 0);
    __decorate$s([
      Event$1()
    ], DropDownButton2.prototype, "beforeClose", void 0);
    __decorate$s([
      Event$1()
    ], DropDownButton2.prototype, "close", void 0);
    __decorate$s([
      Event$1()
    ], DropDownButton2.prototype, "open", void 0);
    __decorate$s([
      Event$1()
    ], DropDownButton2.prototype, "select", void 0);
    __decorate$s([
      Event$1()
    ], DropDownButton2.prototype, "created", void 0);
    DropDownButton2 = __decorate$s([
      NotifyPropertyChanges
    ], DropDownButton2);
    return DropDownButton2;
  }(Component)
);
var __extends$C = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$r = globalThis && globalThis.__decorate || function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i = decorators.length - 1; i >= 0; i--)
      if (d = decorators[i])
        r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var RTL$5 = "e-rtl";
var TAGNAME = "EJS-SPLITBUTTON";
var SplitButton = (
  /** @class */
  function(_super) {
    __extends$C(SplitButton2, _super);
    function SplitButton2(options, element2) {
      return _super.call(this, options, element2) || this;
    }
    SplitButton2.prototype.preRender = function() {
      var ele = this.element;
      if (ele.tagName === TAGNAME) {
        var ejInstance = getValue("ej2_instances", ele);
        var btn = this.createElement("button", { attrs: { "type": "button" } });
        var wrapper = this.createElement(TAGNAME, { className: "e-" + this.getModuleName() + "-wrapper" });
        for (var idx = 0, len = ele.attributes.length; idx < len; idx++) {
          btn.setAttribute(ele.attributes[idx].nodeName, ele.attributes[idx].nodeValue);
        }
        ele.parentNode.insertBefore(wrapper, ele);
        detach(ele);
        ele = btn;
        wrapper.appendChild(ele);
        setValue("ej2_instances", ejInstance, ele);
        this.wrapper = wrapper;
        this.element = ele;
      }
      if (!this.element.id) {
        this.element.id = getUniqueID("e-" + this.getModuleName());
      }
    };
    SplitButton2.prototype.render = function() {
      this.initWrapper();
      this.createPrimaryButton();
      this.renderControl();
    };
    SplitButton2.prototype.renderControl = function() {
      this.createSecondaryButton();
      this.setActiveElem([this.element, this.secondaryBtnObj.element]);
      this.setAria();
      this.wireEvents();
      this.renderComplete();
    };
    SplitButton2.prototype.addItems = function(items, text) {
      _super.prototype.addItems.call(this, items, text);
      this.secondaryBtnObj.items = this.items;
    };
    SplitButton2.prototype.removeItems = function(items, isUniqueId) {
      _super.prototype.removeItems.call(this, items, isUniqueId);
      this.secondaryBtnObj.items = this.items;
    };
    SplitButton2.prototype.initWrapper = function() {
      if (!this.wrapper) {
        this.wrapper = this.createElement("div", { className: "e-" + this.getModuleName() + "-wrapper" });
        this.element.parentNode.insertBefore(this.wrapper, this.element);
      }
      this.element.classList.remove("e-" + this.getModuleName());
      if (this.enableRtl) {
        this.wrapper.classList.add(RTL$5);
      }
      if (this.cssClass) {
        addClass([this.wrapper], this.cssClass.replace(/\s+/g, " ").trim().split(" "));
      }
    };
    SplitButton2.prototype.createPrimaryButton = function() {
      var btnModel = {
        cssClass: this.cssClass,
        enableRtl: this.enableRtl,
        iconCss: this.iconCss,
        iconPosition: this.iconPosition,
        content: this.content,
        disabled: this.disabled
      };
      this.primaryBtnObj = new Button(btnModel);
      this.primaryBtnObj.createElement = this.createElement;
      this.primaryBtnObj.appendTo(this.element);
      this.element.classList.add("e-" + this.getModuleName());
      this.element.type = "button";
      this.wrapper.appendChild(this.element);
    };
    SplitButton2.prototype.createSecondaryButton = function() {
      var _this = this;
      var btnElem = this.createElement("button", {
        className: "e-icon-btn",
        attrs: { "tabindex": "-1" },
        id: this.element.id + "_dropdownbtn"
      });
      this.wrapper.appendChild(btnElem);
      var dropDownBtnModel = {
        cssClass: this.cssClass,
        disabled: this.disabled,
        enableRtl: this.enableRtl,
        items: this.items,
        target: this.target,
        createPopupOnClick: this.createPopupOnClick
      };
      dropDownBtnModel.beforeItemRender = function(args) {
        if (_this.createPopupOnClick) {
          _this.secondaryBtnObj.dropDown.relateTo = _this.wrapper;
          _this.dropDown = _this.secondaryBtnObj.dropDown;
        }
        _this.trigger("beforeItemRender", args);
      };
      dropDownBtnModel.open = function(args) {
        _this.trigger("open", args);
      };
      dropDownBtnModel.close = function(args) {
        _this.trigger("close", args);
      };
      dropDownBtnModel.select = function(args) {
        _this.trigger("select", args);
      };
      dropDownBtnModel.beforeOpen = function(args) {
        if (_this.createPopupOnClick && _this.items.length == 0) {
          _this.secondaryBtnObj.dropDown.relateTo = _this.wrapper;
          _this.dropDown = _this.secondaryBtnObj.dropDown;
        }
        var callBackPromise = new Deferred();
        _this.trigger("beforeOpen", args, function(observedArgs) {
          callBackPromise.resolve(observedArgs);
        });
        return callBackPromise;
      };
      dropDownBtnModel.beforeClose = function(args) {
        var callBackPromise = new Deferred();
        _this.trigger("beforeClose", args, function(observedArgs) {
          callBackPromise.resolve(observedArgs);
        });
        return callBackPromise;
      };
      this.secondaryBtnObj = new DropDownButton(dropDownBtnModel);
      this.secondaryBtnObj.createElement = this.createElement;
      this.secondaryBtnObj.appendTo(btnElem);
      if (!this.createPopupOnClick) {
        this.secondaryBtnObj.dropDown.relateTo = this.wrapper;
        this.dropDown = this.secondaryBtnObj.dropDown;
      }
      this.secondaryBtnObj.activeElem = [this.element, this.secondaryBtnObj.element];
      this.secondaryBtnObj.element.querySelector(".e-btn-icon").classList.remove("e-icon-right");
    };
    SplitButton2.prototype.setAria = function() {
      attributes(this.element, {
        "aria-expanded": "false",
        "aria-haspopup": "true",
        "aria-label": this.element.textContent + " splitbutton",
        "aria-owns": this.element.id + "_dropdownbtn-popup"
      });
    };
    SplitButton2.prototype.getModuleName = function() {
      return "split-btn";
    };
    SplitButton2.prototype.toggle = function() {
      this.secondaryBtnObj.toggle();
    };
    SplitButton2.prototype.destroy = function() {
      var _this = this;
      var classList2 = [RTL$5];
      if (this.cssClass) {
        classList2 = classList2.concat(this.cssClass.split(" "));
      }
      if (this.element) {
        var element2 = document.getElementById(this.element.id);
        if (element2 && element2.parentElement === this.wrapper) {
          if (this.wrapper.tagName === TAGNAME) {
            this.wrapper.innerHTML = "";
            removeClass([this.wrapper], ["e-rtl", "e-" + this.getModuleName() + "-wrapper"]);
            removeClass([this.wrapper], this.cssClass.split(" "));
          } else {
            removeClass([this.element], classList2);
            ["aria-label", "aria-haspopup", "aria-expanded", "aria-owns", "type"].forEach(function(key) {
              _this.element.removeAttribute(key);
            });
            this.wrapper.parentNode.insertBefore(this.element, this.wrapper);
            remove(this.wrapper);
          }
          this.unWireEvents();
        }
      }
      this.primaryBtnObj.destroy();
      this.secondaryBtnObj.destroy();
      _super.prototype.destroy.call(this);
      if (!this.element.getAttribute("class")) {
        this.element.removeAttribute("class");
      }
    };
    SplitButton2.prototype.wireEvents = function() {
      EventHandler.add(this.element, "click", this.primaryBtnClickHandler, this);
      new KeyboardEvents(this.element, {
        keyAction: this.btnKeyBoardHandler.bind(this),
        keyConfigs: {
          altdownarrow: "alt+downarrow",
          enter: "enter"
        }
      });
    };
    SplitButton2.prototype.unWireEvents = function() {
      EventHandler.remove(this.element, "click", this.primaryBtnClickHandler);
      getInstance(this.element, KeyboardEvents).destroy();
    };
    SplitButton2.prototype.primaryBtnClickHandler = function() {
      this.trigger("click", { element: this.element });
    };
    SplitButton2.prototype.btnKeyBoardHandler = function(e) {
      switch (e.action) {
        case "altdownarrow":
          this.clickHandler(e);
          break;
        case "enter":
          this.clickHandler(e);
          if (!this.getPopUpElement().classList.contains("e-popup-close")) {
            this.element.classList.remove("e-active");
            this.secondaryBtnObj.element.classList.add("e-active");
          } else {
            this.secondaryBtnObj.element.classList.remove("e-active");
          }
          break;
      }
    };
    SplitButton2.prototype.onPropertyChanged = function(newProp, oldProp) {
      var model = ["content", "iconCss", "iconPosition", "cssClass", "disabled", "enableRtl"];
      this.primaryBtnObj.setProperties(getModel(newProp, model));
      model = [
        "beforeOpen",
        "beforeItemRender",
        "select",
        "open",
        "close",
        "cssClass",
        "disabled",
        "enableRtl",
        "createPopupOnClick"
      ];
      if (Object.keys(newProp).indexOf("items") > -1) {
        this.secondaryBtnObj.items = newProp.items;
        this.secondaryBtnObj.dataBind();
      }
      this.secondaryBtnObj.setProperties(getModel(newProp, model));
      for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {
        var prop = _a[_i];
        switch (prop) {
          case "cssClass":
            if (oldProp.cssClass) {
              removeClass([this.wrapper], oldProp.cssClass.split(" "));
            }
            addClass([this.wrapper], newProp.cssClass.replace(/\s+/g, " ").trim().split(" "));
            break;
          case "enableRtl":
            if (newProp.enableRtl) {
              addClass([this.wrapper], RTL$5);
            } else {
              removeClass([this.wrapper], RTL$5);
            }
            break;
        }
      }
    };
    SplitButton2.prototype.focusIn = function() {
      this.element.focus();
    };
    __decorate$r([
      Property("")
    ], SplitButton2.prototype, "content", void 0);
    __decorate$r([
      Property("")
    ], SplitButton2.prototype, "cssClass", void 0);
    __decorate$r([
      Property(false)
    ], SplitButton2.prototype, "disabled", void 0);
    __decorate$r([
      Property("")
    ], SplitButton2.prototype, "iconCss", void 0);
    __decorate$r([
      Property("Left")
    ], SplitButton2.prototype, "iconPosition", void 0);
    __decorate$r([
      Property(false)
    ], SplitButton2.prototype, "createPopupOnClick", void 0);
    __decorate$r([
      Collection([], Item$1)
    ], SplitButton2.prototype, "items", void 0);
    __decorate$r([
      Property("")
    ], SplitButton2.prototype, "target", void 0);
    __decorate$r([
      Event$1()
    ], SplitButton2.prototype, "beforeItemRender", void 0);
    __decorate$r([
      Event$1()
    ], SplitButton2.prototype, "beforeOpen", void 0);
    __decorate$r([
      Event$1()
    ], SplitButton2.prototype, "beforeClose", void 0);
    __decorate$r([
      Event$1()
    ], SplitButton2.prototype, "click", void 0);
    __decorate$r([
      Event$1()
    ], SplitButton2.prototype, "close", void 0);
    __decorate$r([
      Event$1()
    ], SplitButton2.prototype, "open", void 0);
    __decorate$r([
      Event$1()
    ], SplitButton2.prototype, "select", void 0);
    __decorate$r([
      Event$1()
    ], SplitButton2.prototype, "created", void 0);
    SplitButton2 = __decorate$r([
      NotifyPropertyChanges
    ], SplitButton2);
    return SplitButton2;
  }(DropDownButton)
);
var Deferred = (
  /** @class */
  function() {
    function Deferred2() {
      var _this = this;
      this.promise = new Promise(function(resolve2, reject) {
        _this.resolve = resolve2;
        _this.reject = reject;
      });
      this.catch = this.promise.catch.bind(this.promise);
      this.then = this.promise.then.bind(this.promise);
    }
    return Deferred2;
  }()
);
var __extends$B = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$q = globalThis && globalThis.__decorate || function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i = decorators.length - 1; i >= 0; i--)
      if (d = decorators[i])
        r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var APPLY = "e-apply";
var CANCEL = "e-cancel";
var CURRENT = "e-current";
var CONTAINER = "e-container";
var CTRLBTN = "e-ctrl-btn";
var CTRLSWITCH = "e-switch-ctrl-btn";
var DISABLED$5 = "e-disabled";
var FORMATSWITCH = "e-value-switch-btn";
var HANDLER = "e-handler";
var HEX = "e-hex";
var HIDEHEX = "e-hide-hex-value";
var HIDEOPACITY = "e-hide-opacity";
var HIDERGBA = "e-hide-switchable-value";
var HIDEVALUE = "e-hide-value";
var HIDEVALUESWITCH = "e-hide-valueswitcher";
var HSVAREA = "e-hsv-color";
var HSVCONTAINER = "e-hsv-container";
var INPUTWRAPPER$2 = "e-selected-value";
var MODESWITCH = "e-mode-switch-btn";
var NOCOLOR = "e-nocolor-item";
var OPACITY = "e-opacity-value";
var PALETTES = "e-palette";
var PALETTECONTENT = "e-color-palette";
var PICKERCONTENT = "e-color-picker";
var PREVIEW = "e-preview-container";
var PREVIOUS = "e-previous";
var RTL$4 = "e-rtl";
var SHOWVALUE = "e-show-value";
var SELECT = "e-selected";
var SPLITPREVIEW = "e-split-preview";
var TILE = "e-tile";
var presets = {
  default: [
    "#000000",
    "#f44336",
    "#e91e63",
    "#9c27b0",
    "#673ab7",
    "#2196f3",
    "#03a9f4",
    "#00bcd4",
    "#009688",
    "#ffeb3b",
    "#ffffff",
    "#ffebee",
    "#fce4ec",
    "#f3e5f5",
    "#ede7f6",
    "#e3f2fd",
    "#e1f5fe",
    "#e0f7fa",
    "#e0f2f1",
    "#fffde7",
    "#f2f2f2",
    "#ffcdd2",
    "#f8bbd0",
    "#e1bee7",
    "#d1c4e9",
    "#bbdefb",
    "#b3e5fc",
    "#b2ebf2",
    "#b2dfdb",
    "#fff9c4",
    "#e6e6e6",
    "#ef9a9a",
    "#f48fb1",
    "#ce93d8",
    "#b39ddb",
    "#90caf9",
    "#81d4fa",
    "#80deea",
    "#80cbc4",
    "#fff59d",
    "#cccccc",
    "#e57373",
    "#f06292",
    "#ba68c8",
    "#9575cd",
    "#64b5f6",
    "#4fc3f7",
    "#4dd0e1",
    "#4db6ac",
    "#fff176",
    "#b3b3b3",
    "#ef5350",
    "#ec407a",
    "#ab47bc",
    "#7e57c2",
    "#42a5f5",
    "#29b6f6",
    "#26c6da",
    "#26a69a",
    "#ffee58",
    "#999999",
    "#e53935",
    "#d81b60",
    "#8e24aa",
    "#5e35b1",
    "#1e88e5",
    "#039be5",
    "#00acc1",
    "#00897b",
    "#fdd835",
    "#808080",
    "#d32f2f",
    "#c2185b",
    "#7b1fa2",
    "#512da8",
    "#1976d2",
    "#0288d1",
    "#0097a7",
    "#00796b",
    "#fbc02d",
    "#666666",
    "#c62828",
    "#ad1457",
    "#6a1b9a",
    "#4527a0",
    "#1565c0",
    "#0277bd",
    "#00838f",
    "#00695c",
    "#f9a825",
    "#4d4d4d",
    "#b71c1c",
    "#880e4f",
    "#4a148c",
    "#311b92",
    "#0d47a1",
    "#01579b",
    "#006064",
    "#004d40",
    "#f57f17"
  ]
};
var ColorPicker = (
  /** @class */
  function(_super) {
    __extends$B(ColorPicker2, _super);
    function ColorPicker2(options, element2) {
      return _super.call(this, options, element2) || this;
    }
    ColorPicker2.prototype.preRender = function() {
      var ele = this.element;
      this.formElement = closest(this.element, "form");
      if (this.formElement) {
        EventHandler.add(this.formElement, "reset", this.formResetHandler, this);
      }
      var localeText = { Apply: "Apply", Cancel: "Cancel", ModeSwitcher: "Switch Mode" };
      this.l10n = new L10n("colorpicker", localeText, this.locale);
      if (ele.getAttribute("ejs-for") && !ele.getAttribute("name")) {
        ele.setAttribute("name", ele.id);
      }
    };
    ColorPicker2.prototype.render = function() {
      this.initWrapper();
      if (this.inline) {
        this.createWidget();
      } else {
        this.createSplitBtn();
      }
      if (!this.enableOpacity) {
        addClass([this.container.parentElement], HIDEOPACITY);
      }
      this.renderComplete();
    };
    ColorPicker2.prototype.initWrapper = function() {
      var wrapper = this.createElement("div", { className: "e-" + this.getModuleName() + "-wrapper" });
      this.element.parentNode.insertBefore(wrapper, this.element);
      wrapper.appendChild(this.element);
      attributes(this.element, { "tabindex": "-1", "spellcheck": "false", "aria-label": "colorpicker" });
      this.container = this.createElement("div", { className: CONTAINER });
      this.getWrapper().appendChild(this.container);
      var value = this.value ? this.roundValue(this.value).toLowerCase() : "#008000ff";
      if (this.noColor && this.mode === "Palette" && this.value === "") {
        value = "";
      }
      var slicedValue = value.slice(0, 7);
      if (isNullOrUndefined(this.initialInputValue)) {
        this.initialInputValue = slicedValue;
      }
      this.element.value = slicedValue;
      if (this.enableOpacity) {
        this.setProperties({ "value": value }, true);
      } else {
        this.setProperties({ "value": slicedValue }, true);
      }
      if (this.enableRtl) {
        wrapper.classList.add(RTL$4);
      }
      if (this.cssClass) {
        addClass([wrapper], this.cssClass.replace(/\s+/g, " ").trim().split(" "));
      }
      this.tileRipple = rippleEffect(this.container, { selector: "." + TILE });
      this.ctrlBtnRipple = rippleEffect(this.container, { selector: ".e-btn" });
    };
    ColorPicker2.prototype.getWrapper = function() {
      return this.element.parentElement;
    };
    ColorPicker2.prototype.createWidget = function() {
      if (this.mode === "Palette") {
        this.createPalette();
        if (!this.inline) {
          this.firstPaletteFocus();
        }
      } else {
        this.createPicker();
        if (!this.inline) {
          this.getDragHandler().focus();
        }
      }
      this.isRgb = true;
      this.createInput();
      this.createCtrlBtn();
      if (!this.disabled) {
        this.wireEvents();
      }
      if (this.inline && this.disabled) {
        this.toggleDisabled(true);
      }
      if (Browser.isDevice) {
        this.refreshPopupPos();
      }
    };
    ColorPicker2.prototype.createSplitBtn = function() {
      var _this = this;
      var splitButton = this.createElement("button", { className: "e-split-colorpicker" });
      this.getWrapper().appendChild(splitButton);
      this.splitBtn = new SplitButton({
        iconCss: "e-selected-color",
        target: this.container,
        disabled: this.disabled,
        enableRtl: this.enableRtl,
        createPopupOnClick: this.createPopupOnClick,
        open: this.onOpen.bind(this),
        click: function() {
          _this.trigger("change", {
            currentValue: { hex: _this.value.slice(0, 7), rgba: _this.convertToRgbString(_this.hexToRgb(_this.value)) },
            previousValue: { hex: null, rgba: null },
            value: _this.value
          });
        }
      });
      this.splitBtn.createElement = this.createElement;
      this.splitBtn.appendTo(splitButton);
      var preview = this.createElement("span", { className: SPLITPREVIEW });
      select$1(".e-selected-color", splitButton).appendChild(preview);
      preview.style.backgroundColor = this.convertToRgbString(this.hexToRgb(this.value));
      var popupEle = this.getPopupEle();
      addClass([popupEle], "e-colorpicker-popup");
      if (this.cssClass) {
        addClass([popupEle], this.cssClass.replace(/\s+/g, " ").trim().split(" "));
      }
      if (Browser.isDevice) {
        var popupInst = this.getPopupInst();
        popupInst.relateTo = document.body;
        popupInst.position = { X: "center", Y: "center" };
        popupInst.targetType = "container";
        popupInst.collision = { X: "fit", Y: "fit" };
        popupInst.offsetY = 4;
        popupEle.style.zIndex = getZindexPartial(this.splitBtn.element).toString();
      }
      this.bindCallBackEvent();
    };
    ColorPicker2.prototype.onOpen = function() {
      this.trigger("open", { element: this.container });
    };
    ColorPicker2.prototype.getPopupInst = function() {
      return getInstance(this.getPopupEle(), Popup);
    };
    ColorPicker2.prototype.bindCallBackEvent = function() {
      var _this = this;
      this.splitBtn.beforeOpen = function(args) {
        var callBackPromise = new Deferred();
        _this.trigger("beforeOpen", args, function(observeOpenArgs) {
          if (!observeOpenArgs.cancel) {
            var popupEle = _this.getPopupEle();
            popupEle.style.top = formatUnit(0 + pageYOffset);
            popupEle.style.left = formatUnit(0 + pageXOffset);
            popupEle.style.display = "block";
            _this.createWidget();
            popupEle.style.display = "";
            if (Browser.isDevice) {
              _this.modal = _this.createElement("div");
              _this.modal.className = "e-" + _this.getModuleName() + " e-modal";
              _this.modal.style.display = "none";
              document.body.insertBefore(_this.modal, popupEle);
              document.body.className += " e-colorpicker-overflow";
              _this.modal.style.display = "block";
              _this.modal.style.zIndex = (Number(popupEle.style.zIndex) - 1).toString();
            }
          }
          args.cancel = observeOpenArgs.cancel;
          callBackPromise.resolve(observeOpenArgs);
        });
        return callBackPromise;
      };
      this.splitBtn.beforeClose = function(args) {
        var callBackPromise = new Deferred();
        if (!isNullOrUndefined(args.event)) {
          var beforeCloseArgs = { element: _this.container, event: args.event, cancel: false };
          _this.trigger("beforeClose", beforeCloseArgs, function(observedCloseArgs) {
            if (Browser.isDevice && args.event.target === _this.modal) {
              observedCloseArgs.cancel = true;
            }
            if (!observedCloseArgs.cancel) {
              _this.onPopupClose();
            }
            args.cancel = observedCloseArgs.cancel;
            callBackPromise.resolve(observedCloseArgs);
          });
        } else {
          callBackPromise.resolve(args);
        }
        return callBackPromise;
      };
    };
    ColorPicker2.prototype.onPopupClose = function() {
      this.unWireEvents();
      this.destroyOtherComp();
      this.container.style.width = "";
      select$1("." + SPLITPREVIEW, this.splitBtn.element).style.backgroundColor = this.convertToRgbString(this.hexToRgb(this.value));
      this.container.innerHTML = "";
      removeClass([this.container], [PICKERCONTENT, PALETTECONTENT]);
      if (Browser.isDevice && this.modal) {
        removeClass([document.body], "e-colorpicker-overflow");
        this.modal.style.display = "none";
        this.modal.outerHTML = "";
        this.modal = null;
      }
    };
    ColorPicker2.prototype.createPalette = function() {
      classList(this.container, [PALETTECONTENT], [PICKERCONTENT]);
      if (this.presetColors) {
        var paletteGroup = this.createElement("div", { className: "e-custom-palette" });
        this.appendElement(paletteGroup);
        var keys2 = Object.keys(this.presetColors);
        if (keys2.length === 1) {
          this.appendPalette(this.presetColors[keys2[0]], keys2[0], paletteGroup);
        } else {
          for (var i = 0, len = keys2.length; i < len; i++) {
            this.appendPalette(this.presetColors[keys2[i]], keys2[i], paletteGroup);
          }
        }
        if (selectAll(".e-row", paletteGroup).length > 10) {
          addClass([paletteGroup], "e-palette-group");
        }
      } else {
        this.appendPalette(presets.default, "default");
      }
      if (this.mode === "Palette" && !this.modeSwitcher && this.noColor) {
        this.setNoColor();
      }
      var width = parseInt(getComputedStyle(this.container).borderBottomWidth, 10);
      this.container.style.width = formatUnit(this.container.children[0].offsetWidth + width + width);
      this.rgb = this.hexToRgb(this.roundValue(this.value));
      this.hsv = this.rgbToHsv.apply(this, this.rgb);
    };
    ColorPicker2.prototype.firstPaletteFocus = function() {
      if (!select$1("." + SELECT, this.container.children[0])) {
        selectAll("." + PALETTES, this.container)[0].focus();
      }
    };
    ColorPicker2.prototype.appendPalette = function(colors, key, refEle) {
      var palette = this.createElement("div", { className: PALETTES, attrs: { "tabindex": "0", "role": "grid" } });
      if (refEle) {
        refEle.appendChild(palette);
      } else {
        this.appendElement(palette);
      }
      var row;
      var tile;
      var roundedColor;
      for (var i = 0, len = colors.length; i < len; i++) {
        if (i === 0 || i % this.columns === 0) {
          row = this.createElement("div", {
            className: "e-row",
            attrs: { "role": "row" }
          });
          palette.appendChild(row);
        }
        roundedColor = this.roundValue(colors[i]).toLowerCase();
        tile = this.createElement("span", {
          className: TILE,
          attrs: { "role": "gridcell", "aria-label": roundedColor, "aria-selected": "false", "tabindex": "0" }
        });
        this.trigger("beforeTileRender", { element: tile, presetName: key, value: colors[i] });
        row.appendChild(tile);
        if (this.value === roundedColor) {
          this.addTileSelection(tile);
          palette.focus();
        }
        tile.style.backgroundColor = this.convertToRgbString(this.hexToRgb(roundedColor));
      }
    };
    ColorPicker2.prototype.setNoColor = function() {
      var noColorEle = this.container.querySelector(".e-row").children[0];
      noColorEle.classList.add(NOCOLOR);
      if (!this.value) {
        noColorEle.classList.add(SELECT);
        closest(noColorEle, "." + PALETTES).focus();
      }
      ["aria-selected", "aria-label"].forEach(function(attr) {
        noColorEle.removeAttribute(attr);
      });
      noColorEle.style.backgroundColor = "";
    };
    ColorPicker2.prototype.appendElement = function(ele, insertPos) {
      if (insertPos === void 0) {
        insertPos = 0;
      }
      var refEle = this.container.children[insertPos];
      if (refEle) {
        this.container.insertBefore(ele, refEle);
      } else {
        this.container.appendChild(ele);
      }
    };
    ColorPicker2.prototype.addTileSelection = function(ele) {
      ele.classList.add(SELECT);
      ele.setAttribute("aria-selected", "true");
    };
    ColorPicker2.prototype.createPicker = function() {
      classList(this.container, [PICKERCONTENT], [PALETTECONTENT]);
      var hsvContainer = this.createElement("div", { className: HSVCONTAINER });
      this.appendElement(hsvContainer);
      hsvContainer.appendChild(this.createElement("div", { className: HSVAREA }));
      var dragHandler = this.createElement("span", { className: HANDLER, attrs: { "tabindex": "0" } });
      hsvContainer.appendChild(dragHandler);
      if (this.value === null) {
        this.value = "#008000ff";
      }
      this.rgb = this.hexToRgb(this.value);
      this.hsv = this.rgbToHsv.apply(this, this.rgb);
      this.setHsvContainerBg();
      this.setHandlerPosition();
      this.createSlider();
      this.createDragTooltip();
    };
    ColorPicker2.prototype.setHsvContainerBg = function(h2) {
      if (h2 === void 0) {
        h2 = this.hsv[0];
      }
      this.getHsvContainer().style.backgroundColor = this.convertToRgbString(this.hsvToRgb(h2, 100, 100, 1));
    };
    ColorPicker2.prototype.getHsvContainer = function() {
      return select$1("." + HSVCONTAINER, this.container);
    };
    ColorPicker2.prototype.setHandlerPosition = function() {
      var dragHandler = this.getDragHandler();
      var hsvArea = select$1("." + HSVAREA, this.container);
      if (this.enableRtl) {
        dragHandler.style.left = formatUnit(hsvArea.offsetWidth * Math.abs(100 - this.hsv[1]) / 100);
      } else {
        dragHandler.style.left = formatUnit(hsvArea.offsetWidth * this.hsv[1] / 100);
      }
      dragHandler.style.top = formatUnit(hsvArea.offsetHeight * (100 - this.hsv[2]) / 100);
    };
    ColorPicker2.prototype.createSlider = function() {
      var sliderPreviewWrapper = this.createElement("div", { className: "e-slider-preview" });
      this.appendElement(sliderPreviewWrapper, 1);
      this.createPreview(sliderPreviewWrapper);
      var sliderWrapper = this.createElement("div", { className: "e-colorpicker-slider" });
      sliderPreviewWrapper.insertBefore(sliderWrapper, sliderPreviewWrapper.children[0]);
      var slider = this.createElement("div", { className: "e-hue-slider" });
      sliderWrapper.appendChild(slider);
      this.hueSlider = new Slider({
        value: this.hsv[0],
        min: 0,
        max: 359,
        enableRtl: this.enableRtl,
        enabled: !this.disabled,
        change: this.hueChange.bind(this)
      });
      this.hueSlider.createElement = this.createElement;
      this.hueSlider.appendTo(slider);
      if (this.enableOpacity) {
        slider = this.createElement("div", { className: "e-opacity-slider" });
        sliderWrapper.appendChild(slider);
        this.createOpacitySlider(slider);
      }
    };
    ColorPicker2.prototype.createOpacitySlider = function(slider) {
      this.opacitySlider = new Slider({
        value: this.rgb[3] * 100,
        min: 0,
        max: 100,
        enableRtl: this.enableRtl,
        enabled: !this.disabled,
        change: this.opacityChange.bind(this)
      });
      this.opacitySlider.createElement = this.createElement;
      this.opacitySlider.appendTo(slider);
      var opacityBgTrack = this.createElement("div", { className: "e-opacity-empty-track" });
      slider.appendChild(opacityBgTrack);
      this.updateOpacitySliderBg();
    };
    ColorPicker2.prototype.updateOpacitySliderBg = function() {
      var direction = this.enableRtl ? "to left" : "to right";
      var opacityEle = select$1(".e-opacity-empty-track", this.opacitySlider.element);
      if (opacityEle) {
        opacityEle.style.background = "linear-gradient(" + direction + ", rgba(" + this.rgb.slice(0, 3) + ", 0) 0%, " + this.convertToRgbString(this.rgb.slice(0, 3)) + " 100%)";
      }
    };
    ColorPicker2.prototype.hueChange = function(args) {
      this.hsv[0] = args.value;
      this.setHsvContainerBg();
      this.convertToOtherFormat();
    };
    ColorPicker2.prototype.opacityChange = function(args) {
      var value = args.value;
      var pValue = this.rgbToHex(this.rgb);
      this.hsv[3] = value / 100;
      this.rgb[3] = value / 100;
      var cValue = this.rgbToHex(this.rgb);
      this.updateOpacityInput(value);
      var rgb = this.convertToRgbString(this.rgb);
      this.updatePreview(rgb);
      this.triggerEvent(cValue, pValue, rgb);
    };
    ColorPicker2.prototype.updateOpacityInput = function(value) {
      if (this.enableOpacity && !this.getWrapper().classList.contains(HIDEVALUE)) {
        var opacityTextBoxInst = getInstance(select$1("." + OPACITY, this.container), NumericTextBox);
        opacityTextBoxInst.value = value;
        opacityTextBoxInst.dataBind();
      }
    };
    ColorPicker2.prototype.createPreview = function(parentEle) {
      var previewContainer = this.createElement("div", { className: PREVIEW });
      parentEle.appendChild(previewContainer);
      var preview = this.createElement("span", { className: "e-preview " + CURRENT });
      previewContainer.appendChild(preview);
      var colorValue = this.convertToRgbString(this.rgb);
      preview.style.backgroundColor = colorValue;
      preview = this.createElement("span", { className: "e-preview " + PREVIOUS });
      previewContainer.appendChild(preview);
      preview.style.backgroundColor = colorValue;
    };
    ColorPicker2.prototype.isPicker = function() {
      return !this.container.classList.contains(PALETTECONTENT);
    };
    ColorPicker2.prototype.getPopupEle = function() {
      return this.container.parentElement;
    };
    ColorPicker2.prototype.createNumericInput = function(element2, value, label, max) {
      var _this = this;
      var numericInput = new NumericTextBox({
        value,
        placeholder: label,
        min: 0,
        max,
        format: "###.##",
        showSpinButton: false,
        floatLabelType: "Always",
        enableRtl: this.enableRtl,
        enabled: !this.disabled,
        readonly: this.isPicker() ? false : true,
        change: function(args) {
          if (args.event) {
            _this.inputHandler(args.event);
          }
        }
      });
      numericInput.createElement = this.createElement;
      numericInput.appendTo(element2);
    };
    ColorPicker2.prototype.createInput = function() {
      var isPicker = this.isPicker();
      var wrapper = this.getWrapper();
      if (isPicker && !wrapper.classList.contains(HIDEVALUE) || !isPicker && wrapper.classList.contains(SHOWVALUE)) {
        var inputWrap = this.createElement("div", { className: INPUTWRAPPER$2 });
        if (isPicker) {
          this.appendElement(inputWrap, 2);
        } else {
          this.appendElement(inputWrap, 1);
        }
        var container = this.createElement("div", { className: "e-input-container" });
        inputWrap.appendChild(container);
        if (!wrapper.classList.contains(HIDEVALUESWITCH)) {
          this.appendValueSwitchBtn(inputWrap);
        }
        if (!wrapper.classList.contains(HIDEHEX)) {
          var hexInput = this.createElement("input", {
            className: HEX,
            attrs: { "maxlength": "7", "spellcheck": "false", "aria-label": "HEX" }
          });
          container.appendChild(hexInput);
          Input.createInput({
            element: hexInput,
            floatLabelType: "Always",
            properties: {
              placeholder: "HEX",
              enableRtl: this.enableRtl,
              enabled: !this.disabled,
              readonly: this.isPicker() ? false : true
            }
          }, this.createElement);
          Input.setValue(this.value.slice(0, 7), hexInput);
          hexInput.addEventListener("input", this.inputHandler.bind(this));
        }
        if (!wrapper.classList.contains(HIDERGBA)) {
          var label = void 0;
          var value = void 0;
          if (this.isRgb) {
            label = "RGB";
            value = this.rgb;
          } else {
            label = "HSV";
            value = this.hsv;
          }
          var clsName = ["rh", "gs", "bv"];
          for (var i = 0; i < 3; i++) {
            this.createNumericInput(container.appendChild(this.createElement("input", { className: "e-" + clsName[i] + "-value" })), value[i], label[i], 255);
          }
          if (this.enableOpacity) {
            this.appendOpacityValue(container);
          }
        }
      }
    };
    ColorPicker2.prototype.appendOpacityValue = function(container) {
      this.createNumericInput(container.appendChild(this.createElement("input", { className: OPACITY })), this.rgb[3] * 100, "A", 100);
    };
    ColorPicker2.prototype.appendValueSwitchBtn = function(targetEle) {
      var valueSwitchBtn = this.createElement("button", {
        className: "e-icons e-css e-btn e-flat e-icon-btn " + FORMATSWITCH,
        attrs: { "title": "Toggle format" }
      });
      targetEle.appendChild(valueSwitchBtn);
      if (this.isPicker() && !this.getWrapper().classList.contains(HIDERGBA)) {
        valueSwitchBtn.addEventListener("click", this.formatSwitchHandler.bind(this));
      }
    };
    ColorPicker2.prototype.createCtrlBtn = function() {
      if (this.modeSwitcher || this.showButtons) {
        this.l10n.setLocale(this.locale);
        var btnWrapper = this.createElement("div", { className: CTRLSWITCH });
        this.container.appendChild(btnWrapper);
        if (this.showButtons) {
          var controlBtnWrapper = this.createElement("div", { className: CTRLBTN });
          btnWrapper.appendChild(controlBtnWrapper);
          var apply = this.l10n.getConstant("Apply");
          controlBtnWrapper.appendChild(this.createElement("button", {
            innerHTML: apply,
            className: "e-btn e-css e-flat e-primary e-small " + APPLY,
            attrs: { "title": apply }
          }));
          var cancel = this.l10n.getConstant("Cancel");
          controlBtnWrapper.appendChild(this.createElement("button", {
            innerHTML: cancel,
            className: "e-btn e-css e-flat e-small " + CANCEL,
            attrs: { "title": cancel }
          }));
        }
        if (this.modeSwitcher) {
          this.appendModeSwitchBtn();
        }
      }
    };
    ColorPicker2.prototype.appendModeSwitchBtn = function() {
      var modeSwitcher = this.createElement("button", {
        className: "e-icons e-btn e-flat e-icon-btn " + MODESWITCH,
        attrs: { title: this.l10n.getConstant("ModeSwitcher") }
      });
      select$1("." + CTRLSWITCH, this.container).insertBefore(modeSwitcher, select$1("." + CTRLBTN, this.container));
    };
    ColorPicker2.prototype.createDragTooltip = function() {
      var _this = this;
      var tooltip = new Tooltip({
        opensOn: "Custom",
        showTipPointer: false,
        cssClass: "e-color-picker-tooltip",
        beforeOpen: function(args) {
          _this.tooltipEle = args.element;
        },
        animation: { open: { effect: "None" }, close: { effect: "None" } }
      });
      tooltip.createElement = this.createElement;
      tooltip.appendTo(this.container);
      tooltip.open(this.container);
      this.tooltipEle.style.zIndex = getZindexPartial(this.tooltipEle).toString();
      select$1(".e-tip-content", this.tooltipEle).appendChild(this.createElement("div", { className: "e-tip-transparent" }));
    };
    ColorPicker2.prototype.getTooltipInst = function() {
      return getInstance(this.container, Tooltip);
    };
    ColorPicker2.prototype.setTooltipOffset = function(value) {
      this.getTooltipInst().offsetY = value;
    };
    ColorPicker2.prototype.toggleDisabled = function(enable) {
      if (enable) {
        this.getWrapper().classList.add(DISABLED$5);
      } else {
        this.getWrapper().classList.remove(DISABLED$5);
      }
      if (this.showButtons) {
        [].slice.call(selectAll(".e-btn", this.container)).forEach(function(ele) {
          if (enable) {
            attributes(ele, { "disabled": "" });
          } else {
            ele.removeAttribute("disabled");
          }
        });
      }
    };
    ColorPicker2.prototype.convertToRgbString = function(rgb) {
      return rgb.length ? rgb.length === 4 ? "rgba(" + rgb.join() + ")" : "rgb(" + rgb.join() + ")" : "";
    };
    ColorPicker2.prototype.convertToHsvString = function(hsv) {
      return hsv.length === 4 ? "hsva(" + hsv.join() + ")" : "hsv(" + hsv.join() + ")";
    };
    ColorPicker2.prototype.updateHsv = function() {
      this.hsv[1] = this.hsv[1] > 100 ? 100 : this.hsv[1];
      this.hsv[2] = this.hsv[2] > 100 ? 100 : this.hsv[2];
      this.setHandlerPosition();
    };
    ColorPicker2.prototype.convertToOtherFormat = function(isKey) {
      if (isKey === void 0) {
        isKey = false;
      }
      var pValue = this.rgbToHex(this.rgb);
      this.rgb = this.hsvToRgb.apply(this, this.hsv);
      var cValue = this.rgbToHex(this.rgb);
      var rgba = this.convertToRgbString(this.rgb);
      this.updatePreview(rgba);
      this.updateInput(cValue);
      this.triggerEvent(cValue, pValue, rgba, isKey);
    };
    ColorPicker2.prototype.updateInput = function(value) {
      var wrapper = this.getWrapper();
      if (!wrapper.classList.contains(HIDEVALUE)) {
        if (!wrapper.classList.contains(HIDEHEX)) {
          Input.setValue(value.substr(0, 7), select$1("." + HEX, this.container));
        }
        if (!wrapper.classList.contains(HIDERGBA)) {
          if (this.isRgb) {
            this.updateValue(this.rgb, false);
          } else {
            this.updateValue(this.hsv, false);
          }
        }
      }
    };
    ColorPicker2.prototype.updatePreview = function(value) {
      if (this.enableOpacity) {
        this.updateOpacitySliderBg();
      }
      select$1(".e-tip-transparent", this.tooltipEle).style.backgroundColor = value;
      select$1("." + PREVIEW + " ." + CURRENT, this.container).style.backgroundColor = value;
      select$1("." + PREVIEW + " ." + PREVIOUS, this.container).style.backgroundColor = this.convertToRgbString(this.hexToRgb(this.value));
    };
    ColorPicker2.prototype.getDragHandler = function() {
      return select$1("." + HANDLER, this.container);
    };
    ColorPicker2.prototype.removeTileSelection = function() {
      var selectedEle = [].slice.call(selectAll("." + SELECT, this.container.children[0]));
      selectedEle.forEach(function(ele) {
        ele.classList.remove(SELECT);
        ele.setAttribute("aria-selected", "false");
      });
    };
    ColorPicker2.prototype.convertRgbToNumberArray = function(value) {
      return value.slice(value.indexOf("(") + 1, value.indexOf(")")).split(",").map(function(n, i) {
        return i !== 3 ? parseInt(n, 10) : parseFloat(n);
      });
    };
    ColorPicker2.prototype.getValue = function(value, type) {
      if (!value) {
        value = this.value;
      }
      type = !type ? "hex" : type.toLowerCase();
      if (value[0] === "r") {
        var cValue = this.convertRgbToNumberArray(value);
        if (type === "hex" || type === "hexa") {
          var hex = this.rgbToHex(cValue);
          return type === "hex" ? hex.slice(0, 7) : hex;
        } else {
          if (type === "hsv") {
            return this.convertToHsvString(this.rgbToHsv.apply(this, cValue.slice(0, 3)));
          } else {
            if (type === "hsva") {
              return this.convertToHsvString(this.rgbToHsv.apply(this, cValue));
            } else {
              return "null";
            }
          }
        }
      } else {
        if (value[0] === "h") {
          var cValue = this.hsvToRgb.apply(this, this.convertRgbToNumberArray(value));
          if (type === "rgba") {
            return this.convertToRgbString(cValue);
          } else {
            if (type === "hex" || type === "hexa") {
              var hex = this.rgbToHex(cValue);
              return type === "hex" ? hex.slice(0, 7) : hex;
            } else {
              if (type === "rgb") {
                return this.convertToRgbString(cValue.slice(0, 3));
              } else {
                return "null";
              }
            }
          }
        } else {
          value = this.roundValue(value);
          var rgb = this.hexToRgb(value);
          if (type === "rgb" || type === "hsv") {
            rgb = rgb.slice(0, 3);
          }
          if (type === "rgba" || type === "rgb") {
            return this.convertToRgbString(rgb);
          } else {
            if (type === "hsva" || type === "hsv") {
              return this.convertToHsvString(this.rgbToHsv.apply(this, rgb));
            } else {
              if (type === "hex") {
                return value.slice(0, 7);
              } else {
                if (type === "a") {
                  return rgb[3].toString();
                } else {
                  return "null";
                }
              }
            }
          }
        }
      }
    };
    ColorPicker2.prototype.toggle = function() {
      if (this.container.parentElement.classList.contains("e-popup-close")) {
        this.splitBtn.toggle();
      } else {
        this.closePopup(null);
      }
    };
    ColorPicker2.prototype.getModuleName = function() {
      return "colorpicker";
    };
    ColorPicker2.prototype.getPersistData = function() {
      return this.addOnPersist(["value"]);
    };
    ColorPicker2.prototype.wireEvents = function() {
      if (this.isPicker()) {
        var dragHandler = this.getDragHandler();
        EventHandler.add(dragHandler, "keydown", this.pickerKeyDown, this);
        var ctrlBtn = select$1("." + CTRLBTN, this.container);
        if (ctrlBtn) {
          EventHandler.add(ctrlBtn, "keydown", this.ctrlBtnKeyDown, this);
        }
        EventHandler.add(this.getHsvContainer(), "mousedown touchstart", this.handlerDown, this);
        if (this.modeSwitcher || this.showButtons) {
          this.addCtrlSwitchEvent();
        }
        EventHandler.add(select$1("." + PREVIOUS, this.container), "click", this.previewHandler, this);
      } else {
        EventHandler.add(this.container, "click", this.paletteClickHandler, this);
        EventHandler.add(this.container, "keydown", this.paletteKeyDown, this);
      }
    };
    ColorPicker2.prototype.formResetHandler = function() {
      this.value = this.initialInputValue;
      attributes(this.element, { "value": this.initialInputValue });
    };
    ColorPicker2.prototype.addCtrlSwitchEvent = function() {
      var ctrlSwitchBtn = select$1("." + CTRLSWITCH, this.container);
      if (ctrlSwitchBtn) {
        EventHandler.add(ctrlSwitchBtn, "click", this.btnClickHandler, this);
      }
    };
    ColorPicker2.prototype.ctrlBtnKeyDown = function(e) {
      if (e.keyCode === 13) {
        var applyBtn = select$1("." + APPLY, this.container);
        if (applyBtn) {
          var cValue = this.rgbToHex(this.rgb);
          this.triggerChangeEvent(cValue);
        }
        this.splitBtn.element.focus();
      }
    };
    ColorPicker2.prototype.pickerKeyDown = function(e) {
      switch (e.keyCode) {
        case 39:
          this.handlerDragPosition(1, this.enableRtl ? -1 : 1, e);
          break;
        case 37:
          this.handlerDragPosition(1, this.enableRtl ? 1 : -1, e);
          break;
        case 38:
          this.handlerDragPosition(2, 1, e);
          break;
        case 40:
          this.handlerDragPosition(2, -1, e);
          break;
        case 13: {
          e.preventDefault();
          var cValue = this.rgbToHex(this.rgb);
          this.enterKeyHandler(cValue, e);
        }
      }
    };
    ColorPicker2.prototype.enterKeyHandler = function(value, e) {
      this.triggerChangeEvent(value);
      if (!this.inline) {
        this.splitBtn.element.focus();
      }
    };
    ColorPicker2.prototype.closePopup = function(e) {
      var _this = this;
      var beforeCloseArgs = { element: this.container, event: e, cancel: false };
      this.trigger("beforeClose", beforeCloseArgs, function(observedcloseArgs) {
        if (!observedcloseArgs.cancel) {
          _this.splitBtn.toggle();
          _this.onPopupClose();
        }
      });
    };
    ColorPicker2.prototype.triggerChangeEvent = function(value) {
      var hex = value.slice(0, 7);
      this.trigger("change", {
        currentValue: { hex, rgba: this.convertToRgbString(this.rgb) },
        previousValue: { hex: this.value.slice(0, 7), rgba: this.convertToRgbString(this.hexToRgb(this.value)) },
        value: this.enableOpacity ? value : hex
      });
      if (this.enableOpacity) {
        this.setProperties({ "value": value }, true);
      } else {
        this.setProperties({ "value": hex }, true);
      }
      this.element.value = hex ? hex : "#000000";
    };
    ColorPicker2.prototype.handlerDragPosition = function(prob, value, e) {
      e.preventDefault();
      this.hsv[prob] += value * (e.ctrlKey ? 1 : 3);
      if (this.hsv[prob] < 0) {
        this.hsv[prob] = 0;
      }
      this.updateHsv();
      this.convertToOtherFormat(true);
    };
    ColorPicker2.prototype.handlerDown = function(e) {
      e.preventDefault();
      if (e.type === "mousedown") {
        this.clientX = Math.abs(e.pageX - pageXOffset);
        this.clientY = Math.abs(e.pageY - pageYOffset);
        this.setTooltipOffset(8);
      } else {
        this.clientX = Math.abs(e.changedTouches[0].pageX - pageXOffset);
        this.clientY = Math.abs(e.changedTouches[0].pageY - pageYOffset);
        this.setTooltipOffset(-8);
      }
      this.setHsv(this.clientX, this.clientY);
      this.getDragHandler().style.transition = "left .4s cubic-bezier(.25, .8, .25, 1), top .4s cubic-bezier(.25, .8, .25, 1)";
      this.updateHsv();
      this.convertToOtherFormat();
      this.getDragHandler().focus();
      EventHandler.add(document, "mousemove touchmove", this.handlerMove, this);
      EventHandler.add(document, "mouseup touchend", this.handlerEnd, this);
    };
    ColorPicker2.prototype.handlerMove = function(e) {
      if (e.type !== "touchmove") {
        e.preventDefault();
      }
      var x;
      var y;
      if (e.type === "mousemove") {
        x = Math.abs(e.pageX - pageXOffset);
        y = Math.abs(e.pageY - pageYOffset);
      } else {
        x = Math.abs(e.changedTouches[0].pageX - pageXOffset);
        y = Math.abs(e.changedTouches[0].pageY - pageYOffset);
      }
      this.setHsv(x, y);
      var dragHandler = this.getDragHandler();
      this.updateHsv();
      this.convertToOtherFormat();
      this.getTooltipInst().refresh(dragHandler);
      if (!this.tooltipEle.style.transform) {
        if (Math.abs(this.clientX - x) > 8 || Math.abs(this.clientY - y) > 8) {
          select$1("." + HSVAREA, this.container).style.cursor = "pointer";
          dragHandler.style.transition = "none";
          if (!this.inline) {
            this.tooltipEle.style.zIndex = (parseInt(this.getPopupEle().style.zIndex, 10) + 1).toString();
          }
          this.tooltipEle.style.transform = "rotate(45deg)";
          dragHandler.classList.add("e-hide-handler");
        }
      }
    };
    ColorPicker2.prototype.setHsv = function(clientX, clientY) {
      var ele = select$1("." + HSVAREA, this.container);
      var position = ele.getBoundingClientRect();
      if (this.enableRtl) {
        clientX = clientX > position.right ? 0 : Math.abs(clientX - position.right);
      } else {
        clientX = clientX > position.left ? Math.abs(clientX - position.left) : 0;
      }
      clientY = clientY > position.top ? Math.abs(clientY - position.top) : 0;
      this.hsv[2] = Math.round(Number(100 * (ele.offsetHeight - Math.max(0, Math.min(ele.offsetHeight, clientY - ele.offsetTop))) / ele.offsetHeight) * 10) / 10;
      this.hsv[1] = Math.round(Number(100 * Math.max(0, Math.min(ele.offsetWidth, clientX - ele.offsetLeft)) / ele.offsetWidth) * 10) / 10;
    };
    ColorPicker2.prototype.handlerEnd = function(e) {
      if (e.type !== "touchend") {
        e.preventDefault();
      }
      EventHandler.remove(document, "mousemove touchmove", this.handlerMove);
      EventHandler.remove(document, "mouseup touchend", this.handlerEnd);
      var dragHandler = this.getDragHandler();
      select$1("." + HSVAREA, this.container).style.cursor = "";
      if (this.tooltipEle.style.transform) {
        this.tooltipEle.style.transform = "";
        dragHandler.classList.remove("e-hide-handler");
      }
      if (!this.inline && !this.showButtons) {
        this.closePopup(e);
      }
    };
    ColorPicker2.prototype.btnClickHandler = function(e) {
      var target = e.target;
      if (closest(target, "." + MODESWITCH)) {
        e.stopPropagation();
        this.switchToPalette();
      } else {
        if (target.classList.contains(APPLY) || target.classList.contains(CANCEL)) {
          this.ctrlBtnClick(target, e);
        }
      }
    };
    ColorPicker2.prototype.switchToPalette = function() {
      this.trigger("beforeModeSwitch", { element: this.container, mode: "Palette" });
      this.unWireEvents();
      this.destroyOtherComp();
      detach(select$1(".e-slider-preview", this.container));
      if (!this.getWrapper().classList.contains(HIDEVALUE)) {
        remove(select$1("." + INPUTWRAPPER$2, this.container));
      }
      detach(this.getHsvContainer());
      this.createPalette();
      this.firstPaletteFocus();
      this.createInput();
      this.refreshPopupPos();
      this.wireEvents();
      this.trigger("onModeSwitch", { element: this.container, mode: "Palette" });
    };
    ColorPicker2.prototype.refreshPopupPos = function() {
      if (!this.inline) {
        var popupEle = this.getPopupEle();
        popupEle.style.left = formatUnit(0 + pageXOffset);
        popupEle.style.top = formatUnit(0 + pageYOffset);
        this.getPopupInst().refreshPosition(this.splitBtn.element.parentElement);
      }
    };
    ColorPicker2.prototype.formatSwitchHandler = function() {
      if (this.isRgb) {
        this.updateValue(this.hsv, true, 3, [360, 100, 100]);
        this.isRgb = false;
      } else {
        this.updateValue(this.rgb, true, 2);
        this.isRgb = true;
      }
    };
    ColorPicker2.prototype.updateValue = function(value, format, idx, max) {
      var clsName = ["e-rh-value", "e-gs-value", "e-bv-value"];
      var inst;
      for (var i = 0, len = clsName.length; i < len; i++) {
        inst = getInstance(select$1("." + clsName[i], this.container), NumericTextBox);
        inst.value = Math.round(value[i]);
        if (format) {
          inst.placeholder = clsName[i].substr(idx, 1).toUpperCase();
          inst.max = max ? max[i] : 255;
        }
        inst.dataBind();
      }
    };
    ColorPicker2.prototype.previewHandler = function(e) {
      var target = e.target;
      var pValue = this.rgbToHex(this.rgb);
      this.rgb = this.convertRgbToNumberArray(target.style.backgroundColor);
      if (!this.rgb[3]) {
        this.rgb[3] = 1;
      }
      var cValue = this.rgbToHex(this.rgb);
      var hsv = this.rgbToHsv.apply(this, this.rgb);
      if (hsv[0] !== this.hsv[0]) {
        this.hueSlider.setProperties({ "value": hsv[0] }, true);
        this.hueSlider.refresh();
      }
      this.setHsvContainerBg(hsv[0]);
      if (this.enableOpacity && hsv[3] !== this.hsv[3]) {
        this.opacitySlider.setProperties({ "value": hsv[3] * 100 }, true);
        this.opacitySlider.refresh();
        this.updateOpacitySliderBg();
      }
      this.hsv = hsv;
      this.setHandlerPosition();
      this.updateInput(cValue);
      select$1("." + PREVIEW + " ." + CURRENT, this.container).style.backgroundColor = this.convertToRgbString(this.rgb);
      this.triggerEvent(cValue, pValue, this.convertToRgbString(this.rgb));
    };
    ColorPicker2.prototype.paletteClickHandler = function(e) {
      e.preventDefault();
      var target = e.target;
      if (target.classList.contains(TILE)) {
        this.removeTileSelection();
        this.addTileSelection(target);
        if (target.classList.contains(NOCOLOR)) {
          this.noColorTile();
        } else {
          var cValue = target.getAttribute("aria-label");
          var pValue = this.rgbToHex(this.rgb);
          this.rgb = this.hexToRgb(this.roundValue(cValue));
          this.hsv = this.rgbToHsv.apply(this, this.rgb);
          if (this.getWrapper().classList.contains(SHOWVALUE)) {
            this.updateInput(cValue);
          }
          this.triggerEvent(cValue, pValue, this.convertToRgbString(this.rgb));
        }
        if (!this.inline && !this.showButtons) {
          this.closePopup(e);
        }
      } else {
        if (closest(target, "." + MODESWITCH)) {
          this.switchToPicker();
        } else {
          if (target.classList.contains(APPLY) || target.classList.contains(CANCEL)) {
            this.ctrlBtnClick(target, e);
          } else {
            if (this.getWrapper().classList.contains(SHOWVALUE) && closest(target, "." + FORMATSWITCH)) {
              this.formatSwitchHandler();
            }
          }
        }
      }
    };
    ColorPicker2.prototype.noColorTile = function(isKey) {
      if (isKey === void 0) {
        isKey = false;
      }
      var pValue = this.rgbToHex(this.rgb);
      this.rgb = [];
      this.hsv = [];
      this.triggerEvent("", pValue, "", isKey);
    };
    ColorPicker2.prototype.switchToPicker = function() {
      var wrapper = this.getWrapper();
      this.trigger("beforeModeSwitch", { element: this.container, mode: "Picker" });
      this.unWireEvents();
      [].slice.call(selectAll("." + PALETTES, this.container)).forEach(function(ele) {
        detach(ele);
      });
      if (wrapper.classList.contains(SHOWVALUE)) {
        detach(select$1("." + INPUTWRAPPER$2, this.container));
      }
      this.container.style.width = "";
      var grpEle = select$1(".e-custom-palette", this.container);
      if (this.presetColors) {
        remove(grpEle);
      }
      this.createPicker();
      this.getDragHandler().focus();
      this.createInput();
      this.refreshPopupPos();
      this.wireEvents();
      this.trigger("onModeSwitch", { element: this.container, mode: "Picker" });
    };
    ColorPicker2.prototype.ctrlBtnClick = function(ele, e) {
      if (ele.classList.contains(APPLY)) {
        var cValue = this.rgbToHex(this.rgb);
        this.triggerChangeEvent(cValue);
      }
      if (!this.inline) {
        this.closePopup(e);
        this.splitBtn.element.focus();
      }
    };
    ColorPicker2.prototype.paletteKeyDown = function(e) {
      var target = e.target;
      if (!target.classList.contains(PALETTES)) {
        return;
      }
      var selectedEle;
      var idx;
      var tiles = [].slice.call(selectAll("." + TILE, target));
      var prevSelectedEle = tiles.filter(function(tile) {
        return tile.classList.contains("e-selected");
      }).pop();
      switch (!e.altKey && e.keyCode) {
        case 39:
          e.preventDefault();
          selectedEle = prevSelectedEle ? tiles[this.tilePosition(tiles, prevSelectedEle, this.enableRtl ? -1 : 1)] : tiles[this.enableRtl ? tiles.length - 1 : 0];
          this.keySelectionChanges(selectedEle);
          break;
        case 37:
          e.preventDefault();
          selectedEle = prevSelectedEle ? tiles[this.tilePosition(tiles, prevSelectedEle, this.enableRtl ? 1 : -1)] : tiles[this.enableRtl ? 0 : tiles.length - 1];
          this.keySelectionChanges(selectedEle);
          break;
        case 38:
          e.preventDefault();
          idx = prevSelectedEle ? this.tilePosition(tiles, prevSelectedEle, -this.columns) : 0;
          selectedEle = tiles[idx] ? tiles[idx] : tiles[idx - this.columns];
          this.keySelectionChanges(selectedEle);
          break;
        case 40:
          e.preventDefault();
          idx = prevSelectedEle ? this.tilePosition(tiles, prevSelectedEle, this.columns) : tiles.length - 1;
          if (tiles[idx]) {
            selectedEle = tiles[idx];
          } else {
            idx %= tiles.length;
            idx += tiles[tiles.length - 1].parentElement.childElementCount;
            selectedEle = tiles[idx];
          }
          this.keySelectionChanges(selectedEle);
          break;
        case 13:
          e.preventDefault();
          if (prevSelectedEle) {
            var cValue = prevSelectedEle.getAttribute("aria-label");
            this.enterKeyHandler(cValue ? cValue : "", e);
          }
      }
    };
    ColorPicker2.prototype.keySelectionChanges = function(newEle) {
      this.removeTileSelection();
      this.addTileSelection(newEle);
      if (newEle.classList.contains(NOCOLOR)) {
        this.noColorTile(true);
      } else {
        var cValue = newEle.getAttribute("aria-label");
        var pValue = this.rgbToHex(this.rgb);
        this.rgb = this.hexToRgb(cValue);
        this.hsv = this.rgbToHsv.apply(this, this.rgb);
        if (this.getWrapper().classList.contains(SHOWVALUE)) {
          this.updateInput(cValue);
        }
        this.triggerEvent(cValue, pValue, this.convertToRgbString(this.rgb), true);
      }
    };
    ColorPicker2.prototype.tilePosition = function(items, element2, cIdx) {
      items = Array.prototype.slice.call(items);
      var n = items.length;
      var emptyCount = this.columns - items[n - 1].parentElement.childElementCount;
      var idx = items.indexOf(element2);
      idx += cIdx;
      if (idx < 0) {
        idx += n + emptyCount;
      } else {
        idx %= n + emptyCount;
      }
      return idx;
    };
    ColorPicker2.prototype.inputHandler = function(e) {
      var target = e.target;
      if (!target.value.length) {
        return;
      }
      var hsv;
      var pValue;
      var label = select$1(".e-float-text", target.parentElement).textContent;
      switch (label) {
        case "HEX": {
          var value = "";
          if (target.value[0] === "#" && target.value.length !== 5 || target.value[0] !== "#" && target.value.length !== 4) {
            value = this.roundValue(target.value);
          }
          if (value.length === 9) {
            pValue = this.rgbToHex(this.rgb);
            this.rgb = this.hexToRgb(value + value.substr(-2));
            this.inputValueChange(this.rgbToHsv.apply(this, this.rgb), pValue, target.value);
          } else {
            return;
          }
          break;
        }
        case "R":
          if (this.rgb[0] !== Number(target.value)) {
            pValue = this.rgbToHex(this.rgb);
            this.rgb[0] = Number(target.value);
            hsv = this.rgbToHsv.apply(this, this.rgb);
            this.inputValueChange(hsv, pValue);
          }
          break;
        case "G":
          if (this.rgb[1] !== Number(target.value)) {
            pValue = this.rgbToHex(this.rgb);
            this.rgb[1] = Number(target.value);
            hsv = this.rgbToHsv.apply(this, this.rgb);
            this.inputValueChange(hsv, pValue);
          }
          break;
        case "B":
          if (this.rgb[2] !== Number(target.value)) {
            pValue = this.rgbToHex(this.rgb);
            this.rgb[2] = Number(target.value);
            hsv = this.rgbToHsv.apply(this, this.rgb);
            this.inputValueChange(hsv, pValue);
          }
          break;
        case "H":
          this.hueSlider.value = Number(target.value);
          break;
        case "S":
          if (this.hsv[1] !== Number(target.value)) {
            this.hsv[1] = Number(target.value);
            this.updateHsv();
            this.convertToOtherFormat();
          }
          break;
        case "V":
          if (this.hsv[2] !== Number(target.value)) {
            this.hsv[2] = Number(target.value);
            this.updateHsv();
            this.convertToOtherFormat();
          }
          break;
        case "A":
          this.opacitySlider.value = Number(target.value);
          break;
      }
    };
    ColorPicker2.prototype.inputValueChange = function(hsv, pValue, value) {
      if (hsv[0] !== this.hsv[0]) {
        this.hueSlider.setProperties({ "value": hsv[0] }, true);
        this.hueSlider.refresh();
        this.setHsvContainerBg(hsv[0]);
      }
      this.hsv = hsv;
      var cValue = this.rgbToHex(this.rgb);
      this.setHandlerPosition();
      this.updateInput(value ? value : cValue);
      var rgba = this.convertToRgbString(this.rgb);
      this.updatePreview(rgba);
      this.triggerEvent(cValue, pValue, rgba);
    };
    ColorPicker2.prototype.triggerEvent = function(cValue, pValue, rgba, isKey) {
      if (isKey === void 0) {
        isKey = false;
      }
      var hex = cValue.slice(0, 7);
      if (!this.showButtons && !isKey) {
        this.trigger("change", {
          currentValue: { hex, rgba },
          previousValue: { hex: this.value.slice(0, 7), rgba: this.convertToRgbString(this.hexToRgb(this.value)) },
          value: cValue
        });
        if (this.enableOpacity) {
          this.setProperties({ "value": cValue }, true);
        } else {
          this.setProperties({ "value": hex }, true);
        }
        this.element.value = hex ? hex : "#000000";
      } else {
        this.trigger("select", {
          currentValue: { hex, rgba },
          previousValue: { hex: pValue.slice(0, 7), rgba: this.convertToRgbString(this.hexToRgb(pValue)) }
        });
      }
    };
    ColorPicker2.prototype.destroy = function() {
      var _this = this;
      var wrapper = this.getWrapper();
      _super.prototype.destroy.call(this);
      ["tabindex", "spellcheck"].forEach(function(attr) {
        _this.element.removeAttribute(attr);
      });
      if (this.inline) {
        this.unWireEvents();
        this.destroyOtherComp();
      } else {
        if (this.isPopupOpen()) {
          this.unWireEvents();
          this.destroyOtherComp();
        }
        this.splitBtn.destroy();
        this.splitBtn = null;
      }
      this.tileRipple();
      this.tileRipple = null;
      this.ctrlBtnRipple();
      this.ctrlBtnRipple = null;
      if (this.element.nextElementSibling) {
        detach(this.element.nextElementSibling);
      }
      if (wrapper) {
        wrapper.parentElement.insertBefore(this.element, wrapper);
        detach(wrapper);
      }
      this.container = null;
      if (this.formElement) {
        EventHandler.remove(this.formElement, "reset", this.formResetHandler);
      }
    };
    ColorPicker2.prototype.destroyOtherComp = function() {
      if (this.isPicker()) {
        this.hueSlider.destroy();
        if (this.enableOpacity) {
          this.opacitySlider.destroy();
          this.opacitySlider = null;
        }
        this.hueSlider = null;
        var tooltipInst = this.getTooltipInst();
        tooltipInst.close();
        tooltipInst.destroy();
        this.tooltipEle = null;
      }
    };
    ColorPicker2.prototype.isPopupOpen = function() {
      return this.getPopupEle().classList.contains("e-popup-open");
    };
    ColorPicker2.prototype.unWireEvents = function() {
      if (this.isPicker()) {
        var dragHandler = this.getDragHandler();
        EventHandler.remove(dragHandler, "keydown", this.pickerKeyDown);
        var ctrlBtn = select$1("." + CTRLBTN, this.container);
        if (ctrlBtn) {
          EventHandler.remove(ctrlBtn, "keydown", this.ctrlBtnKeyDown);
        }
        EventHandler.remove(this.getHsvContainer(), "mousedown touchstart", this.handlerDown);
        if (this.modeSwitcher || this.showButtons) {
          EventHandler.remove(select$1("." + CTRLSWITCH, this.container), "click", this.btnClickHandler);
        }
        EventHandler.remove(select$1("." + PREVIOUS, this.container), "click", this.previewHandler);
      } else {
        EventHandler.remove(this.container, "click", this.paletteClickHandler);
        EventHandler.remove(this.container, "keydown", this.paletteKeyDown);
      }
    };
    ColorPicker2.prototype.roundValue = function(value) {
      if (!value) {
        return "";
      }
      if (value[0] !== "#") {
        value = "#" + value;
      }
      var len = value.length;
      if (len === 4) {
        value += "f";
        len = 5;
      }
      if (len === 5) {
        var tempValue = "";
        for (var i = 1, len_1 = value.length; i < len_1; i++) {
          tempValue += value.charAt(i) + value.charAt(i);
        }
        value = "#" + tempValue;
        len = 9;
      }
      if (len === 7) {
        value += "ff";
      }
      return value;
    };
    ColorPicker2.prototype.hexToRgb = function(hex) {
      if (!hex) {
        return [];
      }
      hex = hex.trim();
      if (hex.length !== 9) {
        hex = this.roundValue(hex);
      }
      var opacity = Number((parseInt(hex.slice(-2), 16) / 255).toFixed(2));
      hex = hex.slice(1, 7);
      var bigInt = parseInt(hex, 16);
      var h2 = [];
      h2.push(bigInt >> 16 & 255);
      h2.push(bigInt >> 8 & 255);
      h2.push(bigInt & 255);
      h2.push(opacity);
      return h2;
    };
    ColorPicker2.prototype.rgbToHsv = function(r, g, b, opacity) {
      if (this.rgb && !this.rgb.length) {
        return [];
      }
      r /= 255;
      g /= 255;
      b /= 255;
      var max = Math.max(r, g, b);
      var min = Math.min(r, g, b);
      var h2;
      var v = max;
      var d = max - min;
      var s = max === 0 ? 0 : d / max;
      if (max === min) {
        h2 = 0;
      } else {
        switch (max) {
          case r:
            h2 = (g - b) / d + (g < b ? 6 : 0);
            break;
          case g:
            h2 = (b - r) / d + 2;
            break;
          case b:
            h2 = (r - g) / d + 4;
            break;
        }
        h2 /= 6;
      }
      var hsv = [Math.round(h2 * 360), Math.round(s * 1e3) / 10, Math.round(v * 1e3) / 10];
      if (!isNullOrUndefined(opacity)) {
        hsv.push(opacity);
      }
      return hsv;
    };
    ColorPicker2.prototype.hsvToRgb = function(h2, s, v, opacity) {
      var r;
      var g;
      var b;
      s /= 100;
      v /= 100;
      if (s === 0) {
        r = g = b = v;
        return [Math.round(r * 255), Math.round(g * 255), Math.round(b * 255), opacity];
      }
      h2 /= 60;
      var i = Math.floor(h2);
      var f = h2 - i;
      var p2 = v * (1 - s);
      var q = v * (1 - s * f);
      var t = v * (1 - s * (1 - f));
      switch (i) {
        case 0:
          r = v;
          g = t;
          b = p2;
          break;
        case 1:
          r = q;
          g = v;
          b = p2;
          break;
        case 2:
          r = p2;
          g = v;
          b = t;
          break;
        case 3:
          r = p2;
          g = q;
          b = v;
          break;
        case 4:
          r = t;
          g = p2;
          b = v;
          break;
        default:
          r = v;
          g = p2;
          b = q;
      }
      var rgb = [Math.round(r * 255), Math.round(g * 255), Math.round(b * 255)];
      if (!isNullOrUndefined(opacity)) {
        rgb.push(opacity);
      }
      return rgb;
    };
    ColorPicker2.prototype.rgbToHex = function(rgb) {
      return rgb.length ? "#" + this.hex(rgb[0]) + this.hex(rgb[1]) + this.hex(rgb[2]) + (!isNullOrUndefined(rgb[3]) ? rgb[3] !== 0 ? (Math.round(rgb[3] * 255) + 65536).toString(16).substr(-2) : "00" : "") : "";
    };
    ColorPicker2.prototype.hex = function(x) {
      return ("0" + x.toString(16)).slice(-2);
    };
    ColorPicker2.prototype.changeModeSwitcherProp = function(prop) {
      var ctrlSwitchWrapper = select$1("." + CTRLSWITCH, this.container);
      if (prop) {
        if (ctrlSwitchWrapper) {
          this.appendModeSwitchBtn();
        } else {
          this.createCtrlBtn();
          if (this.isPicker() && !this.disabled) {
            this.addCtrlSwitchEvent();
          }
        }
      } else {
        if (ctrlSwitchWrapper) {
          if (this.showButtons) {
            detach(select$1("." + MODESWITCH, ctrlSwitchWrapper));
          } else {
            remove(ctrlSwitchWrapper);
          }
        }
      }
    };
    ColorPicker2.prototype.changeShowBtnProps = function(prop) {
      var ctrlBtnWrapper = select$1("." + CTRLSWITCH, this.container);
      if (prop) {
        if (ctrlBtnWrapper) {
          remove(ctrlBtnWrapper);
        }
        this.createCtrlBtn();
        if (this.isPicker() && !this.disabled) {
          this.addCtrlSwitchEvent();
        }
      } else {
        if (this.modeSwitcher) {
          detach(select$1("." + CTRLBTN, ctrlBtnWrapper));
        } else {
          remove(ctrlBtnWrapper);
        }
      }
    };
    ColorPicker2.prototype.changeValueProp = function(newProp) {
      if (this.isPicker()) {
        this.rgb = this.hexToRgb(newProp);
        this.hsv = this.rgbToHsv.apply(this, this.rgb);
        this.setHandlerPosition();
        detach(closest(this.hueSlider.element, ".e-slider-preview"));
        this.createSlider();
        this.setHsvContainerBg();
        this.updateInput(newProp);
        if (this.rgb.length === 4) {
          this.updateOpacityInput(this.rgb[3] * 100);
        }
      } else {
        this.removeTileSelection();
        var ele = this.container.querySelector('span[aria-label="' + this.roundValue(newProp) + '"]');
        if (ele) {
          this.addTileSelection(ele);
        }
      }
    };
    ColorPicker2.prototype.setInputEleProps = function() {
      remove(select$1("." + INPUTWRAPPER$2, this.container));
      this.createInput();
    };
    ColorPicker2.prototype.changeDisabledProp = function(newProp) {
      if (this.isPicker()) {
        this.hueSlider.enabled = !newProp;
        this.opacitySlider.enabled = !newProp;
        this.setInputEleProps();
      }
      if (newProp) {
        this.toggleDisabled(true);
        this.unWireEvents();
      } else {
        this.toggleDisabled(false);
        this.wireEvents();
      }
    };
    ColorPicker2.prototype.changeCssClassProps = function(newProp, oldProp) {
      var wrapper = this.getWrapper();
      var popupWrapper = this.getPopupEle();
      if (oldProp) {
        removeClass([wrapper, popupWrapper], oldProp.split(" "));
      }
      if (newProp) {
        addClass([wrapper, popupWrapper], newProp.replace(/\s+/g, " ").trim().split(" "));
      }
    };
    ColorPicker2.prototype.changeRtlProps = function(newProp) {
      if (newProp) {
        addClass([this.getWrapper()], "e-rtl");
      } else {
        removeClass([this.getWrapper()], "e-rtl");
      }
    };
    ColorPicker2.prototype.changePaletteProps = function() {
      detach(this.container.children[0]);
      this.container.style.width = "";
      this.createPalette();
    };
    ColorPicker2.prototype.changeOpacityProps = function(newProp) {
      var wrapper = this.getWrapper();
      if (newProp) {
        removeClass([this.container.parentElement], HIDEOPACITY);
        this.createOpacitySlider(select$1(".e-colorpicker-slider", this.container).appendChild(this.createElement("div", { className: "e-opacity-slider" })));
        if (!wrapper.classList.contains(HIDEVALUE) && !wrapper.classList.contains(HIDERGBA)) {
          this.appendOpacityValue(select$1(".e-input-container", this.container));
        }
      } else {
        addClass([this.container.parentElement], HIDEOPACITY);
        this.opacitySlider.destroy();
        remove(this.opacitySlider.element);
        this.opacitySlider = null;
        if (!wrapper.classList.contains(HIDEVALUE) && !wrapper.classList.contains(HIDERGBA)) {
          remove(select$1("." + OPACITY, this.container).parentElement);
        }
      }
    };
    ColorPicker2.prototype.onPropertyChanged = function(newProp, oldProp) {
      var _this = this;
      if (!isNullOrUndefined(newProp.value)) {
        var value = this.roundValue(newProp.value);
        if (value.length === 9) {
          this.element.value = this.roundValue(value).slice(0, 7);
          var preview = this.splitBtn && select$1("." + SPLITPREVIEW, this.splitBtn.element);
          if (preview) {
            preview.style.backgroundColor = this.convertToRgbString(this.hexToRgb(newProp.value));
          }
        } else {
          this.value = oldProp.value;
        }
      }
      if (!this.inline && isNullOrUndefined(newProp.inline)) {
        var otherCompModel = ["disabled", "enableRtl"];
        this.splitBtn.setProperties(getModel(newProp, otherCompModel));
        if (!this.isPopupOpen()) {
          this.changeCssClassProps(newProp.cssClass, oldProp.cssClass);
          this.changeRtlProps(newProp.enableRtl);
          return;
        }
      }
      var _loop_1 = function(prop2) {
        switch (prop2) {
          case "inline":
            if (newProp.inline) {
              this_1.getWrapper().appendChild(this_1.container);
              this_1.splitBtn.destroy();
              detach(this_1.element.nextElementSibling);
              if (!this_1.container.children.length) {
                this_1.createWidget();
              }
            } else {
              this_1.destroyOtherComp();
              this_1.unWireEvents();
              this_1.container.innerHTML = "";
              this_1.createSplitBtn();
            }
            break;
          case "cssClass": {
            this_1.changeCssClassProps(newProp.cssClass, oldProp.cssClass);
            var props2 = newProp.cssClass.split(" ").concat(oldProp.cssClass.split(" "));
            props2 = props2.reduce(function(a, b) {
              if (a.indexOf(b) < 0) {
                a.push(b);
              }
              return a;
            }, []);
            var count_1 = 0;
            props2.forEach(function(cls) {
              if (count_1 === 0 && (cls === HIDEVALUE || cls === HIDEVALUESWITCH || cls === SHOWVALUE || cls === HIDEHEX || cls === HIDERGBA)) {
                var inputWrap = select$1("." + INPUTWRAPPER$2, _this.container);
                if (inputWrap) {
                  remove(select$1("." + INPUTWRAPPER$2, _this.container));
                }
                _this.createInput();
                count_1++;
              }
            });
            break;
          }
          case "enableRtl":
            if (this_1.isPicker()) {
              this_1.hueSlider.enableRtl = newProp.enableRtl;
              if (this_1.enableOpacity) {
                this_1.opacitySlider.enableRtl = newProp.enableRtl;
              }
              this_1.setInputEleProps();
            }
            this_1.changeRtlProps(newProp.enableRtl);
            break;
          case "disabled":
            this_1.changeDisabledProp(newProp.disabled);
            break;
          case "value":
            if (this_1.value !== oldProp.value) {
              this_1.changeValueProp(newProp.value);
            }
            break;
          case "showButtons":
            this_1.changeShowBtnProps(newProp.showButtons);
            break;
          case "mode":
            if (newProp.mode === "Picker") {
              this_1.switchToPicker();
            } else {
              this_1.switchToPalette();
            }
            break;
          case "modeSwitcher":
            this_1.changeModeSwitcherProp(newProp.modeSwitcher);
            break;
          case "columns":
          case "presetColors":
            if (!this_1.isPicker()) {
              this_1.changePaletteProps();
            }
            break;
          case "noColor":
            if (newProp.noColor) {
              if (this_1.mode === "Palette" && !this_1.modeSwitcher) {
                this_1.setNoColor();
              }
            } else {
              this_1.changePaletteProps();
            }
            break;
          case "enableOpacity":
            this_1.changeOpacityProps(newProp.enableOpacity);
            break;
        }
      };
      var this_1 = this;
      for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {
        var prop = _a[_i];
        _loop_1(prop);
      }
    };
    ColorPicker2.prototype.focusIn = function() {
      this.element.parentElement.focus();
    };
    __decorate$q([
      Property("#008000ff")
    ], ColorPicker2.prototype, "value", void 0);
    __decorate$q([
      Property("")
    ], ColorPicker2.prototype, "cssClass", void 0);
    __decorate$q([
      Property(false)
    ], ColorPicker2.prototype, "disabled", void 0);
    __decorate$q([
      Property("Picker")
    ], ColorPicker2.prototype, "mode", void 0);
    __decorate$q([
      Property(true)
    ], ColorPicker2.prototype, "modeSwitcher", void 0);
    __decorate$q([
      Property(null)
    ], ColorPicker2.prototype, "presetColors", void 0);
    __decorate$q([
      Property(true)
    ], ColorPicker2.prototype, "showButtons", void 0);
    __decorate$q([
      Property(10)
    ], ColorPicker2.prototype, "columns", void 0);
    __decorate$q([
      Property(false)
    ], ColorPicker2.prototype, "inline", void 0);
    __decorate$q([
      Property(false)
    ], ColorPicker2.prototype, "noColor", void 0);
    __decorate$q([
      Property(false)
    ], ColorPicker2.prototype, "enablePersistence", void 0);
    __decorate$q([
      Property(true)
    ], ColorPicker2.prototype, "enableOpacity", void 0);
    __decorate$q([
      Property(false)
    ], ColorPicker2.prototype, "createPopupOnClick", void 0);
    __decorate$q([
      Event$1()
    ], ColorPicker2.prototype, "select", void 0);
    __decorate$q([
      Event$1()
    ], ColorPicker2.prototype, "change", void 0);
    __decorate$q([
      Event$1()
    ], ColorPicker2.prototype, "beforeTileRender", void 0);
    __decorate$q([
      Event$1()
    ], ColorPicker2.prototype, "beforeOpen", void 0);
    __decorate$q([
      Event$1()
    ], ColorPicker2.prototype, "open", void 0);
    __decorate$q([
      Event$1()
    ], ColorPicker2.prototype, "beforeClose", void 0);
    __decorate$q([
      Event$1()
    ], ColorPicker2.prototype, "beforeModeSwitch", void 0);
    __decorate$q([
      Event$1()
    ], ColorPicker2.prototype, "onModeSwitch", void 0);
    __decorate$q([
      Event$1()
    ], ColorPicker2.prototype, "created", void 0);
    ColorPicker2 = __decorate$q([
      NotifyPropertyChanges
    ], ColorPicker2);
    return ColorPicker2;
  }(Component)
);
var __extends$A = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$p = globalThis && globalThis.__decorate || function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i = decorators.length - 1; i >= 0; i--)
      if (d = decorators[i])
        r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var HIDE_CLEAR = "e-clear-icon-hide";
var TEXTBOX_FOCUS = "e-input-focus";
var containerAttr$1 = ["title", "style", "class"];
var TextBox = (
  /** @class */
  function(_super) {
    __extends$A(TextBox2, _super);
    function TextBox2(options, element2) {
      var _this = _super.call(this, options, element2) || this;
      _this.previousValue = null;
      _this.isAngular = false;
      _this.isHiddenInput = false;
      _this.isForm = false;
      _this.inputPreviousValue = null;
      _this.isVue = false;
      _this.textboxOptions = options;
      return _this;
    }
    TextBox2.prototype.onPropertyChanged = function(newProp, oldProp) {
      for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {
        var prop = _a[_i];
        switch (prop) {
          case "floatLabelType":
            Input.removeFloating(this.textboxWrapper);
            Input.addFloating(this.respectiveElement, this.floatLabelType, this.placeholder);
            break;
          case "enabled":
            Input.setEnabled(this.enabled, this.respectiveElement, this.floatLabelType, this.textboxWrapper.container);
            this.bindClearEvent();
            break;
          case "width":
            Input.setWidth(newProp.width, this.textboxWrapper.container);
            break;
          case "value":
            {
              var prevOnChange = this.isProtectedOnChange;
              this.isProtectedOnChange = true;
              if (!this.isBlank(this.value)) {
                this.value = this.value.toString();
              }
              this.isProtectedOnChange = prevOnChange;
              Input.setValue(this.value, this.respectiveElement, this.floatLabelType, this.showClearButton);
              if (this.isHiddenInput) {
                this.element.value = this.respectiveElement.value;
              }
              this.inputPreviousValue = this.respectiveElement.value;
              if ((this.isAngular || this.isVue) && this.preventChange === true) {
                this.previousValue = this.isAngular ? this.value : this.previousValue;
                this.preventChange = false;
              } else if (isNullOrUndefined(this.isAngular) || !this.isAngular || this.isAngular && !this.preventChange || this.isAngular && isNullOrUndefined(this.preventChange)) {
                this.raiseChangeEvent();
              }
            }
            break;
          case "htmlAttributes":
            {
              this.updateHTMLAttrToElement();
              this.updateHTMLAttrToWrapper();
              this.checkAttributes(true);
              Input.validateInputType(this.textboxWrapper.container, this.element);
            }
            break;
          case "readonly":
            Input.setReadonly(this.readonly, this.respectiveElement);
            break;
          case "type":
            if (this.respectiveElement.tagName !== "TEXTAREA") {
              this.respectiveElement.setAttribute("type", this.type);
              Input.validateInputType(this.textboxWrapper.container, this.element);
              this.raiseChangeEvent();
            }
            break;
          case "showClearButton":
            if (this.respectiveElement.tagName !== "TEXTAREA") {
              Input.setClearButton(this.showClearButton, this.respectiveElement, this.textboxWrapper);
              this.bindClearEvent();
            }
            break;
          case "enableRtl":
            Input.setEnableRtl(this.enableRtl, [this.textboxWrapper.container]);
            break;
          case "placeholder":
            Input.setPlaceholder(this.placeholder, this.respectiveElement);
            Input.calculateWidth(this.respectiveElement, this.textboxWrapper.container);
            break;
          case "autocomplete":
            if (this.autocomplete !== "on" && this.autocomplete !== "") {
              this.respectiveElement.autocomplete = this.autocomplete;
            } else {
              this.removeAttributes(["autocomplete"]);
            }
            break;
          case "cssClass":
            this.updateCssClass(newProp.cssClass, oldProp.cssClass);
            break;
          case "locale":
            this.globalize = new Internationalization(this.locale);
            this.l10n.setLocale(this.locale);
            this.setProperties({ placeholder: this.l10n.getConstant("placeholder") }, true);
            Input.setPlaceholder(this.placeholder, this.respectiveElement);
            break;
        }
      }
    };
    TextBox2.prototype.getModuleName = function() {
      return "textbox";
    };
    TextBox2.prototype.isBlank = function(str) {
      return !str || /^\s*$/.test(str);
    };
    TextBox2.prototype.preRender = function() {
      this.cloneElement = this.element.cloneNode(true);
      this.formElement = closest(this.element, "form");
      if (!isNullOrUndefined(this.formElement)) {
        this.isForm = true;
      }
      if (this.element.tagName === "EJS-TEXTBOX") {
        var ejInstance = getValue("ej2_instances", this.element);
        var inputElement = this.multiline ? this.createElement("textarea") : this.createElement("input");
        var index = 0;
        for (index; index < this.element.attributes.length; index++) {
          var attributeName = this.element.attributes[index].nodeName;
          if (attributeName !== "id" && attributeName !== "class") {
            inputElement.setAttribute(attributeName, this.element.attributes[index].nodeValue);
            inputElement.innerHTML = this.element.innerHTML;
            if (attributeName === "name") {
              this.element.removeAttribute("name");
            }
          } else if (attributeName === "class") {
            inputElement.setAttribute(attributeName, this.element.className.split(" ").filter(function(item) {
              return item.indexOf("ng-") !== 0;
            }).join(" "));
          }
        }
        this.element.appendChild(inputElement);
        this.element = inputElement;
        setValue("ej2_instances", ejInstance, this.element);
      }
      this.updateHTMLAttrToElement();
      this.checkAttributes(false);
      if ((isNullOrUndefined(this.textboxOptions) || this.textboxOptions["value"] === void 0) && this.element.value !== "") {
        this.setProperties({ value: this.element.value }, true);
      }
      if (this.element.tagName !== "TEXTAREA") {
        this.element.setAttribute("type", this.type);
      }
      if (this.type === "text") {
        this.element.setAttribute("role", "textbox");
      }
      this.globalize = new Internationalization(this.locale);
      var localeText = { placeholder: this.placeholder };
      this.l10n = new L10n("textbox", localeText, this.locale);
      if (this.l10n.getConstant("placeholder") !== "") {
        this.setProperties({ placeholder: this.placeholder || this.l10n.getConstant("placeholder") }, true);
      }
      if (!this.element.hasAttribute("id")) {
        this.element.setAttribute("id", getUniqueID("textbox"));
      }
      if (!this.element.hasAttribute("name")) {
        this.element.setAttribute("name", this.element.getAttribute("id"));
      }
      if (this.element.tagName === "INPUT" && this.multiline) {
        this.isHiddenInput = true;
        this.textarea = this.createElement("textarea");
        this.element.parentNode.insertBefore(this.textarea, this.element);
        this.element.setAttribute("type", "hidden");
        this.textarea.setAttribute("name", this.element.getAttribute("name"));
        this.element.removeAttribute("name");
        this.textarea.setAttribute("role", this.element.getAttribute("role"));
        this.element.removeAttribute("role");
        this.textarea.setAttribute("id", getUniqueID("textarea"));
        var apiAttributes = ["placeholder", "disabled", "value", "readonly", "type", "autocomplete"];
        for (var index = 0; index < this.element.attributes.length; index++) {
          var attributeName = this.element.attributes[index].nodeName;
          if (this.element.hasAttribute(attributeName) && containerAttr$1.indexOf(attributeName) < 0 && !(attributeName === "id" || attributeName === "type" || attributeName === "e-mappinguid")) {
            this.textarea.setAttribute(attributeName, this.element.attributes[index].nodeValue);
            if (apiAttributes.indexOf(attributeName) < 0) {
              this.element.removeAttribute(attributeName);
              index--;
            }
          }
        }
      }
    };
    TextBox2.prototype.checkAttributes = function(isDynamic) {
      var attrs = isDynamic ? isNullOrUndefined(this.htmlAttributes) ? [] : Object.keys(this.htmlAttributes) : ["placeholder", "disabled", "value", "readonly", "type", "autocomplete"];
      for (var _i = 0, attrs_1 = attrs; _i < attrs_1.length; _i++) {
        var key = attrs_1[_i];
        if (!isNullOrUndefined(this.element.getAttribute(key))) {
          switch (key) {
            case "disabled":
              if (isNullOrUndefined(this.textboxOptions) || this.textboxOptions["enabled"] === void 0 || isDynamic) {
                var enabled = this.element.getAttribute(key) === "disabled" || this.element.getAttribute(key) === "" || this.element.getAttribute(key) === "true" ? false : true;
                this.setProperties({ enabled }, !isDynamic);
              }
              break;
            case "readonly":
              if (isNullOrUndefined(this.textboxOptions) || this.textboxOptions["readonly"] === void 0 || isDynamic) {
                var readonly2 = this.element.getAttribute(key) === "readonly" || this.element.getAttribute(key) === "" || this.element.getAttribute(key) === "true" ? true : false;
                this.setProperties({ readonly: readonly2 }, !isDynamic);
              }
              break;
            case "placeholder":
              if (isNullOrUndefined(this.textboxOptions) || this.textboxOptions["placeholder"] === void 0 || isDynamic) {
                this.setProperties({ placeholder: this.element.placeholder }, !isDynamic);
              }
              break;
            case "autocomplete":
              if (isNullOrUndefined(this.textboxOptions) || this.textboxOptions["autocomplete"] === void 0 || isDynamic) {
                var autoCompleteTxt = this.element.autocomplete === "off" ? "off" : "on";
                this.setProperties({ autocomplete: autoCompleteTxt }, !isDynamic);
              }
              break;
            case "value":
              if ((isNullOrUndefined(this.textboxOptions) || this.textboxOptions["value"] === void 0 || isDynamic) && this.element.value !== "") {
                this.setProperties({ value: this.element.value }, !isDynamic);
              }
              break;
            case "type":
              if (isNullOrUndefined(this.textboxOptions) || this.textboxOptions["type"] === void 0 || isDynamic) {
                this.setProperties({ type: this.element.type }, !isDynamic);
              }
              break;
          }
        }
      }
    };
    TextBox2.prototype.render = function() {
      var updatedCssClassValue = this.cssClass;
      if (!isNullOrUndefined(this.cssClass) && this.cssClass !== "") {
        updatedCssClassValue = this.getInputValidClassList(this.cssClass);
      }
      this.respectiveElement = this.isHiddenInput ? this.textarea : this.element;
      this.textboxWrapper = Input.createInput({
        element: this.respectiveElement,
        floatLabelType: this.floatLabelType,
        properties: {
          enabled: this.enabled,
          enableRtl: this.enableRtl,
          cssClass: updatedCssClassValue,
          readonly: this.readonly,
          placeholder: this.placeholder,
          showClearButton: this.showClearButton
        }
      });
      this.updateHTMLAttrToWrapper();
      if (this.isHiddenInput) {
        this.respectiveElement.parentNode.insertBefore(this.element, this.respectiveElement);
      }
      this.wireEvents();
      if (!isNullOrUndefined(this.value)) {
        Input.setValue(this.value, this.respectiveElement, this.floatLabelType, this.showClearButton);
        if (this.isHiddenInput) {
          this.element.value = this.respectiveElement.value;
        }
      }
      if (!isNullOrUndefined(this.value)) {
        this.initialValue = this.value;
        this.setInitialValue();
      }
      if (this.autocomplete !== "on" && this.autocomplete !== "") {
        this.respectiveElement.autocomplete = this.autocomplete;
      } else if (!isNullOrUndefined(this.textboxOptions) && this.textboxOptions["autocomplete"] !== void 0) {
        this.removeAttributes(["autocomplete"]);
      }
      this.previousValue = this.value;
      this.inputPreviousValue = this.value;
      this.respectiveElement.defaultValue = this.respectiveElement.value;
      Input.setWidth(this.width, this.textboxWrapper.container);
      if (!isNullOrUndefined(closest(this.element, "fieldset")) && closest(this.element, "fieldset").disabled) {
        this.enabled = false;
      }
      this.renderComplete();
    };
    TextBox2.prototype.updateHTMLAttrToWrapper = function() {
      if (!isNullOrUndefined(this.htmlAttributes)) {
        for (var _i = 0, _a = Object.keys(this.htmlAttributes); _i < _a.length; _i++) {
          var key = _a[_i];
          if (containerAttr$1.indexOf(key) > -1) {
            if (key === "class") {
              var updatedClassValues = this.getInputValidClassList(this.htmlAttributes["" + key]);
              if (updatedClassValues !== "") {
                addClass([this.textboxWrapper.container], updatedClassValues.split(" "));
              }
            } else if (key === "style") {
              var setStyle2 = this.textboxWrapper.container.getAttribute(key);
              setStyle2 = !isNullOrUndefined(setStyle2) ? setStyle2 + this.htmlAttributes["" + key] : this.htmlAttributes["" + key];
              this.textboxWrapper.container.setAttribute(key, setStyle2);
            } else {
              this.textboxWrapper.container.setAttribute(key, this.htmlAttributes["" + key]);
            }
          }
        }
      }
    };
    TextBox2.prototype.updateHTMLAttrToElement = function() {
      if (!isNullOrUndefined(this.htmlAttributes)) {
        for (var _i = 0, _a = Object.keys(this.htmlAttributes); _i < _a.length; _i++) {
          var key = _a[_i];
          if (containerAttr$1.indexOf(key) < 0) {
            this.element.setAttribute(key, this.htmlAttributes["" + key]);
          }
        }
      }
    };
    TextBox2.prototype.updateCssClass = function(newClass, oldClass) {
      Input.setCssClass(this.getInputValidClassList(newClass), [this.textboxWrapper.container], this.getInputValidClassList(oldClass));
    };
    TextBox2.prototype.getInputValidClassList = function(inputClassName) {
      var result = inputClassName;
      if (!isNullOrUndefined(inputClassName) && inputClassName !== "") {
        result = inputClassName.replace(/\s+/g, " ").trim();
      }
      return result;
    };
    TextBox2.prototype.setInitialValue = function() {
      if (!this.isAngular) {
        this.respectiveElement.setAttribute("value", this.initialValue);
      }
    };
    TextBox2.prototype.wireEvents = function() {
      EventHandler.add(this.respectiveElement, "focus", this.focusHandler, this);
      EventHandler.add(this.respectiveElement, "blur", this.focusOutHandler, this);
      EventHandler.add(this.respectiveElement, "input", this.inputHandler, this);
      EventHandler.add(this.respectiveElement, "change", this.changeHandler, this);
      if (this.isForm) {
        EventHandler.add(this.formElement, "reset", this.resetForm, this);
      }
      this.bindClearEvent();
      if (!isNullOrUndefined(this.textboxWrapper.container.querySelector(".e-float-text")) && this.floatLabelType === "Auto" && this.textboxWrapper.container.classList.contains("e-autofill") && this.textboxWrapper.container.classList.contains("e-outline")) {
        EventHandler.add(this.textboxWrapper.container.querySelector(".e-float-text"), "animationstart", this.animationHandler, this);
      }
    };
    TextBox2.prototype.animationHandler = function() {
      this.textboxWrapper.container.classList.add("e-valid-input");
      var label = this.textboxWrapper.container.querySelector(".e-float-text");
      if (!isNullOrUndefined(label)) {
        label.classList.add("e-label-top");
        if (label.classList.contains("e-label-bottom")) {
          label.classList.remove("e-label-bottom");
        }
      }
    };
    TextBox2.prototype.resetValue = function(value) {
      var prevOnChange = this.isProtectedOnChange;
      this.isProtectedOnChange = true;
      this.value = value;
      this.isProtectedOnChange = prevOnChange;
    };
    TextBox2.prototype.resetForm = function() {
      if (this.isAngular) {
        this.resetValue("");
      } else {
        this.resetValue(this.initialValue);
      }
      if (!isNullOrUndefined(this.textboxWrapper)) {
        var label = this.textboxWrapper.container.querySelector(".e-float-text");
        if (!isNullOrUndefined(label) && this.floatLabelType !== "Always") {
          if (isNullOrUndefined(this.initialValue) || this.initialValue === "") {
            label.classList.add("e-label-bottom");
            label.classList.remove("e-label-top");
          } else if (this.initialValue !== "") {
            label.classList.add("e-label-top");
            label.classList.remove("e-label-bottom");
          }
        }
      }
    };
    TextBox2.prototype.focusHandler = function(args) {
      var eventArgs = {
        container: this.textboxWrapper.container,
        event: args,
        value: this.value
      };
      this.trigger("focus", eventArgs);
    };
    TextBox2.prototype.focusOutHandler = function(args) {
      if (!(this.previousValue === null && this.value === null && this.respectiveElement.value === "") && this.previousValue !== this.value) {
        this.raiseChangeEvent(args, true);
      }
      var eventArgs = {
        container: this.textboxWrapper.container,
        event: args,
        value: this.value
      };
      this.trigger("blur", eventArgs);
    };
    TextBox2.prototype.inputHandler = function(args) {
      var textboxObj = this;
      var eventArgs = {
        event: args,
        value: this.respectiveElement.value,
        previousValue: this.inputPreviousValue,
        container: this.textboxWrapper.container
      };
      this.inputPreviousValue = this.respectiveElement.value;
      if (this.isAngular) {
        textboxObj.localChange({ value: this.respectiveElement.value });
        this.preventChange = true;
      }
      if (this.isVue) {
        this.preventChange = true;
      }
      this.trigger("input", eventArgs);
      args.stopPropagation();
    };
    TextBox2.prototype.changeHandler = function(args) {
      this.setProperties({ value: this.respectiveElement.value }, true);
      if (this.previousValue != this.value) {
        this.raiseChangeEvent(args, true);
      }
      args.stopPropagation();
    };
    TextBox2.prototype.raiseChangeEvent = function(event, interaction) {
      var eventArgs = {
        event,
        value: this.value,
        previousValue: this.previousValue,
        container: this.textboxWrapper.container,
        isInteraction: interaction ? interaction : false,
        isInteracted: interaction ? interaction : false
      };
      this.preventChange = false;
      this.trigger("change", eventArgs);
      this.previousValue = this.value;
      if (this.element.tagName === "INPUT" && this.multiline && Browser.info.name === "mozilla") {
        this.element.value = this.respectiveElement.value;
      }
    };
    TextBox2.prototype.bindClearEvent = function() {
      if (this.showClearButton && this.respectiveElement.tagName !== "TEXTAREA") {
        if (this.enabled) {
          EventHandler.add(this.textboxWrapper.clearButton, "mousedown touchstart", this.resetInputHandler, this);
        } else {
          EventHandler.remove(this.textboxWrapper.clearButton, "mousedown touchstart", this.resetInputHandler);
        }
      }
    };
    TextBox2.prototype.resetInputHandler = function(event) {
      event.preventDefault();
      if (!this.textboxWrapper.clearButton.classList.contains(HIDE_CLEAR) || this.textboxWrapper.container.classList.contains("e-static-clear")) {
        Input.setValue("", this.respectiveElement, this.floatLabelType, this.showClearButton);
        if (this.isHiddenInput) {
          this.element.value = this.respectiveElement.value;
        }
        this.setProperties({ value: this.respectiveElement.value }, true);
        var eventArgs = {
          event,
          value: this.respectiveElement.value,
          previousValue: this.inputPreviousValue,
          container: this.textboxWrapper.container
        };
        this.trigger("input", eventArgs);
        this.inputPreviousValue = this.respectiveElement.value;
        this.raiseChangeEvent(event, true);
        if (closest(this.element, "form")) {
          var element2 = this.element;
          var keyupEvent = document.createEvent("KeyboardEvent");
          keyupEvent.initEvent("keyup", false, true);
          element2.dispatchEvent(keyupEvent);
        }
      }
    };
    TextBox2.prototype.unWireEvents = function() {
      EventHandler.remove(this.respectiveElement, "focus", this.focusHandler);
      EventHandler.remove(this.respectiveElement, "blur", this.focusOutHandler);
      EventHandler.remove(this.respectiveElement, "input", this.inputHandler);
      EventHandler.remove(this.respectiveElement, "change", this.changeHandler);
      if (this.isForm) {
        EventHandler.remove(this.formElement, "reset", this.resetForm);
      }
      if (!isNullOrUndefined(this.textboxWrapper.container.querySelector(".e-float-text")) && this.floatLabelType === "Auto" && this.textboxWrapper.container.classList.contains("e-outline") && this.textboxWrapper.container.classList.contains("e-autofill")) {
        EventHandler.remove(this.textboxWrapper.container.querySelector(".e-float-text"), "animationstart", this.animationHandler);
      }
    };
    TextBox2.prototype.destroy = function() {
      this.unWireEvents();
      if (this.element.tagName === "INPUT" && this.multiline) {
        detach(this.textboxWrapper.container.getElementsByTagName("textarea")[0]);
        this.respectiveElement = this.element;
        this.element.removeAttribute("type");
      }
      this.respectiveElement.value = this.respectiveElement.defaultValue;
      this.respectiveElement.classList.remove("e-input");
      this.removeAttributes(["aria-disabled", "aria-readonly", "aria-labelledby"]);
      if (!isNullOrUndefined(this.textboxWrapper)) {
        this.textboxWrapper.container.insertAdjacentElement("afterend", this.respectiveElement);
        detach(this.textboxWrapper.container);
      }
      this.textboxWrapper = null;
      Input.destroy();
      _super.prototype.destroy.call(this);
    };
    TextBox2.prototype.addIcon = function(position, icons) {
      Input.addIcon(position, icons, this.textboxWrapper.container, this.respectiveElement, this.createElement);
    };
    TextBox2.prototype.getPersistData = function() {
      var keyEntity = ["value"];
      return this.addOnPersist(keyEntity);
    };
    TextBox2.prototype.addAttributes = function(attributes2) {
      for (var _i = 0, _a = Object.keys(attributes2); _i < _a.length; _i++) {
        var key = _a[_i];
        if (key === "disabled") {
          this.setProperties({ enabled: false }, true);
          Input.setEnabled(this.enabled, this.respectiveElement, this.floatLabelType, this.textboxWrapper.container);
        } else if (key === "readonly") {
          this.setProperties({ readonly: true }, true);
          Input.setReadonly(this.readonly, this.respectiveElement);
        } else if (key === "class") {
          this.respectiveElement.classList.add(attributes2["" + key]);
        } else if (key === "placeholder") {
          this.setProperties({ placeholder: attributes2["" + key] }, true);
          Input.setPlaceholder(this.placeholder, this.respectiveElement);
        } else if (key === "rows" && this.respectiveElement.tagName === "TEXTAREA") {
          this.respectiveElement.setAttribute(key, attributes2["" + key]);
        } else {
          this.respectiveElement.setAttribute(key, attributes2["" + key]);
        }
      }
    };
    TextBox2.prototype.removeAttributes = function(attributes2) {
      for (var _i = 0, attributes_1 = attributes2; _i < attributes_1.length; _i++) {
        var key = attributes_1[_i];
        if (key === "disabled") {
          this.setProperties({ enabled: true }, true);
          Input.setEnabled(this.enabled, this.respectiveElement, this.floatLabelType, this.textboxWrapper.container);
        } else if (key === "readonly") {
          this.setProperties({ readonly: false }, true);
          Input.setReadonly(this.readonly, this.respectiveElement);
        } else if (key === "placeholder") {
          this.setProperties({ placeholder: null }, true);
          Input.setPlaceholder(this.placeholder, this.respectiveElement);
        } else {
          this.respectiveElement.removeAttribute(key);
        }
      }
    };
    TextBox2.prototype.focusIn = function() {
      if (document.activeElement !== this.respectiveElement && this.enabled) {
        this.respectiveElement.focus();
        if (this.textboxWrapper.container.classList.contains("e-input-group") || this.textboxWrapper.container.classList.contains("e-outline") || this.textboxWrapper.container.classList.contains("e-filled")) {
          addClass([this.textboxWrapper.container], [TEXTBOX_FOCUS]);
        }
      }
    };
    TextBox2.prototype.focusOut = function() {
      if (document.activeElement === this.respectiveElement && this.enabled) {
        this.respectiveElement.blur();
        if (this.textboxWrapper.container.classList.contains("e-input-group") || this.textboxWrapper.container.classList.contains("e-outline") || this.textboxWrapper.container.classList.contains("e-filled")) {
          removeClass([this.textboxWrapper.container], [TEXTBOX_FOCUS]);
        }
      }
    };
    __decorate$p([
      Property("text")
    ], TextBox2.prototype, "type", void 0);
    __decorate$p([
      Property(false)
    ], TextBox2.prototype, "readonly", void 0);
    __decorate$p([
      Property(null)
    ], TextBox2.prototype, "value", void 0);
    __decorate$p([
      Property("Never")
    ], TextBox2.prototype, "floatLabelType", void 0);
    __decorate$p([
      Property("")
    ], TextBox2.prototype, "cssClass", void 0);
    __decorate$p([
      Property(null)
    ], TextBox2.prototype, "placeholder", void 0);
    __decorate$p([
      Property("on")
    ], TextBox2.prototype, "autocomplete", void 0);
    __decorate$p([
      Property({})
    ], TextBox2.prototype, "htmlAttributes", void 0);
    __decorate$p([
      Property(false)
    ], TextBox2.prototype, "multiline", void 0);
    __decorate$p([
      Property(true)
    ], TextBox2.prototype, "enabled", void 0);
    __decorate$p([
      Property(false)
    ], TextBox2.prototype, "showClearButton", void 0);
    __decorate$p([
      Property(false)
    ], TextBox2.prototype, "enablePersistence", void 0);
    __decorate$p([
      Property(null)
    ], TextBox2.prototype, "width", void 0);
    __decorate$p([
      Event$1()
    ], TextBox2.prototype, "created", void 0);
    __decorate$p([
      Event$1()
    ], TextBox2.prototype, "destroyed", void 0);
    __decorate$p([
      Event$1()
    ], TextBox2.prototype, "change", void 0);
    __decorate$p([
      Event$1()
    ], TextBox2.prototype, "blur", void 0);
    __decorate$p([
      Event$1()
    ], TextBox2.prototype, "focus", void 0);
    __decorate$p([
      Event$1()
    ], TextBox2.prototype, "input", void 0);
    TextBox2 = __decorate$p([
      NotifyPropertyChanges
    ], TextBox2);
    return TextBox2;
  }(Component)
);
var __extends$z = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$o = globalThis && globalThis.__decorate || function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i = decorators.length - 1; i >= 0; i--)
      if (d = decorators[i])
        r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var dropDownListClasses = {
  root: "e-dropdownlist",
  hover: dropDownBaseClasses.hover,
  selected: dropDownBaseClasses.selected,
  rtl: dropDownBaseClasses.rtl,
  li: dropDownBaseClasses.li,
  disable: dropDownBaseClasses.disabled,
  base: dropDownBaseClasses.root,
  focus: dropDownBaseClasses.focus,
  input: "e-input-group",
  inputFocus: "e-input-focus",
  icon: "e-input-group-icon e-ddl-icon",
  iconAnimation: "e-icon-anim",
  value: "e-input-value",
  device: "e-ddl-device",
  backIcon: "e-input-group-icon e-back-icon e-icons",
  filterBarClearIcon: "e-input-group-icon e-clear-icon e-icons",
  filterInput: "e-input-filter",
  filterParent: "e-filter-parent",
  mobileFilter: "e-ddl-device-filter",
  footer: "e-ddl-footer",
  header: "e-ddl-header",
  clearIcon: "e-clear-icon",
  clearIconHide: "e-clear-icon-hide",
  popupFullScreen: "e-popup-full-page",
  disableIcon: "e-ddl-disable-icon",
  hiddenElement: "e-ddl-hidden"
};
var inputObject = {
  container: null,
  buttons: []
};
var DropDownList = (
  /** @class */
  function(_super) {
    __extends$z(DropDownList2, _super);
    function DropDownList2(options, element2) {
      var _this = _super.call(this, options, element2) || this;
      _this.isListSearched = false;
      _this.preventChange = false;
      _this.isAngular = false;
      return _this;
    }
    DropDownList2.prototype.preRender = function() {
      this.valueTempElement = null;
      this.element.style.opacity = "0";
      this.initializeData();
      _super.prototype.preRender.call(this);
      this.activeIndex = this.index;
      this.queryString = "";
    };
    DropDownList2.prototype.initializeData = function() {
      this.isPopupOpen = false;
      this.isDocumentClick = false;
      this.isInteracted = false;
      this.isFilterFocus = false;
      this.beforePopupOpen = false;
      this.initial = true;
      this.initRemoteRender = false;
      this.isNotSearchList = false;
      this.isTyped = false;
      this.isSelected = false;
      this.preventFocus = false;
      this.preventAutoFill = false;
      this.isValidKey = false;
      this.typedString = "";
      this.isEscapeKey = false;
      this.isPreventBlur = false;
      this.isTabKey = false;
      this.actionCompleteData = { isUpdated: false };
      this.actionData = { isUpdated: false };
      this.prevSelectPoints = {};
      this.isSelectCustom = false;
      this.isDropDownClick = false;
      this.preventAltUp = false;
      this.isCustomFilter = false;
      this.isSecondClick = false;
      this.previousValue = null;
      this.keyConfigure = {
        tab: "tab",
        enter: "13",
        escape: "27",
        end: "35",
        home: "36",
        down: "40",
        up: "38",
        pageUp: "33",
        pageDown: "34",
        open: "alt+40",
        close: "shift+tab",
        hide: "alt+38",
        space: "32"
      };
    };
    DropDownList2.prototype.setZIndex = function() {
      if (this.popupObj) {
        this.popupObj.setProperties({ "zIndex": this.zIndex });
      }
    };
    DropDownList2.prototype.renderList = function(e, isEmptyData) {
      _super.prototype.render.call(this, e, isEmptyData);
      this.unWireListEvents();
      this.wireListEvents();
    };
    DropDownList2.prototype.floatLabelChange = function() {
      if (this.getModuleName() === "dropdownlist" && this.floatLabelType === "Auto") {
        var floatElement = this.inputWrapper.container.querySelector(".e-float-text");
        if (this.inputElement.value !== "" || this.isInteracted) {
          classList(floatElement, ["e-label-top"], ["e-label-bottom"]);
        } else {
          classList(floatElement, ["e-label-bottom"], ["e-label-top"]);
        }
      }
    };
    DropDownList2.prototype.resetHandler = function(e) {
      e.preventDefault();
      this.clearAll(e);
    };
    DropDownList2.prototype.resetFocusElement = function() {
      this.removeHover();
      this.removeSelection();
      this.removeFocus();
      this.list.scrollTop = 0;
      if (this.getModuleName() !== "autocomplete" && !isNullOrUndefined(this.ulElement)) {
        var li = this.ulElement.querySelector("." + dropDownListClasses.li);
        if (li) {
          li.classList.add(dropDownListClasses.focus);
        }
      }
    };
    DropDownList2.prototype.clearAll = function(e, properties2) {
      this.previousItemData = !isNullOrUndefined(this.itemData) ? this.itemData : null;
      if (isNullOrUndefined(properties2) || !isNullOrUndefined(properties2) && (isNullOrUndefined(properties2.dataSource) || !(properties2.dataSource instanceof DataManager) && properties2.dataSource.length === 0)) {
        this.isActive = true;
        this.resetSelection(properties2);
      }
      var dataItem = this.getItemData();
      if (this.previousValue === dataItem.value) {
        return;
      }
      this.onChangeEvent(e);
    };
    DropDownList2.prototype.resetSelection = function(properties2) {
      if (this.list) {
        if (!isNullOrUndefined(properties2) && (isNullOrUndefined(properties2.dataSource) || !(properties2.dataSource instanceof DataManager) && properties2.dataSource.length === 0)) {
          this.selectedLI = null;
          this.actionCompleteData.isUpdated = false;
          this.actionCompleteData.ulElement = null;
          this.actionCompleteData.list = null;
          this.resetList(properties2.dataSource);
        } else {
          if (this.allowFiltering && this.getModuleName() !== "autocomplete" && !isNullOrUndefined(this.actionCompleteData.ulElement) && !isNullOrUndefined(this.actionCompleteData.list) && this.actionCompleteData.list.length > 0) {
            this.onActionComplete(this.actionCompleteData.ulElement.cloneNode(true), this.actionCompleteData.list);
          }
          this.resetFocusElement();
        }
      }
      if (!isNullOrUndefined(this.hiddenElement)) {
        this.hiddenElement.innerHTML = "";
      }
      if (!isNullOrUndefined(this.inputElement)) {
        this.inputElement.value = "";
      }
      this.value = null;
      this.itemData = null;
      this.text = null;
      this.index = null;
      this.activeIndex = null;
      this.item = null;
      this.queryString = "";
      if (this.valueTempElement) {
        detach(this.valueTempElement);
        this.inputElement.style.display = "block";
        this.valueTempElement = null;
      }
      this.setSelection(null, null);
      this.isSelectCustom = false;
      this.updateIconState();
      this.cloneElements();
    };
    DropDownList2.prototype.setHTMLAttributes = function() {
      if (Object.keys(this.htmlAttributes).length) {
        for (var _i = 0, _a = Object.keys(this.htmlAttributes); _i < _a.length; _i++) {
          var htmlAttr = _a[_i];
          if (htmlAttr === "class") {
            var updatedClassValue = this.htmlAttributes["" + htmlAttr].replace(/\s+/g, " ").trim();
            if (updatedClassValue !== "") {
              addClass([this.inputWrapper.container], updatedClassValue.split(" "));
            }
          } else if (htmlAttr === "disabled" && this.htmlAttributes["" + htmlAttr] === "disabled") {
            this.enabled = false;
            this.setEnable();
          } else if (htmlAttr === "readonly" && !isNullOrUndefined(this.htmlAttributes["" + htmlAttr])) {
            this.readonly = true;
            this.dataBind();
          } else if (htmlAttr === "style") {
            this.inputWrapper.container.setAttribute("style", this.htmlAttributes["" + htmlAttr]);
          } else if (htmlAttr === "aria-label") {
            if (this.getModuleName() === "autocomplete" || this.getModuleName() === "combobox") {
              this.inputElement.setAttribute("aria-label", this.htmlAttributes["" + htmlAttr]);
            } else {
              this.inputWrapper.container.setAttribute("aria-label", this.htmlAttributes["" + htmlAttr]);
            }
          } else {
            var defaultAttr = [
              "title",
              "id",
              "placeholder",
              "role",
              "autocomplete",
              "autocapitalize",
              "spellcheck",
              "minlength",
              "maxlength"
            ];
            var validateAttr = ["name", "required"];
            if (this.getModuleName() === "autocomplete" || this.getModuleName() === "combobox") {
              defaultAttr.push("tabindex");
            }
            if (validateAttr.indexOf(htmlAttr) > -1 || htmlAttr.indexOf("data") === 0) {
              this.hiddenElement.setAttribute(htmlAttr, this.htmlAttributes["" + htmlAttr]);
            } else if (defaultAttr.indexOf(htmlAttr) > -1) {
              if (htmlAttr === "placeholder") {
                Input.setPlaceholder(this.htmlAttributes["" + htmlAttr], this.inputElement);
              } else {
                this.inputElement.setAttribute(htmlAttr, this.htmlAttributes["" + htmlAttr]);
              }
            } else {
              this.inputWrapper.container.setAttribute(htmlAttr, this.htmlAttributes["" + htmlAttr]);
            }
          }
        }
      }
      if (this.getModuleName() === "autocomplete" || this.getModuleName() === "combobox") {
        this.inputWrapper.container.removeAttribute("tabindex");
      }
    };
    DropDownList2.prototype.getAriaAttributes = function() {
      return {
        "aria-disabled": "false",
        "role": "combobox",
        "aria-expanded": "false",
        "aria-live": "polite",
        "aria-labelledby": this.hiddenElement.id
      };
    };
    DropDownList2.prototype.setEnableRtl = function() {
      Input.setEnableRtl(this.enableRtl, [this.inputElement.parentElement]);
      if (this.popupObj) {
        this.popupObj.enableRtl = this.enableRtl;
        this.popupObj.dataBind();
      }
    };
    DropDownList2.prototype.setEnable = function() {
      Input.setEnabled(this.enabled, this.inputElement);
      if (this.enabled) {
        removeClass([this.inputWrapper.container], dropDownListClasses.disable);
        this.inputElement.setAttribute("aria-disabled", "false");
        this.targetElement().setAttribute("tabindex", this.tabIndex);
      } else {
        this.hidePopup();
        addClass([this.inputWrapper.container], dropDownListClasses.disable);
        this.inputElement.setAttribute("aria-disabled", "true");
        this.targetElement().tabIndex = -1;
      }
    };
    DropDownList2.prototype.getPersistData = function() {
      return this.addOnPersist(["value"]);
    };
    DropDownList2.prototype.getLocaleName = function() {
      return "drop-down-list";
    };
    DropDownList2.prototype.preventTabIndex = function(element2) {
      if (this.getModuleName() === "dropdownlist") {
        element2.tabIndex = -1;
      }
    };
    DropDownList2.prototype.targetElement = function() {
      return !isNullOrUndefined(this.inputWrapper) ? this.inputWrapper.container : null;
    };
    DropDownList2.prototype.getNgDirective = function() {
      return "EJS-DROPDOWNLIST";
    };
    DropDownList2.prototype.getElementByText = function(text) {
      return this.getElementByValue(this.getValueByText(text));
    };
    DropDownList2.prototype.getElementByValue = function(value) {
      var item;
      var listItems = this.getItems();
      for (var _i = 0, listItems_1 = listItems; _i < listItems_1.length; _i++) {
        var liItem = listItems_1[_i];
        if (this.getFormattedValue(liItem.getAttribute("data-value")) === value) {
          item = liItem;
          break;
        }
      }
      return item;
    };
    DropDownList2.prototype.initValue = function() {
      this.renderList();
      if (this.dataSource instanceof DataManager) {
        this.initRemoteRender = true;
      } else {
        this.updateValues();
      }
    };
    DropDownList2.prototype.updateValues = function() {
      if (!isNullOrUndefined(this.value)) {
        this.setSelection(this.getElementByValue(this.value), null);
      } else if (this.text && isNullOrUndefined(this.value)) {
        var element2 = this.getElementByText(this.text);
        if (isNullOrUndefined(element2)) {
          this.setProperties({ text: null });
          return;
        } else {
          this.setSelection(element2, null);
        }
      } else {
        this.setSelection(this.liCollections[this.activeIndex], null);
      }
      this.setHiddenValue();
      Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);
    };
    DropDownList2.prototype.onBlurHandler = function(e) {
      if (!this.enabled) {
        return;
      }
      var target = e.relatedTarget;
      var currentTarget = e.target;
      var isPreventBlur = this.isPreventBlur;
      this.isPreventBlur = false;
      if (isPreventBlur && !this.isDocumentClick && this.isPopupOpen && (!isNullOrUndefined(currentTarget) || !this.isFilterLayout() && isNullOrUndefined(target))) {
        if (this.getModuleName() === "dropdownlist" && this.allowFiltering && this.isPopupOpen) {
          this.filterInput.focus();
        } else {
          this.targetElement().focus();
        }
        return;
      }
      if (this.isDocumentClick || !isNullOrUndefined(this.popupObj) && document.body.contains(this.popupObj.element) && this.popupObj.element.classList.contains(dropDownListClasses.mobileFilter)) {
        if (!this.beforePopupOpen) {
          this.isDocumentClick = false;
        }
        return;
      }
      if (this.getModuleName() === "dropdownlist" && !this.isFilterFocus && target !== this.inputElement && (document.activeElement !== target || document.activeElement === target && currentTarget.classList.contains(dropDownListClasses.inputFocus)) || isNullOrUndefined(target) && this.getModuleName() === "dropdownlist" && this.allowFiltering && currentTarget !== this.inputWrapper.container || this.getModuleName() !== "dropdownlist" && !this.inputWrapper.container.contains(target) || this.isTabKey) {
        this.isDocumentClick = this.isPopupOpen ? true : false;
        this.focusOutAction(e);
        this.isTabKey = false;
      }
      if (this.isRequested && !this.isPopupOpen && !this.isPreventBlur) {
        this.isActive = false;
        this.beforePopupOpen = false;
      }
    };
    DropDownList2.prototype.focusOutAction = function(e) {
      this.isInteracted = false;
      this.focusOut(e);
      this.onFocusOut();
    };
    DropDownList2.prototype.onFocusOut = function() {
      if (!this.enabled) {
        return;
      }
      if (this.isSelected) {
        this.isSelectCustom = false;
        this.onChangeEvent(null);
      }
      this.floatLabelChange();
      this.dispatchEvent(this.hiddenElement, "change");
      if (this.getModuleName() === "dropdownlist" && this.element.tagName !== "INPUT") {
        this.dispatchEvent(this.inputElement, "blur");
      }
      if (this.inputWrapper.clearButton) {
        addClass([this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);
      }
      this.trigger("blur");
    };
    DropDownList2.prototype.onFocus = function(e) {
      if (!this.isInteracted) {
        this.isInteracted = true;
        var args = { isInteracted: e ? true : false, event: e };
        this.trigger("focus", args);
      }
      this.updateIconState();
    };
    DropDownList2.prototype.resetValueHandler = function(e) {
      var formElement = closest(this.inputElement, "form");
      if (formElement && e.target === formElement) {
        var val = this.element.tagName === this.getNgDirective() ? null : this.inputElement.getAttribute("value");
        this.text = val;
      }
    };
    DropDownList2.prototype.wireEvent = function() {
      EventHandler.add(this.inputWrapper.container, "mousedown", this.dropDownClick, this);
      EventHandler.add(this.inputWrapper.container, "focus", this.focusIn, this);
      EventHandler.add(this.inputWrapper.container, "keypress", this.onSearch, this);
      this.bindCommonEvent();
    };
    DropDownList2.prototype.bindCommonEvent = function() {
      EventHandler.add(this.targetElement(), "blur", this.onBlurHandler, this);
      var formElement = closest(this.inputElement, "form");
      if (formElement) {
        EventHandler.add(formElement, "reset", this.resetValueHandler, this);
      }
      if (!Browser.isDevice) {
        this.keyboardModule = new KeyboardEvents(this.targetElement(), {
          keyAction: this.keyActionHandler.bind(this),
          keyConfigs: this.keyConfigure,
          eventName: "keydown"
        });
      } else {
        this.keyboardModule = new KeyboardEvents(this.targetElement(), {
          keyAction: this.mobileKeyActionHandler.bind(this),
          keyConfigs: this.keyConfigure,
          eventName: "keydown"
        });
      }
      this.bindClearEvent();
    };
    DropDownList2.prototype.bindClearEvent = function() {
      if (this.showClearButton) {
        EventHandler.add(this.inputWrapper.clearButton, "mousedown", this.resetHandler, this);
      }
    };
    DropDownList2.prototype.unBindCommonEvent = function() {
      if (!isNullOrUndefined(this.inputWrapper) && this.targetElement()) {
        EventHandler.remove(this.targetElement(), "blur", this.onBlurHandler);
      }
      var formElement = this.inputElement && closest(this.inputElement, "form");
      if (formElement) {
        EventHandler.remove(formElement, "reset", this.resetValueHandler);
      }
      if (!Browser.isDevice) {
        this.keyboardModule.destroy();
      }
      if (this.showClearButton) {
        EventHandler.remove(this.inputWrapper.clearButton, "mousedown", this.resetHandler);
      }
    };
    DropDownList2.prototype.updateIconState = function() {
      if (this.showClearButton) {
        if (this.inputElement.value !== "" && !this.readonly) {
          removeClass([this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);
        } else {
          addClass([this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);
        }
      }
    };
    DropDownList2.prototype.wireListEvents = function() {
      if (!isNullOrUndefined(this.list)) {
        EventHandler.add(this.list, "click", this.onMouseClick, this);
        EventHandler.add(this.list, "mouseover", this.onMouseOver, this);
        EventHandler.add(this.list, "mouseout", this.onMouseLeave, this);
      }
    };
    DropDownList2.prototype.onSearch = function(e) {
      if (e.charCode !== 32 && e.charCode !== 13) {
        if (this.list === void 0) {
          this.renderList();
        }
        this.searchKeyEvent = e;
        this.onServerIncrementalSearch(e);
      }
    };
    DropDownList2.prototype.onServerIncrementalSearch = function(e) {
      if (!this.isRequested && !isNullOrUndefined(this.list) && !isNullOrUndefined(this.list.querySelector("li")) && this.enabled && !this.readonly) {
        this.incrementalSearch(e);
      }
    };
    DropDownList2.prototype.onMouseClick = function(e) {
      var target = e.target;
      var li = closest(target, "." + dropDownBaseClasses.li);
      if (!this.isValidLI(li)) {
        return;
      }
      this.setSelection(li, e);
      if (Browser.isDevice && this.isFilterLayout()) {
        history.back();
      } else {
        var delay = 100;
        this.closePopup(delay, e);
      }
    };
    DropDownList2.prototype.onMouseOver = function(e) {
      var currentLi = closest(e.target, "." + dropDownBaseClasses.li);
      this.setHover(currentLi);
    };
    DropDownList2.prototype.setHover = function(li) {
      if (this.enabled && this.isValidLI(li) && !li.classList.contains(dropDownBaseClasses.hover)) {
        this.removeHover();
        addClass([li], dropDownBaseClasses.hover);
      }
    };
    DropDownList2.prototype.onMouseLeave = function() {
      this.removeHover();
    };
    DropDownList2.prototype.removeHover = function() {
      if (this.list) {
        var hoveredItem = this.list.querySelectorAll("." + dropDownBaseClasses.hover);
        if (hoveredItem && hoveredItem.length) {
          removeClass(hoveredItem, dropDownBaseClasses.hover);
        }
      }
    };
    DropDownList2.prototype.isValidLI = function(li) {
      return li && li.hasAttribute("role") && li.getAttribute("role") === "option";
    };
    DropDownList2.prototype.incrementalSearch = function(e) {
      if (this.liCollections.length > 0) {
        var li = incrementalSearch(e.charCode, this.liCollections, this.activeIndex, true, this.element.id);
        if (!isNullOrUndefined(li)) {
          this.setSelection(li, e);
          this.setScrollPosition();
        }
      }
    };
    DropDownList2.prototype.hideSpinner = function() {
      if (!isNullOrUndefined(this.spinnerElement)) {
        hideSpinner(this.spinnerElement);
        removeClass([this.spinnerElement], dropDownListClasses.disableIcon);
        this.spinnerElement.innerHTML = "";
        this.spinnerElement = null;
      }
    };
    DropDownList2.prototype.showSpinner = function() {
      if (isNullOrUndefined(this.spinnerElement)) {
        this.spinnerElement = Browser.isDevice && !isNullOrUndefined(this.filterInputObj) && this.filterInputObj.buttons[1] || !isNullOrUndefined(this.filterInputObj) && this.filterInputObj.buttons[0] || this.inputWrapper.buttons[0];
        addClass([this.spinnerElement], dropDownListClasses.disableIcon);
        createSpinner({
          target: this.spinnerElement,
          width: Browser.isDevice ? "16px" : "14px"
        }, this.createElement);
        showSpinner(this.spinnerElement);
      }
    };
    DropDownList2.prototype.keyActionHandler = function(e) {
      if (!this.enabled) {
        return;
      }
      var preventAction = e.action === "pageUp" || e.action === "pageDown";
      var preventHomeEnd = this.getModuleName() !== "dropdownlist" && (e.action === "home" || e.action === "end");
      this.isEscapeKey = e.action === "escape";
      this.isTabKey = !this.isPopupOpen && e.action === "tab";
      var isNavigation = e.action === "down" || e.action === "up" || e.action === "pageUp" || e.action === "pageDown" || e.action === "home" || e.action === "end";
      if ((this.isEditTextBox() || preventAction || preventHomeEnd) && !this.isPopupOpen) {
        return;
      }
      if (!this.readonly) {
        var isTabAction = e.action === "tab" || e.action === "close";
        if (isNullOrUndefined(this.list) && !this.isRequested && !isTabAction && e.action !== "escape") {
          this.searchKeyEvent = e;
          this.renderList(e);
        }
        if (isNullOrUndefined(this.list) || !isNullOrUndefined(this.liCollections) && isNavigation && this.liCollections.length === 0 || this.isRequested) {
          return;
        }
        if (isTabAction && this.getModuleName() !== "autocomplete" && this.isPopupOpen || e.action === "escape") {
          e.preventDefault();
        }
        this.isSelected = e.action === "escape" ? false : this.isSelected;
        this.isTyped = isNavigation || e.action === "escape" ? false : this.isTyped;
        switch (e.action) {
          case "down":
          case "up":
            this.updateUpDownAction(e);
            break;
          case "pageUp":
            this.pageUpSelection(this.activeIndex - this.getPageCount(), e);
            e.preventDefault();
            break;
          case "pageDown":
            this.pageDownSelection(this.activeIndex + this.getPageCount(), e);
            e.preventDefault();
            break;
          case "home":
            this.updateHomeEndAction(e);
            break;
          case "end":
            this.updateHomeEndAction(e);
            break;
          case "space":
            if (this.getModuleName() === "dropdownlist") {
              if (!this.beforePopupOpen) {
                this.showPopup();
              }
            }
            break;
          case "open":
            this.showPopup(e);
            break;
          case "hide":
            this.preventAltUp = this.isPopupOpen;
            this.hidePopup(e);
            this.focusDropDown(e);
            break;
          case "enter":
            this.selectCurrentItem(e);
            break;
          case "tab":
            this.selectCurrentValueOnTab(e);
            break;
          case "escape":
          case "close":
            if (this.isPopupOpen) {
              this.hidePopup(e);
              this.focusDropDown(e);
            }
            break;
        }
      }
    };
    DropDownList2.prototype.updateUpDownAction = function(e) {
      var focusEle = this.list.querySelector("." + dropDownListClasses.focus);
      if (this.isSelectFocusItem(focusEle)) {
        this.setSelection(focusEle, e);
      } else if (!isNullOrUndefined(this.liCollections)) {
        var index = e.action === "down" ? this.activeIndex + 1 : this.activeIndex - 1;
        var startIndex = 0;
        if (this.getModuleName() === "autocomplete") {
          startIndex = e.action === "down" && isNullOrUndefined(this.activeIndex) ? 0 : this.liCollections.length - 1;
          index = index < 0 ? this.liCollections.length - 1 : index === this.liCollections.length ? 0 : index;
        }
        var nextItem = isNullOrUndefined(this.activeIndex) ? this.liCollections[startIndex] : this.liCollections[index];
        if (!isNullOrUndefined(nextItem)) {
          this.setSelection(nextItem, e);
        }
      }
      e.preventDefault();
    };
    DropDownList2.prototype.updateHomeEndAction = function(e) {
      if (this.getModuleName() === "dropdownlist") {
        var findLi = 0;
        if (e.action === "home") {
          findLi = 0;
        } else {
          findLi = this.getItems().length - 1;
        }
        e.preventDefault();
        if (this.activeIndex === findLi) {
          return;
        }
        this.setSelection(this.liCollections[findLi], e);
      }
    };
    DropDownList2.prototype.selectCurrentValueOnTab = function(e) {
      if (this.getModuleName() === "autocomplete") {
        this.selectCurrentItem(e);
      } else {
        if (this.isPopupOpen) {
          this.hidePopup(e);
          this.focusDropDown(e);
        }
      }
    };
    DropDownList2.prototype.mobileKeyActionHandler = function(e) {
      if (!this.enabled) {
        return;
      }
      if (this.isEditTextBox() && !this.isPopupOpen) {
        return;
      }
      if (!this.readonly) {
        if (this.list === void 0 && !this.isRequested) {
          this.searchKeyEvent = e;
          this.renderList();
        }
        if (isNullOrUndefined(this.list) || !isNullOrUndefined(this.liCollections) && this.liCollections.length === 0 || this.isRequested) {
          return;
        }
        if (e.action === "enter") {
          this.selectCurrentItem(e);
        }
      }
    };
    DropDownList2.prototype.selectCurrentItem = function(e) {
      if (this.isPopupOpen) {
        var li = this.list.querySelector("." + dropDownListClasses.focus);
        if (li) {
          this.setSelection(li, e);
          this.isTyped = false;
        }
        if (this.isSelected) {
          this.isSelectCustom = false;
          this.onChangeEvent(e);
        }
        this.hidePopup(e);
        this.focusDropDown(e);
      } else {
        this.showPopup();
      }
    };
    DropDownList2.prototype.isSelectFocusItem = function(element2) {
      return !isNullOrUndefined(element2);
    };
    DropDownList2.prototype.getPageCount = function() {
      var liHeight = this.list.classList.contains(dropDownBaseClasses.noData) ? null : getComputedStyle(this.getItems()[0], null).getPropertyValue("height");
      return Math.round(this.list.getBoundingClientRect().height / parseInt(liHeight, 10));
    };
    DropDownList2.prototype.pageUpSelection = function(steps, event) {
      var previousItem = steps >= 0 ? this.liCollections[steps + 1] : this.liCollections[0];
      this.setSelection(previousItem, event);
    };
    DropDownList2.prototype.pageDownSelection = function(steps, event) {
      var list = this.getItems();
      var previousItem = steps <= list.length ? this.liCollections[steps - 1] : this.liCollections[list.length - 1];
      this.setSelection(previousItem, event);
    };
    DropDownList2.prototype.unWireEvent = function() {
      if (!isNullOrUndefined(this.inputWrapper)) {
        EventHandler.remove(this.inputWrapper.container, "mousedown", this.dropDownClick);
        EventHandler.remove(this.inputWrapper.container, "keypress", this.onSearch);
        EventHandler.remove(this.inputWrapper.container, "focus", this.focusIn);
      }
      this.unBindCommonEvent();
    };
    DropDownList2.prototype.unWireListEvents = function() {
      if (this.list) {
        EventHandler.remove(this.list, "click", this.onMouseClick);
        EventHandler.remove(this.list, "mouseover", this.onMouseOver);
        EventHandler.remove(this.list, "mouseout", this.onMouseLeave);
      }
    };
    DropDownList2.prototype.checkSelector = function(id) {
      return '[id="' + id.replace(/(:|\.|\[|\]|,|=|@|\\|\/|#)/g, "\\$1") + '"]';
    };
    DropDownList2.prototype.onDocumentClick = function(e) {
      var target = e.target;
      if (!(!isNullOrUndefined(this.popupObj) && closest(target, this.checkSelector(this.popupObj.element.id))) && !isNullOrUndefined(this.inputWrapper) && !this.inputWrapper.container.contains(e.target)) {
        if (this.inputWrapper.container.classList.contains(dropDownListClasses.inputFocus) || this.isPopupOpen) {
          this.isDocumentClick = true;
          var isActive = this.isRequested;
          this.isInteracted = false;
          this.hidePopup(e);
          if (!isActive) {
            this.onFocusOut();
            this.inputWrapper.container.classList.remove(dropDownListClasses.inputFocus);
          }
        }
      } else if (target !== this.inputElement && !(this.allowFiltering && target === this.filterInput) && !(this.getModuleName() === "combobox" && !this.allowFiltering && Browser.isDevice && target === this.inputWrapper.buttons[0])) {
        this.isPreventBlur = (Browser.isIE || Browser.info.name === "edge") && (document.activeElement === this.targetElement() || document.activeElement === this.filterInput);
        e.preventDefault();
      }
    };
    DropDownList2.prototype.activeStateChange = function() {
      if (this.isDocumentClick) {
        this.hidePopup();
        this.onFocusOut();
        this.inputWrapper.container.classList.remove(dropDownListClasses.inputFocus);
      }
    };
    DropDownList2.prototype.focusDropDown = function(e) {
      if (!this.initial && this.isFilterLayout()) {
        this.focusIn(e);
      }
    };
    DropDownList2.prototype.dropDownClick = function(e) {
      if (e.which === 3 || e.button === 2) {
        return;
      }
      if (this.targetElement().classList.contains(dropDownListClasses.disable) || this.inputWrapper.clearButton === e.target) {
        return;
      }
      var target = e.target;
      if (target !== this.inputElement && !(this.allowFiltering && target === this.filterInput) && this.getModuleName() !== "combobox") {
        e.preventDefault();
      }
      if (!this.readonly) {
        if (this.isPopupOpen) {
          this.hidePopup(e);
          if (this.isFilterLayout()) {
            this.focusDropDown(e);
          }
        } else {
          this.focusIn(e);
          this.floatLabelChange();
          this.queryString = this.inputElement.value.trim() === "" ? null : this.inputElement.value;
          this.isDropDownClick = true;
          this.showPopup(e);
        }
        var proxy_1 = this;
        var duration = this.element.tagName === this.getNgDirective() && this.itemTemplate ? 500 : 100;
        if (!this.isSecondClick) {
          setTimeout(function() {
            proxy_1.cloneElements();
            proxy_1.isSecondClick = true;
          }, duration);
        }
      } else {
        this.focusIn(e);
      }
    };
    DropDownList2.prototype.cloneElements = function() {
      if (this.list) {
        var ulElement = this.list.querySelector("ul");
        if (ulElement) {
          ulElement = ulElement.cloneNode ? ulElement.cloneNode(true) : ulElement;
          this.actionCompleteData.ulElement = ulElement;
        }
      }
    };
    DropDownList2.prototype.updateSelectedItem = function(li, e, preventSelect, isSelection) {
      var _this = this;
      this.removeSelection();
      li.classList.add(dropDownBaseClasses.selected);
      this.removeHover();
      var value = this.getFormattedValue(li.getAttribute("data-value"));
      var selectedData = this.getDataByValue(value);
      if (!this.initial && !preventSelect && !isNullOrUndefined(e)) {
        var items = this.detachChanges(selectedData);
        this.isSelected = true;
        var eventArgs = {
          e,
          item: li,
          itemData: items,
          isInteracted: e ? true : false,
          cancel: false
        };
        this.trigger("select", eventArgs, function(eventArgs2) {
          if (eventArgs2.cancel) {
            li.classList.remove(dropDownBaseClasses.selected);
          } else {
            _this.selectEventCallback(li, e, preventSelect, selectedData, value);
            if (isSelection) {
              _this.setSelectOptions(li, e);
            }
          }
        });
      } else {
        this.selectEventCallback(li, e, preventSelect, selectedData, value);
        if (isSelection) {
          this.setSelectOptions(li, e);
        }
      }
    };
    DropDownList2.prototype.selectEventCallback = function(li, e, preventSelect, selectedData, value) {
      this.previousItemData = !isNullOrUndefined(this.itemData) ? this.itemData : null;
      if (this.itemData != selectedData) {
        this.previousValue = !isNullOrUndefined(this.itemData) ? typeof this.itemData == "object" ? this.checkFieldValue(this.itemData, this.fields.value.split(".")) : this.itemData : null;
      }
      this.item = li;
      this.itemData = selectedData;
      var focusedItem = this.list.querySelector("." + dropDownBaseClasses.focus);
      if (focusedItem) {
        removeClass([focusedItem], dropDownBaseClasses.focus);
      }
      li.setAttribute("aria-selected", "true");
      this.activeIndex = this.getIndexByValue(value);
    };
    DropDownList2.prototype.activeItem = function(li) {
      if (this.isValidLI(li) && !li.classList.contains(dropDownBaseClasses.selected)) {
        this.removeSelection();
        li.classList.add(dropDownBaseClasses.selected);
        this.removeHover();
        li.setAttribute("aria-selected", "true");
      }
    };
    DropDownList2.prototype.setValue = function(e) {
      var dataItem = this.getItemData();
      if (dataItem.value === null) {
        Input.setValue(null, this.inputElement, this.floatLabelType, this.showClearButton);
      } else {
        Input.setValue(dataItem.text, this.inputElement, this.floatLabelType, this.showClearButton);
      }
      if (this.valueTemplate && this.itemData !== null) {
        this.setValueTemplate();
      } else if (!isNullOrUndefined(this.valueTempElement) && this.inputElement.previousSibling === this.valueTempElement) {
        detach(this.valueTempElement);
        this.inputElement.style.display = "block";
      }
      var clearIcon2 = dropDownListClasses.clearIcon;
      var isFilterElement = this.isFiltering() && this.filterInput && this.getModuleName() === "combobox";
      var clearElement = isFilterElement && this.filterInput.parentElement.querySelector("." + clearIcon2);
      if (this.isFiltering() && clearElement) {
        clearElement.style.removeProperty("visibility");
      }
      if (this.previousValue === dataItem.value) {
        this.isSelected = false;
        return true;
      } else {
        this.isSelected = !this.initial ? true : false;
        this.isSelectCustom = false;
        if (this.getModuleName() === "dropdownlist") {
          this.updateIconState();
        }
        return false;
      }
    };
    DropDownList2.prototype.setSelection = function(li, e) {
      if (this.isValidLI(li) && (!li.classList.contains(dropDownBaseClasses.selected) || this.isPopupOpen && this.isSelected && li.classList.contains(dropDownBaseClasses.selected))) {
        this.updateSelectedItem(li, e, false, true);
      } else {
        this.setSelectOptions(li, e);
      }
    };
    DropDownList2.prototype.setSelectOptions = function(li, e) {
      if (this.list) {
        this.removeHover();
      }
      this.previousSelectedLI = !isNullOrUndefined(this.selectedLI) ? this.selectedLI : null;
      this.selectedLI = li;
      if (this.setValue(e)) {
        return;
      }
      if (!this.isPopupOpen && !isNullOrUndefined(li) || this.isPopupOpen && !isNullOrUndefined(e) && (e.type !== "keydown" || e.type === "keydown" && e.action === "enter")) {
        this.isSelectCustom = false;
        this.onChangeEvent(e);
      }
      if (this.isPopupOpen && !isNullOrUndefined(this.selectedLI) && this.itemData !== null && (!e || e.type !== "click")) {
        this.setScrollPosition(e);
      }
      if (Browser.info.name !== "mozilla") {
        if (this.targetElement()) {
          attributes(this.targetElement(), { "aria-describedby": this.inputElement.id !== "" ? this.inputElement.id : this.element.id });
          this.targetElement().removeAttribute("aria-live");
        }
      }
      if (this.isPopupOpen && !isNullOrUndefined(this.ulElement) && !isNullOrUndefined(this.ulElement.getElementsByClassName("e-item-focus")[0])) {
        attributes(this.targetElement(), { "aria-activedescendant": this.ulElement.getElementsByClassName("e-item-focus")[0].id });
      } else if (this.isPopupOpen && !isNullOrUndefined(this.ulElement) && !isNullOrUndefined(this.ulElement.getElementsByClassName("e-active")[0])) {
        attributes(this.targetElement(), { "aria-activedescendant": this.ulElement.getElementsByClassName("e-active")[0].id });
      }
    };
    DropDownList2.prototype.dropdownCompiler = function(dropdownTemplate) {
      var checkTemplate = false;
      if (dropdownTemplate) {
        try {
          checkTemplate = document.querySelectorAll(dropdownTemplate).length ? true : false;
        } catch (exception) {
          checkTemplate = false;
        }
      }
      return checkTemplate;
    };
    DropDownList2.prototype.setValueTemplate = function() {
      var compiledString;
      if (this.isReact) {
        this.clearTemplate(["valueTemplate"]);
        if (this.valueTempElement) {
          detach(this.valueTempElement);
          this.inputElement.style.display = "block";
          this.valueTempElement = null;
        }
      }
      if (!this.valueTempElement) {
        this.valueTempElement = this.createElement("span", { className: dropDownListClasses.value });
        this.inputElement.parentElement.insertBefore(this.valueTempElement, this.inputElement);
        this.inputElement.style.display = "none";
      }
      if (!this.isReact) {
        this.valueTempElement.innerHTML = "";
      }
      var valuecheck = this.dropdownCompiler(this.valueTemplate);
      if (valuecheck) {
        compiledString = compile$1(document.querySelector(this.valueTemplate).innerHTML.trim());
      } else {
        compiledString = compile$1(this.valueTemplate);
      }
      var valueCompTemp = compiledString(this.itemData, this, "valueTemplate", this.valueTemplateId, this.isStringTemplate, null, this.valueTempElement);
      if (valueCompTemp && valueCompTemp.length > 0) {
        for (var i = 0; i < valueCompTemp.length; i++) {
          this.valueTempElement.appendChild(valueCompTemp[i]);
        }
      }
      this.renderReactTemplates();
    };
    DropDownList2.prototype.removeSelection = function() {
      if (this.list) {
        var selectedItems = this.list.querySelectorAll("." + dropDownBaseClasses.selected);
        if (selectedItems.length) {
          removeClass(selectedItems, dropDownBaseClasses.selected);
          selectedItems[0].removeAttribute("aria-selected");
        }
      }
    };
    DropDownList2.prototype.getItemData = function() {
      var fields = this.fields;
      var dataItem = null;
      dataItem = this.itemData;
      var dataValue;
      var dataText;
      if (!isNullOrUndefined(dataItem)) {
        dataValue = getValue(fields.value, dataItem);
        dataText = getValue(fields.text, dataItem);
      }
      var value = !isNullOrUndefined(dataItem) && !isUndefined(dataValue) ? dataValue : dataItem;
      var text = !isNullOrUndefined(dataItem) && !isUndefined(dataValue) ? dataText : dataItem;
      return { value, text };
    };
    DropDownList2.prototype.onChangeEvent = function(eve) {
      var dataItem = this.getItemData();
      var index = this.isSelectCustom ? null : this.activeIndex;
      this.setProperties({ "index": index, "text": dataItem.text, "value": dataItem.value }, true);
      this.detachChangeEvent(eve);
    };
    DropDownList2.prototype.detachChanges = function(value) {
      var items;
      if (typeof value === "string" || typeof value === "boolean" || typeof value === "number") {
        items = Object.defineProperties({}, {
          value: {
            value,
            enumerable: true
          },
          text: {
            value,
            enumerable: true
          }
        });
      } else {
        items = value;
      }
      return items;
    };
    DropDownList2.prototype.detachChangeEvent = function(eve) {
      this.isSelected = false;
      this.previousValue = this.value;
      this.activeIndex = this.index;
      this.typedString = !isNullOrUndefined(this.text) ? this.text : "";
      if (!this.initial) {
        var items = this.detachChanges(this.itemData);
        var preItems = void 0;
        if (typeof this.previousItemData === "string" || typeof this.previousItemData === "boolean" || typeof this.previousItemData === "number") {
          preItems = Object.defineProperties({}, {
            value: {
              value: this.previousItemData,
              enumerable: true
            },
            text: {
              value: this.previousItemData,
              enumerable: true
            }
          });
        } else {
          preItems = this.previousItemData;
        }
        this.setHiddenValue();
        var eventArgs = {
          e: eve,
          item: this.item,
          itemData: items,
          previousItem: this.previousSelectedLI,
          previousItemData: preItems,
          isInteracted: eve ? true : false,
          value: this.value,
          element: this.element,
          event: eve
        };
        if (this.isAngular && this.preventChange) {
          this.preventChange = false;
        } else {
          this.trigger("change", eventArgs);
        }
      }
      if ((isNullOrUndefined(this.value) || this.value === "") && this.floatLabelType !== "Always") {
        removeClass([this.inputWrapper.container], "e-valid-input");
      }
    };
    DropDownList2.prototype.setHiddenValue = function() {
      if (!isNullOrUndefined(this.value)) {
        if (this.hiddenElement.querySelector("option")) {
          var selectedElement = this.hiddenElement.querySelector("option");
          selectedElement.textContent = this.text;
          selectedElement.setAttribute("value", this.value.toString());
        } else {
          if (!isNullOrUndefined(this.hiddenElement)) {
            this.hiddenElement.innerHTML = "<option selected>" + this.text + "</option>";
            var selectedElement = this.hiddenElement.querySelector("option");
            selectedElement.setAttribute("value", this.value.toString());
          }
        }
      } else {
        this.hiddenElement.innerHTML = "";
      }
    };
    DropDownList2.prototype.onFilterUp = function(e) {
      if (!(e.ctrlKey && e.keyCode === 86) && (this.isValidKey || e.keyCode === 40 || e.keyCode === 38)) {
        this.isValidKey = false;
        switch (e.keyCode) {
          case 38:
          case 40:
            if (this.getModuleName() === "autocomplete" && !this.isPopupOpen && !this.preventAltUp && !this.isRequested) {
              this.preventAutoFill = true;
              this.searchLists(e);
            } else {
              this.preventAutoFill = false;
            }
            this.preventAltUp = false;
            if (this.getModuleName() === "autocomplete" && !isNullOrUndefined(this.ulElement) && !isNullOrUndefined(this.ulElement.getElementsByClassName("e-item-focus")[0])) {
              attributes(this.targetElement(), { "aria-activedescendant": this.ulElement.getElementsByClassName("e-item-focus")[0].id });
            }
            e.preventDefault();
            break;
          case 46:
          case 8:
            this.typedString = this.filterInput.value;
            if (!this.isPopupOpen && this.typedString !== "" || this.isPopupOpen && this.queryString.length > 0) {
              this.preventAutoFill = true;
              this.searchLists(e);
            } else if (this.typedString === "" && this.queryString === "" && this.getModuleName() !== "autocomplete") {
              this.preventAutoFill = true;
              this.searchLists(e);
            } else if (this.typedString === "") {
              if (this.list) {
                this.resetFocusElement();
              }
              this.activeIndex = null;
              if (this.getModuleName() !== "dropdownlist") {
                this.preventAutoFill = true;
                this.searchLists(e);
                if (this.getModuleName() === "autocomplete") {
                  this.hidePopup();
                }
              }
            }
            e.preventDefault();
            break;
          default:
            this.typedString = this.filterInput.value;
            this.preventAutoFill = false;
            this.searchLists(e);
            break;
        }
      } else {
        this.isValidKey = false;
      }
    };
    DropDownList2.prototype.onFilterDown = function(e) {
      switch (e.keyCode) {
        case 13:
          break;
        case 40:
        case 38:
          this.queryString = this.filterInput.value;
          e.preventDefault();
          break;
        case 9:
          if (this.isPopupOpen && this.getModuleName() !== "autocomplete") {
            e.preventDefault();
          }
          break;
        default:
          this.prevSelectPoints = this.getSelectionPoints();
          this.queryString = this.filterInput.value;
          break;
      }
    };
    DropDownList2.prototype.removeFillSelection = function() {
      if (this.isInteracted) {
        var selection = this.getSelectionPoints();
        this.inputElement.setSelectionRange(selection.end, selection.end);
      }
    };
    DropDownList2.prototype.getQuery = function(query) {
      var filterQuery;
      if (!this.isCustomFilter && this.allowFiltering && this.filterInput) {
        filterQuery = query ? query.clone() : this.query ? this.query.clone() : new Query();
        var filterType = this.typedString === "" ? "contains" : this.filterType;
        var dataType = this.typeOfData(this.dataSource).typeof;
        if (!(this.dataSource instanceof DataManager) && dataType === "string" || dataType === "number") {
          filterQuery.where("", filterType, this.typedString, this.ignoreCase, this.ignoreAccent);
        } else {
          var fields = this.fields.text ? this.fields.text : "";
          filterQuery.where(fields, filterType, this.typedString, this.ignoreCase, this.ignoreAccent);
        }
      } else {
        filterQuery = query ? query.clone() : this.query ? this.query.clone() : new Query();
      }
      return filterQuery;
    };
    DropDownList2.prototype.getSelectionPoints = function() {
      var input = this.inputElement;
      return { start: Math.abs(input.selectionStart), end: Math.abs(input.selectionEnd) };
    };
    DropDownList2.prototype.searchLists = function(e) {
      var _this = this;
      this.isTyped = true;
      this.activeIndex = null;
      this.isListSearched = true;
      if (this.filterInput.parentElement.querySelector("." + dropDownListClasses.clearIcon)) {
        var clearElement = this.filterInput.parentElement.querySelector("." + dropDownListClasses.clearIcon);
        clearElement.style.visibility = this.filterInput.value === "" ? "hidden" : "visible";
      }
      this.isDataFetched = false;
      if (this.isFiltering()) {
        var eventArgs_1 = {
          preventDefaultAction: false,
          text: this.filterInput.value,
          updateData: function(dataSource, query, fields) {
            if (eventArgs_1.cancel) {
              return;
            }
            _this.isCustomFilter = true;
            _this.filteringAction(dataSource, query, fields);
          },
          baseEventArgs: e,
          cancel: false
        };
        this.trigger("filtering", eventArgs_1, function(eventArgs) {
          if (!eventArgs.cancel && !_this.isCustomFilter && !eventArgs.preventDefaultAction) {
            _this.filteringAction(_this.dataSource, null, _this.fields);
          }
        });
      }
    };
    DropDownList2.prototype.filter = function(dataSource, query, fields) {
      this.isCustomFilter = true;
      this.filteringAction(dataSource, query, fields);
    };
    DropDownList2.prototype.filteringAction = function(dataSource, query, fields) {
      if (!isNullOrUndefined(this.filterInput)) {
        this.beforePopupOpen = !this.isPopupOpen && this.getModuleName() === "combobox" && this.filterInput.value === "" ? false : true;
        if (this.filterInput.value.trim() === "" && !this.itemTemplate) {
          this.actionCompleteData.isUpdated = false;
          this.isTyped = false;
          if (!isNullOrUndefined(this.actionCompleteData.ulElement) && !isNullOrUndefined(this.actionCompleteData.list)) {
            this.onActionComplete(this.actionCompleteData.ulElement, this.actionCompleteData.list);
          }
          this.isTyped = true;
          if (!isNullOrUndefined(this.itemData) && this.getModuleName() === "dropdownlist") {
            this.focusIndexItem();
            this.setScrollPosition();
          }
          this.isNotSearchList = true;
        } else {
          this.isNotSearchList = false;
          query = this.filterInput.value.trim() === "" ? null : query;
          this.resetList(dataSource, fields, query);
        }
        this.renderReactTemplates();
      }
    };
    DropDownList2.prototype.setSearchBox = function(popupElement) {
      if (this.isFiltering()) {
        var parentElement = popupElement.querySelector("." + dropDownListClasses.filterParent) ? popupElement.querySelector("." + dropDownListClasses.filterParent) : this.createElement("span", {
          className: dropDownListClasses.filterParent
        });
        this.filterInput = this.createElement("input", {
          attrs: { type: "text" },
          className: dropDownListClasses.filterInput
        });
        this.element.parentNode.insertBefore(this.filterInput, this.element);
        var backIcon = false;
        if (Browser.isDevice) {
          backIcon = true;
        }
        this.filterInputObj = Input.createInput({
          element: this.filterInput,
          buttons: backIcon ? [dropDownListClasses.backIcon, dropDownListClasses.filterBarClearIcon] : [dropDownListClasses.filterBarClearIcon],
          properties: { placeholder: this.filterBarPlaceholder }
        }, this.createElement);
        if (!isNullOrUndefined(this.cssClass)) {
          if (this.cssClass.split(" ").indexOf("e-outline") !== -1) {
            addClass([this.filterInputObj.container], "e-outline");
          } else if (this.cssClass.split(" ").indexOf("e-filled") !== -1) {
            addClass([this.filterInputObj.container], "e-filled");
          }
        }
        append2([this.filterInputObj.container], parentElement);
        prepend([parentElement], popupElement);
        attributes(this.filterInput, {
          "aria-disabled": "false",
          "role": "combobox",
          "autocomplete": "off",
          "autocapitalize": "off",
          "spellcheck": "false"
        });
        this.clearIconElement = this.filterInput.parentElement.querySelector("." + dropDownListClasses.clearIcon);
        if (!Browser.isDevice && this.clearIconElement) {
          EventHandler.add(this.clearIconElement, "click", this.clearText, this);
          this.clearIconElement.style.visibility = "hidden";
        }
        if (!Browser.isDevice) {
          this.searchKeyModule = new KeyboardEvents(this.filterInput, {
            keyAction: this.keyActionHandler.bind(this),
            keyConfigs: this.keyConfigure,
            eventName: "keydown"
          });
        } else {
          this.searchKeyModule = new KeyboardEvents(this.filterInput, {
            keyAction: this.mobileKeyActionHandler.bind(this),
            keyConfigs: this.keyConfigure,
            eventName: "keydown"
          });
        }
        EventHandler.add(this.filterInput, "input", this.onInput, this);
        EventHandler.add(this.filterInput, "keyup", this.onFilterUp, this);
        EventHandler.add(this.filterInput, "keydown", this.onFilterDown, this);
        EventHandler.add(this.filterInput, "blur", this.onBlurHandler, this);
        EventHandler.add(this.filterInput, "paste", this.pasteHandler, this);
        return this.filterInputObj;
      } else {
        return inputObject;
      }
    };
    DropDownList2.prototype.onInput = function(e) {
      this.isValidKey = true;
      if (Browser.isDevice && Browser.info.name === "mozilla") {
        this.typedString = this.filterInput.value;
        this.preventAutoFill = true;
        this.searchLists(e);
      }
    };
    DropDownList2.prototype.pasteHandler = function(e) {
      var _this = this;
      setTimeout(function() {
        _this.typedString = _this.filterInput.value;
        _this.searchLists(e);
      });
    };
    DropDownList2.prototype.onActionFailure = function(e) {
      _super.prototype.onActionFailure.call(this, e);
      if (this.beforePopupOpen) {
        this.renderPopup();
      }
    };
    DropDownList2.prototype.onActionComplete = function(ulElement, list, e, isUpdated) {
      var _this = this;
      if (this.isNotSearchList) {
        this.isNotSearchList = false;
        return;
      }
      if (this.isActive) {
        var selectedItem = this.selectedLI ? this.selectedLI.cloneNode(true) : null;
        _super.prototype.onActionComplete.call(this, ulElement, list, e);
        this.updateSelectElementData(this.allowFiltering);
        if (this.isRequested && !isNullOrUndefined(this.searchKeyEvent) && this.searchKeyEvent.type === "keydown") {
          this.isRequested = false;
          this.keyActionHandler(this.searchKeyEvent);
          this.searchKeyEvent = null;
        }
        if (this.isRequested && !isNullOrUndefined(this.searchKeyEvent)) {
          this.incrementalSearch(this.searchKeyEvent);
          this.searchKeyEvent = null;
        }
        this.list.scrollTop = 0;
        if (!isNullOrUndefined(ulElement)) {
          attributes(ulElement, { "id": this.element.id + "_options", "role": "listbox", "aria-hidden": "false" });
        }
        if (this.initRemoteRender) {
          this.initial = true;
          this.activeIndex = this.index;
          this.initRemoteRender = false;
          if (this.value && this.dataSource instanceof DataManager) {
            var checkField_1 = isNullOrUndefined(this.fields.value) ? this.fields.text : this.fields.value;
            var fieldValue_1 = this.fields.value.split(".");
            var checkVal = list.some(function(x) {
              return isNullOrUndefined(x[checkField_1]) && fieldValue_1.length > 1 ? _this.checkFieldValue(x, fieldValue_1) === _this.value : x[checkField_1] === _this.value;
            });
            if (!checkVal) {
              this.dataSource.executeQuery(this.getQuery(this.query).where(new Predicate(checkField_1, "equal", this.value))).then(function(e2) {
                if (e2.result.length > 0) {
                  _this.addItem(e2.result, list.length);
                  _this.updateValues();
                } else {
                  _this.updateValues();
                }
              });
            } else {
              this.updateValues();
            }
          } else {
            this.updateValues();
          }
          this.initial = false;
        } else if (this.getModuleName() === "autocomplete" && this.value) {
          this.setInputValue();
        }
        if (this.getModuleName() !== "autocomplete" && this.isFiltering() && !this.isTyped) {
          if (!this.actionCompleteData.isUpdated || (!this.isCustomFilter && !this.isFilterFocus || isNullOrUndefined(this.itemData) && this.allowFiltering && (this.dataSource instanceof DataManager || !isNullOrUndefined(this.dataSource) && !isNullOrUndefined(this.dataSource.length) && this.dataSource.length !== 0))) {
            if (this.itemTemplate && this.element.tagName === "EJS-COMBOBOX" && this.allowFiltering) {
              setTimeout(function() {
                _this.updateActionCompleteDataValues(ulElement, list);
              }, 0);
            } else {
              this.updateActionCompleteDataValues(ulElement, list);
            }
          }
          this.addNewItem(list, selectedItem);
          if (!isNullOrUndefined(this.itemData)) {
            this.focusIndexItem();
          }
        }
        if (this.beforePopupOpen) {
          this.renderPopup(e);
        }
      }
    };
    DropDownList2.prototype.checkFieldValue = function(list, fieldValue) {
      var checkField = list;
      fieldValue.forEach(function(value) {
        checkField = checkField[value];
      });
      return checkField;
    };
    DropDownList2.prototype.updateActionCompleteDataValues = function(ulElement, list) {
      this.actionCompleteData = { ulElement: ulElement.cloneNode(true), list, isUpdated: true };
      if (this.actionData.list !== this.actionCompleteData.list && this.actionCompleteData.ulElement && this.actionCompleteData.list) {
        this.actionData = this.actionCompleteData;
      }
    };
    DropDownList2.prototype.addNewItem = function(listData, newElement) {
      var _this = this;
      if (!isNullOrUndefined(this.itemData) && !isNullOrUndefined(newElement)) {
        var value_1 = this.getItemData().value;
        var isExist = listData.some(function(data) {
          return (typeof data === "string" || typeof data === "number") && data === value_1 || getValue(_this.fields.value, data) === value_1;
        });
        if (!isExist) {
          this.addItem(this.itemData);
        }
      }
    };
    DropDownList2.prototype.updateActionCompleteData = function(li, item, index) {
      var _this = this;
      if (this.getModuleName() !== "autocomplete" && this.actionCompleteData.ulElement) {
        if (this.itemTemplate && this.element.tagName === "EJS-COMBOBOX" && this.allowFiltering) {
          setTimeout(function() {
            _this.actionCompleteDataUpdate(li, item, index);
          }, 0);
        } else {
          this.actionCompleteDataUpdate(li, item, index);
        }
      }
    };
    DropDownList2.prototype.actionCompleteDataUpdate = function(li, item, index) {
      if (index !== null) {
        this.actionCompleteData.ulElement.insertBefore(li.cloneNode(true), this.actionCompleteData.ulElement.childNodes[index]);
      } else {
        this.actionCompleteData.ulElement.appendChild(li.cloneNode(true));
      }
      if (this.isFiltering() && this.actionCompleteData.list.indexOf(item) < 0) {
        this.actionCompleteData.list.push(item);
      }
    };
    DropDownList2.prototype.focusIndexItem = function() {
      var value = this.getItemData().value;
      this.activeIndex = this.getIndexByValue(value);
      var element2 = this.findListElement(this.list, "li", "data-value", value);
      this.selectedLI = element2;
      this.activeItem(element2);
      this.removeFocus();
    };
    DropDownList2.prototype.updateSelection = function() {
      var selectedItem = this.list.querySelector("." + dropDownBaseClasses.selected);
      if (selectedItem) {
        this.setProperties({ "index": this.getIndexByValue(selectedItem.getAttribute("data-value")) });
        this.activeIndex = this.index;
      } else {
        this.removeFocus();
        this.list.querySelector("." + dropDownBaseClasses.li).classList.add(dropDownListClasses.focus);
      }
    };
    DropDownList2.prototype.removeFocus = function() {
      var highlightedItem = this.list.querySelectorAll("." + dropDownListClasses.focus);
      if (highlightedItem && highlightedItem.length) {
        removeClass(highlightedItem, dropDownListClasses.focus);
      }
    };
    DropDownList2.prototype.renderPopup = function(e) {
      var _this = this;
      if (this.popupObj && document.body.contains(this.popupObj.element)) {
        this.refreshPopup();
        return;
      }
      var args = { cancel: false };
      this.trigger("beforeOpen", args, function(args2) {
        if (!args2.cancel) {
          var popupEle = _this.createElement("div", {
            id: _this.element.id + "_popup",
            className: "e-ddl e-popup " + (_this.cssClass !== null ? _this.cssClass : "")
          });
          var searchBox = _this.setSearchBox(popupEle);
          _this.listHeight = formatUnit(_this.popupHeight);
          if (_this.headerTemplate) {
            _this.setHeaderTemplate(popupEle);
          }
          append2([_this.list], popupEle);
          if (_this.footerTemplate) {
            _this.setFooterTemplate(popupEle);
          }
          document.body.appendChild(popupEle);
          popupEle.style.visibility = "hidden";
          if (_this.popupHeight !== "auto") {
            _this.searchBoxHeight = 0;
            if (!isNullOrUndefined(searchBox.container)) {
              _this.searchBoxHeight = searchBox.container.parentElement.getBoundingClientRect().height;
              _this.listHeight = (parseInt(_this.listHeight, 10) - _this.searchBoxHeight).toString() + "px";
            }
            if (_this.headerTemplate) {
              _this.header = _this.header ? _this.header : popupEle.querySelector(".e-ddl-header");
              var height = Math.round(_this.header.getBoundingClientRect().height);
              _this.listHeight = (parseInt(_this.listHeight, 10) - (height + _this.searchBoxHeight)).toString() + "px";
            }
            if (_this.footerTemplate) {
              _this.footer = _this.footer ? _this.footer : popupEle.querySelector(".e-ddl-footer");
              var height = Math.round(_this.footer.getBoundingClientRect().height);
              _this.listHeight = (parseInt(_this.listHeight, 10) - (height + _this.searchBoxHeight)).toString() + "px";
            }
            _this.list.style.maxHeight = (parseInt(_this.listHeight, 10) - 2).toString() + "px";
            popupEle.style.maxHeight = formatUnit(_this.popupHeight);
          } else {
            popupEle.style.height = "auto";
          }
          var offsetValue = 0;
          var left = void 0;
          if (!isNullOrUndefined(_this.selectedLI) && (!isNullOrUndefined(_this.activeIndex) && _this.activeIndex >= 0)) {
            _this.setScrollPosition();
          } else {
            _this.list.scrollTop = 0;
          }
          if (Browser.isDevice && (!_this.allowFiltering && (_this.getModuleName() === "dropdownlist" || _this.isDropDownClick && _this.getModuleName() === "combobox"))) {
            offsetValue = _this.getOffsetValue(popupEle);
            var firstItem = _this.isEmptyList() ? _this.list : _this.liCollections[0];
            if (!isNullOrUndefined(_this.inputElement)) {
              left = -(parseInt(getComputedStyle(firstItem).textIndent, 10) - parseInt(getComputedStyle(_this.inputElement).paddingLeft, 10) + parseInt(getComputedStyle(_this.inputElement.parentElement).borderLeftWidth, 10));
            }
          }
          _this.getFocusElement();
          _this.createPopup(popupEle, offsetValue, left);
          _this.checkCollision(popupEle);
          if (Browser.isDevice) {
            _this.popupObj.element.classList.add(dropDownListClasses.device);
            if (_this.getModuleName() === "dropdownlist" || _this.getModuleName() === "combobox" && !_this.allowFiltering && _this.isDropDownClick) {
              _this.popupObj.collision = { X: "fit", Y: "fit" };
            }
            if (_this.isFilterLayout()) {
              _this.popupObj.element.classList.add(dropDownListClasses.mobileFilter);
              _this.popupObj.position = { X: 0, Y: 0 };
              _this.popupObj.dataBind();
              attributes(_this.popupObj.element, { style: "left:0px;right:0px;top:0px;bottom:0px;" });
              addClass([document.body, _this.popupObj.element], dropDownListClasses.popupFullScreen);
              _this.setSearchBoxPosition();
              _this.backIconElement = searchBox.container.querySelector(".e-back-icon");
              _this.clearIconElement = searchBox.container.querySelector("." + dropDownListClasses.clearIcon);
              EventHandler.add(_this.backIconElement, "click", _this.clickOnBackIcon, _this);
              EventHandler.add(_this.clearIconElement, "click", _this.clearText, _this);
            }
          }
          popupEle.style.visibility = "visible";
          addClass([popupEle], "e-popup-close");
          var scrollParentElements = _this.popupObj.getScrollableParent(_this.inputWrapper.container);
          for (var _i = 0, scrollParentElements_1 = scrollParentElements; _i < scrollParentElements_1.length; _i++) {
            var element2 = scrollParentElements_1[_i];
            EventHandler.add(element2, "scroll", _this.scrollHandler, _this);
          }
          if (!isNullOrUndefined(_this.list)) {
            _this.unWireListEvents();
            _this.wireListEvents();
          }
          _this.selectedElementID = _this.selectedLI ? _this.selectedLI.id : null;
          attributes(_this.targetElement(), { "aria-expanded": "true", "aria-owns": _this.inputElement.id + "_options" });
          _this.inputElement.setAttribute("aria-expanded", "true");
          var inputParent = _this.isFiltering() ? _this.filterInput.parentElement : _this.inputWrapper.container;
          addClass([inputParent], [dropDownListClasses.inputFocus]);
          var animModel = { name: "FadeIn", duration: 100 };
          _this.beforePopupOpen = true;
          var popupInstance = _this.popupObj;
          var eventArgs = { popup: popupInstance, event: e, cancel: false, animation: animModel };
          _this.trigger("open", eventArgs, function(eventArgs2) {
            if (!eventArgs2.cancel) {
              if (!isNullOrUndefined(_this.inputWrapper)) {
                addClass([_this.inputWrapper.container], [dropDownListClasses.iconAnimation]);
              }
              _this.renderReactTemplates();
              if (!isNullOrUndefined(_this.popupObj)) {
                _this.popupObj.show(new Animation$1(eventArgs2.animation), _this.zIndex === 1e3 ? _this.element : null);
              }
            } else {
              _this.beforePopupOpen = false;
              _this.destroyPopup();
            }
          });
        } else {
          _this.beforePopupOpen = false;
        }
      });
    };
    DropDownList2.prototype.checkCollision = function(popupEle) {
      if (!Browser.isDevice || Browser.isDevice && !(this.getModuleName() === "dropdownlist" || this.isDropDownClick)) {
        var collision = isCollide(popupEle);
        if (collision.length > 0) {
          popupEle.style.marginTop = -parseInt(getComputedStyle(popupEle).marginTop, 10) + "px";
        }
        this.popupObj.resolveCollision();
      }
    };
    DropDownList2.prototype.getOffsetValue = function(popupEle) {
      var popupStyles = getComputedStyle(popupEle);
      var borderTop = parseInt(popupStyles.borderTopWidth, 10);
      var borderBottom = parseInt(popupStyles.borderBottomWidth, 10);
      return this.setPopupPosition(borderTop + borderBottom);
    };
    DropDownList2.prototype.createPopup = function(element2, offsetValue, left) {
      var _this = this;
      this.popupObj = new Popup(element2, {
        width: this.setWidth(),
        targetType: "relative",
        relateTo: this.inputWrapper.container,
        collision: { X: "flip", Y: "flip" },
        offsetY: offsetValue,
        enableRtl: this.enableRtl,
        offsetX: left,
        position: { X: "left", Y: "bottom" },
        zIndex: this.zIndex,
        close: function() {
          if (!_this.isDocumentClick) {
            _this.focusDropDown();
          }
          if (_this.isReact) {
            _this.clearTemplate(["headerTemplate", "footerTemplate"]);
          }
          _this.isNotSearchList = false;
          _this.isDocumentClick = false;
          _this.destroyPopup();
          EventHandler.remove(document, "mousedown", _this.onDocumentClick);
          if (_this.isFiltering() && _this.actionCompleteData.list && _this.actionCompleteData.list[0]) {
            _this.isActive = true;
            _this.onActionComplete(_this.actionCompleteData.ulElement, _this.actionCompleteData.list, null, true);
          }
        },
        open: function() {
          EventHandler.remove(document, "mousedown", _this.onDocumentClick);
          EventHandler.add(document, "mousedown", _this.onDocumentClick, _this);
          _this.isPopupOpen = true;
          var actionList = _this.actionCompleteData && _this.actionCompleteData.ulElement && _this.actionCompleteData.ulElement.querySelector("li");
          var ulElement = _this.list.querySelector("ul li");
          if (!isNullOrUndefined(_this.ulElement) && !isNullOrUndefined(_this.ulElement.getElementsByClassName("e-item-focus")[0])) {
            attributes(_this.targetElement(), { "aria-activedescendant": _this.ulElement.getElementsByClassName("e-item-focus")[0].id });
          } else if (!isNullOrUndefined(_this.ulElement) && !isNullOrUndefined(_this.ulElement.getElementsByClassName("e-active")[0])) {
            attributes(_this.targetElement(), { "aria-activedescendant": _this.ulElement.getElementsByClassName("e-active")[0].id });
          }
          if (_this.isFiltering() && _this.itemTemplate && _this.element.tagName === _this.getNgDirective() && (actionList && ulElement && actionList.textContent !== ulElement.textContent) && _this.element.tagName !== "EJS-COMBOBOX") {
            _this.cloneElements();
          }
          if (_this.isFilterLayout()) {
            removeClass([_this.inputWrapper.container], [dropDownListClasses.inputFocus]);
            _this.isFilterFocus = true;
            _this.filterInput.focus();
            if (_this.inputWrapper.clearButton) {
              addClass([_this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);
            }
          }
          _this.activeStateChange();
        },
        targetExitViewport: function() {
          if (!Browser.isDevice) {
            _this.hidePopup();
          }
        }
      });
    };
    DropDownList2.prototype.isEmptyList = function() {
      return !isNullOrUndefined(this.liCollections) && this.liCollections.length === 0;
    };
    DropDownList2.prototype.getFocusElement = function() {
    };
    DropDownList2.prototype.isFilterLayout = function() {
      return this.getModuleName() === "dropdownlist" && this.allowFiltering;
    };
    DropDownList2.prototype.scrollHandler = function() {
      if (Browser.isDevice && (this.getModuleName() === "dropdownlist" && !this.isFilterLayout() || this.getModuleName() === "combobox" && !this.allowFiltering && this.isDropDownClick)) {
        this.hidePopup();
      }
    };
    DropDownList2.prototype.setSearchBoxPosition = function() {
      var searchBoxHeight = this.filterInput.parentElement.getBoundingClientRect().height;
      this.popupObj.element.style.maxHeight = "100%";
      this.popupObj.element.style.width = "100%";
      this.list.style.maxHeight = window.innerHeight - searchBoxHeight + "px";
      this.list.style.height = window.innerHeight - searchBoxHeight + "px";
      var clearElement = this.filterInput.parentElement.querySelector("." + dropDownListClasses.clearIcon);
      detach(this.filterInput);
      clearElement.parentElement.insertBefore(this.filterInput, clearElement);
    };
    DropDownList2.prototype.setPopupPosition = function(border) {
      var offsetValue;
      var popupOffset = border;
      var selectedLI = this.list.querySelector("." + dropDownListClasses.focus) || this.selectedLI;
      var firstItem = this.isEmptyList() ? this.list : this.liCollections[0];
      var lastItem = this.isEmptyList() ? this.list : this.liCollections[this.getItems().length - 1];
      var liHeight = firstItem.getBoundingClientRect().height;
      var listHeight = this.list.offsetHeight / 2;
      var height = isNullOrUndefined(selectedLI) ? firstItem.offsetTop : selectedLI.offsetTop;
      var lastItemOffsetValue = lastItem.offsetTop;
      if (lastItemOffsetValue - listHeight < height && !isNullOrUndefined(this.liCollections) && this.liCollections.length > 0 && !isNullOrUndefined(selectedLI)) {
        var count = this.list.offsetHeight / liHeight;
        var paddingBottom = parseInt(getComputedStyle(this.list).paddingBottom, 10);
        offsetValue = (count - (this.liCollections.length - this.activeIndex)) * liHeight - popupOffset + paddingBottom;
        this.list.scrollTop = selectedLI.offsetTop;
      } else if (height > listHeight) {
        offsetValue = listHeight - liHeight / 2;
        this.list.scrollTop = height - listHeight + liHeight / 2;
      } else {
        offsetValue = height;
      }
      var inputHeight = this.inputWrapper.container.offsetHeight;
      offsetValue = offsetValue + liHeight + popupOffset - (liHeight - inputHeight) / 2;
      return -offsetValue;
    };
    DropDownList2.prototype.setWidth = function() {
      var width = formatUnit(this.popupWidth);
      if (width.indexOf("%") > -1) {
        var inputWidth = this.inputWrapper.container.offsetWidth * parseFloat(width) / 100;
        width = inputWidth.toString() + "px";
      }
      if (Browser.isDevice && (!this.allowFiltering && (this.getModuleName() === "dropdownlist" || this.isDropDownClick && this.getModuleName() === "combobox"))) {
        var firstItem = this.isEmptyList() ? this.list : this.liCollections[0];
        width = parseInt(width, 10) + (parseInt(getComputedStyle(firstItem).textIndent, 10) - parseInt(getComputedStyle(this.inputElement).paddingLeft, 10) + parseInt(getComputedStyle(this.inputElement.parentElement).borderLeftWidth, 10)) * 2 + "px";
      }
      return width;
    };
    DropDownList2.prototype.scrollBottom = function(isInitial) {
      if (!isNullOrUndefined(this.selectedLI)) {
        var currentOffset = this.list.offsetHeight;
        var nextBottom = this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop;
        var nextOffset = this.list.scrollTop + nextBottom - currentOffset;
        nextOffset = isInitial ? nextOffset + parseInt(getComputedStyle(this.list).paddingTop, 10) * 2 : nextOffset;
        var boxRange = this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop;
        boxRange = this.fields.groupBy && !isNullOrUndefined(this.fixedHeaderElement) ? boxRange - this.fixedHeaderElement.offsetHeight : boxRange;
        if (this.activeIndex === 0) {
          this.list.scrollTop = 0;
        } else if (nextBottom > currentOffset || !(boxRange > 0 && this.list.offsetHeight > boxRange)) {
          this.list.scrollTop = nextOffset;
        }
      }
    };
    DropDownList2.prototype.scrollTop = function() {
      if (!isNullOrUndefined(this.selectedLI)) {
        var nextOffset = this.selectedLI.offsetTop - this.list.scrollTop;
        nextOffset = this.fields.groupBy && !isNullOrUndefined(this.fixedHeaderElement) ? nextOffset - this.fixedHeaderElement.offsetHeight : nextOffset;
        var boxRange = this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop;
        if (this.activeIndex === 0) {
          this.list.scrollTop = 0;
        } else if (nextOffset < 0) {
          this.list.scrollTop = this.list.scrollTop + nextOffset;
        } else if (!(boxRange > 0 && this.list.offsetHeight > boxRange)) {
          this.list.scrollTop = this.selectedLI.offsetTop - (this.fields.groupBy && !isNullOrUndefined(this.fixedHeaderElement) ? this.fixedHeaderElement.offsetHeight : 0);
        }
      }
    };
    DropDownList2.prototype.isEditTextBox = function() {
      return false;
    };
    DropDownList2.prototype.isFiltering = function() {
      return this.allowFiltering;
    };
    DropDownList2.prototype.isPopupButton = function() {
      return true;
    };
    DropDownList2.prototype.setScrollPosition = function(e) {
      if (!isNullOrUndefined(e)) {
        switch (e.action) {
          case "pageDown":
          case "down":
          case "end":
            this.scrollBottom();
            break;
          default:
            this.scrollTop();
            break;
        }
      } else {
        this.scrollBottom(true);
      }
    };
    DropDownList2.prototype.clearText = function() {
      this.filterInput.value = this.typedString = "";
      this.searchLists(null);
    };
    DropDownList2.prototype.setEleWidth = function(width) {
      if (!isNullOrUndefined(width)) {
        if (typeof width === "number") {
          this.inputWrapper.container.style.width = formatUnit(width);
        } else if (typeof width === "string") {
          this.inputWrapper.container.style.width = width.match(/px|%|em/) ? width : formatUnit(width);
        }
      }
    };
    DropDownList2.prototype.closePopup = function(delay, e) {
      var _this = this;
      this.isTyped = false;
      if (!(this.popupObj && document.body.contains(this.popupObj.element) && (this.beforePopupOpen || this.isEventCancel))) {
        return;
      }
      this.isActive = false;
      this.filterInputObj = null;
      this.isDropDownClick = false;
      this.preventAutoFill = false;
      var scrollableParentElements = this.popupObj.getScrollableParent(this.inputWrapper.container);
      for (var _i = 0, scrollableParentElements_1 = scrollableParentElements; _i < scrollableParentElements_1.length; _i++) {
        var element2 = scrollableParentElements_1[_i];
        EventHandler.remove(element2, "scroll", this.scrollHandler);
      }
      if (Browser.isDevice && this.isFilterLayout()) {
        removeClass([document.body, this.popupObj.element], dropDownListClasses.popupFullScreen);
      }
      if (this.isFilterLayout()) {
        if (!Browser.isDevice) {
          this.searchKeyModule.destroy();
          if (this.clearIconElement) {
            EventHandler.remove(this.clearIconElement, "click", this.clearText);
          }
        }
        if (this.backIconElement) {
          EventHandler.remove(this.backIconElement, "click", this.clickOnBackIcon);
          EventHandler.remove(this.clearIconElement, "click", this.clearText);
        }
        if (!isNullOrUndefined(this.filterInput)) {
          EventHandler.remove(this.filterInput, "input", this.onInput);
          EventHandler.remove(this.filterInput, "keyup", this.onFilterUp);
          EventHandler.remove(this.filterInput, "keydown", this.onFilterDown);
          EventHandler.remove(this.filterInput, "blur", this.onBlurHandler);
          EventHandler.remove(this.filterInput, "paste", this.pasteHandler);
        }
        this.filterInput = null;
      }
      attributes(this.targetElement(), { "aria-expanded": "false" });
      this.inputElement.setAttribute("aria-expanded", "false");
      this.targetElement().removeAttribute("aria-owns");
      this.targetElement().removeAttribute("aria-activedescendant");
      this.inputWrapper.container.classList.remove(dropDownListClasses.iconAnimation);
      if (this.isFiltering()) {
        this.actionCompleteData.isUpdated = false;
      }
      this.beforePopupOpen = false;
      var animModel = {
        name: "FadeOut",
        duration: 100,
        delay: delay ? delay : 0
      };
      var popupInstance = this.popupObj;
      var eventArgs = { popup: popupInstance, cancel: false, animation: animModel, event: e || null };
      this.trigger("close", eventArgs, function(eventArgs2) {
        _this.isEventCancel = eventArgs2.cancel;
        if (!isNullOrUndefined(_this.popupObj) && !isNullOrUndefined(_this.popupObj.element.querySelector(".e-fixed-head"))) {
          var fixedHeader = _this.popupObj.element.querySelector(".e-fixed-head");
          fixedHeader.parentNode.removeChild(fixedHeader);
          _this.fixedHeaderElement = null;
        }
        if (!eventArgs2.cancel) {
          if (_this.getModuleName() === "autocomplete") {
            _this.rippleFun();
          }
          if (_this.isPopupOpen) {
            _this.popupObj.hide(new Animation$1(eventArgs2.animation));
          } else {
            _this.destroyPopup();
          }
        }
      });
    };
    DropDownList2.prototype.destroyPopup = function() {
      this.isPopupOpen = false;
      this.isFilterFocus = false;
      if (this.popupObj) {
        this.popupObj.destroy();
        detach(this.popupObj.element);
      }
    };
    DropDownList2.prototype.clickOnBackIcon = function() {
      this.hidePopup();
      this.focusIn();
    };
    DropDownList2.prototype.render = function() {
      if (this.element.tagName === "INPUT") {
        this.inputElement = this.element;
        if (isNullOrUndefined(this.inputElement.getAttribute("role"))) {
          this.inputElement.setAttribute("role", "combobox");
        }
        if (isNullOrUndefined(this.inputElement.getAttribute("type"))) {
          this.inputElement.setAttribute("type", "text");
        }
        this.inputElement.setAttribute("aria-expanded", "false");
      } else {
        this.inputElement = this.createElement("input", { attrs: { role: "combobox", type: "text" } });
        if (this.element.tagName !== this.getNgDirective()) {
          this.element.style.display = "none";
        }
        this.element.parentElement.insertBefore(this.inputElement, this.element);
        this.preventTabIndex(this.inputElement);
      }
      var updatedCssClassValues = this.cssClass;
      if (!isNullOrUndefined(this.cssClass) && this.cssClass !== "") {
        updatedCssClassValues = this.cssClass.replace(/\s+/g, " ").trim();
      }
      if (!isNullOrUndefined(closest(this.element, "fieldset")) && closest(this.element, "fieldset").disabled) {
        this.enabled = false;
      }
      this.inputWrapper = Input.createInput({
        element: this.inputElement,
        buttons: this.isPopupButton() ? [dropDownListClasses.icon] : null,
        floatLabelType: this.floatLabelType,
        properties: {
          readonly: this.getModuleName() === "dropdownlist" ? true : this.readonly,
          placeholder: this.placeholder,
          cssClass: updatedCssClassValues,
          enabled: this.enabled,
          enableRtl: this.enableRtl,
          showClearButton: this.showClearButton
        }
      }, this.createElement);
      if (this.element.tagName === this.getNgDirective()) {
        this.element.appendChild(this.inputWrapper.container);
      } else {
        this.inputElement.parentElement.insertBefore(this.element, this.inputElement);
      }
      this.hiddenElement = this.createElement("select", {
        attrs: { "aria-hidden": "true", "tabindex": "-1", "class": dropDownListClasses.hiddenElement }
      });
      prepend([this.hiddenElement], this.inputWrapper.container);
      this.validationAttribute(this.element, this.hiddenElement);
      this.setReadOnly();
      this.setFields();
      this.inputWrapper.container.style.width = formatUnit(this.width);
      this.inputWrapper.container.classList.add("e-ddl");
      Input.calculateWidth(this.inputElement, this.inputWrapper.container);
      if (!isNullOrUndefined(this.inputWrapper.buttons[0]) && this.inputWrapper.container.getElementsByClassName("e-float-text-content")[0] && this.floatLabelType !== "Never") {
        this.inputWrapper.container.getElementsByClassName("e-float-text-content")[0].classList.add("e-icon");
      }
      this.wireEvent();
      this.tabIndex = this.element.hasAttribute("tabindex") ? this.element.getAttribute("tabindex") : "0";
      this.element.removeAttribute("tabindex");
      var id = this.element.getAttribute("id") ? this.element.getAttribute("id") : getUniqueID("ej2_dropdownlist");
      this.element.id = id;
      this.hiddenElement.id = id + "_hidden";
      this.targetElement().setAttribute("tabindex", this.tabIndex);
      if (this.getModuleName() === "autocomplete" || this.getModuleName() === "combobox") {
        this.inputElement.setAttribute("aria-label", this.getModuleName());
      } else {
        attributes(this.targetElement(), { "aria-label": this.getModuleName() });
      }
      attributes(this.targetElement(), this.getAriaAttributes());
      this.updateDataAttribute(this.htmlAttributes);
      this.setHTMLAttributes();
      if (this.targetElement() === this.inputElement) {
        this.inputElement.removeAttribute("aria-labelledby");
      }
      if (this.value !== null || this.activeIndex !== null || this.text !== null) {
        this.initValue();
      } else if (this.element.tagName === "SELECT" && this.element.options[0]) {
        var selectElement = this.element;
        this.value = selectElement.options[selectElement.selectedIndex].value;
        this.text = isNullOrUndefined(this.value) ? null : selectElement.options[selectElement.selectedIndex].textContent;
        this.initValue();
      }
      this.setEnabled();
      this.preventTabIndex(this.element);
      if (!this.enabled) {
        this.targetElement().tabIndex = -1;
      }
      this.initial = false;
      this.element.style.opacity = "";
      this.inputElement.onselect = function(e) {
        e.stopImmediatePropagation();
      };
      this.inputElement.onchange = function(e) {
        e.stopImmediatePropagation();
      };
      if (this.element.hasAttribute("autofocus")) {
        this.focusIn();
      }
      if (!isNullOrUndefined(this.text)) {
        this.inputElement.setAttribute("value", this.text);
      }
      if (this.element.hasAttribute("data-val")) {
        this.element.setAttribute("data-val", "false");
      }
      var floatLabelElement = this.inputWrapper.container.getElementsByClassName("e-float-text")[0];
      if (!isNullOrUndefined(this.element.id) && this.element.id !== "" && !isNullOrUndefined(floatLabelElement)) {
        floatLabelElement.id = "label_" + this.element.id.replace(/ /g, "_");
        attributes(this.inputElement, { "aria-labelledby": floatLabelElement.id });
      }
      this.renderComplete();
    };
    DropDownList2.prototype.setFooterTemplate = function(popupEle) {
      var compiledString;
      if (this.footer) {
        if (this.isReact) {
          this.clearTemplate(["footerTemplate"]);
        } else {
          this.footer.innerHTML = "";
        }
      } else {
        this.footer = this.createElement("div");
        addClass([this.footer], dropDownListClasses.footer);
      }
      var footercheck = this.dropdownCompiler(this.footerTemplate);
      if (footercheck) {
        compiledString = compile$1(select$1(this.footerTemplate, document).innerHTML.trim());
      } else {
        compiledString = compile$1(this.footerTemplate);
      }
      var footerCompTemp = compiledString({}, this, "footerTemplate", this.footerTemplateId, this.isStringTemplate, null, this.footer);
      if (footerCompTemp && footerCompTemp.length > 0) {
        for (var i = 0; i < footerCompTemp.length; i++) {
          this.footer.appendChild(footerCompTemp[i]);
        }
      }
      append2([this.footer], popupEle);
    };
    DropDownList2.prototype.setHeaderTemplate = function(popupEle) {
      var compiledString;
      if (this.header) {
        this.header.innerHTML = "";
      } else {
        this.header = this.createElement("div");
        addClass([this.header], dropDownListClasses.header);
      }
      var headercheck = this.dropdownCompiler(this.headerTemplate);
      if (headercheck) {
        compiledString = compile$1(select$1(this.headerTemplate, document).innerHTML.trim());
      } else {
        compiledString = compile$1(this.headerTemplate);
      }
      var headerCompTemp = compiledString({}, this, "headerTemplate", this.headerTemplateId, this.isStringTemplate, null, this.header);
      if (headerCompTemp && headerCompTemp.length) {
        for (var i = 0; i < headerCompTemp.length; i++) {
          this.header.appendChild(headerCompTemp[i]);
        }
      }
      var contentEle = popupEle.querySelector("div.e-content");
      popupEle.insertBefore(this.header, contentEle);
    };
    DropDownList2.prototype.setEnabled = function() {
      this.element.setAttribute("aria-disabled", this.enabled ? "false" : "true");
    };
    DropDownList2.prototype.setOldText = function(text) {
      this.text = text;
    };
    DropDownList2.prototype.setOldValue = function(value) {
      this.value = value;
    };
    DropDownList2.prototype.refreshPopup = function() {
      if (!isNullOrUndefined(this.popupObj) && document.body.contains(this.popupObj.element) && (this.allowFiltering && !(Browser.isDevice && this.isFilterLayout()) || this.getModuleName() === "autocomplete")) {
        removeClass([this.popupObj.element], "e-popup-close");
        this.popupObj.refreshPosition(this.inputWrapper.container);
        this.popupObj.resolveCollision();
      }
    };
    DropDownList2.prototype.checkData = function(newProp) {
      if (newProp.dataSource && !isNullOrUndefined(Object.keys(newProp.dataSource)) && this.itemTemplate && this.allowFiltering && !(this.isListSearched && newProp.dataSource instanceof DataManager)) {
        this.list = null;
        this.actionCompleteData = { ulElement: null, list: null, isUpdated: false };
      }
      this.isListSearched = false;
      var isChangeValue = Object.keys(newProp).indexOf("value") !== -1 && isNullOrUndefined(newProp.value);
      var isChangeText = Object.keys(newProp).indexOf("text") !== -1 && isNullOrUndefined(newProp.text);
      if (this.getModuleName() !== "autocomplete" && this.allowFiltering && (isChangeValue || isChangeText)) {
        this.itemData = null;
      }
      if (this.allowFiltering && newProp.dataSource && !isNullOrUndefined(Object.keys(newProp.dataSource))) {
        this.actionCompleteData = { ulElement: null, list: null, isUpdated: false };
        this.actionData = this.actionCompleteData;
      } else if (this.allowFiltering && newProp.query && !isNullOrUndefined(Object.keys(newProp.query))) {
        this.actionCompleteData = this.getModuleName() === "combobox" ? { ulElement: null, list: null, isUpdated: false } : this.actionCompleteData;
        this.actionData = this.actionCompleteData;
      }
    };
    DropDownList2.prototype.updateDataSource = function(props2) {
      if (this.inputElement.value !== "" || !isNullOrUndefined(props2) && (isNullOrUndefined(props2.dataSource) || !(props2.dataSource instanceof DataManager) && props2.dataSource.length === 0)) {
        this.clearAll(null, props2);
      }
      if (this.fields.groupBy && props2.fields && !this.isGroupChecking && this.list) {
        EventHandler.remove(this.list, "scroll", this.setFloatingHeader);
        EventHandler.add(this.list, "scroll", this.setFloatingHeader, this);
      }
      if (!(!isNullOrUndefined(props2) && (isNullOrUndefined(props2.dataSource) || !(props2.dataSource instanceof DataManager) && props2.dataSource.length === 0)) || !(props2.dataSource === [])) {
        this.typedString = "";
        this.resetList(this.dataSource);
      }
      if (!this.isCustomFilter && !this.isFilterFocus && document.activeElement !== this.filterInput) {
        this.checkCustomValue();
      }
    };
    DropDownList2.prototype.checkCustomValue = function() {
      this.itemData = this.getDataByValue(this.value);
      var dataItem = this.getItemData();
      this.setProperties({ "text": dataItem.text, "value": dataItem.value });
    };
    DropDownList2.prototype.updateInputFields = function() {
      if (this.getModuleName() === "dropdownlist") {
        Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);
      }
    };
    DropDownList2.prototype.onPropertyChanged = function(newProp, oldProp) {
      var _this = this;
      if (this.getModuleName() === "dropdownlist") {
        this.checkData(newProp);
        this.setUpdateInitial(["fields", "query", "dataSource"], newProp);
      }
      var _loop_1 = function(prop2) {
        switch (prop2) {
          case "query":
          case "dataSource":
            break;
          case "htmlAttributes":
            this_1.setHTMLAttributes();
            break;
          case "width":
            this_1.setEleWidth(newProp.width);
            Input.calculateWidth(this_1.inputElement, this_1.inputWrapper.container);
            break;
          case "placeholder":
            Input.setPlaceholder(newProp.placeholder, this_1.inputElement);
            break;
          case "filterBarPlaceholder":
            if (this_1.filterInput) {
              Input.setPlaceholder(newProp.filterBarPlaceholder, this_1.filterInput);
            }
            break;
          case "readonly":
            if (this_1.getModuleName() !== "dropdownlist") {
              Input.setReadonly(newProp.readonly, this_1.inputElement);
            }
            this_1.setReadOnly();
            break;
          case "cssClass":
            this_1.setCssClass(newProp.cssClass, oldProp.cssClass);
            Input.calculateWidth(this_1.inputElement, this_1.inputWrapper.container);
            break;
          case "enableRtl":
            this_1.setEnableRtl();
            break;
          case "enabled":
            this_1.setEnable();
            break;
          case "text":
            if (newProp.text === null) {
              this_1.clearAll();
              break;
            }
            if (!this_1.list) {
              if (this_1.dataSource instanceof DataManager) {
                this_1.initRemoteRender = true;
              }
              this_1.renderList();
            }
            if (!this_1.initRemoteRender) {
              var li = this_1.getElementByText(newProp.text);
              if (!this_1.checkValidLi(li)) {
                if (this_1.liCollections && this_1.liCollections.length === 100 && this_1.getModuleName() === "autocomplete" && this_1.listData.length > 100) {
                  this_1.setSelectionData(newProp.text, oldProp.text, "text");
                } else if (newProp.text && this_1.dataSource instanceof DataManager) {
                  var listLength_1 = this_1.getItems().length;
                  var checkField = isNullOrUndefined(this_1.fields.text) ? this_1.fields.value : this_1.fields.text;
                  this_1.typedString = "";
                  this_1.dataSource.executeQuery(this_1.getQuery(this_1.query).where(new Predicate(checkField, "equal", newProp.text))).then(function(e) {
                    if (e.result.length > 0) {
                      _this.addItem(e.result, listLength_1);
                      _this.updateValues();
                    } else {
                      _this.setOldText(oldProp.text);
                    }
                  });
                } else if (this_1.getModuleName() === "autocomplete") {
                  this_1.setInputValue(newProp, oldProp);
                } else {
                  this_1.setOldText(oldProp.text);
                }
              }
              this_1.updateInputFields();
            }
            break;
          case "value":
            if (newProp.value === null) {
              this_1.clearAll();
              break;
            }
            this_1.notify("beforeValueChange", { newProp });
            if (!this_1.list) {
              if (this_1.dataSource instanceof DataManager) {
                this_1.initRemoteRender = true;
              }
              this_1.renderList();
            }
            if (!this_1.initRemoteRender) {
              var item = this_1.getElementByValue(newProp.value);
              if (!this_1.checkValidLi(item)) {
                if (this_1.liCollections && this_1.liCollections.length === 100 && this_1.getModuleName() === "autocomplete" && this_1.listData.length > 100) {
                  this_1.setSelectionData(newProp.value, oldProp.value, "value");
                } else if (newProp.value && this_1.dataSource instanceof DataManager) {
                  var listLength_2 = this_1.getItems().length;
                  var checkField = isNullOrUndefined(this_1.fields.value) ? this_1.fields.text : this_1.fields.value;
                  this_1.typedString = "";
                  this_1.dataSource.executeQuery(this_1.getQuery(this_1.query).where(new Predicate(checkField, "equal", newProp.value))).then(function(e) {
                    if (e.result.length > 0) {
                      _this.addItem(e.result, listLength_2);
                      _this.updateValues();
                    } else {
                      _this.setOldValue(oldProp.value);
                    }
                  });
                } else if (this_1.getModuleName() === "autocomplete") {
                  this_1.setInputValue(newProp, oldProp);
                } else {
                  this_1.setOldValue(oldProp.value);
                }
              }
              this_1.updateInputFields();
              this_1.preventChange = this_1.isAngular && this_1.preventChange ? !this_1.preventChange : this_1.preventChange;
            }
            break;
          case "index":
            if (newProp.index === null) {
              this_1.clearAll();
              break;
            }
            if (!this_1.list) {
              if (this_1.dataSource instanceof DataManager) {
                this_1.initRemoteRender = true;
              }
              this_1.renderList();
            }
            if (!this_1.initRemoteRender && this_1.liCollections) {
              var element2 = this_1.liCollections[newProp.index];
              if (!this_1.checkValidLi(element2)) {
                if (this_1.liCollections && this_1.liCollections.length === 100 && this_1.getModuleName() === "autocomplete" && this_1.listData.length > 100) {
                  this_1.setSelectionData(newProp.index, oldProp.index, "index");
                } else {
                  this_1.index = oldProp.index;
                }
              }
              this_1.updateInputFields();
            }
            break;
          case "footerTemplate":
            if (this_1.popupObj) {
              this_1.setFooterTemplate(this_1.popupObj.element);
            }
            break;
          case "headerTemplate":
            if (this_1.popupObj) {
              this_1.setHeaderTemplate(this_1.popupObj.element);
            }
            break;
          case "valueTemplate":
            if (!isNullOrUndefined(this_1.itemData) && this_1.valueTemplate !== null) {
              this_1.setValueTemplate();
            }
            break;
          case "allowFiltering":
            if (this_1.allowFiltering) {
              this_1.actionCompleteData = {
                ulElement: this_1.ulElement,
                list: this_1.listData,
                isUpdated: true
              };
              this_1.actionData = this_1.actionCompleteData;
              this_1.updateSelectElementData(this_1.allowFiltering);
            }
            break;
          case "floatLabelType":
            Input.removeFloating(this_1.inputWrapper);
            Input.addFloating(this_1.inputElement, newProp.floatLabelType, this_1.placeholder, this_1.createElement);
            if (!isNullOrUndefined(this_1.inputWrapper.buttons[0]) && this_1.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0] && this_1.floatLabelType !== "Never") {
              this_1.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon");
            }
            break;
          case "showClearButton":
            Input.setClearButton(newProp.showClearButton, this_1.inputElement, this_1.inputWrapper, null, this_1.createElement);
            this_1.bindClearEvent();
            break;
          default:
            {
              var ddlProps = this_1.getPropObject(prop2, newProp, oldProp);
              _super.prototype.onPropertyChanged.call(this_1, ddlProps.newProperty, ddlProps.oldProperty);
            }
            break;
        }
      };
      var this_1 = this;
      for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {
        var prop = _a[_i];
        _loop_1(prop);
      }
    };
    DropDownList2.prototype.checkValidLi = function(element2) {
      if (this.isValidLI(element2)) {
        this.setSelection(element2, null);
        return true;
      }
      return false;
    };
    DropDownList2.prototype.setSelectionData = function(newProp, oldProp, prop) {
      var _this = this;
      var li;
      this.updateListValues = function() {
        if (prop === "text") {
          li = _this.getElementByText(newProp);
          if (!_this.checkValidLi(li)) {
            _this.setOldText(oldProp);
          }
        } else if (prop === "value") {
          li = _this.getElementByValue(newProp);
          if (!_this.checkValidLi(li)) {
            _this.setOldValue(oldProp);
          }
        } else if (prop === "index") {
          li = _this.liCollections[newProp];
          if (!_this.checkValidLi(li)) {
            _this.index = oldProp;
          }
        }
      };
    };
    DropDownList2.prototype.setReadOnly = function() {
      if (this.readonly) {
        addClass([this.inputWrapper.container], ["e-readonly"]);
      } else {
        removeClass([this.inputWrapper.container], ["e-readonly"]);
      }
    };
    DropDownList2.prototype.setInputValue = function(newProp, oldProp) {
    };
    DropDownList2.prototype.setCssClass = function(newClass, oldClass) {
      if (!isNullOrUndefined(oldClass)) {
        oldClass = oldClass.replace(/\s+/g, " ").trim();
      }
      if (!isNullOrUndefined(newClass)) {
        newClass = newClass.replace(/\s+/g, " ").trim();
      }
      Input.setCssClass(newClass, [this.inputWrapper.container], oldClass);
      if (this.popupObj) {
        Input.setCssClass(newClass, [this.popupObj.element], oldClass);
      }
    };
    DropDownList2.prototype.getModuleName = function() {
      return "dropdownlist";
    };
    DropDownList2.prototype.showPopup = function(e) {
      if (!this.enabled) {
        return;
      }
      if (this.isFiltering() && this.dataSource instanceof DataManager && this.actionData.list !== this.actionCompleteData.list && this.actionData.list && this.actionData.ulElement) {
        this.actionCompleteData = this.actionData;
        this.onActionComplete(this.actionCompleteData.ulElement, this.actionCompleteData.list, null, true);
      }
      if (this.beforePopupOpen) {
        this.refreshPopup();
        return;
      }
      this.beforePopupOpen = true;
      if (this.isFiltering() && !this.isActive && this.actionCompleteData.list && this.actionCompleteData.list[0]) {
        this.isActive = true;
        this.onActionComplete(this.actionCompleteData.ulElement, this.actionCompleteData.list, null, true);
      } else if (isNullOrUndefined(this.list) || !isUndefined(this.list) && (this.list.classList.contains(dropDownBaseClasses.noData) || this.list.querySelectorAll("." + dropDownBaseClasses.li).length <= 0)) {
        this.renderList(e);
      }
      this.invokeRenderPopup(e);
    };
    DropDownList2.prototype.invokeRenderPopup = function(e) {
      if (Browser.isDevice && this.isFilterLayout()) {
        var proxy_2 = this;
        window.onpopstate = function() {
          proxy_2.hidePopup();
        };
        history.pushState({}, "");
      }
      if (!isNullOrUndefined(this.list) && (!isNullOrUndefined(this.list.children[0]) || this.list.classList.contains(dropDownBaseClasses.noData))) {
        this.renderPopup(e);
      }
    };
    DropDownList2.prototype.renderHightSearch = function() {
    };
    DropDownList2.prototype.hidePopup = function(e) {
      if (this.isEscapeKey && this.getModuleName() === "dropdownlist") {
        if (!isNullOrUndefined(this.inputElement)) {
          Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);
        }
        this.isEscapeKey = false;
        if (!isNullOrUndefined(this.index)) {
          var element2 = this.findListElement(this.ulElement, "li", "data-value", this.value);
          this.selectedLI = this.liCollections[this.index] || element2;
          if (this.selectedLI) {
            this.updateSelectedItem(this.selectedLI, null, true);
            if (this.valueTemplate && this.itemData !== null) {
              this.setValueTemplate();
            }
          }
        } else {
          this.resetSelection();
        }
      }
      this.closePopup(0, e);
      var dataItem = this.getItemData();
      var isSelectVal = !isNullOrUndefined(this.selectedLI);
      if (this.inputElement && this.inputElement.value.trim() === "" && !this.isInteracted && (this.isSelectCustom || isSelectVal && this.inputElement.value !== dataItem.text)) {
        this.isSelectCustom = false;
        this.clearAll(e);
      }
    };
    DropDownList2.prototype.focusIn = function(e) {
      if (!this.enabled) {
        return;
      }
      if (this.targetElement().classList.contains(dropDownListClasses.disable)) {
        return;
      }
      var isFocused = false;
      if (this.preventFocus && Browser.isDevice) {
        this.inputWrapper.container.tabIndex = 1;
        this.inputWrapper.container.focus();
        this.preventFocus = false;
        isFocused = true;
      }
      if (!isFocused) {
        this.targetElement().focus();
      }
      addClass([this.inputWrapper.container], [dropDownListClasses.inputFocus]);
      this.onFocus(e);
      Input.calculateWidth(this.inputElement, this.inputWrapper.container);
    };
    DropDownList2.prototype.focusOut = function(e) {
      if (!this.enabled) {
        return;
      }
      this.isTyped = true;
      this.hidePopup(e);
      if (this.targetElement()) {
        this.targetElement().blur();
      }
      removeClass([this.inputWrapper.container], [dropDownListClasses.inputFocus]);
      Input.calculateWidth(this.inputElement, this.inputWrapper.container);
    };
    DropDownList2.prototype.destroy = function() {
      this.isActive = false;
      resetIncrementalSearchValues(this.element.id);
      if (this.isReact) {
        this.clearTemplate();
      }
      this.hidePopup();
      this.unWireEvent();
      if (this.list) {
        this.unWireListEvents();
      }
      if (this.element && !this.element.classList.contains("e-" + this.getModuleName())) {
        return;
      }
      if (this.inputElement) {
        var attrArray = [
          "readonly",
          "aria-disabled",
          "placeholder",
          "aria-labelledby",
          "aria-expanded",
          "autocomplete",
          "aria-readonly",
          "autocapitalize",
          "spellcheck",
          "aria-autocomplete",
          "aria-live",
          "aria-describedby",
          "aria-label"
        ];
        for (var i = 0; i < attrArray.length; i++) {
          this.inputElement.removeAttribute(attrArray[i]);
        }
        this.inputElement.setAttribute("tabindex", this.tabIndex);
        this.inputElement.classList.remove("e-input");
        Input.setValue("", this.inputElement, this.floatLabelType, this.showClearButton);
      }
      this.element.style.display = "block";
      if (this.inputWrapper.container.parentElement.tagName === this.getNgDirective()) {
        detach(this.inputWrapper.container);
      } else {
        this.inputWrapper.container.parentElement.insertBefore(this.element, this.inputWrapper.container);
        detach(this.inputWrapper.container);
      }
      this.hiddenElement = null;
      this.inputWrapper = null;
      this.keyboardModule = null;
      this.ulElement = null;
      this.list = null;
      this.popupObj = null;
      this.rippleFun = null;
      this.selectedLI = null;
      this.liCollections = null;
      this.item = null;
      this.inputWrapper = null;
      this.footer = null;
      this.header = null;
      this.previousSelectedLI = null;
      this.valueTempElement = null;
      _super.prototype.destroy.call(this);
    };
    DropDownList2.prototype.getItems = function() {
      if (!this.list) {
        if (this.dataSource instanceof DataManager) {
          this.initRemoteRender = true;
        }
        this.renderList();
      }
      return this.ulElement ? _super.prototype.getItems.call(this) : [];
    };
    DropDownList2.prototype.getDataByValue = function(value) {
      return _super.prototype.getDataByValue.call(this, value);
    };
    DropDownList2.prototype.clear = function() {
      this.value = null;
    };
    __decorate$o([
      Property(null)
    ], DropDownList2.prototype, "cssClass", void 0);
    __decorate$o([
      Property("100%")
    ], DropDownList2.prototype, "width", void 0);
    __decorate$o([
      Property(true)
    ], DropDownList2.prototype, "enabled", void 0);
    __decorate$o([
      Property(false)
    ], DropDownList2.prototype, "enablePersistence", void 0);
    __decorate$o([
      Property("300px")
    ], DropDownList2.prototype, "popupHeight", void 0);
    __decorate$o([
      Property("100%")
    ], DropDownList2.prototype, "popupWidth", void 0);
    __decorate$o([
      Property(null)
    ], DropDownList2.prototype, "placeholder", void 0);
    __decorate$o([
      Property(null)
    ], DropDownList2.prototype, "filterBarPlaceholder", void 0);
    __decorate$o([
      Property({})
    ], DropDownList2.prototype, "htmlAttributes", void 0);
    __decorate$o([
      Property(null)
    ], DropDownList2.prototype, "query", void 0);
    __decorate$o([
      Property(null)
    ], DropDownList2.prototype, "valueTemplate", void 0);
    __decorate$o([
      Property(null)
    ], DropDownList2.prototype, "headerTemplate", void 0);
    __decorate$o([
      Property(null)
    ], DropDownList2.prototype, "footerTemplate", void 0);
    __decorate$o([
      Property(false)
    ], DropDownList2.prototype, "allowFiltering", void 0);
    __decorate$o([
      Property(false)
    ], DropDownList2.prototype, "readonly", void 0);
    __decorate$o([
      Property(null)
    ], DropDownList2.prototype, "text", void 0);
    __decorate$o([
      Property(null)
    ], DropDownList2.prototype, "value", void 0);
    __decorate$o([
      Property(null)
    ], DropDownList2.prototype, "index", void 0);
    __decorate$o([
      Property("Never")
    ], DropDownList2.prototype, "floatLabelType", void 0);
    __decorate$o([
      Property(false)
    ], DropDownList2.prototype, "showClearButton", void 0);
    __decorate$o([
      Event$1()
    ], DropDownList2.prototype, "filtering", void 0);
    __decorate$o([
      Event$1()
    ], DropDownList2.prototype, "change", void 0);
    __decorate$o([
      Event$1()
    ], DropDownList2.prototype, "beforeOpen", void 0);
    __decorate$o([
      Event$1()
    ], DropDownList2.prototype, "open", void 0);
    __decorate$o([
      Event$1()
    ], DropDownList2.prototype, "close", void 0);
    __decorate$o([
      Event$1()
    ], DropDownList2.prototype, "blur", void 0);
    __decorate$o([
      Event$1()
    ], DropDownList2.prototype, "focus", void 0);
    DropDownList2 = __decorate$o([
      NotifyPropertyChanges
    ], DropDownList2);
    return DropDownList2;
  }(DropDownBase)
);
var __extends$y = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$n = globalThis && globalThis.__decorate || function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i = decorators.length - 1; i >= 0; i--)
      if (d = decorators[i])
        r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var CLS_ROOT$2 = "e-hscroll";
var CLS_RTL$4 = "e-rtl";
var CLS_DISABLE$4 = "e-overlay";
var CLS_HSCROLLBAR$1 = "e-hscroll-bar";
var CLS_HSCROLLCON = "e-hscroll-content";
var CLS_NAVARROW$1 = "e-nav-arrow";
var CLS_NAVRIGHTARROW = "e-nav-right-arrow";
var CLS_NAVLEFTARROW = "e-nav-left-arrow";
var CLS_HSCROLLNAV = "e-scroll-nav";
var CLS_HSCROLLNAVRIGHT = "e-scroll-right-nav";
var CLS_HSCROLLNAVLEFT = "e-scroll-left-nav";
var CLS_DEVICE$1 = "e-scroll-device";
var CLS_OVERLAY$2 = "e-scroll-overlay";
var CLS_RIGHTOVERLAY = "e-scroll-right-overlay";
var CLS_LEFTOVERLAY = "e-scroll-left-overlay";
var OVERLAY_MAXWID$1 = 40;
var HScroll = (
  /** @class */
  function(_super) {
    __extends$y(HScroll2, _super);
    function HScroll2(options, element2) {
      return _super.call(this, options, element2) || this;
    }
    HScroll2.prototype.preRender = function() {
      this.browser = Browser.info.name;
      this.browserCheck = this.browser === "mozilla";
      this.isDevice = Browser.isDevice;
      this.customStep = true;
      var element2 = this.element;
      this.ieCheck = this.browser === "edge" || this.browser === "msie";
      this.initialize();
      if (element2.id === "") {
        element2.id = getUniqueID("hscroll");
        this.uniqueId = true;
      }
      element2.style.display = "block";
      if (this.enableRtl) {
        element2.classList.add(CLS_RTL$4);
      }
    };
    HScroll2.prototype.render = function() {
      this.touchModule = new Touch(this.element, { scroll: this.touchHandler.bind(this), swipe: this.swipeHandler.bind(this) });
      EventHandler.add(this.scrollEle, "scroll", this.scrollHandler, this);
      if (!this.isDevice) {
        this.createNavIcon(this.element);
      } else {
        this.element.classList.add(CLS_DEVICE$1);
        this.createOverlay(this.element);
      }
      this.setScrollState();
    };
    HScroll2.prototype.setScrollState = function() {
      if (isNullOrUndefined(this.scrollStep) || this.scrollStep < 0) {
        this.scrollStep = this.scrollEle.offsetWidth;
        this.customStep = false;
      } else {
        this.customStep = true;
      }
    };
    HScroll2.prototype.initialize = function() {
      var scrollEle = this.createElement("div", { className: CLS_HSCROLLCON });
      var scrollDiv = this.createElement("div", { className: CLS_HSCROLLBAR$1 });
      scrollDiv.setAttribute("tabindex", "-1");
      var ele = this.element;
      var innerEle = [].slice.call(ele.children);
      for (var _i = 0, innerEle_1 = innerEle; _i < innerEle_1.length; _i++) {
        var ele_1 = innerEle_1[_i];
        scrollEle.appendChild(ele_1);
      }
      scrollDiv.appendChild(scrollEle);
      ele.appendChild(scrollDiv);
      scrollDiv.style.overflowX = "hidden";
      this.scrollEle = scrollDiv;
      this.scrollItems = scrollEle;
    };
    HScroll2.prototype.getPersistData = function() {
      var keyEntity = ["scrollStep"];
      return this.addOnPersist(keyEntity);
    };
    HScroll2.prototype.getModuleName = function() {
      return "hScroll";
    };
    HScroll2.prototype.destroy = function() {
      var ele = this.element;
      ele.style.display = "";
      ele.classList.remove(CLS_ROOT$2);
      ele.classList.remove(CLS_DEVICE$1);
      var nav = selectAll(".e-" + ele.id + "_nav." + CLS_HSCROLLNAV, ele);
      var overlay = selectAll("." + CLS_OVERLAY$2, ele);
      [].slice.call(overlay).forEach(function(ele2) {
        detach(ele2);
      });
      for (var _i = 0, _a = [].slice.call(this.scrollItems.children); _i < _a.length; _i++) {
        var elem = _a[_i];
        ele.appendChild(elem);
      }
      if (this.uniqueId) {
        this.element.removeAttribute("id");
      }
      detach(this.scrollEle);
      if (nav.length > 0) {
        detach(nav[0]);
        if (!isNullOrUndefined(nav[1])) {
          detach(nav[1]);
        }
      }
      EventHandler.remove(this.scrollEle, "scroll", this.scrollHandler);
      this.touchModule.destroy();
      this.touchModule = null;
      _super.prototype.destroy.call(this);
    };
    HScroll2.prototype.disable = function(value) {
      var navEles = selectAll(".e-scroll-nav:not(." + CLS_DISABLE$4 + ")", this.element);
      if (value) {
        this.element.classList.add(CLS_DISABLE$4);
      } else {
        this.element.classList.remove(CLS_DISABLE$4);
      }
      [].slice.call(navEles).forEach(function(el) {
        el.setAttribute("tabindex", !value ? "0" : "-1");
      });
    };
    HScroll2.prototype.createOverlay = function(element2) {
      var id = element2.id.concat("_nav");
      var rightOverlayEle = this.createElement("div", { className: CLS_OVERLAY$2 + " " + CLS_RIGHTOVERLAY });
      var clsRight = "e-" + element2.id.concat("_nav " + CLS_HSCROLLNAV + " " + CLS_HSCROLLNAVRIGHT);
      var rightEle = this.createElement("div", { id: id.concat("_right"), className: clsRight });
      var navItem = this.createElement("div", { className: CLS_NAVRIGHTARROW + " " + CLS_NAVARROW$1 + " e-icons" });
      rightEle.appendChild(navItem);
      var leftEle = this.createElement("div", { className: CLS_OVERLAY$2 + " " + CLS_LEFTOVERLAY });
      if (this.ieCheck) {
        rightEle.classList.add("e-ie-align");
      }
      element2.appendChild(rightOverlayEle);
      element2.appendChild(rightEle);
      element2.insertBefore(leftEle, element2.firstChild);
      this.eventBinding([rightEle]);
    };
    HScroll2.prototype.createNavIcon = function(element2) {
      var id = element2.id.concat("_nav");
      var clsRight = "e-" + element2.id.concat("_nav " + CLS_HSCROLLNAV + " " + CLS_HSCROLLNAVRIGHT);
      var rightAttributes = { "role": "button", "id": id.concat("_right"), "aria-label": "Scroll right" };
      var nav = this.createElement("div", { className: clsRight, attrs: rightAttributes });
      nav.setAttribute("aria-disabled", "false");
      var navItem = this.createElement("div", { className: CLS_NAVRIGHTARROW + " " + CLS_NAVARROW$1 + " e-icons" });
      var clsLeft = "e-" + element2.id.concat("_nav " + CLS_HSCROLLNAV + " " + CLS_HSCROLLNAVLEFT);
      var leftAttributes = { "role": "button", "id": id.concat("_left"), "aria-label": "Scroll left" };
      var navEle = this.createElement("div", { className: clsLeft + " " + CLS_DISABLE$4, attrs: leftAttributes });
      navEle.setAttribute("aria-disabled", "true");
      var navLeftItem = this.createElement("div", { className: CLS_NAVLEFTARROW + " " + CLS_NAVARROW$1 + " e-icons" });
      navEle.appendChild(navLeftItem);
      nav.appendChild(navItem);
      element2.appendChild(nav);
      element2.insertBefore(navEle, element2.firstChild);
      if (this.ieCheck) {
        nav.classList.add("e-ie-align");
        navEle.classList.add("e-ie-align");
      }
      this.eventBinding([nav, navEle]);
    };
    HScroll2.prototype.onKeyPress = function(e) {
      var _this = this;
      if (e.key === "Enter") {
        var timeoutFun_1 = function() {
          _this.keyTimeout = true;
          _this.eleScrolling(10, e.target, true);
        };
        this.keyTimer = window.setTimeout(function() {
          timeoutFun_1();
        }, 100);
      }
    };
    HScroll2.prototype.onKeyUp = function(e) {
      if (e.key !== "Enter") {
        return;
      }
      if (this.keyTimeout) {
        this.keyTimeout = false;
      } else {
        e.target.click();
      }
      clearTimeout(this.keyTimer);
    };
    HScroll2.prototype.eventBinding = function(ele) {
      var _this = this;
      [].slice.call(ele).forEach(function(el) {
        new Touch(el, { tapHold: _this.tabHoldHandler.bind(_this), tapHoldThreshold: 500 });
        el.addEventListener("keydown", _this.onKeyPress.bind(_this));
        el.addEventListener("keyup", _this.onKeyUp.bind(_this));
        el.addEventListener("mouseup", _this.repeatScroll.bind(_this));
        el.addEventListener("touchend", _this.repeatScroll.bind(_this));
        el.addEventListener("contextmenu", function(e) {
          e.preventDefault();
        });
        EventHandler.add(el, "click", _this.clickEventHandler, _this);
      });
    };
    HScroll2.prototype.repeatScroll = function() {
      clearInterval(this.timeout);
    };
    HScroll2.prototype.tabHoldHandler = function(e) {
      var _this = this;
      var trgt = e.originalEvent.target;
      trgt = this.contains(trgt, CLS_HSCROLLNAV) ? trgt.firstElementChild : trgt;
      var scrollDis = 10;
      var timeoutFun = function() {
        _this.eleScrolling(scrollDis, trgt, true);
      };
      this.timeout = window.setInterval(function() {
        timeoutFun();
      }, 50);
    };
    HScroll2.prototype.contains = function(ele, className) {
      return ele.classList.contains(className);
    };
    HScroll2.prototype.eleScrolling = function(scrollDis, trgt, isContinuous) {
      var rootEle = this.element;
      var classList2 = trgt.classList;
      if (classList2.contains(CLS_HSCROLLNAV)) {
        classList2 = trgt.querySelector("." + CLS_NAVARROW$1).classList;
      }
      if (this.contains(rootEle, CLS_RTL$4) && this.browserCheck) {
        scrollDis = -scrollDis;
      }
      if (!this.contains(rootEle, CLS_RTL$4) || this.browserCheck || this.ieCheck) {
        if (classList2.contains(CLS_NAVRIGHTARROW)) {
          this.frameScrollRequest(scrollDis, "add", isContinuous);
        } else {
          this.frameScrollRequest(scrollDis, "", isContinuous);
        }
      } else {
        if (classList2.contains(CLS_NAVLEFTARROW)) {
          this.frameScrollRequest(scrollDis, "add", isContinuous);
        } else {
          this.frameScrollRequest(scrollDis, "", isContinuous);
        }
      }
    };
    HScroll2.prototype.clickEventHandler = function(e) {
      this.eleScrolling(this.scrollStep, e.target, false);
    };
    HScroll2.prototype.swipeHandler = function(e) {
      var swipeEle = this.scrollEle;
      var distance;
      if (e.velocity <= 1) {
        distance = e.distanceX / (e.velocity * 10);
      } else {
        distance = e.distanceX / e.velocity;
      }
      var start = 0.5;
      var animate = function() {
        var step = Math.sin(start);
        if (step <= 0) {
          window.cancelAnimationFrame(step);
        } else {
          if (e.swipeDirection === "Left") {
            swipeEle.scrollLeft += distance * step;
          } else if (e.swipeDirection === "Right") {
            swipeEle.scrollLeft -= distance * step;
          }
          start -= 0.5;
          window.requestAnimationFrame(animate);
        }
      };
      animate();
    };
    HScroll2.prototype.scrollUpdating = function(scrollVal, action) {
      if (action === "add") {
        this.scrollEle.scrollLeft += scrollVal;
      } else {
        this.scrollEle.scrollLeft -= scrollVal;
      }
      if (this.enableRtl && this.scrollEle.scrollLeft > 0) {
        this.scrollEle.scrollLeft = 0;
      }
    };
    HScroll2.prototype.frameScrollRequest = function(scrollVal, action, isContinuous) {
      var _this = this;
      var step = 10;
      if (isContinuous) {
        this.scrollUpdating(scrollVal, action);
        return;
      }
      if (!this.customStep) {
        [].slice.call(selectAll("." + CLS_OVERLAY$2, this.element)).forEach(function(el) {
          scrollVal -= el.offsetWidth;
        });
      }
      var animate = function() {
        var scrollValue;
        var scrollStep;
        if (_this.contains(_this.element, CLS_RTL$4) && _this.browserCheck) {
          scrollValue = -scrollVal;
          scrollStep = -step;
        } else {
          scrollValue = scrollVal;
          scrollStep = step;
        }
        if (scrollValue < step) {
          window.cancelAnimationFrame(scrollStep);
        } else {
          _this.scrollUpdating(scrollStep, action);
          scrollVal -= scrollStep;
          window.requestAnimationFrame(animate);
        }
      };
      animate();
    };
    HScroll2.prototype.touchHandler = function(e) {
      var ele = this.scrollEle;
      var distance = e.distanceX;
      if (this.ieCheck && this.contains(this.element, CLS_RTL$4)) {
        distance = -distance;
      }
      if (e.scrollDirection === "Left") {
        ele.scrollLeft = ele.scrollLeft + distance;
      } else if (e.scrollDirection === "Right") {
        ele.scrollLeft = ele.scrollLeft - distance;
      }
    };
    HScroll2.prototype.arrowDisabling = function(addDisable, removeDisable) {
      if (this.isDevice) {
        var arrowEle = isNullOrUndefined(addDisable) ? removeDisable : addDisable;
        var arrowIcon = arrowEle.querySelector("." + CLS_NAVARROW$1);
        if (isNullOrUndefined(addDisable)) {
          classList(arrowIcon, [CLS_NAVRIGHTARROW], [CLS_NAVLEFTARROW]);
        } else {
          classList(arrowIcon, [CLS_NAVLEFTARROW], [CLS_NAVRIGHTARROW]);
        }
      } else if (addDisable && removeDisable) {
        addDisable.classList.add(CLS_DISABLE$4);
        addDisable.setAttribute("aria-disabled", "true");
        addDisable.removeAttribute("tabindex");
        removeDisable.classList.remove(CLS_DISABLE$4);
        removeDisable.setAttribute("aria-disabled", "false");
        removeDisable.setAttribute("tabindex", "0");
      }
      this.repeatScroll();
    };
    HScroll2.prototype.scrollHandler = function(e) {
      var target = e.target;
      var width = target.offsetWidth;
      this.element;
      var navLeftEle = this.element.querySelector("." + CLS_HSCROLLNAVLEFT);
      var navRightEle = this.element.querySelector("." + CLS_HSCROLLNAVRIGHT);
      var leftOverlay = this.element.querySelector("." + CLS_LEFTOVERLAY);
      var rightOverlay = this.element.querySelector("." + CLS_RIGHTOVERLAY);
      var scrollLeft = target.scrollLeft;
      if (scrollLeft <= 0) {
        scrollLeft = -scrollLeft;
      }
      if (this.isDevice) {
        if (this.enableRtl && !(this.browserCheck || this.ieCheck)) {
          leftOverlay = this.element.querySelector("." + CLS_RIGHTOVERLAY);
          rightOverlay = this.element.querySelector("." + CLS_LEFTOVERLAY);
        }
        if (scrollLeft < OVERLAY_MAXWID$1) {
          leftOverlay.style.width = scrollLeft + "px";
        } else {
          leftOverlay.style.width = "40px";
        }
        if (target.scrollWidth - Math.ceil(width + scrollLeft) < OVERLAY_MAXWID$1) {
          rightOverlay.style.width = target.scrollWidth - Math.ceil(width + scrollLeft) + "px";
        } else {
          rightOverlay.style.width = "40px";
        }
      }
      if (scrollLeft === 0) {
        this.arrowDisabling(navLeftEle, navRightEle);
      } else if (Math.ceil(width + scrollLeft + 0.1) >= target.scrollWidth) {
        this.arrowDisabling(navRightEle, navLeftEle);
      } else {
        var disEle = this.element.querySelector("." + CLS_HSCROLLNAV + "." + CLS_DISABLE$4);
        if (disEle) {
          disEle.classList.remove(CLS_DISABLE$4);
          disEle.setAttribute("aria-disabled", "false");
          disEle.setAttribute("tabindex", "0");
        }
      }
    };
    HScroll2.prototype.onPropertyChanged = function(newProp, oldProp) {
      for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {
        var prop = _a[_i];
        switch (prop) {
          case "scrollStep":
            this.setScrollState();
            break;
          case "enableRtl":
            newProp.enableRtl ? this.element.classList.add(CLS_RTL$4) : this.element.classList.remove(CLS_RTL$4);
            break;
        }
      }
    };
    __decorate$n([
      Property(null)
    ], HScroll2.prototype, "scrollStep", void 0);
    HScroll2 = __decorate$n([
      NotifyPropertyChanges
    ], HScroll2);
    return HScroll2;
  }(Component)
);
var __extends$x = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$m = globalThis && globalThis.__decorate || function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i = decorators.length - 1; i >= 0; i--)
      if (d = decorators[i])
        r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var CLS_ROOT$1 = "e-vscroll";
var CLS_RTL$3 = "e-rtl";
var CLS_DISABLE$3 = "e-overlay";
var CLS_VSCROLLBAR = "e-vscroll-bar";
var CLS_VSCROLLCON = "e-vscroll-content";
var CLS_NAVARROW = "e-nav-arrow";
var CLS_NAVUPARROW = "e-nav-up-arrow";
var CLS_NAVDOWNARROW = "e-nav-down-arrow";
var CLS_VSCROLLNAV = "e-scroll-nav";
var CLS_VSCROLLNAVUP = "e-scroll-up-nav";
var CLS_VSCROLLNAVDOWN = "e-scroll-down-nav";
var CLS_DEVICE = "e-scroll-device";
var CLS_OVERLAY$1 = "e-scroll-overlay";
var CLS_UPOVERLAY = "e-scroll-up-overlay";
var CLS_DOWNOVERLAY = "e-scroll-down-overlay";
var OVERLAY_MAXWID = 40;
var VScroll = (
  /** @class */
  function(_super) {
    __extends$x(VScroll2, _super);
    function VScroll2(options, element2) {
      return _super.call(this, options, element2) || this;
    }
    VScroll2.prototype.preRender = function() {
      this.browser = Browser.info.name;
      this.browserCheck = this.browser === "mozilla";
      this.isDevice = Browser.isDevice;
      this.customStep = true;
      var ele = this.element;
      this.ieCheck = this.browser === "edge" || this.browser === "msie";
      this.initialize();
      if (ele.id === "") {
        ele.id = getUniqueID("vscroll");
        this.uniqueId = true;
      }
      ele.style.display = "block";
      if (this.enableRtl) {
        ele.classList.add(CLS_RTL$3);
      }
    };
    VScroll2.prototype.render = function() {
      this.touchModule = new Touch(this.element, { scroll: this.touchHandler.bind(this), swipe: this.swipeHandler.bind(this) });
      EventHandler.add(this.scrollEle, "scroll", this.scrollEventHandler, this);
      if (!this.isDevice) {
        this.createNavIcon(this.element);
      } else {
        this.element.classList.add(CLS_DEVICE);
        this.createOverlayElement(this.element);
      }
      this.setScrollState();
      EventHandler.add(this.element, "wheel", this.wheelEventHandler, this);
    };
    VScroll2.prototype.setScrollState = function() {
      if (isNullOrUndefined(this.scrollStep) || this.scrollStep < 0) {
        this.scrollStep = this.scrollEle.offsetHeight;
        this.customStep = false;
      } else {
        this.customStep = true;
      }
    };
    VScroll2.prototype.initialize = function() {
      var scrollCnt = createElement("div", { className: CLS_VSCROLLCON });
      var scrollBar = createElement("div", { className: CLS_VSCROLLBAR });
      scrollBar.setAttribute("tabindex", "-1");
      var ele = this.element;
      var innerEle = [].slice.call(ele.children);
      for (var _i = 0, innerEle_1 = innerEle; _i < innerEle_1.length; _i++) {
        var ele_1 = innerEle_1[_i];
        scrollCnt.appendChild(ele_1);
      }
      scrollBar.appendChild(scrollCnt);
      ele.appendChild(scrollBar);
      scrollBar.style.overflow = "hidden";
      this.scrollEle = scrollBar;
      this.scrollItems = scrollCnt;
    };
    VScroll2.prototype.getPersistData = function() {
      var keyEntity = ["scrollStep"];
      return this.addOnPersist(keyEntity);
    };
    VScroll2.prototype.getModuleName = function() {
      return "vScroll";
    };
    VScroll2.prototype.destroy = function() {
      var el = this.element;
      el.style.display = "";
      removeClass([this.element], [CLS_ROOT$1, CLS_DEVICE]);
      var navs = selectAll(".e-" + el.id + "_nav." + CLS_VSCROLLNAV, el);
      var overlays = selectAll("." + CLS_OVERLAY$1, el);
      [].slice.call(overlays).forEach(function(ele) {
        detach(ele);
      });
      for (var _i = 0, _a = [].slice.call(this.scrollItems.children); _i < _a.length; _i++) {
        var elem = _a[_i];
        el.appendChild(elem);
      }
      if (this.uniqueId) {
        this.element.removeAttribute("id");
      }
      detach(this.scrollEle);
      if (navs.length > 0) {
        detach(navs[0]);
        if (!isNullOrUndefined(navs[1])) {
          detach(navs[1]);
        }
      }
      EventHandler.remove(this.scrollEle, "scroll", this.scrollEventHandler);
      this.touchModule.destroy();
      this.touchModule = null;
      _super.prototype.destroy.call(this);
    };
    VScroll2.prototype.disable = function(value) {
      var navEle = selectAll(".e-scroll-nav:not(." + CLS_DISABLE$3 + ")", this.element);
      if (value) {
        this.element.classList.add(CLS_DISABLE$3);
      } else {
        this.element.classList.remove(CLS_DISABLE$3);
      }
      [].slice.call(navEle).forEach(function(el) {
        el.setAttribute("tabindex", !value ? "0" : "-1");
      });
    };
    VScroll2.prototype.createOverlayElement = function(element2) {
      var id = element2.id.concat("_nav");
      var downOverlayEle = createElement("div", { className: CLS_OVERLAY$1 + " " + CLS_DOWNOVERLAY });
      var clsDown = "e-" + element2.id.concat("_nav " + CLS_VSCROLLNAV + " " + CLS_VSCROLLNAVDOWN);
      var downEle = createElement("div", { id: id.concat("down"), className: clsDown });
      var navItem = createElement("div", { className: CLS_NAVDOWNARROW + " " + CLS_NAVARROW + " e-icons" });
      downEle.appendChild(navItem);
      var upEle = createElement("div", { className: CLS_OVERLAY$1 + " " + CLS_UPOVERLAY });
      if (this.ieCheck) {
        downEle.classList.add("e-ie-align");
      }
      element2.appendChild(downOverlayEle);
      element2.appendChild(downEle);
      element2.insertBefore(upEle, element2.firstChild);
      this.eventBinding([downEle]);
    };
    VScroll2.prototype.createNavIcon = function(element2) {
      var id = element2.id.concat("_nav");
      var clsDown = "e-" + element2.id.concat("_nav " + CLS_VSCROLLNAV + " " + CLS_VSCROLLNAVDOWN);
      var nav = createElement("div", { id: id.concat("_down"), className: clsDown });
      nav.setAttribute("aria-disabled", "false");
      var navItem = createElement("div", { className: CLS_NAVDOWNARROW + " " + CLS_NAVARROW + " e-icons" });
      var clsUp = "e-" + element2.id.concat("_nav " + CLS_VSCROLLNAV + " " + CLS_VSCROLLNAVUP);
      var navElement = createElement("div", { id: id.concat("_up"), className: clsUp + " " + CLS_DISABLE$3 });
      navElement.setAttribute("aria-disabled", "true");
      var navUpItem = createElement("div", { className: CLS_NAVUPARROW + " " + CLS_NAVARROW + " e-icons" });
      navElement.appendChild(navUpItem);
      nav.appendChild(navItem);
      nav.setAttribute("tabindex", "0");
      element2.appendChild(nav);
      element2.insertBefore(navElement, element2.firstChild);
      if (this.ieCheck) {
        nav.classList.add("e-ie-align");
        navElement.classList.add("e-ie-align");
      }
      this.eventBinding([nav, navElement]);
    };
    VScroll2.prototype.onKeyPress = function(ev) {
      var _this = this;
      if (ev.key === "Enter") {
        var timeoutFun_1 = function() {
          _this.keyTimeout = true;
          _this.eleScrolling(10, ev.target, true);
        };
        this.keyTimer = window.setTimeout(function() {
          timeoutFun_1();
        }, 100);
      }
    };
    VScroll2.prototype.onKeyUp = function(ev) {
      if (ev.key !== "Enter") {
        return;
      }
      if (this.keyTimeout) {
        this.keyTimeout = false;
      } else {
        ev.target.click();
      }
      clearTimeout(this.keyTimer);
    };
    VScroll2.prototype.eventBinding = function(element2) {
      var _this = this;
      [].slice.call(element2).forEach(function(ele) {
        new Touch(ele, { tapHold: _this.tabHoldHandler.bind(_this), tapHoldThreshold: 500 });
        ele.addEventListener("keydown", _this.onKeyPress.bind(_this));
        ele.addEventListener("keyup", _this.onKeyUp.bind(_this));
        ele.addEventListener("mouseup", _this.repeatScroll.bind(_this));
        ele.addEventListener("touchend", _this.repeatScroll.bind(_this));
        ele.addEventListener("contextmenu", function(e) {
          e.preventDefault();
        });
        EventHandler.add(ele, "click", _this.clickEventHandler, _this);
      });
    };
    VScroll2.prototype.repeatScroll = function() {
      clearInterval(this.timeout);
    };
    VScroll2.prototype.tabHoldHandler = function(ev) {
      var _this = this;
      var trgt = ev.originalEvent.target;
      trgt = this.contains(trgt, CLS_VSCROLLNAV) ? trgt.firstElementChild : trgt;
      var scrollDistance = 10;
      var timeoutFun = function() {
        _this.eleScrolling(scrollDistance, trgt, true);
      };
      this.timeout = window.setInterval(function() {
        timeoutFun();
      }, 50);
    };
    VScroll2.prototype.contains = function(element2, className) {
      return element2.classList.contains(className);
    };
    VScroll2.prototype.eleScrolling = function(scrollDis, trgt, isContinuous) {
      var classList2 = trgt.classList;
      if (classList2.contains(CLS_VSCROLLNAV)) {
        classList2 = trgt.querySelector("." + CLS_NAVARROW).classList;
      }
      if (classList2.contains(CLS_NAVDOWNARROW)) {
        this.frameScrollRequest(scrollDis, "add", isContinuous);
      } else if (classList2.contains(CLS_NAVUPARROW)) {
        this.frameScrollRequest(scrollDis, "", isContinuous);
      }
    };
    VScroll2.prototype.clickEventHandler = function(event) {
      this.eleScrolling(this.scrollStep, event.target, false);
    };
    VScroll2.prototype.wheelEventHandler = function(e) {
      e.preventDefault();
      this.frameScrollRequest(this.scrollStep, e.deltaY > 0 ? "add" : "", false);
    };
    VScroll2.prototype.swipeHandler = function(e) {
      var swipeElement = this.scrollEle;
      var distance;
      if (e.velocity <= 1) {
        distance = e.distanceY / (e.velocity * 10);
      } else {
        distance = e.distanceY / e.velocity;
      }
      var start = 0.5;
      var animate = function() {
        var step = Math.sin(start);
        if (step <= 0) {
          window.cancelAnimationFrame(step);
        } else {
          if (e.swipeDirection === "Up") {
            swipeElement.scrollTop += distance * step;
          } else if (e.swipeDirection === "Down") {
            swipeElement.scrollTop -= distance * step;
          }
          start -= 0.02;
          window.requestAnimationFrame(animate);
        }
      };
      animate();
    };
    VScroll2.prototype.scrollUpdating = function(scrollVal, action) {
      if (action === "add") {
        this.scrollEle.scrollTop += scrollVal;
      } else {
        this.scrollEle.scrollTop -= scrollVal;
      }
    };
    VScroll2.prototype.frameScrollRequest = function(scrollValue, action, isContinuous) {
      var _this = this;
      var step = 10;
      if (isContinuous) {
        this.scrollUpdating(scrollValue, action);
        return;
      }
      if (!this.customStep) {
        [].slice.call(selectAll("." + CLS_OVERLAY$1, this.element)).forEach(function(el) {
          scrollValue -= el.offsetHeight;
        });
      }
      var animate = function() {
        if (scrollValue < step) {
          window.cancelAnimationFrame(step);
        } else {
          _this.scrollUpdating(step, action);
          scrollValue -= step;
          window.requestAnimationFrame(animate);
        }
      };
      animate();
    };
    VScroll2.prototype.touchHandler = function(e) {
      var el = this.scrollEle;
      var distance = e.distanceY;
      if (e.scrollDirection === "Up") {
        el.scrollTop = el.scrollTop + distance;
      } else if (e.scrollDirection === "Down") {
        el.scrollTop = el.scrollTop - distance;
      }
    };
    VScroll2.prototype.arrowDisabling = function(addDisableCls, removeDisableCls) {
      if (this.isDevice) {
        var arrowEle = isNullOrUndefined(addDisableCls) ? removeDisableCls : addDisableCls;
        var arrowIcon = arrowEle.querySelector("." + CLS_NAVARROW);
        if (isNullOrUndefined(addDisableCls)) {
          classList(arrowIcon, [CLS_NAVDOWNARROW], [CLS_NAVUPARROW]);
        } else {
          classList(arrowIcon, [CLS_NAVUPARROW], [CLS_NAVDOWNARROW]);
        }
      } else {
        addDisableCls.classList.add(CLS_DISABLE$3);
        addDisableCls.setAttribute("aria-disabled", "true");
        addDisableCls.removeAttribute("tabindex");
        removeDisableCls.classList.remove(CLS_DISABLE$3);
        removeDisableCls.setAttribute("aria-disabled", "false");
        removeDisableCls.setAttribute("tabindex", "0");
      }
      this.repeatScroll();
    };
    VScroll2.prototype.scrollEventHandler = function(e) {
      var target = e.target;
      var height = target.offsetHeight;
      var navUpEle = this.element.querySelector("." + CLS_VSCROLLNAVUP);
      var navDownEle = this.element.querySelector("." + CLS_VSCROLLNAVDOWN);
      var upOverlay = this.element.querySelector("." + CLS_UPOVERLAY);
      var downOverlay = this.element.querySelector("." + CLS_DOWNOVERLAY);
      var scrollTop = target.scrollTop;
      if (scrollTop <= 0) {
        scrollTop = -scrollTop;
      }
      if (this.isDevice) {
        if (scrollTop < OVERLAY_MAXWID) {
          upOverlay.style.height = scrollTop + "px";
        } else {
          upOverlay.style.height = "40px";
        }
        if (target.scrollHeight - Math.ceil(height + scrollTop) < OVERLAY_MAXWID) {
          downOverlay.style.height = target.scrollHeight - Math.ceil(height + scrollTop) + "px";
        } else {
          downOverlay.style.height = "40px";
        }
      }
      if (scrollTop === 0) {
        this.arrowDisabling(navUpEle, navDownEle);
      } else if (Math.ceil(height + scrollTop + 0.1) >= target.scrollHeight) {
        this.arrowDisabling(navDownEle, navUpEle);
      } else {
        var disEle = this.element.querySelector("." + CLS_VSCROLLNAV + "." + CLS_DISABLE$3);
        if (disEle) {
          disEle.classList.remove(CLS_DISABLE$3);
          disEle.setAttribute("aria-disabled", "false");
          disEle.setAttribute("tabindex", "0");
        }
      }
    };
    VScroll2.prototype.onPropertyChanged = function(newProp, oldProp) {
      for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {
        var prop = _a[_i];
        switch (prop) {
          case "scrollStep":
            this.setScrollState();
            break;
          case "enableRtl":
            if (newProp.enableRtl) {
              this.element.classList.add(CLS_RTL$3);
            } else {
              this.element.classList.remove(CLS_RTL$3);
            }
            break;
        }
      }
    };
    __decorate$m([
      Property(null)
    ], VScroll2.prototype, "scrollStep", void 0);
    VScroll2 = __decorate$m([
      NotifyPropertyChanges
    ], VScroll2);
    return VScroll2;
  }(Component)
);
var __extends$w = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$l = globalThis && globalThis.__decorate || function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i = decorators.length - 1; i >= 0; i--)
      if (d = decorators[i])
        r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var CLS_VERTICAL$1 = "e-vertical";
var CLS_ITEMS$1 = "e-toolbar-items";
var CLS_ITEM$2 = "e-toolbar-item";
var CLS_RTL$2 = "e-rtl";
var CLS_SEPARATOR = "e-separator";
var CLS_POPUPICON = "e-popup-up-icon";
var CLS_POPUPDOWN = "e-popup-down-icon";
var CLS_POPUPOPEN = "e-popup-open";
var CLS_TEMPLATE$1 = "e-template";
var CLS_DISABLE$2 = "e-overlay";
var CLS_POPUPTEXT = "e-toolbar-text";
var CLS_TBARTEXT = "e-popup-text";
var CLS_TBAROVERFLOW = "e-overflow-show";
var CLS_POPOVERFLOW = "e-overflow-hide";
var CLS_TBARBTN = "e-tbar-btn";
var CLS_TBARNAV = "e-hor-nav";
var CLS_TBARSCRLNAV = "e-scroll-nav";
var CLS_TBARRIGHT = "e-toolbar-right";
var CLS_TBARLEFT = "e-toolbar-left";
var CLS_TBARCENTER = "e-toolbar-center";
var CLS_TBARPOS = "e-tbar-pos";
var CLS_HSCROLLCNT = "e-hscroll-content";
var CLS_VSCROLLCNT = "e-vscroll-content";
var CLS_HSCROLLBAR = "e-hscroll-bar";
var CLS_POPUPNAV = "e-hor-nav";
var CLS_POPUPCLASS = "e-toolbar-pop";
var CLS_POPUP = "e-toolbar-popup";
var CLS_TBARBTNTEXT = "e-tbar-btn-text";
var CLS_TBARNAVACT = "e-nav-active";
var CLS_TBARIGNORE = "e-ignore";
var CLS_POPPRI = "e-popup-alone";
var CLS_HIDDEN$1 = "e-hidden";
var CLS_MULTIROW = "e-toolbar-multirow";
var CLS_MULTIROWPOS = "e-multirow-pos";
var CLS_MULTIROW_SEPARATOR = "e-multirow-separator";
var CLS_EXTENDABLE_SEPARATOR = "e-extended-separator";
var CLS_EXTEANDABLE_TOOLBAR = "e-extended-toolbar";
var CLS_EXTENDABLECLASS = "e-toolbar-extended";
var CLS_EXTENDPOPUP = "e-expended-nav";
var CLS_EXTENDEDPOPOPEN = "e-tbar-extended";
var Item = (
  /** @class */
  function(_super) {
    __extends$w(Item2, _super);
    function Item2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$l([
      Property("")
    ], Item2.prototype, "id", void 0);
    __decorate$l([
      Property("")
    ], Item2.prototype, "text", void 0);
    __decorate$l([
      Property("auto")
    ], Item2.prototype, "width", void 0);
    __decorate$l([
      Property("")
    ], Item2.prototype, "cssClass", void 0);
    __decorate$l([
      Property(false)
    ], Item2.prototype, "showAlwaysInPopup", void 0);
    __decorate$l([
      Property(false)
    ], Item2.prototype, "disabled", void 0);
    __decorate$l([
      Property("")
    ], Item2.prototype, "prefixIcon", void 0);
    __decorate$l([
      Property("")
    ], Item2.prototype, "suffixIcon", void 0);
    __decorate$l([
      Property(true)
    ], Item2.prototype, "visible", void 0);
    __decorate$l([
      Property("None")
    ], Item2.prototype, "overflow", void 0);
    __decorate$l([
      Property("")
    ], Item2.prototype, "template", void 0);
    __decorate$l([
      Property("Button")
    ], Item2.prototype, "type", void 0);
    __decorate$l([
      Property("Both")
    ], Item2.prototype, "showTextOn", void 0);
    __decorate$l([
      Property(null)
    ], Item2.prototype, "htmlAttributes", void 0);
    __decorate$l([
      Property("")
    ], Item2.prototype, "tooltipText", void 0);
    __decorate$l([
      Property("Left")
    ], Item2.prototype, "align", void 0);
    __decorate$l([
      Event$1()
    ], Item2.prototype, "click", void 0);
    __decorate$l([
      Property(-1)
    ], Item2.prototype, "tabIndex", void 0);
    return Item2;
  }(ChildProperty)
);
var Toolbar = (
  /** @class */
  function(_super) {
    __extends$w(Toolbar2, _super);
    function Toolbar2(options, element2) {
      var _this = _super.call(this, options, element2) || this;
      _this.resizeContext = _this.resize.bind(_this);
      _this.keyConfigs = {
        moveLeft: "leftarrow",
        moveRight: "rightarrow",
        moveUp: "uparrow",
        moveDown: "downarrow",
        popupOpen: "enter",
        popupClose: "escape",
        tab: "tab",
        home: "home",
        end: "end"
      };
      return _this;
    }
    Toolbar2.prototype.destroy = function() {
      var _this = this;
      if (this.isReact || this.isAngular) {
        this.clearTemplate();
      }
      var btnItems = this.element.querySelectorAll(".e-control.e-btn");
      [].slice.call(btnItems).forEach(function(el) {
        if (!isNullOrUndefined(el) && !isNullOrUndefined(el.ej2_instances) && !isNullOrUndefined(el.ej2_instances[0]) && !el.ej2_instances[0].isDestroyed) {
          el.ej2_instances[0].destroy();
        }
      });
      this.unwireEvents();
      this.tempId.forEach(function(ele) {
        if (!isNullOrUndefined(_this.element.querySelector(ele))) {
          document.body.appendChild(_this.element.querySelector(ele)).style.display = "none";
        }
      });
      this.destroyItems();
      while (this.element.lastElementChild) {
        this.element.removeChild(this.element.lastElementChild);
      }
      if (this.trgtEle) {
        this.element.appendChild(this.ctrlTem);
        this.trgtEle = null;
        this.ctrlTem = null;
      }
      if (this.popObj) {
        this.popObj.destroy();
        detach(this.popObj.element);
      }
      if (this.activeEle) {
        this.activeEle = null;
      }
      this.popObj = null;
      this.tbarAlign = null;
      this.tbarItemsCol = [];
      this.remove(this.element, "e-toolpop");
      if (this.cssClass) {
        removeClass([this.element], this.cssClass.split(" "));
      }
      this.element.removeAttribute("style");
      ["aria-disabled", "aria-orientation", "role"].forEach(function(attrb) {
        return _this.element.removeAttribute(attrb);
      });
      _super.prototype.destroy.call(this);
    };
    Toolbar2.prototype.preRender = function() {
      var eventArgs = { enableCollision: this.enableCollision, scrollStep: this.scrollStep };
      this.trigger("beforeCreate", eventArgs);
      this.enableCollision = eventArgs.enableCollision;
      this.scrollStep = eventArgs.scrollStep;
      this.scrollModule = null;
      this.popObj = null;
      this.tempId = [];
      this.tbarItemsCol = this.items;
      this.isVertical = this.element.classList.contains(CLS_VERTICAL$1) ? true : false;
      this.isExtendedOpen = false;
      this.popupPriCount = 0;
      if (this.enableRtl) {
        this.add(this.element, CLS_RTL$2);
      }
    };
    Toolbar2.prototype.wireEvents = function() {
      EventHandler.add(this.element, "click", this.clickHandler, this);
      window.addEventListener("resize", this.resizeContext);
      if (this.allowKeyboard) {
        this.wireKeyboardEvent();
      }
    };
    Toolbar2.prototype.wireKeyboardEvent = function() {
      this.keyModule = new KeyboardEvents(this.element, {
        keyAction: this.keyActionHandler.bind(this),
        keyConfigs: this.keyConfigs
      });
      EventHandler.add(this.element, "keydown", this.docKeyDown, this);
      this.updateTabIndex("0");
    };
    Toolbar2.prototype.updateTabIndex = function(tabIndex) {
      var ele = this.element.querySelector("." + CLS_ITEM$2 + ":not(." + CLS_DISABLE$2 + " ):not(." + CLS_SEPARATOR + " ):not(." + CLS_HIDDEN$1 + " )");
      if (!isNullOrUndefined(ele) && !isNullOrUndefined(ele.firstElementChild)) {
        var dataTabIndex = ele.firstElementChild.getAttribute("data-tabindex");
        if (dataTabIndex && dataTabIndex === "-1" && ele.firstElementChild.tagName !== "INPUT") {
          ele.firstElementChild.setAttribute("tabindex", tabIndex);
        }
      }
    };
    Toolbar2.prototype.unwireKeyboardEvent = function() {
      if (this.keyModule) {
        EventHandler.remove(this.element, "keydown", this.docKeyDown);
        this.keyModule.destroy();
        this.keyModule = null;
      }
    };
    Toolbar2.prototype.docKeyDown = function(e) {
      if (e.target.tagName === "INPUT") {
        return;
      }
      var popCheck = !isNullOrUndefined(this.popObj) && isVisible(this.popObj.element) && this.overflowMode !== "Extended";
      if (e.keyCode === 9 && e.target.classList.contains("e-hor-nav") === true && popCheck) {
        this.popObj.hide({ name: "FadeOut", duration: 100 });
      }
      var keyCheck = e.keyCode === 40 || e.keyCode === 38 || e.keyCode === 35 || e.keyCode === 36;
      if (keyCheck) {
        e.preventDefault();
      }
    };
    Toolbar2.prototype.unwireEvents = function() {
      EventHandler.remove(this.element, "click", this.clickHandler);
      this.destroyScroll();
      this.unwireKeyboardEvent();
      window.removeEventListener("resize", this.resizeContext);
      EventHandler.remove(document, "scroll", this.docEvent);
      EventHandler.remove(document, "click", this.docEvent);
    };
    Toolbar2.prototype.clearProperty = function() {
      this.tbarEle = [];
      this.tbarAlgEle = { lefts: [], centers: [], rights: [] };
    };
    Toolbar2.prototype.docEvent = function(e) {
      var popEle = closest(e.target, ".e-popup");
      if (this.popObj && isVisible(this.popObj.element) && !popEle && this.overflowMode === "Popup") {
        this.popObj.hide({ name: "FadeOut", duration: 100 });
      }
    };
    Toolbar2.prototype.destroyScroll = function() {
      if (this.scrollModule) {
        if (this.tbarAlign) {
          this.add(this.scrollModule.element, CLS_TBARPOS);
        }
        this.scrollModule.destroy();
        this.scrollModule = null;
      }
    };
    Toolbar2.prototype.destroyItems = function() {
      if (this.element) {
        [].slice.call(this.element.querySelectorAll("." + CLS_ITEM$2)).forEach(function(el) {
          detach(el);
        });
      }
      if (this.tbarAlign) {
        var tbarItems = this.element.querySelector("." + CLS_ITEMS$1);
        [].slice.call(tbarItems.children).forEach(function(el) {
          detach(el);
        });
        this.tbarAlign = false;
        this.remove(tbarItems, CLS_TBARPOS);
      }
      this.clearProperty();
    };
    Toolbar2.prototype.destroyMode = function() {
      if (this.scrollModule) {
        this.remove(this.scrollModule.element, CLS_RTL$2);
        this.destroyScroll();
      }
      this.remove(this.element, CLS_EXTENDEDPOPOPEN);
      this.remove(this.element, CLS_EXTEANDABLE_TOOLBAR);
      var tempEle = this.element.querySelector(".e-toolbar-multirow");
      if (tempEle) {
        this.remove(tempEle, CLS_MULTIROW);
      }
      if (this.popObj) {
        this.popupRefresh(this.popObj.element, true);
      }
    };
    Toolbar2.prototype.add = function(ele, val) {
      ele.classList.add(val);
    };
    Toolbar2.prototype.remove = function(ele, val) {
      ele.classList.remove(val);
    };
    Toolbar2.prototype.elementFocus = function(ele) {
      var fChild = ele.firstElementChild;
      if (fChild) {
        fChild.focus();
        this.activeEleSwitch(ele);
      } else {
        ele.focus();
      }
    };
    Toolbar2.prototype.clstElement = function(tbrNavChk, trgt) {
      var clst;
      if (tbrNavChk && this.popObj && isVisible(this.popObj.element)) {
        clst = this.popObj.element.querySelector("." + CLS_ITEM$2);
      } else if (this.element === trgt || tbrNavChk) {
        clst = this.element.querySelector("." + CLS_ITEM$2 + ":not(." + CLS_DISABLE$2 + " ):not(." + CLS_SEPARATOR + " ):not(." + CLS_HIDDEN$1 + " )");
      } else {
        clst = closest(trgt, "." + CLS_ITEM$2);
      }
      return clst;
    };
    Toolbar2.prototype.keyHandling = function(clst, e, trgt, navChk, scrollChk) {
      var popObj = this.popObj;
      var rootEle = this.element;
      var popAnimate = { name: "FadeOut", duration: 100 };
      var value = e.action === "moveUp" ? "previous" : "next";
      var ele;
      var nodes;
      switch (e.action) {
        case "moveRight":
          if (this.isVertical) {
            return;
          }
          if (rootEle === trgt) {
            this.elementFocus(clst);
          } else if (!navChk) {
            this.eleFocus(clst, "next");
          }
          break;
        case "moveLeft":
          if (this.isVertical) {
            return;
          }
          if (!navChk) {
            this.eleFocus(clst, "previous");
          }
          break;
        case "home":
        case "end":
          if (clst) {
            var popupCheck = closest(clst, ".e-popup");
            var extendedPopup = this.element.querySelector("." + CLS_EXTENDABLECLASS);
            if (this.overflowMode === "Extended" && extendedPopup && extendedPopup.classList.contains("e-popup-open")) {
              popupCheck = e.action === "end" ? extendedPopup : null;
            }
            if (popupCheck) {
              if (isVisible(this.popObj.element)) {
                nodes = [].slice.call(popupCheck.children);
                if (e.action === "home") {
                  ele = nodes[0];
                } else {
                  ele = nodes[nodes.length - 1];
                }
              }
            } else {
              nodes = this.element.querySelectorAll("." + CLS_ITEMS$1 + " ." + CLS_ITEM$2 + ":not(." + CLS_SEPARATOR + ")");
              if (e.action === "home") {
                ele = nodes[0];
              } else {
                ele = nodes[nodes.length - 1];
              }
            }
            if (ele) {
              this.elementFocus(ele);
            }
          }
          break;
        case "moveUp":
        case "moveDown":
          if (!this.isVertical) {
            if (popObj && closest(trgt, ".e-popup")) {
              var popEle = popObj.element;
              var popFrstEle = popEle.firstElementChild;
              if (value === "previous" && popFrstEle === clst) {
                popEle.lastElementChild.firstChild.focus();
              } else if (value === "next" && popEle.lastElementChild === clst) {
                popFrstEle.firstChild.focus();
              } else {
                this.eleFocus(clst, value);
              }
            } else if (e.action === "moveDown" && popObj && isVisible(popObj.element)) {
              this.elementFocus(clst);
            }
          } else {
            if (e.action === "moveUp") {
              this.eleFocus(clst, "previous");
            } else {
              this.eleFocus(clst, "next");
            }
          }
          break;
        case "tab":
          if (!scrollChk && !navChk) {
            var ele_1 = clst.firstElementChild;
            if (rootEle === trgt) {
              if (this.activeEle) {
                this.activeEle.focus();
              } else {
                this.activeEleRemove(ele_1);
                ele_1.focus();
              }
            }
          }
          break;
        case "popupClose":
          if (popObj && this.overflowMode !== "Extended") {
            popObj.hide(popAnimate);
          }
          break;
        case "popupOpen":
          if (!navChk) {
            return;
          }
          if (popObj && !isVisible(popObj.element)) {
            popObj.element.style.top = rootEle.offsetHeight + "px";
            popObj.show({ name: "FadeIn", duration: 100 });
          } else {
            popObj.hide(popAnimate);
          }
          break;
      }
    };
    Toolbar2.prototype.keyActionHandler = function(e) {
      var trgt = e.target;
      if (trgt.tagName === "INPUT" || trgt.tagName === "TEXTAREA" || this.element.classList.contains(CLS_DISABLE$2)) {
        return;
      }
      e.preventDefault();
      var tbrNavChk = trgt.classList.contains(CLS_TBARNAV);
      var tbarScrollChk = trgt.classList.contains(CLS_TBARSCRLNAV);
      var clst = this.clstElement(tbrNavChk, trgt);
      if (clst || tbarScrollChk) {
        this.keyHandling(clst, e, trgt, tbrNavChk, tbarScrollChk);
      }
    };
    Toolbar2.prototype.disable = function(value) {
      var rootEle = this.element;
      if (value) {
        rootEle.classList.add(CLS_DISABLE$2);
      } else {
        rootEle.classList.remove(CLS_DISABLE$2);
      }
      if (this.activeEle) {
        this.activeEle.setAttribute("tabindex", this.activeEle.getAttribute("data-tabindex"));
      }
      if (this.scrollModule) {
        this.scrollModule.disable(value);
      }
      if (this.popObj) {
        if (isVisible(this.popObj.element) && this.overflowMode !== "Extended") {
          this.popObj.hide();
        }
        rootEle.querySelector("#" + rootEle.id + "_nav").setAttribute("tabindex", !value ? "0" : "-1");
      }
    };
    Toolbar2.prototype.eleContains = function(el) {
      return el.classList.contains(CLS_SEPARATOR) || el.classList.contains(CLS_DISABLE$2) || el.getAttribute("disabled") || el.classList.contains(CLS_HIDDEN$1) || !isVisible(el) || !el.classList.contains(CLS_ITEM$2);
    };
    Toolbar2.prototype.eleFocus = function(closest2, pos) {
      var sib = Object(closest2)[pos + "ElementSibling"];
      if (sib) {
        var skipEle = this.eleContains(sib);
        if (skipEle) {
          this.eleFocus(sib, pos);
          return;
        }
        this.elementFocus(sib);
      } else if (this.tbarAlign) {
        var elem = Object(closest2.parentElement)[pos + "ElementSibling"];
        if (!isNullOrUndefined(elem) && elem.children.length === 0) {
          elem = Object(elem)[pos + "ElementSibling"];
        }
        if (!isNullOrUndefined(elem) && elem.children.length > 0) {
          if (pos === "next") {
            var el = elem.querySelector("." + CLS_ITEM$2);
            if (this.eleContains(el)) {
              this.eleFocus(el, pos);
            } else {
              el.firstElementChild.focus();
              this.activeEleSwitch(el);
            }
          } else {
            var el = elem.lastElementChild;
            if (this.eleContains(el)) {
              this.eleFocus(el, pos);
            } else {
              this.elementFocus(el);
            }
          }
        }
      } else if (!isNullOrUndefined(closest2)) {
        var tbrItems = this.element.querySelectorAll("." + CLS_ITEMS$1 + " ." + CLS_ITEM$2 + ":not(." + CLS_SEPARATOR + "):not(." + CLS_DISABLE$2 + "):not(." + CLS_HIDDEN$1 + ")");
        if (pos === "next" && tbrItems) {
          this.elementFocus(tbrItems[0]);
        } else if (pos === "previous" && tbrItems) {
          this.elementFocus(tbrItems[tbrItems.length - 1]);
        }
      }
    };
    Toolbar2.prototype.clickHandler = function(e) {
      var _this = this;
      var trgt = e.target;
      var ele = this.element;
      var isPopupElement = !isNullOrUndefined(closest(trgt, "." + CLS_POPUPCLASS));
      var clsList = trgt.classList;
      var popupNav = closest(trgt, "." + CLS_TBARNAV);
      if (!popupNav) {
        popupNav = trgt;
      }
      if (!ele.children[0].classList.contains("e-hscroll") && !ele.children[0].classList.contains("e-vscroll") && clsList.contains(CLS_TBARNAV)) {
        clsList = trgt.querySelector(".e-icons").classList;
      }
      if (clsList.contains(CLS_POPUPICON) || clsList.contains(CLS_POPUPDOWN)) {
        this.popupClickHandler(ele, popupNav, CLS_RTL$2);
      }
      var itemObj;
      var clst = closest(e.target, "." + CLS_ITEM$2);
      if ((isNullOrUndefined(clst) || clst.classList.contains(CLS_DISABLE$2)) && !popupNav.classList.contains(CLS_TBARNAV)) {
        return;
      }
      if (clst) {
        var tempItem = this.items[this.tbarEle.indexOf(clst)];
        itemObj = tempItem;
      }
      var eventArgs = { originalEvent: e, item: itemObj };
      if (itemObj && !isNullOrUndefined(itemObj.click)) {
        this.trigger("items[" + this.tbarEle.indexOf(clst) + "].click", eventArgs);
      }
      if (!eventArgs.cancel) {
        this.trigger("clicked", eventArgs, function(clickedArgs) {
          if (!isNullOrUndefined(_this.popObj) && isPopupElement && !clickedArgs.cancel && _this.overflowMode === "Popup" && clickedArgs.item && clickedArgs.item.type !== "Input") {
            _this.popObj.hide({ name: "FadeOut", duration: 100 });
          }
        });
      }
    };
    Toolbar2.prototype.popupClickHandler = function(ele, popupNav, CLS_RTL2) {
      var popObj = this.popObj;
      if (isVisible(popObj.element)) {
        popupNav.classList.remove(CLS_TBARNAVACT);
        popObj.hide({ name: "FadeOut", duration: 100 });
      } else {
        if (ele.classList.contains(CLS_RTL2)) {
          popObj.enableRtl = true;
          popObj.position = { X: "left", Y: "top" };
        }
        if (popObj.offsetX === 0 && !ele.classList.contains(CLS_RTL2)) {
          popObj.enableRtl = false;
          popObj.position = { X: "right", Y: "top" };
        }
        popObj.dataBind();
        popObj.refreshPosition();
        popObj.element.style.top = this.getElementOffsetY() + "px";
        if (this.overflowMode === "Extended") {
          popObj.element.style.minHeight = "0px";
        }
        popupNav.classList.add(CLS_TBARNAVACT);
        popObj.show({ name: "FadeIn", duration: 100 });
      }
    };
    Toolbar2.prototype.render = function() {
      this.initialize();
      this.renderControl();
      this.wireEvents();
      this.renderComplete();
    };
    Toolbar2.prototype.initialize = function() {
      var width = formatUnit(this.width);
      var height = formatUnit(this.height);
      if (Browser.info.name !== "msie" || this.height !== "auto" || this.overflowMode === "MultiRow") {
        setStyleAttribute(this.element, { "height": height });
      }
      setStyleAttribute(this.element, { "width": width });
      var ariaAttr = {
        "role": "toolbar",
        "aria-disabled": "false",
        "aria-orientation": !this.isVertical ? "horizontal" : "vertical"
      };
      attributes(this.element, ariaAttr);
      if (this.cssClass) {
        addClass([this.element], this.cssClass.split(" "));
      }
    };
    Toolbar2.prototype.renderControl = function() {
      var ele = this.element;
      this.trgtEle = ele.children.length > 0 ? ele.querySelector("div") : null;
      this.tbarAlgEle = { lefts: [], centers: [], rights: [] };
      this.renderItems();
      this.renderLayout();
    };
    Toolbar2.prototype.renderLayout = function() {
      this.renderOverflowMode();
      if (this.tbarAlign) {
        this.itemPositioning();
      }
      if (this.popObj && this.popObj.element.childElementCount > 1 && this.checkPopupRefresh(this.element, this.popObj.element)) {
        this.popupRefresh(this.popObj.element, false);
      }
      this.separator();
    };
    Toolbar2.prototype.itemsAlign = function(items, itemEleDom) {
      var innerItem;
      var innerPos;
      if (!this.tbarEle) {
        this.tbarEle = [];
      }
      for (var i = 0; i < items.length; i++) {
        innerItem = this.renderSubComponent(items[parseInt(i.toString(), 10)], i);
        if (this.tbarEle.indexOf(innerItem) === -1) {
          this.tbarEle.push(innerItem);
        }
        if (!this.tbarAlign) {
          this.tbarItemAlign(items[parseInt(i.toString(), 10)], itemEleDom, i);
        }
        innerPos = itemEleDom.querySelector(".e-toolbar-" + items[parseInt(i.toString(), 10)].align.toLowerCase());
        if (innerPos) {
          if (!(items[parseInt(i.toString(), 10)].showAlwaysInPopup && items[parseInt(i.toString(), 10)].overflow !== "Show")) {
            this.tbarAlgEle[(items[parseInt(i.toString(), 10)].align + "s").toLowerCase()].push(innerItem);
          }
          innerPos.appendChild(innerItem);
        } else {
          itemEleDom.appendChild(innerItem);
        }
      }
      if (this.isReact) {
        var portals = "portals";
        this.notify("render-react-toolbar-template", this["" + portals]);
        this.renderReactTemplates();
      }
    };
    Toolbar2.prototype.changeOrientation = function() {
      var ele = this.element;
      if (this.isVertical) {
        ele.classList.remove(CLS_VERTICAL$1);
        this.isVertical = false;
        if (this.height === "auto" || this.height === "100%") {
          ele.style.height = this.height;
        }
        ele.setAttribute("aria-orientation", "horizontal");
      } else {
        ele.classList.add(CLS_VERTICAL$1);
        this.isVertical = true;
        ele.setAttribute("aria-orientation", "vertical");
        setStyleAttribute(this.element, { "height": formatUnit(this.height), "width": formatUnit(this.width) });
      }
      this.destroyMode();
      this.refreshOverflow();
    };
    Toolbar2.prototype.initScroll = function(element2, innerItems) {
      if (!this.scrollModule && this.checkOverflow(element2, innerItems[0])) {
        if (this.tbarAlign) {
          this.element.querySelector("." + CLS_ITEMS$1 + " ." + CLS_TBARCENTER).removeAttribute("style");
        }
        if (this.isVertical) {
          this.scrollModule = new VScroll({ scrollStep: this.scrollStep, enableRtl: this.enableRtl }, innerItems[0]);
        } else {
          this.scrollModule = new HScroll({ scrollStep: this.scrollStep, enableRtl: this.enableRtl }, innerItems[0]);
        }
        if (this.cssClass) {
          addClass([innerItems[0]], this.cssClass.split(" "));
        }
        this.remove(this.scrollModule.element, CLS_TBARPOS);
        setStyleAttribute(this.element, { overflow: "hidden" });
      }
    };
    Toolbar2.prototype.itemWidthCal = function(items) {
      var _this = this;
      var width = 0;
      var style;
      [].slice.call(selectAll("." + CLS_ITEM$2, items)).forEach(function(el) {
        if (isVisible(el)) {
          style = window.getComputedStyle(el);
          width += _this.isVertical ? el.offsetHeight : el.offsetWidth;
          width += parseFloat(_this.isVertical ? style.marginTop : style.marginRight);
          width += parseFloat(_this.isVertical ? style.marginBottom : style.marginLeft);
        }
      });
      return width;
    };
    Toolbar2.prototype.getScrollCntEle = function(innerItem) {
      var trgClass = this.isVertical ? ".e-vscroll-content" : ".e-hscroll-content";
      return innerItem.querySelector(trgClass);
    };
    Toolbar2.prototype.checkOverflow = function(element2, innerItem) {
      if (isNullOrUndefined(element2) || isNullOrUndefined(innerItem) || !isVisible(element2)) {
        return false;
      }
      var eleWidth = this.isVertical ? element2.offsetHeight : element2.offsetWidth;
      var itemWidth = this.isVertical ? innerItem.offsetHeight : innerItem.offsetWidth;
      if (this.tbarAlign || this.scrollModule || eleWidth === itemWidth) {
        itemWidth = this.itemWidthCal(this.scrollModule ? this.getScrollCntEle(innerItem) : innerItem);
      }
      var popNav = element2.querySelector("." + CLS_TBARNAV);
      var scrollNav = element2.querySelector("." + CLS_TBARSCRLNAV);
      var navEleWidth = 0;
      if (popNav) {
        navEleWidth = this.isVertical ? popNav.offsetHeight : popNav.offsetWidth;
      } else if (scrollNav) {
        navEleWidth = this.isVertical ? scrollNav.offsetHeight * 2 : scrollNav.offsetWidth * 2;
      }
      if (itemWidth > eleWidth - navEleWidth) {
        return true;
      } else {
        return false;
      }
    };
    Toolbar2.prototype.refreshOverflow = function() {
      this.resize();
    };
    Toolbar2.prototype.toolbarAlign = function(innerItems) {
      if (this.tbarAlign) {
        this.add(innerItems, CLS_TBARPOS);
        this.itemPositioning();
      }
    };
    Toolbar2.prototype.renderOverflowMode = function() {
      var ele = this.element;
      var innerItems = ele.querySelector("." + CLS_ITEMS$1);
      var priorityCheck = this.popupPriCount > 0;
      if (ele && ele.children.length > 0) {
        this.offsetWid = ele.offsetWidth;
        this.remove(this.element, "e-toolpop");
        if (Browser.info.name === "msie" && this.height === "auto") {
          ele.style.height = "";
        }
        switch (this.overflowMode) {
          case "Scrollable":
            if (isNullOrUndefined(this.scrollModule)) {
              this.initScroll(ele, [].slice.call(ele.getElementsByClassName(CLS_ITEMS$1)));
            }
            break;
          case "Popup":
            this.add(this.element, "e-toolpop");
            if (this.tbarAlign) {
              this.removePositioning();
            }
            if (this.checkOverflow(ele, innerItems) || priorityCheck) {
              this.setOverflowAttributes(ele);
            }
            this.toolbarAlign(innerItems);
            break;
          case "MultiRow":
            this.add(innerItems, CLS_MULTIROW);
            if (this.checkOverflow(ele, innerItems) && this.tbarAlign) {
              this.removePositioning();
              this.add(innerItems, CLS_MULTIROWPOS);
            }
            if (ele.style.overflow === "hidden") {
              ele.style.overflow = "";
            }
            if (Browser.info.name === "msie" || ele.style.height !== "auto") {
              ele.style.height = "auto";
            }
            break;
          case "Extended":
            this.add(this.element, CLS_EXTEANDABLE_TOOLBAR);
            if (this.checkOverflow(ele, innerItems) || priorityCheck) {
              if (this.tbarAlign) {
                this.removePositioning();
              }
              this.setOverflowAttributes(ele);
            }
            this.toolbarAlign(innerItems);
        }
      }
    };
    Toolbar2.prototype.setOverflowAttributes = function(ele) {
      this.createPopupEle(ele, [].slice.call(selectAll("." + CLS_ITEMS$1 + " ." + CLS_ITEM$2, ele)));
      var ariaAttr = {
        "tabindex": "0",
        "role": "button",
        "aria-haspopup": "true",
        "aria-label": "overflow"
      };
      attributes(this.element.querySelector("." + CLS_TBARNAV), ariaAttr);
    };
    Toolbar2.prototype.separator = function() {
      var element2 = this.element;
      var eleItem = [].slice.call(element2.querySelectorAll("." + CLS_SEPARATOR));
      var multiVar = element2.querySelector("." + CLS_MULTIROW_SEPARATOR);
      var extendVar = element2.querySelector("." + CLS_EXTENDABLE_SEPARATOR);
      var eleInlineItem = this.overflowMode === "MultiRow" ? multiVar : extendVar;
      if (eleInlineItem !== null) {
        if (this.overflowMode === "MultiRow") {
          eleInlineItem.classList.remove(CLS_MULTIROW_SEPARATOR);
        } else if (this.overflowMode === "Extended") {
          eleInlineItem.classList.remove(CLS_EXTENDABLE_SEPARATOR);
        }
      }
      for (var i = 0; i <= eleItem.length - 1; i++) {
        if (eleItem[parseInt(i.toString(), 10)].offsetLeft < 30 && eleItem[parseInt(i.toString(), 10)].offsetLeft !== 0) {
          if (this.overflowMode === "MultiRow") {
            eleItem[parseInt(i.toString(), 10)].classList.add(CLS_MULTIROW_SEPARATOR);
          } else if (this.overflowMode === "Extended") {
            eleItem[parseInt(i.toString(), 10)].classList.add(CLS_EXTENDABLE_SEPARATOR);
          }
        }
      }
    };
    Toolbar2.prototype.createPopupEle = function(ele, innerEle) {
      var innerNav = ele.querySelector("." + CLS_TBARNAV);
      var vertical = this.isVertical;
      if (!innerNav) {
        this.createPopupIcon(ele);
      }
      innerNav = ele.querySelector("." + CLS_TBARNAV);
      var innerNavDom = vertical ? innerNav.offsetHeight : innerNav.offsetWidth;
      var eleWidth = (vertical ? ele.offsetHeight : ele.offsetWidth) - innerNavDom;
      this.element.classList.remove("e-rtl");
      setStyleAttribute(this.element, { direction: "initial" });
      this.checkPriority(ele, innerEle, eleWidth, true);
      if (this.enableRtl) {
        this.element.classList.add("e-rtl");
      }
      this.element.style.removeProperty("direction");
      this.createPopup();
    };
    Toolbar2.prototype.pushingPoppedEle = function(tbarObj, popupPri, ele, eleHeight, sepHeight) {
      var element2 = tbarObj.element;
      var poppedEle = [].slice.call(selectAll("." + CLS_POPUP, element2.querySelector("." + CLS_ITEMS$1)));
      var nodes = selectAll("." + CLS_TBAROVERFLOW, ele);
      var nodeIndex = 0;
      var nodePri = 0;
      poppedEle.forEach(function(el, index) {
        nodes = selectAll("." + CLS_TBAROVERFLOW, ele);
        if (el.classList.contains(CLS_TBAROVERFLOW) && nodes.length > 0) {
          if (tbarObj.tbResize && nodes.length > index) {
            ele.insertBefore(el, nodes[parseInt(index.toString(), 10)]);
            ++nodePri;
          } else {
            ele.insertBefore(el, ele.children[nodes.length]);
            ++nodePri;
          }
        } else if (el.classList.contains(CLS_TBAROVERFLOW)) {
          ele.insertBefore(el, ele.firstChild);
          ++nodePri;
        } else if (tbarObj.tbResize && el.classList.contains(CLS_POPOVERFLOW) && ele.children.length > 0 && nodes.length === 0) {
          ele.insertBefore(el, ele.firstChild);
          ++nodePri;
        } else if (el.classList.contains(CLS_POPOVERFLOW)) {
          popupPri.push(el);
        } else if (tbarObj.tbResize) {
          ele.insertBefore(el, ele.childNodes[nodeIndex + nodePri]);
          ++nodeIndex;
        } else {
          ele.appendChild(el);
        }
        if (el.classList.contains(CLS_SEPARATOR)) {
          setStyleAttribute(el, { display: "", height: sepHeight + "px" });
        } else {
          setStyleAttribute(el, { display: "", height: eleHeight + "px" });
        }
      });
      popupPri.forEach(function(el) {
        ele.appendChild(el);
      });
      var tbarEle = selectAll("." + CLS_ITEM$2, element2.querySelector("." + CLS_ITEMS$1));
      for (var i = tbarEle.length - 1; i >= 0; i--) {
        var tbarElement = tbarEle[parseInt(i.toString(), 10)];
        if (tbarElement.classList.contains(CLS_SEPARATOR) && this.overflowMode !== "Extended") {
          setStyleAttribute(tbarElement, { display: "none" });
        } else {
          break;
        }
      }
    };
    Toolbar2.prototype.createPopup = function() {
      var element2 = this.element;
      var sepHeight;
      var sepItem;
      if (this.overflowMode === "Extended") {
        sepItem = element2.querySelector("." + CLS_SEPARATOR + ":not(." + CLS_POPUP + ")");
        sepHeight = element2.style.height === "auto" || element2.style.height === "" ? null : sepItem.offsetHeight;
      }
      var eleItem = element2.querySelector("." + CLS_ITEM$2 + ":not(." + CLS_SEPARATOR + "):not(." + CLS_POPUP + ")");
      var eleHeight = element2.style.height === "auto" || element2.style.height === "" ? null : eleItem && eleItem.offsetHeight;
      var ele;
      var popupPri = [];
      if (select$1("#" + element2.id + "_popup." + CLS_POPUPCLASS, element2)) {
        ele = select$1("#" + element2.id + "_popup." + CLS_POPUPCLASS, element2);
      } else {
        var extendEle = this.createElement("div", {
          id: element2.id + "_popup",
          className: CLS_POPUPCLASS + " " + CLS_EXTENDABLECLASS
        });
        var popupEle = this.createElement("div", { id: element2.id + "_popup", className: CLS_POPUPCLASS });
        ele = this.overflowMode === "Extended" ? extendEle : popupEle;
      }
      this.pushingPoppedEle(this, popupPri, ele, eleHeight, sepHeight);
      this.popupInit(element2, ele);
    };
    Toolbar2.prototype.getElementOffsetY = function() {
      return this.overflowMode === "Extended" && window.getComputedStyle(this.element).getPropertyValue("box-sizing") === "border-box" ? this.element.clientHeight : this.element.offsetHeight;
    };
    Toolbar2.prototype.popupInit = function(element2, ele) {
      if (!this.popObj) {
        element2.appendChild(ele);
        if (this.cssClass) {
          addClass([ele], this.cssClass.split(" "));
        }
        setStyleAttribute(this.element, { overflow: "" });
        var eleStyles = window.getComputedStyle(this.element);
        var popup = new Popup(null, {
          relateTo: this.element,
          offsetY: this.isVertical ? 0 : this.getElementOffsetY(),
          enableRtl: this.enableRtl,
          open: this.popupOpen.bind(this),
          close: this.popupClose.bind(this),
          collision: { Y: this.enableCollision ? "flip" : "none" },
          position: this.enableRtl ? { X: "left", Y: "top" } : { X: "right", Y: "top" }
        });
        if (this.overflowMode === "Extended") {
          popup.width = parseFloat(eleStyles.width) + parseFloat(eleStyles.borderRightWidth) * 2;
          popup.offsetX = 0;
        }
        popup.appendTo(ele);
        EventHandler.add(document, "scroll", this.docEvent.bind(this));
        EventHandler.add(document, "click ", this.docEvent.bind(this));
        popup.element.style.maxHeight = popup.element.offsetHeight + "px";
        if (this.isVertical) {
          popup.element.style.visibility = "hidden";
        }
        if (this.isExtendedOpen) {
          var popupNav = this.element.querySelector("." + CLS_TBARNAV);
          popupNav.classList.add(CLS_TBARNAVACT);
          classList(popupNav.firstElementChild, [CLS_POPUPICON], [CLS_POPUPDOWN]);
          this.element.querySelector("." + CLS_EXTENDABLECLASS).classList.add(CLS_POPUPOPEN);
        } else {
          popup.hide();
        }
        this.popObj = popup;
      } else {
        var popupEle = this.popObj.element;
        setStyleAttribute(popupEle, { maxHeight: "", display: "block" });
        setStyleAttribute(popupEle, { maxHeight: popupEle.offsetHeight + "px", display: "" });
      }
    };
    Toolbar2.prototype.tbarPopupHandler = function(isOpen) {
      if (this.overflowMode === "Extended") {
        if (isOpen) {
          this.add(this.element, CLS_EXTENDEDPOPOPEN);
        } else {
          this.remove(this.element, CLS_EXTENDEDPOPOPEN);
        }
      }
    };
    Toolbar2.prototype.popupOpen = function(e) {
      var popObj = this.popObj;
      if (!this.isVertical) {
        popObj.offsetY = this.getElementOffsetY();
        popObj.dataBind();
      }
      var popupEle = this.popObj.element;
      var toolEle = this.popObj.element.parentElement;
      var popupNav = toolEle.querySelector("." + CLS_TBARNAV);
      popupNav.setAttribute("aria-expanded", "true");
      setStyleAttribute(popObj.element, { height: "auto", maxHeight: "" });
      popObj.element.style.maxHeight = popObj.element.offsetHeight + "px";
      if (this.overflowMode === "Extended") {
        popObj.element.style.minHeight = "";
      }
      var popupElePos = popupEle.offsetTop + popupEle.offsetHeight + calculatePosition(toolEle).top;
      var popIcon = popupNav.firstElementChild;
      popupNav.classList.add(CLS_TBARNAVACT);
      classList(popIcon, [CLS_POPUPICON], [CLS_POPUPDOWN]);
      this.tbarPopupHandler(true);
      var scrollVal = isNullOrUndefined(window.scrollY) ? 0 : window.scrollY;
      if (!this.isVertical && window.innerHeight + scrollVal < popupElePos && this.element.offsetTop < popupEle.offsetHeight) {
        var overflowHeight = popupEle.offsetHeight - (popupElePos - window.innerHeight - scrollVal + 5);
        popObj.height = overflowHeight + "px";
        for (var i = 0; i <= popupEle.childElementCount; i++) {
          var ele = popupEle.children[parseInt(i.toString(), 10)];
          if (ele.offsetTop + ele.offsetHeight > overflowHeight) {
            overflowHeight = ele.offsetTop;
            break;
          }
        }
        setStyleAttribute(popObj.element, { maxHeight: overflowHeight + "px" });
      } else if (this.isVertical) {
        var tbEleData = this.element.getBoundingClientRect();
        setStyleAttribute(popObj.element, { maxHeight: tbEleData.top + this.element.offsetHeight + "px", bottom: 0, visibility: "" });
      }
      if (popObj) {
        var popupOffset = popupEle.getBoundingClientRect();
        if (popupOffset.right > document.documentElement.clientWidth && popupOffset.width > toolEle.getBoundingClientRect().width) {
          popObj.collision = { Y: "none" };
          popObj.dataBind();
        }
        popObj.refreshPosition();
      }
    };
    Toolbar2.prototype.popupClose = function(e) {
      var element2 = this.element;
      var popupNav = element2.querySelector("." + CLS_TBARNAV);
      popupNav.setAttribute("aria-expanded", "false");
      var popIcon = popupNav.firstElementChild;
      popupNav.classList.remove(CLS_TBARNAVACT);
      classList(popIcon, [CLS_POPUPDOWN], [CLS_POPUPICON]);
      this.tbarPopupHandler(false);
    };
    Toolbar2.prototype.checkPriority = function(ele, inEle, eleWidth, pre) {
      var popPriority = this.popupPriCount > 0;
      var len = inEle.length;
      var eleWid = eleWidth;
      var eleOffset;
      var checkoffset;
      var sepCheck = 0;
      var itemCount = 0;
      var itemPopCount = 0;
      var checkClass = function(ele2, val) {
        var rVal = false;
        val.forEach(function(cls) {
          if (ele2.classList.contains(cls)) {
            rVal = true;
          }
        });
        return rVal;
      };
      for (var i = len - 1; i >= 0; i--) {
        var mrgn = void 0;
        var compuStyle = window.getComputedStyle(inEle[parseInt(i.toString(), 10)]);
        if (this.isVertical) {
          mrgn = parseFloat(compuStyle.marginTop);
          mrgn += parseFloat(compuStyle.marginBottom);
        } else {
          mrgn = parseFloat(compuStyle.marginRight);
          mrgn += parseFloat(compuStyle.marginLeft);
        }
        var fstEleCheck = inEle[parseInt(i.toString(), 10)] === this.tbarEle[0];
        if (fstEleCheck) {
          this.tbarEleMrgn = mrgn;
        }
        eleOffset = this.isVertical ? inEle[parseInt(i.toString(), 10)].offsetHeight : inEle[parseInt(i.toString(), 10)].offsetWidth;
        var eleWid_1 = fstEleCheck ? eleOffset + mrgn : eleOffset;
        if (checkClass(inEle[parseInt(i.toString(), 10)], [CLS_POPPRI]) && popPriority) {
          inEle[parseInt(i.toString(), 10)].classList.add(CLS_POPUP);
          if (this.isVertical) {
            setStyleAttribute(inEle[parseInt(i.toString(), 10)], { display: "none", minHeight: eleWid_1 + "px" });
          } else {
            setStyleAttribute(inEle[parseInt(i.toString(), 10)], { display: "none", minWidth: eleWid_1 + "px" });
          }
          itemPopCount++;
        }
        if (this.isVertical) {
          checkoffset = inEle[parseInt(i.toString(), 10)].offsetTop + inEle[parseInt(i.toString(), 10)].offsetHeight + mrgn > eleWidth;
        } else {
          checkoffset = inEle[parseInt(i.toString(), 10)].offsetLeft + inEle[parseInt(i.toString(), 10)].offsetWidth + mrgn > eleWidth;
        }
        if (checkoffset) {
          if (inEle[parseInt(i.toString(), 10)].classList.contains(CLS_SEPARATOR)) {
            if (this.overflowMode === "Extended") {
              if (itemCount === itemPopCount) {
                var sepEle = inEle[parseInt(i.toString(), 10)];
                if (checkClass(sepEle, [CLS_SEPARATOR, CLS_TBARIGNORE])) {
                  inEle[parseInt(i.toString(), 10)].classList.add(CLS_POPUP);
                  itemPopCount++;
                }
              }
              itemCount++;
            } else if (this.overflowMode === "Popup") {
              if (sepCheck > 0 && itemCount === itemPopCount) {
                var sepEle = inEle[i + itemCount + (sepCheck - 1)];
                if (checkClass(sepEle, [CLS_SEPARATOR, CLS_TBARIGNORE])) {
                  setStyleAttribute(sepEle, { display: "none" });
                }
              }
              sepCheck++;
              itemCount = 0;
              itemPopCount = 0;
            }
          } else {
            itemCount++;
          }
          if (inEle[parseInt(i.toString(), 10)].classList.contains(CLS_TBAROVERFLOW) && pre) {
            eleWidth -= (this.isVertical ? inEle[parseInt(i.toString(), 10)].offsetHeight : inEle[parseInt(i.toString(), 10)].offsetWidth) + mrgn;
          } else if (!checkClass(inEle[parseInt(i.toString(), 10)], [CLS_SEPARATOR, CLS_TBARIGNORE])) {
            inEle[parseInt(i.toString(), 10)].classList.add(CLS_POPUP);
            if (this.isVertical) {
              setStyleAttribute(inEle[parseInt(i.toString(), 10)], { display: "none", minHeight: eleWid_1 + "px" });
            } else {
              setStyleAttribute(inEle[parseInt(i.toString(), 10)], { display: "none", minWidth: eleWid_1 + "px" });
            }
            itemPopCount++;
          } else {
            eleWidth -= (this.isVertical ? inEle[parseInt(i.toString(), 10)].offsetHeight : inEle[parseInt(i.toString(), 10)].offsetWidth) + mrgn;
          }
        }
      }
      if (pre) {
        var popedEle = selectAll("." + CLS_ITEM$2 + ":not(." + CLS_POPUP + ")", this.element);
        this.checkPriority(ele, popedEle, eleWid, false);
      }
    };
    Toolbar2.prototype.createPopupIcon = function(element2) {
      var id = element2.id.concat("_nav");
      var className = "e-" + element2.id.concat("_nav " + CLS_POPUPNAV);
      className = this.overflowMode === "Extended" ? className + " " + CLS_EXTENDPOPUP : className;
      var nav = this.createElement("div", { id, className });
      if (Browser.info.name === "msie" || Browser.info.name === "edge") {
        nav.classList.add("e-ie-align");
      }
      var navItem = this.createElement("div", { className: CLS_POPUPDOWN + " e-icons" });
      nav.appendChild(navItem);
      nav.setAttribute("tabindex", "0");
      nav.setAttribute("role", "button");
      element2.appendChild(nav);
    };
    Toolbar2.prototype.tbarPriRef = function(inEle, indx, sepPri, el, des, elWid, wid, ig) {
      var ignoreCount = ig;
      var popEle = this.popObj.element;
      var query = "." + CLS_ITEM$2 + ":not(." + CLS_SEPARATOR + "):not(." + CLS_TBAROVERFLOW + ")";
      var priEleCnt = selectAll("." + CLS_POPUP + ":not(." + CLS_TBAROVERFLOW + ")", popEle).length;
      var checkClass = function(ele, val) {
        return ele.classList.contains(val);
      };
      if (selectAll(query, inEle).length === 0) {
        var eleSep = inEle.children[indx - (indx - sepPri) - 1];
        var ignoreCheck = !isNullOrUndefined(eleSep) && checkClass(eleSep, CLS_TBARIGNORE);
        if (!isNullOrUndefined(eleSep) && checkClass(eleSep, CLS_SEPARATOR) && !isVisible(eleSep) || ignoreCheck) {
          var sepDisplay = "none";
          eleSep.style.display = "inherit";
          var eleSepWidth = eleSep.offsetWidth + parseFloat(window.getComputedStyle(eleSep).marginRight) * 2;
          var prevSep = eleSep.previousElementSibling;
          if (elWid + eleSepWidth < wid || des) {
            inEle.insertBefore(el, inEle.children[indx + ignoreCount - (indx - sepPri)]);
            if (!isNullOrUndefined(prevSep)) {
              prevSep.style.display = "";
            }
          } else {
            if (prevSep.classList.contains(CLS_SEPARATOR)) {
              prevSep.style.display = sepDisplay;
            }
          }
          eleSep.style.display = "";
        } else {
          inEle.insertBefore(el, inEle.children[indx + ignoreCount - (indx - sepPri)]);
        }
      } else {
        inEle.insertBefore(el, inEle.children[indx + ignoreCount - priEleCnt]);
      }
    };
    Toolbar2.prototype.popupRefresh = function(popupEle, destroy2) {
      var _this = this;
      var ele = this.element;
      var isVer = this.isVertical;
      var innerEle = ele.querySelector("." + CLS_ITEMS$1);
      var popNav = ele.querySelector("." + CLS_TBARNAV);
      if (isNullOrUndefined(popNav)) {
        return;
      }
      innerEle.removeAttribute("style");
      popupEle.style.display = "block";
      var dimension;
      if (isVer) {
        dimension = ele.offsetHeight - (popNav.offsetHeight + innerEle.offsetHeight);
      } else {
        dimension = ele.offsetWidth - (popNav.offsetWidth + innerEle.offsetWidth);
      }
      var popupEleWidth = 0;
      [].slice.call(popupEle.children).forEach(function(el) {
        popupEleWidth += _this.popupEleWidth(el);
        setStyleAttribute(el, { "position": "" });
      });
      if (dimension + (isVer ? popNav.offsetHeight : popNav.offsetWidth) > popupEleWidth && this.popupPriCount === 0) {
        destroy2 = true;
      }
      this.popupEleRefresh(dimension, popupEle, destroy2);
      popupEle.style.display = "";
      if (popupEle.children.length === 0 && popNav && this.popObj) {
        detach(popNav);
        popNav = null;
        this.popObj.destroy();
        detach(this.popObj.element);
        this.popObj = null;
      }
    };
    Toolbar2.prototype.ignoreEleFetch = function(index, innerEle) {
      var ignoreEle = [].slice.call(innerEle.querySelectorAll("." + CLS_TBARIGNORE));
      var ignoreInx = [];
      var count = 0;
      if (ignoreEle.length > 0) {
        ignoreEle.forEach(function(ele) {
          ignoreInx.push([].slice.call(innerEle.children).indexOf(ele));
        });
      } else {
        return 0;
      }
      ignoreInx.forEach(function(val) {
        if (val <= index) {
          count++;
        }
      });
      return count;
    };
    Toolbar2.prototype.checkPopupRefresh = function(root, popEle) {
      popEle.style.display = "block";
      var elWid = this.popupEleWidth(popEle.firstElementChild);
      popEle.firstElementChild.style.removeProperty("Position");
      var tbarWidth = root.offsetWidth - root.querySelector("." + CLS_TBARNAV).offsetWidth;
      var tbarItemsWid = root.querySelector("." + CLS_ITEMS$1).offsetWidth;
      popEle.style.removeProperty("display");
      if (tbarWidth > elWid + tbarItemsWid) {
        return true;
      }
      return false;
    };
    Toolbar2.prototype.popupEleWidth = function(el) {
      el.style.position = "absolute";
      var elWidth = this.isVertical ? el.offsetHeight : el.offsetWidth;
      var btnText = el.querySelector("." + CLS_TBARBTNTEXT);
      if (el.classList.contains("e-tbtn-align") || el.classList.contains(CLS_TBARTEXT)) {
        var btn = el.children[0];
        if (!isNullOrUndefined(btnText) && el.classList.contains(CLS_TBARTEXT)) {
          btnText.style.display = "none";
        } else if (!isNullOrUndefined(btnText) && el.classList.contains(CLS_POPUPTEXT)) {
          btnText.style.display = "block";
        }
        btn.style.minWidth = "0%";
        elWidth = parseFloat(!this.isVertical ? el.style.minWidth : el.style.minHeight);
        btn.style.minWidth = "";
        btn.style.minHeight = "";
        if (!isNullOrUndefined(btnText)) {
          btnText.style.display = "";
        }
      }
      return elWidth;
    };
    Toolbar2.prototype.popupEleRefresh = function(width, popupEle, destroy2) {
      var popPriority = this.popupPriCount > 0;
      var eleSplice = this.tbarEle;
      var priEleCnt;
      var index;
      var innerEle = this.element.querySelector("." + CLS_ITEMS$1);
      var ignoreCount = 0;
      var _loop_1 = function(el2) {
        if (el2.classList.contains(CLS_POPPRI) && popPriority && !destroy2) {
          return "continue";
        }
        var elWidth = this_1.popupEleWidth(el2);
        if (el2 === this_1.tbarEle[0]) {
          elWidth += this_1.tbarEleMrgn;
        }
        el2.style.position = "";
        if (elWidth < width || destroy2) {
          setStyleAttribute(el2, { minWidth: "", height: "", minHeight: "" });
          if (!el2.classList.contains(CLS_POPOVERFLOW)) {
            el2.classList.remove(CLS_POPUP);
          }
          index = this_1.tbarEle.indexOf(el2);
          if (this_1.tbarAlign) {
            var pos = this_1.items[parseInt(index.toString(), 10)].align;
            index = this_1.tbarAlgEle[(pos + "s").toLowerCase()].indexOf(el2);
            eleSplice = this_1.tbarAlgEle[(pos + "s").toLowerCase()];
            innerEle = this_1.element.querySelector("." + CLS_ITEMS$1 + " .e-toolbar-" + pos.toLowerCase());
          }
          var sepBeforePri_1 = 0;
          if (this_1.overflowMode !== "Extended") {
            eleSplice.slice(0, index).forEach(function(el3) {
              if (el3.classList.contains(CLS_TBAROVERFLOW) || el3.classList.contains(CLS_SEPARATOR)) {
                if (el3.classList.contains(CLS_SEPARATOR)) {
                  el3.style.display = "";
                  width -= el3.offsetWidth;
                }
                sepBeforePri_1++;
              }
            });
          }
          ignoreCount = this_1.ignoreEleFetch(index, innerEle);
          if (el2.classList.contains(CLS_TBAROVERFLOW)) {
            this_1.tbarPriRef(innerEle, index, sepBeforePri_1, el2, destroy2, elWidth, width, ignoreCount);
            width -= el2.offsetWidth;
          } else if (index === 0) {
            innerEle.insertBefore(el2, innerEle.firstChild);
            width -= el2.offsetWidth;
          } else {
            priEleCnt = selectAll("." + CLS_TBAROVERFLOW, this_1.popObj.element).length;
            innerEle.insertBefore(el2, innerEle.children[index + ignoreCount - priEleCnt]);
            width -= el2.offsetWidth;
          }
          el2.style.height = "";
        } else {
          return "break";
        }
      };
      var this_1 = this;
      for (var _i = 0, _a = [].slice.call(popupEle.children); _i < _a.length; _i++) {
        var el = _a[_i];
        var state_1 = _loop_1(el);
        if (state_1 === "break")
          break;
      }
      var checkOverflow = this.checkOverflow(this.element, this.element.getElementsByClassName(CLS_ITEMS$1)[0]);
      if (checkOverflow && !destroy2) {
        this.renderOverflowMode();
      }
    };
    Toolbar2.prototype.removePositioning = function() {
      var item = this.element.querySelector("." + CLS_ITEMS$1);
      if (isNullOrUndefined(item) || !item.classList.contains(CLS_TBARPOS)) {
        return;
      }
      this.remove(item, CLS_TBARPOS);
      var innerItem = [].slice.call(item.childNodes);
      innerItem[1].removeAttribute("style");
      innerItem[2].removeAttribute("style");
    };
    Toolbar2.prototype.refreshPositioning = function() {
      var item = this.element.querySelector("." + CLS_ITEMS$1);
      this.add(item, CLS_TBARPOS);
      this.itemPositioning();
    };
    Toolbar2.prototype.itemPositioning = function() {
      var item = this.element.querySelector("." + CLS_ITEMS$1);
      var margin;
      if (isNullOrUndefined(item) || !item.classList.contains(CLS_TBARPOS)) {
        return;
      }
      var popupNav = this.element.querySelector("." + CLS_TBARNAV);
      var innerItem;
      if (this.scrollModule) {
        var trgClass = this.isVertical ? CLS_VSCROLLCNT : CLS_HSCROLLCNT;
        innerItem = [].slice.call(item.querySelector("." + trgClass).children);
      } else {
        innerItem = [].slice.call(item.childNodes);
      }
      if (this.isVertical) {
        margin = innerItem[0].offsetHeight + innerItem[2].offsetHeight;
      } else {
        margin = innerItem[0].offsetWidth + innerItem[2].offsetWidth;
      }
      var tbarWid = this.isVertical ? this.element.offsetHeight : this.element.offsetWidth;
      if (popupNav) {
        tbarWid -= this.isVertical ? popupNav.offsetHeight : popupNav.offsetWidth;
        var popWid = (this.isVertical ? popupNav.offsetHeight : popupNav.offsetWidth) + "px";
        innerItem[2].removeAttribute("style");
        if (this.isVertical) {
          if (this.enableRtl) {
            innerItem[2].style.top = popWid;
          } else {
            innerItem[2].style.bottom = popWid;
          }
        } else {
          if (this.enableRtl) {
            innerItem[2].style.left = popWid;
          } else {
            innerItem[2].style.right = popWid;
          }
        }
      }
      if (tbarWid <= margin) {
        return;
      }
      var value = (tbarWid - margin - (!this.isVertical ? innerItem[1].offsetWidth : innerItem[1].offsetHeight)) / 2;
      innerItem[1].removeAttribute("style");
      var mrgn = (!this.isVertical ? innerItem[0].offsetWidth : innerItem[0].offsetHeight) + value + "px";
      if (this.isVertical) {
        if (this.enableRtl) {
          innerItem[1].style.marginBottom = mrgn;
        } else {
          innerItem[1].style.marginTop = mrgn;
        }
      } else {
        if (this.enableRtl) {
          innerItem[1].style.marginRight = mrgn;
        } else {
          innerItem[1].style.marginLeft = mrgn;
        }
      }
    };
    Toolbar2.prototype.tbarItemAlign = function(item, itemEle, pos) {
      var _this = this;
      if (item.showAlwaysInPopup && item.overflow !== "Show") {
        return;
      }
      var alignDiv = [];
      alignDiv.push(this.createElement("div", { className: CLS_TBARLEFT }));
      alignDiv.push(this.createElement("div", { className: CLS_TBARCENTER }));
      alignDiv.push(this.createElement("div", { className: CLS_TBARRIGHT }));
      if (pos === 0 && item.align !== "Left") {
        alignDiv.forEach(function(ele) {
          itemEle.appendChild(ele);
        });
        this.tbarAlign = true;
        this.add(itemEle, CLS_TBARPOS);
      } else if (item.align !== "Left") {
        var alignEle = itemEle.childNodes;
        var leftAlign_1 = alignDiv[0];
        [].slice.call(alignEle).forEach(function(el) {
          _this.tbarAlgEle.lefts.push(el);
          leftAlign_1.appendChild(el);
        });
        itemEle.appendChild(leftAlign_1);
        itemEle.appendChild(alignDiv[1]);
        itemEle.appendChild(alignDiv[2]);
        this.tbarAlign = true;
        this.add(itemEle, CLS_TBARPOS);
      }
    };
    Toolbar2.prototype.ctrlTemplate = function() {
      var _this = this;
      this.ctrlTem = this.trgtEle.cloneNode(true);
      this.add(this.trgtEle, CLS_ITEMS$1);
      this.tbarEle = [];
      var innerEle = [].slice.call(this.trgtEle.children);
      innerEle.forEach(function(ele) {
        if (ele.tagName === "DIV") {
          _this.tbarEle.push(ele);
          if (!isNullOrUndefined(ele.firstElementChild)) {
            ele.firstElementChild.setAttribute("aria-disabled", "false");
          }
          _this.add(ele, CLS_ITEM$2);
        }
      });
    };
    Toolbar2.prototype.renderItems = function() {
      var ele = this.element;
      var items = this.items;
      if (this.trgtEle != null) {
        this.ctrlTemplate();
      } else if (ele && items.length > 0) {
        var itemEleDom = void 0;
        if (ele && ele.children.length > 0) {
          itemEleDom = ele.querySelector("." + CLS_ITEMS$1);
        }
        if (!itemEleDom) {
          itemEleDom = this.createElement("div", { className: CLS_ITEMS$1 });
        }
        this.itemsAlign(items, itemEleDom);
        ele.appendChild(itemEleDom);
      }
    };
    Toolbar2.prototype.setAttr = function(attr, element2) {
      var key = Object.keys(attr);
      var keyVal;
      for (var i = 0; i < key.length; i++) {
        keyVal = key[parseInt(i.toString(), 10)];
        if (keyVal === "class") {
          this.add(element2, attr["" + keyVal]);
        } else {
          element2.setAttribute(keyVal, attr["" + keyVal]);
        }
      }
    };
    Toolbar2.prototype.enableItems = function(items, isEnable) {
      var elements = items;
      var len = elements.length;
      var ele;
      if (isNullOrUndefined(isEnable)) {
        isEnable = true;
      }
      var enable = function(isEnable2, ele2) {
        if (isEnable2) {
          ele2.classList.remove(CLS_DISABLE$2);
          if (!isNullOrUndefined(ele2.firstElementChild)) {
            ele2.firstElementChild.setAttribute("aria-disabled", "false");
          }
        } else {
          ele2.classList.add(CLS_DISABLE$2);
          if (!isNullOrUndefined(ele2.firstElementChild)) {
            ele2.firstElementChild.setAttribute("aria-disabled", "true");
          }
        }
      };
      if (!isNullOrUndefined(len) && len >= 1) {
        for (var a = 0, element2 = [].slice.call(elements); a < len; a++) {
          var itemElement = element2[parseInt(a.toString(), 10)];
          if (typeof itemElement === "number") {
            ele = this.getElementByIndex(itemElement);
            if (isNullOrUndefined(ele)) {
              return;
            } else {
              elements[parseInt(a.toString(), 10)] = ele;
            }
          } else {
            ele = itemElement;
          }
          enable(isEnable, ele);
        }
        if (isEnable) {
          removeClass(elements, CLS_DISABLE$2);
        } else {
          addClass(elements, CLS_DISABLE$2);
        }
      } else {
        if (typeof elements === "number") {
          ele = this.getElementByIndex(elements);
          if (isNullOrUndefined(ele)) {
            return;
          }
        } else {
          ele = items;
        }
        enable(isEnable, ele);
      }
    };
    Toolbar2.prototype.getElementByIndex = function(index) {
      if (this.tbarEle[parseInt(index.toString(), 10)]) {
        return this.tbarEle[parseInt(index.toString(), 10)];
      }
      return null;
    };
    Toolbar2.prototype.addItems = function(items, index) {
      var innerItems;
      this.extendedOpen();
      var itemsDiv = this.element.querySelector("." + CLS_ITEMS$1);
      if (isNullOrUndefined(itemsDiv)) {
        this.itemsRerender(items);
        return;
      }
      var innerEle;
      var itemAgn = "Left";
      if (isNullOrUndefined(index)) {
        index = 0;
      }
      items.forEach(function(e) {
        if (!isNullOrUndefined(e.align) && e.align !== "Left" && itemAgn === "Left") {
          itemAgn = e.align;
        }
      });
      for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {
        var item = items_1[_i];
        if (isNullOrUndefined(item.type)) {
          item.type = "Button";
        }
        innerItems = selectAll("." + CLS_ITEM$2, this.element);
        item.align = itemAgn;
        innerEle = this.renderSubComponent(item, index);
        if (this.tbarEle.length >= index && innerItems.length >= 0) {
          if (isNullOrUndefined(this.scrollModule)) {
            this.destroyMode();
          }
          var algIndex = item.align[0] === "L" ? 0 : item.align[0] === "C" ? 1 : 2;
          var ele = void 0;
          if (!this.tbarAlign && itemAgn !== "Left") {
            this.tbarItemAlign(item, itemsDiv, 1);
            this.tbarAlign = true;
            ele = closest(innerItems[0], "." + CLS_ITEMS$1).children[parseInt(algIndex.toString(), 10)];
            ele.appendChild(innerEle);
            this.tbarAlgEle[(item.align + "s").toLowerCase()].push(innerEle);
            this.refreshPositioning();
          } else if (this.tbarAlign) {
            ele = closest(innerItems[0], "." + CLS_ITEMS$1).children[parseInt(algIndex.toString(), 10)];
            ele.insertBefore(innerEle, ele.children[parseInt(index.toString(), 10)]);
            this.tbarAlgEle[(item.align + "s").toLowerCase()].splice(index, 0, innerEle);
            this.refreshPositioning();
          } else if (innerItems.length === 0) {
            innerItems = selectAll("." + CLS_ITEMS$1, this.element);
            innerItems[0].appendChild(innerEle);
          } else {
            innerItems[0].parentNode.insertBefore(innerEle, innerItems[parseInt(index.toString(), 10)]);
          }
          this.items.splice(index, 0, item);
          if (item.template) {
            this.tbarEle.splice(this.tbarEle.length - 1, 1);
          }
          this.tbarEle.splice(index, 0, innerEle);
          index++;
          this.offsetWid = itemsDiv.offsetWidth;
        }
      }
      itemsDiv.style.width = "";
      this.renderOverflowMode();
      if (this.isReact) {
        this.renderReactTemplates();
      }
    };
    Toolbar2.prototype.removeItems = function(args) {
      var elements = args;
      var index;
      var innerItems = [].slice.call(selectAll("." + CLS_ITEM$2, this.element));
      if (typeof elements === "number") {
        index = parseInt(args.toString(), 10);
        this.removeItemByIndex(index, innerItems);
      } else {
        if (elements && elements.length > 1) {
          for (var _i = 0, _a = [].slice.call(elements); _i < _a.length; _i++) {
            var ele = _a[_i];
            index = this.tbarEle.indexOf(ele);
            this.removeItemByIndex(index, innerItems);
            innerItems = selectAll("." + CLS_ITEM$2, this.element);
          }
        } else {
          var ele = elements && elements.length && elements.length === 1 ? elements[0] : args;
          index = innerItems.indexOf(ele);
          this.removeItemByIndex(index, innerItems);
        }
      }
      this.resize();
    };
    Toolbar2.prototype.removeItemByIndex = function(index, innerItems) {
      if (this.tbarEle[parseInt(index.toString(), 10)] && innerItems[parseInt(index.toString(), 10)]) {
        var eleIdx = this.tbarEle.indexOf(innerItems[parseInt(index.toString(), 10)]);
        if (this.tbarAlign) {
          var indexAgn = this.tbarAlgEle[(this.items[parseInt(eleIdx.toString(), 10)].align + "s").toLowerCase()].indexOf(this.tbarEle[parseInt(eleIdx.toString(), 10)]);
          this.tbarAlgEle[(this.items[parseInt(eleIdx.toString(), 10)].align + "s").toLowerCase()].splice(parseInt(indexAgn.toString(), 10), 1);
        }
        if (this.isReact) {
          this.clearTemplate();
        }
        var btnItem = innerItems[parseInt(index.toString(), 10)].querySelector(".e-control.e-btn");
        if (!isNullOrUndefined(btnItem) && !isNullOrUndefined(btnItem.ej2_instances[0]) && !btnItem.ej2_instances[0].isDestroyed) {
          btnItem.ej2_instances[0].destroy();
        }
        detach(innerItems[parseInt(index.toString(), 10)]);
        this.items.splice(eleIdx, 1);
        this.tbarEle.splice(eleIdx, 1);
      }
    };
    Toolbar2.prototype.templateRender = function(templateProp, innerEle, item, index) {
      var itemType = item.type;
      var eleObj = templateProp;
      var isComponent;
      if (typeof templateProp === "object") {
        isComponent = typeof eleObj.appendTo === "function";
      }
      if (typeof templateProp === "string" || !isComponent) {
        var templateFn = void 0;
        var val = templateProp;
        var regEx = new RegExp(/<(?=.*? .*?\/ ?>|br|hr|input|!--|wbr)[a-z]+.*?>|<([a-z]+).*?<\/\1>/i);
        val = typeof templateProp === "string" ? templateProp.trim() : templateProp;
        try {
          if (typeof templateProp === "object" && !isNullOrUndefined(templateProp.tagName)) {
            innerEle.appendChild(templateProp);
          } else if (typeof templateProp === "string" && regEx.test(val)) {
            innerEle.innerHTML = val;
          } else if (document.querySelectorAll(val).length) {
            var ele = document.querySelector(val);
            var tempStr = ele.outerHTML.trim();
            innerEle.appendChild(ele);
            ele.style.display = "";
            if (!isNullOrUndefined(tempStr)) {
              this.tempId.push(val);
            }
          } else {
            templateFn = compile$1(val);
          }
        } catch (e) {
          templateFn = compile$1(val);
        }
        var tempArray = void 0;
        if (!isNullOrUndefined(templateFn)) {
          var toolbarTemplateID = this.element.id + index + "_template";
          tempArray = templateFn({}, this, "template", toolbarTemplateID, this.isStringTemplate);
        }
        if (!isNullOrUndefined(tempArray) && tempArray.length > 0) {
          [].slice.call(tempArray).forEach(function(ele2) {
            if (!isNullOrUndefined(ele2.tagName)) {
              ele2.style.display = "";
            }
            innerEle.appendChild(ele2);
          });
        }
      } else if (itemType === "Input") {
        var ele = this.createElement("input");
        if (item.id) {
          ele.id = item.id;
        } else {
          ele.id = getUniqueID("tbr-ipt");
        }
        innerEle.appendChild(ele);
        eleObj.appendTo(ele);
      }
      this.add(innerEle, CLS_TEMPLATE$1);
      this.tbarEle.push(innerEle);
    };
    Toolbar2.prototype.buttonRendering = function(item, innerEle) {
      var dom = this.createElement("button", { className: CLS_TBARBTN });
      dom.setAttribute("type", "button");
      var textStr = item.text;
      var iconCss;
      var iconPos;
      if (item.id) {
        dom.id = item.id;
      } else {
        dom.id = getUniqueID("e-tbr-btn");
      }
      var btnTxt = this.createElement("span", { className: "e-tbar-btn-text" });
      if (textStr) {
        btnTxt.innerHTML = this.enableHtmlSanitizer ? SanitizeHtmlHelper.sanitize(textStr) : textStr;
        dom.appendChild(btnTxt);
        dom.classList.add("e-tbtn-txt");
      } else {
        this.add(innerEle, "e-tbtn-align");
      }
      if (item.prefixIcon || item.suffixIcon) {
        if (item.prefixIcon && item.suffixIcon || item.prefixIcon) {
          iconCss = item.prefixIcon + " e-icons";
          iconPos = "Left";
        } else {
          iconCss = item.suffixIcon + " e-icons";
          iconPos = "Right";
        }
      }
      var btnObj = new Button({ iconCss, iconPosition: iconPos });
      btnObj.createElement = this.createElement;
      btnObj.appendTo(dom);
      if (item.width) {
        setStyleAttribute(dom, { "width": formatUnit(item.width) });
      }
      return dom;
    };
    Toolbar2.prototype.renderSubComponent = function(item, index) {
      var dom;
      var innerEle = this.createElement("div", { className: CLS_ITEM$2 });
      var tempDom = this.createElement("div", {
        innerHTML: this.enableHtmlSanitizer ? SanitizeHtmlHelper.sanitize(item.tooltipText) : item.tooltipText
      });
      if (!this.tbarEle) {
        this.tbarEle = [];
      }
      if (item.htmlAttributes) {
        this.setAttr(item.htmlAttributes, innerEle);
      }
      if (item.tooltipText) {
        innerEle.setAttribute("title", tempDom.textContent);
      }
      if (item.cssClass) {
        innerEle.className = innerEle.className + " " + item.cssClass;
      }
      if (item.template) {
        this.templateRender(item.template, innerEle, item, index);
      } else {
        switch (item.type) {
          case "Button":
            dom = this.buttonRendering(item, innerEle);
            dom.setAttribute("tabindex", isNullOrUndefined(item.tabIndex) ? "-1" : item.tabIndex.toString());
            dom.setAttribute("data-tabindex", isNullOrUndefined(item.tabIndex) ? "-1" : item.tabIndex.toString());
            dom.setAttribute("aria-label", item.text || item.tooltipText);
            dom.setAttribute("aria-disabled", "false");
            innerEle.appendChild(dom);
            innerEle.addEventListener("click", this.itemClick.bind(this));
            break;
          case "Separator":
            this.add(innerEle, CLS_SEPARATOR);
            break;
        }
      }
      if (item.showTextOn) {
        var sTxt = item.showTextOn;
        if (sTxt === "Toolbar") {
          this.add(innerEle, CLS_POPUPTEXT);
          this.add(innerEle, "e-tbtn-align");
        } else if (sTxt === "Overflow") {
          this.add(innerEle, CLS_TBARTEXT);
        }
      }
      if (item.overflow) {
        var overflow = item.overflow;
        if (overflow === "Show") {
          this.add(innerEle, CLS_TBAROVERFLOW);
        } else if (overflow === "Hide") {
          if (!innerEle.classList.contains(CLS_SEPARATOR)) {
            this.add(innerEle, CLS_POPOVERFLOW);
          }
        }
      }
      if (item.overflow !== "Show" && item.showAlwaysInPopup && !innerEle.classList.contains(CLS_SEPARATOR)) {
        this.add(innerEle, CLS_POPPRI);
        this.popupPriCount++;
      }
      if (item.disabled) {
        this.add(innerEle, CLS_DISABLE$2);
      }
      if (item.visible === false) {
        this.add(innerEle, CLS_HIDDEN$1);
      }
      return innerEle;
    };
    Toolbar2.prototype.getDataTabindex = function(ele) {
      return isNullOrUndefined(ele.getAttribute("data-tabindex")) ? "-1" : ele.getAttribute("data-tabindex");
    };
    Toolbar2.prototype.itemClick = function(e) {
      this.activeEleSwitch(e.currentTarget);
    };
    Toolbar2.prototype.activeEleSwitch = function(ele) {
      this.activeEleRemove(ele.firstElementChild);
      this.activeEle.focus();
    };
    Toolbar2.prototype.activeEleRemove = function(curEle) {
      if (!isNullOrUndefined(this.activeEle)) {
        this.activeEle.setAttribute("tabindex", this.getDataTabindex(this.activeEle));
      }
      this.activeEle = curEle;
      if (this.getDataTabindex(this.activeEle) === "-1") {
        if (isNullOrUndefined(this.trgtEle) && !curEle.parentElement.classList.contains(CLS_TEMPLATE$1)) {
          this.updateTabIndex("-1");
          curEle.removeAttribute("tabindex");
        } else {
          this.activeEle.setAttribute("tabindex", this.getDataTabindex(this.activeEle));
        }
      }
    };
    Toolbar2.prototype.getPersistData = function() {
      return this.addOnPersist([]);
    };
    Toolbar2.prototype.getModuleName = function() {
      return "toolbar";
    };
    Toolbar2.prototype.itemsRerender = function(newProp) {
      this.items = this.tbarItemsCol;
      if (this.isReact || this.isAngular) {
        this.clearTemplate();
      }
      this.destroyMode();
      this.destroyItems();
      this.items = newProp;
      this.tbarItemsCol = this.items;
      this.renderItems();
      this.renderOverflowMode();
      if (this.isReact) {
        this.renderReactTemplates();
      }
    };
    Toolbar2.prototype.resize = function() {
      var ele = this.element;
      this.tbResize = true;
      if (this.tbarAlign) {
        this.itemPositioning();
      }
      if (this.popObj && this.overflowMode === "Popup") {
        this.popObj.hide();
      }
      var checkOverflow = this.checkOverflow(ele, ele.getElementsByClassName(CLS_ITEMS$1)[0]);
      if (!checkOverflow) {
        this.destroyScroll();
        var multirowele = ele.querySelector("." + CLS_ITEMS$1);
        if (!isNullOrUndefined(multirowele)) {
          this.remove(multirowele, CLS_MULTIROWPOS);
          if (this.tbarAlign) {
            this.add(multirowele, CLS_TBARPOS);
          }
        }
      }
      if (checkOverflow && this.scrollModule && this.offsetWid === ele.offsetWidth) {
        return;
      }
      if (this.offsetWid > ele.offsetWidth || checkOverflow) {
        this.renderOverflowMode();
      }
      if (this.popObj) {
        if (this.overflowMode === "Extended") {
          var eleStyles = window.getComputedStyle(this.element);
          this.popObj.width = parseFloat(eleStyles.width) + parseFloat(eleStyles.borderRightWidth) * 2;
        }
        if (this.tbarAlign) {
          this.removePositioning();
        }
        this.popupRefresh(this.popObj.element, false);
        if (this.tbarAlign) {
          this.refreshPositioning();
        }
      }
      if (this.element.querySelector("." + CLS_HSCROLLBAR)) {
        this.scrollStep = this.element.querySelector("." + CLS_HSCROLLBAR).offsetWidth;
      }
      this.offsetWid = ele.offsetWidth;
      this.tbResize = false;
      this.separator();
    };
    Toolbar2.prototype.extendedOpen = function() {
      var sib = this.element.querySelector("." + CLS_EXTENDABLECLASS);
      if (this.overflowMode === "Extended" && sib) {
        this.isExtendedOpen = sib.classList.contains(CLS_POPUPOPEN);
      }
    };
    Toolbar2.prototype.updateHideEleTabIndex = function(ele, isHidden, isElement, eleIndex, innerItems) {
      if (isElement) {
        eleIndex = innerItems.indexOf(ele);
      }
      var nextEle = innerItems[++eleIndex];
      while (nextEle) {
        var skipEle = this.eleContains(nextEle);
        if (!skipEle) {
          var dataTabIndex = nextEle.firstElementChild.getAttribute("data-tabindex");
          if (isHidden && dataTabIndex === "-1") {
            nextEle.firstElementChild.setAttribute("tabindex", "0");
          } else if (dataTabIndex !== nextEle.firstElementChild.getAttribute("tabindex")) {
            nextEle.firstElementChild.setAttribute("tabindex", dataTabIndex);
          }
          break;
        }
        nextEle = innerItems[++eleIndex];
      }
    };
    Toolbar2.prototype.onPropertyChanged = function(newProp, oldProp) {
      var tEle = this.element;
      var wid = tEle.offsetWidth;
      this.extendedOpen();
      for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {
        var prop = _a[_i];
        switch (prop) {
          case "items":
            if (!(newProp.items instanceof Array && oldProp.items instanceof Array)) {
              var changedProb = Object.keys(newProp.items);
              for (var i = 0; i < changedProb.length; i++) {
                var index = parseInt(Object.keys(newProp.items)[parseInt(i.toString(), 10)], 10);
                var property = Object.keys(newProp.items[parseInt(index.toString(), 10)])[0];
                var newProperty = Object(newProp.items[parseInt(index.toString(), 10)])["" + property];
                if (typeof newProperty !== "function") {
                  if (this.tbarAlign || property === "align") {
                    this.refresh();
                    this.trigger("created");
                    break;
                  }
                  var popupPriCheck = property === "showAlwaysInPopup" && !newProperty;
                  var booleanCheck = property === "overflow" && this.popupPriCount !== 0;
                  if (popupPriCheck || this.items[parseInt(index.toString(), 10)].showAlwaysInPopup && booleanCheck) {
                    --this.popupPriCount;
                  }
                  if (isNullOrUndefined(this.scrollModule)) {
                    this.destroyMode();
                  }
                  var itemCol = [].slice.call(selectAll("." + CLS_ITEMS$1 + " ." + CLS_ITEM$2, tEle));
                  if (this.isReact && this.items[parseInt(index.toString(), 10)].template) {
                    this.clearTemplate();
                  }
                  detach(itemCol[parseInt(index.toString(), 10)]);
                  this.tbarEle.splice(index, 1);
                  this.addItems([this.items[parseInt(index.toString(), 10)]], index);
                  this.items.splice(index, 1);
                  if (this.items[parseInt(index.toString(), 10)].template) {
                    this.tbarEle.splice(this.items.length, 1);
                  }
                }
              }
            } else {
              this.itemsRerender(newProp.items);
            }
            break;
          case "width":
            setStyleAttribute(tEle, { "width": formatUnit(newProp.width) });
            this.renderOverflowMode();
            if (this.popObj && wid < tEle.offsetWidth) {
              this.popupRefresh(this.popObj.element, false);
            }
            break;
          case "height":
            setStyleAttribute(this.element, { "height": formatUnit(newProp.height) });
            break;
          case "overflowMode":
            this.destroyMode();
            this.renderOverflowMode();
            if (this.enableRtl) {
              this.add(tEle, CLS_RTL$2);
            }
            this.refreshOverflow();
            break;
          case "enableRtl":
            if (newProp.enableRtl) {
              this.add(tEle, CLS_RTL$2);
            } else {
              this.remove(tEle, CLS_RTL$2);
            }
            if (!isNullOrUndefined(this.scrollModule)) {
              if (newProp.enableRtl) {
                this.add(this.scrollModule.element, CLS_RTL$2);
              } else {
                this.remove(this.scrollModule.element, CLS_RTL$2);
              }
            }
            if (!isNullOrUndefined(this.popObj)) {
              if (newProp.enableRtl) {
                this.add(this.popObj.element, CLS_RTL$2);
              } else {
                this.remove(this.popObj.element, CLS_RTL$2);
              }
            }
            if (this.tbarAlign) {
              this.itemPositioning();
            }
            break;
          case "scrollStep":
            if (this.scrollModule) {
              this.scrollModule.scrollStep = this.scrollStep;
            }
            break;
          case "enableCollision":
            if (this.popObj) {
              this.popObj.collision = { Y: this.enableCollision ? "flip" : "none" };
            }
            break;
          case "cssClass":
            if (oldProp.cssClass) {
              removeClass([this.element], oldProp.cssClass.split(" "));
            }
            if (newProp.cssClass) {
              addClass([this.element], newProp.cssClass.split(" "));
            }
            break;
          case "allowKeyboard":
            this.unwireKeyboardEvent();
            if (newProp.allowKeyboard) {
              this.wireKeyboardEvent();
            }
            break;
        }
      }
    };
    Toolbar2.prototype.hideItem = function(index, value) {
      var isElement = typeof index === "object" ? true : false;
      var eleIndex = index;
      var ele;
      if (!isElement && isNullOrUndefined(eleIndex)) {
        return;
      }
      var innerItems = [].slice.call(selectAll("." + CLS_ITEM$2, this.element));
      if (isElement) {
        ele = index;
      } else if (this.tbarEle[parseInt(eleIndex.toString(), 10)]) {
        var innerItems_1 = [].slice.call(selectAll("." + CLS_ITEM$2, this.element));
        ele = innerItems_1[parseInt(eleIndex.toString(), 10)];
      }
      if (ele) {
        if (value) {
          ele.classList.add(CLS_HIDDEN$1);
          if (!ele.classList.contains(CLS_SEPARATOR)) {
            if (isNullOrUndefined(ele.firstElementChild.getAttribute("tabindex")) || ele.firstElementChild.getAttribute("tabindex") !== "-1") {
              this.updateHideEleTabIndex(ele, value, isElement, eleIndex, innerItems);
            }
          }
        } else {
          ele.classList.remove(CLS_HIDDEN$1);
          if (!ele.classList.contains(CLS_SEPARATOR)) {
            this.updateHideEleTabIndex(ele, value, isElement, eleIndex, innerItems);
          }
        }
        this.refreshOverflow();
      }
    };
    __decorate$l([
      Collection([], Item)
    ], Toolbar2.prototype, "items", void 0);
    __decorate$l([
      Property("auto")
    ], Toolbar2.prototype, "width", void 0);
    __decorate$l([
      Property("auto")
    ], Toolbar2.prototype, "height", void 0);
    __decorate$l([
      Property("")
    ], Toolbar2.prototype, "cssClass", void 0);
    __decorate$l([
      Property("Scrollable")
    ], Toolbar2.prototype, "overflowMode", void 0);
    __decorate$l([
      Property()
    ], Toolbar2.prototype, "scrollStep", void 0);
    __decorate$l([
      Property(true)
    ], Toolbar2.prototype, "enableCollision", void 0);
    __decorate$l([
      Property(true)
    ], Toolbar2.prototype, "enableHtmlSanitizer", void 0);
    __decorate$l([
      Property(true)
    ], Toolbar2.prototype, "allowKeyboard", void 0);
    __decorate$l([
      Event$1()
    ], Toolbar2.prototype, "clicked", void 0);
    __decorate$l([
      Event$1()
    ], Toolbar2.prototype, "created", void 0);
    __decorate$l([
      Event$1()
    ], Toolbar2.prototype, "destroyed", void 0);
    __decorate$l([
      Event$1()
    ], Toolbar2.prototype, "beforeCreate", void 0);
    Toolbar2 = __decorate$l([
      NotifyPropertyChanges
    ], Toolbar2);
    return Toolbar2;
  }(Component)
);
var __extends$v = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$k = globalThis && globalThis.__decorate || function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i = decorators.length - 1; i >= 0; i--)
      if (d = decorators[i])
        r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var CLS_ACRDN_ROOT = "e-acrdn-root";
var CLS_ROOT = "e-accordion";
var CLS_ITEM$1 = "e-acrdn-item";
var CLS_ITEMFOCUS = "e-item-focus";
var CLS_ITEMHIDE = "e-hide";
var CLS_HEADER$1 = "e-acrdn-header";
var CLS_HEADERICN = "e-acrdn-header-icon";
var CLS_HEADERCTN = "e-acrdn-header-content";
var CLS_CONTENT$1 = "e-acrdn-panel";
var CLS_CTENT = "e-acrdn-content";
var CLS_TOOGLEICN = "e-toggle-icon";
var CLS_COLLAPSEICN = "e-tgl-collapse-icon e-icons";
var CLS_EXPANDICN = "e-expand-icon";
var CLS_RTL$1 = "e-rtl";
var CLS_CTNHIDE = "e-content-hide";
var CLS_SLCT = "e-select";
var CLS_SLCTED = "e-selected";
var CLS_ACTIVE$1 = "e-active";
var CLS_ANIMATE = "e-animate";
var CLS_DISABLE$1 = "e-overlay";
var CLS_TOGANIMATE = "e-toggle-animation";
var CLS_NEST$1 = "e-nested";
var CLS_EXPANDSTATE = "e-expand-state";
var CLS_CONTAINER = "e-accordion-container";
var AccordionActionSettings = (
  /** @class */
  function(_super) {
    __extends$v(AccordionActionSettings2, _super);
    function AccordionActionSettings2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$k([
      Property("SlideDown")
    ], AccordionActionSettings2.prototype, "effect", void 0);
    __decorate$k([
      Property(400)
    ], AccordionActionSettings2.prototype, "duration", void 0);
    __decorate$k([
      Property("linear")
    ], AccordionActionSettings2.prototype, "easing", void 0);
    return AccordionActionSettings2;
  }(ChildProperty)
);
var AccordionAnimationSettings = (
  /** @class */
  function(_super) {
    __extends$v(AccordionAnimationSettings2, _super);
    function AccordionAnimationSettings2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$k([
      Complex({ effect: "SlideUp", duration: 400, easing: "linear" }, AccordionActionSettings)
    ], AccordionAnimationSettings2.prototype, "collapse", void 0);
    __decorate$k([
      Complex({ effect: "SlideDown", duration: 400, easing: "linear" }, AccordionActionSettings)
    ], AccordionAnimationSettings2.prototype, "expand", void 0);
    return AccordionAnimationSettings2;
  }(ChildProperty)
);
var AccordionItem = (
  /** @class */
  function(_super) {
    __extends$v(AccordionItem2, _super);
    function AccordionItem2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$k([
      Property(null)
    ], AccordionItem2.prototype, "content", void 0);
    __decorate$k([
      Property(null)
    ], AccordionItem2.prototype, "header", void 0);
    __decorate$k([
      Property(null)
    ], AccordionItem2.prototype, "cssClass", void 0);
    __decorate$k([
      Property(null)
    ], AccordionItem2.prototype, "iconCss", void 0);
    __decorate$k([
      Property(false)
    ], AccordionItem2.prototype, "expanded", void 0);
    __decorate$k([
      Property(true)
    ], AccordionItem2.prototype, "visible", void 0);
    __decorate$k([
      Property(false)
    ], AccordionItem2.prototype, "disabled", void 0);
    __decorate$k([
      Property()
    ], AccordionItem2.prototype, "id", void 0);
    return AccordionItem2;
  }(ChildProperty)
);
var Accordion = (
  /** @class */
  function(_super) {
    __extends$v(Accordion2, _super);
    function Accordion2(options, element2) {
      var _this = _super.call(this, options, element2) || this;
      _this.keyConfigs = {
        moveUp: "uparrow",
        moveDown: "downarrow",
        enter: "enter",
        space: "space",
        home: "home",
        end: "end"
      };
      return _this;
    }
    Accordion2.prototype.destroy = function() {
      if (this.isReact || this.isAngular || this.isVue) {
        this.clearTemplate();
      }
      var ele = this.element;
      _super.prototype.destroy.call(this);
      this.unwireEvents();
      this.isDestroy = true;
      this.restoreContent(null);
      [].slice.call(ele.children).forEach(function(el) {
        ele.removeChild(el);
      });
      if (this.trgtEle) {
        this.trgtEle = null;
        while (this.ctrlTem.firstElementChild) {
          ele.appendChild(this.ctrlTem.firstElementChild);
        }
        this.ctrlTem = null;
      }
      ele.classList.remove(CLS_ACRDN_ROOT);
      ele.removeAttribute("style");
      this.element.removeAttribute("data-ripple");
      if (!this.isNested && isRippleEnabled) {
        this.removeRippleEffect();
      }
    };
    Accordion2.prototype.preRender = function() {
      var nested = closest(this.element, "." + CLS_CONTENT$1);
      this.isNested = false;
      this.templateEle = [];
      if (!this.isDestroy) {
        this.isDestroy = false;
      }
      if (nested && nested.firstElementChild && nested.firstElementChild.firstElementChild) {
        if (nested.firstElementChild.firstElementChild.classList.contains(CLS_ROOT)) {
          nested.classList.add(CLS_NEST$1);
          this.isNested = true;
        }
      } else {
        this.element.classList.add(CLS_ACRDN_ROOT);
      }
      if (this.enableRtl) {
        this.add(this.element, CLS_RTL$1);
      }
    };
    Accordion2.prototype.add = function(ele, val) {
      ele.classList.add(val);
    };
    Accordion2.prototype.remove = function(ele, val) {
      ele.classList.remove(val);
    };
    Accordion2.prototype.render = function() {
      this.initializeHeaderTemplate();
      this.initializeItemTemplate();
      this.initialize();
      this.renderControl();
      this.wireEvents();
      this.renderComplete();
    };
    Accordion2.prototype.initialize = function() {
      var width = formatUnit(this.width);
      var height = formatUnit(this.height);
      setStyleAttribute(this.element, { "width": width, "height": height });
      if (isNullOrUndefined(this.initExpand)) {
        this.initExpand = [];
      }
      if (this.expandedIndices.length > 0) {
        this.initExpand = this.expandedIndices;
      }
    };
    Accordion2.prototype.renderControl = function() {
      this.trgtEle = this.element.children.length > 0 ? select$1("div", this.element) : null;
      this.renderItems();
      this.initItemExpand();
    };
    Accordion2.prototype.wireFocusEvents = function() {
      var acrdItem = [].slice.call(this.element.querySelectorAll("." + CLS_ITEM$1));
      for (var _i = 0, acrdItem_1 = acrdItem; _i < acrdItem_1.length; _i++) {
        var item = acrdItem_1[_i];
        var headerEle = item.querySelector("." + CLS_HEADER$1);
        if (item.childElementCount > 0 && headerEle) {
          EventHandler.clearEvents(headerEle);
          EventHandler.add(headerEle, "focus", this.focusIn, this);
          EventHandler.add(headerEle, "blur", this.focusOut, this);
        }
      }
    };
    Accordion2.prototype.unwireEvents = function() {
      EventHandler.remove(this.element, "click", this.clickHandler);
      if (!isNullOrUndefined(this.keyModule)) {
        this.keyModule.destroy();
      }
    };
    Accordion2.prototype.wireEvents = function() {
      EventHandler.add(this.element, "click", this.clickHandler, this);
      if (!this.isNested && !this.isDestroy) {
        this.removeRippleEffect = rippleEffect(this.element, { selector: "." + CLS_HEADER$1 });
      }
      if (!this.isNested) {
        this.keyModule = new KeyboardEvents(this.element, {
          keyAction: this.keyActionHandler.bind(this),
          keyConfigs: this.keyConfigs,
          eventName: "keydown"
        });
      }
    };
    Accordion2.prototype.templateParser = function(template) {
      if (template) {
        try {
          if (document.querySelectorAll(template).length) {
            return compile$1(document.querySelector(template).innerHTML.trim());
          } else {
            return compile$1(template);
          }
        } catch (error) {
          return compile$1(template);
        }
      }
      return void 0;
    };
    Accordion2.prototype.initializeHeaderTemplate = function() {
      if (this.headerTemplate) {
        this.headerTemplateFn = this.templateParser(this.headerTemplate);
      }
    };
    Accordion2.prototype.initializeItemTemplate = function() {
      if (this.itemTemplate) {
        this.itemTemplateFn = this.templateParser(this.itemTemplate);
      }
    };
    Accordion2.prototype.getHeaderTemplate = function() {
      return this.headerTemplateFn;
    };
    Accordion2.prototype.getItemTemplate = function() {
      return this.itemTemplateFn;
    };
    Accordion2.prototype.focusIn = function(e) {
      e.target.parentElement.classList.add(CLS_ITEMFOCUS);
    };
    Accordion2.prototype.focusOut = function(e) {
      e.target.parentElement.classList.remove(CLS_ITEMFOCUS);
    };
    Accordion2.prototype.ctrlTemplate = function() {
      this.ctrlTem = this.element.cloneNode(true);
      var innerEles;
      var rootEle = select$1("." + CLS_CONTAINER, this.element);
      if (rootEle) {
        innerEles = rootEle.children;
      } else {
        innerEles = this.element.children;
      }
      var items = [];
      [].slice.call(innerEles).forEach(function(el) {
        items.push({
          header: el.childElementCount > 0 && el.children[0] ? el.children[0] : "",
          content: el.childElementCount > 1 && el.children[1] ? el.children[1] : ""
        });
        el.parentNode.removeChild(el);
      });
      if (rootEle) {
        this.element.removeChild(rootEle);
      }
      this.setProperties({ items }, true);
    };
    Accordion2.prototype.toggleIconGenerate = function() {
      var tglIcon = this.createElement("div", { className: CLS_TOOGLEICN });
      var hdrColIcon = this.createElement("span", { className: CLS_COLLAPSEICN });
      tglIcon.appendChild(hdrColIcon);
      return tglIcon;
    };
    Accordion2.prototype.initItemExpand = function() {
      var len = this.initExpand.length;
      if (len === 0) {
        return;
      }
      if (this.expandMode === "Single") {
        this.expandItem(true, this.initExpand[len - 1]);
      } else {
        for (var i = 0; i < len; i++) {
          this.expandItem(true, this.initExpand[parseInt(i.toString(), 10)]);
        }
      }
      if (this.isReact) {
        this.renderReactTemplates();
      }
    };
    Accordion2.prototype.renderItems = function() {
      var _this = this;
      var ele = this.element;
      var innerItem;
      var innerDataSourceItem;
      if (!isNullOrUndefined(this.trgtEle)) {
        this.ctrlTemplate();
      }
      if (this.dataSource.length > 0) {
        this.dataSource.forEach(function(item, index) {
          innerDataSourceItem = _this.renderInnerItem(item, index);
          ele.appendChild(innerDataSourceItem);
          if (innerDataSourceItem.childElementCount > 0) {
            EventHandler.add(innerDataSourceItem.querySelector("." + CLS_HEADER$1), "focus", _this.focusIn, _this);
            EventHandler.add(innerDataSourceItem.querySelector("." + CLS_HEADER$1), "blur", _this.focusOut, _this);
          }
        });
      } else {
        var items = this.items;
        if (ele && items.length > 0) {
          items.forEach(function(item, index) {
            innerItem = _this.renderInnerItem(item, index);
            ele.appendChild(innerItem);
            if (innerItem.childElementCount > 0) {
              EventHandler.add(innerItem.querySelector("." + CLS_HEADER$1), "focus", _this.focusIn, _this);
              EventHandler.add(innerItem.querySelector("." + CLS_HEADER$1), "blur", _this.focusOut, _this);
            }
          });
        }
      }
      if (this.isReact) {
        this.renderReactTemplates();
      }
    };
    Accordion2.prototype.clickHandler = function(e) {
      var trgt = e.target;
      var items = this.getItems();
      var eventArgs = {};
      var tglIcon;
      var acrdEle = closest(trgt, "." + CLS_ROOT);
      if (acrdEle !== this.element) {
        return;
      }
      trgt.classList.add("e-target");
      var acrdnItem = closest(trgt, "." + CLS_ITEM$1);
      var acrdnHdr = closest(trgt, "." + CLS_HEADER$1);
      var acrdnCtn = closest(trgt, "." + CLS_CONTENT$1);
      if (acrdnItem && (isNullOrUndefined(acrdnHdr) || isNullOrUndefined(acrdnCtn))) {
        acrdnHdr = acrdnItem.children[0];
        acrdnCtn = acrdnItem.children[1];
      }
      if (acrdnHdr) {
        tglIcon = select$1("." + CLS_TOOGLEICN, acrdnHdr);
      }
      var acrdnCtnItem;
      if (acrdnHdr) {
        acrdnCtnItem = closest(acrdnHdr, "." + CLS_ITEM$1);
      } else if (acrdnCtn) {
        acrdnCtnItem = closest(acrdnCtn, "." + CLS_ITEM$1);
      }
      var index = this.getIndexByItem(acrdnItem);
      if (acrdnCtnItem) {
        eventArgs.item = items[this.getIndexByItem(acrdnCtnItem)];
      }
      eventArgs.originalEvent = e;
      var ctnCheck = !isNullOrUndefined(tglIcon) && acrdnItem.childElementCount <= 1;
      if (ctnCheck && (isNullOrUndefined(acrdnCtn) || !isNullOrUndefined(select$1("." + CLS_HEADER$1 + " ." + CLS_TOOGLEICN, acrdnCtnItem)))) {
        acrdnItem.appendChild(this.contentRendering(index));
        this.ariaAttrUpdate(acrdnItem);
        this.afterContentRender(trgt, eventArgs, acrdnItem, acrdnHdr, acrdnCtn, acrdnCtnItem);
      } else {
        this.afterContentRender(trgt, eventArgs, acrdnItem, acrdnHdr, acrdnCtn, acrdnCtnItem);
      }
      if (this.isReact) {
        this.renderReactTemplates();
      }
    };
    Accordion2.prototype.afterContentRender = function(trgt, eventArgs, acrdnItem, acrdnHdr, acrdnCtn, acrdnCtnItem) {
      var _this = this;
      var acrdActive = [];
      this.trigger("clicked", eventArgs);
      var cntclkCheck = acrdnCtn && !isNullOrUndefined(select$1(".e-target", acrdnCtn));
      var inlineAcrdnSel = "." + CLS_CONTENT$1 + " ." + CLS_ROOT;
      var inlineEleAcrdn = acrdnCtn && !isNullOrUndefined(select$1("." + CLS_ROOT, acrdnCtn)) && isNullOrUndefined(closest(trgt, inlineAcrdnSel));
      var nestContCheck = acrdnCtn && isNullOrUndefined(select$1("." + CLS_ROOT, acrdnCtn)) || !(closest(trgt, "." + CLS_ROOT) === this.element);
      cntclkCheck = cntclkCheck && (inlineEleAcrdn || nestContCheck);
      trgt.classList.remove("e-target");
      if (trgt.classList.contains(CLS_CONTENT$1) || trgt.classList.contains(CLS_CTENT) || cntclkCheck) {
        return;
      }
      var acrdcontainer = this.element.querySelector("." + CLS_CONTAINER);
      var acrdnchild = acrdcontainer ? acrdcontainer.children : this.element.children;
      [].slice.call(acrdnchild).forEach(function(el2) {
        if (el2.classList.contains(CLS_ACTIVE$1)) {
          acrdActive.push(el2);
        }
      });
      var acrdAniEle = [].slice.call(this.element.querySelectorAll("." + CLS_ITEM$1 + " [" + CLS_ANIMATE + "]"));
      if (acrdAniEle.length > 0) {
        for (var _i = 0, acrdAniEle_1 = acrdAniEle; _i < acrdAniEle_1.length; _i++) {
          var el = acrdAniEle_1[_i];
          acrdActive.push(el.parentElement);
        }
      }
      var sameContentCheck = acrdActive.indexOf(acrdnCtnItem) !== -1 && acrdnCtn.getAttribute("e-animate") === "true";
      var sameHeader = false;
      if (!isNullOrUndefined(acrdnItem) && !isNullOrUndefined(acrdnHdr)) {
        var acrdnCtn_1 = select$1("." + CLS_CONTENT$1, acrdnItem);
        var acrdnRoot = closest(acrdnItem, "." + CLS_ACRDN_ROOT);
        var expandState = acrdnRoot.querySelector("." + CLS_EXPANDSTATE);
        if (isNullOrUndefined(acrdnCtn_1)) {
          return;
        }
        sameHeader = expandState === acrdnItem;
        if (isVisible(acrdnCtn_1) && (!sameContentCheck || acrdnCtnItem.classList.contains(CLS_SLCTED))) {
          this.collapse(acrdnCtn_1);
        } else {
          if (acrdActive.length > 0 && this.expandMode === "Single" && !sameContentCheck) {
            acrdActive.forEach(function(el2) {
              _this.collapse(select$1("." + CLS_CONTENT$1, el2));
              el2.classList.remove(CLS_EXPANDSTATE);
            });
          }
          this.expand(acrdnCtn_1);
        }
        if (!isNullOrUndefined(expandState) && !sameHeader) {
          expandState.classList.remove(CLS_EXPANDSTATE);
        }
      }
    };
    Accordion2.prototype.eleMoveFocus = function(action, root, trgt) {
      var clst;
      var clstItem = closest(trgt, "." + CLS_ITEM$1);
      if (trgt === root) {
        clst = (action === "moveUp" ? trgt.lastElementChild : trgt).querySelector("." + CLS_HEADER$1);
      } else if (trgt.classList.contains(CLS_HEADER$1)) {
        clstItem = action === "moveUp" ? clstItem.previousElementSibling : clstItem.nextElementSibling;
        if (clstItem) {
          clst = select$1("." + CLS_HEADER$1, clstItem);
        }
      }
      if (clst) {
        clst.focus();
      }
    };
    Accordion2.prototype.keyActionHandler = function(e) {
      var trgt = e.target;
      var header = closest(e.target, CLS_HEADER$1);
      if (isNullOrUndefined(header) && !trgt.classList.contains(CLS_ROOT) && !trgt.classList.contains(CLS_HEADER$1)) {
        return;
      }
      var clst;
      var root = this.element;
      var content;
      switch (e.action) {
        case "moveUp":
          this.eleMoveFocus(e.action, root, trgt);
          break;
        case "moveDown":
          this.eleMoveFocus(e.action, root, trgt);
          break;
        case "space":
        case "enter":
          content = trgt.nextElementSibling;
          if (!isNullOrUndefined(content) && content.classList.contains(CLS_CONTENT$1)) {
            if (content.getAttribute("e-animate") !== "true") {
              trgt.click();
            }
          } else {
            trgt.click();
          }
          e.preventDefault();
          break;
        case "home":
        case "end":
          clst = e.action === "home" ? root.firstElementChild.children[0] : root.lastElementChild.children[0];
          clst.focus();
          e.preventDefault();
          break;
      }
    };
    Accordion2.prototype.headerEleGenerate = function() {
      var header = this.createElement("div", { className: CLS_HEADER$1, id: getUniqueID("acrdn_header") });
      var ariaAttr = {
        "tabindex": "0",
        "role": "button",
        "aria-disabled": "false",
        "aria-expanded": "false"
      };
      attributes(header, ariaAttr);
      return header;
    };
    Accordion2.prototype.renderInnerItem = function(item, index) {
      var innerEle = this.createElement("div", {
        className: CLS_ITEM$1,
        id: item.id || getUniqueID("acrdn_item")
      });
      if (this.headerTemplate) {
        var ctnEle = this.headerEleGenerate();
        var hdrEle = this.createElement("div", { className: CLS_HEADERCTN });
        ctnEle.appendChild(hdrEle);
        append2(this.getHeaderTemplate()(item, this, "headerTemplate", this.element.id + "_headerTemplate", false), hdrEle);
        innerEle.appendChild(ctnEle);
        ctnEle.appendChild(this.toggleIconGenerate());
        this.add(innerEle, CLS_SLCT);
        return innerEle;
      }
      if (item.header && this.angularnativeCondiCheck(item, "header")) {
        if (this.enableHtmlSanitizer && typeof item.header === "string") {
          item.header = SanitizeHtmlHelper.sanitize(item.header);
        }
        var ctnEle = this.headerEleGenerate();
        var hdrEle = this.createElement("div", { className: CLS_HEADERCTN });
        ctnEle.appendChild(hdrEle);
        ctnEle.appendChild(this.fetchElement(hdrEle, item.header, index, true));
        innerEle.appendChild(ctnEle);
      }
      var hdr = select$1("." + CLS_HEADER$1, innerEle);
      if (item.expanded && !isNullOrUndefined(index) && !this.enablePersistence) {
        if (this.initExpand.indexOf(index) === -1) {
          this.initExpand.push(index);
        }
      }
      if (item.cssClass) {
        addClass([innerEle], item.cssClass.split(" "));
      }
      if (item.disabled) {
        addClass([innerEle], CLS_DISABLE$1);
      }
      if (item.visible === false) {
        addClass([innerEle], CLS_ITEMHIDE);
      }
      if (item.iconCss) {
        var hdrIcnEle = this.createElement("div", { className: CLS_HEADERICN });
        var icon = this.createElement("span", { className: item.iconCss + " e-icons" });
        hdrIcnEle.appendChild(icon);
        if (isNullOrUndefined(hdr)) {
          hdr = this.headerEleGenerate();
          hdr.appendChild(hdrIcnEle);
          innerEle.appendChild(hdr);
        } else {
          hdr.insertBefore(hdrIcnEle, hdr.childNodes[0]);
        }
      }
      if (item.content && this.angularnativeCondiCheck(item, "content")) {
        var hdrIcon = this.toggleIconGenerate();
        if (isNullOrUndefined(hdr)) {
          hdr = this.headerEleGenerate();
          innerEle.appendChild(hdr);
        }
        hdr.appendChild(hdrIcon);
        this.add(innerEle, CLS_SLCT);
      }
      return innerEle;
    };
    Accordion2.prototype.angularnativeCondiCheck = function(item, prop) {
      var property = prop === "content" ? item.content : item.header;
      var content = property;
      if (this.isAngular && !isNullOrUndefined(content.elementRef)) {
        var data = content.elementRef.nativeElement.data;
        if (isNullOrUndefined(data) || data === "" || data.indexOf("bindings=") === -1) {
          return true;
        }
        var parseddata = JSON.parse(content.elementRef.nativeElement.data.replace("bindings=", ""));
        if (!isNullOrUndefined(parseddata) && parseddata["ng-reflect-ng-if"] === "false") {
          return false;
        } else {
          return true;
        }
      } else {
        return true;
      }
    };
    Accordion2.prototype.fetchElement = function(ele, value, index, isHeader) {
      var templateFn;
      var temString;
      try {
        if (document.querySelectorAll(value).length && value !== "Button") {
          var eleVal = document.querySelector(value);
          temString = eleVal.outerHTML.trim();
          ele.appendChild(eleVal);
          eleVal.style.display = "";
        } else {
          templateFn = compile$1(value);
        }
      } catch (e) {
        if (typeof value === "string") {
          ele.innerHTML = SanitizeHtmlHelper.sanitize(value);
        } else if (!isNullOrUndefined(this.trgtEle) && value instanceof HTMLElement) {
          ele.appendChild(value);
          ele.firstElementChild.style.display = "";
        } else {
          templateFn = compile$1(value);
        }
      }
      var tempArray;
      if (!isNullOrUndefined(templateFn)) {
        if (this.isReact) {
          this.renderReactTemplates();
        }
        var templateProps = void 0;
        var templateName = void 0;
        if (ele.classList.contains(CLS_HEADERCTN)) {
          templateProps = this.element.id + index + "_header";
          templateName = "header";
        } else if (ele.classList.contains(CLS_CTENT)) {
          templateProps = this.element.id + index + "_content";
          templateName = "content";
        }
        tempArray = templateFn({}, this, templateName, templateProps, this.isStringTemplate);
      }
      if (!isNullOrUndefined(tempArray) && tempArray.length > 0 && !(isNullOrUndefined(tempArray[0].tagName) && tempArray.length === 1)) {
        [].slice.call(tempArray).forEach(function(el) {
          if (!isNullOrUndefined(el.tagName)) {
            el.style.display = "";
          }
          ele.appendChild(el);
        });
      } else if (ele.childElementCount === 0) {
        ele.innerHTML = SanitizeHtmlHelper.sanitize(value);
      }
      if (!isNullOrUndefined(temString)) {
        if (this.templateEle.indexOf(value) === -1) {
          this.templateEle.push(value);
        }
      }
      return ele;
    };
    Accordion2.prototype.ariaAttrUpdate = function(itemEle) {
      var header = select$1("." + CLS_HEADER$1, itemEle);
      var content = select$1("." + CLS_CONTENT$1, itemEle);
      header.setAttribute("aria-controls", content.id);
      content.setAttribute("aria-labelledby", header.id);
      content.setAttribute("role", "region");
    };
    Accordion2.prototype.contentRendering = function(index) {
      var itemcnt = this.createElement("div", { className: CLS_CONTENT$1 + " " + CLS_CTNHIDE, id: getUniqueID("acrdn_panel") });
      attributes(itemcnt, { "aria-hidden": "true" });
      var ctn = this.createElement("div", { className: CLS_CTENT });
      if (this.dataSource.length > 0) {
        if (this.isReact) {
          this.renderReactTemplates();
        }
        append2(this.getItemTemplate()(this.dataSource[parseInt(index.toString(), 10)], this, "itemTemplate", this.element.id + "_itemTemplate", false), ctn);
        itemcnt.appendChild(ctn);
      } else {
        if (this.enableHtmlSanitizer && typeof this.items[parseInt(index.toString(), 10)].content) {
          this.items[parseInt(index.toString(), 10)].content = SanitizeHtmlHelper.sanitize(this.items[parseInt(index.toString(), 10)].content);
        }
        itemcnt.appendChild(this.fetchElement(ctn, this.items[parseInt(index.toString(), 10)].content, index, false));
      }
      return itemcnt;
    };
    Accordion2.prototype.expand = function(trgt) {
      var _this = this;
      var items = this.getItems();
      var trgtItemEle = closest(trgt, "." + CLS_ITEM$1);
      if (isNullOrUndefined(trgt) || isVisible(trgt) && trgt.getAttribute("e-animate") !== "true" || trgtItemEle.classList.contains(CLS_DISABLE$1)) {
        return;
      }
      var acrdnRoot = closest(trgtItemEle, "." + CLS_ACRDN_ROOT);
      var expandState = acrdnRoot.querySelector("." + CLS_EXPANDSTATE);
      var animation = {
        name: this.animation.expand.effect,
        duration: this.animation.expand.duration,
        timingFunction: this.animation.expand.easing
      };
      var icon = select$1("." + CLS_TOOGLEICN, trgtItemEle).firstElementChild;
      var eventArgs = {
        element: trgtItemEle,
        item: items[this.getIndexByItem(trgtItemEle)],
        index: this.getIndexByItem(trgtItemEle),
        content: trgtItemEle.querySelector("." + CLS_CONTENT$1),
        isExpanded: true
      };
      this.trigger("expanding", eventArgs, function(expandArgs) {
        if (!expandArgs.cancel) {
          icon.classList.add(CLS_TOGANIMATE);
          _this.expandedItemsPush(trgtItemEle);
          if (!isNullOrUndefined(expandState)) {
            expandState.classList.remove(CLS_EXPANDSTATE);
          }
          trgtItemEle.classList.add(CLS_EXPANDSTATE);
          if (animation.name === "None") {
            _this.expandProgress("begin", icon, trgt, trgtItemEle, expandArgs);
            _this.expandProgress("end", icon, trgt, trgtItemEle, expandArgs);
          } else {
            _this.expandAnimation(animation.name, icon, trgt, trgtItemEle, animation, expandArgs);
          }
        }
      });
    };
    Accordion2.prototype.expandAnimation = function(ef, icn, trgt, trgtItemEle, animate, args) {
      var _this = this;
      var height;
      this.lastActiveItemId = trgtItemEle.id;
      if (ef === "SlideDown") {
        animate.begin = function() {
          _this.expandProgress("begin", icn, trgt, trgtItemEle, args);
          trgt.style.position = "absolute";
          height = trgtItemEle.offsetHeight;
          trgt.style.maxHeight = trgt.offsetHeight + "px";
          trgtItemEle.style.maxHeight = "";
        };
        animate.progress = function() {
          trgtItemEle.style.minHeight = height + trgt.offsetHeight + "px";
        };
        animate.end = function() {
          setStyleAttribute(trgt, { "position": "", "maxHeight": "" });
          trgtItemEle.style.minHeight = "";
          _this.expandProgress("end", icn, trgt, trgtItemEle, args);
        };
      } else {
        animate.begin = function() {
          _this.expandProgress("begin", icn, trgt, trgtItemEle, args);
        };
        animate.end = function() {
          _this.expandProgress("end", icn, trgt, trgtItemEle, args);
        };
      }
      new Animation$1(animate).animate(trgt);
    };
    Accordion2.prototype.expandProgress = function(progress, icon, trgt, trgtItemEle, eventArgs) {
      this.remove(trgt, CLS_CTNHIDE);
      this.add(trgtItemEle, CLS_SLCTED);
      this.add(icon, CLS_EXPANDICN);
      if (progress === "end") {
        this.add(trgtItemEle, CLS_ACTIVE$1);
        trgt.setAttribute("aria-hidden", "false");
        attributes(trgt.previousElementSibling, { "aria-expanded": "true" });
        icon.classList.remove(CLS_TOGANIMATE);
        this.trigger("expanded", eventArgs);
      }
    };
    Accordion2.prototype.expandedItemsPush = function(item) {
      var index = this.getIndexByItem(item);
      if (this.expandedIndices.indexOf(index) === -1) {
        var temp = [].slice.call(this.expandedIndices);
        temp.push(index);
        this.setProperties({ expandedIndices: temp }, true);
      }
    };
    Accordion2.prototype.getIndexByItem = function(item) {
      var itemEle = this.getItemElements();
      return [].slice.call(itemEle).indexOf(item);
    };
    Accordion2.prototype.getItemElements = function() {
      var itemEle = [];
      var itemCollection = this.element.children;
      [].slice.call(itemCollection).forEach(function(el) {
        if (el.classList.contains(CLS_ITEM$1)) {
          itemEle.push(el);
        }
      });
      return itemEle;
    };
    Accordion2.prototype.expandedItemsPop = function(item) {
      var index = this.getIndexByItem(item);
      var temp = [].slice.call(this.expandedIndices);
      temp.splice(temp.indexOf(index), 1);
      this.setProperties({ expandedIndices: temp }, true);
    };
    Accordion2.prototype.collapse = function(trgt) {
      var _this = this;
      var items = this.getItems();
      var trgtItemEle = closest(trgt, "." + CLS_ITEM$1);
      if (isNullOrUndefined(trgt) || !isVisible(trgt) || trgtItemEle.classList.contains(CLS_DISABLE$1)) {
        return;
      }
      var animation = {
        name: this.animation.collapse.effect,
        duration: this.animation.collapse.duration,
        timingFunction: this.animation.collapse.easing
      };
      var icon = select$1("." + CLS_TOOGLEICN, trgtItemEle).firstElementChild;
      var eventArgs = {
        element: trgtItemEle,
        item: items[this.getIndexByItem(trgtItemEle)],
        index: this.getIndexByItem(trgtItemEle),
        content: trgtItemEle.querySelector("." + CLS_CONTENT$1),
        isExpanded: false
      };
      this.trigger("expanding", eventArgs, function(expandArgs) {
        if (!expandArgs.cancel) {
          _this.expandedItemsPop(trgtItemEle);
          trgtItemEle.classList.remove(CLS_EXPANDSTATE);
          icon.classList.add(CLS_TOGANIMATE);
          if (animation.name === "None") {
            _this.collapseProgress("begin", icon, trgt, trgtItemEle, expandArgs);
            _this.collapseProgress("end", icon, trgt, trgtItemEle, expandArgs);
          } else {
            _this.collapseAnimation(animation.name, trgt, trgtItemEle, icon, animation, expandArgs);
          }
        }
      });
    };
    Accordion2.prototype.collapseAnimation = function(ef, trgt, trgtItEl, icn, animate, args) {
      var _this = this;
      var height;
      var trgtHeight;
      var itemHeight;
      var remain;
      this.lastActiveItemId = trgtItEl.id;
      if (ef === "SlideUp") {
        animate.begin = function() {
          itemHeight = trgtItEl.offsetHeight;
          trgtItEl.style.minHeight = itemHeight + "px";
          trgt.style.position = "absolute";
          height = trgtItEl.offsetHeight;
          trgtHeight = trgt.offsetHeight;
          trgt.style.maxHeight = trgtHeight + "px";
          _this.collapseProgress("begin", icn, trgt, trgtItEl, args);
        };
        animate.progress = function() {
          remain = height - (trgtHeight - trgt.offsetHeight);
          if (remain < itemHeight) {
            trgtItEl.style.minHeight = remain + "px";
          }
        };
        animate.end = function() {
          trgt.style.display = "none";
          _this.collapseProgress("end", icn, trgt, trgtItEl, args);
          trgtItEl.style.minHeight = "";
          setStyleAttribute(trgt, { "position": "", "maxHeight": "", "display": "" });
        };
      } else {
        animate.begin = function() {
          _this.collapseProgress("begin", icn, trgt, trgtItEl, args);
        };
        animate.end = function() {
          _this.collapseProgress("end", icn, trgt, trgtItEl, args);
        };
      }
      new Animation$1(animate).animate(trgt);
    };
    Accordion2.prototype.collapseProgress = function(progress, icon, trgt, trgtItemEle, eventArgs) {
      this.remove(icon, CLS_EXPANDICN);
      this.remove(trgtItemEle, CLS_SLCTED);
      if (progress === "end") {
        this.add(trgt, CLS_CTNHIDE);
        icon.classList.remove(CLS_TOGANIMATE);
        this.remove(trgtItemEle, CLS_ACTIVE$1);
        trgt.setAttribute("aria-hidden", "true");
        attributes(trgt.previousElementSibling, { "aria-expanded": "false" });
        this.trigger("expanded", eventArgs);
      }
    };
    Accordion2.prototype.getModuleName = function() {
      return "accordion";
    };
    Accordion2.prototype.getItems = function() {
      var items;
      if (this.itemTemplate && this.headerTemplate) {
        items = this.dataSource;
      } else {
        items = this.items;
      }
      return items;
    };
    Accordion2.prototype.addItem = function(item, index) {
      var _this = this;
      var ele = this.element;
      var itemEle = this.getItemElements();
      var items = this.getItems();
      if (isNullOrUndefined(index)) {
        index = items.length;
      }
      if (ele.childElementCount >= index) {
        var addItems = item instanceof Array ? item : [item];
        addItems.forEach(function(addItem, i) {
          var itemIndex = index + i;
          items.splice(itemIndex, 0, addItem);
          var innerItemEle = _this.renderInnerItem(addItem, itemIndex);
          if (ele.childElementCount === itemIndex) {
            ele.appendChild(innerItemEle);
          } else {
            ele.insertBefore(innerItemEle, itemEle[parseInt(itemIndex.toString(), 10)]);
          }
          EventHandler.add(innerItemEle.querySelector("." + CLS_HEADER$1), "focus", _this.focusIn, _this);
          EventHandler.add(innerItemEle.querySelector("." + CLS_HEADER$1), "blur", _this.focusOut, _this);
          _this.expandedIndices = [];
          _this.expandedItemRefresh(ele);
          if (addItem && addItem.expanded) {
            _this.expandItem(true, itemIndex);
          }
        });
      }
      if (this.isReact) {
        this.renderReactTemplates();
      }
    };
    Accordion2.prototype.expandedItemRefresh = function(ele) {
      var _this = this;
      var itemEle = this.getItemElements();
      [].slice.call(itemEle).forEach(function(el) {
        if (el.classList.contains(CLS_SLCTED)) {
          _this.expandedItemsPush(el);
        }
      });
    };
    Accordion2.prototype.removeItem = function(index) {
      if (this.isReact) {
        this.clearTemplate(["headerTemplate", "itemTemplate"], index);
      }
      var itemEle = this.getItemElements();
      var ele = itemEle[parseInt(index.toString(), 10)];
      var items = this.getItems();
      if (isNullOrUndefined(ele)) {
        return;
      }
      this.restoreContent(index);
      detach(ele);
      items.splice(index, 1);
      this.expandedIndices = [];
      this.expandedItemRefresh(this.element);
    };
    Accordion2.prototype.select = function(index) {
      var itemEle = this.getItemElements();
      var ele = itemEle[parseInt(index.toString(), 10)];
      if (isNullOrUndefined(ele) || isNullOrUndefined(select$1("." + CLS_HEADER$1, ele))) {
        return;
      }
      ele.children[0].focus();
    };
    Accordion2.prototype.hideItem = function(index, isHidden) {
      var itemEle = this.getItemElements();
      var ele = itemEle[parseInt(index.toString(), 10)];
      if (isNullOrUndefined(ele)) {
        return;
      }
      if (isNullOrUndefined(isHidden)) {
        isHidden = true;
      }
      if (isHidden) {
        this.add(ele, CLS_ITEMHIDE);
      } else {
        this.remove(ele, CLS_ITEMHIDE);
      }
    };
    Accordion2.prototype.enableItem = function(index, isEnable) {
      var itemEle = this.getItemElements();
      var ele = itemEle[parseInt(index.toString(), 10)];
      if (isNullOrUndefined(ele)) {
        return;
      }
      var eleHeader = ele.firstElementChild;
      if (isEnable) {
        this.remove(ele, CLS_DISABLE$1);
        attributes(eleHeader, { "tabindex": "0", "aria-disabled": "false" });
        eleHeader.focus();
      } else {
        if (ele.classList.contains(CLS_ACTIVE$1)) {
          this.expandItem(false, index);
          this.eleMoveFocus("movedown", this.element, eleHeader);
        }
        this.add(ele, CLS_DISABLE$1);
        eleHeader.setAttribute("aria-disabled", "true");
        eleHeader.removeAttribute("tabindex");
      }
    };
    Accordion2.prototype.expandItem = function(isExpand, index) {
      var _this = this;
      var itemEle = this.getItemElements();
      if (isNullOrUndefined(index)) {
        if (this.expandMode === "Single" && isExpand) {
          var ele = itemEle[itemEle.length - 1];
          this.itemExpand(isExpand, ele, this.getIndexByItem(ele));
        } else {
          var item = select$1("#" + this.lastActiveItemId, this.element);
          [].slice.call(itemEle).forEach(function(el) {
            _this.itemExpand(isExpand, el, _this.getIndexByItem(el));
            el.classList.remove(CLS_EXPANDSTATE);
          });
          var expandedItem = select$1("." + CLS_EXPANDSTATE, this.element);
          if (expandedItem) {
            expandedItem.classList.remove(CLS_EXPANDSTATE);
          }
          if (item) {
            item.classList.add(CLS_EXPANDSTATE);
          }
        }
      } else {
        var ele = itemEle[parseInt(index.toString(), 10)];
        if (isNullOrUndefined(ele) || !ele.classList.contains(CLS_SLCT) || ele.classList.contains(CLS_ACTIVE$1) && isExpand) {
          return;
        } else {
          if (this.expandMode === "Single") {
            this.expandItem(false);
          }
          this.itemExpand(isExpand, ele, index);
        }
      }
    };
    Accordion2.prototype.itemExpand = function(isExpand, ele, index) {
      var ctn = ele.children[1];
      if (ele.classList.contains(CLS_DISABLE$1)) {
        return;
      }
      if (isNullOrUndefined(ctn) && isExpand) {
        ctn = this.contentRendering(index);
        ele.appendChild(ctn);
        this.ariaAttrUpdate(ele);
        this.expand(ctn);
      } else if (!isNullOrUndefined(ctn)) {
        if (isExpand) {
          this.expand(ctn);
        } else {
          this.collapse(ctn);
        }
      }
      if (this.isReact) {
        this.renderReactTemplates();
      }
    };
    Accordion2.prototype.destroyItems = function() {
      this.restoreContent(null);
      if (this.isReact || this.isAngular || this.isVue) {
        this.clearTemplate();
      }
      [].slice.call(this.element.querySelectorAll("." + CLS_ITEM$1)).forEach(function(el) {
        detach(el);
      });
    };
    Accordion2.prototype.restoreContent = function(index) {
      var ctnElePos;
      if (isNullOrUndefined(index)) {
        ctnElePos = this.element;
      } else {
        ctnElePos = this.element.querySelectorAll("." + CLS_ITEM$1)[parseInt(index.toString(), 10)];
      }
      this.templateEle.forEach(function(eleStr) {
        if (!isNullOrUndefined(ctnElePos.querySelector(eleStr))) {
          document.body.appendChild(ctnElePos.querySelector(eleStr)).style.display = "none";
        }
      });
    };
    Accordion2.prototype.updateItem = function(item, index) {
      if (!isNullOrUndefined(item)) {
        var items = this.getItems();
        var itemObj = items[parseInt(index.toString(), 10)];
        items.splice(index, 1);
        this.restoreContent(index);
        detach(item);
        this.addItem(itemObj, index);
      }
    };
    Accordion2.prototype.setTemplate = function(template, toElement, index) {
      toElement.innerHTML = "";
      this.templateCompile(toElement, template, index);
      if (this.isReact) {
        this.renderReactTemplates();
      }
    };
    Accordion2.prototype.templateCompile = function(ele, cnt, index) {
      var tempEle = this.createElement("div");
      this.fetchElement(tempEle, cnt, index, false);
      if (tempEle.childNodes.length !== 0) {
        [].slice.call(tempEle.childNodes).forEach(function(childEle) {
          ele.appendChild(childEle);
        });
      }
    };
    Accordion2.prototype.getPersistData = function() {
      var keyEntity = ["expandedIndices"];
      return this.addOnPersist(keyEntity);
    };
    Accordion2.prototype.onPropertyChanged = function(newProp, oldProp) {
      var acrdn = this.element;
      var isRefresh = false;
      for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {
        var prop = _a[_i];
        switch (prop) {
          case "items":
            if (!(newProp.items instanceof Array && oldProp.items instanceof Array)) {
              var changedProp = Object.keys(newProp.items);
              for (var j = 0; j < changedProp.length; j++) {
                var index = parseInt(Object.keys(newProp.items)[parseInt(j.toString(), 10)], 10);
                var property = Object.keys(newProp.items[parseInt(index.toString(), 10)])[0];
                var item = selectAll("." + CLS_ITEM$1, this.element)[parseInt(index.toString(), 10)];
                var oldVal = Object(oldProp.items[parseInt(index.toString(), 10)])["" + property];
                var newVal = Object(newProp.items[parseInt(index.toString(), 10)])["" + property];
                var temp = property;
                if (temp === "header" || temp === "iconCss" || temp === "expanded" || temp === "content" && oldVal === "") {
                  this.updateItem(item, index);
                }
                if (property === "cssClass" && !isNullOrUndefined(item)) {
                  if (oldVal) {
                    removeClass([item], oldVal.split(" "));
                  }
                  if (newVal) {
                    addClass([item], newVal.split(" "));
                  }
                }
                if (property === "visible" && !isNullOrUndefined(item)) {
                  if (Object(newProp.items[parseInt(index.toString(), 10)])["" + property] === false) {
                    item.classList.add(CLS_ITEMHIDE);
                  } else {
                    item.classList.remove(CLS_ITEMHIDE);
                  }
                }
                if (property === "disabled" && !isNullOrUndefined(item)) {
                  this.enableItem(index, !newVal);
                }
                if (property === "content" && !isNullOrUndefined(item) && item.children.length === 2) {
                  if (typeof newVal === "function") {
                    var activeContent = item.querySelector("." + CLS_CTENT);
                    activeContent.innerHTML = "";
                    this.setTemplate(newVal, activeContent, index);
                  } else {
                    if (item.classList.contains(CLS_SLCTED)) {
                      this.expandItem(false, index);
                    }
                    detach(item.querySelector("." + CLS_CONTENT$1));
                  }
                }
              }
            } else {
              isRefresh = true;
            }
            break;
          case "dataSource":
          case "expandedIndices":
            if (this.expandedIndices === null) {
              this.expandedIndices = [];
            }
            isRefresh = true;
            break;
          case "headerTemplate":
            this.initializeHeaderTemplate();
            isRefresh = true;
            break;
          case "itemTemplate":
            this.initializeItemTemplate();
            isRefresh = true;
            break;
          case "enableRtl":
            if (newProp.enableRtl) {
              this.add(acrdn, CLS_RTL$1);
            } else {
              this.remove(acrdn, CLS_RTL$1);
            }
            break;
          case "height":
            setStyleAttribute(this.element, { "height": formatUnit(newProp.height) });
            break;
          case "width":
            setStyleAttribute(this.element, { "width": formatUnit(newProp.width) });
            break;
          case "expandMode":
            if (newProp.expandMode === "Single" && this.expandedIndices.length > 1) {
              this.expandItem(false);
            }
            break;
        }
      }
      if (isRefresh) {
        this.initExpand = [];
        if (this.expandedIndices.length > 0) {
          this.initExpand = this.expandedIndices;
        }
        this.destroyItems();
        this.renderItems();
        this.initItemExpand();
      }
    };
    __decorate$k([
      Collection([], AccordionItem)
    ], Accordion2.prototype, "items", void 0);
    __decorate$k([
      Property([])
    ], Accordion2.prototype, "dataSource", void 0);
    __decorate$k([
      Property()
    ], Accordion2.prototype, "itemTemplate", void 0);
    __decorate$k([
      Property()
    ], Accordion2.prototype, "headerTemplate", void 0);
    __decorate$k([
      Property("100%")
    ], Accordion2.prototype, "width", void 0);
    __decorate$k([
      Property("auto")
    ], Accordion2.prototype, "height", void 0);
    __decorate$k([
      Property([])
    ], Accordion2.prototype, "expandedIndices", void 0);
    __decorate$k([
      Property("Multiple")
    ], Accordion2.prototype, "expandMode", void 0);
    __decorate$k([
      Property(false)
    ], Accordion2.prototype, "enableHtmlSanitizer", void 0);
    __decorate$k([
      Complex({}, AccordionAnimationSettings)
    ], Accordion2.prototype, "animation", void 0);
    __decorate$k([
      Event$1()
    ], Accordion2.prototype, "clicked", void 0);
    __decorate$k([
      Event$1()
    ], Accordion2.prototype, "expanding", void 0);
    __decorate$k([
      Event$1()
    ], Accordion2.prototype, "expanded", void 0);
    __decorate$k([
      Event$1()
    ], Accordion2.prototype, "created", void 0);
    __decorate$k([
      Event$1()
    ], Accordion2.prototype, "destroyed", void 0);
    Accordion2 = __decorate$k([
      NotifyPropertyChanges
    ], Accordion2);
    return Accordion2;
  }(Component)
);
var __extends$u = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$j = globalThis && globalThis.__decorate || function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i = decorators.length - 1; i >= 0; i--)
      if (d = decorators[i])
        r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var CLS_TAB = "e-tab";
var CLS_HEADER = "e-tab-header";
var CLS_BLA_TEM = "blazor-template";
var CLS_CONTENT = "e-content";
var CLS_NEST = "e-nested";
var CLS_ITEMS = "e-items";
var CLS_ITEM = "e-item";
var CLS_TEMPLATE = "e-template";
var CLS_RTL = "e-rtl";
var CLS_ACTIVE = "e-active";
var CLS_DISABLE = "e-disable";
var CLS_HIDDEN = "e-hidden";
var CLS_FOCUS = "e-focused";
var CLS_ICONS = "e-icons";
var CLS_ICON = "e-icon";
var CLS_ICON_TAB = "e-icon-tab";
var CLS_ICON_CLOSE = "e-close-icon";
var CLS_CLOSE_SHOW = "e-close-show";
var CLS_TEXT = "e-tab-text";
var CLS_INDICATOR = "e-indicator";
var CLS_WRAP = "e-tab-wrap";
var CLS_TEXT_WRAP = "e-text-wrap";
var CLS_TAB_ICON = "e-tab-icon";
var CLS_TB_ITEMS = "e-toolbar-items";
var CLS_TB_ITEM = "e-toolbar-item";
var CLS_TB_POP = "e-toolbar-pop";
var CLS_TB_POPUP = "e-toolbar-popup";
var CLS_HOR_NAV = "e-hor-nav";
var CLS_POPUP_OPEN = "e-popup-open";
var CLS_POPUP_CLOSE = "e-popup-close";
var CLS_PROGRESS = "e-progress";
var CLS_IGNORE = "e-ignore";
var CLS_OVERLAY = "e-overlay";
var CLS_HSCRCNT = "e-hscroll-content";
var CLS_VSCRCNT = "e-vscroll-content";
var CLS_VTAB = "e-vertical-tab";
var CLS_VERTICAL = "e-vertical";
var CLS_VLEFT = "e-vertical-left";
var CLS_VRIGHT = "e-vertical-right";
var CLS_HBOTTOM = "e-horizontal-bottom";
var CLS_FILL = "e-fill-mode";
var TABITEMPREFIX = "tabitem_";
var CLS_REORDER_ACTIVE_ITEM = "e-reorder-active-item";
var TabActionSettings = (
  /** @class */
  function(_super) {
    __extends$u(TabActionSettings2, _super);
    function TabActionSettings2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$j([
      Property("SlideLeftIn")
    ], TabActionSettings2.prototype, "effect", void 0);
    __decorate$j([
      Property(600)
    ], TabActionSettings2.prototype, "duration", void 0);
    __decorate$j([
      Property("ease")
    ], TabActionSettings2.prototype, "easing", void 0);
    return TabActionSettings2;
  }(ChildProperty)
);
var TabAnimationSettings = (
  /** @class */
  function(_super) {
    __extends$u(TabAnimationSettings2, _super);
    function TabAnimationSettings2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$j([
      Complex({ effect: "SlideLeftIn", duration: 600, easing: "ease" }, TabActionSettings)
    ], TabAnimationSettings2.prototype, "previous", void 0);
    __decorate$j([
      Complex({ effect: "SlideRightIn", duration: 600, easing: "ease" }, TabActionSettings)
    ], TabAnimationSettings2.prototype, "next", void 0);
    return TabAnimationSettings2;
  }(ChildProperty)
);
var Header = (
  /** @class */
  function(_super) {
    __extends$u(Header2, _super);
    function Header2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$j([
      Property("")
    ], Header2.prototype, "text", void 0);
    __decorate$j([
      Property("")
    ], Header2.prototype, "iconCss", void 0);
    __decorate$j([
      Property("left")
    ], Header2.prototype, "iconPosition", void 0);
    return Header2;
  }(ChildProperty)
);
var TabItem = (
  /** @class */
  function(_super) {
    __extends$u(TabItem2, _super);
    function TabItem2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$j([
      Complex({}, Header)
    ], TabItem2.prototype, "header", void 0);
    __decorate$j([
      Property(null)
    ], TabItem2.prototype, "headerTemplate", void 0);
    __decorate$j([
      Property("")
    ], TabItem2.prototype, "content", void 0);
    __decorate$j([
      Property("")
    ], TabItem2.prototype, "cssClass", void 0);
    __decorate$j([
      Property(false)
    ], TabItem2.prototype, "disabled", void 0);
    __decorate$j([
      Property(true)
    ], TabItem2.prototype, "visible", void 0);
    __decorate$j([
      Property()
    ], TabItem2.prototype, "id", void 0);
    __decorate$j([
      Property(-1)
    ], TabItem2.prototype, "tabIndex", void 0);
    return TabItem2;
  }(ChildProperty)
);
var Tab = (
  /** @class */
  function(_super) {
    __extends$u(Tab2, _super);
    function Tab2(options, element2) {
      var _this = _super.call(this, options, element2) || this;
      _this.show = {};
      _this.hide = {};
      _this.maxHeight = 0;
      _this.title = "Close";
      _this.isInteracted = false;
      _this.lastIndex = 0;
      _this.isAdd = false;
      _this.isIconAlone = false;
      _this.draggableItems = [];
      _this.resizeContext = _this.refreshActiveTabBorder.bind(_this);
      _this.keyConfigs = {
        tab: "tab",
        home: "home",
        end: "end",
        enter: "enter",
        space: "space",
        delete: "delete",
        moveLeft: "leftarrow",
        moveRight: "rightarrow",
        moveUp: "uparrow",
        moveDown: "downarrow"
      };
      return _this;
    }
    Tab2.prototype.destroy = function() {
      if (this.isReact || this.isAngular) {
        this.clearTemplate();
      }
      if (!isNullOrUndefined(this.tbObj)) {
        this.tbObj.destroy();
        this.tbObj = null;
      }
      this.unWireEvents();
      this.element.removeAttribute("aria-disabled");
      this.expTemplateContent();
      if (!this.isTemplate) {
        while (this.element.firstElementChild) {
          remove(this.element.firstElementChild);
        }
      } else {
        var cntEle = select$1("." + CLS_TAB + " > ." + CLS_CONTENT, this.element);
        this.element.classList.remove(CLS_TEMPLATE);
        if (!isNullOrUndefined(cntEle)) {
          cntEle.innerHTML = this.cnt;
        }
      }
      if (this.btnCls) {
        this.btnCls = null;
      }
      this.hdrEle = null;
      this.cntEle = null;
      this.tbItems = null;
      this.tbItem = null;
      this.tbPop = null;
      this.prevItem = null;
      this.popEle = null;
      this.bdrLine = null;
      this.content = null;
      this.dragItem = null;
      this.cloneElement = null;
      this.draggingItems = [];
      if (this.draggableItems && this.draggableItems.length > 0) {
        for (var i = 0; i < this.draggableItems.length; i++) {
          this.draggableItems[i].destroy();
          this.draggableItems[i] = null;
        }
        this.draggableItems = [];
      }
      _super.prototype.destroy.call(this);
      this.trigger("destroyed");
    };
    Tab2.prototype.refresh = function() {
      if (this.isReact) {
        this.clearTemplate();
      }
      _super.prototype.refresh.call(this);
      if (this.isReact) {
        this.renderReactTemplates();
      }
    };
    Tab2.prototype.preRender = function() {
      var nested = closest(this.element, "." + CLS_CONTENT);
      this.prevIndex = 0;
      this.isNested = false;
      this.isPopup = false;
      this.initRender = true;
      this.isSwipeed = false;
      this.itemIndexArray = [];
      this.templateEle = [];
      if (this.allowDragAndDrop) {
        this.dragArea = !isNullOrUndefined(this.dragArea) ? this.dragArea : "#" + this.element.id + " " + ("." + CLS_HEADER);
      }
      if (!isNullOrUndefined(nested)) {
        nested.parentElement.classList.add(CLS_NEST);
        this.isNested = true;
      }
      var name = Browser.info.name;
      var css = name === "msie" ? "e-ie" : name === "edge" ? "e-edge" : name === "safari" ? "e-safari" : "";
      setStyleAttribute(this.element, { "width": formatUnit(this.width), "height": formatUnit(this.height) });
      this.setCssClass(this.element, this.cssClass, true);
      attributes(this.element, { "aria-disabled": "false" });
      this.setCssClass(this.element, css, true);
      this.updatePopAnimationConfig();
    };
    Tab2.prototype.render = function() {
      this.btnCls = this.createElement("span", { className: CLS_ICONS + " " + CLS_ICON_CLOSE, attrs: { title: this.title } });
      this.tabId = this.element.id.length > 0 ? "-" + this.element.id : getRandomId();
      this.renderContainer();
      this.wireEvents();
      this.initRender = false;
    };
    Tab2.prototype.renderContainer = function() {
      var ele = this.element;
      this.items.forEach(function(item, index) {
        if (isNullOrUndefined(item.id) && !isNullOrUndefined(item.setProperties)) {
          item.setProperties({ id: TABITEMPREFIX + index.toString() }, true);
        }
      });
      if (this.items.length > 0 && ele.children.length === 0) {
        ele.appendChild(this.createElement("div", { className: CLS_CONTENT }));
        this.setOrientation(this.headerPlacement, this.createElement("div", { className: CLS_HEADER }));
        this.isTemplate = false;
      } else if (this.element.children.length > 0) {
        this.isTemplate = true;
        ele.classList.add(CLS_TEMPLATE);
        var header = ele.querySelector("." + CLS_HEADER);
        if (header && this.headerPlacement === "Bottom") {
          this.setOrientation(this.headerPlacement, header);
        }
      }
      if (!isNullOrUndefined(select$1("." + CLS_HEADER, this.element)) && !isNullOrUndefined(select$1("." + CLS_CONTENT, this.element))) {
        this.renderHeader();
        this.tbItems = select$1("." + CLS_HEADER + " ." + CLS_TB_ITEMS, this.element);
        if (!isNullOrUndefined(this.tbItems)) {
          rippleEffect(this.tbItems, { selector: ".e-tab-wrap" });
        }
        this.renderContent();
        if (selectAll("." + CLS_TB_ITEM, this.element).length > 0) {
          this.tbItems = select$1("." + CLS_HEADER + " ." + CLS_TB_ITEMS, this.element);
          this.bdrLine = this.createElement("div", { className: CLS_INDICATOR + " " + CLS_HIDDEN + " " + CLS_IGNORE });
          var scrCnt = select$1("." + this.scrCntClass, this.tbItems);
          if (!isNullOrUndefined(scrCnt)) {
            scrCnt.insertBefore(this.bdrLine, scrCnt.firstChild);
          } else {
            this.tbItems.insertBefore(this.bdrLine, this.tbItems.firstChild);
          }
          this.setContentHeight(true);
          this.select(this.selectedItem);
        }
        this.tbItem = selectAll("." + CLS_TB_ITEM, this.hdrEle);
        if (!isNullOrUndefined(this.tbItem)) {
          for (var i = 0; i < this.items.length; i++) {
            if (this.tbItem[i]) {
              var tabID = this.items[i].id;
              this.tbItem[i].setAttribute("data-id", tabID);
            }
          }
        }
        this.setRTL(this.enableRtl);
      }
    };
    Tab2.prototype.renderHeader = function() {
      var _this = this;
      var hdrPlace = this.headerPlacement;
      var tabItems = [];
      this.hdrEle = this.getTabHeader();
      this.addVerticalClass();
      if (!this.isTemplate) {
        tabItems = this.parseObject(this.items, 0);
      } else {
        if (this.element.children.length > 1 && this.element.children[1].classList.contains(CLS_HEADER)) {
          this.setProperties({ headerPlacement: "Bottom" }, true);
        }
        var count = this.hdrEle.children.length;
        var hdrItems = [];
        for (var i = 0; i < count; i++) {
          hdrItems.push(this.hdrEle.children.item(i).innerHTML);
        }
        if (count > 0) {
          while (this.hdrEle.firstElementChild) {
            detach(this.hdrEle.firstElementChild);
          }
          var tabItems_1 = this.createElement("div", { className: CLS_ITEMS });
          this.hdrEle.appendChild(tabItems_1);
          hdrItems.forEach(function(item, index) {
            _this.lastIndex = index;
            var attr = {
              className: CLS_ITEM,
              id: CLS_ITEM + _this.tabId + "_" + index
            };
            var txt = _this.createElement("span", {
              className: CLS_TEXT,
              innerHTML: item,
              attrs: { "role": "presentation" }
            }).outerHTML;
            var cont = _this.createElement("div", {
              className: CLS_TEXT_WRAP,
              innerHTML: txt + _this.btnCls.outerHTML
            }).outerHTML;
            var wrap = _this.createElement("div", {
              className: CLS_WRAP,
              innerHTML: cont,
              attrs: { role: "tab", tabIndex: "-1", "aria-selected": "false", "aria-controls": CLS_CONTENT + _this.tabId + "_" + index, "aria-disabled": "false" }
            });
            tabItems_1.appendChild(_this.createElement("div", attr));
            selectAll("." + CLS_ITEM, tabItems_1)[index].appendChild(wrap);
          });
        }
      }
      this.tbObj = new Toolbar({
        width: hdrPlace === "Left" || hdrPlace === "Right" ? "auto" : "100%",
        height: hdrPlace === "Left" || hdrPlace === "Right" ? "100%" : "auto",
        overflowMode: this.overflowMode,
        items: tabItems.length !== 0 ? tabItems : [],
        clicked: this.clickHandler.bind(this),
        scrollStep: this.scrollStep,
        enableHtmlSanitizer: this.enableHtmlSanitizer,
        cssClass: this.cssClass
      });
      this.tbObj.isStringTemplate = true;
      this.tbObj.createElement = this.createElement;
      this.tbObj.appendTo(this.hdrEle);
      attributes(this.hdrEle, { role: "tablist" });
      if (!isNullOrUndefined(this.element.getAttribute("aria-label"))) {
        this.hdrEle.setAttribute("aria-label", this.element.getAttribute("aria-label"));
        this.element.removeAttribute("aria-label");
      } else if (!isNullOrUndefined(this.element.getAttribute("aria-labelledby"))) {
        this.hdrEle.setAttribute("aria-labelledby", this.element.getAttribute("aria-labelledby"));
        this.element.removeAttribute("aria-labelledby");
      }
      this.setCloseButton(this.showCloseButton);
      var toolbarHeader = this.tbObj.element.querySelector("." + CLS_TB_ITEMS);
      if (!isNullOrUndefined(toolbarHeader)) {
        if (isNullOrUndefined(toolbarHeader.id) || toolbarHeader.id === "") {
          toolbarHeader.id = this.element.id + "_tab_header_items";
        }
      }
    };
    Tab2.prototype.renderContent = function() {
      this.cntEle = select$1("." + CLS_CONTENT, this.element);
      var hdrItem = selectAll("." + CLS_TB_ITEM, this.element);
      if (this.isTemplate) {
        this.cnt = this.cntEle.children.length > 0 ? this.cntEle.innerHTML : "";
        var contents = this.cntEle.children;
        for (var i = 0; i < hdrItem.length; i++) {
          if (contents.length - 1 >= i) {
            addClass([contents.item(i)], CLS_ITEM);
            attributes(contents.item(i), { "role": "tabpanel", "aria-labelledby": CLS_ITEM + this.tabId + "_" + i });
            contents.item(i).id = CLS_CONTENT + this.tabId + "_" + i;
          }
        }
      }
    };
    Tab2.prototype.reRenderItems = function() {
      this.renderContainer();
      if (!isNullOrUndefined(this.cntEle)) {
        this.touchModule = new Touch(this.cntEle, { swipe: this.swipeHandler.bind(this) });
      }
    };
    Tab2.prototype.parseObject = function(items, index) {
      var _this = this;
      var tbItems = selectAll(".e-tab-header ." + CLS_TB_ITEM, this.element);
      var maxId = this.lastIndex;
      if (!this.isReplace && tbItems.length > 0) {
        var idList_1 = [];
        tbItems.forEach(function(item) {
          idList_1.push(_this.getIndexFromEle(item.id));
        });
        maxId = Math.max.apply(Math, idList_1);
      }
      var tItems = [];
      var txtWrapEle;
      var spliceArray = [];
      items.forEach(function(item, i) {
        var pos = isNullOrUndefined(item.header) || isNullOrUndefined(item.header.iconPosition) ? "" : item.header.iconPosition;
        var css = isNullOrUndefined(item.header) || isNullOrUndefined(item.header.iconCss) ? "" : item.header.iconCss;
        if (isNullOrUndefined(item.headerTemplate) && (isNullOrUndefined(item.header) || isNullOrUndefined(item.header.text) || item.header.text.length === 0 && css === "")) {
          spliceArray.push(i);
          return;
        }
        var txt = item.headerTemplate || item.header.text;
        if (typeof txt === "string" && _this.enableHtmlSanitizer) {
          txt = SanitizeHtmlHelper.sanitize(txt);
        }
        var itemIndex;
        if (_this.isReplace && !isNullOrUndefined(_this.tbId) && _this.tbId !== "") {
          itemIndex = parseInt(_this.tbId.substring(_this.tbId.lastIndexOf("_") + 1), 10);
          _this.tbId = "";
        } else {
          itemIndex = index + i;
        }
        _this.lastIndex = tbItems.length === 0 ? i : _this.isReplace ? itemIndex : maxId + 1 + i;
        var disabled = item.disabled ? " " + CLS_DISABLE + " " + CLS_OVERLAY : "";
        var hidden = item.visible === false ? " " + CLS_HIDDEN : "";
        txtWrapEle = _this.createElement("div", { className: CLS_TEXT, attrs: { "role": "presentation" } });
        var tHtml = txt instanceof Object ? txt.outerHTML : txt;
        var txtEmpty = !isNullOrUndefined(tHtml) && tHtml !== "";
        if (!isNullOrUndefined(txt.tagName)) {
          txtWrapEle.appendChild(txt);
        } else {
          _this.headerTextCompile(txtWrapEle, txt, i);
        }
        var tEle;
        var icon = _this.createElement("span", {
          className: CLS_ICONS + " " + CLS_TAB_ICON + " " + CLS_ICON + "-" + pos + " " + css
        });
        var tCont = _this.createElement("div", { className: CLS_TEXT_WRAP });
        tCont.appendChild(txtWrapEle);
        if (txt !== "" && txt !== void 0 && css !== "") {
          if (pos === "left" || pos === "top") {
            tCont.insertBefore(icon, tCont.firstElementChild);
          } else {
            tCont.appendChild(icon);
          }
          tEle = txtWrapEle;
          _this.isIconAlone = false;
        } else {
          tEle = css === "" ? txtWrapEle : icon;
          if (tEle === icon) {
            detach(txtWrapEle);
            tCont.appendChild(icon);
            _this.isIconAlone = true;
          }
        }
        var tabIndex = isNullOrUndefined(item.tabIndex) ? "-1" : item.tabIndex.toString();
        var wrapAttrs = item.disabled ? {} : { tabIndex, "data-tabindex": tabIndex, role: "tab", "aria-selected": "false", "aria-disabled": "false" };
        tCont.appendChild(_this.btnCls.cloneNode(true));
        var wrap = _this.createElement("div", { className: CLS_WRAP, attrs: wrapAttrs });
        wrap.appendChild(tCont);
        if (_this.itemIndexArray === []) {
          _this.itemIndexArray.push(CLS_ITEM + _this.tabId + "_" + _this.lastIndex);
        } else {
          _this.itemIndexArray.splice(index + i, 0, CLS_ITEM + _this.tabId + "_" + _this.lastIndex);
        }
        var attrObj = {
          id: CLS_ITEM + _this.tabId + "_" + _this.lastIndex
        };
        var tItem = { htmlAttributes: attrObj, template: wrap };
        tItem.cssClass = (item.cssClass !== void 0 ? item.cssClass : " ") + " " + disabled + " " + hidden + " " + (css !== "" ? "e-i" + pos : "") + " " + (!txtEmpty ? CLS_ICON : "");
        if (pos === "top" || pos === "bottom") {
          _this.element.classList.add("e-vertical-icon");
        }
        tItems.push(tItem);
        i++;
      });
      if (!this.isAdd) {
        spliceArray.forEach(function(spliceItemIndex) {
          _this.items.splice(spliceItemIndex, 1);
        });
      }
      if (this.isIconAlone) {
        this.element.classList.add(CLS_ICON_TAB);
      } else {
        this.element.classList.remove(CLS_ICON_TAB);
      }
      return tItems;
    };
    Tab2.prototype.removeActiveClass = function() {
      var tabHeader = this.getTabHeader();
      if (tabHeader) {
        var tabItems = selectAll("." + CLS_TB_ITEM + "." + CLS_ACTIVE, tabHeader);
        [].slice.call(tabItems).forEach(function(node) {
          return node.classList.remove(CLS_ACTIVE);
        });
        [].slice.call(tabItems).forEach(function(node) {
          return node.firstElementChild.setAttribute("aria-selected", "false");
        });
      }
    };
    Tab2.prototype.checkPopupOverflow = function(ele) {
      this.tbPop = select$1("." + CLS_TB_POP, this.element);
      var popIcon = select$1(".e-hor-nav", this.element);
      var tbrItems = select$1("." + CLS_TB_ITEMS, this.element);
      var lastChild = tbrItems.lastChild;
      var isOverflow = false;
      if (!this.isVertical() && (this.enableRtl && popIcon.offsetLeft + popIcon.offsetWidth > tbrItems.offsetLeft || !this.enableRtl && popIcon.offsetLeft < tbrItems.offsetWidth)) {
        isOverflow = true;
      } else if (this.isVertical() && popIcon.offsetTop < lastChild.offsetTop + lastChild.offsetHeight) {
        isOverflow = true;
      }
      if (isOverflow) {
        ele.classList.add(CLS_TB_POPUP);
        this.tbPop.insertBefore(ele, selectAll("." + CLS_TB_POPUP, this.tbPop)[0]);
      }
      return true;
    };
    Tab2.prototype.popupHandler = function(target) {
      var ripEle = target.querySelector(".e-ripple-element");
      if (!isNullOrUndefined(ripEle)) {
        ripEle.outerHTML = "";
        target.querySelector("." + CLS_WRAP).classList.remove("e-ripple");
      }
      this.tbItem = selectAll("." + CLS_TB_ITEMS + " ." + CLS_TB_ITEM, this.hdrEle);
      var lastChild = this.tbItem[this.tbItem.length - 1];
      if (this.tbItem.length !== 0) {
        target.classList.remove(CLS_TB_POPUP);
        target.removeAttribute("style");
        this.tbItems.appendChild(target);
        this.actEleId = target.id;
        if (this.checkPopupOverflow(lastChild)) {
          var prevEle = this.tbItems.lastChild.previousElementSibling;
          this.checkPopupOverflow(prevEle);
        }
        this.isPopup = true;
      }
      return selectAll("." + CLS_TB_ITEM, this.tbItems).length - 1;
    };
    Tab2.prototype.setCloseButton = function(val) {
      var trg = select$1("." + CLS_HEADER, this.element);
      if (val === true) {
        trg.classList.add(CLS_CLOSE_SHOW);
      } else {
        trg.classList.remove(CLS_CLOSE_SHOW);
      }
      this.tbObj.refreshOverflow();
      this.refreshActiveTabBorder();
    };
    Tab2.prototype.prevCtnAnimation = function(prev, current) {
      var animation;
      this.enableRtl || this.element.classList.contains(CLS_RTL);
      if (this.isPopup || prev <= current) {
        if (this.animation.previous.effect === "SlideLeftIn") {
          animation = {
            name: "SlideLeftOut",
            duration: this.animation.previous.duration,
            timingFunction: this.animation.previous.easing
          };
        } else {
          animation = null;
        }
      } else {
        if (this.animation.next.effect === "SlideRightIn") {
          animation = {
            name: "SlideRightOut",
            duration: this.animation.next.duration,
            timingFunction: this.animation.next.easing
          };
        } else {
          animation = null;
        }
      }
      return animation;
    };
    Tab2.prototype.triggerPrevAnimation = function(oldCnt, prevIndex) {
      var _this = this;
      var animateObj = this.prevCtnAnimation(prevIndex, this.selectedItem);
      if (!isNullOrUndefined(animateObj)) {
        animateObj.begin = function() {
          setStyleAttribute(oldCnt, { "position": "absolute" });
          oldCnt.classList.add(CLS_PROGRESS);
          oldCnt.classList.add("e-view");
        };
        animateObj.end = function() {
          oldCnt.style.display = "none";
          oldCnt.classList.remove(CLS_ACTIVE);
          oldCnt.classList.remove(CLS_PROGRESS);
          oldCnt.classList.remove("e-view");
          setStyleAttribute(oldCnt, { "display": "", "position": "" });
          if (oldCnt.childNodes.length === 0 && !_this.isTemplate) {
            detach(oldCnt);
          }
        };
        new Animation$1(animateObj).animate(oldCnt);
      } else {
        oldCnt.classList.remove(CLS_ACTIVE);
      }
    };
    Tab2.prototype.triggerAnimation = function(id, value) {
      var _this = this;
      var prevIndex = this.prevIndex;
      var oldCnt;
      var itemCollection = [].slice.call(this.element.querySelector("." + CLS_CONTENT).children);
      itemCollection.forEach(function(item) {
        if (item.id === _this.prevActiveEle) {
          oldCnt = item;
        }
      });
      var prevEle = this.tbItem[prevIndex];
      var newCnt = this.getTrgContent(this.cntEle, this.extIndex(id));
      if (isNullOrUndefined(oldCnt) && !isNullOrUndefined(prevEle)) {
        var idNo = this.extIndex(prevEle.id);
        oldCnt = this.getTrgContent(this.cntEle, idNo);
      }
      if (!isNullOrUndefined(newCnt)) {
        this.prevActiveEle = newCnt.id;
      }
      var isPrevent = isNullOrUndefined(this.animation) || this.animation.next === {} || this.animation.previous === {} || isNullOrUndefined(this.animation.next.effect) || isNullOrUndefined(this.animation.previous.effect) || this.animation.previous.effect == "None" || this.animation.next.effect == "None";
      if (this.initRender || value === false || this.animation === {} || isPrevent) {
        if (oldCnt && oldCnt !== newCnt) {
          oldCnt.classList.remove(CLS_ACTIVE);
        }
        return;
      }
      var cnt = select$1("." + CLS_CONTENT, this.element);
      var animateObj;
      if (this.prevIndex > this.selectedItem && !this.isPopup) {
        var openEff = this.animation.previous.effect;
        animateObj = {
          name: openEff === "None" ? "" : openEff !== "SlideLeftIn" ? openEff : "SlideLeftIn",
          duration: this.animation.previous.duration,
          timingFunction: this.animation.previous.easing
        };
      } else if (this.isPopup || this.prevIndex < this.selectedItem || this.prevIndex === this.selectedItem) {
        var clsEff = this.animation.next.effect;
        animateObj = {
          name: clsEff === "None" ? "" : clsEff !== "SlideRightIn" ? clsEff : "SlideRightIn",
          duration: this.animation.next.duration,
          timingFunction: this.animation.next.easing
        };
      }
      animateObj.progress = function() {
        cnt.classList.add(CLS_PROGRESS);
        _this.setActiveBorder();
      };
      animateObj.end = function() {
        cnt.classList.remove(CLS_PROGRESS);
        newCnt.classList.add(CLS_ACTIVE);
      };
      if (!this.initRender && !isNullOrUndefined(oldCnt)) {
        this.triggerPrevAnimation(oldCnt, prevIndex);
      }
      this.isPopup = false;
      if (animateObj.name === "") {
        newCnt.classList.add(CLS_ACTIVE);
      } else {
        new Animation$1(animateObj).animate(newCnt);
      }
    };
    Tab2.prototype.keyPressed = function(trg) {
      var trgParent = closest(trg, "." + CLS_HEADER + " ." + CLS_TB_ITEM);
      var trgIndex = this.getEleIndex(trgParent);
      if (!isNullOrUndefined(this.popEle) && trg.classList.contains("e-hor-nav")) {
        this.popEle.classList.contains(CLS_POPUP_OPEN) ? this.popObj.hide(this.hide) : this.popObj.show(this.show);
      } else if (trg.classList.contains("e-scroll-nav")) {
        trg.click();
      } else {
        if (!isNullOrUndefined(trgParent) && trgParent.classList.contains(CLS_ACTIVE) === false) {
          this.selectTab(trgIndex, null, true);
          if (!isNullOrUndefined(this.popEle)) {
            this.popObj.hide(this.hide);
          }
        }
      }
    };
    Tab2.prototype.getTabHeader = function() {
      if (isNullOrUndefined(this.element)) {
        return void 0;
      }
      var headers = [].slice.call(this.element.children).filter(function(e) {
        return e.classList.contains(CLS_HEADER);
      });
      if (headers.length > 0) {
        return headers[0];
      } else {
        var wrap = [].slice.call(this.element.children).filter(function(e) {
          return !e.classList.contains(CLS_BLA_TEM);
        })[0];
        if (!wrap) {
          return void 0;
        }
        return [].slice.call(wrap.children).filter(function(e) {
          return e.classList.contains(CLS_HEADER);
        })[0];
      }
    };
    Tab2.prototype.getEleIndex = function(item) {
      return Array.prototype.indexOf.call(selectAll("." + CLS_TB_ITEM, this.getTabHeader()), item);
    };
    Tab2.prototype.extIndex = function(id) {
      return id.replace(CLS_ITEM + this.tabId + "_", "");
    };
    Tab2.prototype.expTemplateContent = function() {
      var _this = this;
      this.templateEle.forEach(function(eleStr) {
        if (!isNullOrUndefined(_this.element.querySelector(eleStr))) {
          document.body.appendChild(_this.element.querySelector(eleStr)).style.display = "none";
        }
      });
    };
    Tab2.prototype.templateCompile = function(ele, cnt, index) {
      var tempEle = this.createElement("div");
      this.compileElement(tempEle, cnt, "content", index);
      if (tempEle.childNodes.length !== 0) {
        ele.appendChild(tempEle);
      }
      if (this.isReact) {
        this.renderReactTemplates();
      }
    };
    Tab2.prototype.compileElement = function(ele, val, prop, index) {
      var templateFn;
      if (typeof val === "string") {
        val = val.trim();
        if (this.isVue) {
          templateFn = compile$1(SanitizeHtmlHelper.sanitize(val));
        } else {
          ele.innerHTML = SanitizeHtmlHelper.sanitize(val);
        }
      } else {
        templateFn = compile$1(val);
      }
      var templateFUN;
      if (!isNullOrUndefined(templateFn)) {
        templateFUN = templateFn({}, this, prop);
      }
      if (!isNullOrUndefined(templateFn) && templateFUN.length > 0) {
        [].slice.call(templateFUN).forEach(function(el) {
          ele.appendChild(el);
        });
      }
    };
    Tab2.prototype.headerTextCompile = function(element2, text, index) {
      this.compileElement(element2, text, "headerTemplate", index);
    };
    Tab2.prototype.getContent = function(ele, cnt, callType, index) {
      var eleStr;
      cnt = isNullOrUndefined(cnt) ? "" : cnt;
      if (typeof cnt === "string" || isNullOrUndefined(cnt.innerHTML)) {
        if (typeof cnt === "string" && this.enableHtmlSanitizer) {
          cnt = SanitizeHtmlHelper.sanitize(cnt);
        }
        if (cnt[0] === "." || cnt[0] === "#") {
          if (document.querySelectorAll(cnt).length) {
            var eleVal = document.querySelector(cnt);
            eleStr = eleVal.outerHTML.trim();
            if (callType === "clone") {
              ele.appendChild(eleVal.cloneNode(true));
            } else {
              ele.appendChild(eleVal);
              eleVal.style.display = "";
            }
          } else {
            this.templateCompile(ele, cnt, index);
          }
        } else {
          this.templateCompile(ele, cnt, index);
        }
      } else {
        ele.appendChild(cnt);
      }
      if (!isNullOrUndefined(eleStr)) {
        if (this.templateEle.indexOf(cnt.toString()) === -1) {
          this.templateEle.push(cnt.toString());
        }
      }
    };
    Tab2.prototype.getTrgContent = function(cntEle, no) {
      var ele;
      if (this.element.classList.contains(CLS_NEST)) {
        ele = select$1("." + CLS_NEST + "> ." + CLS_CONTENT + " > #" + CLS_CONTENT + this.tabId + "_" + no, this.element);
      } else {
        ele = this.findEle(cntEle.children, CLS_CONTENT + this.tabId + "_" + no);
      }
      return ele;
    };
    Tab2.prototype.findEle = function(items, key) {
      var ele;
      for (var i = 0; i < items.length; i++) {
        if (items[i].id === key) {
          ele = items[i];
          break;
        }
      }
      return ele;
    };
    Tab2.prototype.isVertical = function() {
      var isVertical = this.headerPlacement === "Left" || this.headerPlacement === "Right" ? true : false;
      this.scrCntClass = isVertical ? CLS_VSCRCNT : CLS_HSCRCNT;
      return isVertical;
    };
    Tab2.prototype.addVerticalClass = function() {
      if (this.isVertical()) {
        var tbPos = this.headerPlacement === "Left" ? CLS_VLEFT : CLS_VRIGHT;
        addClass([this.hdrEle], [CLS_VERTICAL, tbPos]);
        if (!this.element.classList.contains(CLS_NEST)) {
          addClass([this.element], [CLS_VTAB, tbPos]);
        } else {
          addClass([this.hdrEle], [CLS_VTAB, tbPos]);
        }
      }
      if (this.headerPlacement === "Bottom") {
        addClass([this.hdrEle], [CLS_HBOTTOM]);
      }
    };
    Tab2.prototype.updatePopAnimationConfig = function() {
      this.show = { name: this.isVertical() ? "FadeIn" : "SlideDown", duration: 100 };
      this.hide = { name: this.isVertical() ? "FadeOut" : "SlideUp", duration: 100 };
    };
    Tab2.prototype.changeOrientation = function(place) {
      this.setOrientation(place, this.hdrEle);
      var activeTab = this.hdrEle.querySelector("." + CLS_ACTIVE);
      var isVertical = this.hdrEle.classList.contains(CLS_VERTICAL) ? true : false;
      removeClass([this.element], [CLS_VTAB]);
      removeClass([this.hdrEle], [CLS_VERTICAL, CLS_VLEFT, CLS_VRIGHT]);
      if (isVertical !== this.isVertical()) {
        this.changeToolbarOrientation();
        if (!isNullOrUndefined(activeTab) && activeTab.classList.contains(CLS_TB_POPUP)) {
          this.popupHandler(activeTab);
        }
      }
      this.addVerticalClass();
      this.setActiveBorder();
      this.focusItem();
    };
    Tab2.prototype.focusItem = function() {
      var curActItem = select$1(" #" + CLS_ITEM + this.tabId + "_" + this.selectedItem, this.hdrEle);
      if (!isNullOrUndefined(curActItem)) {
        curActItem.firstElementChild.focus();
      }
    };
    Tab2.prototype.changeToolbarOrientation = function() {
      this.tbObj.setProperties({ height: this.isVertical() ? "100%" : "auto", width: this.isVertical() ? "auto" : "100%" }, true);
      this.tbObj.changeOrientation();
      this.updatePopAnimationConfig();
    };
    Tab2.prototype.setOrientation = function(place, ele) {
      var headerPos = Array.prototype.indexOf.call(this.element.children, ele);
      var contentPos = Array.prototype.indexOf.call(this.element.children, this.element.querySelector("." + CLS_CONTENT));
      if (place === "Bottom" && contentPos > headerPos) {
        this.element.appendChild(ele);
      } else {
        removeClass([ele], [CLS_HBOTTOM]);
        this.element.insertBefore(ele, select$1("." + CLS_CONTENT, this.element));
      }
    };
    Tab2.prototype.setCssClass = function(ele, cls, val) {
      if (cls === "") {
        return;
      }
      var list = cls.split(" ");
      for (var i = 0; i < list.length; i++) {
        if (val) {
          ele.classList.add(list[i]);
        } else {
          ele.classList.remove(list[i]);
        }
      }
    };
    Tab2.prototype.setContentHeight = function(val) {
      if (this.element.classList.contains(CLS_FILL)) {
        removeClass([this.element], [CLS_FILL]);
      }
      if (isNullOrUndefined(this.cntEle)) {
        return;
      }
      var hdrEle = this.getTabHeader();
      if (this.heightAdjustMode === "None") {
        if (this.height === "auto") {
          return;
        } else {
          if (!this.isVertical()) {
            setStyleAttribute(this.cntEle, { "height": this.element.clientHeight - hdrEle.offsetHeight + "px" });
          }
        }
      } else if (this.heightAdjustMode === "Fill") {
        addClass([this.element], [CLS_FILL]);
        setStyleAttribute(this.element, { "height": "100%" });
        this.cntEle.style.height = "calc(100% - " + this.hdrEle.offsetHeight + "px)";
      } else if (this.heightAdjustMode === "Auto") {
        if (this.isTemplate === true) {
          var cnt = selectAll("." + CLS_CONTENT + " > ." + CLS_ITEM, this.element);
          for (var i = 0; i < cnt.length; i++) {
            cnt[i].setAttribute("style", "display:block; visibility: visible");
            this.maxHeight = Math.max(this.maxHeight, this.getHeight(cnt[i]));
            cnt[i].style.removeProperty("display");
            cnt[i].style.removeProperty("visibility");
          }
        } else {
          this.cntEle = select$1("." + CLS_CONTENT, this.element);
          if (val === true) {
            this.cntEle.appendChild(this.createElement("div", {
              id: CLS_CONTENT + this.tabId + "_0",
              className: CLS_ITEM + " " + CLS_ACTIVE,
              attrs: { "role": "tabpanel", "aria-labelledby": CLS_ITEM + this.tabId + "_0" }
            }));
          }
          var ele = this.cntEle.children.item(0);
          for (var i = 0; i < this.items.length; i++) {
            this.getContent(ele, this.items[i].content, "clone", i);
            this.maxHeight = Math.max(this.maxHeight, this.getHeight(ele));
            while (ele.firstChild) {
              ele.removeChild(ele.firstChild);
            }
          }
          if (this.isReact) {
            this.clearTemplate(["content"]);
          }
          this.templateEle = [];
          this.getContent(ele, this.items[0].content, "render", 0);
          if (this.prevIndex !== this.selectedItem) {
            ele.classList.remove(CLS_ACTIVE);
          }
        }
        setStyleAttribute(this.cntEle, { "height": this.maxHeight + "px" });
      } else {
        setStyleAttribute(this.cntEle, { "height": "auto" });
      }
    };
    Tab2.prototype.getHeight = function(ele) {
      var cs = window.getComputedStyle(ele);
      return ele.offsetHeight + parseFloat(cs.getPropertyValue("padding-top")) + parseFloat(cs.getPropertyValue("padding-bottom")) + parseFloat(cs.getPropertyValue("margin-top")) + parseFloat(cs.getPropertyValue("margin-bottom"));
    };
    Tab2.prototype.setActiveBorder = function() {
      var trgHdrEle = this.getTabHeader();
      var trg = select$1("." + CLS_TB_ITEM + "." + CLS_ACTIVE, trgHdrEle);
      if (isNullOrUndefined(trg)) {
        return;
      }
      if (!this.reorderActiveTab) {
        if (trg.classList.contains(CLS_TB_POPUP) && !this.bdrLine.classList.contains(CLS_HIDDEN)) {
          this.bdrLine.classList.add(CLS_HIDDEN);
        }
        if (trgHdrEle && !trgHdrEle.classList.contains(CLS_REORDER_ACTIVE_ITEM)) {
          trgHdrEle.classList.add(CLS_REORDER_ACTIVE_ITEM);
        }
      } else if (trgHdrEle) {
        trgHdrEle.classList.remove(CLS_REORDER_ACTIVE_ITEM);
      }
      var root = closest(trg, "." + CLS_TAB);
      if (this.element !== root) {
        return;
      }
      this.tbItems = select$1("." + CLS_TB_ITEMS, trgHdrEle);
      var bar = select$1("." + CLS_INDICATOR, trgHdrEle);
      var scrollCnt = select$1("." + CLS_TB_ITEMS + " ." + this.scrCntClass, trgHdrEle);
      if (this.isVertical()) {
        setStyleAttribute(bar, { "left": "", "right": "" });
        var tbHeight = isNullOrUndefined(scrollCnt) ? this.tbItems.offsetHeight : scrollCnt.offsetHeight;
        if (tbHeight !== 0) {
          setStyleAttribute(bar, { "top": trg.offsetTop + "px", "height": trg.offsetHeight + "px" });
        } else {
          setStyleAttribute(bar, { "top": 0, "height": 0 });
        }
      } else {
        if (this.overflowMode === "MultiRow") {
          var top_1 = this.headerPlacement === "Bottom" ? trg.offsetTop : trg.offsetHeight + trg.offsetTop;
          setStyleAttribute(bar, { "top": top_1 + "px", "height": "" });
        } else {
          setStyleAttribute(bar, { "top": "", "height": "" });
        }
        var tbWidth = isNullOrUndefined(scrollCnt) ? this.tbItems.offsetWidth : scrollCnt.offsetWidth;
        if (tbWidth !== 0) {
          setStyleAttribute(bar, { "left": trg.offsetLeft + "px", "right": tbWidth - (trg.offsetLeft + trg.offsetWidth) + "px" });
        } else {
          setStyleAttribute(bar, { "left": "auto", "right": "auto" });
        }
      }
      if (!isNullOrUndefined(this.bdrLine) && !trg.classList.contains(CLS_TB_POPUP)) {
        this.bdrLine.classList.remove(CLS_HIDDEN);
      }
    };
    Tab2.prototype.setActive = function(value, skipDataBind, isInteracted) {
      if (skipDataBind === void 0) {
        skipDataBind = false;
      }
      if (isInteracted === void 0) {
        isInteracted = false;
      }
      this.tbItem = selectAll("." + CLS_TB_ITEM, this.getTabHeader());
      var trg = this.tbItem[value];
      if (value < 0 || isNaN(value) || this.tbItem.length === 0) {
        return;
      }
      if (value >= 0 && !skipDataBind) {
        this.allowServerDataBinding = false;
        this.setProperties({ selectedItem: value }, true);
        this.allowServerDataBinding = true;
        if (!this.initRender) {
          this.serverDataBind();
        }
      }
      if (trg.classList.contains(CLS_ACTIVE)) {
        this.setActiveBorder();
        return;
      }
      if (!this.isTemplate) {
        attributes(trg.firstElementChild, { "aria-controls": CLS_CONTENT + this.tabId + "_" + value });
      }
      var id = trg.id;
      this.removeActiveClass();
      trg.classList.add(CLS_ACTIVE);
      trg.firstElementChild.setAttribute("aria-selected", "true");
      var no = Number(this.extIndex(id));
      if (isNullOrUndefined(this.prevActiveEle)) {
        this.prevActiveEle = CLS_CONTENT + this.tabId + "_" + no;
      }
      if (this.isTemplate) {
        if (select$1("." + CLS_CONTENT, this.element).children.length > 0) {
          var trg_1 = this.findEle(select$1("." + CLS_CONTENT, this.element).children, CLS_CONTENT + this.tabId + "_" + no);
          if (!isNullOrUndefined(trg_1)) {
            trg_1.classList.add(CLS_ACTIVE);
          }
          this.triggerAnimation(id, this.enableAnimation);
        }
      } else {
        this.cntEle = select$1("." + CLS_TAB + " > ." + CLS_CONTENT, this.element);
        var item = this.getTrgContent(this.cntEle, this.extIndex(id));
        if (isNullOrUndefined(item)) {
          this.cntEle.appendChild(this.createElement("div", {
            id: CLS_CONTENT + this.tabId + "_" + this.extIndex(id),
            className: CLS_ITEM + " " + CLS_ACTIVE,
            attrs: { role: "tabpanel", "aria-labelledby": CLS_ITEM + this.tabId + "_" + this.extIndex(id) }
          }));
          var eleTrg = this.getTrgContent(this.cntEle, this.extIndex(id));
          var itemIndex = Array.prototype.indexOf.call(this.itemIndexArray, id);
          this.getContent(eleTrg, this.items[itemIndex].content, "render", itemIndex);
        } else {
          item.classList.add(CLS_ACTIVE);
        }
        this.triggerAnimation(id, this.enableAnimation);
      }
      this.setActiveBorder();
      this.refreshItemVisibility(trg);
      if (!this.initRender && !skipDataBind) {
        trg.firstElementChild.focus();
        var eventArg = {
          previousItem: this.prevItem,
          previousIndex: this.prevIndex,
          selectedItem: trg,
          selectedIndex: value,
          selectedContent: select$1("#" + CLS_CONTENT + this.tabId + "_" + this.selectingID, this.content),
          isSwiped: this.isSwipeed,
          isInteracted
        };
        this.trigger("selected", eventArg);
      }
    };
    Tab2.prototype.setItems = function(items) {
      this.isReplace = true;
      this.tbItems = select$1("." + CLS_TB_ITEMS, this.getTabHeader());
      this.tbObj.items = this.parseObject(items, 0);
      this.tbObj.dataBind();
      this.isReplace = false;
    };
    Tab2.prototype.setRTL = function(value) {
      this.tbObj.enableRtl = value;
      this.tbObj.dataBind();
      this.setCssClass(this.element, CLS_RTL, value);
      this.refreshActiveBorder();
    };
    Tab2.prototype.refreshActiveBorder = function() {
      if (!isNullOrUndefined(this.bdrLine)) {
        this.bdrLine.classList.add(CLS_HIDDEN);
      }
      this.setActiveBorder();
    };
    Tab2.prototype.showPopup = function(config) {
      var tbPop = select$1(".e-popup.e-toolbar-pop", this.hdrEle);
      if (tbPop.classList.contains("e-popup-close")) {
        var tbPopObj = tbPop && tbPop.ej2_instances[0];
        tbPopObj.position.X = this.headerPlacement === "Left" ? "left" : "right";
        tbPopObj.dataBind();
        tbPopObj.show(config);
      }
    };
    Tab2.prototype.bindDraggable = function() {
      var _this = this;
      if (this.allowDragAndDrop) {
        var tabHeader = this.element.querySelector("." + CLS_HEADER);
        if (tabHeader) {
          var items = tabHeader.querySelectorAll("." + CLS_TB_ITEM);
          items.forEach(function(element2) {
            _this.initializeDrag(element2);
          });
        }
      }
    };
    Tab2.prototype.wireEvents = function() {
      this.bindDraggable();
      window.addEventListener("resize", this.resizeContext);
      EventHandler.add(this.element, "mouseover", this.hoverHandler, this);
      EventHandler.add(this.element, "keydown", this.spaceKeyDown, this);
      if (!isNullOrUndefined(this.cntEle)) {
        this.touchModule = new Touch(this.cntEle, { swipe: this.swipeHandler.bind(this) });
      }
      this.keyModule = new KeyboardEvents(this.element, { keyAction: this.keyHandler.bind(this), keyConfigs: this.keyConfigs });
      this.tabKeyModule = new KeyboardEvents(this.element, {
        keyAction: this.keyHandler.bind(this),
        keyConfigs: { openPopup: "shift+f10", tab: "tab", shiftTab: "shift+tab" },
        eventName: "keydown"
      });
    };
    Tab2.prototype.unWireEvents = function() {
      if (!isNullOrUndefined(this.keyModule)) {
        this.keyModule.destroy();
      }
      if (!isNullOrUndefined(this.tabKeyModule)) {
        this.tabKeyModule.destroy();
      }
      if (!isNullOrUndefined(this.cntEle) && !isNullOrUndefined(this.touchModule)) {
        this.touchModule.destroy();
        this.touchModule = null;
      }
      window.removeEventListener("resize", this.resizeContext);
      EventHandler.remove(this.element, "mouseover", this.hoverHandler);
      EventHandler.remove(this.element, "keydown", this.spaceKeyDown);
      this.element.classList.remove(CLS_RTL);
      this.element.classList.remove(CLS_FOCUS);
    };
    Tab2.prototype.clickHandler = function(args) {
      this.element.classList.remove(CLS_FOCUS);
      var trg = args.originalEvent.target;
      var trgParent = closest(trg, "." + CLS_TB_ITEM);
      var trgIndex = this.getEleIndex(trgParent);
      if (trg.classList.contains(CLS_ICON_CLOSE)) {
        this.removeTab(trgIndex);
      } else if (this.isVertical() && closest(trg, "." + CLS_HOR_NAV)) {
        this.showPopup(this.show);
      } else {
        this.isPopup = false;
        if (!isNullOrUndefined(trgParent) && trgIndex !== this.selectedItem) {
          this.selectTab(trgIndex, args.originalEvent, true);
        }
      }
    };
    Tab2.prototype.swipeHandler = function(e) {
      if (e.velocity < 3 && isNullOrUndefined(e.originalEvent.changedTouches)) {
        return;
      }
      if (this.isNested) {
        this.element.setAttribute("data-swipe", "true");
      }
      var nestedTab = this.element.querySelector('[data-swipe="true"]');
      if (nestedTab) {
        nestedTab.removeAttribute("data-swipe");
        return;
      }
      this.isSwipeed = true;
      if (e.swipeDirection === "Right" && this.selectedItem !== 0) {
        for (var k = this.selectedItem - 1; k >= 0; k--) {
          if (!this.tbItem[k].classList.contains(CLS_HIDDEN)) {
            this.selectTab(k, null, true);
            break;
          }
        }
      } else if (e.swipeDirection === "Left" && this.selectedItem !== selectAll("." + CLS_TB_ITEM, this.element).length - 1) {
        for (var i = this.selectedItem + 1; i < this.tbItem.length; i++) {
          if (!this.tbItem[i].classList.contains(CLS_HIDDEN)) {
            this.selectTab(i, null, true);
            break;
          }
        }
      }
      this.isSwipeed = false;
    };
    Tab2.prototype.spaceKeyDown = function(e) {
      if (e.keyCode === 32 && e.which === 32 || e.keyCode === 35 && e.which === 35) {
        var clstHead = closest(e.target, "." + CLS_HEADER);
        if (!isNullOrUndefined(clstHead)) {
          e.preventDefault();
        }
      }
    };
    Tab2.prototype.keyHandler = function(e) {
      if (this.element.classList.contains(CLS_DISABLE)) {
        return;
      }
      this.element.classList.add(CLS_FOCUS);
      var trg = e.target;
      var tabHeader = this.getTabHeader();
      var actEle = select$1("." + CLS_ACTIVE, tabHeader);
      this.popEle = select$1("." + CLS_TB_POP, tabHeader);
      if (!isNullOrUndefined(this.popEle)) {
        this.popObj = this.popEle.ej2_instances[0];
      }
      var item = closest(document.activeElement, "." + CLS_TB_ITEM);
      var trgParent = closest(trg, "." + CLS_TB_ITEM);
      switch (e.action) {
        case "space":
        case "enter":
          if (trg.parentElement.classList.contains(CLS_DISABLE)) {
            return;
          }
          if (e.action === "enter" && trg.classList.contains("e-hor-nav")) {
            this.showPopup(this.show);
            break;
          }
          this.keyPressed(trg);
          break;
        case "tab":
        case "shiftTab":
          if (trg.classList.contains(CLS_WRAP) && closest(trg, "." + CLS_TB_ITEM).classList.contains(CLS_ACTIVE) === false) {
            trg.setAttribute("tabindex", trg.getAttribute("data-tabindex"));
          }
          if (this.popObj && isVisible(this.popObj.element)) {
            this.popObj.hide(this.hide);
          }
          if (!isNullOrUndefined(actEle) && actEle.children.item(0).getAttribute("tabindex") === "-1") {
            actEle.children.item(0).setAttribute("tabindex", "0");
          }
          break;
        case "moveLeft":
        case "moveRight":
          if (!isNullOrUndefined(item)) {
            this.refreshItemVisibility(item);
          }
          break;
        case "openPopup":
          e.preventDefault();
          if (!isNullOrUndefined(this.popEle) && this.popEle.classList.contains(CLS_POPUP_CLOSE)) {
            this.popObj.show(this.show);
          }
          break;
        case "delete":
          if (this.showCloseButton === true && !isNullOrUndefined(trgParent)) {
            var nxtSib = trgParent.nextSibling;
            if (!isNullOrUndefined(nxtSib) && nxtSib.classList.contains(CLS_TB_ITEM)) {
              nxtSib.firstElementChild.focus();
            }
            this.removeTab(this.getEleIndex(trgParent));
          }
          this.setActiveBorder();
          break;
      }
    };
    Tab2.prototype.refreshItemVisibility = function(target) {
      var scrCnt = select$1("." + this.scrCntClass, this.tbItems);
      if (!this.isVertical() && !isNullOrUndefined(scrCnt)) {
        var scrBar = select$1(".e-hscroll-bar", this.tbItems);
        scrBar.removeAttribute("tabindex");
        var scrStart = scrBar.scrollLeft;
        var scrEnd = scrStart + scrBar.offsetWidth;
        var eleStart = target.offsetLeft;
        var eleWidth = target.offsetWidth;
        var eleEnd = target.offsetLeft + target.offsetWidth;
        if (scrStart < eleStart && scrEnd < eleEnd) {
          var eleViewRange = scrEnd - eleStart;
          scrBar.scrollLeft = scrStart + (eleWidth - eleViewRange);
        } else {
          if (scrStart > eleStart && scrEnd > eleEnd) {
            var eleViewRange = eleEnd - scrStart;
            scrBar.scrollLeft = scrStart - (eleWidth - eleViewRange);
          }
        }
      } else {
        return;
      }
    };
    Tab2.prototype.getIndexFromEle = function(id) {
      return parseInt(id.substring(id.lastIndexOf("_") + 1), 10);
    };
    Tab2.prototype.hoverHandler = function(e) {
      var trg = e.target;
      if (!isNullOrUndefined(trg.classList) && trg.classList.contains(CLS_ICON_CLOSE)) {
        trg.setAttribute("title", new L10n("tab", { closeButtonTitle: this.title }, this.locale).getConstant("closeButtonTitle"));
      }
    };
    Tab2.prototype.evalOnPropertyChangeItems = function(newProp, oldProp) {
      if (!(newProp.items instanceof Array && oldProp.items instanceof Array)) {
        var changedProp = Object.keys(newProp.items);
        for (var i = 0; i < changedProp.length; i++) {
          var index = parseInt(Object.keys(newProp.items)[i], 10);
          var properties2 = Object.keys(newProp.items[index]);
          for (var j = 0; j < properties2.length; j++) {
            var oldVal = Object(oldProp.items[index])[properties2[j]];
            var newVal = Object(newProp.items[index])[properties2[j]];
            var hdr = this.element.querySelectorAll("." + CLS_TB_ITEM)[index];
            var itemIndex = void 0;
            if (hdr && !isNullOrUndefined(hdr.id) && hdr.id !== "") {
              itemIndex = this.getIndexFromEle(hdr.id);
            } else {
              itemIndex = index;
            }
            var hdrItem = select$1("." + CLS_TB_ITEMS + " #" + CLS_ITEM + this.tabId + "_" + itemIndex, this.element);
            var cntItem = select$1("." + CLS_CONTENT + " #" + CLS_CONTENT + this.tabId + "_" + itemIndex, this.element);
            if (properties2[j] === "header" || properties2[j] === "headerTemplate") {
              var icon = isNullOrUndefined(this.items[index].header) || isNullOrUndefined(this.items[index].header.iconCss) ? "" : this.items[index].header.iconCss;
              var textVal = this.items[index].headerTemplate || this.items[index].header.text;
              if (textVal === "" && icon === "") {
                this.removeTab(index);
              } else {
                this.tbId = hdr.id;
                var arr = [];
                arr.push(this.items[index]);
                this.items.splice(index, 1);
                this.itemIndexArray.splice(index, 1);
                this.tbObj.items.splice(index, 1);
                var isHiddenEle = hdrItem.classList.contains(CLS_HIDDEN);
                detach(hdrItem);
                this.isReplace = true;
                this.addTab(arr, index);
                if (isHiddenEle) {
                  this.hideTab(index);
                }
                this.isReplace = false;
              }
            }
            if (properties2[j] === "content" && !isNullOrUndefined(cntItem)) {
              var strVal = typeof newVal === "string" || isNullOrUndefined(newVal.innerHTML);
              if (strVal && (newVal[0] === "." || newVal[0] === "#") && newVal.length) {
                var eleVal = document.querySelector(newVal);
                cntItem.appendChild(eleVal);
                eleVal.style.display = "";
              } else if (newVal === "" && oldVal[0] === "#") {
                document.body.appendChild(this.element.querySelector(oldVal)).style.display = "none";
                cntItem.innerHTML = newVal;
              } else if (this.isReact) {
                cntItem.innerHTML = "";
                this.templateCompile(cntItem, newVal, index);
              } else if (typeof newVal !== "function") {
                cntItem.innerHTML = newVal;
              }
            }
            if (properties2[j] === "cssClass") {
              if (!isNullOrUndefined(hdrItem)) {
                hdrItem.classList.remove(oldVal);
                hdrItem.classList.add(newVal);
              }
              if (!isNullOrUndefined(cntItem)) {
                cntItem.classList.remove(oldVal);
                cntItem.classList.add(newVal);
              }
            }
            if (properties2[j] === "disabled") {
              this.enableTab(index, newVal === true ? false : true);
            }
            if (properties2[j] === "visible") {
              this.hideTab(index, newVal === true ? false : true);
            }
          }
        }
      } else {
        this.lastIndex = 0;
        if (isNullOrUndefined(this.tbObj)) {
          this.reRenderItems();
        } else {
          if (this.isReact || this.isAngular) {
            this.clearTemplate();
          }
          this.setItems(newProp.items);
          if (this.templateEle.length > 0) {
            this.expTemplateContent();
          }
          this.templateEle = [];
          var selectElement = select$1("." + CLS_TAB + " > ." + CLS_CONTENT, this.element);
          while (selectElement.firstElementChild) {
            detach(selectElement.firstElementChild);
          }
          this.select(this.selectedItem);
          this.draggableItems = [];
          this.bindDraggable();
        }
      }
    };
    Tab2.prototype.initializeDrag = function(target) {
      var _this = this;
      var dragObj = new Draggable(target, {
        dragArea: this.dragArea,
        dragTarget: "." + CLS_TB_ITEM,
        clone: true,
        helper: this.helper.bind(this),
        dragStart: this.itemDragStart.bind(this),
        drag: function(e) {
          var dragIndex = _this.getEleIndex(_this.dragItem);
          var dropIndex;
          var dropItem;
          var dragArgs = {
            draggedItem: _this.dragItem,
            event: e.event,
            target: e.target,
            droppedItem: e.target.closest("." + CLS_TB_ITEM),
            clonedElement: _this.cloneElement,
            index: dragIndex
          };
          if (!isNullOrUndefined(e.target.closest("." + CLS_TAB)) && !e.target.closest("." + CLS_TAB).isEqualNode(_this.element) && _this.dragArea !== "." + CLS_HEADER) {
            _this.trigger("dragging", dragArgs);
          } else {
            if (!e.target.closest(_this.dragArea) && _this.overflowMode !== "Popup") {
              document.body.style.cursor = "not-allowed";
              addClass([_this.cloneElement], CLS_HIDDEN);
              if (_this.dragItem.classList.contains(CLS_HIDDEN)) {
                removeClass([_this.dragItem], CLS_HIDDEN);
              }
              _this.dragItem.querySelector("." + CLS_WRAP).style.visibility = "visible";
            } else {
              document.body.style.cursor = "";
              _this.dragItem.querySelector("." + CLS_WRAP).style.visibility = "hidden";
              if (_this.cloneElement.classList.contains(CLS_HIDDEN)) {
                removeClass([_this.cloneElement], CLS_HIDDEN);
              }
            }
            if (_this.overflowMode === "Scrollable" && !isNullOrUndefined(_this.element.querySelector(".e-hscroll"))) {
              var scrollRightNavEle = _this.element.querySelector(".e-scroll-right-nav");
              var scrollLeftNavEle = _this.element.querySelector(".e-scroll-left-nav");
              var hscrollBar = _this.element.querySelector(".e-hscroll-bar");
              if (!isNullOrUndefined(scrollRightNavEle) && Math.abs(scrollRightNavEle.offsetWidth / 2 + scrollRightNavEle.offsetLeft) > _this.cloneElement.offsetLeft + _this.cloneElement.offsetWidth) {
                hscrollBar.scrollLeft -= 10;
              }
              if (!isNullOrUndefined(scrollLeftNavEle) && Math.abs(scrollLeftNavEle.offsetLeft + scrollLeftNavEle.offsetWidth - _this.cloneElement.offsetLeft) > scrollLeftNavEle.offsetWidth / 2) {
                hscrollBar.scrollLeft += 10;
              }
            }
            _this.cloneElement.style.pointerEvents = "none";
            dropItem = closest(e.target, "." + CLS_TB_ITEM + ".e-draggable");
            var scrollContentWidth = 0;
            if (_this.overflowMode === "Scrollable" && !isNullOrUndefined(_this.element.querySelector(".e-hscroll"))) {
              scrollContentWidth = _this.element.querySelector(".e-hscroll-content").offsetWidth;
            }
            if (dropItem != null && !dropItem.isSameNode(_this.dragItem) && dropItem.closest("." + CLS_TAB).isSameNode(_this.dragItem.closest("." + CLS_TAB))) {
              dropIndex = _this.getEleIndex(dropItem);
              if (dropIndex < dragIndex && Math.abs(dropItem.offsetLeft + dropItem.offsetWidth - _this.cloneElement.offsetLeft) > dropItem.offsetWidth / 2) {
                _this.dragAction(dropItem, dragIndex, dropIndex);
              }
              if (dropIndex > dragIndex && Math.abs(dropItem.offsetWidth / 2) + dropItem.offsetLeft - scrollContentWidth < _this.cloneElement.offsetLeft + _this.cloneElement.offsetWidth) {
                _this.dragAction(dropItem, dragIndex, dropIndex);
              }
            }
            _this.droppedIndex = _this.getEleIndex(_this.dragItem);
            _this.trigger("dragging", dragArgs);
          }
        },
        dragStop: this.itemDragStop.bind(this)
      });
      this.draggableItems.push(dragObj);
    };
    Tab2.prototype.helper = function(e) {
      this.cloneElement = this.createElement("div");
      if (e.element) {
        this.cloneElement = e.element.cloneNode(true);
        addClass([this.cloneElement], "e-tab-clone-element");
        if (this.element.querySelector("." + CLS_HEADER).classList.contains(CLS_CLOSE_SHOW)) {
          addClass([this.cloneElement], CLS_CLOSE_SHOW);
        }
        removeClass([this.cloneElement.querySelector("." + CLS_WRAP)], "e-ripple");
        if (!isNullOrUndefined(this.cloneElement.querySelector(".e-ripple-element"))) {
          remove(this.cloneElement.querySelector(".e-ripple-element"));
        }
        document.body.appendChild(this.cloneElement);
      }
      return this.cloneElement;
    };
    Tab2.prototype.itemDragStart = function(e) {
      var _this = this;
      this.draggingItems = this.items.map(function(x) {
        return x;
      });
      this.dragItem = e.element;
      var dragArgs = {
        draggedItem: e.element,
        event: e.event,
        target: e.target,
        droppedItem: null,
        index: this.getEleIndex(this.dragItem),
        clonedElement: this.cloneElement,
        cancel: false
      };
      this.trigger("onDragStart", dragArgs, function(tabitemDragArgs) {
        if (tabitemDragArgs.cancel) {
          detach(_this.cloneElement);
        } else {
          _this.removeActiveClass();
          addClass([_this.tbItems.querySelector("." + CLS_INDICATOR)], CLS_HIDDEN);
          _this.dragItem.querySelector("." + CLS_WRAP).style.visibility = "hidden";
        }
      });
    };
    Tab2.prototype.dragAction = function(dropItem, dragsIndex, dropIndex) {
      if (this.items.length > 0) {
        var item = this.draggingItems[dragsIndex];
        this.draggingItems.splice(dragsIndex, 1);
        this.draggingItems.splice(dropIndex, 0, item);
      }
      if (this.overflowMode === "MultiRow") {
        dropItem.parentNode.insertBefore(this.dragItem, dropItem.nextElementSibling);
      }
      if (dragsIndex > dropIndex) {
        if (!this.dragItem.parentElement.isSameNode(dropItem.parentElement)) {
          if (this.overflowMode === "Extended") {
            if (dropItem.isSameNode(dropItem.parentElement.lastChild)) {
              var popupContainer = this.dragItem.parentNode;
              dropItem.parentNode.insertBefore(this.dragItem, dropItem);
              popupContainer.insertBefore(dropItem.parentElement.lastChild, popupContainer.childNodes[0]);
            } else {
              this.dragItem.parentNode.insertBefore(dropItem.parentElement.lastChild, this.dragItem.parentElement.childNodes[0]);
              dropItem.parentNode.insertBefore(this.dragItem, dropItem);
            }
          } else {
            var lastEle = dropItem.parentElement.lastChild;
            if (dropItem.isSameNode(lastEle)) {
              var popupContainer = this.dragItem.parentNode;
              dropItem.parentNode.insertBefore(this.dragItem, dropItem);
              popupContainer.insertBefore(lastEle, popupContainer.childNodes[0]);
            } else {
              this.dragItem.parentNode.insertBefore(dropItem.parentElement.lastChild, this.dragItem.parentElement.childNodes[0]);
              dropItem.parentNode.insertBefore(this.dragItem, dropItem);
            }
          }
        } else {
          this.dragItem.parentNode.insertBefore(this.dragItem, dropItem);
        }
      }
      if (dragsIndex < dropIndex) {
        if (!this.dragItem.parentElement.isSameNode(dropItem.parentElement)) {
          if (this.overflowMode === "Extended") {
            this.dragItem.parentElement.appendChild(dropItem.parentElement.firstElementChild);
            dropItem.parentNode.insertBefore(this.dragItem, dropItem.nextSibling);
          } else {
            this.dragItem.parentNode.insertBefore(dropItem.parentElement.lastChild, this.dragItem.parentElement.childNodes[0]);
            dropItem.parentNode.insertBefore(this.dragItem, dropItem);
          }
        } else {
          this.dragItem.parentNode.insertBefore(this.dragItem, dropItem.nextElementSibling);
        }
      }
    };
    Tab2.prototype.itemDragStop = function(e) {
      var _this = this;
      detach(this.cloneElement);
      this.cloneElement = null;
      this.dragItem.querySelector("." + CLS_WRAP).style.visibility = "visible";
      document.body.style.cursor = "";
      var dragStopArgs = {
        draggedItem: this.dragItem,
        event: e.event,
        target: e.target,
        droppedItem: this.tbItem[this.droppedIndex],
        clonedElement: null,
        index: this.droppedIndex,
        cancel: false
      };
      this.trigger("dragged", dragStopArgs, function(tabItemDropArgs) {
        if (tabItemDropArgs.cancel) {
          _this.refresh();
        } else {
          if (_this.items.length > 0 && _this.draggingItems.length > 0) {
            _this.items = _this.draggingItems;
            _this.selectedItem = _this.droppedIndex;
            _this.refresh();
          } else {
            _this.dragItem.querySelector("." + CLS_WRAP).style.visibility = "";
            removeClass([_this.tbItems.querySelector("." + CLS_INDICATOR)], CLS_HIDDEN);
            _this.selectTab(_this.droppedIndex, null, true);
          }
        }
      });
      this.dragItem = null;
    };
    Tab2.prototype.enableTab = function(index, value) {
      var tbItems = selectAll("." + CLS_TB_ITEM, this.element)[index];
      if (isNullOrUndefined(tbItems)) {
        return;
      }
      if (value === true) {
        tbItems.classList.remove(CLS_DISABLE, CLS_OVERLAY);
        tbItems.firstElementChild.setAttribute("tabindex", tbItems.firstElementChild.getAttribute("data-tabindex"));
      } else {
        tbItems.classList.add(CLS_DISABLE, CLS_OVERLAY);
        tbItems.firstElementChild.removeAttribute("tabindex");
        if (tbItems.classList.contains(CLS_ACTIVE)) {
          this.select(index + 1);
        }
      }
      if (!isNullOrUndefined(this.items[index])) {
        this.items[index].disabled = !value;
        this.dataBind();
      }
      tbItems.firstElementChild.setAttribute("aria-disabled", value === true ? "false" : "true");
    };
    Tab2.prototype.addTab = function(items, index) {
      var _this = this;
      var addArgs = { addedItems: items, cancel: false };
      if (!this.isReplace) {
        this.trigger("adding", addArgs, function(tabAddingArgs) {
          if (!tabAddingArgs.cancel) {
            _this.addingTabContent(items, index);
          }
        });
      } else {
        this.addingTabContent(items, index);
      }
      if (this.isReact) {
        this.renderReactTemplates();
      }
    };
    Tab2.prototype.addingTabContent = function(items, index) {
      var _this = this;
      var lastEleIndex = 0;
      this.hdrEle = select$1("." + CLS_HEADER, this.element);
      if (isNullOrUndefined(this.hdrEle)) {
        this.items = items;
        this.reRenderItems();
        this.bindDraggable();
      } else {
        var itemsCount = selectAll(".e-tab-header ." + CLS_TB_ITEM, this.element).length;
        if (itemsCount !== 0) {
          lastEleIndex = this.lastIndex + 1;
        }
        if (isNullOrUndefined(index)) {
          index = itemsCount - 1;
        }
        if (itemsCount < index || index < 0 || isNaN(index)) {
          return;
        }
        if (itemsCount === 0 && !isNullOrUndefined(this.hdrEle)) {
          this.hdrEle.style.display = "";
        }
        if (!isNullOrUndefined(this.bdrLine)) {
          this.bdrLine.classList.add(CLS_HIDDEN);
        }
        this.tbItems = select$1("." + CLS_TB_ITEMS, this.getTabHeader());
        this.isAdd = true;
        var tabItems_2 = this.parseObject(items, index);
        this.isAdd = false;
        var i_1 = 0;
        var textValue_1;
        items.forEach(function(item, place) {
          textValue_1 = item.headerTemplate || item.header.text;
          if (!(isNullOrUndefined(item.headerTemplate || item.header) || isNullOrUndefined(textValue_1) || textValue_1.length === 0 && !isNullOrUndefined(item.header) && isNullOrUndefined(item.header.iconCss))) {
            if (tabItems_2[place]) {
              if (isNullOrUndefined(item.id)) {
                item.id = CLS_ITEM + _this.tabId + "_" + TABITEMPREFIX + (lastEleIndex + place).toString();
              }
              tabItems_2[place].htmlAttributes["data-id"] = item.id;
            }
            _this.items.splice(index + i_1, 0, item);
            i_1++;
          }
          if (_this.isTemplate && !isNullOrUndefined(item.header) && !isNullOrUndefined(item.header.text)) {
            var no = lastEleIndex + place;
            var ele = _this.createElement("div", {
              id: CLS_CONTENT + _this.tabId + "_" + no,
              className: CLS_ITEM,
              attrs: { role: "tabpanel", "aria-labelledby": CLS_ITEM + "_" + no }
            });
            _this.cntEle.insertBefore(ele, _this.cntEle.children[index + place]);
            var eleTrg = _this.getTrgContent(_this.cntEle, no.toString());
            _this.getContent(eleTrg, item.content, "render", index);
          }
        });
        this.tbObj.addItems(tabItems_2, index);
        if (!this.isReplace) {
          this.trigger("added", { addedItems: items });
        }
        if (this.selectedItem === index) {
          this.select(index);
        } else {
          this.setActiveBorder();
          this.tbItem = selectAll("." + CLS_TB_ITEM, this.getTabHeader());
        }
        this.bindDraggable();
      }
    };
    Tab2.prototype.removeTab = function(index) {
      var _this = this;
      var trg = selectAll("." + CLS_TB_ITEM, this.element)[index];
      if (isNullOrUndefined(trg)) {
        return;
      }
      var removeArgs = { removedItem: trg, removedIndex: index, cancel: false };
      this.trigger("removing", removeArgs, function(tabRemovingArgs) {
        if (!tabRemovingArgs.cancel) {
          _this.tbObj.removeItems(index);
          if (_this.allowDragAndDrop && index !== Array.prototype.indexOf.call(_this.itemIndexArray, trg.id)) {
            index = Array.prototype.indexOf.call(_this.itemIndexArray, trg.id);
          }
          var targetEleIndex = _this.itemIndexArray.indexOf(trg.id);
          _this.items.splice(targetEleIndex, 1);
          _this.itemIndexArray.splice(targetEleIndex, 1);
          _this.refreshActiveBorder();
          var cntTrg = select$1("#" + CLS_CONTENT + _this.tabId + "_" + _this.extIndex(trg.id), select$1("." + CLS_CONTENT, _this.element));
          if (!isNullOrUndefined(cntTrg)) {
            var registeredTemplate = _this.registeredTemplate;
            _this.portals;
            if (registeredTemplate && registeredTemplate.content) {
              var templateToClear = [];
              for (var i = 0; i < registeredTemplate.content.length; i++) {
                var registeredItem = registeredTemplate.content[i].rootNodes[0];
                var closestItem = closest(registeredItem, "." + CLS_ITEM);
                if (!isNullOrUndefined(registeredItem) && closestItem === cntTrg) {
                  templateToClear.push(registeredTemplate.content[i]);
                  break;
                }
              }
              if (templateToClear.length > 0) {
                _this.clearTemplate(["content"], templateToClear);
              }
            }
            detach(cntTrg);
          }
          _this.trigger("removed", tabRemovingArgs);
          if (_this.draggableItems && _this.draggableItems.length > 0) {
            _this.draggableItems[index].destroy();
            _this.draggableItems[index] = null;
            _this.draggableItems.splice(index, 1);
          }
          if (trg.classList.contains(CLS_ACTIVE)) {
            index = index > selectAll("." + CLS_TB_ITEM + ":not(." + CLS_TB_POPUP + ")", _this.element).length - 1 ? index - 1 : index;
            _this.enableAnimation = false;
            _this.selectedItem = index;
            _this.select(index);
          } else if (index !== _this.selectedItem) {
            if (index < _this.selectedItem) {
              index = _this.itemIndexArray.indexOf(_this.tbItem[_this.selectedItem].id);
              _this.setProperties({ selectedItem: index > -1 ? index : _this.selectedItem }, true);
              _this.prevIndex = _this.selectedItem;
            }
            _this.tbItem = selectAll("." + CLS_TB_ITEM, _this.getTabHeader());
          }
          if (selectAll("." + CLS_TB_ITEM, _this.element).length === 0) {
            _this.hdrEle.style.display = "none";
          }
          _this.enableAnimation = true;
        }
      });
    };
    Tab2.prototype.hideTab = function(index, value) {
      var items;
      var item = selectAll("." + CLS_TB_ITEM, this.element)[index];
      if (isNullOrUndefined(item)) {
        return;
      }
      if (isNullOrUndefined(value)) {
        value = true;
      }
      this.bdrLine.classList.add(CLS_HIDDEN);
      if (value === true) {
        item.classList.add(CLS_HIDDEN);
        items = selectAll("." + CLS_TB_ITEM + ":not(." + CLS_HIDDEN + ")", this.tbItems);
        if (items.length !== 0 && item.classList.contains(CLS_ACTIVE)) {
          if (index !== 0) {
            for (var i = index - 1; i >= 0; i--) {
              if (!this.tbItem[i].classList.contains(CLS_HIDDEN)) {
                this.select(i);
                break;
              } else if (i === 0) {
                for (var k = index + 1; k < this.tbItem.length; k++) {
                  if (!this.tbItem[k].classList.contains(CLS_HIDDEN)) {
                    this.select(k);
                    break;
                  }
                }
              }
            }
          } else {
            for (var k = index + 1; k < this.tbItem.length; k++) {
              if (!this.tbItem[k].classList.contains(CLS_HIDDEN)) {
                this.select(k);
                break;
              }
            }
          }
        } else if (items.length === 0) {
          this.element.classList.add(CLS_HIDDEN);
        }
      } else {
        this.element.classList.remove(CLS_HIDDEN);
        items = selectAll("." + CLS_TB_ITEM + ":not(." + CLS_HIDDEN + ")", this.tbItems);
        item.classList.remove(CLS_HIDDEN);
        if (items.length === 0) {
          this.select(index);
        }
      }
      this.setActiveBorder();
      item.setAttribute("aria-hidden", "" + value);
      if (this.overflowMode === "Popup" && this.tbObj) {
        this.tbObj.refreshOverflow();
      }
    };
    Tab2.prototype.selectTab = function(args, event, isInteracted) {
      if (event === void 0) {
        event = null;
      }
      if (isInteracted === void 0) {
        isInteracted = false;
      }
      this.isInteracted = isInteracted;
      this.select(args, event);
    };
    Tab2.prototype.select = function(args, event) {
      var _this = this;
      var tabHeader = this.getTabHeader();
      this.tbItems = select$1("." + CLS_TB_ITEMS, tabHeader);
      this.tbItem = selectAll("." + CLS_TB_ITEM, tabHeader);
      this.content = select$1("." + CLS_CONTENT, this.element);
      this.prevItem = this.tbItem[this.prevIndex];
      if (isNullOrUndefined(this.selectedItem) || this.selectedItem < 0 || this.tbItem.length <= this.selectedItem || isNaN(this.selectedItem)) {
        this.selectedItem = 0;
      } else {
        this.selectedID = this.extIndex(this.tbItem[this.selectedItem].id);
      }
      var trg = this.tbItem[args];
      if (isNullOrUndefined(trg)) {
        this.selectedID = "0";
      } else {
        this.selectingID = this.extIndex(trg.id);
      }
      if (!isNullOrUndefined(this.prevItem) && !this.prevItem.classList.contains(CLS_DISABLE)) {
        this.prevItem.children.item(0).setAttribute("tabindex", this.prevItem.firstElementChild.getAttribute("tabindex"));
      }
      var eventArg = {
        event,
        previousItem: this.prevItem,
        previousIndex: this.prevIndex,
        selectedItem: this.tbItem[this.selectedItem],
        selectedIndex: this.selectedItem,
        selectedContent: !isNullOrUndefined(this.content) ? select$1("#" + CLS_CONTENT + this.tabId + "_" + this.selectedID, this.content) : null,
        selectingItem: trg,
        selectingIndex: args,
        selectingContent: !isNullOrUndefined(this.content) ? select$1("#" + CLS_CONTENT + this.tabId + "_" + this.selectingID, this.content) : null,
        isSwiped: this.isSwipeed,
        isInteracted: this.isInteracted,
        cancel: false
      };
      if (!this.initRender) {
        this.trigger("selecting", eventArg, function(selectArgs) {
          if (!selectArgs.cancel) {
            _this.selectingContent(args, _this.isInteracted);
          }
        });
      } else {
        this.selectingContent(args, this.isInteracted);
      }
      this.isInteracted = false;
    };
    Tab2.prototype.selectingContent = function(args, isInteracted) {
      if (typeof args === "number") {
        if (!isNullOrUndefined(this.tbItem[args]) && (this.tbItem[args].classList.contains(CLS_DISABLE) || this.tbItem[args].classList.contains(CLS_HIDDEN))) {
          for (var i = args + 1; i < this.items.length; i++) {
            if (this.items[i].disabled === false && this.items[i].visible === true) {
              args = i;
              break;
            } else {
              args = 0;
            }
          }
        }
        if (this.tbItem.length > args && args >= 0 && !isNaN(args)) {
          this.prevIndex = this.selectedItem;
          this.prevItem = this.tbItem[this.prevIndex];
          if (this.tbItem[args].classList.contains(CLS_TB_POPUP) && this.reorderActiveTab) {
            this.setActive(this.popupHandler(this.tbItem[args]), null, isInteracted);
            if (!isNullOrUndefined(this.items) && this.items.length > 0 && this.allowDragAndDrop) {
              this.tbItem = selectAll("." + CLS_TB_ITEMS + " ." + CLS_TB_ITEM, this.hdrEle);
              var item = this.items[args];
              this.items.splice(args, 1);
              this.items.splice(this.tbItem.length - 1, 0, item);
              var itemId = this.itemIndexArray[args];
              this.itemIndexArray.splice(args, 1);
              this.itemIndexArray.splice(this.tbItem.length - 1, 0, itemId);
            }
          } else {
            this.setActive(args, null, isInteracted);
          }
        } else {
          this.setActive(0, null, isInteracted);
        }
      } else if (args instanceof HTMLElement) {
        this.setActive(this.getEleIndex(args), null, isInteracted);
      }
    };
    Tab2.prototype.getItemIndex = function(tabItemId) {
      var tabIndex;
      for (var i = 0; i < this.tbItem.length; i++) {
        var value = this.tbItem[i].getAttribute("data-id");
        if (tabItemId === value) {
          tabIndex = i;
          break;
        }
      }
      return tabIndex;
    };
    Tab2.prototype.disable = function(value) {
      this.setCssClass(this.element, CLS_DISABLE, value);
      this.element.setAttribute("aria-disabled", "" + value);
    };
    Tab2.prototype.getPersistData = function() {
      return this.addOnPersist(["selectedItem", "actEleId"]);
    };
    Tab2.prototype.getModuleName = function() {
      return "tab";
    };
    Tab2.prototype.onPropertyChanged = function(newProp, oldProp) {
      var _this = this;
      for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {
        var prop = _a[_i];
        switch (prop) {
          case "width":
            setStyleAttribute(this.element, { width: formatUnit(newProp.width) });
            break;
          case "height":
            setStyleAttribute(this.element, { height: formatUnit(newProp.height) });
            this.setContentHeight(false);
            break;
          case "cssClass":
            var headerEle = this.element.querySelector("." + CLS_HEADER);
            if (oldProp.cssClass !== "" && !isNullOrUndefined(oldProp.cssClass)) {
              this.setCssClass(this.element, oldProp.cssClass, false);
              this.setCssClass(this.element, newProp.cssClass, true);
              if (!isNullOrUndefined(headerEle)) {
                this.setCssClass(headerEle, oldProp.cssClass, false);
                this.setCssClass(headerEle, newProp.cssClass, true);
              }
            } else {
              this.setCssClass(this.element, newProp.cssClass, true);
              if (!isNullOrUndefined(headerEle)) {
                this.setCssClass(headerEle, newProp.cssClass, true);
              }
            }
            break;
          case "items":
            this.evalOnPropertyChangeItems(newProp, oldProp);
            break;
          case "showCloseButton":
            this.setCloseButton(newProp.showCloseButton);
            break;
          case "reorderActiveTab":
            this.refreshActiveTabBorder();
            break;
          case "selectedItem":
            this.selectedItem = oldProp.selectedItem;
            this.select(newProp.selectedItem);
            break;
          case "headerPlacement":
            this.changeOrientation(newProp.headerPlacement);
            break;
          case "enableRtl":
            this.setRTL(newProp.enableRtl);
            break;
          case "overflowMode":
            this.tbObj.overflowMode = newProp.overflowMode;
            this.tbObj.dataBind();
            this.refreshActiveTabBorder();
            break;
          case "heightAdjustMode":
            this.setContentHeight(false);
            this.select(this.selectedItem);
            break;
          case "scrollStep":
            if (this.tbObj) {
              this.tbObj.scrollStep = this.scrollStep;
            }
            break;
          case "allowDragAndDrop":
            this.bindDraggable();
            break;
          case "dragArea":
            if (this.allowDragAndDrop) {
              this.draggableItems.forEach(function(item) {
                item.dragArea = _this.dragArea;
              });
              this.refresh();
            }
            break;
        }
      }
    };
    Tab2.prototype.refreshActiveTab = function() {
      if (this.isReact && this.isTemplate) {
        this.clearTemplate();
      }
      if (!this.isTemplate) {
        if (this.element.querySelector("." + CLS_TB_ITEM + "." + CLS_ACTIVE)) {
          detach(this.element.querySelector("." + CLS_TB_ITEM + "." + CLS_ACTIVE).children[0]);
          detach(this.element.querySelector("." + CLS_CONTENT).querySelector("." + CLS_ACTIVE).children[0]);
          var item = this.items[this.selectedItem];
          var pos = isNullOrUndefined(item.header) || isNullOrUndefined(item.header.iconPosition) ? "" : item.header.iconPosition;
          var css = isNullOrUndefined(item.header) || isNullOrUndefined(item.header.iconCss) ? "" : item.header.iconCss;
          var text = item.headerTemplate || item.header.text;
          var txtWrap = this.createElement("div", { className: CLS_TEXT, attrs: { "role": "presentation" } });
          if (!isNullOrUndefined(text.tagName)) {
            txtWrap.appendChild(text);
          } else {
            this.headerTextCompile(txtWrap, text, this.selectedItem);
          }
          var tEle = void 0;
          var icon = this.createElement("span", {
            className: CLS_ICONS + " " + CLS_TAB_ICON + " " + CLS_ICON + "-" + pos + " " + css
          });
          var tConts = this.createElement("div", { className: CLS_TEXT_WRAP });
          tConts.appendChild(txtWrap);
          if (text !== "" && text !== void 0 && css !== "") {
            if (pos === "left" || pos === "top") {
              tConts.insertBefore(icon, tConts.firstElementChild);
            } else {
              tConts.appendChild(icon);
            }
            tEle = txtWrap;
            this.isIconAlone = false;
          } else {
            tEle = css === "" ? txtWrap : icon;
            if (tEle === icon) {
              detach(txtWrap);
              tConts.appendChild(icon);
              this.isIconAlone = true;
            }
          }
          var tabIndex = isNullOrUndefined(item.tabIndex) ? "-1" : item.tabIndex.toString();
          var wrapAtt = item.disabled ? {} : { tabIndex, "data-tabindex": tabIndex, role: "tab", "aria-selected": "true", "aria-disabled": "false" };
          tConts.appendChild(this.btnCls.cloneNode(true));
          var wraper = this.createElement("div", { className: CLS_WRAP, attrs: wrapAtt });
          wraper.appendChild(tConts);
          if (pos === "top" || pos === "bottom") {
            this.element.classList.add("e-vertical-icon");
          }
          this.element.querySelector("." + CLS_TB_ITEM + "." + CLS_ACTIVE).appendChild(wraper);
          var crElem = this.createElement("div");
          var cnt = item.content;
          var eleStr = void 0;
          if (typeof cnt === "string" || isNullOrUndefined(cnt.innerHTML)) {
            if (typeof cnt === "string" && this.enableHtmlSanitizer) {
              cnt = SanitizeHtmlHelper.sanitize(cnt);
            }
            if (cnt[0] === "." || cnt[0] === "#") {
              if (document.querySelectorAll(cnt).length) {
                var eleVal = document.querySelector(cnt);
                eleStr = eleVal.outerHTML.trim();
                crElem.appendChild(eleVal);
                eleVal.style.display = "";
              } else {
                this.compileElement(crElem, cnt, "content", this.selectedItem);
              }
            } else {
              this.compileElement(crElem, cnt, "content", this.selectedItem);
            }
          } else {
            crElem.appendChild(cnt);
          }
          if (!isNullOrUndefined(eleStr)) {
            if (this.templateEle.indexOf(cnt.toString()) === -1) {
              this.templateEle.push(cnt.toString());
            }
          }
          this.element.querySelector("." + CLS_ITEM + "." + CLS_ACTIVE).appendChild(crElem);
        }
      } else {
        var tabItems = this.element.querySelector("." + CLS_TB_ITEMS);
        var element2 = this.element.querySelector("." + CLS_TB_ITEM + "." + CLS_ACTIVE);
        var index = this.getIndexFromEle(element2.id);
        var header = element2.innerText;
        var detachContent = this.element.querySelector("." + CLS_CONTENT).querySelector("." + CLS_ACTIVE).children[0];
        var mainContents = detachContent.innerHTML;
        detach(element2);
        detach(detachContent);
        var attr = {
          className: CLS_TB_ITEM + " " + CLS_TEMPLATE + " " + CLS_ACTIVE,
          id: CLS_ITEM + this.tabId + "_" + index
        };
        var txtString = this.createElement("span", {
          className: CLS_TEXT,
          innerHTML: header,
          attrs: { "role": "presentation" }
        }).outerHTML;
        var conte = this.createElement("div", {
          className: CLS_TEXT_WRAP,
          innerHTML: txtString + this.btnCls.outerHTML
        }).outerHTML;
        var tabIndex = element2.firstElementChild.getAttribute("data-tabindex");
        var wrap = this.createElement("div", {
          className: CLS_WRAP,
          innerHTML: conte,
          attrs: { tabIndex, "data-tabindex": tabIndex, role: "tab", "aria-controls": CLS_CONTENT + this.tabId + "_" + index, "aria-selected": "true", "aria-disabled": "false" }
        });
        tabItems.insertBefore(this.createElement("div", attr), tabItems.children[index + 1]);
        this.element.querySelector("." + CLS_TB_ITEM + "." + CLS_ACTIVE).appendChild(wrap);
        var crElem = this.createElement("div", { innerHTML: mainContents });
        this.element.querySelector("." + CLS_CONTENT).querySelector("." + CLS_ACTIVE).appendChild(crElem);
      }
      if (this.isReact) {
        this.renderReactTemplates();
      }
    };
    Tab2.prototype.refreshActiveTabBorder = function() {
      var activeEle = select$1("." + CLS_TB_ITEM + "." + CLS_TB_POPUP + "." + CLS_ACTIVE, this.element);
      if (!isNullOrUndefined(activeEle) && this.reorderActiveTab) {
        this.select(this.getEleIndex(activeEle));
      }
      this.refreshActiveBorder();
    };
    __decorate$j([
      Collection([], TabItem)
    ], Tab2.prototype, "items", void 0);
    __decorate$j([
      Property("100%")
    ], Tab2.prototype, "width", void 0);
    __decorate$j([
      Property("auto")
    ], Tab2.prototype, "height", void 0);
    __decorate$j([
      Property("")
    ], Tab2.prototype, "cssClass", void 0);
    __decorate$j([
      Property(0)
    ], Tab2.prototype, "selectedItem", void 0);
    __decorate$j([
      Property("Top")
    ], Tab2.prototype, "headerPlacement", void 0);
    __decorate$j([
      Property("Content")
    ], Tab2.prototype, "heightAdjustMode", void 0);
    __decorate$j([
      Property("Scrollable")
    ], Tab2.prototype, "overflowMode", void 0);
    __decorate$j([
      Property("Dynamic")
    ], Tab2.prototype, "loadOn", void 0);
    __decorate$j([
      Property(false)
    ], Tab2.prototype, "enablePersistence", void 0);
    __decorate$j([
      Property(false)
    ], Tab2.prototype, "enableHtmlSanitizer", void 0);
    __decorate$j([
      Property(false)
    ], Tab2.prototype, "showCloseButton", void 0);
    __decorate$j([
      Property(true)
    ], Tab2.prototype, "reorderActiveTab", void 0);
    __decorate$j([
      Property()
    ], Tab2.prototype, "scrollStep", void 0);
    __decorate$j([
      Property()
    ], Tab2.prototype, "dragArea", void 0);
    __decorate$j([
      Property(false)
    ], Tab2.prototype, "allowDragAndDrop", void 0);
    __decorate$j([
      Complex({}, TabAnimationSettings)
    ], Tab2.prototype, "animation", void 0);
    __decorate$j([
      Event$1()
    ], Tab2.prototype, "created", void 0);
    __decorate$j([
      Event$1()
    ], Tab2.prototype, "adding", void 0);
    __decorate$j([
      Event$1()
    ], Tab2.prototype, "added", void 0);
    __decorate$j([
      Event$1()
    ], Tab2.prototype, "selecting", void 0);
    __decorate$j([
      Event$1()
    ], Tab2.prototype, "selected", void 0);
    __decorate$j([
      Event$1()
    ], Tab2.prototype, "removing", void 0);
    __decorate$j([
      Event$1()
    ], Tab2.prototype, "removed", void 0);
    __decorate$j([
      Event$1()
    ], Tab2.prototype, "onDragStart", void 0);
    __decorate$j([
      Event$1()
    ], Tab2.prototype, "dragging", void 0);
    __decorate$j([
      Event$1()
    ], Tab2.prototype, "dragged", void 0);
    __decorate$j([
      Event$1()
    ], Tab2.prototype, "destroyed", void 0);
    Tab2 = __decorate$j([
      NotifyPropertyChanges
    ], Tab2);
    return Tab2;
  }(Component)
);
var __extends$t = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$i = globalThis && globalThis.__decorate || function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i = decorators.length - 1; i >= 0; i--)
      if (d = decorators[i])
        r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var ROOT$6 = "e-treeview";
var CONTROL$3 = "e-control";
var COLLAPSIBLE = "e-icon-collapsible";
var EXPANDABLE = "e-icon-expandable";
var LISTITEM = "e-list-item";
var LISTTEXT = "e-list-text";
var LISTWRAP = "e-text-wrap";
var IELISTWRAP = "e-ie-wrap";
var PARENTITEM = "e-list-parent";
var HOVER$2 = "e-hover";
var ACTIVE$3 = "e-active";
var LOAD = "e-icons-spinner";
var PROCESS = "e-process";
var ICON$3 = "e-icons";
var TEXTWRAP = "e-text-content";
var INPUT = "e-input";
var INPUTGROUP = "e-input-group";
var TREEINPUT = "e-tree-input";
var EDITING = "e-editing";
var RTL$3 = "e-rtl";
var INTERACTION = "e-interaction";
var DRAGITEM = "e-drag-item";
var DROPPABLE = "e-droppable";
var DRAGGING = "e-dragging";
var SIBLING = "e-sibling";
var DROPIN = "e-drop-in";
var DROPNEXT = "e-drop-next";
var DROPOUT = "e-drop-out";
var NODROP = "e-no-drop";
var FULLROWWRAP = "e-fullrow-wrap";
var FULLROW = "e-fullrow";
var SELECTED$3 = "e-selected";
var EXPANDED = "e-expanded";
var NODECOLLAPSED = "e-node-collapsed";
var DISABLE = "e-disable";
var DROPCOUNT = "e-drop-count";
var CHECK$1 = "e-check";
var INDETERMINATE$1 = "e-stop";
var CHECKBOXWRAP$1 = "e-checkbox-wrapper";
var CHECKBOXFRAME$1 = "e-frame";
var CHECKBOXRIPPLE = "e-ripple-container";
var RIPPLE = "e-ripple";
var RIPPLEELMENT = "e-ripple-element";
var FOCUS$3 = "e-node-focus";
var IMAGE = "e-list-img";
var BIGGER = "e-bigger";
var SMALL = "e-small";
var CHILD = "e-has-child";
var ITEM_ANIMATION_ACTIVE = "e-animation-active";
var DISABLED$4 = "e-disabled";
var PREVENTSELECT = "e-prevent";
var treeAriaAttr = {
  treeRole: "group",
  itemRole: "treeitem",
  listRole: "group",
  itemText: "",
  wrapperRole: ""
};
var FieldsSettings = (
  /** @class */
  function(_super) {
    __extends$t(FieldsSettings2, _super);
    function FieldsSettings2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$i([
      Property("child")
    ], FieldsSettings2.prototype, "child", void 0);
    __decorate$i([
      Property([])
    ], FieldsSettings2.prototype, "dataSource", void 0);
    __decorate$i([
      Property("expanded")
    ], FieldsSettings2.prototype, "expanded", void 0);
    __decorate$i([
      Property("hasChildren")
    ], FieldsSettings2.prototype, "hasChildren", void 0);
    __decorate$i([
      Property("htmlAttributes")
    ], FieldsSettings2.prototype, "htmlAttributes", void 0);
    __decorate$i([
      Property("iconCss")
    ], FieldsSettings2.prototype, "iconCss", void 0);
    __decorate$i([
      Property("id")
    ], FieldsSettings2.prototype, "id", void 0);
    __decorate$i([
      Property("imageUrl")
    ], FieldsSettings2.prototype, "imageUrl", void 0);
    __decorate$i([
      Property("isChecked")
    ], FieldsSettings2.prototype, "isChecked", void 0);
    __decorate$i([
      Property("parentID")
    ], FieldsSettings2.prototype, "parentID", void 0);
    __decorate$i([
      Property(null)
    ], FieldsSettings2.prototype, "query", void 0);
    __decorate$i([
      Property("selectable")
    ], FieldsSettings2.prototype, "selectable", void 0);
    __decorate$i([
      Property("selected")
    ], FieldsSettings2.prototype, "selected", void 0);
    __decorate$i([
      Property(null)
    ], FieldsSettings2.prototype, "tableName", void 0);
    __decorate$i([
      Property("text")
    ], FieldsSettings2.prototype, "text", void 0);
    __decorate$i([
      Property("tooltip")
    ], FieldsSettings2.prototype, "tooltip", void 0);
    __decorate$i([
      Property("navigateUrl")
    ], FieldsSettings2.prototype, "navigateUrl", void 0);
    return FieldsSettings2;
  }(ChildProperty)
);
var ActionSettings = (
  /** @class */
  function(_super) {
    __extends$t(ActionSettings2, _super);
    function ActionSettings2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$i([
      Property("SlideDown")
    ], ActionSettings2.prototype, "effect", void 0);
    __decorate$i([
      Property(400)
    ], ActionSettings2.prototype, "duration", void 0);
    __decorate$i([
      Property("linear")
    ], ActionSettings2.prototype, "easing", void 0);
    return ActionSettings2;
  }(ChildProperty)
);
var NodeAnimationSettings = (
  /** @class */
  function(_super) {
    __extends$t(NodeAnimationSettings2, _super);
    function NodeAnimationSettings2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$i([
      Complex({ effect: "SlideUp", duration: 400, easing: "linear" }, ActionSettings)
    ], NodeAnimationSettings2.prototype, "collapse", void 0);
    __decorate$i([
      Complex({ effect: "SlideDown", duration: 400, easing: "linear" }, ActionSettings)
    ], NodeAnimationSettings2.prototype, "expand", void 0);
    return NodeAnimationSettings2;
  }(ChildProperty)
);
var TreeView = (
  /** @class */
  function(_super) {
    __extends$t(TreeView2, _super);
    function TreeView2(options, element2) {
      var _this = _super.call(this, options, element2) || this;
      _this.isRefreshed = false;
      _this.preventExpand = false;
      _this.checkedElement = [];
      _this.disableNode = [];
      _this.validArr = [];
      _this.validNodes = [];
      _this.expandChildren = [];
      _this.isFieldChange = false;
      _this.changeDataSource = false;
      _this.hasTemplate = false;
      _this.isFirstRender = false;
      _this.isNodeDropped = false;
      _this.isInteracted = false;
      _this.isRightClick = false;
      _this.mouseDownStatus = false;
      return _this;
    }
    TreeView_1 = TreeView2;
    TreeView2.prototype.getModuleName = function() {
      return "treeview";
    };
    TreeView2.prototype.preRender = function() {
      var _this = this;
      this.checkActionNodes = [];
      this.parentNodeCheck = [];
      this.dragStartAction = false;
      this.isAnimate = false;
      this.keyConfigs = {
        escape: "escape",
        end: "end",
        enter: "enter",
        f2: "f2",
        home: "home",
        moveDown: "downarrow",
        moveLeft: "leftarrow",
        moveRight: "rightarrow",
        moveUp: "uparrow",
        ctrlDown: "ctrl+downarrow",
        ctrlUp: "ctrl+uparrow",
        ctrlEnter: "ctrl+enter",
        ctrlHome: "ctrl+home",
        ctrlEnd: "ctrl+end",
        ctrlA: "ctrl+A",
        shiftDown: "shift+downarrow",
        shiftUp: "shift+uparrow",
        shiftEnter: "shift+enter",
        shiftHome: "shift+home",
        shiftEnd: "shift+end",
        csDown: "ctrl+shift+downarrow",
        csUp: "ctrl+shift+uparrow",
        csEnter: "ctrl+shift+enter",
        csHome: "ctrl+shift+home",
        csEnd: "ctrl+shift+end",
        space: "space",
        shiftSpace: "shift+space",
        ctrlSpace: "ctrl+space"
      };
      this.listBaseOption = {
        expandCollapse: true,
        showIcon: true,
        expandIconClass: EXPANDABLE,
        ariaAttributes: treeAriaAttr,
        expandIconPosition: "Left",
        itemCreated: function(e) {
          _this.beforeNodeCreate(e);
        },
        enableHtmlSanitizer: this.enableHtmlSanitizer,
        itemNavigable: this.fullRowNavigable
      };
      this.updateListProp(this.fields);
      this.aniObj = new Animation$1({});
      this.treeList = [];
      this.isLoaded = false;
      this.isInitalExpand = false;
      this.expandChildren = [];
      this.index = 0;
      this.setTouchClass();
      if (isNullOrUndefined(this.selectedNodes)) {
        this.setProperties({ selectedNodes: [] }, true);
      }
      if (isNullOrUndefined(this.checkedNodes)) {
        this.setProperties({ checkedNodes: [] }, true);
      }
      if (isNullOrUndefined(this.expandedNodes)) {
        this.setProperties({ expandedNodes: [] }, true);
      } else {
        this.isInitalExpand = true;
      }
    };
    TreeView2.prototype.getPersistData = function() {
      var keyEntity = ["selectedNodes", "checkedNodes", "expandedNodes"];
      return this.addOnPersist(keyEntity);
    };
    TreeView2.prototype.render = function() {
      this.initialRender = true;
      this.initialize();
      this.setDataBinding(false);
      this.setDisabledMode();
      this.setExpandOnType();
      if (!this.disabled) {
        this.setRipple();
      }
      this.wireEditingEvents(this.allowEditing);
      this.setDragAndDrop(this.allowDragAndDrop);
      if (!this.disabled) {
        this.wireEvents();
      }
      this.initialRender = false;
      this.renderComplete();
    };
    TreeView2.prototype.initialize = function() {
      this.element.setAttribute("role", "tree");
      this.element.setAttribute("aria-activedescendant", this.element.id + "_active");
      this.setCssClass(null, this.cssClass);
      this.setEnableRtl();
      this.setFullRow(this.fullRowSelect);
      this.setTextWrap();
      this.nodeTemplateFn = this.templateComplier(this.nodeTemplate);
    };
    TreeView2.prototype.setDisabledMode = function() {
      if (this.disabled) {
        this.element.classList.add(DISABLED$4);
      } else {
        this.element.classList.remove(DISABLED$4);
      }
    };
    TreeView2.prototype.setEnableRtl = function() {
      (this.enableRtl ? addClass : removeClass)([this.element], RTL$3);
    };
    TreeView2.prototype.setRipple = function() {
      var tempStr = "." + FULLROW + ",." + TEXTWRAP;
      var rippleModel = {
        selector: tempStr,
        ignore: "." + TEXTWRAP + " > ." + ICON$3 + ",." + INPUTGROUP + ",." + INPUT + ", ." + CHECKBOXWRAP$1
      };
      this.rippleFn = rippleEffect(this.element, rippleModel);
      var iconModel = {
        selector: "." + TEXTWRAP + " > ." + ICON$3,
        isCenterRipple: true
      };
      this.rippleIconFn = rippleEffect(this.element, iconModel);
    };
    TreeView2.prototype.setFullRow = function(isEnabled) {
      (isEnabled ? addClass : removeClass)([this.element], FULLROWWRAP);
    };
    TreeView2.prototype.setMultiSelect = function(isEnabled) {
      var firstUl = select$1("." + PARENTITEM, this.element);
      if (isEnabled) {
        firstUl.setAttribute("aria-multiselectable", "true");
      } else {
        firstUl.removeAttribute("aria-multiselectable");
      }
    };
    TreeView2.prototype.templateComplier = function(template) {
      if (template) {
        this.hasTemplate = true;
        this.element.classList.add(INTERACTION);
        try {
          if (document.querySelectorAll(template).length) {
            return compile$1(document.querySelector(template).innerHTML.trim());
          } else {
            return compile$1(template);
          }
        } catch (e) {
          return compile$1(template);
        }
      }
      this.element.classList.remove(INTERACTION);
      return void 0;
    };
    TreeView2.prototype.setDataBinding = function(changeDataSource) {
      var _this = this;
      this.treeList.push("false");
      if (this.fields.dataSource instanceof DataManager) {
        this.isOffline = this.fields.dataSource.dataSource.offline;
        if (this.fields.dataSource.ready) {
          this.fields.dataSource.ready.then(function(e) {
            _this.isOffline = _this.fields.dataSource.dataSource.offline;
            if (_this.fields.dataSource instanceof DataManager && _this.isOffline) {
              _this.treeList.pop();
              _this.treeData = e.result;
              _this.isNumberTypeId = _this.getType();
              _this.setRootData();
              _this.renderItems(true);
              if (_this.treeList.length === 0 && !_this.isLoaded) {
                _this.finalize();
              }
            }
          }).catch(function(e) {
            _this.trigger("actionFailure", { error: e });
          });
        } else {
          this.fields.dataSource.executeQuery(this.getQuery(this.fields)).then(function(e) {
            _this.treeList.pop();
            _this.treeData = e.result;
            _this.isNumberTypeId = _this.getType();
            _this.setRootData();
            if (changeDataSource) {
              _this.changeDataSource = true;
            }
            _this.renderItems(true);
            _this.changeDataSource = false;
            if (_this.treeList.length === 0 && !_this.isLoaded) {
              _this.finalize();
            }
          }).catch(function(e) {
            _this.trigger("actionFailure", { error: e });
          });
        }
      } else {
        this.treeList.pop();
        if (isNullOrUndefined(this.fields.dataSource)) {
          this.rootData = this.treeData = [];
        } else {
          this.treeData = JSON.parse(JSON.stringify(this.fields.dataSource));
          this.setRootData();
        }
        this.isNumberTypeId = this.getType();
        this.renderItems(false);
      }
      if (this.treeList.length === 0 && !this.isLoaded) {
        this.finalize();
      }
    };
    TreeView2.prototype.getQuery = function(mapper2, value) {
      if (value === void 0) {
        value = null;
      }
      var columns = [];
      var query;
      if (!mapper2.query) {
        query = new Query();
        var prop = this.getActualProperties(mapper2);
        for (var _i = 0, _a = Object.keys(prop); _i < _a.length; _i++) {
          var col = _a[_i];
          if (col !== "dataSource" && col !== "tableName" && col !== "child" && !!mapper2[col] && col !== "url" && columns.indexOf(mapper2[col]) === -1) {
            columns.push(mapper2[col]);
          }
        }
        query.select(columns);
        if (prop.hasOwnProperty("tableName")) {
          query.from(mapper2.tableName);
        }
      } else {
        query = mapper2.query.clone();
      }
      ListBase.addSorting(this.sortOrder, mapper2.text, query);
      if (!isNullOrUndefined(value) && !isNullOrUndefined(mapper2.parentID)) {
        query.where(mapper2.parentID, "equal", this.isNumberTypeId ? parseFloat(value) : value);
      }
      return query;
    };
    TreeView2.prototype.getType = function() {
      return this.treeData[0] ? typeof getValue(this.fields.id, this.treeData[0]) === "number" ? true : false : false;
    };
    TreeView2.prototype.setRootData = function() {
      this.dataType = this.getDataType(this.treeData, this.fields);
      if (this.dataType === 1) {
        this.groupedData = this.getGroupedData(this.treeData, this.fields.parentID);
        var rootItems = this.getChildNodes(this.treeData, void 0, true);
        if (isNullOrUndefined(rootItems)) {
          this.rootData = [];
        } else {
          this.rootData = rootItems;
        }
      } else {
        this.rootData = this.treeData;
      }
    };
    TreeView2.prototype.renderItems = function(isSorted) {
      this.listBaseOption.ariaAttributes.level = 1;
      var sortedData = this.getSortedData(this.rootData);
      this.ulElement = ListBase.createList(this.createElement, isSorted ? this.rootData : sortedData, this.listBaseOption);
      this.element.appendChild(this.ulElement);
      var rootNodes = this.ulElement.querySelectorAll(".e-list-item");
      if (this.loadOnDemand === false) {
        var i = 0;
        while (i < rootNodes.length) {
          this.renderChildNodes(rootNodes[i], true, null, true);
          i++;
        }
      }
      var parentEle = selectAll("." + PARENTITEM, this.element);
      if (parentEle.length === 1 && (rootNodes && rootNodes.length !== 0) || this.loadOnDemand) {
        this.finalizeNode(this.element);
      }
      this.parentNodeCheck = [];
      this.parentCheckData = [];
      this.updateCheckedStateFromDS();
      if (this.autoCheck && this.showCheckBox && !this.isLoaded) {
        this.updateParentCheckState();
      }
    };
    TreeView2.prototype.updateCheckedStateFromDS = function(id) {
      this.validNodes = [];
      if (this.treeData && this.showCheckBox) {
        if (this.dataType === 1) {
          var mapper2 = this.fields;
          var resultData = new DataManager(this.treeData).executeLocal(new Query().where(mapper2.isChecked, "equal", true, false));
          for (var i = 0; i < resultData.length; i++) {
            var resultId = resultData[i][this.fields.id] ? resultData[i][this.fields.id].toString() : null;
            resultData[i][this.fields.parentID] ? resultData[i][this.fields.parentID].toString() : null;
            if (this.checkedNodes.indexOf(resultId) === -1 && !this.isLoaded) {
              this.checkedNodes.push(resultId);
            }
            if (resultData[i][this.fields.hasChildren]) {
              var id_1 = resultData[i][this.fields.id];
              var childData = new DataManager(this.treeData).executeLocal(new Query().where(mapper2.parentID, "equal", id_1, false));
              for (var child = 0; child < childData.length; child++) {
                var childId = childData[child][this.fields.id] ? childData[child][this.fields.id].toString() : null;
                if (this.checkedNodes.indexOf(childId) === -1 && this.autoCheck) {
                  this.checkedNodes.push(childId);
                }
              }
            }
          }
          for (var i = 0; i < this.checkedNodes.length; i++) {
            var mapper_1 = this.fields;
            var checkState = new DataManager(this.treeData).executeLocal(new Query().where(mapper_1.id, "equal", this.checkedNodes[i], true));
            if (checkState[0] && this.autoCheck) {
              this.getCheckedNodeDetails(mapper_1, checkState);
              this.checkIndeterminateState(checkState[0]);
            }
            if (checkState.length > 0) {
              var checkedId = checkState[0][this.fields.id] ? checkState[0][this.fields.id].toString() : null;
              if (this.checkedNodes.indexOf(checkedId) > -1 && this.validNodes.indexOf(checkedId) === -1) {
                this.validNodes.push(checkedId);
              }
            }
            var checkedData = new DataManager(this.treeData).executeLocal(new Query().where(mapper_1.parentID, "equal", this.checkedNodes[i], true));
            for (var index = 0; index < checkedData.length; index++) {
              var checkedId = checkedData[index][this.fields.id] ? checkedData[index][this.fields.id].toString() : null;
              if (this.checkedNodes.indexOf(checkedId) === -1 && this.autoCheck) {
                this.checkedNodes.push(checkedId);
              }
              if (this.checkedNodes.indexOf(checkedId) > -1 && this.validNodes.indexOf(checkedId) === -1) {
                this.validNodes.push(checkedId);
              }
            }
          }
        } else if (this.dataType === 2 || this.fields.dataSource instanceof DataManager && this.isOffline) {
          for (var index = 0; index < this.treeData.length; index++) {
            var fieldId = this.treeData[index][this.fields.id] ? this.treeData[index][this.fields.id].toString() : "";
            if (this.treeData[index][this.fields.isChecked] && !this.isLoaded && this.checkedNodes.indexOf(fieldId) === -1) {
              this.checkedNodes.push(fieldId);
            }
            if (this.checkedNodes.indexOf(fieldId) > -1 && this.validNodes.indexOf(fieldId) === -1) {
              this.validNodes.push(fieldId);
            }
            var childItems = getValue(this.fields.child.toString(), this.treeData[index]);
            if (childItems) {
              this.updateChildCheckState(childItems, this.treeData[index]);
            }
          }
          this.validNodes = this.enablePersistence ? this.checkedNodes : this.validNodes;
        }
        this.setProperties({ checkedNodes: this.validNodes }, true);
      }
    };
    TreeView2.prototype.getCheckedNodeDetails = function(mapper2, checkNodes) {
      var id = checkNodes[0][this.fields.parentID] ? checkNodes[0][this.fields.parentID].toString() : null;
      var count = 0;
      var element2 = this.element.querySelector('[data-uid="' + checkNodes[0][this.fields.id] + '"]');
      var parentEle = this.element.querySelector('[data-uid="' + checkNodes[0][this.fields.parentID] + '"]');
      if (!element2 && !parentEle) {
        this.parentNodeCheck.length;
        if (this.parentNodeCheck.indexOf(id) === -1) {
          this.parentNodeCheck.push(id);
        }
        var childNodes = this.getChildNodes(this.treeData, id);
        for (var i = 0; i < childNodes.length; i++) {
          var childId = childNodes[i][this.fields.id] ? childNodes[i][this.fields.id].toString() : null;
          if (this.checkedNodes.indexOf(childId) !== -1) {
            count++;
          }
          if (count === childNodes.length && this.checkedNodes.indexOf(id) === -1) {
            this.checkedNodes.push(id);
          }
        }
        var preElement = new DataManager(this.treeData).executeLocal(new Query().where(mapper2.id, "equal", id, true));
        this.getCheckedNodeDetails(mapper2, preElement);
      } else if (parentEle) {
        var check = select$1("." + CHECK$1, parentEle);
        if (!check) {
          this.changeState(parentEle, "indeterminate", null, true, true);
        }
      }
    };
    TreeView2.prototype.updateParentCheckState = function() {
      var indeterminate = selectAll("." + INDETERMINATE$1, this.element);
      var childCheckedElement;
      for (var i = 0; i < indeterminate.length; i++) {
        var node = closest(indeterminate[i], "." + LISTITEM);
        var nodeId = node.getAttribute("data-uid").toString();
        if (this.dataType === 1) {
          childCheckedElement = new DataManager(this.treeData).executeLocal(new Query().where(this.fields.parentID, "equal", nodeId, true));
        } else {
          childCheckedElement = this.getChildNodes(this.treeData, nodeId);
        }
        var count = 0;
        if (childCheckedElement) {
          for (var j = 0; j < childCheckedElement.length; j++) {
            var childId = childCheckedElement[j][this.fields.id].toString();
            if (this.checkedNodes.indexOf(childId) !== -1) {
              count++;
            }
          }
          if (count === childCheckedElement.length) {
            var nodeCheck = node.getAttribute("data-uid");
            if (this.checkedNodes.indexOf(nodeCheck) === -1) {
              this.checkedNodes.push(nodeCheck);
            }
            this.changeState(node, "check", null, true, true);
          } else if (count === 0 && this.checkedNodes.length === 0) {
            this.changeState(node, "uncheck", null, true, true);
          }
        }
      }
    };
    TreeView2.prototype.checkIndeterminateState = function(data) {
      var element2;
      if (this.dataType === 1) {
        element2 = this.element.querySelector('[data-uid="' + data[this.fields.parentID] + '"]');
      } else {
        element2 = this.element.querySelector('[data-uid="' + data[this.fields.id] + '"]');
      }
      if (element2) {
        var ariaChecked = element2.querySelector("." + CHECKBOXWRAP$1).getAttribute("aria-checked");
        if (ariaChecked !== "true") {
          this.changeState(element2, "indeterminate", null, true, true);
        }
      } else if (this.dataType === 2) {
        this.parentNodeCheck.length;
        if (this.parentNodeCheck.indexOf(data[this.fields.id].toString()) === -1) {
          this.parentNodeCheck.push(data[this.fields.id].toString());
        }
      }
    };
    TreeView2.prototype.updateChildCheckState = function(childItems, treeData) {
      var count = 0;
      var checkedParent = treeData[this.fields.id] ? treeData[this.fields.id].toString() : "";
      for (var index = 0; index < childItems.length; index++) {
        var checkedChild = childItems[index][this.fields.id] ? childItems[index][this.fields.id].toString() : "";
        if (childItems[index][this.fields.isChecked] && !this.isLoaded && this.checkedNodes.indexOf(checkedChild) === -1) {
          this.checkedNodes.push(checkedChild);
        }
        if (this.checkedNodes.indexOf(checkedParent) !== -1 && this.checkedNodes.indexOf(checkedChild) === -1 && this.autoCheck) {
          this.checkedNodes.push(checkedChild);
        }
        if (this.checkedNodes.indexOf(checkedChild) !== -1 && this.autoCheck) {
          count++;
        }
        if (this.checkedNodes.indexOf(checkedChild) > -1 && this.validNodes.indexOf(checkedChild) === -1) {
          this.validNodes.push(checkedChild);
        }
        var subChildItems = getValue(this.fields.child.toString(), childItems[index]);
        if (subChildItems && subChildItems.length) {
          if (this.parentCheckData.indexOf(treeData) === -1)
            this.parentCheckData.push(treeData);
          this.updateChildCheckState(subChildItems, childItems[index]);
        }
        if (count === childItems.length && this.autoCheck && this.checkedNodes.indexOf(checkedParent) === -1) {
          this.checkedNodes.push(checkedParent);
        }
      }
      if (count !== 0 && this.autoCheck) {
        this.checkIndeterminateState(treeData);
        for (var len = 0; len < this.parentCheckData.length; len++) {
          if (treeData !== this.parentCheckData[len] && this.parentCheckData[len]) {
            this.checkIndeterminateState(this.parentCheckData[len]);
          }
        }
      }
      this.parentCheckData = [];
    };
    TreeView2.prototype.beforeNodeCreate = function(e) {
      if (this.showCheckBox) {
        var checkboxEle = createCheckBox(this.createElement, true, { cssClass: this.touchClass });
        checkboxEle.setAttribute("role", "checkbox");
        checkboxEle.setAttribute("aria-label", "checkbox");
        var icon = select$1("div." + ICON$3, e.item);
        var id = e.item.getAttribute("data-uid");
        e.item.childNodes[0].insertBefore(checkboxEle, e.item.childNodes[0].childNodes[isNullOrUndefined(icon) ? 0 : 1]);
        var checkValue = getValue(e.fields.isChecked, e.curData);
        if (this.checkedNodes.indexOf(id) > -1) {
          select$1("." + CHECKBOXFRAME$1, checkboxEle).classList.add(CHECK$1);
          checkboxEle.setAttribute("aria-checked", "true");
          this.addCheck(e.item);
        } else if (!isNullOrUndefined(checkValue) && checkValue.toString() === "true") {
          select$1("." + CHECKBOXFRAME$1, checkboxEle).classList.add(CHECK$1);
          checkboxEle.setAttribute("aria-checked", "true");
          this.addCheck(e.item);
        } else {
          checkboxEle.setAttribute("aria-checked", "false");
        }
        var frame = select$1("." + CHECKBOXFRAME$1, checkboxEle);
        EventHandler.add(frame, "mousedown", this.frameMouseHandler, this);
        EventHandler.add(frame, "mouseup", this.frameMouseHandler, this);
      }
      if (this.fullRowSelect) {
        this.createFullRow(e.item);
      }
      if (this.allowMultiSelection && !e.item.classList.contains(SELECTED$3)) {
        e.item.setAttribute("aria-selected", "false");
      }
      var fields = e.fields;
      this.addActionClass(e, fields.selected, SELECTED$3);
      this.addActionClass(e, fields.expanded, EXPANDED);
      e.item.setAttribute("tabindex", "-1");
      EventHandler.add(e.item, "focus", this.focusIn, this);
      if (!isNullOrUndefined(this.nodeTemplateFn)) {
        var textEle = e.item.querySelector("." + LISTTEXT);
        var dataId = e.item.getAttribute("data-uid");
        textEle.innerHTML = "";
        this.renderNodeTemplate(e.curData, textEle, dataId);
      }
      var eventArgs = {
        node: e.item,
        nodeData: e.curData,
        text: e.text
      };
      if (!this.isRefreshed) {
        this.trigger("drawNode", eventArgs);
        if (e.curData[this.fields.selectable] === false && !this.showCheckBox) {
          e.item.classList.add(PREVENTSELECT);
          e.item.firstElementChild.setAttribute("style", "cursor: not-allowed");
        }
      }
    };
    TreeView2.prototype.frameMouseHandler = function(e) {
      var rippleSpan = select$1("." + CHECKBOXRIPPLE, e.target.parentElement);
      rippleMouseHandler(e, rippleSpan);
    };
    TreeView2.prototype.addActionClass = function(e, action, cssClass2) {
      var data = e.curData;
      var actionValue = getValue(action, data);
      if (!isNullOrUndefined(actionValue) && actionValue.toString() !== "false") {
        e.item.classList.add(cssClass2);
      }
    };
    TreeView2.prototype.getDataType = function(ds, mapper2) {
      if (this.fields.dataSource instanceof DataManager) {
        for (var i = 0; i < ds.length; i++) {
          if (this.isOffline) {
            if (typeof mapper2.child === "string" && isNullOrUndefined(getValue(mapper2.child, ds[i])) && !isNullOrUndefined(getValue(mapper2.parentID, ds[i]))) {
              return 1;
            }
          } else if (typeof mapper2.child === "string" && isNullOrUndefined(getValue(mapper2.child, ds[i]))) {
            return 1;
          }
        }
        return 2;
      }
      for (var i = 0, len = ds.length; i < len; i++) {
        if (typeof mapper2.child === "string" && !isNullOrUndefined(getValue(mapper2.child, ds[i]))) {
          return 2;
        }
        if (!isNullOrUndefined(getValue(mapper2.parentID, ds[i])) || !isNullOrUndefined(getValue(mapper2.hasChildren, ds[i]))) {
          return 1;
        }
      }
      return 1;
    };
    TreeView2.prototype.getGroupedData = function(dataSource, groupBy) {
      var cusQuery = new Query().group(groupBy);
      var ds = ListBase.getDataSource(dataSource, cusQuery);
      var grpItem = [];
      for (var j = 0; j < ds.length; j++) {
        var itemObj = ds[j].items;
        grpItem.push(itemObj);
      }
      return grpItem;
    };
    TreeView2.prototype.getSortedData = function(list) {
      if (list && this.sortOrder !== "None") {
        list = ListBase.getDataSource(list, ListBase.addSorting(this.sortOrder, this.fields.text));
      }
      return list;
    };
    TreeView2.prototype.finalizeNode = function(element2) {
      var iNodes = selectAll("." + IMAGE, element2);
      for (var k = 0; k < iNodes.length; k++) {
        iNodes[k].setAttribute("alt", IMAGE);
      }
      if (this.isLoaded) {
        var sNodes = selectAll("." + SELECTED$3, element2);
        for (var i = 0; i < sNodes.length; i++) {
          this.selectNode(sNodes[i], null);
          break;
        }
        removeClass(sNodes, SELECTED$3);
      }
      var cNodes = selectAll("." + LISTITEM + ":not(." + EXPANDED + ")", element2);
      for (var j = 0; j < cNodes.length; j++) {
        var icon = select$1("div." + ICON$3, cNodes[j]);
        if (icon && icon.classList.contains(EXPANDABLE)) {
          this.disableExpandAttr(cNodes[j]);
        }
      }
      var eNodes = selectAll("." + EXPANDED, element2);
      if (!this.isInitalExpand) {
        for (var i = 0; i < eNodes.length; i++) {
          this.renderChildNodes(eNodes[i]);
        }
      }
      removeClass(eNodes, EXPANDED);
      this.updateList();
      if (this.isLoaded) {
        this.updateCheckedProp();
      }
    };
    TreeView2.prototype.updateCheckedProp = function() {
      if (this.showCheckBox) {
        var nodes = [].concat([], this.checkedNodes);
        this.setProperties({ checkedNodes: nodes }, true);
      }
    };
    TreeView2.prototype.ensureIndeterminate = function() {
      if (this.autoCheck) {
        var liElement = selectAll("li", this.element);
        var ulElement = void 0;
        for (var i = 0; i < liElement.length; i++) {
          if (liElement[i].classList.contains(LISTITEM)) {
            ulElement = select$1("." + PARENTITEM, liElement[i]);
            if (ulElement) {
              this.ensureParentCheckState(liElement[i]);
            } else {
              this.ensureChildCheckState(liElement[i]);
            }
          }
        }
      } else {
        var indeterminate = selectAll("." + INDETERMINATE$1, this.element);
        for (var i = 0; i < indeterminate.length; i++) {
          indeterminate[i].classList.remove(INDETERMINATE$1);
        }
      }
    };
    TreeView2.prototype.ensureParentCheckState = function(element2) {
      if (!isNullOrUndefined(element2)) {
        if (element2.classList.contains(ROOT$6)) {
          return;
        }
        var ulElement = element2;
        if (element2.classList.contains(LISTITEM)) {
          ulElement = select$1("." + PARENTITEM, element2);
        }
        var checkedNodes = selectAll("." + CHECK$1, ulElement);
        var indeterminateNodes = selectAll("." + INDETERMINATE$1, ulElement);
        var nodes = selectAll("." + LISTITEM, ulElement);
        var checkBoxEle = element2.getElementsByClassName(CHECKBOXWRAP$1)[0];
        if (nodes.length === checkedNodes.length) {
          this.changeState(checkBoxEle, "check", null, true, true);
        } else if (checkedNodes.length > 0 || indeterminateNodes.length > 0) {
          this.changeState(checkBoxEle, "indeterminate", null, true, true);
        } else if (checkedNodes.length === 0) {
          this.changeState(checkBoxEle, "uncheck", null, true, true);
        }
        var parentUL = closest(element2, "." + PARENTITEM);
        if (!isNullOrUndefined(parentUL)) {
          var currentParent = closest(parentUL, "." + LISTITEM);
          this.ensureParentCheckState(currentParent);
        }
      }
    };
    TreeView2.prototype.ensureChildCheckState = function(element2, e) {
      if (!isNullOrUndefined(element2)) {
        var childElement = select$1("." + PARENTITEM, element2);
        var checkBoxes = void 0;
        if (!isNullOrUndefined(childElement)) {
          checkBoxes = selectAll("." + CHECKBOXWRAP$1, childElement);
          var isChecked = element2.getElementsByClassName(CHECKBOXFRAME$1)[0].classList.contains(CHECK$1);
          var parentCheck = element2.getElementsByClassName(CHECKBOXFRAME$1)[0].classList.contains(INDETERMINATE$1);
          var childCheck = childElement.querySelectorAll("li");
          childElement.parentElement.getAttribute("aria-expanded");
          var checkedState = void 0;
          for (var index = 0; index < checkBoxes.length; index++) {
            var childId = childCheck[index].getAttribute("data-uid");
            if (!isNullOrUndefined(this.currentLoadData) && !isNullOrUndefined(getValue(this.fields.isChecked, this.currentLoadData[index]))) {
              checkedState = getValue(this.fields.isChecked, this.currentLoadData[index]) ? "check" : "uncheck";
              if (this.ele !== -1) {
                checkedState = isChecked ? "check" : "uncheck";
              }
              if (checkedState === "uncheck" && (!isUndefined(this.parentNodeCheck) && this.autoCheck && this.parentNodeCheck.indexOf(childId) !== -1)) {
                this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(childId), 1);
                checkedState = "indeterminate";
              }
            } else {
              var isNodeChecked = checkBoxes[index].getElementsByClassName(CHECKBOXFRAME$1)[0].classList.contains(CHECK$1);
              if (isChecked) {
                checkedState = "check";
              } else if (isNodeChecked && !this.isLoaded) {
                checkedState = "check";
              } else if (this.checkedNodes.indexOf(childId) !== -1 && this.isLoaded && (parentCheck || isChecked)) {
                checkedState = "check";
              } else if (childCheck[index].classList.contains(CHILD) && (!isUndefined(this.parentNodeCheck) && this.autoCheck && (isChecked || parentCheck) && this.parentNodeCheck.indexOf(childId) !== -1)) {
                checkedState = "indeterminate";
                this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(childId), 1);
              } else if (this.dataType === 1 && (!isUndefined(this.parentNodeCheck) && this.autoCheck && (isChecked || parentCheck) && this.parentNodeCheck.indexOf(childId) !== -1)) {
                checkedState = "indeterminate";
                this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(childId), 1);
              } else {
                checkedState = "uncheck";
              }
            }
            this.changeState(checkBoxes[index], checkedState, e, true, true);
          }
        }
        if (this.autoCheck && this.isLoaded) {
          this.updateParentCheckState();
        }
      }
    };
    TreeView2.prototype.doCheckBoxAction = function(nodes, doCheck) {
      selectAll("." + LISTITEM, this.element);
      if (!isNullOrUndefined(nodes)) {
        for (var len = nodes.length; len >= 0; len--) {
          var liEle = void 0;
          if (nodes.length === 1) {
            liEle = this.getElement(nodes[len - 1]);
          } else {
            liEle = this.getElement(nodes[len]);
          }
          if (isNullOrUndefined(liEle)) {
            var node = void 0;
            node = nodes[len - nodes.length] ? nodes[len - nodes.length].toString() : nodes[len] ? nodes[len].toString() : null;
            if (node !== "" && doCheck && node) {
              this.setValidCheckedNode(node);
              this.dynamicCheckState(node, doCheck);
            } else if (this.checkedNodes.indexOf(node) !== -1 && node !== "" && !doCheck) {
              this.checkedNodes.splice(this.checkedNodes.indexOf(node), 1);
              var childItems = this.getChildNodes(this.treeData, node);
              if (childItems) {
                for (var i = 0; i < childItems.length; i++) {
                  var id = childItems[i][this.fields.id] ? childItems[i][this.fields.id].toString() : null;
                  if (this.checkedNodes.indexOf(id) !== -1) {
                    this.checkedNodes.splice(this.checkedNodes.indexOf(id), 1);
                    var ele = this.element.querySelector('[data-uid="' + id + '"]');
                    if (ele) {
                      this.changeState(ele, "uncheck", null);
                    }
                  }
                }
                if (this.parentNodeCheck.indexOf(node) !== -1) {
                  this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(node), 1);
                }
              }
              if (node) {
                this.dynamicCheckState(node, doCheck);
              }
              this.updateField(this.treeData, this.fields, node, "isChecked", null);
            }
            continue;
          }
          var checkBox = select$1("." + PARENTITEM + " ." + CHECKBOXWRAP$1, liEle);
          this.validateCheckNode(checkBox, !doCheck, liEle, null);
        }
      } else {
        var checkBoxes = selectAll("." + CHECKBOXWRAP$1, this.element);
        if (this.loadOnDemand) {
          for (var index = 0; index < checkBoxes.length; index++) {
            this.updateFieldChecked(checkBoxes[index], doCheck);
            this.changeState(checkBoxes[index], doCheck ? "check" : "uncheck", null, null, null, doCheck);
          }
        } else {
          for (var index = 0; index < checkBoxes.length; index++) {
            this.updateFieldChecked(checkBoxes[index], doCheck);
            this.changeState(checkBoxes[index], doCheck ? "check" : "uncheck");
          }
        }
      }
      if (nodes) {
        for (var j = 0; j < nodes.length; j++) {
          var node = nodes[j] ? nodes[j].toString() : "";
          if (!doCheck) {
            this.updateField(this.treeData, this.fields, node, "isChecked", null);
          }
        }
      }
      if (this.autoCheck) {
        this.updateParentCheckState();
      }
    };
    TreeView2.prototype.updateFieldChecked = function(checkbox, doCheck) {
      var currLi = closest(checkbox, "." + LISTITEM);
      var id = currLi.getAttribute("data-uid");
      var nodeDetails = this.getNodeData(currLi);
      if (nodeDetails.isChecked === "true" && !doCheck) {
        this.updateField(this.treeData, this.fields, id, "isChecked", null);
      }
    };
    TreeView2.prototype.dynamicCheckState = function(node, doCheck) {
      if (this.dataType === 1) {
        var count = 0;
        var resultId = new DataManager(this.treeData).executeLocal(new Query().where(this.fields.id, "equal", node, true));
        if (resultId[0]) {
          var id = resultId[0][this.fields.id] ? resultId[0][this.fields.id].toString() : null;
          var parent_1 = resultId[0][this.fields.parentID] ? resultId[0][this.fields.parentID].toString() : null;
          var parentElement = this.element.querySelector('[data-uid="' + parent_1 + '"]');
          parentElement ? select$1("." + INDETERMINATE$1, parentElement) : null;
          var check = parentElement ? select$1("." + CHECK$1, parentElement) : null;
          var element2 = this.element.querySelector('[data-uid="' + id + '"]');
          var childNodes = this.getChildNodes(this.treeData, parent_1);
          if (childNodes) {
            for (var i = 0; i < childNodes.length; i++) {
              var childId = childNodes[i][this.fields.id] ? childNodes[i][this.fields.id].toString() : null;
              if (this.checkedNodes.indexOf(childId) !== -1) {
                count++;
              }
            }
          }
          if (this.checkedNodes.indexOf(node) !== -1 && parentElement && id === node && this.autoCheck) {
            this.changeState(parentElement, "indeterminate", null);
          } else if (this.checkedNodes.indexOf(node) === -1 && element2 && id === node && !doCheck) {
            this.changeState(element2, "uncheck", null);
          } else if (this.checkedNodes.indexOf(node) !== -1 && element2 && id === node && doCheck) {
            this.changeState(element2, "check", null);
          } else if (this.checkedNodes.indexOf(node) === -1 && !element2 && parentElement && id === node && this.autoCheck && count !== 0) {
            this.changeState(parentElement, "indeterminate", null);
          } else if (this.checkedNodes.indexOf(node) === -1 && !element2 && parentElement && id === node && this.autoCheck && count === 0) {
            this.changeState(parentElement, "uncheck", null);
          } else if (!element2 && !parentElement && id === node && this.autoCheck) {
            this.updateIndeterminate(node, doCheck);
          }
        }
      } else if (this.dataType === 2 || this.fields.dataSource instanceof DataManager && this.isOffline) {
        var id = void 0;
        var parentElement = void 0;
        var check = void 0;
        for (var i = 0; i < this.treeData.length; i++) {
          id = this.treeData[i][this.fields.id] ? this.treeData[i][this.fields.id].toString() : "";
          parentElement = this.element.querySelector('[data-uid="' + id + '"]');
          check = parentElement ? select$1("." + CHECK$1, parentElement) : null;
          if (this.checkedNodes.indexOf(id) === -1 && parentElement && check && !doCheck) {
            this.changeState(parentElement, "uncheck", null);
          }
          var subChild = getValue(this.fields.child.toString(), this.treeData[i]);
          if (subChild) {
            this.updateChildIndeterminate(subChild, id, node, doCheck, id);
          }
        }
      }
    };
    TreeView2.prototype.updateIndeterminate = function(node, doCheck) {
      var indeterminateData = this.getTreeData(node);
      var count = 0;
      var parent;
      if (this.dataType === 1) {
        parent = indeterminateData[0][this.fields.parentID] ? indeterminateData[0][this.fields.parentID].toString() : null;
      }
      var childNodes = this.getChildNodes(this.treeData, parent);
      if (childNodes) {
        for (var i = 0; i < childNodes.length; i++) {
          var childId = childNodes[i][this.fields.id] ? childNodes[i][this.fields.id].toString() : null;
          if (this.checkedNodes.indexOf(childId) !== -1) {
            count++;
          }
        }
      }
      var parentElement = this.element.querySelector('[data-uid="' + parent + '"]');
      if (parentElement && doCheck) {
        this.changeState(parentElement, "indeterminate", null);
      } else if (!doCheck && parentElement && this.parentNodeCheck.indexOf(parent) === -1 && count !== 0) {
        this.changeState(parentElement, "indeterminate", null);
      } else if (!doCheck && parentElement && this.parentNodeCheck.indexOf(parent) === -1 && count === 0) {
        this.changeState(parentElement, "uncheck", null);
      } else if (!parentElement) {
        if (!doCheck && this.checkedNodes.indexOf(parent) === -1 && this.parentNodeCheck.indexOf(parent) !== -1) {
          this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(parent), 1);
        } else if (doCheck && this.checkedNodes.indexOf(parent) === -1 && this.parentNodeCheck.indexOf(parent) === -1) {
          this.parentNodeCheck.push(parent);
        } else if (!doCheck && this.checkedNodes.indexOf(parent) !== -1 && this.parentNodeCheck.indexOf(parent) === -1 && count !== 0) {
          this.parentNodeCheck.push(parent);
        }
        this.updateIndeterminate(parent, doCheck);
        if (this.checkedNodes.indexOf(parent) !== -1 && !doCheck) {
          this.checkedNodes.splice(this.checkedNodes.indexOf(parent), 1);
        }
      }
    };
    TreeView2.prototype.updateChildIndeterminate = function(subChild, parent, node, doCheck, child) {
      var count = 0;
      for (var j = 0; j < subChild.length; j++) {
        var subId = subChild[j][this.fields.id] ? subChild[j][this.fields.id].toString() : "";
        if (this.checkedNodes.indexOf(subId) !== -1) {
          count++;
        }
        var parentElement = this.element.querySelector('[data-uid="' + parent + '"]');
        var indeterminate = parentElement ? select$1("." + INDETERMINATE$1, parentElement) : null;
        var check = parentElement ? select$1("." + CHECK$1, parentElement) : null;
        var element2 = this.element.querySelector('[data-uid="' + subId + '"]');
        var childElementCheck = element2 ? select$1("." + CHECK$1, element2) : null;
        if (this.checkedNodes.indexOf(node) !== -1 && parentElement && subId === node && this.autoCheck) {
          this.changeState(parentElement, "indeterminate", null);
        } else if (this.checkedNodes.indexOf(node) === -1 && parentElement && !element2 && subId === node && !doCheck) {
          if (this.autoCheck) {
            this.changeState(parentElement, "uncheck", null);
          } else {
            if (count !== 0) {
              this.changeState(parentElement, "indeterminate", null);
            } else {
              this.changeState(parentElement, "uncheck", null);
            }
          }
        } else if (this.checkedNodes.indexOf(node) === -1 && element2 && subId === node && !doCheck) {
          this.changeState(element2, "uncheck", null);
        } else if (this.checkedNodes.indexOf(node) === -1 && indeterminate && subId === node && this.autoCheck && count === 0 && !doCheck) {
          indeterminate.classList.remove(INDETERMINATE$1);
        } else if (this.checkedNodes.indexOf(node) === -1 && !element2 && check && subId === node && count === 0) {
          this.changeState(parentElement, "uncheck", null);
        } else if (this.checkedNodes.indexOf(subId) === -1 && element2 && childElementCheck && count === 0) {
          this.changeState(element2, "uncheck", null);
        } else if (!element2 && !parentElement && subId === node || this.parentNodeCheck.indexOf(parent) !== -1 && this.autoCheck) {
          var childElement = this.element.querySelector('[data-uid="' + child + '"]');
          if (doCheck && count !== 0) {
            this.changeState(childElement, "indeterminate", null);
          } else if (doCheck && count === subChild.length && this.checkedNodes.indexOf(parent) === -1) {
            this.checkedNodes.push(parent);
          } else if (!doCheck && count === 0 && this.parentNodeCheck.indexOf(parent) !== -1) {
            this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(parent));
          }
          if (this.parentNodeCheck.indexOf(parent) === -1) {
            this.parentNodeCheck.push(parent);
          }
        }
        var innerChild = getValue(this.fields.child.toString(), subChild[j]);
        if (innerChild) {
          this.updateChildIndeterminate(innerChild, subId, node, doCheck, child);
        }
      }
    };
    TreeView2.prototype.changeState = function(wrapper, state, e, isPrevent, isAdd, doCheck) {
      var _this = this;
      var eventArgs;
      var currLi = closest(wrapper, "." + LISTITEM);
      if (wrapper === currLi) {
        wrapper = select$1("." + CHECKBOXWRAP$1, currLi);
      }
      if (!isPrevent) {
        this.checkActionNodes = [];
        eventArgs = this.getCheckEvent(currLi, state, e);
        this.trigger("nodeChecking", eventArgs, function(observedArgs) {
          if (!observedArgs.cancel) {
            _this.nodeCheckAction(wrapper, state, currLi, observedArgs, e, isPrevent, isAdd, doCheck);
          }
        });
      } else {
        this.nodeCheckAction(wrapper, state, currLi, eventArgs, e, isPrevent, isAdd, doCheck);
      }
    };
    TreeView2.prototype.nodeCheckAction = function(wrapper, state, currLi, eventArgs, e, isPrevent, isAdd, doCheck) {
      var ariaState;
      var frameSpan = wrapper.getElementsByClassName(CHECKBOXFRAME$1)[0];
      if (state === "check" && !frameSpan.classList.contains(CHECK$1)) {
        frameSpan.classList.remove(INDETERMINATE$1);
        frameSpan.classList.add(CHECK$1);
        this.addCheck(currLi);
        ariaState = "true";
      } else if (state === "uncheck" && (frameSpan.classList.contains(CHECK$1) || frameSpan.classList.contains(INDETERMINATE$1))) {
        removeClass([frameSpan], [CHECK$1, INDETERMINATE$1]);
        this.removeCheck(currLi);
        ariaState = "false";
      } else if (state === "indeterminate" && this.autoCheck) {
        frameSpan.classList.remove(CHECK$1);
        frameSpan.classList.add(INDETERMINATE$1);
        this.removeCheck(currLi);
        ariaState = "mixed";
      }
      ariaState = state === "check" ? "true" : state === "uncheck" ? "false" : ariaState;
      if (!isNullOrUndefined(ariaState)) {
        wrapper.setAttribute("aria-checked", ariaState);
      }
      if (isAdd) {
        var data = [].concat([], this.checkActionNodes);
        eventArgs = this.getCheckEvent(currLi, state, e);
        if (isUndefined(isPrevent)) {
          eventArgs.data = data;
        }
      }
      if (doCheck !== void 0) {
        this.ensureStateChange(currLi, doCheck);
      }
      if (!isPrevent) {
        if (!isNullOrUndefined(ariaState)) {
          wrapper.setAttribute("aria-checked", ariaState);
          eventArgs.data[0].checked = ariaState;
          this.trigger("nodeChecked", eventArgs);
          this.checkActionNodes = [];
        }
      }
    };
    TreeView2.prototype.addCheck = function(liEle) {
      var id = liEle.getAttribute("data-uid");
      if (!isNullOrUndefined(id) && this.checkedNodes.indexOf(id) === -1) {
        this.checkedNodes.push(id);
      }
    };
    TreeView2.prototype.removeCheck = function(liEle) {
      var index = this.checkedNodes.indexOf(liEle.getAttribute("data-uid"));
      if (index > -1) {
        this.checkedNodes.splice(index, 1);
      }
    };
    TreeView2.prototype.getCheckEvent = function(currLi, action, e) {
      this.checkActionNodes.push(this.getNodeData(currLi));
      var nodeData = this.checkActionNodes;
      return { action, cancel: false, isInteracted: isNullOrUndefined(e) ? false : true, node: currLi, data: nodeData };
    };
    TreeView2.prototype.finalize = function() {
      var firstUl = select$1("." + PARENTITEM, this.element);
      if (!isNullOrUndefined(firstUl)) {
        firstUl.setAttribute("role", treeAriaAttr.treeRole);
        this.setMultiSelect(this.allowMultiSelection);
        var firstNode = select$1("." + LISTITEM, this.element);
        if (firstNode) {
          firstNode.setAttribute("tabindex", "0");
          this.updateIdAttr(null, firstNode);
        }
        if (this.allowTextWrap) {
          this.updateWrap();
        }
        this.renderReactTemplates();
        this.hasPid = this.rootData[0] ? this.rootData[0].hasOwnProperty(this.fields.parentID) : false;
        this.doExpandAction();
      }
    };
    TreeView2.prototype.setTextWrap = function() {
      (this.allowTextWrap ? addClass : removeClass)([this.element], LISTWRAP);
      if (Browser.isIE) {
        (this.allowTextWrap ? addClass : removeClass)([this.element], IELISTWRAP);
      }
    };
    TreeView2.prototype.updateWrap = function(ulEle) {
      if (!this.fullRowSelect) {
        return;
      }
      var liEle = ulEle ? selectAll("." + LISTITEM, ulEle) : this.liList;
      var length = liEle.length;
      for (var i = 0; i < length; i++) {
        this.calculateWrap(liEle[i]);
      }
    };
    TreeView2.prototype.calculateWrap = function(liEle) {
      var element2 = select$1("." + FULLROW, liEle);
      if (element2 && element2.nextElementSibling) {
        element2.style.height = this.allowTextWrap ? element2.nextElementSibling.offsetHeight + "px" : "";
      }
    };
    TreeView2.prototype.doExpandAction = function() {
      var eUids = this.expandedNodes;
      if (this.isInitalExpand && eUids.length > 0) {
        this.setProperties({ expandedNodes: [] }, true);
        if (this.fields.dataSource instanceof DataManager) {
          this.expandGivenNodes(eUids);
        } else {
          for (var i = 0; i < eUids.length; i++) {
            var eNode = select$1('[data-uid="' + eUids[i] + '"]', this.element);
            if (!isNullOrUndefined(eNode)) {
              var icon = select$1("." + EXPANDABLE, select$1("." + TEXTWRAP, eNode));
              if (!isNullOrUndefined(icon)) {
                this.expandAction(eNode, icon, null);
              }
            } else {
              if (eUids[i] && this.expandChildren.indexOf(eUids[i]) === -1) {
                this.expandChildren.push(eUids[i].toString());
              }
              continue;
            }
          }
          this.afterFinalized();
        }
      } else {
        this.afterFinalized();
      }
    };
    TreeView2.prototype.expandGivenNodes = function(arr) {
      var proxy2 = this;
      this.expandCallback(arr[this.index], function() {
        proxy2.index++;
        if (proxy2.index < arr.length) {
          proxy2.expandGivenNodes(arr);
        } else {
          proxy2.afterFinalized();
        }
      });
    };
    TreeView2.prototype.expandCallback = function(eUid, callback) {
      var eNode = select$1('[data-uid="' + eUid + '"]', this.element);
      if (!isNullOrUndefined(eNode)) {
        var icon = select$1("." + EXPANDABLE, select$1("." + TEXTWRAP, eNode));
        if (!isNullOrUndefined(icon)) {
          this.expandAction(eNode, icon, null, false, callback);
        } else {
          callback();
        }
      } else {
        callback();
      }
    };
    TreeView2.prototype.afterFinalized = function() {
      this.doSelectionAction();
      this.updateCheckedProp();
      this.isAnimate = true;
      this.isInitalExpand = false;
      if ((!this.isLoaded || this.isFieldChange) && !this.isNodeDropped) {
        var eventArgs = { data: this.treeData };
        this.trigger("dataBound", eventArgs);
      }
      this.isLoaded = true;
      this.isNodeDropped = false;
    };
    TreeView2.prototype.doSelectionAction = function() {
      var sNodes = selectAll("." + SELECTED$3, this.element);
      var sUids = this.selectedNodes;
      if (sUids.length > 0) {
        this.setProperties({ selectedNodes: [] }, true);
        for (var i = 0; i < sUids.length; i++) {
          var sNode = select$1('[data-uid="' + sUids[i] + '"]', this.element);
          if (sNode && !sNode.classList.contains("e-active")) {
            this.selectNode(sNode, null, true);
          } else {
            this.selectedNodes.push(sUids[i]);
          }
          if (!this.allowMultiSelection) {
            break;
          }
        }
      } else {
        this.selectGivenNodes(sNodes);
      }
      removeClass(sNodes, SELECTED$3);
    };
    TreeView2.prototype.selectGivenNodes = function(sNodes) {
      for (var i = 0; i < sNodes.length; i++) {
        if (!sNodes[i].classList.contains("e-disable")) {
          this.selectNode(sNodes[i], null, true);
        }
        if (!this.allowMultiSelection) {
          break;
        }
      }
    };
    TreeView2.prototype.clickHandler = function(event) {
      var target = Browser.isDevice && !Browser.isIos ? document.elementFromPoint(event.originalEvent.changedTouches[0].clientX, event.originalEvent.changedTouches[0].clientY) : event.originalEvent.target;
      EventHandler.remove(this.element, "contextmenu", this.preventContextMenu);
      if (!target || this.dragStartAction) {
        return;
      } else {
        var classList2 = target.classList;
        var li = closest(target, "." + LISTITEM);
        if (!li || li.classList.contains(PREVENTSELECT) && !(classList2.contains(EXPANDABLE) || classList2.contains(COLLAPSIBLE))) {
          return;
        } else if (event.originalEvent.which !== 3) {
          var rippleElement = select$1("." + RIPPLEELMENT, li);
          var rippleIcons = select$1("." + ICON$3, li);
          this.removeHover();
          this.setFocusElement(li);
          if (this.showCheckBox && !li.classList.contains("e-disable")) {
            var checkWrapper = closest(target, "." + CHECKBOXWRAP$1);
            if (!isNullOrUndefined(checkWrapper)) {
              var checkElement = select$1("." + CHECKBOXFRAME$1, checkWrapper);
              this.validateCheckNode(checkWrapper, checkElement.classList.contains(CHECK$1), li, event.originalEvent);
              this.triggerClickEvent(event.originalEvent, li);
              return;
            }
          }
          if (classList2.contains(EXPANDABLE)) {
            this.expandAction(li, target, event);
          } else if (classList2.contains(COLLAPSIBLE)) {
            this.collapseNode(li, target, event);
          } else if (rippleElement && rippleIcons) {
            if (rippleIcons.classList.contains(RIPPLE) && rippleIcons.classList.contains(EXPANDABLE)) {
              this.expandAction(li, rippleIcons, event);
            } else if (rippleIcons.classList.contains(RIPPLE) && rippleIcons.classList.contains(COLLAPSIBLE)) {
              this.collapseNode(li, rippleIcons, event);
            } else if (!classList2.contains(PARENTITEM) && !classList2.contains(LISTITEM)) {
              this.toggleSelect(li, event.originalEvent, false);
            }
          } else {
            if (!classList2.contains(PARENTITEM) && !classList2.contains(LISTITEM)) {
              this.toggleSelect(li, event.originalEvent, false);
            }
          }
        }
        if (event.originalEvent.which === 3) {
          this.isRightClick = true;
        }
        this.triggerClickEvent(event.originalEvent, li);
      }
    };
    TreeView2.prototype.nodeCheckedEvent = function(wrapper, isCheck, e) {
      closest(wrapper, "." + LISTITEM);
      var eventArgs = this.getCheckEvent(wrapper, isCheck ? "uncheck" : "check", e);
      eventArgs.data = eventArgs.data.splice(0, eventArgs.data.length - 1);
      this.trigger("nodeChecked", eventArgs);
    };
    TreeView2.prototype.triggerClickEvent = function(e, li) {
      var eventArgs = {
        event: e,
        node: li
      };
      this.trigger("nodeClicked", eventArgs);
    };
    TreeView2.prototype.expandNode = function(currLi, icon, loaded) {
      var _this = this;
      this.renderReactTemplates();
      if (icon.classList.contains(LOAD)) {
        this.hideSpinner(icon);
      }
      if (!this.initialRender) {
        icon.classList.add("interaction");
      }
      if (loaded !== true || loaded === true && currLi.classList.contains("e-expanded")) {
        if (this.preventExpand !== true) {
          removeClass([icon], EXPANDABLE);
          addClass([icon], COLLAPSIBLE);
          var start_1 = 0;
          var end_1 = 0;
          var proxy_1 = this;
          var ul_1 = select$1("." + PARENTITEM, currLi);
          var liEle_1 = currLi;
          this.setHeight(liEle_1, ul_1);
          var activeElement_1 = select$1("." + LISTITEM + "." + ACTIVE$3, currLi);
          if (this.isAnimate && !this.isRefreshed) {
            this.aniObj.animate(ul_1, {
              name: this.animation.expand.effect,
              duration: this.animation.expand.duration,
              timingFunction: this.animation.expand.easing,
              begin: function(args) {
                liEle_1.style.overflow = "hidden";
                if (!isNullOrUndefined(activeElement_1) && activeElement_1 instanceof HTMLElement) {
                  activeElement_1.classList.add(ITEM_ANIMATION_ACTIVE);
                }
                start_1 = liEle_1.offsetHeight;
                end_1 = select$1("." + TEXTWRAP, currLi).offsetHeight;
              },
              progress: function(args) {
                args.element.style.display = "block";
                proxy_1.animateHeight(args, start_1, end_1);
              },
              end: function(args) {
                args.element.style.display = "block";
                if (!isNullOrUndefined(activeElement_1) && activeElement_1 instanceof HTMLElement) {
                  activeElement_1.classList.remove(ITEM_ANIMATION_ACTIVE);
                }
                _this.expandedNode(liEle_1, ul_1, icon);
              }
            });
          } else {
            this.expandedNode(liEle_1, ul_1, icon);
          }
        }
      } else {
        var ul = select$1("." + PARENTITEM, currLi);
        ul.style.display = "none";
        if (this.fields.dataSource instanceof DataManager === true) {
          this.preventExpand = false;
        }
      }
      if (this.initialRender) {
        icon.classList.add("interaction");
      }
    };
    TreeView2.prototype.expandedNode = function(currLi, ul, icon) {
      ul.style.display = "block";
      currLi.style.display = "block";
      currLi.style.overflow = "";
      currLi.style.height = "";
      removeClass([icon], PROCESS);
      this.addExpand(currLi);
      if (this.allowTextWrap && this.isLoaded && this.isFirstRender) {
        this.updateWrap(currLi);
        this.isFirstRender = false;
      }
      if (this.isLoaded && this.expandArgs && !this.isRefreshed) {
        this.expandArgs = this.getExpandEvent(currLi, null);
        this.expandArgs.isInteracted = this.isInteracted;
        this.trigger("nodeExpanded", this.expandArgs);
      }
    };
    TreeView2.prototype.addExpand = function(liEle) {
      liEle.setAttribute("aria-expanded", "true");
      removeClass([liEle], NODECOLLAPSED);
      var id = liEle.getAttribute("data-uid");
      if (!isNullOrUndefined(id) && this.expandedNodes.indexOf(id) === -1) {
        this.expandedNodes.push(id);
      }
    };
    TreeView2.prototype.collapseNode = function(currLi, icon, e) {
      var _this = this;
      if (icon.classList.contains(PROCESS)) {
        return;
      } else {
        addClass([icon], PROCESS);
      }
      var colArgs;
      if (this.isLoaded) {
        colArgs = this.getExpandEvent(currLi, e);
        this.isInteracted = colArgs.isInteracted;
        this.trigger("nodeCollapsing", colArgs, function(observedArgs) {
          if (observedArgs.cancel) {
            removeClass([icon], PROCESS);
          } else {
            _this.nodeCollapseAction(currLi, icon, observedArgs);
          }
        });
      } else {
        this.nodeCollapseAction(currLi, icon, colArgs);
      }
    };
    TreeView2.prototype.nodeCollapseAction = function(currLi, icon, colArgs) {
      var _this = this;
      removeClass([icon], COLLAPSIBLE);
      addClass([icon], EXPANDABLE);
      var start = 0;
      var end = 0;
      var proxy2 = this;
      var ul = select$1("." + PARENTITEM, currLi);
      var liEle = currLi;
      var activeElement = select$1("." + LISTITEM + "." + ACTIVE$3, currLi);
      if (this.isAnimate) {
        this.aniObj.animate(ul, {
          name: this.animation.collapse.effect,
          duration: this.animation.collapse.duration,
          timingFunction: this.animation.collapse.easing,
          begin: function(args) {
            liEle.style.overflow = "hidden";
            if (!isNullOrUndefined(activeElement) && activeElement instanceof HTMLElement) {
              activeElement.classList.add(ITEM_ANIMATION_ACTIVE);
            }
            start = select$1("." + TEXTWRAP, currLi).offsetHeight;
            end = liEle.offsetHeight;
          },
          progress: function(args) {
            proxy2.animateHeight(args, start, end);
          },
          end: function(args) {
            args.element.style.display = "none";
            if (!isNullOrUndefined(activeElement) && activeElement instanceof HTMLElement) {
              activeElement.classList.remove(ITEM_ANIMATION_ACTIVE);
            }
            _this.collapsedNode(liEle, ul, icon, colArgs);
          }
        });
      } else {
        this.collapsedNode(liEle, ul, icon, colArgs);
      }
    };
    TreeView2.prototype.collapsedNode = function(liEle, ul, icon, colArgs) {
      ul.style.display = "none";
      liEle.style.overflow = "";
      liEle.style.height = "";
      removeClass([icon], PROCESS);
      this.removeExpand(liEle);
      if (this.isLoaded) {
        colArgs = this.getExpandEvent(liEle, null);
        colArgs.isInteracted = this.isInteracted;
        this.trigger("nodeCollapsed", colArgs);
      }
    };
    TreeView2.prototype.removeExpand = function(liEle, toRemove) {
      if (toRemove) {
        liEle.removeAttribute("aria-expanded");
      } else {
        this.disableExpandAttr(liEle);
      }
      var index = this.expandedNodes.indexOf(liEle.getAttribute("data-uid"));
      if (index > -1) {
        this.expandedNodes.splice(index, 1);
      }
    };
    TreeView2.prototype.disableExpandAttr = function(liEle) {
      liEle.setAttribute("aria-expanded", "false");
      addClass([liEle], NODECOLLAPSED);
    };
    TreeView2.prototype.setHeight = function(currLi, ul) {
      ul.style.display = "block";
      ul.style.visibility = "hidden";
      currLi.style.height = currLi.offsetHeight + "px";
      ul.style.display = "none";
      ul.style.visibility = "";
    };
    TreeView2.prototype.animateHeight = function(args, start, end) {
      var remaining = (args.duration - args.timeStamp) / args.duration;
      var currentHeight = (end - start) * remaining + start;
      args.element.parentElement.style.height = currentHeight + "px";
    };
    TreeView2.prototype.renderChildNodes = function(parentLi, expandChild, callback, loaded) {
      var _this = this;
      var eicon = select$1("div." + ICON$3, parentLi);
      if (isNullOrUndefined(eicon)) {
        return;
      }
      this.showSpinner(eicon);
      var childItems;
      if (this.fields.dataSource instanceof DataManager) {
        var level = this.parents(parentLi, "." + PARENTITEM).length;
        var mapper_2 = this.getChildFields(this.fields, level, 1);
        if (isNullOrUndefined(mapper_2) || isNullOrUndefined(mapper_2.dataSource)) {
          detach(eicon);
          this.removeExpand(parentLi, true);
          return;
        }
        this.treeList.push("false");
        if (this.fields.dataSource instanceof DataManager && this.isOffline) {
          this.treeList.pop();
          childItems = this.getChildNodes(this.treeData, parentLi.getAttribute("data-uid"));
          this.loadChild(childItems, mapper_2, eicon, parentLi, expandChild, callback, loaded);
        } else {
          mapper_2.dataSource.executeQuery(this.getQuery(mapper_2, parentLi.getAttribute("data-uid"))).then(function(e) {
            _this.treeList.pop();
            childItems = e.result;
            if (_this.dataType === 1) {
              _this.dataType = 2;
            }
            _this.loadChild(childItems, mapper_2, eicon, parentLi, expandChild, callback, loaded);
          }).catch(function(e) {
            _this.trigger("actionFailure", { error: e });
          });
        }
      } else {
        childItems = this.getChildNodes(this.treeData, parentLi.getAttribute("data-uid"));
        this.currentLoadData = this.getSortedData(childItems);
        if (isNullOrUndefined(childItems) || childItems.length === 0) {
          detach(eicon);
          this.removeExpand(parentLi, true);
          return;
        } else {
          this.listBaseOption.ariaAttributes.level = parseFloat(parentLi.getAttribute("aria-level")) + 1;
          parentLi.appendChild(ListBase.createList(this.createElement, this.currentLoadData, this.listBaseOption));
          this.expandNode(parentLi, eicon, loaded);
          this.setSelectionForChildNodes(childItems);
          this.ensureCheckNode(parentLi);
          this.finalizeNode(parentLi);
          this.disableTreeNodes(childItems);
          this.renderSubChild(parentLi, expandChild, loaded);
        }
      }
    };
    TreeView2.prototype.loadChild = function(childItems, mapper2, eicon, parentLi, expandChild, callback, loaded) {
      this.currentLoadData = childItems;
      if (isNullOrUndefined(childItems) || childItems.length === 0) {
        detach(eicon);
        this.removeExpand(parentLi, true);
      } else {
        this.updateListProp(mapper2);
        if (this.fields.dataSource instanceof DataManager && !this.isOffline) {
          var id = parentLi.getAttribute("data-uid");
          var nodeData = this.getNodeObject(id);
          setValue("child", childItems, nodeData);
        }
        this.listBaseOption.ariaAttributes.level = parseFloat(parentLi.getAttribute("aria-level")) + 1;
        parentLi.appendChild(ListBase.createList(this.createElement, childItems, this.listBaseOption));
        this.expandNode(parentLi, eicon, loaded);
        this.setSelectionForChildNodes(childItems);
        this.ensureCheckNode(parentLi);
        this.finalizeNode(parentLi);
        this.disableTreeNodes(childItems);
        this.renderSubChild(parentLi, expandChild, loaded);
      }
      if (callback) {
        callback();
      }
      if (this.treeList.length === 0 && !this.isLoaded) {
        this.finalize();
      }
    };
    TreeView2.prototype.disableTreeNodes = function(childItems) {
      var i = 0;
      while (i < childItems.length) {
        var id = childItems[i][this.fields.id] ? childItems[i][this.fields.id].toString() : null;
        if (this.disableNode !== void 0 && this.disableNode.indexOf(id) !== -1) {
          this.doDisableAction([id]);
        }
        i++;
      }
    };
    TreeView2.prototype.setSelectionForChildNodes = function(nodes) {
      var i;
      for (i = 0; i < nodes.length; i++) {
        var id = nodes[i][this.fields.id] ? nodes[i][this.fields.id].toString() : null;
        if (this.selectedNodes !== void 0 && this.selectedNodes.indexOf(id) !== -1) {
          this.doSelectionAction();
        }
      }
    };
    TreeView2.prototype.ensureCheckNode = function(element2) {
      if (this.showCheckBox) {
        this.ele = this.checkedElement ? this.checkedElement.indexOf(element2.getAttribute("data-uid")) : null;
        if (this.autoCheck) {
          this.ensureChildCheckState(element2);
          this.ensureParentCheckState(element2);
        }
      }
      this.currentLoadData = null;
    };
    TreeView2.prototype.getFields = function(mapper2, nodeLevel, dataLevel) {
      if (nodeLevel === dataLevel) {
        return mapper2;
      } else {
        return this.getFields(this.getChildMapper(mapper2), nodeLevel, dataLevel + 1);
      }
    };
    TreeView2.prototype.getChildFields = function(mapper2, nodeLevel, dataLevel) {
      if (nodeLevel === dataLevel) {
        return this.getChildMapper(mapper2);
      } else {
        return this.getChildFields(this.getChildMapper(mapper2), nodeLevel, dataLevel + 1);
      }
    };
    TreeView2.prototype.getChildMapper = function(mapper2) {
      return typeof mapper2.child === "string" || isNullOrUndefined(mapper2.child) ? mapper2 : mapper2.child;
    };
    TreeView2.prototype.getChildNodes = function(obj, parentId, isRoot) {
      var _this = this;
      if (isRoot === void 0) {
        isRoot = false;
      }
      var childNodes;
      if (isNullOrUndefined(obj)) {
        return childNodes;
      } else if (this.dataType === 1) {
        return this.getChildGroup(this.groupedData, parentId, isRoot);
      } else {
        if (typeof this.fields.child === "string") {
          var index = obj.findIndex(function(data) {
            return data[_this.fields.id] && data[_this.fields.id].toString() === parentId;
          });
          if (index !== -1) {
            return getValue(this.fields.child, obj[index]);
          }
          if (index === -1) {
            for (var i = 0, objlen = obj.length; i < objlen; i++) {
              var tempArray = getValue(this.fields.child, obj[i]);
              var childIndex = !isNullOrUndefined(tempArray) ? tempArray.findIndex(function(data) {
                return data[_this.fields.id] && data[_this.fields.id].toString() === parentId;
              }) : -1;
              if (childIndex !== -1) {
                return getValue(this.fields.child, tempArray[childIndex]);
              } else if (!isNullOrUndefined(tempArray)) {
                childNodes = this.getChildNodes(tempArray, parentId);
                if (childNodes !== void 0) {
                  break;
                }
              }
            }
          }
        }
      }
      return childNodes;
    };
    TreeView2.prototype.getChildGroup = function(data, parentId, isRoot) {
      var childNodes;
      if (isNullOrUndefined(data)) {
        return childNodes;
      }
      for (var i = 0, objlen = data.length; i < objlen; i++) {
        if (!isNullOrUndefined(data[i][0]) && !isNullOrUndefined(getValue(this.fields.parentID, data[i][0]))) {
          if (getValue(this.fields.parentID, data[i][0]).toString() === parentId) {
            return data[i];
          }
        } else if (isRoot) {
          return data[i];
        } else {
          return [];
        }
      }
      return childNodes;
    };
    TreeView2.prototype.renderSubChild = function(element2, expandChild, loaded) {
      if (expandChild) {
        var cIcons = selectAll("." + EXPANDABLE, element2);
        for (var i = 0, len = cIcons.length; i < len; i++) {
          var icon = cIcons[i];
          if (element2.querySelector(".e-icons") !== cIcons[i]) {
            var curLi = closest(icon, "." + LISTITEM);
            this.expandArgs = this.getExpandEvent(curLi, null);
            if (loaded !== true) {
              this.trigger("nodeExpanding", this.expandArgs);
            }
            this.renderChildNodes(curLi, expandChild, null, loaded);
          }
        }
      }
    };
    TreeView2.prototype.toggleSelect = function(li, e, multiSelect) {
      if (!li.classList.contains("e-disable")) {
        if (this.allowMultiSelection && (e && e.ctrlKey || multiSelect) && this.isActive(li)) {
          this.unselectNode(li, e);
        } else {
          this.selectNode(li, e, multiSelect);
        }
      }
    };
    TreeView2.prototype.isActive = function(li) {
      return li.classList.contains(ACTIVE$3) ? true : false;
    };
    TreeView2.prototype.selectNode = function(li, e, multiSelect) {
      var _this = this;
      if (isNullOrUndefined(li) || !this.allowMultiSelection && this.isActive(li) && !isNullOrUndefined(e)) {
        this.setFocusElement(li);
        return;
      }
      var eventArgs;
      if (this.isLoaded) {
        eventArgs = this.getSelectEvent(li, "select", e);
        this.trigger("nodeSelecting", eventArgs, function(observedArgs) {
          if (!observedArgs.cancel && !observedArgs.node.classList.contains(PREVENTSELECT)) {
            _this.nodeSelectAction(li, e, observedArgs, multiSelect);
          }
        });
      } else {
        this.nodeSelectAction(li, e, eventArgs, multiSelect);
      }
    };
    TreeView2.prototype.nodeSelectAction = function(li, e, eventArgs, multiSelect) {
      if (!this.allowMultiSelection || !multiSelect && (!e || e && !e.ctrlKey)) {
        this.removeSelectAll();
      }
      if (this.allowMultiSelection && e && e.shiftKey) {
        if (!this.startNode) {
          this.startNode = li;
        }
        var startIndex = this.liList.indexOf(this.startNode);
        var endIndex = this.liList.indexOf(li);
        if (startIndex > endIndex) {
          var temp = startIndex;
          startIndex = endIndex;
          endIndex = temp;
        }
        for (var i = startIndex; i <= endIndex; i++) {
          var currNode = this.liList[i];
          if (isVisible(currNode) && !currNode.classList.contains("e-disable")) {
            this.addSelect(currNode);
          }
        }
      } else {
        this.startNode = li;
        this.addSelect(li);
      }
      if (this.isLoaded) {
        eventArgs.nodeData = this.getNodeData(li);
        this.trigger("nodeSelected", eventArgs);
        this.isRightClick = false;
      }
      this.isRightClick = false;
    };
    TreeView2.prototype.unselectNode = function(li, e) {
      var _this = this;
      var eventArgs;
      if (this.isLoaded) {
        eventArgs = this.getSelectEvent(li, "un-select", e);
        this.trigger("nodeSelecting", eventArgs, function(observedArgs) {
          if (!observedArgs.cancel) {
            _this.nodeUnselectAction(li, observedArgs);
          }
        });
      } else {
        this.nodeUnselectAction(li, eventArgs);
      }
    };
    TreeView2.prototype.nodeUnselectAction = function(li, eventArgs) {
      this.removeSelect(li);
      this.setFocusElement(li);
      if (this.isLoaded) {
        eventArgs.nodeData = this.getNodeData(li);
        this.trigger("nodeSelected", eventArgs);
      }
    };
    TreeView2.prototype.setFocusElement = function(li) {
      if (!isNullOrUndefined(li)) {
        var focusedNode = this.getFocusedNode();
        if (focusedNode) {
          removeClass([focusedNode], FOCUS$3);
          focusedNode.setAttribute("tabindex", "-1");
        }
        addClass([li], FOCUS$3);
        li.setAttribute("tabindex", "0");
        EventHandler.add(li, "blur", this.focusOut, this);
        this.updateIdAttr(focusedNode, li);
      }
    };
    TreeView2.prototype.addSelect = function(liEle) {
      liEle.setAttribute("aria-selected", "true");
      addClass([liEle], ACTIVE$3);
      var id = liEle.getAttribute("data-uid");
      if (!isNullOrUndefined(id) && this.selectedNodes.indexOf(id) === -1) {
        this.selectedNodes.push(id);
      }
    };
    TreeView2.prototype.removeSelect = function(liEle) {
      if (this.allowMultiSelection) {
        liEle.setAttribute("aria-selected", "false");
      } else {
        liEle.removeAttribute("aria-selected");
      }
      removeClass([liEle], ACTIVE$3);
      var index = this.selectedNodes.indexOf(liEle.getAttribute("data-uid"));
      if (index > -1) {
        this.selectedNodes.splice(index, 1);
      }
    };
    TreeView2.prototype.removeSelectAll = function() {
      var selectedLI = this.element.querySelectorAll("." + ACTIVE$3);
      for (var _i = 0, selectedLI_1 = selectedLI; _i < selectedLI_1.length; _i++) {
        var ele = selectedLI_1[_i];
        if (this.allowMultiSelection) {
          ele.setAttribute("aria-selected", "false");
        } else {
          ele.removeAttribute("aria-selected");
        }
      }
      removeClass(selectedLI, ACTIVE$3);
      this.setProperties({ selectedNodes: [] }, true);
    };
    TreeView2.prototype.getSelectEvent = function(currLi, action, e) {
      var nodeData = this.getNodeData(currLi);
      return { action, cancel: false, isInteracted: isNullOrUndefined(e) ? false : true, node: currLi, nodeData };
    };
    TreeView2.prototype.setExpandOnType = function() {
      this.expandOnType = this.expandOn === "Auto" ? Browser.isDevice ? "Click" : "DblClick" : this.expandOn;
    };
    TreeView2.prototype.expandHandler = function(e) {
      var target = e.originalEvent.target;
      if (!target || target.classList.contains(INPUT) || target.classList.contains(ROOT$6) || target.classList.contains(PARENTITEM) || target.classList.contains(LISTITEM) || target.classList.contains(ICON$3) || this.showCheckBox && closest(target, "." + CHECKBOXWRAP$1)) {
        return;
      } else {
        this.expandCollapseAction(closest(target, "." + LISTITEM), e);
      }
    };
    TreeView2.prototype.expandCollapseAction = function(currLi, e) {
      var icon = select$1("div." + ICON$3, currLi);
      if (!icon || icon.classList.contains(PROCESS)) {
        return;
      } else {
        var classList2 = icon.classList;
        if (classList2.contains(EXPANDABLE)) {
          this.expandAction(currLi, icon, e);
        } else if (classList2.contains(COLLAPSIBLE)) {
          this.collapseNode(currLi, icon, e);
        }
      }
    };
    TreeView2.prototype.expandAction = function(currLi, icon, e, expandChild, callback) {
      var _this = this;
      if (icon.classList.contains(PROCESS)) {
        return;
      } else {
        addClass([icon], PROCESS);
      }
      if (this.isLoaded && !this.isRefreshed) {
        this.expandArgs = this.getExpandEvent(currLi, e);
        this.isInteracted = this.expandArgs.isInteracted;
        this.trigger("nodeExpanding", this.expandArgs, function(observedArgs) {
          if (observedArgs.cancel) {
            removeClass([icon], PROCESS);
          } else {
            _this.nodeExpandAction(currLi, icon, expandChild, callback);
          }
        });
      } else {
        this.nodeExpandAction(currLi, icon, expandChild, callback);
      }
    };
    TreeView2.prototype.nodeExpandAction = function(currLi, icon, expandChild, callback) {
      var ul = select$1("." + PARENTITEM, currLi);
      if (ul && ul.nodeName === "UL") {
        this.expandNode(currLi, icon);
      } else {
        this.isFirstRender = true;
        this.renderChildNodes(currLi, expandChild, callback);
        var liEles = selectAll("." + LISTITEM, currLi);
        for (var i = 0; i < liEles.length; i++) {
          var id = this.getId(liEles[i]);
          if (this.expandChildren.indexOf(id) !== -1 && this.expandChildren !== void 0) {
            var icon_1 = select$1("." + EXPANDABLE, select$1("." + TEXTWRAP, liEles[i]));
            if (!isNullOrUndefined(icon_1)) {
              this.expandAction(liEles[i], icon_1, null);
            }
            this.expandChildren.splice(this.expandChildren.indexOf(id), 1);
          }
        }
      }
    };
    TreeView2.prototype.keyActionHandler = function(e) {
      var _this = this;
      var target = e.target;
      var focusedNode = this.getFocusedNode();
      if (target && target.classList.contains(INPUT)) {
        var inpEle = target;
        if (e.action === "enter") {
          inpEle.blur();
        } else if (e.action === "escape") {
          inpEle.value = this.oldText;
          inpEle.blur();
        }
        return;
      }
      e.preventDefault();
      var eventArgs = {
        cancel: false,
        event: e,
        node: focusedNode
      };
      this.trigger("keyPress", eventArgs, function(observedArgs) {
        if (!observedArgs.cancel) {
          switch (e.action) {
            case "space":
              if (_this.showCheckBox) {
                _this.checkNode(e);
              } else {
                _this.toggleSelect(focusedNode, e);
              }
              break;
            case "moveRight":
              _this.openNode(_this.enableRtl ? false : true, e);
              break;
            case "moveLeft":
              _this.openNode(_this.enableRtl ? true : false, e);
              break;
            case "shiftDown":
              _this.shiftKeySelect(true, e);
              break;
            case "moveDown":
            case "ctrlDown":
            case "csDown":
              _this.navigateNode(true);
              break;
            case "shiftUp":
              _this.shiftKeySelect(false, e);
              break;
            case "moveUp":
            case "ctrlUp":
            case "csUp":
              _this.navigateNode(false);
              break;
            case "home":
            case "shiftHome":
            case "ctrlHome":
            case "csHome":
              _this.navigateRootNode(true);
              break;
            case "end":
            case "shiftEnd":
            case "ctrlEnd":
            case "csEnd":
              _this.navigateRootNode(false);
              break;
            case "enter":
            case "ctrlEnter":
            case "shiftEnter":
            case "csEnter":
            case "shiftSpace":
            case "ctrlSpace":
              _this.toggleSelect(focusedNode, e);
              break;
            case "f2":
              if (_this.allowEditing && !focusedNode.classList.contains("e-disable")) {
                _this.createTextbox(focusedNode, e);
              }
              break;
            case "ctrlA":
              if (_this.allowMultiSelection) {
                var sNodes = selectAll("." + LISTITEM + ":not(." + ACTIVE$3 + ")", _this.element);
                _this.selectGivenNodes(sNodes);
              }
              break;
          }
        }
      });
    };
    TreeView2.prototype.navigateToFocus = function(isUp) {
      var focusNode = this.getFocusedNode().querySelector("." + TEXTWRAP);
      var pos = focusNode.getBoundingClientRect();
      var parent = this.getScrollParent(this.element);
      if (!isNullOrUndefined(parent)) {
        var parentPos = parent.getBoundingClientRect();
        if (pos.bottom > parentPos.bottom) {
          parent.scrollTop += pos.bottom - parentPos.bottom;
        } else if (pos.top < parentPos.top) {
          parent.scrollTop -= parentPos.top - pos.top;
        }
      }
      var isVisible2 = this.isVisibleInViewport(focusNode);
      if (!isVisible2) {
        focusNode.scrollIntoView(isUp);
      }
    };
    TreeView2.prototype.isVisibleInViewport = function(txtWrap) {
      var pos = txtWrap.getBoundingClientRect();
      return pos.top >= 0 && pos.left >= 0 && pos.bottom <= (window.innerHeight || document.documentElement.clientHeight) && pos.right <= (window.innerWidth || document.documentElement.clientWidth);
    };
    TreeView2.prototype.getScrollParent = function(node) {
      if (isNullOrUndefined(node)) {
        return null;
      }
      return node.scrollHeight > node.clientHeight ? node : this.getScrollParent(node.parentElement);
    };
    TreeView2.prototype.shiftKeySelect = function(isTowards, e) {
      if (this.allowMultiSelection) {
        var focusedNode = this.getFocusedNode();
        var nextNode = isTowards ? this.getNextNode(focusedNode) : this.getPrevNode(focusedNode);
        this.removeHover();
        this.setFocusElement(nextNode);
        this.toggleSelect(nextNode, e, false);
        this.navigateToFocus(!isTowards);
      } else {
        this.navigateNode(isTowards);
      }
    };
    TreeView2.prototype.checkNode = function(e) {
      var focusedNode = this.getFocusedNode();
      var checkWrap = select$1("." + CHECKBOXWRAP$1, focusedNode);
      var isChecked = select$1(" ." + CHECKBOXFRAME$1, checkWrap).classList.contains(CHECK$1);
      if (!focusedNode.classList.contains("e-disable")) {
        if (focusedNode.getElementsByClassName("e-checkbox-disabled").length == 0) {
          this.validateCheckNode(checkWrap, isChecked, focusedNode, e);
        }
      }
    };
    TreeView2.prototype.validateCheckNode = function(checkWrap, isCheck, li, e) {
      var _this = this;
      var currLi = closest(checkWrap, "." + LISTITEM);
      this.checkActionNodes = [];
      var ariaState = !isCheck ? "true" : "false";
      if (!isNullOrUndefined(ariaState)) {
        checkWrap.setAttribute("aria-checked", ariaState);
      }
      var eventArgs = this.getCheckEvent(currLi, isCheck ? "uncheck" : "check", e);
      this.trigger("nodeChecking", eventArgs, function(observedArgs) {
        if (!observedArgs.cancel) {
          _this.nodeCheckingAction(checkWrap, isCheck, li, observedArgs, e);
        }
      });
    };
    TreeView2.prototype.nodeCheckingAction = function(checkWrap, isCheck, li, eventArgs, e) {
      if (this.checkedElement.indexOf(li.getAttribute("data-uid")) === -1) {
        this.checkedElement.push(li.getAttribute("data-uid"));
        if (this.autoCheck) {
          var child = this.getChildNodes(this.treeData, li.getAttribute("data-uid"));
          child !== null ? this.allCheckNode(child, this.checkedElement, null, null, false) : child = null;
        }
      }
      this.changeState(checkWrap, isCheck ? "uncheck" : "check", e, true);
      if (this.autoCheck) {
        this.ensureChildCheckState(li);
        this.ensureParentCheckState(closest(closest(li, "." + PARENTITEM), "." + LISTITEM));
        var doCheck = void 0;
        if (eventArgs.action === "check") {
          doCheck = true;
        } else if (eventArgs.action === "uncheck") {
          doCheck = false;
        }
        this.ensureStateChange(li, doCheck);
      }
      this.nodeCheckedEvent(checkWrap, isCheck, e);
    };
    TreeView2.prototype.ensureStateChange = function(li, doCheck) {
      var childElement = select$1("." + PARENTITEM, li);
      var parentIndex = li.getAttribute("data-uid");
      var mapper2 = this.fields;
      if (this.dataType === 1 && this.autoCheck) {
        var resultData = new DataManager(this.treeData).executeLocal(new Query().where(mapper2.parentID, "equal", parentIndex, true));
        for (var i = 0; i < resultData.length; i++) {
          var resultId = resultData[i][this.fields.id] ? resultData[i][this.fields.id].toString() : null;
          var isCheck = resultData[i][this.fields.isChecked] ? resultData[i][this.fields.isChecked].toString() : null;
          if (this.checkedNodes.indexOf(parentIndex) !== -1 && this.checkedNodes.indexOf(resultId) === -1) {
            this.checkedNodes.push(resultId);
            var childItems = this.getChildNodes(this.treeData, resultId);
            this.getChildItems(childItems, doCheck);
            if (this.parentNodeCheck.indexOf(resultId) !== -1) {
              this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(resultId), 1);
            }
          } else if (this.checkedNodes.indexOf(parentIndex) === -1 && childElement === null && this.checkedNodes.indexOf(resultId) !== -1) {
            this.checkedNodes.splice(this.checkedNodes.indexOf(resultId), 1);
            if (isCheck === "true") {
              this.updateField(this.treeData, this.fields, resultId, "isChecked", null);
            }
            if (this.checkedNodes.indexOf(parentIndex) === -1 && childElement === null || this.parentNodeCheck.indexOf(resultId) !== -1) {
              var childNodes = this.getChildNodes(this.treeData, resultId);
              this.getChildItems(childNodes, doCheck);
              if (this.parentNodeCheck.indexOf(resultId) !== -1) {
                this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(resultId), 1);
              }
            }
          } else {
            var childItems = this.getChildNodes(this.treeData, resultId);
            this.getChildItems(childItems, doCheck);
          }
        }
      } else if (this.dataType === 1 && !this.autoCheck) {
        if (!doCheck) {
          var checkedData = new DataManager(this.treeData).executeLocal(new Query().where(mapper2.isChecked, "equal", true, false));
          for (var i = 0; i < checkedData.length; i++) {
            var id = checkedData[i][this.fields.id] ? checkedData[i][this.fields.id].toString() : null;
            if (this.checkedNodes.indexOf(id) !== -1) {
              this.checkedNodes.splice(this.checkedNodes.indexOf(id), 1);
            }
            this.updateField(this.treeData, this.fields, id, "isChecked", null);
          }
          this.checkedNodes = [];
        } else {
          for (var i = 0; i < this.treeData.length; i++) {
            var checkedId = this.treeData[i][this.fields.id] ? this.treeData[i][this.fields.id].toString() : null;
            if (this.checkedNodes.indexOf(checkedId) === -1) {
              this.checkedNodes.push(checkedId);
            }
          }
        }
      } else {
        var childItems = this.getChildNodes(this.treeData, parentIndex);
        if (childItems) {
          this.childStateChange(childItems, parentIndex, childElement, doCheck);
        }
      }
    };
    TreeView2.prototype.getChildItems = function(childItems, doCheck) {
      for (var i = 0; i < childItems.length; i++) {
        var childId = childItems[i][this.fields.id] ? childItems[i][this.fields.id].toString() : null;
        var childIsCheck = childItems[i][this.fields.isChecked] ? childItems[i][this.fields.isChecked].toString() : null;
        if (this.checkedNodes.indexOf(childId) !== -1 && !doCheck) {
          this.checkedNodes.splice(this.checkedNodes.indexOf(childId), 1);
        }
        if (this.checkedNodes.indexOf(childId) === -1 && doCheck) {
          this.checkedNodes.push(childId);
        }
        if (childIsCheck === "true" && !doCheck) {
          this.updateField(this.treeData, this.fields, childId, "isChecked", null);
        }
        var subChildItems = this.getChildNodes(this.treeData, childId);
        if (subChildItems.length > 0) {
          this.getChildItems(subChildItems, doCheck);
        }
      }
    };
    TreeView2.prototype.childStateChange = function(childItems, parent, childElement, doCheck) {
      for (var i = 0; i < childItems.length; i++) {
        var checkedChild = childItems[i][this.fields.id] ? childItems[i][this.fields.id].toString() : "";
        var isCheck = childItems[i][this.fields.isChecked] ? childItems[i][this.fields.isChecked].toString() : null;
        if (this.autoCheck) {
          if (this.checkedNodes.indexOf(parent) !== -1 && this.checkedNodes.indexOf(checkedChild) === -1) {
            this.checkedNodes.push(checkedChild);
            if (this.parentNodeCheck.indexOf(checkedChild) !== -1) {
              this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(checkedChild), 1);
            }
          } else if (this.checkedNodes.indexOf(parent) === -1 && this.checkedNodes.indexOf(checkedChild) !== -1 && !doCheck) {
            this.checkedNodes.splice(this.checkedNodes.indexOf(checkedChild), 1);
            if (isCheck === "true") {
              this.updateField(this.treeData, this.fields, checkedChild, "isChecked", null);
            }
          }
        } else if (!this.autoCheck) {
          if (!doCheck) {
            if (this.checkedNodes.indexOf(checkedChild) !== -1) {
              this.checkedNodes.splice(this.checkedNodes.indexOf(checkedChild), 1);
            }
            this.updateField(this.treeData, this.fields, checkedChild, "isChecked", null);
            this.checkedNodes = [];
          } else {
            if (this.checkedNodes.indexOf(checkedChild) === -1) {
              this.checkedNodes.push(checkedChild);
            }
          }
        }
        var subChild = this.getChildNodes([childItems[i]], checkedChild);
        if (subChild) {
          this.childStateChange(subChild, parent, childElement, doCheck);
        }
      }
    };
    TreeView2.prototype.allCheckNode = function(child, newCheck, checked, childCheck, validateCheck) {
      if (child) {
        for (var length_1 = 0; length_1 < child.length; length_1++) {
          var childId = getValue(this.fields.id, child[length_1]);
          var check = this.element.querySelector('[data-uid="' + childId + '"]');
          if (validateCheck !== false && this.checkedElement.indexOf(childId.toString()) === -1) {
            if (check === null && !isNullOrUndefined(child[length_1][this.fields.isChecked]) && newCheck.indexOf(childId.toString()) === -1 || childCheck === 0 || checked === 2) {
              child[length_1][this.fields.isChecked] !== false || checked === 2 ? newCheck.push(childId.toString()) : childCheck = null;
              childCheck = child[length_1][this.fields.isChecked] !== false || checked === 2 ? 0 : null;
            }
          }
          if (newCheck.indexOf(childId.toString()) === -1 && isNullOrUndefined(checked)) {
            newCheck.push(childId.toString());
          }
          var hierChildId = getValue(this.fields.child.toString(), child[length_1]);
          if (getValue(this.fields.hasChildren, child[length_1]) === true || hierChildId) {
            var id = getValue(this.fields.id, child[length_1]);
            var childId_1 = void 0;
            if (this.dataType === 1) {
              childId_1 = this.getChildNodes(this.treeData, id.toString());
            } else {
              childId_1 = hierChildId;
            }
            if (childId_1) {
              isNullOrUndefined(validateCheck) ? this.allCheckNode(childId_1, newCheck, checked, childCheck) : this.allCheckNode(childId_1, newCheck, checked, childCheck, validateCheck);
              childCheck = null;
            }
          }
          childCheck = null;
        }
      }
    };
    TreeView2.prototype.openNode = function(toBeOpened, e) {
      var focusedNode = this.getFocusedNode();
      var icon = select$1("div." + ICON$3, focusedNode);
      if (toBeOpened) {
        if (!icon) {
          return;
        } else if (icon.classList.contains(EXPANDABLE)) {
          this.expandAction(focusedNode, icon, e);
        } else {
          this.focusNextNode(focusedNode, true);
        }
      } else {
        if (icon && icon.classList.contains(COLLAPSIBLE)) {
          this.collapseNode(focusedNode, icon, e);
        } else {
          var parentLi = closest(closest(focusedNode, "." + PARENTITEM), "." + LISTITEM);
          if (!parentLi) {
            return;
          } else {
            if (!parentLi.classList.contains("e-disable")) {
              this.setFocus(focusedNode, parentLi);
              this.navigateToFocus(true);
            }
          }
        }
      }
    };
    TreeView2.prototype.navigateNode = function(isTowards) {
      var focusedNode = this.getFocusedNode();
      this.focusNextNode(focusedNode, isTowards);
    };
    TreeView2.prototype.navigateRootNode = function(isBackwards) {
      var focusedNode = this.getFocusedNode();
      var rootNode = isBackwards ? this.getRootNode() : this.getEndNode();
      if (!rootNode.classList.contains("e-disable")) {
        this.setFocus(focusedNode, rootNode);
        this.navigateToFocus(isBackwards);
      }
    };
    TreeView2.prototype.getFocusedNode = function() {
      var selectedItem;
      var fNode = select$1("." + LISTITEM + '[tabindex="0"]', this.element);
      if (isNullOrUndefined(fNode)) {
        selectedItem = select$1("." + LISTITEM, this.element);
      }
      return isNullOrUndefined(fNode) ? isNullOrUndefined(selectedItem) ? this.element.firstElementChild : selectedItem : fNode;
    };
    TreeView2.prototype.focusNextNode = function(li, isTowards) {
      var nextNode = isTowards ? this.getNextNode(li) : this.getPrevNode(li);
      this.setFocus(li, nextNode);
      this.navigateToFocus(!isTowards);
      if (nextNode.classList.contains("e-disable")) {
        var lastChild = nextNode.lastChild;
        if (nextNode.previousSibling == null && nextNode.classList.contains("e-level-1")) {
          this.focusNextNode(nextNode, true);
        } else if (nextNode.nextSibling == null && nextNode.classList.contains("e-node-collapsed")) {
          this.focusNextNode(nextNode, false);
        } else if (nextNode.nextSibling == null && lastChild.classList.contains(TEXTWRAP)) {
          this.focusNextNode(nextNode, false);
        } else {
          this.focusNextNode(nextNode, isTowards);
        }
      }
    };
    TreeView2.prototype.getNextNode = function(li) {
      var index = this.liList.indexOf(li);
      var nextNode;
      do {
        index++;
        nextNode = this.liList[index];
        if (isNullOrUndefined(nextNode)) {
          return li;
        }
      } while (!isVisible(nextNode));
      return nextNode;
    };
    TreeView2.prototype.getPrevNode = function(li) {
      var index = this.liList.indexOf(li);
      var prevNode;
      do {
        index--;
        prevNode = this.liList[index];
        if (isNullOrUndefined(prevNode)) {
          return li;
        }
      } while (!isVisible(prevNode));
      return prevNode;
    };
    TreeView2.prototype.getRootNode = function() {
      var index = 0;
      var rootNode;
      do {
        rootNode = this.liList[index];
        index++;
      } while (!isVisible(rootNode));
      return rootNode;
    };
    TreeView2.prototype.getEndNode = function() {
      var index = this.liList.length - 1;
      var endNode;
      do {
        endNode = this.liList[index];
        index--;
      } while (!isVisible(endNode));
      return endNode;
    };
    TreeView2.prototype.setFocus = function(preNode, nextNode) {
      removeClass([preNode], [HOVER$2, FOCUS$3]);
      preNode.setAttribute("tabindex", "-1");
      if (!nextNode.classList.contains("e-disable") && !nextNode.classList.contains(PREVENTSELECT)) {
        addClass([nextNode], [HOVER$2, FOCUS$3]);
        nextNode.setAttribute("tabindex", "0");
        nextNode.focus();
        EventHandler.add(nextNode, "blur", this.focusOut, this);
        this.updateIdAttr(preNode, nextNode);
      }
    };
    TreeView2.prototype.updateIdAttr = function(preNode, nextNode) {
      this.element.removeAttribute("aria-activedescendant");
      if (preNode) {
        preNode.removeAttribute("id");
      }
      nextNode.setAttribute("id", this.element.id + "_active");
      this.element.setAttribute("aria-activedescendant", this.element.id + "_active");
    };
    TreeView2.prototype.focusIn = function() {
      if (!this.mouseDownStatus) {
        var focusedElement = this.getFocusedNode();
        focusedElement.setAttribute("tabindex", "0");
        addClass([focusedElement], [HOVER$2, FOCUS$3]);
        EventHandler.add(focusedElement, "blur", this.focusOut, this);
      }
      this.mouseDownStatus = false;
    };
    TreeView2.prototype.focusOut = function(event) {
      var focusedElement = this.getFocusedNode();
      if (event.target == focusedElement) {
        removeClass([focusedElement], [HOVER$2, FOCUS$3]);
        EventHandler.remove(focusedElement, "blur", this.focusOut);
      }
    };
    TreeView2.prototype.onMouseOver = function(e) {
      var target = e.target;
      var classList2 = target.classList;
      var currentLi = closest(target, "." + LISTITEM);
      if (!currentLi || classList2.contains(PARENTITEM) || classList2.contains(LISTITEM)) {
        this.removeHover();
        return;
      } else {
        if (currentLi && !currentLi.classList.contains("e-disable")) {
          this.setHover(currentLi);
        }
      }
    };
    TreeView2.prototype.setHover = function(li) {
      if (!li.classList.contains(HOVER$2) && !li.classList.contains(PREVENTSELECT)) {
        this.removeHover();
        addClass([li], HOVER$2);
      }
    };
    TreeView2.prototype.onMouseLeave = function(e) {
      this.removeHover();
    };
    TreeView2.prototype.removeHover = function() {
      var hoveredNode = selectAll("." + HOVER$2, this.element);
      if (hoveredNode && hoveredNode.length) {
        removeClass(hoveredNode, HOVER$2);
      }
    };
    TreeView2.prototype.getNodeData = function(currLi, fromDS) {
      if (!isNullOrUndefined(currLi) && currLi.classList.contains(LISTITEM) && !isNullOrUndefined(closest(currLi, "." + CONTROL$3)) && closest(currLi, "." + CONTROL$3).classList.contains(ROOT$6)) {
        var id = currLi.getAttribute("data-uid");
        var text = this.getText(currLi, fromDS);
        var pNode = closest(currLi.parentNode, "." + LISTITEM);
        var pid = pNode ? pNode.getAttribute("data-uid") : null;
        var selected = currLi.classList.contains(ACTIVE$3);
        var selectable = currLi.classList.contains(PREVENTSELECT) ? false : true;
        var expanded = currLi.getAttribute("aria-expanded") === "true" ? true : false;
        var hasChildren = currLi.getAttribute("aria-expanded") !== null ? true : (select$1("." + EXPANDABLE, currLi) || select$1("." + COLLAPSIBLE, currLi)) != null ? true : false;
        var checked = null;
        var checkboxElement = select$1("." + CHECKBOXWRAP$1, currLi);
        if (this.showCheckBox && checkboxElement) {
          checked = checkboxElement.getAttribute("aria-checked");
        }
        return {
          id,
          text,
          parentID: pid,
          selected,
          selectable,
          expanded,
          isChecked: checked,
          hasChildren
        };
      }
      return { id: "", text: "", parentID: "", selected: false, expanded: false, isChecked: "", hasChildren: false };
    };
    TreeView2.prototype.getText = function(currLi, fromDS) {
      if (fromDS) {
        var nodeData = this.getNodeObject(currLi.getAttribute("data-uid"));
        var level = parseFloat(currLi.getAttribute("aria-level"));
        var nodeFields = this.getFields(this.fields, level, 1);
        return getValue(nodeFields.text, nodeData);
      }
      return select$1("." + LISTTEXT, currLi).textContent;
    };
    TreeView2.prototype.getExpandEvent = function(currLi, e) {
      var nodeData = this.getNodeData(currLi);
      return { cancel: false, isInteracted: isNullOrUndefined(e) ? false : true, node: currLi, nodeData, event: e };
    };
    TreeView2.prototype.renderNodeTemplate = function(data, textEle, dataId) {
      var tempArr = this.nodeTemplateFn(data, this, "nodeTemplate" + dataId, this.element.id + "nodeTemplate", this.isStringTemplate, void 0, textEle, this.root);
      if (tempArr) {
        tempArr = Array.prototype.slice.call(tempArr);
        append2(tempArr, textEle);
      }
    };
    TreeView2.prototype.destroyTemplate = function(liEle) {
      this.clearTemplate(["nodeTemplate" + liEle.getAttribute("data-uid")]);
    };
    TreeView2.prototype.reRenderNodes = function() {
      this.updateListProp(this.fields);
      if (Browser.isIE) {
        this.ulElement = this.element.querySelector(".e-list-parent.e-ul");
        this.ulElement.parentElement.removeChild(this.ulElement);
      } else {
        this.element.innerHTML = "";
      }
      if (!isNullOrUndefined(this.nodeTemplateFn)) {
        this.clearTemplate();
      }
      this.setTouchClass();
      this.setProperties({ selectedNodes: [], checkedNodes: [], expandedNodes: [] }, true);
      this.checkedElement = [];
      this.isLoaded = false;
      this.setDataBinding(true);
    };
    TreeView2.prototype.setCssClass = function(oldClass, newClass) {
      if (!isNullOrUndefined(oldClass) && oldClass !== "") {
        removeClass([this.element], oldClass.split(" "));
      }
      if (!isNullOrUndefined(newClass) && newClass !== "") {
        addClass([this.element], newClass.split(" "));
      }
    };
    TreeView2.prototype.editingHandler = function(e) {
      var target = e.target;
      if (!target || target.classList.contains(ROOT$6) || target.classList.contains(PARENTITEM) || target.classList.contains(LISTITEM) || target.classList.contains(ICON$3) || target.classList.contains(INPUT) || target.classList.contains(INPUTGROUP)) {
        return;
      } else {
        var liEle = closest(target, "." + LISTITEM);
        this.createTextbox(liEle, e);
      }
    };
    TreeView2.prototype.createTextbox = function(liEle, e) {
      var _this = this;
      var oldInpEle = select$1("." + TREEINPUT, this.element);
      if (oldInpEle) {
        oldInpEle.blur();
      }
      var textEle = select$1("." + LISTTEXT, liEle);
      this.updateOldText(liEle);
      var innerEle = this.createElement("input", { className: TREEINPUT, attrs: { value: this.oldText } });
      var eventArgs = this.getEditEvent(liEle, null, innerEle.outerHTML);
      this.trigger("nodeEditing", eventArgs, function(observedArgs) {
        if (!observedArgs.cancel) {
          var inpWidth = textEle.offsetWidth + 5;
          var style_1 = "width:" + inpWidth + "px";
          addClass([liEle], EDITING);
          if (!isNullOrUndefined(_this.nodeTemplateFn)) {
            _this.destroyTemplate(liEle);
          }
          if (_this.isReact) {
            setTimeout(function() {
              _this.renderTextBox(eventArgs, textEle, style_1);
            }, 5);
          } else {
            _this.renderTextBox(eventArgs, textEle, style_1);
          }
        }
      });
    };
    TreeView2.prototype.renderTextBox = function(eventArgs, textEle, style) {
      textEle.innerHTML = eventArgs.innerHtml;
      var inpEle = select$1("." + TREEINPUT, textEle);
      this.inputObj = Input.createInput({
        element: inpEle,
        properties: {
          enableRtl: this.enableRtl
        }
      }, this.createElement);
      this.inputObj.container.setAttribute("style", style);
      inpEle.focus();
      var inputEle = inpEle;
      inputEle.setSelectionRange(0, inputEle.value.length);
      this.wireInputEvents(inpEle);
    };
    TreeView2.prototype.updateOldText = function(liEle) {
      var id = liEle.getAttribute("data-uid");
      this.editData = this.getNodeObject(id);
      var level = parseFloat(liEle.getAttribute("aria-level"));
      this.editFields = this.getFields(this.fields, level, 1);
      this.oldText = getValue(this.editFields.text, this.editData);
    };
    TreeView2.prototype.inputFocusOut = function(e) {
      if (!select$1("." + TREEINPUT, this.element)) {
        return;
      }
      var target = e.target;
      var newText = target.value;
      var txtEle = closest(target, "." + LISTTEXT);
      var liEle = closest(target, "." + LISTITEM);
      detach(this.inputObj.container);
      if (this.fields.dataSource instanceof DataManager && !this.isOffline) {
        this.crudOperation("update", null, liEle, newText, null, null, true);
      } else {
        this.appendNewText(liEle, txtEle, newText, true);
      }
    };
    TreeView2.prototype.appendNewText = function(liEle, txtEle, newText, isInput) {
      var _this = this;
      var eventArgs = this.getEditEvent(liEle, newText, null);
      this.trigger("nodeEdited", eventArgs, function(observedArgs) {
        newText = observedArgs.cancel ? observedArgs.oldText : observedArgs.newText;
        _this.updateText(liEle, txtEle, newText, isInput);
        if (observedArgs.oldText !== newText) {
          _this.triggerEvent("nodeEdited", [_this.getNode(liEle)]);
        }
      });
    };
    TreeView2.prototype.updateText = function(liEle, txtEle, newText, isInput) {
      var newData = setValue(this.editFields.text, newText, this.editData);
      if (!isNullOrUndefined(this.nodeTemplateFn)) {
        txtEle.innerText = "";
        var dataId = liEle.getAttribute("data-uid");
        this.renderNodeTemplate(newData, txtEle, dataId);
        this.renderReactTemplates();
      } else {
        this.enableHtmlSanitizer ? txtEle.innerText = newText : txtEle.innerHTML = newText;
      }
      if (isInput) {
        removeClass([liEle], EDITING);
        liEle.focus();
        EventHandler.add(liEle, "blur", this.focusOut, this);
        addClass([liEle], HOVER$2);
      }
      if (this.allowTextWrap) {
        this.calculateWrap(liEle);
      }
    };
    TreeView2.prototype.getElement = function(ele) {
      if (isNullOrUndefined(ele)) {
        return null;
      } else if (typeof ele === "string") {
        return this.element.querySelector('[data-uid="' + ele + '"]');
      } else if (typeof ele === "object") {
        return getElement(ele);
      } else {
        return null;
      }
    };
    TreeView2.prototype.getId = function(ele) {
      if (isNullOrUndefined(ele)) {
        return null;
      } else if (typeof ele === "string") {
        return ele;
      } else if (typeof ele === "object") {
        return getElement(ele).getAttribute("data-uid");
      } else {
        return null;
      }
    };
    TreeView2.prototype.getEditEvent = function(liEle, newText, inpEle) {
      var data = this.getNodeData(liEle);
      return { cancel: false, newText, node: liEle, nodeData: data, oldText: this.oldText, innerHtml: inpEle };
    };
    TreeView2.prototype.getNodeObject = function(id) {
      var childNodes;
      if (isNullOrUndefined(id)) {
        return childNodes;
      } else if (this.dataType === 1) {
        for (var i = 0, objlen = this.treeData.length; i < objlen; i++) {
          var dataId = getValue(this.fields.id, this.treeData[i]);
          if (!isNullOrUndefined(this.treeData[i]) && !isNullOrUndefined(dataId) && dataId.toString() === id) {
            return this.treeData[i];
          }
        }
      } else {
        return this.getChildNodeObject(this.treeData, this.fields, id);
      }
      return childNodes;
    };
    TreeView2.prototype.getChildNodeObject = function(obj, mapper2, id) {
      var newList;
      if (isNullOrUndefined(obj)) {
        return newList;
      }
      for (var i = 0, objlen = obj.length; i < objlen; i++) {
        var dataId = getValue(mapper2.id, obj[i]);
        if (obj[i] && dataId && dataId.toString() === id) {
          return obj[i];
        } else if (typeof mapper2.child === "string" && !isNullOrUndefined(getValue(mapper2.child, obj[i]))) {
          var childData = getValue(mapper2.child, obj[i]);
          newList = this.getChildNodeObject(childData, this.getChildMapper(mapper2), id);
          if (newList !== void 0) {
            break;
          }
        } else if (this.fields.dataSource instanceof DataManager && !isNullOrUndefined(getValue("child", obj[i]))) {
          var child = "child";
          newList = this.getChildNodeObject(getValue(child, obj[i]), this.getChildMapper(mapper2), id);
          if (newList !== void 0) {
            break;
          }
        }
      }
      return newList;
    };
    TreeView2.prototype.setDragAndDrop = function(toBind) {
      if (toBind && !this.disabled) {
        this.initializeDrag();
      } else {
        this.destroyDrag();
      }
    };
    TreeView2.prototype.initializeDrag = function() {
      var _this = this;
      var virtualEle;
      var proxy2 = this;
      this.dragObj = new Draggable(this.element, {
        enableTailMode: true,
        enableAutoScroll: true,
        dragArea: this.dragArea,
        dragTarget: "." + TEXTWRAP,
        helper: function(e) {
          _this.dragTarget = e.sender.target;
          var dragRoot = closest(_this.dragTarget, "." + ROOT$6);
          var dragWrap = closest(_this.dragTarget, "." + TEXTWRAP);
          _this.dragLi = closest(_this.dragTarget, "." + LISTITEM);
          if (_this.fullRowSelect && !dragWrap && _this.dragTarget.classList.contains(FULLROW)) {
            dragWrap = _this.dragTarget.nextElementSibling;
          }
          if (!_this.dragTarget || !e.element.isSameNode(dragRoot) || !dragWrap || _this.dragTarget.classList.contains(ROOT$6) || _this.dragTarget.classList.contains(PARENTITEM) || _this.dragTarget.classList.contains(LISTITEM) || _this.dragLi.classList.contains("e-disable")) {
            return false;
          }
          var cloneEle = dragWrap.cloneNode(true);
          if (isNullOrUndefined(select$1("div." + ICON$3, cloneEle))) {
            var icon = proxy2.createElement("div", { className: ICON$3 + " " + EXPANDABLE });
            cloneEle.insertBefore(icon, cloneEle.children[0]);
          }
          var cssClass2 = DRAGITEM + " " + ROOT$6 + " " + _this.cssClass + " " + (_this.enableRtl ? RTL$3 : "");
          virtualEle = proxy2.createElement("div", { className: cssClass2 });
          virtualEle.appendChild(cloneEle);
          var nLen = _this.selectedNodes.length;
          if (nLen > 1 && _this.allowMultiSelection && _this.dragLi.classList.contains(ACTIVE$3)) {
            var cNode = proxy2.createElement("span", { className: DROPCOUNT, innerHTML: "" + nLen });
            virtualEle.appendChild(cNode);
          }
          document.body.appendChild(virtualEle);
          document.body.style.cursor = "";
          _this.dragData = _this.getNodeData(_this.dragLi);
          return virtualEle;
        },
        dragStart: function(e) {
          addClass([_this.element], DRAGGING);
          var listItem = closest(e.target, ".e-list-item");
          var level;
          if (listItem) {
            level = parseInt(listItem.getAttribute("aria-level"), 10);
          }
          var eventArgs = _this.getDragEvent(e.event, _this, null, e.target, null, virtualEle, level);
          if (eventArgs.draggedNode.classList.contains(EDITING)) {
            _this.dragObj.intDestroy(e.event);
            _this.dragCancelAction(virtualEle);
          } else {
            _this.trigger("nodeDragStart", eventArgs, function(observedArgs) {
              if (observedArgs.cancel) {
                _this.dragObj.intDestroy(e.event);
                _this.dragCancelAction(virtualEle);
              } else {
                _this.dragStartAction = true;
              }
            });
          }
        },
        drag: function(e) {
          _this.dragObj.setProperties({ cursorAt: { top: !isNullOrUndefined(e.event.targetTouches) || Browser.isDevice ? 60 : -20 } });
          _this.dragAction(e, virtualEle);
        },
        dragStop: function(e) {
          removeClass([_this.element], DRAGGING);
          _this.removeVirtualEle();
          var dropTarget = e.target;
          var preventTargetExpand = false;
          var dropRoot = closest(dropTarget, "." + DROPPABLE);
          if (!dropTarget || !dropRoot) {
            detach(e.helper);
            document.body.style.cursor = "";
          }
          var listItem = closest(dropTarget, ".e-list-item");
          var level;
          if (listItem) {
            level = parseInt(listItem.getAttribute("aria-level"), 10);
          }
          var eventArgs = _this.getDragEvent(e.event, _this, dropTarget, dropTarget, null, e.helper, level);
          eventArgs.preventTargetExpand = preventTargetExpand;
          _this.trigger("nodeDragStop", eventArgs, function(observedArgs) {
            _this.dragParent = observedArgs.draggedParentNode;
            _this.preventExpand = observedArgs.preventTargetExpand;
            if (observedArgs.cancel) {
              if (e.helper.parentNode) {
                detach(e.helper);
              }
              document.body.style.cursor = "";
            }
            _this.dragStartAction = false;
          });
        }
      });
      this.dropObj = new Droppable(this.element, {
        out: function(e) {
          if (!isNullOrUndefined(e) && !e.target.classList.contains(SIBLING) && (_this.dropObj.dragData.default && _this.dropObj.dragData.default.helper.classList.contains(ROOT$6))) {
            document.body.style.cursor = "not-allowed";
          }
        },
        over: function(e) {
          document.body.style.cursor = "";
        },
        drop: function(e) {
          _this.dropAction(e);
        }
      });
    };
    TreeView2.prototype.dragCancelAction = function(virtualEle) {
      detach(virtualEle);
      removeClass([this.element], DRAGGING);
      this.dragStartAction = false;
    };
    TreeView2.prototype.dragAction = function(e, virtualEle) {
      var dropRoot = closest(e.target, "." + DROPPABLE);
      var dropWrap = closest(e.target, "." + TEXTWRAP);
      var icon = select$1("div." + ICON$3, virtualEle);
      removeClass([icon], [DROPIN, DROPNEXT, DROPOUT, NODROP]);
      this.removeVirtualEle();
      document.body.style.cursor = "";
      var classList2 = e.target.classList;
      if (this.fullRowSelect && !dropWrap && !isNullOrUndefined(classList2) && classList2.contains(FULLROW)) {
        dropWrap = e.target.nextElementSibling;
      }
      if (dropRoot) {
        var dropLi = closest(e.target, "." + LISTITEM);
        var checkWrapper = closest(e.target, "." + CHECKBOXWRAP$1);
        var collapse = closest(e.target, "." + COLLAPSIBLE);
        var expand = closest(e.target, "." + EXPANDABLE);
        if (!dropRoot.classList.contains(ROOT$6) || dropWrap && (!dropLi.isSameNode(this.dragLi) && !this.isDescendant(this.dragLi, dropLi))) {
          if (this.hasTemplate && dropLi) {
            var templateTarget = select$1(this.fullRowSelect ? "." + FULLROW : "." + TEXTWRAP, dropLi);
            if (e && (!expand && !collapse) && e.event.offsetY < 7 && !checkWrapper || (expand && e.event.offsetY < 5 || collapse && e.event.offsetX < 3)) {
              var index = this.fullRowSelect ? 1 : 0;
              this.appendIndicator(dropLi, icon, index);
            } else if (e && (!expand && !collapse) && !checkWrapper && templateTarget && e.event.offsetY > templateTarget.offsetHeight - 10 || (expand && e.event.offsetY > 19 || collapse && e.event.offsetX > 19)) {
              var index = this.fullRowSelect ? 2 : 1;
              this.appendIndicator(dropLi, icon, index);
            } else {
              addClass([icon], DROPIN);
            }
          } else {
            if (dropLi && e && (!expand && !collapse) && e.event.offsetY < 7 && !checkWrapper || (expand && e.event.offsetY < 5 || collapse && e.event.offsetX < 3)) {
              var index = this.fullRowSelect ? 1 : 0;
              this.appendIndicator(dropLi, icon, index);
            } else if (dropLi && e && (!expand && !collapse) && (e.target.offsetHeight > 0 && e.event.offsetY > e.target.offsetHeight - 10) && !checkWrapper || (expand && e.event.offsetY > 19 || collapse && e.event.offsetX > 19)) {
              var index = this.fullRowSelect ? 2 : 1;
              this.appendIndicator(dropLi, icon, index);
            } else {
              addClass([icon], DROPIN);
            }
          }
        } else if (e.target.nodeName === "LI" && (!dropLi.isSameNode(this.dragLi) && !this.isDescendant(this.dragLi, dropLi))) {
          addClass([icon], DROPNEXT);
          this.renderVirtualEle(e);
        } else if (e.target.classList.contains(SIBLING)) {
          addClass([icon], DROPNEXT);
        } else {
          addClass([icon], DROPOUT);
        }
      } else {
        addClass([icon], NODROP);
        document.body.style.cursor = "not-allowed";
      }
      var listItem = closest(e.target, ".e-list-item");
      var level;
      if (listItem) {
        level = parseInt(listItem.getAttribute("aria-level"), 10);
      }
      var eventArgs = this.getDragEvent(e.event, this, e.target, e.target, null, virtualEle, level);
      if (eventArgs.dropIndicator) {
        removeClass([icon], eventArgs.dropIndicator);
      }
      this.trigger("nodeDragging", eventArgs);
      if (eventArgs.dropIndicator) {
        addClass([icon], eventArgs.dropIndicator);
      }
    };
    TreeView2.prototype.appendIndicator = function(dropLi, icon, index) {
      addClass([icon], DROPNEXT);
      var virEle = this.createElement("div", { className: SIBLING });
      dropLi.insertBefore(virEle, dropLi.children[index]);
    };
    TreeView2.prototype.dropAction = function(e) {
      var offsetY = e.event.offsetY;
      var dropTarget = e.target;
      var dragObj;
      var level;
      var drop = false;
      var dragInstance;
      var nodeData = [];
      var liArray = [];
      dragInstance = e.dragData.draggable;
      for (var i_1 = 0; i_1 < dragInstance.ej2_instances.length; i_1++) {
        if (dragInstance.ej2_instances[i_1] instanceof TreeView_1) {
          dragObj = dragInstance.ej2_instances[i_1];
          break;
        }
      }
      if (dragObj && dragObj.dragTarget) {
        var dragTarget = dragObj.dragTarget;
        var dragLi = closest(dragTarget, "." + LISTITEM);
        var dropLi = closest(dropTarget, "." + LISTITEM);
        liArray.push(dragLi);
        if (dropLi == null && dropTarget.classList.contains(ROOT$6)) {
          dropLi = dropTarget.firstElementChild;
        }
        detach(e.droppedElement);
        document.body.style.cursor = "";
        if (!dropLi || dropLi.isSameNode(dragLi) || this.isDescendant(dragLi, dropLi)) {
          if (this.fields.dataSource instanceof DataManager === false) {
            this.preventExpand = false;
          }
          return;
        }
        if (dragObj.allowMultiSelection && dragLi.classList.contains(ACTIVE$3)) {
          var sNodes = selectAll("." + ACTIVE$3, dragObj.element);
          liArray = sNodes;
          if (e.target.offsetHeight <= 33 && offsetY > e.target.offsetHeight - 10 && offsetY > 6) {
            for (var i_2 = sNodes.length - 1; i_2 >= 0; i_2--) {
              if (dropLi.isSameNode(sNodes[i_2]) || this.isDescendant(sNodes[i_2], dropLi)) {
                continue;
              }
              this.appendNode(dropTarget, sNodes[i_2], dropLi, e, dragObj, offsetY);
            }
          } else {
            for (var i_3 = 0; i_3 < sNodes.length; i_3++) {
              if (dropLi.isSameNode(sNodes[i_3]) || this.isDescendant(sNodes[i_3], dropLi)) {
                continue;
              }
              this.appendNode(dropTarget, sNodes[i_3], dropLi, e, dragObj, offsetY);
            }
          }
        } else {
          this.appendNode(dropTarget, dragLi, dropLi, e, dragObj, offsetY);
        }
        level = parseInt(dragLi.getAttribute("aria-level"), 10);
        drop = true;
      }
      if (this.fields.dataSource instanceof DataManager === false) {
        this.preventExpand = false;
      }
      for (var i = 0; i < liArray.length; i++) {
        nodeData.push(this.getNode(liArray[i]));
      }
      this.trigger("nodeDropped", this.getDragEvent(e.event, dragObj, dropTarget, e.target, e.dragData.draggedElement, null, level, drop));
      if (dragObj.element.id !== this.element.id) {
        dragObj.triggerEvent("nodeDropped", nodeData);
        this.isNodeDropped = true;
        this.fields.dataSource = this.treeData;
      }
      this.triggerEvent("nodeDropped", nodeData);
    };
    TreeView2.prototype.appendNode = function(dropTarget, dragLi, dropLi, e, dragObj, offsetY) {
      var checkWrapper = closest(dropTarget, "." + CHECKBOXWRAP$1);
      var collapse = closest(e.target, "." + COLLAPSIBLE);
      var expand = closest(e.target, "." + EXPANDABLE);
      if (!dragLi.classList.contains("e-disable") && !checkWrapper && (expand && e.event.offsetY < 5 || collapse && e.event.offsetX < 3 || expand && e.event.offsetY > 19 || collapse && e.event.offsetX > 19 || !expand && !collapse)) {
        if (dropTarget.nodeName === "LI") {
          this.dropAsSiblingNode(dragLi, dropLi, e, dragObj);
        } else if (dropTarget.firstElementChild && dropTarget.classList.contains(ROOT$6)) {
          if (dropTarget.firstElementChild.nodeName === "UL") {
            this.dropAsSiblingNode(dragLi, dropLi, e, dragObj);
          }
        } else if (dropTarget.classList.contains("e-icon-collapsible") || dropTarget.classList.contains("e-icon-expandable")) {
          this.dropAsSiblingNode(dragLi, dropLi, e, dragObj);
        } else {
          this.dropAsChildNode(dragLi, dropLi, dragObj, null, e, offsetY);
        }
      } else {
        this.dropAsChildNode(dragLi, dropLi, dragObj, null, e, offsetY, true);
      }
    };
    TreeView2.prototype.dropAsSiblingNode = function(dragLi, dropLi, e, dragObj) {
      var dropUl = closest(dropLi, "." + PARENTITEM);
      var dragParentUl = closest(dragLi, "." + PARENTITEM);
      var dragParentLi = closest(dragParentUl, "." + LISTITEM);
      var pre;
      if (e.target.offsetHeight > 0 && e.event.offsetY > e.target.offsetHeight - 2) {
        pre = false;
      } else if (e.event.offsetY < 2) {
        pre = true;
      } else if (e.target.classList.contains("e-icon-expandable") || e.target.classList.contains("e-icon-collapsible")) {
        if (e.event.offsetY < 5 || e.event.offsetX < 3) {
          pre = true;
        } else if (e.event.offsetY > 15 || e.event.offsetX > 17) {
          pre = false;
        }
      }
      if (e.target.classList.contains("e-icon-expandable") || e.target.classList.contains("e-icon-collapsible")) {
        var target = e.target.closest("li");
        dropUl.insertBefore(dragLi, pre ? target : target.nextElementSibling);
      } else {
        dropUl.insertBefore(dragLi, pre ? e.target : e.target.nextElementSibling);
      }
      this.moveData(dragLi, dropLi, dropUl, pre, dragObj);
      this.updateElement(dragParentUl, dragParentLi);
      this.updateAriaLevel(dragLi);
      if (dragObj.element.id === this.element.id) {
        this.updateList();
      } else {
        dragObj.updateInstance();
        this.updateInstance();
      }
    };
    TreeView2.prototype.dropAsChildNode = function(dragLi, dropLi, dragObj, index, e, pos, isCheck) {
      var dragParentUl = closest(dragLi, "." + PARENTITEM);
      var dragParentLi = closest(dragParentUl, "." + LISTITEM);
      var dropParentUl = closest(dropLi, "." + PARENTITEM);
      var templateTarget;
      if (e && e.target) {
        templateTarget = select$1(this.fullRowSelect ? "." + FULLROW : "." + TEXTWRAP, dropLi);
      }
      if (e && pos < 7 && !isCheck) {
        dropParentUl.insertBefore(dragLi, dropLi);
        this.moveData(dragLi, dropLi, dropParentUl, true, dragObj);
      } else if (e && (e.target.offsetHeight > 0 && pos > e.target.offsetHeight - 10) && !isCheck && !this.hasTemplate) {
        dropParentUl.insertBefore(dragLi, dropLi.nextElementSibling);
        this.moveData(dragLi, dropLi, dropParentUl, false, dragObj);
      } else if (this.hasTemplate && templateTarget && pos > templateTarget.offsetHeight - 10 && !isCheck) {
        dropParentUl.insertBefore(dragLi, dropLi.nextElementSibling);
        this.moveData(dragLi, dropLi, dropParentUl, false, dragObj);
      } else {
        var dropUl = this.expandParent(dropLi);
        var childLi = dropUl.childNodes[index];
        dropUl.insertBefore(dragLi, childLi);
        this.moveData(dragLi, childLi, dropUl, true, dragObj);
      }
      this.updateElement(dragParentUl, dragParentLi);
      this.updateAriaLevel(dragLi);
      if (dragObj.element.id === this.element.id) {
        this.updateList();
      } else {
        dragObj.updateInstance();
        this.updateInstance();
      }
    };
    TreeView2.prototype.moveData = function(dragLi, dropLi, dropUl, pre, dragObj) {
      var dropParentLi = closest(dropUl, "." + LISTITEM);
      var id = this.getId(dragLi);
      var removedData = dragObj.updateChildField(dragObj.treeData, dragObj.fields, id, null, null, true);
      var refId = this.getId(dropLi);
      var index = this.getDataPos(this.treeData, this.fields, refId);
      var parentId = this.getId(dropParentLi);
      if (this.dataType === 1) {
        this.updateField(this.treeData, this.fields, parentId, "hasChildren", true);
        var pos = isNullOrUndefined(index) ? this.treeData.length : pre ? index : index + 1;
        if (isNullOrUndefined(parentId) && !this.hasPid) {
          delete removedData[0][this.fields.parentID];
        } else {
          var currPid = this.isNumberTypeId ? parseFloat(parentId) : parentId;
          setValue(this.fields.parentID, currPid, removedData[0]);
        }
        this.treeData.splice(pos, 0, removedData[0]);
        if (dragObj.element.id !== this.element.id) {
          var childData = dragObj.removeChildNodes(id);
          pos++;
          for (var i = 0, len = childData.length; i < len; i++) {
            this.treeData.splice(pos, 0, childData[i]);
            pos++;
          }
          dragObj.groupedData = dragObj.getGroupedData(dragObj.treeData, dragObj.fields.parentID);
        }
        this.groupedData = this.getGroupedData(this.treeData, this.fields.parentID);
      } else {
        this.addChildData(this.treeData, this.fields, parentId, removedData, pre ? index : index + 1);
      }
    };
    TreeView2.prototype.expandParent = function(dropLi) {
      var dropIcon = select$1("div." + ICON$3, dropLi);
      if (dropIcon && dropIcon.classList.contains(EXPANDABLE) && this.preventExpand !== true) {
        this.expandAction(dropLi, dropIcon, null);
      }
      var dropUl = select$1("." + PARENTITEM, dropLi);
      if (this.preventExpand === true && !dropUl && dropIcon) {
        this.renderChildNodes(dropLi);
      }
      dropUl = select$1("." + PARENTITEM, dropLi);
      if (!isNullOrUndefined(dropUl) && this.preventExpand === true) {
        dropUl.style.display = "none";
      }
      if (!isNullOrUndefined(dropUl) && this.preventExpand === false) {
        dropUl.style.display = "block";
      }
      if (isNullOrUndefined(dropUl) && this.preventExpand === true) {
        if (isNullOrUndefined(dropIcon)) {
          ListBase.generateIcon(this.createElement, dropLi, EXPANDABLE, this.listBaseOption);
        }
        var icon = select$1("div." + ICON$3, dropLi);
        if (icon) {
          icon.classList.add("e-icon-expandable");
        }
        dropUl = ListBase.generateUL(this.createElement, [], null, this.listBaseOption);
        dropLi.appendChild(dropUl);
        if (icon) {
          removeClass([icon], COLLAPSIBLE);
        } else {
          ListBase.generateIcon(this.createElement, dropLi, EXPANDABLE, this.listBaseOption);
        }
        dropLi.setAttribute("aria-expanded", "false");
        dropUl.style.display = "none";
      }
      if (isNullOrUndefined(dropUl)) {
        this.trigger("nodeExpanding", this.getExpandEvent(dropLi, null));
        if (isNullOrUndefined(dropIcon)) {
          ListBase.generateIcon(this.createElement, dropLi, COLLAPSIBLE, this.listBaseOption);
        }
        var icon = select$1("div." + ICON$3, dropLi);
        if (icon) {
          removeClass([icon], EXPANDABLE);
        } else {
          ListBase.generateIcon(this.createElement, dropLi, COLLAPSIBLE, this.listBaseOption);
          icon = select$1("div." + ICON$3, dropLi);
          removeClass([icon], EXPANDABLE);
        }
        dropUl = ListBase.generateUL(this.createElement, [], null, this.listBaseOption);
        dropLi.appendChild(dropUl);
        this.addExpand(dropLi);
        this.trigger("nodeExpanded", this.getExpandEvent(dropLi, null));
      }
      return dropUl;
    };
    TreeView2.prototype.updateElement = function(dragParentUl, dragParentLi) {
      if (dragParentLi && dragParentUl.childElementCount === 0) {
        var dragIcon = select$1("div." + ICON$3, dragParentLi);
        detach(dragParentUl);
        detach(dragIcon);
        var parentId = this.getId(dragParentLi);
        this.updateField(this.treeData, this.fields, parentId, "hasChildren", false);
        this.removeExpand(dragParentLi, true);
      }
    };
    TreeView2.prototype.updateAriaLevel = function(dragLi) {
      var level = this.parents(dragLi, "." + PARENTITEM).length;
      dragLi.setAttribute("aria-level", "" + level);
      this.updateChildAriaLevel(select$1("." + PARENTITEM, dragLi), level + 1);
    };
    TreeView2.prototype.updateChildAriaLevel = function(element2, level) {
      if (!isNullOrUndefined(element2)) {
        var cNodes = element2.childNodes;
        for (var i = 0, len = cNodes.length; i < len; i++) {
          var liEle = cNodes[i];
          liEle.setAttribute("aria-level", "" + level);
          this.updateChildAriaLevel(select$1("." + PARENTITEM, liEle), level + 1);
        }
      }
    };
    TreeView2.prototype.renderVirtualEle = function(e) {
      var pre;
      if (e.event.offsetY > e.target.offsetHeight - 2) {
        pre = false;
      } else if (e.event.offsetY < 2) {
        pre = true;
      }
      var virEle = this.createElement("div", { className: SIBLING });
      var index = this.fullRowSelect ? pre ? 1 : 2 : pre ? 0 : 1;
      e.target.insertBefore(virEle, e.target.children[index]);
    };
    TreeView2.prototype.removeVirtualEle = function() {
      var sibEle = select$1("." + SIBLING);
      if (sibEle) {
        detach(sibEle);
      }
    };
    TreeView2.prototype.destroyDrag = function() {
      if (this.dragObj && this.dropObj) {
        this.dragObj.destroy();
        this.dropObj.destroy();
      }
    };
    TreeView2.prototype.getDragEvent = function(event, obj, dropTarget, target, dragNode, cloneEle, level, drop) {
      var dropLi = dropTarget ? closest(dropTarget, "." + LISTITEM) : null;
      var dropData = dropLi ? this.getNodeData(dropLi) : null;
      var draggedNode = obj ? obj.dragLi : dragNode;
      var draggedNodeData = obj ? obj.dragData : null;
      var newParent = dropTarget ? this.parents(dropTarget, "." + LISTITEM) : null;
      var dragLiParent = obj.dragLi.parentElement;
      var dragParent = obj.dragLi ? closest(dragLiParent, "." + LISTITEM) : null;
      var targetParent = null;
      var indexValue = null;
      var iconCss = [DROPNEXT, DROPIN, DROPOUT, NODROP];
      var iconClass = null;
      var node = drop === true ? draggedNode : dropLi;
      var index = node ? closest(node, ".e-list-parent") : null;
      var i = 0;
      var position = null;
      dragParent = obj.dragLi && dragParent === null ? closest(dragLiParent, "." + ROOT$6) : dragParent;
      dragParent = drop === true ? this.dragParent : dragParent;
      if (cloneEle) {
        while (i < 4) {
          if (select$1("." + ICON$3, cloneEle).classList.contains(iconCss[i])) {
            iconClass = iconCss[i];
            break;
          }
          i++;
        }
      }
      if (index) {
        var dropTar = 0;
        for (i = 0; i < index.childElementCount; i++) {
          dropTar = drop !== true && index.children[i] === draggedNode && dropLi !== draggedNode ? ++dropTar : dropTar;
          if (drop !== true && index.children[i].classList.contains("e-hover")) {
            indexValue = event.offsetY >= 23 ? i + 1 : i;
            break;
          } else if (index.children[i] === node) {
            indexValue = event.offsetY >= 23 ? i : i;
            break;
          }
        }
        indexValue = dropTar !== 0 ? --indexValue : indexValue;
        position = iconClass == "e-drop-in" ? "Inside" : event.offsetY < 7 ? "Before" : "After";
      }
      if (dropTarget) {
        if (newParent.length === 0) {
          targetParent = null;
        } else if (dropTarget.classList.contains(LISTITEM)) {
          targetParent = newParent[0];
        } else {
          targetParent = newParent[1];
        }
      }
      if (dropLi === draggedNode) {
        targetParent = dropLi;
      }
      if (dropTarget && target.offsetHeight <= 33 && event.offsetY < target.offsetHeight - 10 && event.offsetY > 6) {
        targetParent = dropLi;
        if (drop !== true) {
          level = ++level;
          var parent_2 = targetParent ? select$1(".e-list-parent", targetParent) : null;
          indexValue = parent_2 ? parent_2.children.length : 0;
          if (!(this.fields.dataSource instanceof DataManager) && parent_2 === null && targetParent) {
            var parent_3 = targetParent.hasAttribute("data-uid") ? this.getChildNodes(this.fields.dataSource, targetParent.getAttribute("data-uid").toString()) : null;
            indexValue = parent_3 ? parent_3.length : 0;
          }
        }
      }
      return {
        cancel: false,
        clonedNode: cloneEle,
        event,
        draggedNode,
        draggedNodeData,
        droppedNode: dropLi,
        droppedNodeData: dropData,
        dropIndex: indexValue,
        dropLevel: level,
        draggedParentNode: dragParent,
        dropTarget: targetParent,
        dropIndicator: iconClass,
        target,
        position
      };
    };
    TreeView2.prototype.addFullRow = function(toAdd) {
      var len = this.liList.length;
      if (toAdd) {
        for (var i = 0; i < len; i++) {
          this.createFullRow(this.liList[i]);
        }
      } else {
        for (var i = 0; i < len; i++) {
          var rowDiv = select$1("." + FULLROW, this.liList[i]);
          detach(rowDiv);
        }
      }
    };
    TreeView2.prototype.createFullRow = function(item) {
      var rowDiv = this.createElement("div", { className: FULLROW });
      item.insertBefore(rowDiv, item.childNodes[0]);
    };
    TreeView2.prototype.addMultiSelect = function(toAdd) {
      if (toAdd) {
        var liEles = selectAll("." + LISTITEM + ':not([aria-selected="true"])', this.element);
        for (var _i = 0, liEles_1 = liEles; _i < liEles_1.length; _i++) {
          var ele = liEles_1[_i];
          ele.setAttribute("aria-selected", "false");
        }
      } else {
        var liEles = selectAll("." + LISTITEM + '[aria-selected="false"]', this.element);
        for (var _a = 0, liEles_2 = liEles; _a < liEles_2.length; _a++) {
          var ele = liEles_2[_a];
          ele.removeAttribute("aria-selected");
        }
      }
    };
    TreeView2.prototype.collapseByLevel = function(element2, level, excludeHiddenNodes) {
      if (level > 0 && !isNullOrUndefined(element2)) {
        var cNodes = this.getVisibleNodes(excludeHiddenNodes, element2.childNodes);
        for (var i = 0, len = cNodes.length; i < len; i++) {
          var liEle = cNodes[i];
          var icon = select$1("." + COLLAPSIBLE, select$1("." + TEXTWRAP, liEle));
          if (!isNullOrUndefined(icon)) {
            this.collapseNode(liEle, icon, null);
          }
          this.collapseByLevel(select$1("." + PARENTITEM, liEle), level - 1, excludeHiddenNodes);
        }
      }
    };
    TreeView2.prototype.collapseAllNodes = function(excludeHiddenNodes) {
      var cIcons = this.getVisibleNodes(excludeHiddenNodes, selectAll("." + COLLAPSIBLE, this.element));
      for (var i = 0, len = cIcons.length; i < len; i++) {
        var icon = cIcons[i];
        var liEle = closest(icon, "." + LISTITEM);
        this.collapseNode(liEle, icon, null);
      }
    };
    TreeView2.prototype.expandByLevel = function(element2, level, excludeHiddenNodes) {
      if (level > 0 && !isNullOrUndefined(element2)) {
        var eNodes = this.getVisibleNodes(excludeHiddenNodes, element2.childNodes);
        for (var i = 0, len = eNodes.length; i < len; i++) {
          var liEle = eNodes[i];
          var icon = select$1("." + EXPANDABLE, select$1("." + TEXTWRAP, liEle));
          if (!isNullOrUndefined(icon)) {
            this.expandAction(liEle, icon, null);
          }
          this.expandByLevel(select$1("." + PARENTITEM, liEle), level - 1, excludeHiddenNodes);
        }
      }
    };
    TreeView2.prototype.expandAllNodes = function(excludeHiddenNodes) {
      var eIcons = this.getVisibleNodes(excludeHiddenNodes, selectAll("." + EXPANDABLE, this.element));
      for (var i = 0, len = eIcons.length; i < len; i++) {
        var icon = eIcons[i];
        var liEle = closest(icon, "." + LISTITEM);
        this.expandAction(liEle, icon, null, true);
      }
    };
    TreeView2.prototype.getVisibleNodes = function(excludeHiddenNodes, nodes) {
      var vNodes = Array.prototype.slice.call(nodes);
      if (excludeHiddenNodes) {
        for (var i = 0; i < vNodes.length; i++) {
          if (!isVisible(vNodes[i])) {
            vNodes.splice(i, 1);
            i--;
          }
        }
      }
      return vNodes;
    };
    TreeView2.prototype.removeNode = function(node) {
      var dragParentUl = closest(node, "." + PARENTITEM);
      var dragParentLi = closest(dragParentUl, "." + LISTITEM);
      if (!isNullOrUndefined(this.nodeTemplateFn)) {
        this.destroyTemplate(node);
      }
      detach(node);
      this.updateElement(dragParentUl, dragParentLi);
      this.removeData(node);
    };
    TreeView2.prototype.updateInstance = function() {
      this.updateList();
      this.updateSelectedNodes();
      this.updateExpandedNodes();
    };
    TreeView2.prototype.updateList = function() {
      this.liList = Array.prototype.slice.call(selectAll("." + LISTITEM, this.element));
    };
    TreeView2.prototype.updateSelectedNodes = function() {
      this.setProperties({ selectedNodes: [] }, true);
      var sNodes = selectAll("." + ACTIVE$3, this.element);
      this.selectGivenNodes(sNodes);
    };
    TreeView2.prototype.updateExpandedNodes = function() {
      this.setProperties({ expandedNodes: [] }, true);
      var eNodes = selectAll('[aria-expanded="true"]', this.element);
      for (var i = 0, len = eNodes.length; i < len; i++) {
        this.addExpand(eNodes[i]);
      }
    };
    TreeView2.prototype.removeData = function(node) {
      if (this.dataType === 1) {
        var dm = new DataManager(this.treeData);
        var id = this.getId(node);
        var data = {};
        var newId = this.isNumberTypeId ? parseFloat(id) : id;
        data[this.fields.id] = newId;
        dm.remove(this.fields.id, data);
        this.removeChildNodes(id);
      } else {
        var id = this.getId(node);
        this.updateChildField(this.treeData, this.fields, id, null, null, true);
      }
    };
    TreeView2.prototype.removeChildNodes = function(parentId) {
      var cNodes = this.getChildGroup(this.groupedData, parentId, false);
      var childData = [];
      if (cNodes) {
        for (var i = 0, len = cNodes.length; i < len; i++) {
          var dm = new DataManager(this.treeData);
          var id = getValue(this.fields.id, cNodes[i]).toString();
          var data = {};
          var currId = this.isNumberTypeId ? parseFloat(id) : id;
          data[this.fields.id] = currId;
          var nodeData = dm.remove(this.fields.id, data);
          childData.push(nodeData[0]);
          this.removeChildNodes(id);
        }
      }
      return childData;
    };
    TreeView2.prototype.doGivenAction = function(nodes, selector, toExpand) {
      for (var i = 0, len = nodes.length; i < len; i++) {
        var liEle = this.getElement(nodes[i]);
        if (isNullOrUndefined(liEle)) {
          continue;
        }
        var icon = select$1("." + selector, select$1("." + TEXTWRAP, liEle));
        if (!isNullOrUndefined(icon)) {
          toExpand ? this.expandAction(liEle, icon, null) : this.collapseNode(liEle, icon, null);
        }
      }
    };
    TreeView2.prototype.addGivenNodes = function(nodes, dropLi, index, isRemote, dropEle) {
      if (nodes.length === 0) {
        return;
      }
      var sNodes = this.getSortedData(nodes);
      var level = dropLi ? parseFloat(dropLi.getAttribute("aria-level")) + 1 : 1;
      if (isRemote) {
        this.updateMapper(level);
      }
      var li = ListBase.createListItemFromJson(this.createElement, sNodes, this.listBaseOption, level);
      var id = this.getId(dropLi);
      var refNode;
      var dropIcon1;
      if (!isNullOrUndefined(dropLi)) {
        dropIcon1 = select$1("div." + ICON$3, dropLi);
      }
      if (this.dataType === 1 && dropIcon1 && dropIcon1.classList.contains(EXPANDABLE) && !isNullOrUndefined(this.element.offsetParent) && !this.element.offsetParent.parentElement.classList.contains("e-filemanager")) {
        this.preventExpand = true;
      }
      if (this.dataType !== 1) {
        this.addChildData(this.treeData, this.fields, id, nodes, index);
        this.isFirstRender = false;
      }
      var dropUl;
      if (!dropEle) {
        dropUl = dropLi ? this.expandParent(dropLi) : select$1("." + PARENTITEM, this.element);
      } else {
        dropUl = dropEle;
      }
      refNode = dropUl.childNodes[index];
      if (!this.isFirstRender || this.dataType === 1) {
        if (refNode || this.sortOrder === "None") {
          for (var i = 0; i < li.length; i++) {
            dropUl.insertBefore(li[i], refNode);
          }
          if (this.dataType === 1 && !isNullOrUndefined(dropLi) && !isNullOrUndefined(this.element.offsetParent) && !this.element.offsetParent.parentElement.classList.contains("e-filemanager")) {
            this.preventExpand = false;
            var dropIcon = select$1("div." + ICON$3, dropLi);
            if (dropIcon && dropIcon.classList.contains(EXPANDABLE)) {
              this.expandAction(dropLi, dropIcon, null);
            }
          }
        }
        if (!refNode && (this.sortOrder === "Ascending" || this.sortOrder === "Descending")) {
          if (dropUl.childNodes.length === 0) {
            for (var i = 0; i < li.length; i++) {
              dropUl.insertBefore(li[i], refNode);
            }
            if (this.dataType === 1 && !isNullOrUndefined(dropLi) && !isNullOrUndefined(this.element.offsetParent) && !this.element.offsetParent.parentElement.classList.contains("e-filemanager")) {
              this.preventExpand = false;
              var dropIcon = select$1("div." + ICON$3, dropLi);
              if (dropIcon && dropIcon.classList.contains(EXPANDABLE)) {
                this.expandAction(dropLi, dropIcon, null);
              }
            }
          } else {
            var cNodes = dropUl.childNodes;
            for (var i = 0; i < li.length; i++) {
              for (var j = 0; j < cNodes.length; j++) {
                var returnValue = this.sortOrder === "Ascending" ? cNodes[j].textContent.toUpperCase() > li[i].innerText.toUpperCase() : cNodes[j].textContent.toUpperCase() < li[i].innerText.toUpperCase();
                if (returnValue) {
                  dropUl.insertBefore(li[i], cNodes[j]);
                  break;
                }
                dropUl.insertBefore(li[i], cNodes[cNodes.length]);
              }
            }
          }
        }
      }
      if (this.dataType === 1) {
        this.updateField(this.treeData, this.fields, id, "hasChildren", true);
        var refId = this.getId(refNode);
        var pos = isNullOrUndefined(refId) ? this.treeData.length : this.getDataPos(this.treeData, this.fields, refId);
        for (var j = 0; j < nodes.length; j++) {
          if (!isNullOrUndefined(id)) {
            var currId = this.isNumberTypeId ? parseFloat(id) : id;
            setValue(this.fields.parentID, currId, nodes[j]);
          }
          this.treeData.splice(pos, 0, nodes[j]);
          pos++;
        }
      }
      this.finalizeNode(dropUl);
    };
    TreeView2.prototype.updateMapper = function(level) {
      var mapper2 = level === 1 ? this.fields : this.getChildFields(this.fields, level - 1, 1);
      this.updateListProp(mapper2);
    };
    TreeView2.prototype.updateListProp = function(mapper2) {
      var prop = this.getActualProperties(mapper2);
      this.listBaseOption.fields = prop;
      this.listBaseOption.fields.url = prop.hasOwnProperty("navigateUrl") ? prop.navigateUrl : "navigateUrl";
    };
    TreeView2.prototype.getDataPos = function(obj, mapper2, id) {
      var pos = null;
      for (var i = 0, objlen = obj.length; i < objlen; i++) {
        var nodeId = getValue(mapper2.id, obj[i]);
        if (obj[i] && nodeId && nodeId.toString() === id) {
          return i;
        } else if (typeof mapper2.child === "string" && !isNullOrUndefined(getValue(mapper2.child, obj[i]))) {
          var data = getValue(mapper2.child, obj[i]);
          pos = this.getDataPos(data, this.getChildMapper(mapper2), id);
          if (pos !== null) {
            break;
          }
        } else if (this.fields.dataSource instanceof DataManager && !isNullOrUndefined(getValue("child", obj[i]))) {
          var items = getValue("child", obj[i]);
          pos = this.getDataPos(items, this.getChildMapper(mapper2), id);
          if (pos !== null) {
            break;
          }
        }
      }
      return pos;
    };
    TreeView2.prototype.addChildData = function(obj, mapper2, id, data, index) {
      var updated;
      if (isNullOrUndefined(id)) {
        index = isNullOrUndefined(index) ? obj.length : index;
        for (var k = 0, len = data.length; k < len; k++) {
          obj.splice(index, 0, data[k]);
          index++;
        }
        return updated;
      }
      for (var i = 0, objlen = obj.length; i < objlen; i++) {
        var nodeId = getValue(mapper2.id, obj[i]);
        if (obj[i] && nodeId && nodeId.toString() === id) {
          if (typeof mapper2.child === "string" && (obj[i].hasOwnProperty(mapper2.child) && obj[i][mapper2.child] !== null) || this.fields.dataSource instanceof DataManager && obj[i].hasOwnProperty("child")) {
            var key = typeof mapper2.child === "string" ? mapper2.child : "child";
            var childData = getValue(key, obj[i]);
            if (isNullOrUndefined(childData)) {
              childData = [];
            }
            index = isNullOrUndefined(index) ? childData.length : index;
            for (var k = 0, len = data.length; k < len; k++) {
              childData.splice(index, 0, data[k]);
              index++;
            }
          } else {
            var key = typeof mapper2.child === "string" ? mapper2.child : "child";
            obj[i][key] = data;
          }
          return true;
        } else if (typeof mapper2.child === "string" && !isNullOrUndefined(getValue(mapper2.child, obj[i]))) {
          var childObj = getValue(mapper2.child, obj[i]);
          updated = this.addChildData(childObj, this.getChildMapper(mapper2), id, data, index);
          if (updated !== void 0) {
            break;
          }
        } else if (this.fields.dataSource instanceof DataManager && !isNullOrUndefined(getValue("child", obj[i]))) {
          var childData = getValue("child", obj[i]);
          updated = this.addChildData(childData, this.getChildMapper(mapper2), id, data, index);
          if (updated !== void 0) {
            break;
          }
        }
      }
      return updated;
    };
    TreeView2.prototype.doDisableAction = function(nodes) {
      var validNodes = this.nodeType(nodes);
      var validID = this.checkValidId(validNodes);
      this.validArr = [];
      for (var i = 0, len = validID.length; i < len; i++) {
        var id = validID[i][this.fields.id].toString();
        if (id && this.disableNode.indexOf(id) === -1) {
          this.disableNode.push(id);
        }
        var liEle = this.getElement(id);
        if (liEle) {
          liEle.setAttribute("aria-disabled", "true");
          addClass([liEle], DISABLE);
        }
      }
    };
    TreeView2.prototype.doEnableAction = function(nodes) {
      var strNodes = this.nodeType(nodes);
      for (var i = 0, len = strNodes.length; i < len; i++) {
        var liEle = this.getElement(strNodes[i]);
        var id = strNodes[i];
        if (id && this.disableNode.indexOf(id) !== -1) {
          this.disableNode.splice(this.disableNode.indexOf(id), 1);
        }
        if (liEle) {
          liEle.removeAttribute("aria-disabled");
          removeClass([liEle], DISABLE);
        }
      }
    };
    TreeView2.prototype.nodeType = function(nodes) {
      var validID = [];
      for (var i = 0, len = nodes.length; i < len; i++) {
        var id = void 0;
        if (typeof nodes[i] == "string") {
          id = nodes[i] ? nodes[i].toString() : null;
        } else if (typeof nodes[i] === "object") {
          id = nodes[i] ? nodes[i].getAttribute("data-uid").toString() : null;
        }
        if (validID.indexOf(id) == -1) {
          validID.push(id);
        }
      }
      return validID;
    };
    TreeView2.prototype.checkValidId = function(node) {
      var _this = this;
      if (this.dataType === 1) {
        this.validArr = this.treeData.filter(function(data) {
          return node.indexOf(data[_this.fields.id] ? data[_this.fields.id].toString() : null) !== -1;
        });
      } else if (this.dataType === 2) {
        for (var k = 0; k < this.treeData.length; k++) {
          var id = this.treeData[k][this.fields.id] ? this.treeData[k][this.fields.id].toString() : null;
          if (node.indexOf(id) !== -1) {
            this.validArr.push(this.treeData[k]);
          }
          var childItems = getValue(this.fields.child.toString(), this.treeData[k]);
          if (childItems) {
            this.filterNestedChild(childItems, node);
          }
        }
      }
      return this.validArr;
    };
    TreeView2.prototype.filterNestedChild = function(treeData, nodes) {
      for (var k = 0; k < treeData.length; k++) {
        var id = treeData[k][this.fields.id] ? treeData[k][this.fields.id].toString() : null;
        if (nodes.indexOf(id) !== -1) {
          this.validArr.push(treeData[k]);
        }
        var childItems = getValue(this.fields.child.toString(), treeData[k]);
        if (childItems) {
          this.filterNestedChild(childItems, nodes);
        }
      }
    };
    TreeView2.prototype.setTouchClass = function() {
      var ele = closest(this.element, "." + BIGGER);
      this.touchClass = isNullOrUndefined(ele) ? "" : SMALL;
    };
    TreeView2.prototype.updatePersistProp = function() {
      this.removeField(this.treeData, this.fields, ["selected", "expanded"]);
      var sleNodes = this.selectedNodes;
      for (var l = 0, slelen = sleNodes.length; l < slelen; l++) {
        this.updateField(this.treeData, this.fields, sleNodes[l], "selected", true);
      }
      var enodes = this.expandedNodes;
      for (var k = 0, nodelen = enodes.length; k < nodelen; k++) {
        this.updateField(this.treeData, this.fields, enodes[k], "expanded", true);
      }
      if (this.showCheckBox) {
        this.removeField(this.treeData, this.fields, ["isChecked"]);
        var cnodes = this.checkedNodes;
        for (var m = 0, nodelen = cnodes.length; m < nodelen; m++) {
          this.updateField(this.treeData, this.fields, cnodes[m], "isChecked", true);
        }
      }
    };
    TreeView2.prototype.removeField = function(obj, mapper2, names) {
      if (isNullOrUndefined(obj) || isNullOrUndefined(mapper2)) {
        return;
      }
      for (var i = 0, objlen = obj.length; i < objlen; i++) {
        for (var j = 0; j < names.length; j++) {
          var field = this.getMapperProp(mapper2, names[j]);
          if (!isNullOrUndefined(obj[i][field])) {
            delete obj[i][field];
          }
        }
        if (typeof mapper2.child === "string" && !isNullOrUndefined(getValue(mapper2.child, obj[i]))) {
          this.removeField(getValue(mapper2.child, obj[i]), this.getChildMapper(mapper2), names);
        } else if (this.fields.dataSource instanceof DataManager && !isNullOrUndefined(getValue("child", obj[i]))) {
          this.removeField(getValue("child", obj[i]), this.getChildMapper(mapper2), names);
        }
      }
    };
    TreeView2.prototype.getMapperProp = function(mapper2, fieldName) {
      switch (fieldName) {
        case "selected":
          return !isNullOrUndefined(mapper2.selected) ? mapper2.selected : "selected";
        case "expanded":
          return !isNullOrUndefined(mapper2.expanded) ? mapper2.expanded : "expanded";
        case "isChecked":
          return !isNullOrUndefined(mapper2.isChecked) ? mapper2.isChecked : "isChecked";
        case "hasChildren":
          return !isNullOrUndefined(mapper2.hasChildren) ? mapper2.hasChildren : "hasChildren";
        default:
          return fieldName;
      }
    };
    TreeView2.prototype.updateField = function(obj, mapper2, id, key, value) {
      if (isNullOrUndefined(id)) {
        return;
      } else if (this.dataType === 1) {
        var newId = this.isNumberTypeId ? parseFloat(id) : id;
        var resultData = new DataManager(this.treeData).executeLocal(new Query().where(mapper2.id, "equal", newId, false));
        setValue(this.getMapperProp(mapper2, key), value, resultData[0]);
      } else {
        this.updateChildField(obj, mapper2, id, key, value);
      }
    };
    TreeView2.prototype.updateChildField = function(obj, mapper2, id, key, value, remove2) {
      var removedData;
      if (isNullOrUndefined(obj)) {
        return removedData;
      }
      for (var i = 0, objlen = obj.length; i < objlen; i++) {
        var nodeId = getValue(mapper2.id, obj[i]);
        if (obj[i] && nodeId && nodeId.toString() === id) {
          if (remove2) {
            removedData = obj.splice(i, 1);
          } else {
            setValue(this.getMapperProp(mapper2, key), value, obj[i]);
            removedData = [];
          }
          return removedData;
        } else if (typeof mapper2.child === "string" && !isNullOrUndefined(getValue(mapper2.child, obj[i]))) {
          var childData = getValue(mapper2.child, obj[i]);
          removedData = this.updateChildField(childData, this.getChildMapper(mapper2), id, key, value, remove2);
          if (removedData !== void 0) {
            break;
          }
        } else if (this.fields.dataSource instanceof DataManager && !isNullOrUndefined(getValue("child", obj[i]))) {
          var childItems = getValue("child", obj[i]);
          removedData = this.updateChildField(childItems, this.getChildMapper(mapper2), id, key, value, remove2);
          if (removedData !== void 0) {
            break;
          }
        }
      }
      return removedData;
    };
    TreeView2.prototype.triggerEvent = function(action, node) {
      this.renderReactTemplates();
      if (action === "addNodes") {
        var nodeData = [];
        for (var i = 0; i < node.length; i++) {
          nodeData.push(this.getNode(this.getElement(isNullOrUndefined(node[i][this.fields.id]) ? getValue(this.fields.id, node[i]).toString() : null)));
        }
        node = nodeData;
      }
      var eventArgs = { data: this.treeData, action, nodeData: node };
      this.trigger("dataSourceChanged", eventArgs);
    };
    TreeView2.prototype.wireInputEvents = function(inpEle) {
      EventHandler.add(inpEle, "blur", this.inputFocusOut, this);
    };
    TreeView2.prototype.wireEditingEvents = function(toBind) {
      var _this = this;
      if (toBind && !this.disabled) {
        var proxy_2 = this;
        this.touchEditObj = new Touch(this.element, {
          tap: function(e) {
            if (_this.isDoubleTapped(e) && e.tapCount === 2) {
              e.originalEvent.preventDefault();
              proxy_2.editingHandler(e.originalEvent);
            }
          }
        });
      } else {
        if (this.touchEditObj) {
          this.touchEditObj.destroy();
        }
      }
    };
    TreeView2.prototype.wireClickEvent = function(toBind) {
      if (toBind) {
        var proxy_3 = this;
        this.touchClickObj = new Touch(this.element, {
          tap: function(e) {
            proxy_3.clickHandler(e);
          }
        });
      } else {
        if (this.touchClickObj) {
          this.touchClickObj.destroy();
        }
      }
    };
    TreeView2.prototype.wireExpandOnEvent = function(toBind) {
      var _this = this;
      if (toBind) {
        var proxy_4 = this;
        this.touchExpandObj = new Touch(this.element, {
          tap: function(e) {
            if ((_this.expandOnType === "Click" || _this.expandOnType === "DblClick" && _this.isDoubleTapped(e) && e.tapCount === 2) && e.originalEvent.which !== 3) {
              proxy_4.expandHandler(e);
            }
          }
        });
      } else {
        if (this.touchExpandObj) {
          this.touchExpandObj.destroy();
        }
      }
    };
    TreeView2.prototype.mouseDownHandler = function(e) {
      this.mouseDownStatus = true;
      if (e.shiftKey || e.ctrlKey) {
        e.preventDefault();
      }
      if (e.ctrlKey && this.allowMultiSelection) {
        EventHandler.add(this.element, "contextmenu", this.preventContextMenu, this);
      }
    };
    TreeView2.prototype.preventContextMenu = function(e) {
      e.preventDefault();
    };
    TreeView2.prototype.wireEvents = function() {
      EventHandler.add(this.element, "mousedown", this.mouseDownHandler, this);
      this.wireClickEvent(true);
      if (this.expandOnType !== "None") {
        this.wireExpandOnEvent(true);
      }
      EventHandler.add(this.element, "mouseover", this.onMouseOver, this);
      EventHandler.add(this.element, "mouseout", this.onMouseLeave, this);
      this.keyboardModule = new KeyboardEvents(this.element, {
        keyAction: this.keyActionHandler.bind(this),
        keyConfigs: this.keyConfigs,
        eventName: "keydown"
      });
    };
    TreeView2.prototype.unWireEvents = function() {
      EventHandler.remove(this.element, "mousedown", this.mouseDownHandler);
      this.wireClickEvent(false);
      this.wireExpandOnEvent(false);
      EventHandler.remove(this.element, "mouseover", this.onMouseOver);
      EventHandler.remove(this.element, "mouseout", this.onMouseLeave);
      if (!this.disabled) {
        this.keyboardModule.destroy();
      }
    };
    TreeView2.prototype.parents = function(element2, selector) {
      var matched = [];
      var el = element2.parentNode;
      while (!isNullOrUndefined(el)) {
        if (matches$1(el, selector)) {
          matched.push(el);
        }
        el = el.parentNode;
      }
      return matched;
    };
    TreeView2.prototype.isDoubleTapped = function(e) {
      var target = e.originalEvent.target;
      var secondTap;
      if (target && e.tapCount) {
        if (e.tapCount === 1) {
          this.firstTap = closest(target, "." + LISTITEM);
        } else if (e.tapCount === 2) {
          secondTap = closest(target, "." + LISTITEM);
        }
      }
      return this.firstTap === secondTap;
    };
    TreeView2.prototype.isDescendant = function(parent, child) {
      var node = child.parentNode;
      while (!isNullOrUndefined(node)) {
        if (node === parent) {
          return true;
        }
        node = node.parentNode;
      }
      return false;
    };
    TreeView2.prototype.showSpinner = function(element2) {
      addClass([element2], LOAD);
      createSpinner({
        target: element2,
        width: Browser.isDevice ? 16 : 14
      }, this.createElement);
      showSpinner(element2);
    };
    TreeView2.prototype.hideSpinner = function(element2) {
      hideSpinner(element2);
      element2.innerHTML = "";
      removeClass([element2], LOAD);
    };
    TreeView2.prototype.setCheckedNodes = function(nodes) {
      nodes = JSON.parse(JSON.stringify(nodes));
      this.uncheckAll(this.checkedNodes);
      this.setIndeterminate(nodes);
      if (nodes.length > 0) {
        this.checkAll(nodes);
      }
    };
    TreeView2.prototype.setValidCheckedNode = function(node) {
      if (this.dataType === 1) {
        var mapper2 = this.fields;
        var resultData = new DataManager(this.treeData).executeLocal(new Query().where(mapper2.id, "equal", node, true));
        if (resultData[0]) {
          this.setChildCheckState(resultData, node, resultData[0]);
          if (this.autoCheck) {
            var parent_4 = resultData[0][this.fields.parentID] ? resultData[0][this.fields.parentID].toString() : null;
            var childNodes = this.getChildNodes(this.treeData, parent_4);
            var count = 0;
            for (var len = 0; len < childNodes.length; len++) {
              var childId = childNodes[len][this.fields.id].toString();
              if (this.checkedNodes.indexOf(childId) !== -1) {
                count++;
              }
            }
            if (count === childNodes.length && this.checkedNodes.indexOf(parent_4) === -1 && parent_4) {
              this.checkedNodes.push(parent_4);
            }
          }
        }
      } else if (this.dataType === 2) {
        for (var a = 0; a < this.treeData.length; a++) {
          var index = this.treeData[a][this.fields.id] ? this.treeData[a][this.fields.id].toString() : "";
          if (index === node && this.checkedNodes.indexOf(node) === -1) {
            this.checkedNodes.push(node);
            break;
          }
          var childItems = getValue(this.fields.child.toString(), this.treeData[a]);
          if (childItems) {
            this.setChildCheckState(childItems, node, this.treeData[a]);
          }
        }
      }
    };
    TreeView2.prototype.setChildCheckState = function(childItems, node, treeData) {
      var checkedParent;
      var count = 0;
      if (this.dataType === 1) {
        if (treeData) {
          checkedParent = treeData[this.fields.id] ? treeData[this.fields.id].toString() : null;
        }
        for (var index = 0; index < childItems.length; index++) {
          var checkNode = childItems[index][this.fields.id] ? childItems[index][this.fields.id].toString() : null;
          if (treeData && checkedParent && this.autoCheck) {
            if (this.checkedNodes.indexOf(checkedParent) !== -1 && this.checkedNodes.indexOf(checkNode) === -1) {
              this.checkedNodes.push(checkNode);
            }
          }
          if (checkNode === node && this.checkedNodes.indexOf(node) === -1) {
            this.checkedNodes.push(node);
          }
          var subChildItems = this.getChildNodes(this.treeData, checkNode);
          if (subChildItems) {
            this.setChildCheckState(subChildItems, node, treeData);
          }
        }
      } else {
        if (treeData) {
          checkedParent = treeData[this.fields.id] ? treeData[this.fields.id].toString() : "";
        }
        for (var index = 0; index < childItems.length; index++) {
          var checkedChild = childItems[index][this.fields.id] ? childItems[index][this.fields.id].toString() : "";
          if (treeData && checkedParent && this.autoCheck) {
            if (this.checkedNodes.indexOf(checkedParent) !== -1 && this.checkedNodes.indexOf(checkedChild) === -1) {
              this.checkedNodes.push(checkedChild);
            }
          }
          if (checkedChild === node && this.checkedNodes.indexOf(node) === -1) {
            this.checkedNodes.push(node);
          }
          var subChildItems = getValue(this.fields.child.toString(), childItems[index]);
          if (subChildItems) {
            this.setChildCheckState(subChildItems, node, childItems[index]);
          }
          if (this.checkedNodes.indexOf(checkedChild) !== -1 && this.autoCheck) {
            count++;
          }
          if (count === childItems.length && this.checkedNodes.indexOf(checkedParent) === -1 && this.autoCheck) {
            this.checkedNodes.push(checkedParent);
          }
        }
      }
    };
    TreeView2.prototype.setIndeterminate = function(nodes) {
      for (var i = 0; i < nodes.length; i++) {
        this.setValidCheckedNode(nodes[i]);
      }
    };
    TreeView2.prototype.updatePosition = function(id, newData, isRefreshChild, childValue) {
      if (this.dataType === 1) {
        var pos = this.getDataPos(this.treeData, this.fields, id);
        this.treeData.splice(pos, 1, newData);
        if (isRefreshChild) {
          this.removeChildNodes(id);
          for (var j = 0; j < childValue.length; j++) {
            this.treeData.splice(pos, 0, childValue[j]);
            pos++;
          }
        }
        this.groupedData = this.getGroupedData(this.treeData, this.fields.parentID);
      } else {
        this.updateChildPosition(this.treeData, this.fields, id, [newData], void 0);
      }
    };
    TreeView2.prototype.updateChildPosition = function(treeData, mapper2, currID, newData, index) {
      var found;
      for (var i = 0, objlen = treeData.length; i < objlen; i++) {
        var nodeId = getValue(mapper2.id, treeData[i]);
        if (treeData[i] && nodeId && nodeId.toString() === currID) {
          treeData[i] = newData[0];
          return true;
        } else if (typeof mapper2.child === "string" && !isNullOrUndefined(getValue(mapper2.child, treeData[i]))) {
          var childObj = getValue(mapper2.child, treeData[i]);
          found = this.updateChildPosition(childObj, this.getChildMapper(mapper2), currID, newData, index);
          if (found !== void 0) {
            break;
          }
        } else if (this.fields.dataSource instanceof DataManager && !isNullOrUndefined(getValue("child", treeData[i]))) {
          var childData = getValue("child", treeData[i]);
          found = this.updateChildPosition(childData, this.getChildMapper(mapper2), currID, newData, index);
          if (found !== void 0) {
            break;
          }
        }
      }
      return found;
    };
    TreeView2.prototype.dynamicState = function() {
      this.setDragAndDrop(this.allowDragAndDrop);
      this.wireEditingEvents(this.allowEditing);
      if (!this.disabled) {
        this.wireEvents();
        this.setRipple();
      } else {
        this.unWireEvents();
        this.rippleFn();
        this.rippleIconFn();
      }
    };
    TreeView2.prototype.crudOperation = function(operation, nodes, target, newText, newNode, index, prevent) {
      var _this = this;
      var data = this.fields.dataSource;
      var matchedArr = [];
      var query = this.getQuery(this.fields);
      var key = this.fields.id;
      var crud;
      var changes = {
        addedRecords: [],
        deletedRecords: [],
        changedRecords: []
      };
      var nodesID = [];
      if (nodes) {
        nodesID = this.nodeType(nodes);
      } else if (target) {
        if (typeof target == "string") {
          nodesID[0] = target.toString();
        } else if (typeof target === "object") {
          nodesID[0] = target.getAttribute("data-uid").toString();
        }
      }
      for (var i = 0, len = nodesID.length; i < len; i++) {
        var liEle = this.getElement(nodesID[i]);
        if (isNullOrUndefined(liEle)) {
          continue;
        }
        var removedData = this.getNodeObject(nodesID[i]);
        matchedArr.push(removedData);
      }
      switch (operation) {
        case "delete":
          if (nodes.length == 1) {
            crud = data.remove(key, matchedArr[0], query.fromTable, query);
          } else {
            changes.deletedRecords = matchedArr;
            crud = data.saveChanges(changes, key, query.fromTable, query);
          }
          crud.then(function(e) {
            return _this.deleteSuccess(nodesID);
          }).catch(function(e) {
            return _this.dmFailure(e);
          });
          break;
        case "update":
          matchedArr[0][this.fields.text] = newText;
          crud = data.update(key, matchedArr[0], query.fromTable, query);
          crud.then(function(e) {
            return _this.editSucess(target, newText, prevent);
          }).catch(function(e) {
            return _this.dmFailure(e, target, prevent);
          });
          break;
        case "insert":
          if (newNode.length == 1) {
            crud = data.insert(newNode[0], query.fromTable, query);
          } else {
            var arr = [];
            for (var i = 0, len = newNode.length; i < len; i++) {
              arr.push(newNode[i]);
            }
            changes.addedRecords = arr;
            crud = data.saveChanges(changes, key, query.fromTable, query);
          }
          crud.then(function(e) {
            var dropLi = _this.getElement(target);
            _this.addSuccess(newNode, dropLi, index);
            _this.preventExpand = false;
          }).catch(function(e) {
            return _this.dmFailure(e);
          });
          break;
      }
    };
    TreeView2.prototype.deleteSuccess = function(nodes) {
      var nodeData = [];
      for (var i = 0, len = nodes.length; i < len; i++) {
        var liEle = this.getElement(nodes[i]);
        nodeData.push(this.getNode(liEle));
        if (isNullOrUndefined(liEle)) {
          continue;
        }
        this.removeNode(liEle);
      }
      this.updateInstance();
      if (this.dataType === 1) {
        this.groupedData = this.getGroupedData(this.treeData, this.fields.parentID);
      }
      this.triggerEvent("removeNode", nodeData);
    };
    TreeView2.prototype.editSucess = function(target, newText, prevent) {
      var liEle = this.getElement(target);
      var txtEle = select$1("." + LISTTEXT, liEle);
      this.appendNewText(liEle, txtEle, newText, prevent);
    };
    TreeView2.prototype.addSuccess = function(nodes, dropLi, index) {
      var dropUl;
      var icon = dropLi ? dropLi.querySelector("." + ICON$3) : null;
      var proxy2 = this;
      if (dropLi && icon && icon.classList.contains(EXPANDABLE) && dropLi.querySelector("." + PARENTITEM) === null) {
        proxy2.renderChildNodes(dropLi, null, function() {
          dropUl = dropLi.querySelector("." + PARENTITEM);
          proxy2.addGivenNodes(nodes, dropLi, index, true, dropUl);
          proxy2.triggerEvent("addNodes", nodes);
        });
      } else {
        this.addGivenNodes(nodes, dropLi, index, true);
        this.triggerEvent("addNodes", nodes);
      }
    };
    TreeView2.prototype.dmFailure = function(e, target, prevent) {
      if (target) {
        this.updatePreviousText(target, prevent);
      }
      this.trigger("actionFailure", { error: e });
    };
    TreeView2.prototype.updatePreviousText = function(target, prevent) {
      var liEle = this.getElement(target);
      var txtEle = select$1("." + LISTTEXT, liEle);
      this.updateText(liEle, txtEle, this.oldText, prevent);
    };
    TreeView2.prototype.getHierarchicalParentId = function(node, data, parentsID) {
      var _this = this;
      var index = data.findIndex(function(data2) {
        return data2[_this.fields.id] && data2[_this.fields.id].toString() === node;
      });
      if (index == -1) {
        for (var i = 0; i < data.length; i++) {
          var childItems = getValue(this.fields.child.toString(), data[i]);
          if (!isNullOrUndefined(childItems)) {
            index = childItems.findIndex(function(data2) {
              return data2[_this.fields.id] && data2[_this.fields.id].toString() === node;
            });
            if (index == -1) {
              this.getHierarchicalParentId(node, childItems, parentsID);
            } else {
              parentsID.push(data[i][this.fields.id].toString());
              this.getHierarchicalParentId(data[i][this.fields.id].toString(), this.treeData, parentsID);
              break;
            }
          }
        }
      }
      return parentsID;
    };
    TreeView2.prototype.onPropertyChanged = function(newProp, oldProp) {
      for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {
        var prop = _a[_i];
        switch (prop) {
          case "allowDragAndDrop":
            this.setDragAndDrop(this.allowDragAndDrop);
            break;
          case "dragArea":
            if (this.allowDragAndDrop) {
              this.dragObj.dragArea = this.dragArea;
            }
            break;
          case "allowEditing":
            this.wireEditingEvents(this.allowEditing);
            break;
          case "allowMultiSelection":
            if (this.selectedNodes.length > 1) {
              var sNode = this.getElement(this.selectedNodes[0]);
              this.isLoaded = false;
              this.removeSelectAll();
              this.selectNode(sNode, null);
              this.isLoaded = true;
            }
            this.setMultiSelect(this.allowMultiSelection);
            this.addMultiSelect(this.allowMultiSelection);
            break;
          case "allowTextWrap":
            this.setTextWrap();
            this.updateWrap();
            break;
          case "checkedNodes":
            if (this.showCheckBox) {
              this.checkedNodes = oldProp.checkedNodes;
              this.setCheckedNodes(newProp.checkedNodes);
            }
            break;
          case "autoCheck":
            if (this.showCheckBox) {
              this.autoCheck = newProp.autoCheck;
              this.ensureIndeterminate();
            }
            break;
          case "cssClass":
            this.setCssClass(oldProp.cssClass, newProp.cssClass);
            break;
          case "enableRtl":
            this.setEnableRtl();
            break;
          case "expandedNodes":
            this.isAnimate = false;
            this.setProperties({ expandedNodes: [] }, true);
            this.collapseAll();
            this.isInitalExpand = true;
            this.setProperties({ expandedNodes: isNullOrUndefined(newProp.expandedNodes) ? [] : newProp.expandedNodes }, true);
            this.doExpandAction();
            this.isInitalExpand = false;
            this.isAnimate = true;
            break;
          case "expandOn":
            this.wireExpandOnEvent(false);
            this.setExpandOnType();
            if (this.expandOnType !== "None" && !this.disabled) {
              this.wireExpandOnEvent(true);
            }
            break;
          case "disabled":
            this.setDisabledMode();
            this.dynamicState();
            break;
          case "fields":
            this.isAnimate = false;
            this.isFieldChange = true;
            this.initialRender = true;
            this.reRenderNodes();
            this.initialRender = false;
            this.isAnimate = true;
            this.isFieldChange = false;
            break;
          case "fullRowSelect":
            this.setFullRow(this.fullRowSelect);
            this.addFullRow(this.fullRowSelect);
            if (this.allowTextWrap) {
              this.setTextWrap();
              this.updateWrap();
            }
            break;
          case "loadOnDemand":
            if (this.loadOnDemand === false && !this.onLoaded) {
              var nodes = this.element.querySelectorAll("li");
              var i = 0;
              while (i < nodes.length) {
                if (nodes[i].getAttribute("aria-expanded") !== "true") {
                  this.renderChildNodes(nodes[i], true, null, true);
                }
                i++;
              }
              this.onLoaded = true;
            }
            break;
          case "nodeTemplate":
            this.hasTemplate = false;
            this.nodeTemplateFn = this.templateComplier(this.nodeTemplate);
            this.reRenderNodes();
            break;
          case "selectedNodes":
            this.removeSelectAll();
            this.setProperties({ selectedNodes: newProp.selectedNodes }, true);
            this.doSelectionAction();
            break;
          case "showCheckBox":
            this.reRenderNodes();
            break;
          case "sortOrder":
            this.reRenderNodes();
            break;
          case "fullRowNavigable":
            this.setProperties({ fullRowNavigable: newProp.fullRowNavigable }, true);
            this.listBaseOption.itemNavigable = newProp.fullRowNavigable;
            this.reRenderNodes();
            break;
        }
      }
    };
    TreeView2.prototype.destroy = function() {
      this.clearTemplate();
      this.element.removeAttribute("aria-activedescendant");
      this.unWireEvents();
      this.wireEditingEvents(false);
      if (!this.disabled) {
        this.rippleFn();
        this.rippleIconFn();
      }
      this.setCssClass(this.cssClass, null);
      this.setDragAndDrop(false);
      this.setFullRow(false);
      if (this.ulElement && this.ulElement.parentElement) {
        this.ulElement.parentElement.removeChild(this.ulElement);
      }
      _super.prototype.destroy.call(this);
    };
    TreeView2.prototype.addNodes = function(nodes, target, index, preventTargetExpand) {
      if (isNullOrUndefined(nodes)) {
        return;
      }
      nodes = JSON.parse(JSON.stringify(nodes));
      var dropLi = this.getElement(target);
      this.preventExpand = preventTargetExpand;
      if (this.fields.dataSource instanceof DataManager) {
        if (!this.isOffline) {
          this.crudOperation("insert", null, target, null, nodes, index, this.preventExpand);
        } else {
          this.addSuccess(nodes, dropLi, index);
        }
      } else if (this.dataType === 2) {
        this.addGivenNodes(nodes, dropLi, index);
      } else {
        if (dropLi) {
          this.addGivenNodes(nodes, dropLi, index);
        } else {
          nodes = this.getSortedData(nodes);
          for (var i = 0; i < nodes.length; i++) {
            var pid = getValue(this.fields.parentID, nodes[i]);
            dropLi = pid ? this.getElement(pid.toString()) : pid;
            this.addGivenNodes([nodes[i]], dropLi, index);
          }
        }
        this.groupedData = this.getGroupedData(this.treeData, this.fields.parentID);
      }
      this.updateCheckedStateFromDS();
      if (this.showCheckBox && dropLi) {
        this.ensureParentCheckState(dropLi);
      }
      if (this.fields.dataSource instanceof DataManager === false) {
        this.preventExpand = false;
        this.triggerEvent("addNodes", nodes);
      }
    };
    TreeView2.prototype.beginEdit = function(node) {
      var ele = this.getElement(node);
      if (isNullOrUndefined(ele) || this.disabled) {
        return;
      }
      this.createTextbox(ele, null);
    };
    TreeView2.prototype.checkAll = function(nodes) {
      if (this.showCheckBox) {
        this.doCheckBoxAction(nodes, true);
      }
    };
    TreeView2.prototype.collapseAll = function(nodes, level, excludeHiddenNodes) {
      if (!isNullOrUndefined(nodes)) {
        this.doGivenAction(nodes, COLLAPSIBLE, false);
      } else {
        if (level > 0) {
          this.collapseByLevel(select$1("." + PARENTITEM, this.element), level, excludeHiddenNodes);
        } else {
          this.collapseAllNodes(excludeHiddenNodes);
        }
      }
    };
    TreeView2.prototype.disableNodes = function(nodes) {
      if (!isNullOrUndefined(nodes)) {
        this.doDisableAction(nodes);
      }
    };
    TreeView2.prototype.enableNodes = function(nodes) {
      if (!isNullOrUndefined(nodes)) {
        this.doEnableAction(nodes);
      }
    };
    TreeView2.prototype.ensureVisible = function(node) {
      var parentsId = [];
      if (this.dataType == 1) {
        var nodeData = this.getTreeData(node);
        while (nodeData.length != 0 && !isNullOrUndefined(nodeData[0][this.fields.parentID])) {
          parentsId.push(nodeData[0][this.fields.parentID].toString());
          nodeData = this.getTreeData(nodeData[0][this.fields.parentID].toString());
        }
      } else if (this.dataType == 2) {
        parentsId = this.getHierarchicalParentId(node, this.treeData, parentsId).reverse();
      }
      this.expandAll(parentsId);
      var liEle = this.getElement(node);
      if (!isNullOrUndefined(liEle)) {
        if (typeof node == "object") {
          var parents = this.parents(liEle, "." + LISTITEM);
          this.expandAll(parents);
        }
        setTimeout(function() {
          liEle.scrollIntoView({ behavior: "smooth" });
        }, 450);
      }
    };
    TreeView2.prototype.expandAll = function(nodes, level, excludeHiddenNodes) {
      if (!isNullOrUndefined(nodes)) {
        this.doGivenAction(nodes, EXPANDABLE, true);
      } else {
        if (level > 0) {
          this.expandByLevel(select$1("." + PARENTITEM, this.element), level, excludeHiddenNodes);
        } else {
          this.expandAllNodes(excludeHiddenNodes);
        }
      }
    };
    TreeView2.prototype.getAllCheckedNodes = function() {
      var checkNodes = this.checkedNodes;
      return checkNodes;
    };
    TreeView2.prototype.getDisabledNodes = function() {
      var disabledNodes = this.disableNode;
      return disabledNodes;
    };
    TreeView2.prototype.getNode = function(node) {
      var ele = this.getElement(node);
      return this.getNodeData(ele, true);
    };
    TreeView2.prototype.getTreeData = function(node) {
      var id = this.getId(node);
      this.updatePersistProp();
      if (isNullOrUndefined(id)) {
        return this.treeData;
      } else {
        var data = this.getNodeObject(id);
        return isNullOrUndefined(data) ? [] : [data];
      }
    };
    TreeView2.prototype.moveNodes = function(sourceNodes, target, index, preventTargetExpand) {
      var dropLi = this.getElement(target);
      var nodeData = [];
      if (isNullOrUndefined(dropLi)) {
        return;
      }
      for (var i = 0; i < sourceNodes.length; i++) {
        var dragLi = this.getElement(sourceNodes[i]);
        nodeData.push(this.getNode(dragLi));
        if (isNullOrUndefined(dragLi) || dropLi.isSameNode(dragLi) || this.isDescendant(dragLi, dropLi)) {
          continue;
        }
        this.preventExpand = preventTargetExpand;
        this.dropAsChildNode(dragLi, dropLi, this, index);
      }
      if (this.fields.dataSource instanceof DataManager === false) {
        this.preventExpand = false;
      }
      this.triggerEvent("moveNodes", nodeData);
    };
    TreeView2.prototype.refreshNode = function(target, newData) {
      if (isNullOrUndefined(target) || isNullOrUndefined(newData)) {
        return;
      }
      var id;
      var isRefreshChild = false;
      if (this.dataType == 1 && newData.length > 1) {
        isRefreshChild = true;
      } else if (this.dataType == 2 && newData.length === 1) {
        var updatedChildValue = getValue(this.fields.child.toString(), newData[0]);
        if (!isNullOrUndefined(updatedChildValue)) {
          isRefreshChild = true;
        }
      }
      var liEle = this.getElement(target);
      id = liEle ? liEle.getAttribute("data-uid") : target ? target.toString() : null;
      this.refreshData = this.getNodeObject(id);
      newData = JSON.parse(JSON.stringify(newData));
      var newNodeData;
      var parentData;
      if (this.dataType == 1 && isRefreshChild) {
        for (var k = 0; k < newData.length; k++) {
          if (isNullOrUndefined(newData[k][this.fields.parentID])) {
            parentData = newData[k];
            newData.splice(k, 1);
            break;
          }
        }
        newNodeData = extend({}, this.refreshData, parentData);
      } else {
        newNodeData = extend({}, this.refreshData, newData[0]);
      }
      if (isNullOrUndefined(liEle)) {
        this.updatePosition(id, newNodeData, isRefreshChild, newData);
        return;
      }
      this.isRefreshed = true;
      var level = parseFloat(liEle.getAttribute("aria-level"));
      var newliEle = ListBase.createListItemFromJson(this.createElement, [newNodeData], this.listBaseOption, level);
      var ul = select$1("." + PARENTITEM, liEle);
      var childItems = getValue(this.fields.child.toString(), newNodeData);
      if (isRefreshChild && ul || isRefreshChild && !isNullOrUndefined(childItems)) {
        var parentEle = liEle.parentElement;
        var index = Array.prototype.indexOf.call(parentEle.childNodes, liEle);
        remove(liEle);
        parentEle.insertBefore(newliEle[0], parentEle.childNodes[index]);
        this.updatePosition(id, newNodeData, isRefreshChild, newData);
        if (isRefreshChild && ul) {
          this.expandAll([id]);
        }
      } else {
        var txtEle = select$1("." + TEXTWRAP, liEle);
        var newTextEle = select$1("." + TEXTWRAP, newliEle[0]);
        var icon = select$1("div." + ICON$3, txtEle);
        var newIcon = select$1("div." + ICON$3, newTextEle);
        if (icon && newIcon) {
          if (newIcon.classList.contains(EXPANDABLE) && icon.classList.contains(COLLAPSIBLE)) {
            removeClass([newIcon], EXPANDABLE);
            addClass([newIcon], COLLAPSIBLE);
          } else if (newIcon.classList.contains(COLLAPSIBLE) && icon.classList.contains(EXPANDABLE)) {
            removeClass([newIcon], COLLAPSIBLE);
            addClass([newIcon], EXPANDABLE);
          } else if (icon.classList.contains("interaction")) {
            addClass([newIcon], "interaction");
          }
        }
        remove(txtEle);
        var fullEle = select$1("." + FULLROW, liEle);
        fullEle.parentNode.insertBefore(newTextEle, fullEle.nextSibling);
        this.updatePosition(id, newNodeData, isRefreshChild, newData);
      }
      liEle = this.getElement(target);
      if (newNodeData[this.fields.tooltip]) {
        liEle.setAttribute("title", newNodeData[this.fields.tooltip]);
      }
      if (newNodeData.hasOwnProperty(this.fields.htmlAttributes) && newNodeData[this.fields.htmlAttributes]) {
        var attr = {};
        merge(attr, newNodeData[this.fields.htmlAttributes]);
        if (attr.class) {
          addClass([liEle], attr.class.split(" "));
          delete attr.class;
        } else {
          attributes(liEle, attr);
        }
      }
      if (this.selectedNodes.indexOf(id) !== -1) {
        liEle.setAttribute("aria-selected", "true");
        addClass([liEle], ACTIVE$3);
      }
      this.isRefreshed = false;
      this.triggerEvent("refreshNode", [this.getNode(liEle)]);
    };
    TreeView2.prototype.removeNodes = function(nodes) {
      if (!isNullOrUndefined(nodes)) {
        if (this.fields.dataSource instanceof DataManager && !this.isOffline) {
          this.crudOperation("delete", nodes);
        } else {
          this.deleteSuccess(nodes);
        }
      }
    };
    TreeView2.prototype.updateNode = function(target, newText) {
      var _this = this;
      if (isNullOrUndefined(target) || isNullOrUndefined(newText) || !this.allowEditing) {
        return;
      }
      var liEle = this.getElement(target);
      if (isNullOrUndefined(liEle)) {
        return;
      }
      var txtEle = select$1("." + LISTTEXT, liEle);
      this.updateOldText(liEle);
      var eventArgs = this.getEditEvent(liEle, null, null);
      this.trigger("nodeEditing", eventArgs, function(observedArgs) {
        if (!observedArgs.cancel) {
          if (_this.fields.dataSource instanceof DataManager && !_this.isOffline) {
            _this.crudOperation("update", null, target, newText, null, null, false);
          } else {
            _this.appendNewText(liEle, txtEle, newText, false);
          }
        }
      });
    };
    TreeView2.prototype.uncheckAll = function(nodes) {
      if (this.showCheckBox) {
        this.doCheckBoxAction(nodes, false);
      }
    };
    var TreeView_1;
    __decorate$i([
      Property(false)
    ], TreeView2.prototype, "allowDragAndDrop", void 0);
    __decorate$i([
      Property(false)
    ], TreeView2.prototype, "allowEditing", void 0);
    __decorate$i([
      Property(false)
    ], TreeView2.prototype, "allowMultiSelection", void 0);
    __decorate$i([
      Property(false)
    ], TreeView2.prototype, "allowTextWrap", void 0);
    __decorate$i([
      Complex({}, NodeAnimationSettings)
    ], TreeView2.prototype, "animation", void 0);
    __decorate$i([
      Property()
    ], TreeView2.prototype, "checkedNodes", void 0);
    __decorate$i([
      Property("")
    ], TreeView2.prototype, "cssClass", void 0);
    __decorate$i([
      Property(false)
    ], TreeView2.prototype, "disabled", void 0);
    __decorate$i([
      Property(null)
    ], TreeView2.prototype, "dragArea", void 0);
    __decorate$i([
      Property(false)
    ], TreeView2.prototype, "enableHtmlSanitizer", void 0);
    __decorate$i([
      Property(false)
    ], TreeView2.prototype, "enablePersistence", void 0);
    __decorate$i([
      Property()
    ], TreeView2.prototype, "expandedNodes", void 0);
    __decorate$i([
      Property("Auto")
    ], TreeView2.prototype, "expandOn", void 0);
    __decorate$i([
      Complex({}, FieldsSettings)
    ], TreeView2.prototype, "fields", void 0);
    __decorate$i([
      Property(true)
    ], TreeView2.prototype, "fullRowSelect", void 0);
    __decorate$i([
      Property(true)
    ], TreeView2.prototype, "loadOnDemand", void 0);
    __decorate$i([
      Property()
    ], TreeView2.prototype, "locale", void 0);
    __decorate$i([
      Property()
    ], TreeView2.prototype, "nodeTemplate", void 0);
    __decorate$i([
      Property()
    ], TreeView2.prototype, "selectedNodes", void 0);
    __decorate$i([
      Property("None")
    ], TreeView2.prototype, "sortOrder", void 0);
    __decorate$i([
      Property(false)
    ], TreeView2.prototype, "showCheckBox", void 0);
    __decorate$i([
      Property(true)
    ], TreeView2.prototype, "autoCheck", void 0);
    __decorate$i([
      Property(false)
    ], TreeView2.prototype, "fullRowNavigable", void 0);
    __decorate$i([
      Event$1()
    ], TreeView2.prototype, "actionFailure", void 0);
    __decorate$i([
      Event$1()
    ], TreeView2.prototype, "created", void 0);
    __decorate$i([
      Event$1()
    ], TreeView2.prototype, "dataBound", void 0);
    __decorate$i([
      Event$1()
    ], TreeView2.prototype, "dataSourceChanged", void 0);
    __decorate$i([
      Event$1()
    ], TreeView2.prototype, "drawNode", void 0);
    __decorate$i([
      Event$1()
    ], TreeView2.prototype, "destroyed", void 0);
    __decorate$i([
      Event$1()
    ], TreeView2.prototype, "keyPress", void 0);
    __decorate$i([
      Event$1()
    ], TreeView2.prototype, "nodeChecked", void 0);
    __decorate$i([
      Event$1()
    ], TreeView2.prototype, "nodeChecking", void 0);
    __decorate$i([
      Event$1()
    ], TreeView2.prototype, "nodeClicked", void 0);
    __decorate$i([
      Event$1()
    ], TreeView2.prototype, "nodeCollapsed", void 0);
    __decorate$i([
      Event$1()
    ], TreeView2.prototype, "nodeCollapsing", void 0);
    __decorate$i([
      Event$1()
    ], TreeView2.prototype, "nodeDragging", void 0);
    __decorate$i([
      Event$1()
    ], TreeView2.prototype, "nodeDragStart", void 0);
    __decorate$i([
      Event$1()
    ], TreeView2.prototype, "nodeDragStop", void 0);
    __decorate$i([
      Event$1()
    ], TreeView2.prototype, "nodeDropped", void 0);
    __decorate$i([
      Event$1()
    ], TreeView2.prototype, "nodeEdited", void 0);
    __decorate$i([
      Event$1()
    ], TreeView2.prototype, "nodeEditing", void 0);
    __decorate$i([
      Event$1()
    ], TreeView2.prototype, "nodeExpanded", void 0);
    __decorate$i([
      Event$1()
    ], TreeView2.prototype, "nodeExpanding", void 0);
    __decorate$i([
      Event$1()
    ], TreeView2.prototype, "nodeSelected", void 0);
    __decorate$i([
      Event$1()
    ], TreeView2.prototype, "nodeSelecting", void 0);
    TreeView2 = TreeView_1 = __decorate$i([
      NotifyPropertyChanges
    ], TreeView2);
    return TreeView2;
  }(Component)
);
var __extends$s = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$h = globalThis && globalThis.__decorate || function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i = decorators.length - 1; i >= 0; i--)
      if (d = decorators[i])
        r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var CONTROL$2 = "e-control";
var ROOT$5 = "e-sidebar";
var DOCKER = "e-dock";
var CLOSE = "e-close";
var OPEN = "e-open";
var TRASITION = "e-transition";
var DEFAULTBACKDROP = "e-sidebar-overlay";
var RTL$2 = "e-rtl";
var RIGHT = "e-right";
var LEFT = "e-left";
var OVER = "e-over";
var PUSH = "e-push";
var SLIDE = "e-slide";
var VISIBILITY = "e-visibility";
var DISPLAY = "e-sidebar-display";
var MAINCONTENTANIMATION = "e-content-animation";
var DISABLEANIMATION = "e-disable-animation";
var CONTEXT = "e-sidebar-context";
var SIDEBARABSOLUTE = "e-sidebar-absolute";
var Sidebar = (
  /** @class */
  function(_super) {
    __extends$s(Sidebar2, _super);
    function Sidebar2(options, element2) {
      return _super.call(this, options, element2) || this;
    }
    Sidebar2.prototype.preRender = function() {
      this.setWidth();
    };
    Sidebar2.prototype.render = function() {
      this.initialize();
      this.wireEvents();
      this.renderComplete();
    };
    Sidebar2.prototype.initialize = function() {
      this.setTarget();
      this.addClass();
      this.setZindex();
      if (this.enableDock) {
        this.setDock();
      }
      if (this.isOpen) {
        this.show();
        this.firstRender = true;
      } else {
        this.setMediaQuery();
      }
      this.checkType(true);
      this.setType(this.type);
      this.setCloseOnDocumentClick();
      this.setEnableRTL();
      if (Browser.isDevice) {
        this.windowWidth = window.innerWidth;
      }
    };
    Sidebar2.prototype.setEnableRTL = function() {
      (this.enableRtl ? addClass : removeClass)([this.element], RTL$2);
    };
    Sidebar2.prototype.setTarget = function() {
      this.targetEle = this.element.nextElementSibling;
      this.sidebarEleCopy = this.element.cloneNode(true);
      if (typeof this.target === "string") {
        this.setProperties({ target: document.querySelector(this.target) }, true);
      }
      if (this.target) {
        this.target.insertBefore(this.element, this.target.children[0]);
        addClass([this.element], SIDEBARABSOLUTE);
        addClass([this.target], CONTEXT);
        this.targetEle = this.getTargetElement();
      }
    };
    Sidebar2.prototype.getTargetElement = function() {
      var siblingElement = this.element.nextElementSibling;
      while (!isNullOrUndefined(siblingElement)) {
        if (!siblingElement.classList.contains(ROOT$5)) {
          break;
        }
        siblingElement = siblingElement.nextElementSibling;
      }
      return siblingElement;
    };
    Sidebar2.prototype.setCloseOnDocumentClick = function() {
      if (this.closeOnDocumentClick) {
        EventHandler.add(document, "mousedown touchstart", this.documentclickHandler, this);
      } else {
        EventHandler.remove(document, "mousedown touchstart", this.documentclickHandler);
      }
    };
    Sidebar2.prototype.setWidth = function() {
      if (this.enableDock && this.position === "Left") {
        setStyleAttribute(this.element, { "width": this.setDimension(this.dockSize) });
      } else if (this.enableDock && this.position === "Right") {
        setStyleAttribute(this.element, { "width": this.setDimension(this.dockSize) });
      } else if (!this.enableDock) {
        setStyleAttribute(this.element, { "width": this.setDimension(this.width) });
      }
    };
    Sidebar2.prototype.setDimension = function(width) {
      if (typeof width === "number") {
        width = formatUnit(width);
      } else if (typeof width === "string") {
        width = width.match(/px|%|em/) ? width : formatUnit(width);
      } else {
        width = "100%";
      }
      return width;
    };
    Sidebar2.prototype.setZindex = function() {
      setStyleAttribute(this.element, { "z-index": "" + this.zIndex });
    };
    Sidebar2.prototype.addClass = function() {
      if (this.element.tagName === "EJS-SIDEBAR") {
        addClass([this.element], DISPLAY);
      }
      var classELement = document.querySelector(".e-main-content");
      if (!isNullOrUndefined(classELement || this.targetEle)) {
        addClass([classELement || this.targetEle], [MAINCONTENTANIMATION]);
      }
      this.tabIndex = this.element.hasAttribute("tabindex") ? this.element.getAttribute("tabindex") : null;
      if (!this.enableDock && this.type !== "Auto") {
        addClass([this.element], [VISIBILITY]);
      }
      removeClass([this.element], [OPEN, CLOSE, RIGHT, LEFT, SLIDE, PUSH, OVER]);
      this.element.classList.add(ROOT$5);
      addClass([this.element], this.position === "Right" ? RIGHT : LEFT);
      if (this.enableDock) {
        addClass([this.element], DOCKER);
      }
      if (!isNullOrUndefined(this.tabIndex)) {
        this.element.setAttribute("tabindex", this.tabIndex);
      }
      if (this.type === "Auto" && !Browser.isDevice) {
        this.show();
      } else if (!this.isOpen) {
        addClass([this.element], CLOSE);
      }
    };
    Sidebar2.prototype.checkType = function(val) {
      if (!(this.type === "Push" || this.type === "Over" || this.type === "Slide")) {
        this.type = "Auto";
      } else {
        if (!this.element.classList.contains(CLOSE) && !val) {
          this.hide();
        }
      }
    };
    Sidebar2.prototype.transitionEnd = function(e) {
      this.setDock();
      if (!isNullOrUndefined(e) && !this.firstRender) {
        this.triggerChange();
      }
      this.firstRender = false;
      EventHandler.remove(this.element, "transitionend", this.transitionEnd);
    };
    Sidebar2.prototype.destroyBackDrop = function() {
      var sibling = document.querySelector(".e-main-content") || this.targetEle;
      if (this.target && this.showBackdrop && sibling && !isNullOrUndefined(this.defaultBackdropDiv)) {
        removeClass([this.defaultBackdropDiv], DEFAULTBACKDROP);
      } else if (this.showBackdrop && this.modal) {
        this.modal.style.display = "none";
        this.modal.outerHTML = "";
        this.modal = null;
      }
    };
    Sidebar2.prototype.hide = function(e) {
      var _this = this;
      var closeArguments = {
        model: this,
        element: this.element,
        cancel: false,
        isInteracted: !isNullOrUndefined(e),
        event: e || null
      };
      this.trigger("close", closeArguments, function(observedcloseArgs) {
        if (!observedcloseArgs.cancel) {
          if (_this.element.classList.contains(CLOSE)) {
            return;
          }
          if (_this.element.classList.contains(OPEN) && !_this.animate) {
            _this.triggerChange();
          }
          addClass([_this.element], CLOSE);
          removeClass([_this.element], OPEN);
          setStyleAttribute(_this.element, { "width": formatUnit(_this.enableDock ? _this.dockSize : _this.width) });
          _this.setType(_this.type);
          var sibling = document.querySelector(".e-main-content") || _this.targetEle;
          if (!_this.enableDock && sibling) {
            sibling.style.transform = "translateX(0px)";
            sibling.style[_this.position === "Left" ? "marginLeft" : "marginRight"] = "0px";
          }
          _this.destroyBackDrop();
          _this.setAnimation();
          if (_this.type === "Slide") {
            document.body.classList.remove("e-sidebar-overflow");
          }
          _this.setProperties({ isOpen: false }, true);
          if (_this.enableDock) {
            setTimeout(function() {
              return _this.setTimeOut();
            }, 50);
          }
          EventHandler.add(_this.element, "transitionend", _this.transitionEnd, _this);
        }
      });
    };
    Sidebar2.prototype.setTimeOut = function() {
      var sibling = document.querySelector(".e-main-content") || this.targetEle;
      var elementWidth = this.element.getBoundingClientRect().width;
      if (this.element.classList.contains(OPEN) && sibling && !(this.type === "Over" && this.enableDock)) {
        if (this.position === "Left") {
          sibling.style.marginLeft = this.setDimension(this.width === "auto" ? elementWidth : this.width);
        } else {
          sibling.style.marginRight = this.setDimension(this.width === "auto" ? elementWidth : this.width);
        }
      } else if (this.element.classList.contains(CLOSE) && sibling) {
        if (this.position === "Left") {
          sibling.style.marginLeft = this.setDimension(this.dockSize === "auto" ? elementWidth : this.dockSize);
        } else {
          sibling.style.marginRight = this.setDimension(this.dockSize === "auto" ? elementWidth : this.dockSize);
        }
      }
    };
    Sidebar2.prototype.show = function(e) {
      var _this = this;
      var openArguments = {
        model: this,
        element: this.element,
        cancel: false,
        isInteracted: !isNullOrUndefined(e),
        event: e || null
      };
      this.trigger("open", openArguments, function(observedopenArgs) {
        if (!observedopenArgs.cancel) {
          removeClass([_this.element], VISIBILITY);
          if (_this.element.classList.contains(OPEN)) {
            return;
          }
          if (_this.element.classList.contains(CLOSE) && !_this.animate) {
            _this.triggerChange();
          }
          addClass([_this.element], [OPEN, TRASITION]);
          setStyleAttribute(_this.element, { "transform": "" });
          removeClass([_this.element], CLOSE);
          setStyleAttribute(_this.element, { "width": formatUnit(_this.width) });
          _this.setType(_this.type);
          _this.createBackDrop();
          _this.setAnimation();
          if (_this.type === "Slide") {
            document.body.classList.add("e-sidebar-overflow");
          }
          _this.setProperties({ isOpen: true }, true);
          EventHandler.add(_this.element, "transitionend", _this.transitionEnd, _this);
        }
      });
    };
    Sidebar2.prototype.setAnimation = function() {
      if (this.animate) {
        removeClass([this.element], DISABLEANIMATION);
      } else {
        addClass([this.element], DISABLEANIMATION);
      }
    };
    Sidebar2.prototype.triggerChange = function() {
      var changeArguments = { name: "change", element: this.element };
      this.trigger("change", changeArguments);
    };
    Sidebar2.prototype.setDock = function() {
      if (this.enableDock && this.position === "Left" && !this.getState()) {
        setStyleAttribute(this.element, { "transform": "translateX(-100%) translateX(" + this.setDimension(this.dockSize) + ")" });
      } else if (this.enableDock && this.position === "Right" && !this.getState()) {
        setStyleAttribute(this.element, { "transform": "translateX(100%) translateX(-" + this.setDimension(this.dockSize) + ")" });
      }
      if (this.element.classList.contains(CLOSE) && this.enableDock) {
        setStyleAttribute(this.element, { "width": this.setDimension(this.dockSize) });
      }
    };
    Sidebar2.prototype.createBackDrop = function() {
      if (this.target && this.showBackdrop && this.getState()) {
        var targetString = this.target;
        var sibling = document.querySelector(".e-main-content") || this.targetEle;
        this.defaultBackdropDiv = this.createElement("div");
        addClass([this.defaultBackdropDiv], DEFAULTBACKDROP);
        setStyleAttribute(this.defaultBackdropDiv, { height: targetString.style.height });
        sibling.appendChild(this.defaultBackdropDiv);
      } else if (this.showBackdrop && !this.modal && this.getState()) {
        this.modal = this.createElement("div");
        this.modal.className = DEFAULTBACKDROP;
        this.modal.style.display = "block";
        document.body.appendChild(this.modal);
      }
    };
    Sidebar2.prototype.getPersistData = function() {
      return this.addOnPersist(["type", "position", "isOpen"]);
    };
    Sidebar2.prototype.getModuleName = function() {
      return "sidebar";
    };
    Sidebar2.prototype.toggle = function() {
      if (this.element.classList.contains(OPEN)) {
        this.hide();
      } else {
        this.show();
      }
    };
    Sidebar2.prototype.getState = function() {
      return this.element.classList.contains(OPEN) ? true : false;
    };
    Sidebar2.prototype.setMediaQuery = function() {
      if (this.mediaQuery) {
        var media = false;
        if (typeof this.mediaQuery === "string") {
          media = window.matchMedia(this.mediaQuery).matches;
        } else {
          media = this.mediaQuery.matches;
        }
        if (media && this.windowWidth !== window.innerWidth) {
          this.show();
        } else if (this.getState() && this.windowWidth !== window.innerWidth) {
          this.hide();
        }
      }
    };
    Sidebar2.prototype.resize = function() {
      if (this.type === "Auto") {
        if (Browser.isDevice) {
          addClass([this.element], OVER);
        } else {
          addClass([this.element], PUSH);
        }
      }
      this.setMediaQuery();
      if (Browser.isDevice) {
        this.windowWidth = window.innerWidth;
      }
    };
    Sidebar2.prototype.documentclickHandler = function(e) {
      if (closest(e.target, "." + CONTROL$2 + "." + ROOT$5)) {
        return;
      }
      this.hide(e);
    };
    Sidebar2.prototype.enableGestureHandler = function(args) {
      if (!this.isOpen && this.position === "Left" && args.swipeDirection === "Right" && (args.startX <= 20 && args.distanceX >= 50 && args.velocity >= 0.5)) {
        this.show();
      } else if (this.isOpen && this.position === "Left" && args.swipeDirection === "Left") {
        this.hide();
      } else if (this.isOpen && this.position === "Right" && args.swipeDirection === "Right") {
        this.hide();
      } else if (!this.isOpen && this.position === "Right" && args.swipeDirection === "Left" && (window.innerWidth - args.startX <= 20 && args.distanceX >= 50 && args.velocity >= 0.5)) {
        this.show();
      }
    };
    Sidebar2.prototype.setEnableGestures = function() {
      if (this.enableGestures) {
        this.mainContentEle = new Touch(document.body, { swipe: this.enableGestureHandler.bind(this) });
        this.sidebarEle = new Touch(this.element, { swipe: this.enableGestureHandler.bind(this) });
      } else {
        if (this.mainContentEle && this.sidebarEle) {
          this.mainContentEle.destroy();
          this.sidebarEle.destroy();
        }
      }
    };
    Sidebar2.prototype.wireEvents = function() {
      this.setEnableGestures();
      EventHandler.add(window, "resize", this.resize, this);
    };
    Sidebar2.prototype.unWireEvents = function() {
      EventHandler.remove(window, "resize", this.resize);
      EventHandler.remove(document, "mousedown touchstart", this.documentclickHandler);
      if (this.mainContentEle) {
        this.mainContentEle.destroy();
      }
      if (this.sidebarEle) {
        this.sidebarEle.destroy();
      }
    };
    Sidebar2.prototype.onPropertyChanged = function(newProp, oldProp) {
      var sibling = document.querySelector(".e-main-content") || this.targetEle;
      var isRendered = this.isServerRendered;
      for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {
        var prop = _a[_i];
        switch (prop) {
          case "isOpen":
            if (this.isOpen) {
              this.show();
            } else {
              this.hide();
            }
            break;
          case "width":
            this.setWidth();
            if (!this.getState()) {
              this.setDock();
            }
            break;
          case "animate":
            this.setAnimation();
            break;
          case "type":
            this.checkType(false);
            removeClass([this.element], [VISIBILITY]);
            this.addClass();
            addClass([this.element], this.type === "Auto" ? Browser.isDevice ? ["e-over"] : ["e-push"] : ["e-" + this.type.toLowerCase()]);
            break;
          case "position":
            this.element.style.transform = "";
            this.setDock();
            if (sibling) {
              sibling.style[this.position === "Left" ? "marginRight" : "marginLeft"] = "0px";
            }
            if (this.position === "Right") {
              removeClass([this.element], LEFT);
              addClass([this.element], RIGHT);
            } else {
              removeClass([this.element], RIGHT);
              addClass([this.element], LEFT);
            }
            this.setType(this.type);
            break;
          case "showBackdrop":
            if (this.showBackdrop) {
              this.createBackDrop();
            } else {
              if (this.modal) {
                this.modal.style.display = "none";
                this.modal.outerHTML = "";
                this.modal = null;
              }
            }
            break;
          case "target":
            if (typeof this.target === "string") {
              this.setProperties({ target: document.querySelector(this.target) }, true);
            }
            if (isNullOrUndefined(this.target)) {
              removeClass([this.element], SIDEBARABSOLUTE);
              removeClass([oldProp.target], CONTEXT);
              setStyleAttribute(sibling, { "margin-left": 0, "margin-right": 0 });
              document.body.insertAdjacentElement("afterbegin", this.element);
            }
            this.isServerRendered = false;
            _super.prototype.refresh.call(this);
            this.isServerRendered = isRendered;
            break;
          case "closeOnDocumentClick":
            this.setCloseOnDocumentClick();
            break;
          case "enableDock":
            if (!this.getState()) {
              this.setDock();
            }
            break;
          case "zIndex":
            this.setZindex();
            break;
          case "mediaQuery":
            this.setMediaQuery();
            break;
          case "enableGestures":
            this.setEnableGestures();
            break;
          case "enableRtl":
            this.setEnableRTL();
            break;
        }
      }
    };
    Sidebar2.prototype.setType = function(type) {
      var elementWidth = this.element.getBoundingClientRect().width;
      this.setZindex();
      var sibling = document.querySelector(".e-main-content") || this.targetEle;
      if (sibling) {
        sibling.style.transform = "translateX(0px)";
        if (!Browser.isDevice && this.type !== "Auto" && !(this.type === "Over" && this.enableDock)) {
          sibling.style[this.position === "Left" ? "marginLeft" : "marginRight"] = "0px";
        }
      }
      var margin = this.position === "Left" ? elementWidth + "px" : elementWidth + "px";
      var eleWidth = this.position === "Left" ? elementWidth : -elementWidth;
      removeClass([this.element], [PUSH, OVER, SLIDE]);
      switch (type) {
        case "Push":
          addClass([this.element], [PUSH]);
          if (sibling && (this.enableDock || this.element.classList.contains(OPEN))) {
            sibling.style[this.position === "Left" ? "marginLeft" : "marginRight"] = margin;
          }
          break;
        case "Slide":
          addClass([this.element], [SLIDE]);
          if (sibling && (this.enableDock || this.element.classList.contains(OPEN))) {
            sibling.style.transform = "translateX(" + eleWidth + "px)";
          }
          break;
        case "Over":
          addClass([this.element], [OVER]);
          if (this.enableDock && (this.element.classList.contains(CLOSE) || this.isOpen)) {
            if (sibling) {
              sibling.style[this.position === "Left" ? "marginLeft" : "marginRight"] = this.setDimension(this.dockSize);
            }
          }
          break;
        case "Auto":
          addClass([this.element], [TRASITION]);
          if (Browser.isDevice) {
            if (sibling && this.enableDock && !this.getState()) {
              sibling.style[this.position === "Left" ? "marginLeft" : "marginRight"] = margin;
              addClass([this.element], PUSH);
            } else {
              addClass([this.element], OVER);
            }
          } else {
            addClass([this.element], PUSH);
            if (sibling && (this.enableDock || this.element.classList.contains(OPEN))) {
              sibling.style[this.position === "Left" ? "marginLeft" : "marginRight"] = margin;
            }
          }
          this.createBackDrop();
      }
    };
    Sidebar2.prototype.destroy = function() {
      _super.prototype.destroy.call(this);
      if (this.target) {
        removeClass([this.target], CONTEXT);
      }
      this.destroyBackDrop();
      if (this.element) {
        removeClass([this.element], [OPEN, CLOSE, PUSH, SLIDE, OVER, LEFT, RIGHT, TRASITION]);
        removeClass([this.element], SIDEBARABSOLUTE);
        this.element.style.width = "";
        this.element.style.zIndex = "";
        this.element.style.transform = "";
        if (!isNullOrUndefined(this.sidebarEleCopy.getAttribute("tabindex"))) {
          this.element.setAttribute("tabindex", this.tabIndex);
        } else {
          this.element.removeAttribute("tabindex");
        }
      }
      this.windowWidth = null;
      var sibling = document.querySelector(".e-main-content") || this.targetEle;
      if (!isNullOrUndefined(sibling)) {
        sibling.style.margin = "";
        sibling.style.transform = "";
      }
      this.unWireEvents();
    };
    __decorate$h([
      Property("auto")
    ], Sidebar2.prototype, "dockSize", void 0);
    __decorate$h([
      Property(null)
    ], Sidebar2.prototype, "mediaQuery", void 0);
    __decorate$h([
      Property(false)
    ], Sidebar2.prototype, "enableDock", void 0);
    __decorate$h([
      Property("en-US")
    ], Sidebar2.prototype, "locale", void 0);
    __decorate$h([
      Property(false)
    ], Sidebar2.prototype, "enablePersistence", void 0);
    __decorate$h([
      Property(true)
    ], Sidebar2.prototype, "enableGestures", void 0);
    __decorate$h([
      Property(false)
    ], Sidebar2.prototype, "isOpen", void 0);
    __decorate$h([
      Property(false)
    ], Sidebar2.prototype, "enableRtl", void 0);
    __decorate$h([
      Property(true)
    ], Sidebar2.prototype, "animate", void 0);
    __decorate$h([
      Property("auto")
    ], Sidebar2.prototype, "height", void 0);
    __decorate$h([
      Property(false)
    ], Sidebar2.prototype, "closeOnDocumentClick", void 0);
    __decorate$h([
      Property("Left")
    ], Sidebar2.prototype, "position", void 0);
    __decorate$h([
      Property(null)
    ], Sidebar2.prototype, "target", void 0);
    __decorate$h([
      Property(false)
    ], Sidebar2.prototype, "showBackdrop", void 0);
    __decorate$h([
      Property("Auto")
    ], Sidebar2.prototype, "type", void 0);
    __decorate$h([
      Property("auto")
    ], Sidebar2.prototype, "width", void 0);
    __decorate$h([
      Property(1e3)
    ], Sidebar2.prototype, "zIndex", void 0);
    __decorate$h([
      Event$1()
    ], Sidebar2.prototype, "created", void 0);
    __decorate$h([
      Event$1()
    ], Sidebar2.prototype, "close", void 0);
    __decorate$h([
      Event$1()
    ], Sidebar2.prototype, "open", void 0);
    __decorate$h([
      Event$1()
    ], Sidebar2.prototype, "change", void 0);
    __decorate$h([
      Event$1()
    ], Sidebar2.prototype, "destroyed", void 0);
    Sidebar2 = __decorate$h([
      NotifyPropertyChanges
    ], Sidebar2);
    return Sidebar2;
  }(Component)
);
var FLOATLINE = "e-float-line";
var FLOATTEXT = "e-float-text";
var LABELTOP = "e-label-top";
var LABELBOTTOM = "e-label-bottom";
function createFloatLabel(overAllWrapper, searchWrapper, element2, inputElement, value, floatLabelType, placeholder) {
  var floatLinelement = createElement("span", { className: FLOATLINE });
  var floatLabelElement = createElement("label", { className: FLOATTEXT });
  var id = element2.getAttribute("id") ? element2.getAttribute("id") : getUniqueID("ej2_multiselect");
  element2.id = id;
  if (!isNullOrUndefined(element2.id) && element2.id !== "") {
    floatLabelElement.id = "label_" + element2.id.replace(/ /g, "_");
    attributes(inputElement, { "aria-labelledby": floatLabelElement.id });
  }
  if (!isNullOrUndefined(inputElement.placeholder) && inputElement.placeholder !== "") {
    floatLabelElement.innerText = encodePlaceholder(inputElement.placeholder);
    inputElement.removeAttribute("placeholder");
  }
  floatLabelElement.innerText = encodePlaceholder(placeholder);
  searchWrapper.appendChild(floatLinelement);
  searchWrapper.appendChild(floatLabelElement);
  overAllWrapper.classList.add("e-float-input");
  updateFloatLabelState(value, floatLabelElement);
  if (floatLabelType === "Always") {
    if (floatLabelElement.classList.contains(LABELBOTTOM)) {
      removeClass([floatLabelElement], LABELBOTTOM);
    }
    addClass([floatLabelElement], LABELTOP);
  }
}
function updateFloatLabelState(value, label) {
  if (value && value.length > 0) {
    addClass([label], LABELTOP);
    removeClass([label], LABELBOTTOM);
  } else {
    removeClass([label], LABELTOP);
    addClass([label], LABELBOTTOM);
  }
}
function removeFloating(overAllWrapper, componentWrapper, searchWrapper, inputElement, value, floatLabelType, placeholder) {
  var placeholderElement = componentWrapper.querySelector("." + FLOATTEXT);
  var floatLine = componentWrapper.querySelector("." + FLOATLINE);
  var placeholderText;
  if (!isNullOrUndefined(placeholderElement)) {
    placeholderText = placeholderElement.innerText;
    detach(searchWrapper.querySelector("." + FLOATTEXT));
    setPlaceHolder(value, inputElement, placeholderText);
    if (!isNullOrUndefined(floatLine)) {
      detach(searchWrapper.querySelector("." + FLOATLINE));
    }
  } else {
    placeholderText = placeholder !== null ? placeholder : "";
    setPlaceHolder(value, inputElement, placeholderText);
  }
  overAllWrapper.classList.remove("e-float-input");
}
function setPlaceHolder(value, inputElement, placeholder) {
  if (value && value.length) {
    inputElement.placeholder = "";
  } else {
    inputElement.placeholder = placeholder;
  }
}
function floatLabelFocus(overAllWrapper, componentWrapper) {
  overAllWrapper.classList.add("e-input-focus");
  var label = componentWrapper.querySelector("." + FLOATTEXT);
  if (!isNullOrUndefined(label)) {
    addClass([label], LABELTOP);
    if (label.classList.contains(LABELBOTTOM)) {
      removeClass([label], LABELBOTTOM);
    }
  }
}
function floatLabelBlur(overAllWrapper, componentWrapper, value, floatLabelType, placeholder) {
  overAllWrapper.classList.remove("e-input-focus");
  var label = componentWrapper.querySelector("." + FLOATTEXT);
  if (value && value.length <= 0 && floatLabelType === "Auto" && !isNullOrUndefined(label)) {
    if (label.classList.contains(LABELTOP)) {
      removeClass([label], LABELTOP);
    }
    addClass([label], LABELBOTTOM);
  }
}
function encodePlaceholder(placeholder) {
  var result = "";
  if (!isNullOrUndefined(placeholder) && placeholder !== "") {
    var spanElement = document.createElement("span");
    spanElement.innerHTML = '<input  placeholder="' + placeholder + '"/>';
    var hiddenInput = spanElement.children[0];
    result = hiddenInput.placeholder;
  }
  return result;
}
var __extends$r = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$g = globalThis && globalThis.__decorate || function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i = decorators.length - 1; i >= 0; i--)
      if (d = decorators[i])
        r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var FOCUS$2 = "e-input-focus";
var DISABLED$3 = "e-disabled";
var OVER_ALL_WRAPPER = "e-multiselect e-input-group e-control-wrapper";
var ELEMENT_WRAPPER = "e-multi-select-wrapper";
var ELEMENT_MOBILE_WRAPPER = "e-mob-wrapper";
var HIDE_LIST = "e-hide-listitem";
var DELIMITER_VIEW = "e-delim-view";
var CHIP_WRAPPER = "e-chips-collection";
var CHIP = "e-chips";
var CHIP_CONTENT = "e-chipcontent";
var CHIP_CLOSE = "e-chips-close";
var CHIP_SELECTED = "e-chip-selected";
var SEARCHBOX_WRAPPER = "e-searcher";
var DELIMITER_VIEW_WRAPPER = "e-delimiter";
var ZERO_SIZE = "e-zero-size";
var REMAIN_WRAPPER = "e-remain";
var CLOSEICON_CLASS = "e-chips-close e-close-hooker";
var DELIMITER_WRAPPER = "e-delim-values";
var POPUP_WRAPPER = "e-ddl e-popup e-multi-select-list-wrapper";
var INPUT_ELEMENT = "e-dropdownbase";
var RTL_CLASS = "e-rtl";
var CLOSE_ICON_HIDE = "e-close-icon-hide";
var MOBILE_CHIP = "e-mob-chip";
var FOOTER$1 = "e-ddl-footer";
var HEADER$2 = "e-ddl-header";
var DISABLE_ICON = "e-ddl-disable-icon";
var SPINNER_CLASS = "e-ms-spinner-icon";
var HIDDEN_ELEMENT = "e-multi-hidden";
var destroy = "destroy";
var dropdownIcon = "e-input-group-icon e-ddl-icon";
var iconAnimation = "e-icon-anim";
var TOTAL_COUNT_WRAPPER = "e-delim-total";
var BOX_ELEMENT = "e-multiselect-box";
var FILTERPARENT = "e-filter-parent";
var CUSTOM_WIDTH = "e-search-custom-width";
var FILTERINPUT = "e-input-filter";
var MultiSelect = (
  /** @class */
  function(_super) {
    __extends$r(MultiSelect2, _super);
    function MultiSelect2(option, element2) {
      var _this = _super.call(this, option, element2) || this;
      _this.clearIconWidth = 0;
      _this.previousFilterText = "";
      _this.isValidKey = false;
      _this.selectAllEventData = [];
      _this.selectAllEventEle = [];
      _this.resetMainList = null;
      _this.resetFilteredData = false;
      _this.scrollFocusStatus = false;
      _this.keyDownStatus = false;
      return _this;
    }
    MultiSelect2.prototype.enableRTL = function(state) {
      if (state) {
        this.overAllWrapper.classList.add(RTL_CLASS);
      } else {
        this.overAllWrapper.classList.remove(RTL_CLASS);
      }
      if (this.popupObj) {
        this.popupObj.enableRtl = state;
        this.popupObj.dataBind();
      }
    };
    MultiSelect2.prototype.requiredModules = function() {
      var modules = [];
      if (this.mode === "CheckBox") {
        this.isGroupChecking = this.enableGroupCheckBox;
        if (this.enableGroupCheckBox) {
          var prevOnChange = this.isProtectedOnChange;
          this.isProtectedOnChange = true;
          this.enableSelectionOrder = false;
          this.isProtectedOnChange = prevOnChange;
        }
        this.allowCustomValue = false;
        this.hideSelectedItem = false;
        this.closePopupOnSelect = false;
        modules.push({
          member: "CheckBoxSelection",
          args: [this]
        });
      }
      return modules;
    };
    MultiSelect2.prototype.updateHTMLAttribute = function() {
      if (Object.keys(this.htmlAttributes).length) {
        for (var _i = 0, _a = Object.keys(this.htmlAttributes); _i < _a.length; _i++) {
          var htmlAttr = _a[_i];
          switch (htmlAttr) {
            case "class": {
              var updatedClassValue = this.htmlAttributes["" + htmlAttr].replace(/\s+/g, " ").trim();
              if (updatedClassValue !== "") {
                addClass([this.overAllWrapper], updatedClassValue.split(" "));
                addClass([this.popupWrapper], updatedClassValue.split(" "));
              }
              break;
            }
            case "disabled":
              this.enable(false);
              break;
            case "placeholder":
              if (!this.placeholder) {
                this.inputElement.setAttribute(htmlAttr, this.htmlAttributes["" + htmlAttr]);
                this.setProperties({ placeholder: this.inputElement.placeholder }, true);
                this.refreshPlaceHolder();
              }
              break;
            default: {
              var defaultAttr = ["id"];
              var validateAttr = ["name", "required", "aria-required", "form"];
              var containerAttr2 = ["title", "role", "style", "class"];
              if (defaultAttr.indexOf(htmlAttr) > -1) {
                this.element.setAttribute(htmlAttr, this.htmlAttributes["" + htmlAttr]);
              } else if (htmlAttr.indexOf("data") === 0 || validateAttr.indexOf(htmlAttr) > -1) {
                this.hiddenElement.setAttribute(htmlAttr, this.htmlAttributes["" + htmlAttr]);
              } else if (containerAttr2.indexOf(htmlAttr) > -1) {
                this.overAllWrapper.setAttribute(htmlAttr, this.htmlAttributes["" + htmlAttr]);
              } else if (htmlAttr !== "size" && !isNullOrUndefined(this.inputElement)) {
                this.inputElement.setAttribute(htmlAttr, this.htmlAttributes["" + htmlAttr]);
              }
              break;
            }
          }
        }
      }
    };
    MultiSelect2.prototype.updateReadonly = function(state) {
      if (!isNullOrUndefined(this.inputElement)) {
        if (state || this.mode === "CheckBox") {
          this.inputElement.setAttribute("readonly", "true");
        } else {
          this.inputElement.removeAttribute("readonly");
        }
      }
    };
    MultiSelect2.prototype.updateClearButton = function(state) {
      if (state) {
        if (this.overAllClear.parentNode) {
          this.overAllClear.style.display = "";
        } else {
          this.componentWrapper.appendChild(this.overAllClear);
        }
        this.componentWrapper.classList.remove(CLOSE_ICON_HIDE);
      } else {
        this.overAllClear.style.display = "none";
        this.componentWrapper.classList.add(CLOSE_ICON_HIDE);
      }
    };
    MultiSelect2.prototype.updateCssClass = function() {
      if (!isNullOrUndefined(this.cssClass) && this.cssClass !== "") {
        var updatedCssClassValues = this.cssClass;
        updatedCssClassValues = this.cssClass.replace(/\s+/g, " ").trim();
        if (updatedCssClassValues !== "") {
          addClass([this.overAllWrapper], updatedCssClassValues.split(" "));
          addClass([this.popupWrapper], updatedCssClassValues.split(" "));
        }
      }
    };
    MultiSelect2.prototype.updateOldPropCssClass = function(oldClass) {
      if (!isNullOrUndefined(oldClass) && oldClass !== "") {
        oldClass = oldClass.replace(/\s+/g, " ").trim();
        if (oldClass !== "") {
          removeClass([this.overAllWrapper], oldClass.split(" "));
          removeClass([this.popupWrapper], oldClass.split(" "));
        }
      }
    };
    MultiSelect2.prototype.onPopupShown = function(e) {
      var _this = this;
      if (Browser.isDevice && (this.mode === "CheckBox" && this.allowFiltering)) {
        var proxy_1 = this;
        window.onpopstate = function() {
          proxy_1.hidePopup();
          proxy_1.inputElement.focus();
        };
        history.pushState({}, "");
      }
      var animModel = { name: "FadeIn", duration: 100 };
      var eventArgs = { popup: this.popupObj, event: e, cancel: false, animation: animModel };
      this.trigger("open", eventArgs, function(eventArgs2) {
        if (!eventArgs2.cancel) {
          _this.focusAtFirstListItem();
          if (_this.popupObj) {
            document.body.appendChild(_this.popupObj.element);
          }
          if (_this.mode === "CheckBox" && _this.enableGroupCheckBox && !isNullOrUndefined(_this.fields.groupBy)) {
            _this.updateListItems(_this.list.querySelectorAll("li.e-list-item"), _this.mainList.querySelectorAll("li.e-list-item"));
          }
          if (_this.mode === "CheckBox" || _this.showDropDownIcon) {
            addClass([_this.overAllWrapper], [iconAnimation]);
          }
          _this.refreshPopup();
          _this.renderReactTemplates();
          if (_this.popupObj) {
            _this.popupObj.show(eventArgs2.animation, _this.zIndex === 1e3 ? _this.element : null);
          }
          attributes(_this.inputElement, { "aria-expanded": "true", "aria-owns": _this.inputElement.id + "_options" });
          _this.updateAriaActiveDescendant();
          if (_this.isFirstClick) {
            _this.loadTemplate();
          }
        }
      });
    };
    MultiSelect2.prototype.updateListItems = function(listItems, mainListItems) {
      for (var i = 0; i < listItems.length; i++) {
        this.findGroupStart(listItems[i]);
        this.findGroupStart(mainListItems[i]);
      }
      this.deselectHeader();
    };
    MultiSelect2.prototype.loadTemplate = function() {
      this.refreshListItems(null);
      if (this.mode === "CheckBox") {
        this.removeFocus();
      }
      this.notify("reOrder", { module: "CheckBoxSelection", enable: this.mode === "CheckBox", e: this });
    };
    MultiSelect2.prototype.setScrollPosition = function() {
      if ((!this.hideSelectedItem && this.mode !== "CheckBox" || this.mode === "CheckBox" && !this.enableSelectionOrder) && (!isNullOrUndefined(this.value) && this.value.length > 0)) {
        var valueEle = this.findListElement(this.hideSelectedItem ? this.ulElement : this.list, "li", "data-value", this.value[this.value.length - 1]);
        if (!isNullOrUndefined(valueEle)) {
          this.scrollBottom(valueEle);
        }
      }
    };
    MultiSelect2.prototype.focusAtFirstListItem = function() {
      if (this.ulElement && this.ulElement.querySelector("li." + dropDownBaseClasses.li)) {
        var element2 = void 0;
        if (this.mode === "CheckBox") {
          this.removeFocus();
          return;
        } else {
          element2 = this.ulElement.querySelector("li." + dropDownBaseClasses.li + ":not(." + HIDE_LIST + ")");
        }
        if (element2 !== null) {
          this.removeFocus();
          this.addListFocus(element2);
        }
      }
    };
    MultiSelect2.prototype.focusAtLastListItem = function(data) {
      var activeElement;
      if (data) {
        activeElement = Search(data, this.liCollections, "StartsWith", this.ignoreCase);
      } else {
        if (this.value && this.value.length) {
          Search(this.value[this.value.length - 1], this.liCollections, "StartsWith", this.ignoreCase);
        } else {
          activeElement = null;
        }
      }
      if (activeElement && activeElement.item !== null) {
        this.addListFocus(activeElement.item);
        this.scrollBottom(activeElement.item, activeElement.index);
      }
    };
    MultiSelect2.prototype.getAriaAttributes = function() {
      var ariaAttributes = {
        "aria-disabled": "false",
        "role": "combobox",
        "aria-expanded": "false"
      };
      return ariaAttributes;
    };
    MultiSelect2.prototype.updateListARIA = function() {
      if (!isNullOrUndefined(this.ulElement)) {
        attributes(this.ulElement, { "id": this.element.id + "_options", "role": "listbox", "aria-hidden": "false" });
      }
      var disableStatus = !isNullOrUndefined(this.inputElement) && this.inputElement.disabled ? true : false;
      if (!this.isPopupOpen() && !isNullOrUndefined(this.inputElement)) {
        attributes(this.inputElement, this.getAriaAttributes());
      }
      if (disableStatus) {
        attributes(this.inputElement, { "aria-disabled": "true" });
      }
      this.ensureAriaDisabled(disableStatus ? "true" : "false");
    };
    MultiSelect2.prototype.ensureAriaDisabled = function(status) {
      if (this.htmlAttributes && this.htmlAttributes["aria-disabled"]) {
        var attr = this.htmlAttributes;
        extend(attr, { "aria-disabled": status }, attr);
        this.setProperties({ htmlAttributes: attr }, true);
      }
    };
    MultiSelect2.prototype.removelastSelection = function(e) {
      var elements = this.chipCollectionWrapper.querySelectorAll("span." + CHIP);
      var value = elements[elements.length - 1].getAttribute("data-value");
      if (!isNullOrUndefined(this.value)) {
        this.tempValues = this.value.slice();
      }
      var customValue = this.getFormattedValue(value);
      if (this.allowCustomValue && (value !== "false" && customValue === false || !isNullOrUndefined(customValue) && customValue.toString() === "NaN")) {
        customValue = value;
      }
      this.removeValue(customValue, e);
      this.removeChipSelection();
      this.updateDelimeter(this.delimiterChar, e);
      this.makeTextBoxEmpty();
      if (this.mainList && this.listData) {
        this.refreshSelection();
      }
      this.checkPlaceholderSize();
    };
    MultiSelect2.prototype.onActionFailure = function(e) {
      _super.prototype.onActionFailure.call(this, e);
      this.renderPopup();
      this.onPopupShown();
    };
    MultiSelect2.prototype.targetElement = function() {
      this.targetInputElement = this.inputElement;
      if (this.mode === "CheckBox" && this.allowFiltering) {
        this.notify("targetElement", { module: "CheckBoxSelection", enable: this.mode === "CheckBox" });
      }
      return this.targetInputElement.value;
    };
    MultiSelect2.prototype.getForQuery = function(valuecheck) {
      var predicate;
      var field = isNullOrUndefined(this.fields.value) ? this.fields.text : this.fields.value;
      for (var i = 0; i < valuecheck.length; i++) {
        if (i === 0) {
          predicate = new Predicate(field, "equal", valuecheck[i]);
        } else {
          predicate = predicate.or(field, "equal", valuecheck[i]);
        }
      }
      return this.getQuery(this.query).where(predicate);
    };
    MultiSelect2.prototype.onActionComplete = function(ulElement, list, e, isUpdated) {
      _super.prototype.onActionComplete.call(this, ulElement, list, e);
      this.updateSelectElementData(this.allowFiltering);
      var proxy2 = this;
      if (!isNullOrUndefined(this.value) && !this.allowCustomValue) {
        for (var i = 0; i < this.value.length; i++) {
          var checkEle = this.findListElement(this.allowFiltering && !isNullOrUndefined(this.mainList) ? this.mainList : ulElement, "li", "data-value", proxy2.value[i]);
          if (!checkEle && !(this.dataSource instanceof DataManager)) {
            this.value.splice(i, 1);
            i -= 1;
          }
        }
      }
      var valuecheck = [];
      if (!isNullOrUndefined(this.value) && !this.allowCustomValue) {
        valuecheck = this.presentItemValue(this.ulElement);
      }
      if (valuecheck.length > 0 && this.dataSource instanceof DataManager && !isNullOrUndefined(this.value) && this.listData != null) {
        this.addNonPresentItems(valuecheck, this.ulElement, this.listData);
      } else {
        this.updateActionList(ulElement, list, e);
      }
      if (this.dataSource instanceof DataManager && this.mode === "CheckBox" && this.allowFiltering) {
        this.removeFocus();
      }
    };
    MultiSelect2.prototype.updateActionList = function(ulElement, list, e, isUpdated) {
      if (this.mode === "CheckBox" && this.showSelectAll) {
        this.notify("selectAll", { module: "CheckBoxSelection", enable: this.mode === "CheckBox" });
      }
      if (!this.mainList && !this.mainData) {
        this.mainList = ulElement.cloneNode ? ulElement.cloneNode(true) : ulElement;
        this.mainData = list;
        this.mainListCollection = this.liCollections;
      } else if (isNullOrUndefined(this.mainData) || this.mainData.length === 0) {
        this.mainData = list;
      }
      if ((this.remoteCustomValue || list.length <= 0) && this.allowCustomValue && this.inputFocus && this.allowFiltering && this.inputElement.value && this.inputElement.value !== "") {
        this.checkForCustomValue(this.tempQuery, this.fields);
        return;
      }
      if (this.value && this.value.length && (this.mode !== "CheckBox" && !isNullOrUndefined(this.inputElement) && this.inputElement.value.trim() !== "" || this.mode === "CheckBox" || (this.keyCode === 8 || this.keyCode === 46) && this.allowFiltering && this.allowCustomValue && this.dataSource instanceof DataManager && this.inputElement.value === "")) {
        this.refreshSelection();
      }
      this.updateListARIA();
      this.unwireListEvents();
      this.wireListEvents();
      if (!isNullOrUndefined(this.setInitialValue)) {
        this.setInitialValue();
      }
      if (!isNullOrUndefined(this.selectAllAction)) {
        this.selectAllAction();
      }
      if (this.setDynValue) {
        if (!isNullOrUndefined(this.text) && (isNullOrUndefined(this.value) || this.value.length === 0)) {
          this.initialTextUpdate();
        }
        this.initialValueUpdate();
        this.initialUpdate();
        this.refreshPlaceHolder();
        if (this.mode !== "CheckBox" && this.changeOnBlur) {
          this.updateValueState(null, this.value, null);
        }
      }
      this.renderPopup();
      if (this.beforePopupOpen) {
        this.beforePopupOpen = false;
        this.onPopupShown(e);
      }
    };
    MultiSelect2.prototype.refreshSelection = function() {
      var value;
      var element2;
      var className = this.hideSelectedItem ? HIDE_LIST : dropDownBaseClasses.selected;
      if (!isNullOrUndefined(this.value)) {
        for (var index = 0; !isNullOrUndefined(this.value[index]); index++) {
          value = this.value[index];
          element2 = this.findListElement(this.list, "li", "data-value", value);
          if (element2) {
            addClass([element2], className);
            if (this.hideSelectedItem && element2.previousSibling && element2.previousElementSibling.classList.contains(dropDownBaseClasses.group) && (!element2.nextElementSibling || element2.nextElementSibling.classList.contains(dropDownBaseClasses.group))) {
              addClass([element2.previousElementSibling], className);
            }
            if (this.hideSelectedItem && this.fields.groupBy && !element2.previousElementSibling.classList.contains(HIDE_LIST)) {
              this.hideGroupItem(value);
            }
            if (this.hideSelectedItem && element2.classList.contains(dropDownBaseClasses.focus)) {
              removeClass([element2], dropDownBaseClasses.focus);
              var listEle = element2.parentElement.querySelectorAll("." + dropDownBaseClasses.li + ":not(." + HIDE_LIST + ")");
              if (listEle.length > 0) {
                addClass([listEle[0]], dropDownBaseClasses.focus);
                this.updateAriaActiveDescendant();
              } else {
                if (!(this.list && this.list.querySelectorAll("." + dropDownBaseClasses.li).length > 0)) {
                  this.l10nUpdate();
                  addClass([this.list], dropDownBaseClasses.noData);
                }
              }
            }
            element2.setAttribute("aria-selected", "true");
            if (this.mode === "CheckBox" && element2.classList.contains("e-active")) {
              var ariaValue = element2.getElementsByClassName("e-check").length;
              if (ariaValue === 0) {
                var args = {
                  module: "CheckBoxSelection",
                  enable: this.mode === "CheckBox",
                  li: element2,
                  e: null
                };
                this.notify("updatelist", args);
              }
            }
          }
        }
      }
      this.checkSelectAll();
      this.checkMaxSelection();
    };
    MultiSelect2.prototype.hideGroupItem = function(value) {
      var element2;
      var element1;
      var className = this.hideSelectedItem ? HIDE_LIST : dropDownBaseClasses.selected;
      element1 = element2 = this.findListElement(this.ulElement, "li", "data-value", value);
      var i = 0;
      var j = 0;
      var temp = true;
      var temp1 = true;
      do {
        if (element2 && element2.previousElementSibling && (!element2.previousElementSibling.classList.contains(HIDE_LIST) && element2.previousElementSibling.classList.contains(dropDownBaseClasses.li))) {
          temp = false;
        }
        if (!temp || !element2 || element2.previousElementSibling && element2.previousElementSibling.classList.contains(dropDownBaseClasses.group)) {
          i = 10;
        } else {
          element2 = element2.previousElementSibling;
        }
        if (element1 && element1.nextElementSibling && (!element1.nextElementSibling.classList.contains(HIDE_LIST) && element1.nextElementSibling.classList.contains(dropDownBaseClasses.li))) {
          temp1 = false;
        }
        if (!temp1 || !element1 || element1.nextElementSibling && element1.nextElementSibling.classList.contains(dropDownBaseClasses.group)) {
          j = 10;
        } else {
          element1 = element1.nextElementSibling;
        }
      } while (i < 10 || j < 10);
      if (temp && temp1 && !element2.previousElementSibling.classList.contains(HIDE_LIST)) {
        addClass([element2.previousElementSibling], className);
      } else if (temp && temp1 && element2.previousElementSibling.classList.contains(HIDE_LIST)) {
        removeClass([element2.previousElementSibling], className);
      }
    };
    MultiSelect2.prototype.getValidLi = function() {
      var liElement = this.ulElement.querySelector("li." + dropDownBaseClasses.li + ":not(." + HIDE_LIST + ")");
      return !isNullOrUndefined(liElement) ? liElement : this.liCollections[0];
    };
    MultiSelect2.prototype.checkSelectAll = function() {
      var groupItemLength = this.list.querySelectorAll("li.e-list-group-item.e-active").length;
      var listItem = this.list.querySelectorAll("li.e-list-item");
      var searchCount = this.list.querySelectorAll("li." + dropDownBaseClasses.li).length;
      var searchActiveCount = this.list.querySelectorAll("li." + dropDownBaseClasses.selected).length;
      if (this.enableGroupCheckBox && !isNullOrUndefined(this.fields.groupBy)) {
        searchActiveCount = searchActiveCount - groupItemLength;
      }
      if ((searchCount === searchActiveCount || searchActiveCount === this.maximumSelectionLength) && (this.mode === "CheckBox" && this.showSelectAll)) {
        this.notify("checkSelectAll", { module: "CheckBoxSelection", enable: this.mode === "CheckBox", value: "check" });
      } else if (searchCount !== searchActiveCount && (this.mode === "CheckBox" && this.showSelectAll)) {
        this.notify("checkSelectAll", { module: "CheckBoxSelection", enable: this.mode === "CheckBox", value: "uncheck" });
      }
      if (this.enableGroupCheckBox && this.fields.groupBy && !this.enableSelectionOrder) {
        for (var i = 0; i < listItem.length; i++) {
          this.findGroupStart(listItem[i]);
        }
        this.deselectHeader();
      }
    };
    MultiSelect2.prototype.openClick = function(e) {
      if (!this.openOnClick && this.mode !== "CheckBox") {
        if (this.targetElement() !== "") {
          this.showPopup();
        } else {
          this.hidePopup(e);
        }
      } else if (!this.openOnClick && this.mode === "CheckBox" && !this.isPopupOpen()) {
        this.showPopup();
      }
    };
    MultiSelect2.prototype.keyUp = function(e) {
      if (this.mode === "CheckBox" && !this.openOnClick) {
        var char = String.fromCharCode(e.keyCode);
        var isWordCharacter = char.match(/\w/);
        if (!isNullOrUndefined(isWordCharacter)) {
          this.isValidKey = true;
        }
      }
      this.isValidKey = this.isPopupOpen() && e.keyCode === 8 || this.isValidKey;
      this.isValidKey = e.ctrlKey && e.keyCode === 86 ? false : this.isValidKey;
      if (this.isValidKey) {
        this.isValidKey = false;
        this.expandTextbox();
        this.showOverAllClear();
        switch (e.keyCode) {
          default:
            this.search(e);
        }
      }
    };
    MultiSelect2.prototype.filter = function(dataSource, query, fields) {
      this.isFiltered = true;
      this.remoteFilterAction = true;
      this.dataUpdater(dataSource, query, fields);
    };
    MultiSelect2.prototype.getQuery = function(query) {
      var filterQuery = query ? query.clone() : this.query ? this.query.clone() : new Query();
      if (this.isFiltered) {
        return filterQuery;
      }
      if (this.filterAction) {
        if (this.targetElement() !== null) {
          var dataType = this.typeOfData(this.dataSource).typeof;
          if (!(this.dataSource instanceof DataManager) && dataType === "string" || dataType === "number") {
            filterQuery.where("", this.filterType, this.targetElement(), this.ignoreCase, this.ignoreAccent);
          } else {
            var fields = this.fields;
            filterQuery.where(!isNullOrUndefined(fields.text) ? fields.text : "", this.filterType, this.targetElement(), this.ignoreCase, this.ignoreAccent);
          }
        }
        return filterQuery;
      } else {
        return query ? query : this.query ? this.query : new Query();
      }
    };
    MultiSelect2.prototype.dataUpdater = function(dataSource, query, fields) {
      this.isDataFetched = false;
      if (this.targetElement().trim() === "") {
        var list = this.mainList.cloneNode ? this.mainList.cloneNode(true) : this.mainList;
        if (this.backCommand) {
          this.remoteCustomValue = false;
          if (this.allowCustomValue && list.querySelectorAll("li").length == 0 && this.mainData.length > 0) {
            this.mainData = [];
          }
          this.onActionComplete(list, this.mainData);
          if (this.value && this.value.length) {
            this.refreshSelection();
          }
          if (this.keyCode !== 8) {
            this.focusAtFirstListItem();
          }
          this.notify("reOrder", { module: "CheckBoxSelection", enable: this.mode === "CheckBox", e: this });
        }
      } else {
        this.resetList(dataSource, fields, query);
        if (this.allowCustomValue) {
          if (!(dataSource instanceof DataManager)) {
            this.checkForCustomValue(query, fields);
          } else {
            this.remoteCustomValue = true;
            this.tempQuery = query;
          }
        }
      }
      this.refreshPopup();
      if (this.mode === "CheckBox") {
        this.removeFocus();
      }
    };
    MultiSelect2.prototype.checkForCustomValue = function(query, fields) {
      var dataChecks = !this.getValueByText(this.inputElement.value, this.ignoreCase);
      if (this.allowCustomValue && dataChecks) {
        var value = this.inputElement.value;
        var field = fields ? fields : this.fields;
        var customData = !isNullOrUndefined(this.mainData) && this.mainData.length > 0 ? this.mainData[0] : this.mainData;
        if (typeof customData !== "string" && typeof customData !== "number" && typeof customData !== "boolean") {
          var dataItem = {};
          setValue(field.text, value, dataItem);
          if (typeof getValue(this.fields.value ? this.fields.value : "value", customData) === "number") {
            setValue(field.value, Math.random(), dataItem);
          } else {
            setValue(field.value, value, dataItem);
          }
          var tempData = JSON.parse(JSON.stringify(this.listData));
          tempData.splice(0, 0, dataItem);
          this.resetList(tempData, field, query);
        } else {
          var tempData = JSON.parse(JSON.stringify(this.listData));
          tempData.splice(0, 0, this.inputElement.value);
          tempData[0] = typeof customData === "number" && !isNaN(parseFloat(tempData[0])) ? parseFloat(tempData[0]) : tempData[0];
          tempData[0] = typeof customData === "boolean" ? tempData[0] === "true" ? true : tempData[0] === "false" ? false : tempData[0] : tempData[0];
          this.resetList(tempData, field);
        }
      }
      if (this.value && this.value.length) {
        this.refreshSelection();
      }
    };
    MultiSelect2.prototype.getNgDirective = function() {
      return "EJS-MULTISELECT";
    };
    MultiSelect2.prototype.wrapperClick = function(e) {
      this.setDynValue = false;
      if (!this.enabled) {
        return;
      }
      if (e.target === this.overAllClear) {
        e.preventDefault();
        return;
      }
      if (!this.inputFocus) {
        this.inputElement.focus();
      }
      if (!this.readonly) {
        if (e.target && e.target.classList.toString().indexOf(CHIP_CLOSE) !== -1) {
          if (this.isPopupOpen()) {
            this.refreshPopup();
          }
          return;
        }
        if (!this.isPopupOpen() && (this.openOnClick || this.showDropDownIcon && e.target && e.target.className === dropdownIcon)) {
          this.showPopup(e);
        } else {
          this.hidePopup(e);
          if (this.mode === "CheckBox") {
            this.showOverAllClear();
            this.inputFocus = true;
            if (!this.overAllWrapper.classList.contains(FOCUS$2)) {
              this.overAllWrapper.classList.add(FOCUS$2);
            }
          }
        }
      }
      if (!(this.targetElement() && this.targetElement() !== "")) {
        e.preventDefault();
      }
    };
    MultiSelect2.prototype.enable = function(state) {
      if (state) {
        this.overAllWrapper.classList.remove(DISABLED$3);
        this.inputElement.removeAttribute("disabled");
        attributes(this.inputElement, { "aria-disabled": "false" });
        this.ensureAriaDisabled("false");
      } else {
        this.overAllWrapper.classList.add(DISABLED$3);
        this.inputElement.setAttribute("disabled", "true");
        attributes(this.inputElement, { "aria-disabled": "true" });
        this.ensureAriaDisabled("true");
      }
      if (this.enabled !== state) {
        this.enabled = state;
      }
      this.hidePopup();
    };
    MultiSelect2.prototype.onBlurHandler = function(eve, isDocClickFromCheck) {
      var target;
      if (!isNullOrUndefined(eve)) {
        target = eve.relatedTarget;
      }
      if (this.popupObj && document.body.contains(this.popupObj.element) && this.popupObj.element.contains(target)) {
        if (this.mode !== "CheckBox") {
          this.inputElement.focus();
        } else if (this.floatLabelType === "Auto" && (this.overAllWrapper.classList.contains("e-outline") || this.overAllWrapper.classList.contains("e-filled"))) {
          addClass([this.overAllWrapper], "e-valid-input");
        }
        return;
      }
      if (this.floatLabelType === "Auto" && this.overAllWrapper.classList.contains("e-outline") && this.mode === "CheckBox" && (isNullOrUndefined(this.value) || this.value.length === 0)) {
        removeClass([this.overAllWrapper], "e-valid-input");
      }
      if (this.mode === "CheckBox" && Browser.isIE && !isNullOrUndefined(eve) && !isDocClickFromCheck) {
        this.inputFocus = false;
        this.overAllWrapper.classList.remove(FOCUS$2);
        return;
      }
      if (this.scrollFocusStatus) {
        if (!isNullOrUndefined(eve)) {
          eve.preventDefault();
        }
        this.inputElement.focus();
        this.scrollFocusStatus = false;
        return;
      }
      this.inputFocus = false;
      this.overAllWrapper.classList.remove(FOCUS$2);
      if (this.addTagOnBlur) {
        var dataChecks = this.getValueByText(this.inputElement.value, this.ignoreCase, this.ignoreAccent);
        var listLiElement = this.findListElement(this.list, "li", "data-value", dataChecks);
        var className = this.hideSelectedItem ? HIDE_LIST : dropDownBaseClasses.selected;
        var allowChipAddition = listLiElement && !listLiElement.classList.contains(className) ? true : false;
        if (allowChipAddition) {
          this.updateListSelection(listLiElement, eve);
          if (this.mode === "Delimiter") {
            this.updateDelimeter(this.delimiterChar);
          }
        }
      }
      this.updateDataList();
      if (this.resetMainList) {
        this.mainList = this.resetMainList;
        this.resetMainList = null;
      }
      this.refreshListItems(null);
      if (this.mode !== "Box" && this.mode !== "CheckBox") {
        this.updateDelimView();
      }
      if (this.changeOnBlur) {
        this.updateValueState(eve, this.value, this.tempValues);
        this.dispatchEvent(this.hiddenElement, "change");
      }
      this.overAllClear.style.display = "none";
      if (this.isPopupOpen()) {
        this.hidePopup(eve);
      }
      this.makeTextBoxEmpty();
      this.trigger("blur");
      this.focused = true;
      if (Browser.isDevice && this.mode !== "Delimiter" && this.mode !== "CheckBox") {
        this.removeChipFocus();
      }
      this.removeChipSelection();
      this.refreshInputHight();
      floatLabelBlur(this.overAllWrapper, this.componentWrapper, this.value, this.floatLabelType, this.placeholder);
      this.refreshPlaceHolder();
      if ((this.allowFiltering || this.enableSelectionOrder === true && this.mode === "CheckBox") && !isNullOrUndefined(this.mainList)) {
        this.ulElement = this.mainList;
      }
      this.checkPlaceholderSize();
      Input.createSpanElement(this.overAllWrapper, this.createElement);
      this.calculateWidth();
      if (!isNullOrUndefined(this.overAllWrapper) && !isNullOrUndefined(this.overAllWrapper.getElementsByClassName("e-ddl-icon")[0] && this.overAllWrapper.getElementsByClassName("e-float-text-content")[0] && this.floatLabelType !== "Never")) {
        this.overAllWrapper.getElementsByClassName("e-float-text-content")[0].classList.add("e-icon");
      }
    };
    MultiSelect2.prototype.calculateWidth = function() {
      var elementWidth;
      if (this.overAllWrapper) {
        if (!this.showDropDownIcon || this.overAllWrapper.querySelector(".e-label-top")) {
          elementWidth = this.overAllWrapper.clientWidth - 2 * parseInt(getComputedStyle(this.inputElement).paddingRight);
        } else {
          var downIconWidth = this.dropIcon.offsetWidth + parseInt(getComputedStyle(this.dropIcon).marginRight);
          elementWidth = this.overAllWrapper.clientWidth - (downIconWidth + 2 * parseInt(getComputedStyle(this.inputElement).paddingRight));
        }
        Input.calculateWidth(elementWidth, this.overAllWrapper, this.getModuleName());
      }
    };
    MultiSelect2.prototype.checkPlaceholderSize = function() {
      if (this.showDropDownIcon) {
        var downIconWidth = this.dropIcon.offsetWidth + parseInt(window.getComputedStyle(this.dropIcon).marginRight, 10);
        this.setPlaceholderSize(downIconWidth);
      } else {
        if (!isNullOrUndefined(this.dropIcon)) {
          this.setPlaceholderSize(this.showDropDownIcon ? this.dropIcon.offsetWidth : 0);
        }
      }
    };
    MultiSelect2.prototype.setPlaceholderSize = function(downIconWidth) {
      if (isNullOrUndefined(this.value) || this.value.length === 0) {
        if (this.dropIcon.offsetWidth !== 0) {
          this.searchWrapper.style.width = "calc(100% - " + (downIconWidth + 10) + "px";
        } else {
          addClass([this.searchWrapper], CUSTOM_WIDTH);
        }
      } else if (!isNullOrUndefined(this.value)) {
        this.searchWrapper.removeAttribute("style");
        removeClass([this.searchWrapper], CUSTOM_WIDTH);
      }
    };
    MultiSelect2.prototype.refreshInputHight = function() {
      if (!isNullOrUndefined(this.searchWrapper)) {
        if ((!this.value || !this.value.length) && (isNullOrUndefined(this.text) || this.text === "")) {
          this.searchWrapper.classList.remove(ZERO_SIZE);
        } else {
          this.searchWrapper.classList.add(ZERO_SIZE);
        }
      }
    };
    MultiSelect2.prototype.validateValues = function(newValue, oldValue) {
      return JSON.stringify(newValue.slice().sort()) !== JSON.stringify(oldValue.slice().sort());
    };
    MultiSelect2.prototype.updateValueState = function(event, newVal, oldVal) {
      var newValue = newVal ? newVal : [];
      var oldValue = oldVal ? oldVal : [];
      if (this.initStatus && this.validateValues(newValue, oldValue)) {
        var eventArgs = {
          e: event,
          oldValue: oldVal,
          value: newVal,
          isInteracted: event ? true : false,
          element: this.element,
          event
        };
        if (this.isAngular && this.preventChange) {
          this.preventChange = false;
        } else {
          this.trigger("change", eventArgs);
        }
        this.updateTempValue();
        if (!this.changeOnBlur) {
          this.dispatchEvent(this.hiddenElement, "change");
        }
      }
    };
    MultiSelect2.prototype.updateTempValue = function() {
      if (!this.value) {
        this.tempValues = this.value;
      } else {
        this.tempValues = this.value.slice();
      }
    };
    MultiSelect2.prototype.updateAriaActiveDescendant = function() {
      if (!isNullOrUndefined(this.ulElement) && !isNullOrUndefined(this.ulElement.getElementsByClassName("e-item-focus")[0])) {
        attributes(this.inputElement, { "aria-activedescendant": this.ulElement.getElementsByClassName("e-item-focus")[0].id });
      }
    };
    MultiSelect2.prototype.getPagingCount = function() {
      var height = this.list.classList.contains(dropDownBaseClasses.noData) ? null : getComputedStyle(this.getItems()[0], null).getPropertyValue("height");
      return Math.round(this.list.offsetHeight / parseInt(height, 10));
    };
    MultiSelect2.prototype.pageUpSelection = function(steps) {
      var collection = this.list.querySelectorAll("li." + dropDownBaseClasses.li + ":not(." + HIDE_LIST + "):not(.e-reorder-hide)");
      var previousItem = steps >= 0 ? collection[steps + 1] : collection[0];
      this.addListFocus(previousItem);
      this.scrollBottom(previousItem, this.getIndexByValue(previousItem.getAttribute("data-value")));
    };
    MultiSelect2.prototype.pageDownSelection = function(steps) {
      this.getItems();
      var collection = this.list.querySelectorAll("li." + dropDownBaseClasses.li + ":not(." + HIDE_LIST + "):not(.e-reorder-hide)");
      var previousItem = steps <= collection.length ? collection[steps - 1] : collection[collection.length - 1];
      this.addListFocus(previousItem);
      this.scrollBottom(previousItem, this.getIndexByValue(previousItem.getAttribute("data-value")));
    };
    MultiSelect2.prototype.getItems = function() {
      if (!this.list) {
        _super.prototype.render.call(this);
      }
      return this.ulElement && this.ulElement.querySelectorAll("." + dropDownBaseClasses.li).length > 0 ? this.ulElement.querySelectorAll("." + dropDownBaseClasses.li + ":not(." + HIDE_LIST + ")") : [];
    };
    MultiSelect2.prototype.focusInHandler = function(e) {
      var _this = this;
      if (this.enabled) {
        this.showOverAllClear();
        this.inputFocus = true;
        if (this.value && this.value.length) {
          if (this.mode !== "Delimiter" && this.mode !== "CheckBox") {
            this.chipCollectionWrapper.style.display = "";
          } else {
            this.showDelimWrapper();
          }
          if (this.mode !== "CheckBox") {
            this.viewWrapper.style.display = "none";
          }
        }
        if (this.mode !== "CheckBox") {
          this.searchWrapper.classList.remove(ZERO_SIZE);
        }
        this.checkPlaceholderSize();
        if (this.focused) {
          var args = { isInteracted: e ? true : false, event: e };
          this.trigger("focus", args);
          this.focused = false;
        }
        if (!this.overAllWrapper.classList.contains(FOCUS$2)) {
          this.overAllWrapper.classList.add(FOCUS$2);
        }
        floatLabelFocus(this.overAllWrapper, this.componentWrapper);
        if (this.isPopupOpen()) {
          this.refreshPopup();
        }
        setTimeout(function() {
          _this.calculateWidth();
        }, 150);
        return true;
      } else {
        return false;
      }
    };
    MultiSelect2.prototype.showDelimWrapper = function() {
      if (this.mode === "CheckBox") {
        this.viewWrapper.style.display = "";
      } else {
        this.delimiterWrapper.style.display = "";
      }
      this.componentWrapper.classList.add(DELIMITER_VIEW_WRAPPER);
    };
    MultiSelect2.prototype.hideDelimWrapper = function() {
      this.delimiterWrapper.style.display = "none";
      this.componentWrapper.classList.remove(DELIMITER_VIEW_WRAPPER);
    };
    MultiSelect2.prototype.expandTextbox = function() {
      var size2 = 5;
      if (this.placeholder) {
        size2 = size2 > this.inputElement.placeholder.length ? size2 : this.inputElement.placeholder.length;
      }
      if (this.inputElement.value.length > size2) {
        this.inputElement.size = this.inputElement.value.length;
      } else {
        this.inputElement.size = size2;
      }
    };
    MultiSelect2.prototype.isPopupOpen = function() {
      return this.popupWrapper !== null && this.popupWrapper.parentElement !== null;
    };
    MultiSelect2.prototype.refreshPopup = function() {
      if (this.popupObj && this.mobFilter) {
        this.popupObj.setProperties({ width: this.calcPopupWidth() });
        this.popupObj.refreshPosition(this.overAllWrapper);
        this.popupObj.resolveCollision();
      }
    };
    MultiSelect2.prototype.checkTextLength = function() {
      return this.targetElement().length < 1;
    };
    MultiSelect2.prototype.popupKeyActions = function(e) {
      switch (e.keyCode) {
        case 38:
          this.hidePopup(e);
          if (this.mode === "CheckBox") {
            this.inputElement.focus();
          }
          e.preventDefault();
          break;
        case 40:
          if (!this.isPopupOpen()) {
            this.showPopup(e);
            e.preventDefault();
          }
          break;
      }
    };
    MultiSelect2.prototype.updateAriaAttribute = function() {
      var focusedItem = this.list.querySelector("." + dropDownBaseClasses.focus);
      if (!isNullOrUndefined(focusedItem)) {
        this.inputElement.setAttribute("aria-activedescendant", focusedItem.id);
        if (this.allowFiltering) {
          var filterInput2 = this.popupWrapper.querySelector("." + FILTERINPUT);
          filterInput2 && filterInput2.setAttribute("aria-activedescendant", focusedItem.id);
        } else if (this.mode == "CheckBox") {
          this.overAllWrapper.setAttribute("aria-activedescendant", focusedItem.id);
        }
      }
    };
    MultiSelect2.prototype.homeNavigation = function(isHome) {
      this.removeFocus();
      var scrollEle = this.ulElement.querySelectorAll("li." + dropDownBaseClasses.li + ":not(." + HIDE_LIST + "):not(.e-reorder-hide)");
      if (scrollEle.length > 0) {
        var element2 = scrollEle[isHome ? 0 : scrollEle.length - 1];
        element2.classList.add(dropDownBaseClasses.focus);
        this.scrollBottom(element2);
        this.updateAriaActiveDescendant();
      }
    };
    MultiSelect2.prototype.onKeyDown = function(e) {
      if (this.readonly || !this.enabled && this.mode !== "CheckBox") {
        return;
      }
      this.keyCode = e.keyCode;
      this.keyDownStatus = true;
      if (e.keyCode > 111 && e.keyCode < 124) {
        return;
      }
      if (e.altKey) {
        this.popupKeyActions(e);
        return;
      } else if (this.isPopupOpen()) {
        var focusedItem = this.list.querySelector("." + dropDownBaseClasses.focus);
        var activeIndex = void 0;
        switch (e.keyCode) {
          case 36:
          case 35:
            this.homeNavigation(e.keyCode === 36 ? true : false);
            break;
          case 33:
            e.preventDefault();
            if (focusedItem) {
              this.getIndexByValue(focusedItem.getAttribute("data-value"));
              this.pageUpSelection(activeIndex - this.getPagingCount());
              this.updateAriaAttribute();
            }
            return;
          case 34:
            e.preventDefault();
            if (focusedItem) {
              this.getIndexByValue(focusedItem.getAttribute("data-value"));
              this.pageDownSelection(activeIndex + this.getPagingCount());
              this.updateAriaAttribute();
            }
            return;
          case 38:
            this.arrowUp(e);
            break;
          case 40:
            this.arrowDown(e);
            break;
          case 27:
            e.preventDefault();
            this.hidePopup(e);
            if (this.mode === "CheckBox") {
              this.inputElement.focus();
            }
            return;
          case 13:
            e.preventDefault();
            if (this.mode !== "CheckBox") {
              this.selectByKey(e);
            }
            this.checkPlaceholderSize();
            return;
          case 32:
            this.spaceKeySelection(e);
            return;
          case 9:
            e.preventDefault();
            this.hidePopup(e);
            this.inputElement.focus();
            this.overAllWrapper.classList.add(FOCUS$2);
        }
      } else {
        switch (e.keyCode) {
          case 13:
          case 9:
          case 16:
          case 17:
          case 20:
            return;
          case 40:
            if (this.openOnClick) {
              this.showPopup();
            }
            break;
          case 27:
            e.preventDefault();
            this.escapeAction();
            return;
        }
      }
      if (this.checkTextLength()) {
        this.keyNavigation(e);
      }
      if (this.mode === "CheckBox" && this.enableSelectionOrder) {
        if (this.allowFiltering) {
          this.previousFilterText = this.targetElement();
        }
        this.checkBackCommand(e);
      }
      this.expandTextbox();
      if (!(this.mode === "CheckBox" && this.showSelectAll)) {
        this.refreshPopup();
      }
    };
    MultiSelect2.prototype.arrowDown = function(e) {
      e.preventDefault();
      this.moveByList(1);
      this.keyAction = true;
      if (document.activeElement.classList.contains(FILTERINPUT) || this.mode === "CheckBox" && !this.allowFiltering && document.activeElement !== this.list) {
        EventHandler.add(this.list, "keydown", this.onKeyDown, this);
      }
      this.updateAriaAttribute();
    };
    MultiSelect2.prototype.arrowUp = function(e) {
      e.preventDefault();
      this.keyAction = true;
      var list = this.list.querySelectorAll("li." + dropDownBaseClasses.li + ":not(." + HIDE_LIST + "):not(.e-reorder-hide)");
      if (this.enableGroupCheckBox && this.mode === "CheckBox" && !isNullOrUndefined(this.fields.groupBy)) {
        list = this.list.querySelectorAll("li." + dropDownBaseClasses.li + ",li." + dropDownBaseClasses.group + ":not(." + HIDE_LIST + "):not(.e-reorder-hide)");
      }
      var focuseElem = this.list.querySelector("li." + dropDownBaseClasses.focus);
      var index = Array.prototype.slice.call(list).indexOf(focuseElem);
      if (index <= 0 && (this.mode === "CheckBox" && this.allowFiltering)) {
        this.keyAction = false;
        this.notify("inputFocus", { module: "CheckBoxSelection", enable: this.mode === "CheckBox", value: "focus" });
      }
      this.moveByList(-1);
      this.updateAriaAttribute();
    };
    MultiSelect2.prototype.spaceKeySelection = function(e) {
      if (this.mode === "CheckBox") {
        if (!document.activeElement.classList.contains(FILTERINPUT)) {
          e.preventDefault();
          this.keyAction = true;
        }
        this.selectByKey(e);
      }
      this.checkPlaceholderSize();
    };
    MultiSelect2.prototype.checkBackCommand = function(e) {
      if (e.keyCode === 8 && this.allowFiltering ? this.targetElement() !== this.previousFilterText : this.targetElement() === "") {
        this.backCommand = false;
      } else {
        this.backCommand = true;
      }
    };
    MultiSelect2.prototype.keyNavigation = function(e) {
      if (this.mode !== "Delimiter" && this.mode !== "CheckBox" && this.value && this.value.length) {
        switch (e.keyCode) {
          case 37:
            e.preventDefault();
            this.moveBy(-1, e);
            break;
          case 39:
            e.preventDefault();
            this.moveBy(1, e);
            break;
          case 8:
            this.removelastSelection(e);
            break;
          case 46:
            this.removeSelectedChip(e);
            break;
        }
      } else if (e.keyCode === 8 && this.mode === "Delimiter") {
        if (this.value && this.value.length) {
          e.preventDefault();
          var temp = this.value[this.value.length - 1];
          this.removeValue(temp, e);
          this.updateDelimeter(this.delimiterChar, e);
          this.focusAtLastListItem(temp);
        }
      }
    };
    MultiSelect2.prototype.selectByKey = function(e) {
      this.removeChipSelection();
      this.selectListByKey(e);
      if (this.hideSelectedItem) {
        this.focusAtFirstListItem();
      }
    };
    MultiSelect2.prototype.escapeAction = function() {
      var temp = this.tempValues ? this.tempValues.slice() : [];
      if (this.value && this.validateValues(this.value, temp)) {
        if (this.mode !== "CheckBox") {
          this.value = temp;
          this.initialValueUpdate();
        }
        if (this.mode !== "Delimiter" && this.mode !== "CheckBox") {
          this.chipCollectionWrapper.style.display = "";
        } else {
          this.showDelimWrapper();
        }
        this.refreshPlaceHolder();
        if (this.value.length) {
          this.showOverAllClear();
        } else {
          this.hideOverAllClear();
        }
      }
      this.makeTextBoxEmpty();
    };
    MultiSelect2.prototype.scrollBottom = function(selectedLI, activeIndex) {
      var currentOffset = this.list.offsetHeight;
      var nextBottom = selectedLI.offsetTop + selectedLI.offsetHeight - this.list.scrollTop;
      var nextOffset = this.list.scrollTop + nextBottom - currentOffset;
      var boxRange = selectedLI.offsetTop + selectedLI.offsetHeight - this.list.scrollTop;
      boxRange = this.fields.groupBy && !isNullOrUndefined(this.fixedHeaderElement) ? boxRange - this.fixedHeaderElement.offsetHeight : boxRange;
      if (activeIndex === 0) {
        this.list.scrollTop = 0;
      } else if (nextBottom > currentOffset) {
        this.list.scrollTop = nextOffset;
      } else if (!(boxRange > 0 && this.list.offsetHeight > boxRange)) {
        this.list.scrollTop = nextOffset;
      }
    };
    MultiSelect2.prototype.scrollTop = function(selectedLI, activeIndex) {
      var nextOffset = selectedLI.offsetTop - this.list.scrollTop;
      nextOffset = this.fields.groupBy && !isUndefined(this.fixedHeaderElement) ? nextOffset - this.fixedHeaderElement.offsetHeight : nextOffset;
      var boxRange = selectedLI.offsetTop + selectedLI.offsetHeight - this.list.scrollTop;
      if (activeIndex === 0) {
        this.list.scrollTop = 0;
      } else if (nextOffset < 0) {
        this.list.scrollTop = this.list.scrollTop + nextOffset;
      } else if (!(boxRange > 0 && this.list.offsetHeight > boxRange)) {
        this.list.scrollTop = selectedLI.offsetTop - (this.fields.groupBy && !isUndefined(this.fixedHeaderElement) ? this.fixedHeaderElement.offsetHeight : 0);
      }
    };
    MultiSelect2.prototype.selectListByKey = function(e) {
      var li = this.list.querySelector("li." + dropDownBaseClasses.focus);
      var limit = this.value && this.value.length ? this.value.length : 0;
      var target;
      if (li !== null) {
        if (li.classList.contains("e-active")) {
          limit = limit - 1;
        }
        if (this.isValidLI(li) && limit < this.maximumSelectionLength) {
          this.updateListSelection(li, e);
          this.addListFocus(li);
          if (this.mode === "CheckBox") {
            this.updateDelimView();
            this.updateDelimeter(this.delimiterChar, e);
            this.refreshInputHight();
            this.checkPlaceholderSize();
            if (this.enableGroupCheckBox && !isNullOrUndefined(this.fields.groupBy)) {
              target = li.firstElementChild.lastElementChild;
              this.findGroupStart(target);
              this.deselectHeader();
            }
          } else {
            this.updateDelimeter(this.delimiterChar, e);
          }
          this.makeTextBoxEmpty();
          if (this.mode !== "CheckBox") {
            this.refreshListItems(li.textContent);
          }
          if (!this.changeOnBlur) {
            this.updateValueState(e, this.value, this.tempValues);
          }
          this.refreshPopup();
        } else {
          if (!this.isValidLI(li) && limit < this.maximumSelectionLength) {
            target = li.firstElementChild.lastElementChild;
            if (target.classList.contains("e-check")) {
              this.selectAllItem(false, e, li);
            } else {
              this.selectAllItem(true, e, li);
            }
          }
        }
        this.refreshSelection();
        if (this.closePopupOnSelect) {
          this.hidePopup(e);
        }
      }
      this.refreshPlaceHolder();
    };
    MultiSelect2.prototype.refreshListItems = function(data) {
      if ((this.allowFiltering || this.mode === "CheckBox" && this.enableSelectionOrder === true || this.allowCustomValue) && this.mainList && this.listData) {
        var list = this.mainList.cloneNode ? this.mainList.cloneNode(true) : this.mainList;
        this.onActionComplete(list, this.mainData);
        this.focusAtLastListItem(data);
        if (this.value && this.value.length) {
          this.refreshSelection();
        }
      } else if (!isNullOrUndefined(this.fields.groupBy) && this.value && this.value.length) {
        this.refreshSelection();
      }
    };
    MultiSelect2.prototype.removeSelectedChip = function(e) {
      var selectedElem = this.chipCollectionWrapper.querySelector("span." + CHIP_SELECTED);
      var temp;
      if (selectedElem !== null) {
        if (!isNullOrUndefined(this.value)) {
          this.tempValues = this.value.slice();
        }
        temp = selectedElem.nextElementSibling;
        if (temp !== null) {
          this.removeChipSelection();
          this.addChipSelection(temp, e);
        }
        this.removeValue(selectedElem.getAttribute("data-value"), e);
        this.makeTextBoxEmpty();
      }
      if (this.closePopupOnSelect) {
        this.hidePopup(e);
      }
      this.checkPlaceholderSize();
    };
    MultiSelect2.prototype.moveByTop = function(state) {
      var elements = this.list.querySelectorAll("li." + dropDownBaseClasses.li);
      var index;
      if (elements.length > 1) {
        this.removeFocus();
        index = state ? 0 : elements.length - 1;
        this.addListFocus(elements[index]);
        this.scrollBottom(elements[index], index);
      }
      this.updateAriaAttribute();
    };
    MultiSelect2.prototype.moveByList = function(position) {
      if (this.list) {
        var elements = this.list.querySelectorAll("li." + dropDownBaseClasses.li + ":not(." + HIDE_LIST + "):not(.e-reorder-hide)");
        if (this.mode === "CheckBox" && this.enableGroupCheckBox && !isNullOrUndefined(this.fields.groupBy)) {
          elements = this.list.querySelectorAll("li." + dropDownBaseClasses.li + ",li." + dropDownBaseClasses.group + ":not(." + HIDE_LIST + "):not(.e-reorder-hide)");
        }
        var selectedElem = this.list.querySelector("li." + dropDownBaseClasses.focus);
        var temp = -1;
        if (elements.length) {
          for (var index = 0; index < elements.length; index++) {
            if (elements[index] === selectedElem) {
              temp = index;
              break;
            }
          }
          if (position > 0) {
            if (temp < elements.length - 1) {
              this.removeFocus();
              this.addListFocus(elements[++temp]);
              this.updateCheck(elements[temp]);
              this.scrollBottom(elements[temp], temp);
            }
          } else {
            if (temp > 0) {
              this.removeFocus();
              this.addListFocus(elements[--temp]);
              this.updateCheck(elements[temp]);
              this.scrollTop(elements[temp], temp);
            }
          }
        }
      }
    };
    MultiSelect2.prototype.updateCheck = function(element2) {
      if (this.mode === "CheckBox" && this.enableGroupCheckBox && !isNullOrUndefined(this.fields.groupBy)) {
        var checkElement = element2.firstElementChild.lastElementChild;
        if (checkElement.classList.contains("e-check")) {
          element2.classList.add("e-active");
        } else {
          element2.classList.remove("e-active");
        }
      }
    };
    MultiSelect2.prototype.moveBy = function(position, e) {
      var temp;
      var elements = this.chipCollectionWrapper.querySelectorAll("span." + CHIP);
      var selectedElem = this.chipCollectionWrapper.querySelector("span." + CHIP_SELECTED);
      if (selectedElem === null) {
        if (position < 0) {
          this.addChipSelection(elements[elements.length - 1], e);
        }
      } else {
        if (position < 0) {
          temp = selectedElem.previousElementSibling;
          if (temp !== null) {
            this.removeChipSelection();
            this.addChipSelection(temp, e);
          }
        } else {
          temp = selectedElem.nextElementSibling;
          this.removeChipSelection();
          if (temp !== null) {
            this.addChipSelection(temp, e);
          }
        }
      }
    };
    MultiSelect2.prototype.chipClick = function(e) {
      if (this.enabled) {
        var elem = closest(e.target, "." + CHIP);
        this.removeChipSelection();
        this.addChipSelection(elem, e);
      }
    };
    MultiSelect2.prototype.removeChipSelection = function() {
      if (this.chipCollectionWrapper) {
        this.removeChipFocus();
      }
    };
    MultiSelect2.prototype.addChipSelection = function(element2, e) {
      addClass([element2], CHIP_SELECTED);
      this.trigger("chipSelection", e);
    };
    MultiSelect2.prototype.onChipRemove = function(e) {
      if (e.which === 3 || e.button === 2) {
        return;
      }
      if (this.enabled && !this.readonly) {
        var element2 = e.target.parentElement;
        var customVal = element2.getAttribute("data-value");
        var value = this.getFormattedValue(customVal);
        if (this.allowCustomValue && (customVal !== "false" && value === false || !isNullOrUndefined(value) && value.toString() === "NaN")) {
          value = customVal;
        }
        if (this.isPopupOpen() && this.mode !== "CheckBox") {
          this.hidePopup(e);
        }
        if (!this.inputFocus) {
          this.inputElement.focus();
        }
        this.removeValue(value, e);
        if (isNullOrUndefined(this.findListElement(this.list, "li", "data-value", value)) && this.mainList && this.listData) {
          var list = this.mainList.cloneNode ? this.mainList.cloneNode(true) : this.mainList;
          this.onActionComplete(list, this.mainData);
        }
        this.updateDelimeter(this.delimiterChar, e);
        if (this.placeholder && this.floatLabelType === "Never") {
          this.makeTextBoxEmpty();
          this.checkPlaceholderSize();
        } else {
          this.inputElement.value = "";
        }
        e.preventDefault();
      }
    };
    MultiSelect2.prototype.makeTextBoxEmpty = function() {
      this.inputElement.value = "";
      this.refreshPlaceHolder();
    };
    MultiSelect2.prototype.refreshPlaceHolder = function() {
      if (this.placeholder && this.floatLabelType === "Never") {
        if (this.value && this.value.length || !isNullOrUndefined(this.text) && this.text !== "") {
          this.inputElement.placeholder = "";
        } else {
          this.inputElement.placeholder = encodePlaceholder(this.placeholder);
        }
      } else {
        this.setFloatLabelType();
      }
      this.expandTextbox();
    };
    MultiSelect2.prototype.removeAllItems = function(value, eve, isClearAll, element2, mainElement) {
      var index = this.value.indexOf(value);
      var removeVal = this.value.slice(0);
      removeVal.splice(index, 1);
      this.setProperties({ value: [].concat([], removeVal) }, true);
      element2.setAttribute("aria-selected", "false");
      var className = this.hideSelectedItem ? HIDE_LIST : dropDownBaseClasses.selected;
      removeClass([element2], className);
      this.notify("activeList", {
        module: "CheckBoxSelection",
        enable: this.mode === "CheckBox",
        li: element2,
        e: this,
        index
      });
      this.invokeCheckboxSelection(element2, eve, isClearAll);
      this.updateMainList(true, value, mainElement);
      this.updateChipStatus();
    };
    MultiSelect2.prototype.invokeCheckboxSelection = function(element2, eve, isClearAll) {
      this.notify("updatelist", { module: "CheckBoxSelection", enable: this.mode === "CheckBox", li: element2, e: eve });
      this.updateAriaActiveDescendant();
      if (this.value && this.value.length !== this.mainData.length && (this.mode === "CheckBox" && this.showSelectAll && !(this.isSelectAll || isClearAll))) {
        this.notify("checkSelectAll", {
          module: "CheckBoxSelection",
          enable: this.mode === "CheckBox",
          value: "uncheck"
        });
      }
    };
    MultiSelect2.prototype.removeValue = function(value, eve, length, isClearAll) {
      var _this = this;
      var index = this.value.indexOf(this.getFormattedValue(value));
      if (index === -1 && this.allowCustomValue && !isNullOrUndefined(value)) {
        index = this.value.indexOf(value.toString());
      }
      var targetEle = eve && eve.target;
      isClearAll = isClearAll || targetEle && targetEle.classList.contains("e-close-hooker") ? true : null;
      var className = this.hideSelectedItem ? HIDE_LIST : dropDownBaseClasses.selected;
      if (index !== -1) {
        var element_1 = this.findListElement(this.list, "li", "data-value", value);
        var val_1 = this.getDataByValue(value);
        var eventArgs = {
          e: eve,
          item: element_1,
          itemData: val_1,
          isInteracted: eve ? true : false,
          cancel: false
        };
        this.trigger("removing", eventArgs, function(eventArgs2) {
          if (eventArgs2.cancel) {
            _this.removeIndex++;
          } else {
            var removeVal = _this.value.slice(0);
            removeVal.splice(index, 1);
            _this.setProperties({ value: [].concat([], removeVal) }, true);
            if (element_1 !== null) {
              var hideElement = _this.findListElement(_this.mainList, "li", "data-value", value);
              element_1.setAttribute("aria-selected", "false");
              removeClass([element_1], className);
              if (hideElement) {
                hideElement.setAttribute("aria-selected", "false");
                removeClass([element_1, hideElement], className);
              }
              _this.notify("activeList", {
                module: "CheckBoxSelection",
                enable: _this.mode === "CheckBox",
                li: element_1,
                e: _this,
                index
              });
              _this.invokeCheckboxSelection(element_1, eve, isClearAll);
            }
            if (_this.hideSelectedItem && _this.fields.groupBy && element_1) {
              _this.hideGroupItem(value);
            }
            if (_this.hideSelectedItem && _this.fixedHeaderElement && _this.fields.groupBy && _this.mode !== "CheckBox" && _this.isPopupOpen()) {
              _super.prototype.scrollStop.call(_this);
            }
            _this.updateMainList(true, value);
            _this.removeChip(value);
            _this.updateChipStatus();
            var limit = _this.value && _this.value.length ? _this.value.length : 0;
            if (limit < _this.maximumSelectionLength) {
              var collection = _this.list.querySelectorAll("li." + dropDownBaseClasses.li + ":not(.e-active)");
              removeClass(collection, "e-disable");
            }
            _this.trigger("removed", eventArgs2);
            var targetEle_1 = eve && eve.currentTarget;
            var isSelectAll = targetEle_1 && targetEle_1.classList.contains("e-selectall-parent") ? true : null;
            if (!_this.changeOnBlur && !isClearAll && (eve && length && !isSelectAll)) {
              _this.updateValueState(eve, _this.value, _this.tempValues);
            }
            if (length) {
              _this.selectAllEventData.push(val_1);
              _this.selectAllEventEle.push(element_1);
            }
            if (length === 1) {
              if (!_this.changeOnBlur) {
                _this.updateValueState(eve, _this.value, _this.tempValues);
              }
              var args = {
                event: eve,
                items: _this.selectAllEventEle,
                itemData: _this.selectAllEventData,
                isInteracted: eve ? true : false,
                isChecked: false
              };
              _this.trigger("selectedAll", args);
              _this.selectAllEventData = [];
              _this.selectAllEventEle = [];
            }
            if (isClearAll && (length === 1 || length === null)) {
              _this.clearAllCallback(eve, isClearAll);
            }
          }
        });
      }
    };
    MultiSelect2.prototype.updateMainList = function(state, value, mainElement) {
      if (this.allowFiltering || this.mode === "CheckBox") {
        var element2 = mainElement ? mainElement : this.findListElement(this.mainList, "li", "data-value", value);
        if (element2) {
          if (state) {
            element2.setAttribute("aria-selected", "false");
            removeClass([element2], this.hideSelectedItem ? HIDE_LIST : dropDownBaseClasses.selected);
            if (this.mode === "CheckBox") {
              removeClass([element2.firstElementChild.lastElementChild], "e-check");
            }
          } else {
            element2.setAttribute("aria-selected", "true");
            addClass([element2], this.hideSelectedItem ? HIDE_LIST : dropDownBaseClasses.selected);
            if (this.mode === "CheckBox") {
              addClass([element2.firstElementChild.lastElementChild], "e-check");
            }
          }
        }
      }
    };
    MultiSelect2.prototype.removeChip = function(value) {
      if (this.chipCollectionWrapper) {
        var element2 = this.findListElement(this.chipCollectionWrapper, "span", "data-value", value);
        if (element2) {
          remove(element2);
        }
      }
    };
    MultiSelect2.prototype.setWidth = function(width) {
      if (!isNullOrUndefined(width)) {
        if (typeof width === "number") {
          this.overAllWrapper.style.width = formatUnit(width);
        } else if (typeof width === "string") {
          this.overAllWrapper.style.width = width.match(/px|%|em/) ? width : formatUnit(width);
        }
      }
    };
    MultiSelect2.prototype.updateChipStatus = function() {
      if (this.value && this.value.length) {
        if (!isNullOrUndefined(this.chipCollectionWrapper)) {
          this.chipCollectionWrapper.style.display = "";
        }
        if (this.mode === "Delimiter" || this.mode === "CheckBox") {
          this.showDelimWrapper();
        }
        this.showOverAllClear();
      } else {
        if (!isNullOrUndefined(this.chipCollectionWrapper)) {
          this.chipCollectionWrapper.style.display = "none";
        }
        if (!isNullOrUndefined(this.delimiterWrapper)) {
          this.delimiterWrapper.style.display = "none";
        }
        this.hideOverAllClear();
      }
    };
    MultiSelect2.prototype.addValue = function(value, text, eve) {
      if (!this.value) {
        this.value = [];
      }
      if (this.value.indexOf(value) < 0) {
        this.setProperties({ value: [].concat([], this.value, [value]) }, true);
      }
      var element2 = this.findListElement(this.list, "li", "data-value", value);
      this.removeFocus();
      if (element2) {
        this.addListFocus(element2);
        this.addListSelection(element2);
      }
      if (this.mode !== "Delimiter" && this.mode !== "CheckBox") {
        this.addChip(text, value, eve);
      }
      if (this.hideSelectedItem && this.fields.groupBy) {
        this.hideGroupItem(value);
      }
      this.updateChipStatus();
      this.checkMaxSelection();
    };
    MultiSelect2.prototype.checkMaxSelection = function() {
      var limit = this.value && this.value.length ? this.value.length : 0;
      if (limit === this.maximumSelectionLength) {
        var collection = this.list.querySelectorAll("li." + dropDownBaseClasses.li + ":not(.e-active)");
        addClass(collection, "e-disable");
      }
    };
    MultiSelect2.prototype.dispatchSelect = function(value, eve, element2, isNotTrigger, length) {
      var _this = this;
      var list = this.listData;
      if (this.initStatus && !isNotTrigger) {
        var val_2 = this.getDataByValue(value);
        var eventArgs = {
          e: eve,
          item: element2,
          itemData: val_2,
          isInteracted: eve ? true : false,
          cancel: false
        };
        this.trigger("select", eventArgs, function(eventArgs2) {
          if (!eventArgs2.cancel) {
            if (length) {
              _this.selectAllEventData.push(val_2);
              _this.selectAllEventEle.push(element2);
            }
            if (length === 1) {
              var args = {
                event: eve,
                items: _this.selectAllEventEle,
                itemData: _this.selectAllEventData,
                isInteracted: eve ? true : false,
                isChecked: true
              };
              _this.trigger("selectedAll", args);
              _this.selectAllEventData = [];
            }
            if (_this.allowCustomValue && _this.isServerRendered && _this.listData !== list) {
              _this.listData = list;
            }
            _this.updateListSelectEventCallback(value, element2, eve);
            if (_this.hideSelectedItem && _this.fixedHeaderElement && _this.fields.groupBy && _this.mode !== "CheckBox") {
              _super.prototype.scrollStop.call(_this);
            }
          }
        });
      }
    };
    MultiSelect2.prototype.addChip = function(text, value, e) {
      if (this.chipCollectionWrapper) {
        this.getChip(text, value, e);
      }
    };
    MultiSelect2.prototype.removeChipFocus = function() {
      var elements = this.chipCollectionWrapper.querySelectorAll("span." + CHIP);
      var closeElements = this.chipCollectionWrapper.querySelectorAll("span." + CHIP_CLOSE.split(" ")[0]);
      removeClass(elements, CHIP_SELECTED);
      if (Browser.isDevice) {
        for (var index = 0; index < closeElements.length; index++) {
          closeElements[index].style.display = "none";
        }
      }
    };
    MultiSelect2.prototype.onMobileChipInteraction = function(e) {
      var chipElem = closest(e.target, "." + CHIP);
      var chipClose = chipElem.querySelector("span." + CHIP_CLOSE.split(" ")[0]);
      if (this.enabled && !this.readonly) {
        if (!chipElem.classList.contains(CHIP_SELECTED)) {
          this.removeChipFocus();
          chipClose.style.display = "";
          chipElem.classList.add(CHIP_SELECTED);
        }
        this.refreshPopup();
        e.preventDefault();
      }
    };
    MultiSelect2.prototype.multiCompiler = function(multiselectTemplate) {
      var checkTemplate = false;
      if (multiselectTemplate) {
        try {
          checkTemplate = selectAll(multiselectTemplate, document).length ? true : false;
        } catch (exception) {
          checkTemplate = false;
        }
      }
      return checkTemplate;
    };
    MultiSelect2.prototype.getChip = function(data, value, e) {
      var _this = this;
      var itemData = { text: value, value };
      var chip = this.createElement("span", {
        className: CHIP,
        attrs: { "data-value": value, "title": data }
      });
      var compiledString;
      var chipContent = this.createElement("span", { className: CHIP_CONTENT });
      var chipClose = this.createElement("span", { className: CHIP_CLOSE });
      if (this.mainData) {
        itemData = this.getDataByValue(value);
      }
      if (this.valueTemplate && !isNullOrUndefined(itemData)) {
        var valuecheck = this.multiCompiler(this.valueTemplate);
        if (valuecheck) {
          compiledString = compile$1(select$1(this.valueTemplate, document).innerHTML.trim());
        } else {
          compiledString = compile$1(this.valueTemplate);
        }
        var valueCompTemp = compiledString(itemData, this, "valueTemplate", this.valueTemplateId, this.isStringTemplate, null, chipContent);
        if (valueCompTemp && valueCompTemp.length > 0) {
          for (var i = 0; i < valueCompTemp.length; i++) {
            chipContent.appendChild(valueCompTemp[i]);
          }
        }
        this.renderReactTemplates();
      } else if (this.enableHtmlSanitizer) {
        chipContent.innerText = data;
      } else {
        chipContent.innerHTML = data;
      }
      chip.appendChild(chipContent);
      var eventArgs = {
        isInteracted: e ? true : false,
        itemData,
        e,
        setClass: function(classes) {
          addClass([chip], classes);
        },
        cancel: false
      };
      this.isPreventChange = this.isAngular && this.preventChange;
      this.trigger("tagging", eventArgs, function(eventArgs2) {
        if (!eventArgs2.cancel) {
          if (Browser.isDevice) {
            chip.classList.add(MOBILE_CHIP);
            append2([chipClose], chip);
            chipClose.style.display = "none";
            EventHandler.add(chip, "click", _this.onMobileChipInteraction, _this);
          } else {
            EventHandler.add(chip, "mousedown", _this.chipClick, _this);
            if (_this.showClearButton) {
              chip.appendChild(chipClose);
            }
          }
          EventHandler.add(chipClose, "mousedown", _this.onChipRemove, _this);
          _this.chipCollectionWrapper.appendChild(chip);
          if (!_this.changeOnBlur && e) {
            _this.updateValueState(e, _this.value, _this.tempValues);
          }
        }
      });
    };
    MultiSelect2.prototype.calcPopupWidth = function() {
      var width = formatUnit(this.popupWidth);
      if (width.indexOf("%") > -1) {
        var inputWidth = this.componentWrapper.offsetWidth * parseFloat(width) / 100;
        width = inputWidth.toString() + "px";
      }
      return width;
    };
    MultiSelect2.prototype.mouseIn = function() {
      if (this.enabled && !this.readonly) {
        this.showOverAllClear();
      }
    };
    MultiSelect2.prototype.mouseOut = function() {
      if (!this.inputFocus) {
        this.overAllClear.style.display = "none";
      }
    };
    MultiSelect2.prototype.listOption = function(dataSource, fields) {
      var iconCss = isNullOrUndefined(fields.iconCss) ? false : true;
      var fieldProperty = isNullOrUndefined(fields.properties) ? fields : fields.properties;
      this.listCurrentOptions = fields.text !== null || fields.value !== null ? {
        fields: fieldProperty,
        showIcon: iconCss,
        ariaAttributes: { groupItemRole: "presentation" }
      } : { fields: { value: "text" } };
      extend(this.listCurrentOptions, this.listCurrentOptions, fields, true);
      if (this.mode === "CheckBox") {
        this.notify("listoption", { module: "CheckBoxSelection", enable: this.mode === "CheckBox", dataSource, fieldProperty });
      }
      return this.listCurrentOptions;
    };
    MultiSelect2.prototype.renderPopup = function() {
      var _this = this;
      if (!this.list) {
        _super.prototype.render.call(this);
      }
      if (!this.popupObj) {
        if (!isNullOrUndefined(this.popupWrapper)) {
          document.body.appendChild(this.popupWrapper);
          var checkboxFilter = this.popupWrapper.querySelector("." + FILTERPARENT);
          if (this.mode === "CheckBox" && !this.allowFiltering && checkboxFilter && this.filterParent) {
            checkboxFilter.remove();
            this.filterParent = null;
          }
          var overAllHeight = parseInt(this.popupHeight, 10);
          this.popupWrapper.style.visibility = "hidden";
          if (this.headerTemplate) {
            this.setHeaderTemplate();
            overAllHeight -= this.header.offsetHeight;
          }
          append2([this.list], this.popupWrapper);
          if (this.footerTemplate) {
            this.setFooterTemplate();
            overAllHeight -= this.footer.offsetHeight;
          }
          if (this.mode === "CheckBox" && this.showSelectAll) {
            this.notify("selectAll", { module: "CheckBoxSelection", enable: this.mode === "CheckBox" });
            overAllHeight -= this.selectAllHeight;
          } else if (this.mode === "CheckBox" && !this.showSelectAll && (!this.headerTemplate && !this.footerTemplate)) {
            this.notify("selectAll", { module: "CheckBoxSelection", enable: this.mode === "CheckBox" });
            overAllHeight = parseInt(this.popupHeight, 10);
          } else if (this.mode === "CheckBox" && !this.showSelectAll) {
            this.notify("selectAll", { module: "CheckBoxSelection", enable: this.mode === "CheckBox" });
            overAllHeight = parseInt(this.popupHeight, 10);
            if (this.headerTemplate && this.header) {
              overAllHeight -= this.header.offsetHeight;
            }
            if (this.footerTemplate && this.footer) {
              overAllHeight -= this.footer.offsetHeight;
            }
          }
          if (this.mode === "CheckBox") {
            var args = {
              module: "CheckBoxSelection",
              enable: this.mode === "CheckBox",
              popupElement: this.popupWrapper
            };
            if (this.allowFiltering) {
              this.notify("searchBox", args);
              overAllHeight -= this.searchBoxHeight;
            }
            addClass([this.popupWrapper], "e-checkbox");
          }
          if (this.popupHeight !== "auto") {
            this.list.style.maxHeight = formatUnit(overAllHeight);
            this.popupWrapper.style.maxHeight = formatUnit(this.popupHeight);
          } else {
            this.list.style.maxHeight = formatUnit(this.popupHeight);
          }
          this.popupObj = new Popup(this.popupWrapper, {
            width: this.calcPopupWidth(),
            targetType: "relative",
            position: { X: "left", Y: "bottom" },
            relateTo: this.overAllWrapper,
            collision: { X: "flip", Y: "flip" },
            offsetY: 1,
            enableRtl: this.enableRtl,
            zIndex: this.zIndex,
            close: function() {
              if (_this.popupObj.element.parentElement) {
                _this.popupObj.unwireScrollEvents();
                var checkboxFilterInput = _this.popupWrapper.querySelector("." + FILTERINPUT);
                if (_this.mode === "CheckBox" && checkboxFilterInput && document.activeElement === checkboxFilterInput) {
                  checkboxFilterInput.blur();
                }
                detach(_this.popupObj.element);
              }
            },
            open: function() {
              _this.popupObj.resolveCollision();
              if (!_this.isFirstClick) {
                var ulElement = _this.list.querySelector("ul");
                if (ulElement) {
                  if (!(_this.mode !== "CheckBox" && (_this.allowFiltering || _this.allowCustomValue) && _this.targetElement().trim() !== "")) {
                    _this.mainList = ulElement.cloneNode ? ulElement.cloneNode(true) : ulElement;
                  }
                }
                _this.isFirstClick = true;
              }
              _this.popupObj.wireScrollEvents();
              if (!(_this.mode !== "CheckBox" && (_this.allowFiltering || _this.allowCustomValue) && _this.targetElement().trim() !== "")) {
                _this.loadTemplate();
              }
              _this.setScrollPosition();
              if (_this.allowFiltering) {
                _this.notify("inputFocus", {
                  module: "CheckBoxSelection",
                  enable: _this.mode === "CheckBox",
                  value: "focus"
                });
              }
            },
            targetExitViewport: function() {
              if (!Browser.isDevice) {
                _this.hidePopup();
              }
            }
          });
          if (this.mode === "CheckBox" && Browser.isDevice && this.allowFiltering) {
            this.notify("deviceSearchBox", { module: "CheckBoxSelection", enable: this.mode === "CheckBox" });
          }
          this.popupObj.close();
          this.popupWrapper.style.visibility = "";
        }
      }
    };
    MultiSelect2.prototype.setHeaderTemplate = function() {
      var compiledString;
      if (this.header) {
        this.header.remove();
      }
      this.header = this.createElement("div");
      addClass([this.header], HEADER$2);
      var headercheck = this.multiCompiler(this.headerTemplate);
      if (headercheck) {
        compiledString = compile$1(select$1(this.headerTemplate, document).innerHTML.trim());
      } else {
        compiledString = compile$1(this.headerTemplate);
      }
      var elements = compiledString({}, this, "headerTemplate", this.headerTemplateId, this.isStringTemplate, null, this.header);
      if (elements && elements.length > 0) {
        for (var temp = 0; temp < elements.length; temp++) {
          this.header.appendChild(elements[temp]);
        }
      }
      if (this.mode === "CheckBox" && this.showSelectAll) {
        prepend([this.header], this.popupWrapper);
      } else {
        append2([this.header], this.popupWrapper);
      }
      EventHandler.add(this.header, "mousedown", this.onListMouseDown, this);
    };
    MultiSelect2.prototype.setFooterTemplate = function() {
      var compiledString;
      if (this.footer) {
        this.footer.remove();
      }
      this.footer = this.createElement("div");
      addClass([this.footer], FOOTER$1);
      var footercheck = this.multiCompiler(this.footerTemplate);
      if (footercheck) {
        compiledString = compile$1(select$1(this.footerTemplate, document).innerHTML.trim());
      } else {
        compiledString = compile$1(this.footerTemplate);
      }
      var elements = compiledString({}, this, "footerTemplate", this.footerTemplateId, this.isStringTemplate, null, this.footer);
      if (elements && elements.length > 0) {
        for (var temp = 0; temp < elements.length; temp++) {
          this.footer.appendChild(elements[temp]);
        }
      }
      append2([this.footer], this.popupWrapper);
      EventHandler.add(this.footer, "mousedown", this.onListMouseDown, this);
    };
    MultiSelect2.prototype.clearAll = function(e) {
      if (this.enabled && !this.readonly) {
        var temp = void 0;
        if (this.value && this.value.length > 0) {
          var liElement = this.list && this.list.querySelectorAll("li.e-list-item");
          if (liElement && liElement.length > 0) {
            this.selectAllItems(false, e);
          } else {
            this.removeIndex = 0;
            for (temp = this.value[this.removeIndex]; this.removeIndex < this.value.length; temp = this.value[this.removeIndex]) {
              this.removeValue(temp, e, null, true);
            }
          }
          this.selectedElementID = null;
          this.inputElement.removeAttribute("aria-activedescendant");
        } else {
          this.clearAllCallback(e);
        }
      }
    };
    MultiSelect2.prototype.clearAllCallback = function(e, isClearAll) {
      var tempValues = this.value ? this.value.slice() : [];
      if (this.mainList && this.listData && (this.allowFiltering && this.mode !== "CheckBox" || this.allowCustomValue)) {
        var list = this.mainList.cloneNode ? this.mainList.cloneNode(true) : this.mainList;
        this.onActionComplete(list, this.mainData);
      }
      this.focusAtFirstListItem();
      this.updateDelimeter(this.delimiterChar, e);
      if (this.mode !== "Box" && (!this.inputFocus || this.mode === "CheckBox")) {
        this.updateDelimView();
      }
      if (this.inputElement.value !== "") {
        this.makeTextBoxEmpty();
        this.search(null);
      }
      this.checkPlaceholderSize();
      if (this.isPopupOpen()) {
        this.refreshPopup();
      }
      if (!this.inputFocus) {
        if (this.changeOnBlur) {
          this.updateValueState(e, this.value, tempValues);
        }
        if (this.mode !== "CheckBox") {
          this.inputElement.focus();
        }
      }
      if (this.mode === "CheckBox") {
        this.refreshPlaceHolder();
        this.refreshInputHight();
        if (this.changeOnBlur && isClearAll && (isNullOrUndefined(this.value) || this.value.length === 0)) {
          this.updateValueState(e, this.value, this.tempValues);
        }
      }
      if (!this.changeOnBlur && isClearAll && (isNullOrUndefined(this.value) || this.value.length === 0)) {
        this.updateValueState(e, this.value, this.tempValues);
      }
      if (this.mode === "CheckBox" && this.enableGroupCheckBox && !isNullOrUndefined(this.fields.groupBy)) {
        this.updateListItems(this.list.querySelectorAll("li.e-list-item"), this.mainList.querySelectorAll("li.e-list-item"));
      }
      e.preventDefault();
    };
    MultiSelect2.prototype.windowResize = function() {
      this.refreshPopup();
      if ((!this.inputFocus || this.mode === "CheckBox") && this.viewWrapper && this.viewWrapper.parentElement) {
        this.updateDelimView();
      }
    };
    MultiSelect2.prototype.resetValueHandler = function(e) {
      var formElement = closest(this.inputElement, "form");
      if (formElement && e.target === formElement) {
        var textVal = this.element.tagName === this.getNgDirective() ? null : this.element.getAttribute("data-initial-value");
        this.text = textVal;
      }
    };
    MultiSelect2.prototype.wireEvent = function() {
      EventHandler.add(this.componentWrapper, "mousedown", this.wrapperClick, this);
      EventHandler.add(window, "resize", this.windowResize, this);
      EventHandler.add(this.inputElement, "focus", this.focusInHandler, this);
      EventHandler.add(this.inputElement, "keydown", this.onKeyDown, this);
      EventHandler.add(this.inputElement, "keyup", this.keyUp, this);
      if (this.mode !== "CheckBox") {
        EventHandler.add(this.inputElement, "input", this.onInput, this);
      }
      EventHandler.add(this.inputElement, "blur", this.onBlurHandler, this);
      EventHandler.add(this.componentWrapper, "mouseover", this.mouseIn, this);
      var formElement = closest(this.inputElement, "form");
      if (formElement) {
        EventHandler.add(formElement, "reset", this.resetValueHandler, this);
      }
      EventHandler.add(this.componentWrapper, "mouseout", this.mouseOut, this);
      EventHandler.add(this.overAllClear, "mouseup", this.clearAll, this);
      EventHandler.add(this.inputElement, "paste", this.pasteHandler, this);
    };
    MultiSelect2.prototype.onInput = function(e) {
      if (this.keyDownStatus) {
        this.isValidKey = true;
      } else {
        this.isValidKey = false;
      }
      this.keyDownStatus = false;
      if (Browser.isDevice && Browser.info.name === "mozilla") {
        this.search(e);
      }
    };
    MultiSelect2.prototype.pasteHandler = function(event) {
      var _this = this;
      setTimeout(function() {
        _this.expandTextbox();
        _this.search(event);
      });
    };
    MultiSelect2.prototype.search = function(e) {
      var _this = this;
      this.resetFilteredData = true;
      if (!isNullOrUndefined(e)) {
        this.keyCode = e.keyCode;
      }
      if (!this.isPopupOpen() && this.openOnClick) {
        this.showPopup(e);
      }
      this.openClick(e);
      if (this.checkTextLength() && !this.allowFiltering && !isNullOrUndefined(e) && e.keyCode !== 8) {
        this.focusAtFirstListItem();
      } else {
        var text = this.targetElement();
        if (this.allowFiltering) {
          var eventArgs_1 = {
            preventDefaultAction: false,
            text: this.targetElement(),
            updateData: function(dataSource, query2, fields) {
              if (eventArgs_1.cancel) {
                return;
              }
              _this.isFiltered = true;
              _this.remoteFilterAction = true;
              _this.dataUpdater(dataSource, query2, fields);
            },
            event: e,
            cancel: false
          };
          this.trigger("filtering", eventArgs_1, function(eventArgs) {
            if (!eventArgs.cancel) {
              if (!_this.isFiltered && !eventArgs.preventDefaultAction) {
                _this.filterAction = true;
                _this.dataUpdater(_this.dataSource, null, _this.fields);
              }
            }
          });
        } else if (this.allowCustomValue) {
          var query = new Query();
          query = text !== "" ? query.where(this.fields.text, "startswith", text, this.ignoreCase, this.ignoreAccent) : query;
          this.dataUpdater(this.mainData, query, this.fields);
        } else {
          var liCollections = this.list.querySelectorAll("li." + dropDownBaseClasses.li + ":not(.e-hide-listitem)");
          var activeElement = Search(this.targetElement(), liCollections, "StartsWith", this.ignoreCase);
          if (activeElement && activeElement.item !== null) {
            this.addListFocus(activeElement.item);
            this.list.scrollTop = activeElement.item.offsetHeight * activeElement.index;
          } else if (this.targetElement() !== "") {
            this.removeFocus();
          } else {
            this.focusAtFirstListItem();
          }
        }
      }
    };
    MultiSelect2.prototype.preRender = function() {
      if (this.allowFiltering === null) {
        this.allowFiltering = this.mode === "CheckBox" ? true : false;
      }
      this.initializeData();
      this.updateDataAttribute(this.htmlAttributes);
      _super.prototype.preRender.call(this);
    };
    MultiSelect2.prototype.getLocaleName = function() {
      return "multi-select";
    };
    MultiSelect2.prototype.initializeData = function() {
      this.mainListCollection = [];
      this.beforePopupOpen = false;
      this.filterAction = false;
      this.remoteFilterAction = false;
      this.isFirstClick = false;
      this.mobFilter = true;
      this.isFiltered = false;
      this.focused = true;
      this.initial = true;
      this.backCommand = true;
    };
    MultiSelect2.prototype.updateData = function(delimiterChar, e) {
      var data = "";
      var delim = this.mode === "Delimiter" || this.mode === "CheckBox";
      var text = [];
      var temp;
      var tempData = this.listData;
      this.listData = this.mainData;
      if (!isNullOrUndefined(this.hiddenElement)) {
        this.hiddenElement.innerHTML = "";
      }
      if (!isNullOrUndefined(this.value)) {
        for (var index = 0; !isNullOrUndefined(this.value[index]); index++) {
          var listValue = this.findListElement(!isNullOrUndefined(this.mainList) ? this.mainList : this.ulElement, "li", "data-value", this.value[index]);
          if (isNullOrUndefined(listValue) && !this.allowCustomValue) {
            this.value.splice(index, 1);
            index -= 1;
          } else {
            if (this.listData) {
              temp = this.getTextByValue(this.value[index]);
            } else {
              temp = this.value[index];
            }
            data += temp + delimiterChar + " ";
            text.push(temp);
          }
          if (!isNullOrUndefined(this.hiddenElement)) {
            this.hiddenElement.innerHTML += '<option selected value ="' + this.value[index] + '">' + index + "</option>";
          }
        }
      }
      this.setProperties({ text: text.toString() }, true);
      if (delim) {
        this.updateWrapperText(this.delimiterWrapper, data);
        this.delimiterWrapper.setAttribute("id", getUniqueID("delim_val"));
        this.inputElement.setAttribute("aria-describedby", this.delimiterWrapper.id);
        this.inputElement.setAttribute("aria-labelledby", this.delimiterWrapper.id);
      }
      var targetEle = e && e.target;
      var isClearAll = targetEle && targetEle.classList.contains("e-close-hooker") ? true : null;
      if (!this.changeOnBlur && (e && !isClearAll) || this.isSelectAll) {
        this.isSelectAll = false;
        this.updateValueState(e, this.value, this.tempValues);
      }
      this.listData = tempData;
      this.addValidInputClass();
    };
    MultiSelect2.prototype.initialTextUpdate = function() {
      if (!isNullOrUndefined(this.text)) {
        var textArr = this.text.split(this.delimiterChar);
        var textVal = [];
        for (var index = 0; textArr.length > index; index++) {
          var val = this.getValueByText(textArr[index]);
          if (!isNullOrUndefined(val)) {
            textVal.push(val);
          } else if (this.allowCustomValue) {
            textVal.push(textArr[index]);
          }
        }
        if (textVal && textVal.length) {
          this.setProperties({ value: textVal }, true);
        }
      } else {
        this.setProperties({ value: null }, true);
      }
    };
    MultiSelect2.prototype.renderList = function(isEmptyData) {
      if (!isEmptyData && this.allowCustomValue && this.list && (this.list.textContent === this.noRecordsTemplate || this.list.querySelector(".e-ul") && this.list.querySelector(".e-ul").childElementCount === 0)) {
        isEmptyData = true;
      }
      _super.prototype.render.call(this, null, isEmptyData);
      this.unwireListEvents();
      this.wireListEvents();
    };
    MultiSelect2.prototype.initialValueUpdate = function() {
      if (this.list) {
        var text = void 0;
        var element2 = void 0;
        var value = void 0;
        if (this.chipCollectionWrapper) {
          this.chipCollectionWrapper.innerHTML = "";
        }
        this.removeListSelection();
        if (!isNullOrUndefined(this.value)) {
          for (var index = 0; !isNullOrUndefined(this.value[index]); index++) {
            value = this.value[index];
            element2 = this.findListElement(this.hideSelectedItem ? this.ulElement : this.list, "li", "data-value", value);
            text = this.getTextByValue(value);
            if (element2 && element2.getAttribute("aria-selected") !== "true" || element2 && (element2.getAttribute("aria-selected") === "true" && this.hideSelectedItem) && (this.mode === "Box" || this.mode === "Default")) {
              this.addChip(text, value);
              this.addListSelection(element2);
            } else if (value && this.allowCustomValue) {
              var indexItem = this.listData.length;
              var newValue = {};
              setValue(this.fields.text, value, newValue);
              setValue(this.fields.value, value, newValue);
              var noDataEle = this.popupWrapper.querySelector("." + dropDownBaseClasses.noData);
              this.addItem(newValue, indexItem);
              element2 = element2 ? element2 : this.findListElement(this.hideSelectedItem ? this.ulElement : this.list, "li", "data-value", value);
              if (this.popupWrapper.contains(noDataEle)) {
                this.list.setAttribute("style", noDataEle.getAttribute("style"));
                this.popupWrapper.replaceChild(this.list, noDataEle);
                this.wireListEvents();
              }
              this.addChip(text, value);
              this.addListSelection(element2);
            }
          }
        }
        if (this.mode === "CheckBox") {
          this.updateDelimView();
          if (this.changeOnBlur) {
            this.updateValueState(null, this.value, this.tempValues);
          }
          this.updateDelimeter(this.delimiterChar);
          this.refreshInputHight();
        } else {
          this.updateDelimeter(this.delimiterChar);
        }
        if (this.mode === "CheckBox" && this.showSelectAll && (isNullOrUndefined(this.value) || !this.value.length)) {
          this.notify("checkSelectAll", { module: "CheckBoxSelection", enable: this.mode === "CheckBox", value: "uncheck" });
        }
        if (this.mode === "Box" || this.mode === "Default" && this.inputFocus) {
          this.chipCollectionWrapper.style.display = "";
        } else if (this.mode === "Delimiter" || this.mode === "CheckBox") {
          this.showDelimWrapper();
        }
      }
    };
    MultiSelect2.prototype.updateActionCompleteData = function(li, item) {
      if (this.value && this.value.indexOf(li.getAttribute("data-value")) > -1) {
        this.mainList = this.ulElement;
        if (this.hideSelectedItem) {
          addClass([li], HIDE_LIST);
        }
      }
    };
    MultiSelect2.prototype.updateAddItemList = function(list, itemCount) {
      if (this.popupObj && this.popupObj.element && this.popupObj.element.querySelector("." + dropDownBaseClasses.noData) && list) {
        this.list = list;
        this.mainList = this.ulElement = list.querySelector("ul");
        remove(this.popupWrapper.querySelector(".e-content"));
        this.popupObj = null;
        this.renderPopup();
      } else if (this.allowCustomValue) {
        this.list = list;
        this.mainList = this.ulElement = list.querySelector("ul");
      }
    };
    MultiSelect2.prototype.updateDataList = function() {
      if (this.mainList && this.ulElement && !(this.isFiltered || this.filterAction || this.targetElement().trim())) {
        var isDynamicGroupItemUpdate = this.mainList.childElementCount < this.ulElement.childElementCount;
        var isReactTemplateUpdate = this.ulElement.childElementCount > 0 && this.ulElement.children[0].childElementCount > 0 && this.mainList.children[0].childElementCount < this.ulElement.children[0].childElementCount;
        var isAngularTemplateUpdate = this.itemTemplate && this.ulElement.childElementCount > 0 && !(this.ulElement.childElementCount < this.mainList.childElementCount) && (this.ulElement.children[0].childElementCount > 0 || this.fields.groupBy && this.ulElement.children[1] && this.ulElement.children[1].childElementCount > 0);
        if (isDynamicGroupItemUpdate || isReactTemplateUpdate || isAngularTemplateUpdate) {
          this.mainList = this.ulElement;
        }
      }
    };
    MultiSelect2.prototype.isValidLI = function(li) {
      return li && !li.classList.contains(dropDownBaseClasses.disabled) && !li.classList.contains(dropDownBaseClasses.group) && li.classList.contains(dropDownBaseClasses.li);
    };
    MultiSelect2.prototype.updateListSelection = function(li, e, length) {
      var customVal = li.getAttribute("data-value");
      var value = this.getFormattedValue(customVal);
      if (this.allowCustomValue && (customVal !== "false" && value === false || !isNullOrUndefined(value) && value.toString() === "NaN")) {
        value = customVal;
      }
      this.removeHover();
      if (!this.value || this.value.indexOf(value) === -1) {
        this.dispatchSelect(value, e, li, li.getAttribute("aria-selected") === "true", length);
      } else {
        this.removeValue(value, e, length);
      }
    };
    MultiSelect2.prototype.updateListSelectEventCallback = function(value, li, e) {
      var _this = this;
      var text = this.getTextByValue(value);
      if ((this.allowCustomValue || this.allowFiltering) && !this.findListElement(this.mainList, "li", "data-value", value)) {
        var temp_1 = li.cloneNode(true);
        var fieldValue = this.fields.value ? this.fields.value : "value";
        if (this.allowCustomValue && this.mainData.length && typeof getValue(fieldValue, this.mainData[0]) === "number") {
          value = !isNaN(parseFloat(value.toString())) ? parseFloat(value.toString()) : value;
        }
        var data_1 = this.getDataByValue(value);
        var eventArgs = {
          newData: data_1,
          cancel: false
        };
        this.trigger("customValueSelection", eventArgs, function(eventArgs2) {
          if (!eventArgs2.cancel) {
            append2([temp_1], _this.mainList);
            _this.mainData.push(data_1);
            _this.remoteCustomValue = false;
            _this.addValue(value, text, e);
          }
        });
      } else {
        this.remoteCustomValue = false;
        this.addValue(value, text, e);
      }
    };
    MultiSelect2.prototype.removeListSelection = function() {
      var className = this.hideSelectedItem ? HIDE_LIST : dropDownBaseClasses.selected;
      var selectedItems = this.list.querySelectorAll("." + className);
      var temp = selectedItems.length;
      if (selectedItems && selectedItems.length) {
        removeClass(selectedItems, className);
        while (temp > 0) {
          selectedItems[temp - 1].setAttribute("aria-selected", "false");
          temp--;
        }
      }
      if (!isNullOrUndefined(this.mainList)) {
        var selectItems = this.mainList.querySelectorAll("." + className);
        var temp1 = selectItems.length;
        if (selectItems && selectItems.length) {
          removeClass(selectItems, className);
          while (temp1 > 0) {
            selectItems[temp1 - 1].setAttribute("aria-selected", "false");
            if (this.mode === "CheckBox") {
              if (selectedItems && selectedItems.length > temp1 - 1) {
                removeClass([selectedItems[temp1 - 1].firstElementChild.lastElementChild], "e-check");
              }
              removeClass([selectItems[temp1 - 1].firstElementChild.lastElementChild], "e-check");
            }
            temp1--;
          }
        }
      }
    };
    MultiSelect2.prototype.removeHover = function() {
      var hoveredItem = this.list.querySelectorAll("." + dropDownBaseClasses.hover);
      if (hoveredItem && hoveredItem.length) {
        removeClass(hoveredItem, dropDownBaseClasses.hover);
      }
    };
    MultiSelect2.prototype.removeFocus = function() {
      if (this.list && this.mainList) {
        var hoveredItem = this.list.querySelectorAll("." + dropDownBaseClasses.focus);
        var mainlist = this.mainList.querySelectorAll("." + dropDownBaseClasses.focus);
        if (hoveredItem && hoveredItem.length) {
          removeClass(hoveredItem, dropDownBaseClasses.focus);
          removeClass(mainlist, dropDownBaseClasses.focus);
        }
      }
    };
    MultiSelect2.prototype.addListHover = function(li) {
      if (this.enabled && this.isValidLI(li)) {
        this.removeHover();
        addClass([li], dropDownBaseClasses.hover);
      } else {
        if (li !== null && li.classList.contains("e-list-group-item") && this.enableGroupCheckBox && this.mode === "CheckBox" && !isNullOrUndefined(this.fields.groupBy)) {
          this.removeHover();
          addClass([li], dropDownBaseClasses.hover);
        }
      }
    };
    MultiSelect2.prototype.addListFocus = function(element2) {
      if (this.enabled && this.isValidLI(element2)) {
        this.removeFocus();
        addClass([element2], dropDownBaseClasses.focus);
        this.updateAriaActiveDescendant();
      } else {
        if (this.enableGroupCheckBox && this.mode === "CheckBox" && !isNullOrUndefined(this.fields.groupBy)) {
          addClass([element2], dropDownBaseClasses.focus);
          this.updateAriaActiveDescendant();
        }
      }
    };
    MultiSelect2.prototype.addListSelection = function(element2, mainElement) {
      var className = this.hideSelectedItem ? HIDE_LIST : dropDownBaseClasses.selected;
      if (this.isValidLI(element2) && !element2.classList.contains(dropDownBaseClasses.hover)) {
        addClass([element2], className);
        this.updateMainList(false, element2.getAttribute("data-value"), mainElement);
        element2.setAttribute("aria-selected", "true");
        if (this.mode === "CheckBox" && element2.classList.contains("e-active")) {
          var ariaCheck = element2.getElementsByClassName("e-check").length;
          if (ariaCheck === 0) {
            this.notify("updatelist", { module: "CheckBoxSelection", enable: this.mode === "CheckBox", li: element2, e: this });
          }
        }
        this.notify("activeList", { module: "CheckBoxSelection", enable: this.mode === "CheckBox", li: element2, e: this });
        if (this.chipCollectionWrapper) {
          this.removeChipSelection();
        }
        this.selectedElementID = element2.id;
      }
    };
    MultiSelect2.prototype.updateDelimeter = function(delimChar, e) {
      this.updateData(delimChar, e);
    };
    MultiSelect2.prototype.onMouseClick = function(e) {
      var _this = this;
      this.keyCode = null;
      this.scrollFocusStatus = false;
      var target = e.target;
      var li = closest(target, "." + dropDownBaseClasses.li);
      var headerLi = closest(target, "." + dropDownBaseClasses.group);
      if (headerLi && this.enableGroupCheckBox && this.mode === "CheckBox" && this.fields.groupBy) {
        target = target.classList.contains("e-list-group-item") ? target.firstElementChild.lastElementChild : e.target;
        if (target.classList.contains("e-check")) {
          this.selectAllItem(false, e);
          target.classList.remove("e-check");
          target.classList.remove("e-stop");
          closest(target, ".e-list-group-item").classList.remove("e-active");
          target.setAttribute("aria-selected", "false");
        } else {
          this.selectAllItem(true, e);
          target.classList.remove("e-stop");
          target.classList.add("e-check");
          closest(target, ".e-list-group-item").classList.add("e-active");
          target.setAttribute("aria-selected", "true");
        }
        this.refreshSelection();
        this.checkSelectAll();
      } else {
        if (this.isValidLI(li)) {
          var limit = this.value && this.value.length ? this.value.length : 0;
          if (li.classList.contains("e-active")) {
            limit = limit - 1;
          }
          if (limit < this.maximumSelectionLength) {
            this.updateListSelection(li, e);
            this.checkPlaceholderSize();
            this.addListFocus(li);
            if ((this.allowCustomValue || this.allowFiltering) && this.mainList && this.listData) {
              if (this.mode !== "CheckBox") {
                this.focusAtLastListItem(li.getAttribute("data-value"));
                this.refreshSelection();
              }
            } else {
              this.makeTextBoxEmpty();
            }
          }
          if (this.mode === "CheckBox") {
            this.updateDelimView();
            if (this.value && this.value.length > 50) {
              setTimeout(function() {
                _this.updateDelimeter(_this.delimiterChar, e);
              }, 0);
            } else {
              this.updateDelimeter(this.delimiterChar, e);
            }
            this.refreshInputHight();
          } else {
            this.updateDelimeter(this.delimiterChar, e);
          }
          this.checkSelectAll();
          this.refreshPopup();
          if (this.hideSelectedItem) {
            this.focusAtFirstListItem();
          }
          if (this.closePopupOnSelect) {
            this.hidePopup(e);
          } else {
            e.preventDefault();
          }
          this.makeTextBoxEmpty();
          this.findGroupStart(target);
          if (this.mode !== "CheckBox") {
            this.refreshListItems(isNullOrUndefined(li) ? null : li.textContent);
          }
        } else {
          e.preventDefault();
        }
        this.refreshPlaceHolder();
        this.deselectHeader();
      }
    };
    MultiSelect2.prototype.findGroupStart = function(target) {
      if (this.enableGroupCheckBox && this.mode === "CheckBox" && !isNullOrUndefined(this.fields.groupBy)) {
        var count = 0;
        var liChecked = 0;
        var liUnchecked = 0;
        var groupValues = void 0;
        if (this.itemTemplate && !target.getElementsByClassName("e-frame").length) {
          while (!target.getElementsByClassName("e-frame").length) {
            target = target.parentElement;
          }
        }
        if (target.classList.contains("e-frame")) {
          target = target.parentElement.parentElement;
        }
        groupValues = this.findGroupAttrtibutes(target, liChecked, liUnchecked, count, 0);
        groupValues = this.findGroupAttrtibutes(target, groupValues[0], groupValues[1], groupValues[2], 1);
        while (!target.classList.contains("e-list-group-item")) {
          if (target.classList.contains("e-list-icon")) {
            target = target.parentElement;
          }
          target = target.previousElementSibling;
          if (target == null) {
            break;
          }
        }
        this.updateCheckBox(target, groupValues[0], groupValues[1], groupValues[2]);
      }
    };
    MultiSelect2.prototype.findGroupAttrtibutes = function(listElement, checked, unChecked, count, position) {
      while (!listElement.classList.contains("e-list-group-item")) {
        if (listElement.classList.contains("e-list-icon")) {
          listElement = listElement.parentElement;
        }
        if (listElement.getElementsByClassName("e-frame")[0].classList.contains("e-check") && listElement.classList.contains("e-list-item")) {
          checked++;
        } else if (listElement.classList.contains("e-list-item")) {
          unChecked++;
        }
        count++;
        listElement = position ? listElement.nextElementSibling : listElement.previousElementSibling;
        if (listElement == null) {
          break;
        }
      }
      return [checked, unChecked, count];
    };
    MultiSelect2.prototype.updateCheckBox = function(groupHeader, checked, unChecked, count) {
      if (groupHeader === null) {
        return;
      }
      var checkBoxElement = groupHeader.getElementsByClassName("e-frame")[0];
      if (count === checked) {
        checkBoxElement.classList.remove("e-stop");
        checkBoxElement.classList.add("e-check");
        closest(checkBoxElement, ".e-list-group-item").classList.add("e-active");
        groupHeader.setAttribute("aria-selected", "true");
      } else if (count === unChecked) {
        checkBoxElement.classList.remove("e-check");
        checkBoxElement.classList.remove("e-stop");
        closest(checkBoxElement, ".e-list-group-item").classList.remove("e-active");
        groupHeader.setAttribute("aria-selected", "false");
      } else if (this.maximumSelectionLength === checked - 1) {
        checkBoxElement.classList.remove("e-stop");
        groupHeader.setAttribute("aria-selected", "true");
        closest(checkBoxElement, ".e-list-group-item").classList.add("e-active");
        checkBoxElement.classList.add("e-check");
      } else {
        checkBoxElement.classList.remove("e-check");
        checkBoxElement.classList.add("e-stop");
        closest(checkBoxElement, ".e-list-group-item").classList.add("e-active");
        groupHeader.setAttribute("aria-selected", "false");
      }
    };
    MultiSelect2.prototype.deselectHeader = function() {
      var limit = this.value && this.value.length ? this.value.length : 0;
      var collection = this.list.querySelectorAll("li.e-list-group-item:not(.e-active)");
      if (limit < this.maximumSelectionLength) {
        removeClass(collection, "e-disable");
      }
      if (limit === this.maximumSelectionLength) {
        addClass(collection, "e-disable");
      }
    };
    MultiSelect2.prototype.onMouseOver = function(e) {
      var currentLi = closest(e.target, "." + dropDownBaseClasses.li);
      if (currentLi === null && this.mode === "CheckBox" && !isNullOrUndefined(this.fields.groupBy) && this.enableGroupCheckBox) {
        currentLi = closest(e.target, "." + dropDownBaseClasses.group);
      }
      this.addListHover(currentLi);
    };
    MultiSelect2.prototype.onMouseLeave = function() {
      this.removeHover();
    };
    MultiSelect2.prototype.onListMouseDown = function(e) {
      e.preventDefault();
      this.scrollFocusStatus = true;
    };
    MultiSelect2.prototype.onDocumentClick = function(e) {
      if (this.mode !== "CheckBox") {
        var target = e.target;
        if (!(!isNullOrUndefined(this.popupObj) && closest(target, '[id="' + this.popupObj.element.id + '"]')) && !this.overAllWrapper.contains(e.target)) {
          this.scrollFocusStatus = false;
        } else {
          this.scrollFocusStatus = (Browser.isIE || Browser.info.name === "edge") && document.activeElement === this.inputElement;
        }
      }
    };
    MultiSelect2.prototype.wireListEvents = function() {
      if (!isNullOrUndefined(this.list)) {
        EventHandler.add(document, "mousedown", this.onDocumentClick, this);
        EventHandler.add(this.list, "mousedown", this.onListMouseDown, this);
        EventHandler.add(this.list, "mouseup", this.onMouseClick, this);
        EventHandler.add(this.list, "mouseover", this.onMouseOver, this);
        EventHandler.add(this.list, "mouseout", this.onMouseLeave, this);
      }
    };
    MultiSelect2.prototype.unwireListEvents = function() {
      EventHandler.remove(document, "mousedown", this.onDocumentClick);
      if (this.list) {
        EventHandler.remove(this.list, "mousedown", this.onListMouseDown);
        EventHandler.remove(this.list, "mouseup", this.onMouseClick);
        EventHandler.remove(this.list, "mouseover", this.onMouseOver);
        EventHandler.remove(this.list, "mouseout", this.onMouseLeave);
      }
    };
    MultiSelect2.prototype.hideOverAllClear = function() {
      if (!this.value || !this.value.length || this.inputElement.value === "") {
        this.overAllClear.style.display = "none";
      }
    };
    MultiSelect2.prototype.showOverAllClear = function() {
      if ((this.value && this.value.length || this.inputElement.value !== "") && this.showClearButton && this.readonly !== true) {
        this.overAllClear.style.display = "";
      } else {
        this.overAllClear.style.display = "none";
      }
    };
    MultiSelect2.prototype.focusIn = function() {
      if (document.activeElement !== this.inputElement && this.enabled) {
        this.inputElement.focus();
      }
    };
    MultiSelect2.prototype.focusOut = function() {
      if (document.activeElement === this.inputElement && this.enabled) {
        this.inputElement.blur();
      }
    };
    MultiSelect2.prototype.showSpinner = function() {
      if (isNullOrUndefined(this.spinnerElement)) {
        var filterClear = this.filterParent && this.filterParent.querySelector(".e-clear-icon.e-icons");
        if (this.overAllClear.style.display !== "none" || filterClear) {
          this.spinnerElement = filterClear ? filterClear : this.overAllClear;
        } else {
          this.spinnerElement = this.createElement("span", { className: CLOSEICON_CLASS + " " + SPINNER_CLASS });
          this.componentWrapper.appendChild(this.spinnerElement);
        }
        createSpinner({ target: this.spinnerElement, width: Browser.isDevice ? "16px" : "14px" }, this.createElement);
        addClass([this.spinnerElement], DISABLE_ICON);
        showSpinner(this.spinnerElement);
      }
    };
    MultiSelect2.prototype.hideSpinner = function() {
      if (!isNullOrUndefined(this.spinnerElement)) {
        hideSpinner(this.spinnerElement);
        removeClass([this.spinnerElement], DISABLE_ICON);
        if (this.spinnerElement.classList.contains(SPINNER_CLASS)) {
          detach(this.spinnerElement);
        } else {
          this.spinnerElement.innerHTML = "";
        }
        this.spinnerElement = null;
      }
    };
    MultiSelect2.prototype.updateWrapperText = function(wrapperType, wrapperData) {
      if (this.valueTemplate || !this.enableHtmlSanitizer) {
        wrapperType.innerHTML = wrapperData;
      } else {
        wrapperType.innerText = SanitizeHtmlHelper.sanitize(wrapperData);
      }
    };
    MultiSelect2.prototype.updateDelimView = function() {
      if (this.delimiterWrapper) {
        this.hideDelimWrapper();
      }
      if (this.chipCollectionWrapper) {
        this.chipCollectionWrapper.style.display = "none";
      }
      if (!isNullOrUndefined(this.viewWrapper)) {
        this.viewWrapper.style.display = "";
        this.viewWrapper.style.width = "";
        this.viewWrapper.classList.remove(TOTAL_COUNT_WRAPPER);
      }
      if (this.value && this.value.length) {
        var data = "";
        var temp = void 0;
        var tempData = void 0;
        var tempIndex = 1;
        var wrapperleng = void 0;
        var remaining = void 0;
        var downIconWidth = 0;
        var overAllContainer = void 0;
        this.updateWrapperText(this.viewWrapper, data);
        var l10nLocale = {
          noRecordsTemplate: "No records found",
          actionFailureTemplate: "Request failed",
          overflowCountTemplate: "+${count} more..",
          totalCountTemplate: "${count} selected"
        };
        var l10n = new L10n(this.getLocaleName(), l10nLocale, this.locale);
        if (l10n.getConstant("actionFailureTemplate") === "") {
          l10n = new L10n("dropdowns", l10nLocale, this.locale);
        }
        if (l10n.getConstant("noRecordsTemplate") === "") {
          l10n = new L10n("dropdowns", l10nLocale, this.locale);
        }
        var remainContent = l10n.getConstant("overflowCountTemplate");
        var totalContent = l10n.getConstant("totalCountTemplate");
        var raminElement = this.createElement("span", {
          className: REMAIN_WRAPPER
        });
        var remainCompildTemp = remainContent.replace("${count}", this.value.length.toString());
        raminElement.innerText = remainCompildTemp;
        this.viewWrapper.appendChild(raminElement);
        this.renderReactTemplates();
        var remainSize = raminElement.offsetWidth;
        remove(raminElement);
        if (this.showDropDownIcon) {
          downIconWidth = this.dropIcon.offsetWidth + parseInt(window.getComputedStyle(this.dropIcon).marginRight, 10);
        }
        this.checkClearIconWidth();
        if (!isNullOrUndefined(this.value)) {
          for (var index = 0; !isNullOrUndefined(this.value[index]); index++) {
            data += index === 0 ? "" : this.delimiterChar + " ";
            temp = this.getOverflowVal(index);
            data += temp;
            temp = this.viewWrapper.innerHTML;
            this.updateWrapperText(this.viewWrapper, data);
            wrapperleng = this.viewWrapper.offsetWidth + parseInt(window.getComputedStyle(this.viewWrapper).paddingRight, 10);
            overAllContainer = this.componentWrapper.offsetWidth - parseInt(window.getComputedStyle(this.componentWrapper).paddingLeft, 10) - parseInt(window.getComputedStyle(this.componentWrapper).paddingRight, 10);
            if (wrapperleng + downIconWidth + this.clearIconWidth > overAllContainer) {
              if (tempData !== void 0 && tempData !== "") {
                temp = tempData;
                index = tempIndex + 1;
              }
              this.updateWrapperText(this.viewWrapper, temp);
              remaining = this.value.length - index;
              wrapperleng = this.viewWrapper.offsetWidth + parseInt(window.getComputedStyle(this.viewWrapper).paddingRight, 10);
              while (wrapperleng + remainSize + downIconWidth + this.clearIconWidth > overAllContainer && wrapperleng !== 0 && this.viewWrapper.innerHTML !== "") {
                var textArr = [];
                this.viewWrapper.innerHTML = textArr.join(this.delimiterChar);
                remaining = this.value.length;
                wrapperleng = this.viewWrapper.offsetWidth + parseInt(window.getComputedStyle(this.viewWrapper).paddingRight, 10);
              }
              break;
            } else if (wrapperleng + remainSize + downIconWidth + this.clearIconWidth <= overAllContainer) {
              tempData = data;
              tempIndex = index;
            } else if (index === 0) {
              tempData = "";
              tempIndex = -1;
            }
          }
        }
        if (remaining > 0) {
          var totalWidth = overAllContainer - downIconWidth - this.clearIconWidth;
          this.viewWrapper.appendChild(this.updateRemainTemplate(raminElement, this.viewWrapper, remaining, remainContent, totalContent, totalWidth));
          this.updateRemainWidth(this.viewWrapper, totalWidth);
          this.updateRemainingText(raminElement, downIconWidth, remaining, remainContent, totalContent);
        }
      } else {
        if (!isNullOrUndefined(this.viewWrapper)) {
          this.viewWrapper.innerHTML = "";
          this.viewWrapper.style.display = "none";
        }
      }
    };
    MultiSelect2.prototype.checkClearIconWidth = function() {
      if (this.showClearButton) {
        this.clearIconWidth = this.overAllClear.offsetWidth;
      }
    };
    MultiSelect2.prototype.updateRemainWidth = function(viewWrapper, totalWidth) {
      if (viewWrapper.classList.contains(TOTAL_COUNT_WRAPPER) && totalWidth < viewWrapper.offsetWidth + parseInt(window.getComputedStyle(viewWrapper).paddingLeft, 10) + parseInt(window.getComputedStyle(viewWrapper).paddingLeft, 10)) {
        viewWrapper.style.width = totalWidth + "px";
      }
    };
    MultiSelect2.prototype.updateRemainTemplate = function(raminElement, viewWrapper, remaining, remainContent, totalContent, totalWidth) {
      if (viewWrapper.firstChild && viewWrapper.firstChild.nodeType === 3 && viewWrapper.firstChild.nodeValue === "") {
        viewWrapper.removeChild(viewWrapper.firstChild);
      }
      raminElement.innerHTML = "";
      var remainTemp = remainContent.replace("${count}", remaining.toString());
      var totalTemp = totalContent.replace("${count}", remaining.toString());
      raminElement.innerText = viewWrapper.firstChild && viewWrapper.firstChild.nodeType === 3 ? remainTemp : totalTemp;
      if (viewWrapper.firstChild && viewWrapper.firstChild.nodeType === 3) {
        viewWrapper.classList.remove(TOTAL_COUNT_WRAPPER);
      } else {
        viewWrapper.classList.add(TOTAL_COUNT_WRAPPER);
        this.updateRemainWidth(viewWrapper, totalWidth);
      }
      return raminElement;
    };
    MultiSelect2.prototype.updateRemainingText = function(raminElement, downIconWidth, remaining, remainContent, totalContent) {
      var overAllContainer = this.componentWrapper.offsetWidth - parseInt(window.getComputedStyle(this.componentWrapper).paddingLeft, 10) - parseInt(window.getComputedStyle(this.componentWrapper).paddingRight, 10);
      var wrapperleng = this.viewWrapper.offsetWidth + parseInt(window.getComputedStyle(this.viewWrapper).paddingRight, 10);
      if (wrapperleng + downIconWidth >= overAllContainer && wrapperleng !== 0 && this.viewWrapper.firstChild && this.viewWrapper.firstChild.nodeType === 3) {
        while (wrapperleng + downIconWidth > overAllContainer && wrapperleng !== 0 && this.viewWrapper.firstChild && this.viewWrapper.firstChild.nodeType === 3) {
          var textArr = this.viewWrapper.firstChild.nodeValue.split(this.delimiterChar);
          textArr.pop();
          this.viewWrapper.firstChild.nodeValue = textArr.join(this.delimiterChar);
          if (this.viewWrapper.firstChild.nodeValue === "") {
            this.viewWrapper.removeChild(this.viewWrapper.firstChild);
          }
          remaining++;
          wrapperleng = this.viewWrapper.offsetWidth;
        }
        var totalWidth = overAllContainer - downIconWidth;
        this.updateRemainTemplate(raminElement, this.viewWrapper, remaining, remainContent, totalContent, totalWidth);
      }
    };
    MultiSelect2.prototype.getOverflowVal = function(index) {
      var temp;
      if (this.mainData && this.mainData.length) {
        if (this.mode === "CheckBox") {
          var newTemp = this.listData;
          this.listData = this.mainData;
          temp = this.getTextByValue(this.value[index]);
          this.listData = newTemp;
        } else {
          temp = this.getTextByValue(this.value[index]);
        }
      } else {
        temp = this.value[index];
      }
      return temp;
    };
    MultiSelect2.prototype.unWireEvent = function() {
      if (!isNullOrUndefined(this.componentWrapper)) {
        EventHandler.remove(this.componentWrapper, "mousedown", this.wrapperClick);
      }
      EventHandler.remove(window, "resize", this.windowResize);
      if (!isNullOrUndefined(this.inputElement)) {
        EventHandler.remove(this.inputElement, "focus", this.focusInHandler);
        EventHandler.remove(this.inputElement, "keydown", this.onKeyDown);
        if (this.mode !== "CheckBox") {
          EventHandler.remove(this.inputElement, "input", this.onInput);
        }
        EventHandler.remove(this.inputElement, "keyup", this.keyUp);
        var formElement = closest(this.inputElement, "form");
        if (formElement) {
          EventHandler.remove(formElement, "reset", this.resetValueHandler);
        }
        EventHandler.remove(this.inputElement, "blur", this.onBlurHandler);
      }
      if (!isNullOrUndefined(this.componentWrapper)) {
        EventHandler.remove(this.componentWrapper, "mouseover", this.mouseIn);
        EventHandler.remove(this.componentWrapper, "mouseout", this.mouseOut);
      }
      if (!isNullOrUndefined(this.overAllClear)) {
        EventHandler.remove(this.overAllClear, "mousedown", this.clearAll);
      }
      if (!isNullOrUndefined(this.inputElement)) {
        EventHandler.remove(this.inputElement, "paste", this.pasteHandler);
      }
    };
    MultiSelect2.prototype.selectAllItem = function(state, event, list) {
      var li;
      if (!isNullOrUndefined(this.list)) {
        li = this.list.querySelectorAll(state ? 'li.e-list-item:not([aria-selected="true"]):not(.e-reorder-hide)' : 'li.e-list-item[aria-selected="true"]:not(.e-reorder-hide)');
      }
      if (this.value && this.value.length && event && event.target && closest(event.target, ".e-close-hooker") && this.allowFiltering) {
        li = this.mainList.querySelectorAll(state ? 'li.e-list-item:not([aria-selected="true"]):not(.e-reorder-hide)' : 'li.e-list-item[aria-selected="true"]:not(.e-reorder-hide)');
      }
      if (this.enableGroupCheckBox && this.mode === "CheckBox" && !isNullOrUndefined(this.fields.groupBy)) {
        var target = event ? this.groupTemplate ? closest(event.target, ".e-list-group-item") : event.target : null;
        target = event && event.keyCode === 32 ? list : target;
        target = target && target.classList.contains("e-frame") ? target.parentElement.parentElement : target;
        if (target && target.classList.contains("e-list-group-item")) {
          var listElement = target.nextElementSibling;
          if (isNullOrUndefined(listElement)) {
            return;
          }
          while (listElement.classList.contains("e-list-item")) {
            if (state) {
              if (!listElement.firstElementChild.lastElementChild.classList.contains("e-check")) {
                var selectionLimit = this.value && this.value.length ? this.value.length : 0;
                if (listElement.classList.contains("e-active")) {
                  selectionLimit -= 1;
                }
                if (selectionLimit < this.maximumSelectionLength) {
                  this.updateListSelection(listElement, event);
                }
              }
            } else {
              if (listElement.firstElementChild.lastElementChild.classList.contains("e-check")) {
                this.updateListSelection(listElement, event);
              }
            }
            listElement = listElement.nextElementSibling;
            if (listElement == null) {
              break;
            }
          }
          if (target.classList.contains("e-list-group-item")) {
            var focusedElement = this.list.getElementsByClassName("e-item-focus")[0];
            if (focusedElement) {
              focusedElement.classList.remove("e-item-focus");
            }
            if (state) {
              target.classList.add("e-active");
            } else {
              target.classList.remove("e-active");
            }
            target.classList.add("e-item-focus");
            this.updateAriaActiveDescendant();
          }
          this.textboxValueUpdate();
          this.checkPlaceholderSize();
          if (!this.changeOnBlur && event) {
            this.updateValueState(event, this.value, this.tempValues);
          }
        } else {
          this.updateValue(event, li, state);
        }
      } else {
        this.updateValue(event, li, state);
      }
      this.addValidInputClass();
    };
    MultiSelect2.prototype.updateValue = function(event, li, state) {
      var _this = this;
      var length = li.length;
      var beforeSelectArgs = {
        event,
        items: state ? li : [],
        itemData: state ? this.listData : [],
        isInteracted: event ? true : false,
        isChecked: state,
        preventSelectEvent: false
      };
      this.trigger("beforeSelectAll", beforeSelectArgs);
      if (li && li.length) {
        var index_1 = 0;
        var count_1 = 0;
        if (this.enableGroupCheckBox) {
          count_1 = state ? this.maximumSelectionLength - (this.value ? this.value.length : 0) : li.length;
        } else {
          count_1 = state ? this.maximumSelectionLength - (this.value ? this.value.length : 0) : this.maximumSelectionLength;
        }
        if (!beforeSelectArgs.preventSelectEvent) {
          while (index_1 < length && index_1 <= 50 && index_1 < count_1) {
            this.updateListSelection(li[index_1], event, length - index_1);
            if (this.enableGroupCheckBox) {
              this.findGroupStart(li[index_1]);
            }
            index_1++;
          }
          if (length > 50) {
            setTimeout(function() {
              while (index_1 < length && index_1 < count_1) {
                _this.updateListSelection(li[index_1], event, length - index_1);
                if (_this.enableGroupCheckBox) {
                  _this.findGroupStart(li[index_1]);
                }
                index_1++;
              }
              _this.updatedataValueItems(event);
              if (!_this.changeOnBlur) {
                _this.updateValueState(event, _this.value, _this.tempValues);
                _this.isSelectAll = _this.isSelectAll ? !_this.isSelectAll : _this.isSelectAll;
              }
              _this.updateHiddenElement();
            }, 0);
          }
        } else {
          for (var i = 0; i < li.length && i < count_1; i++) {
            this.removeHover();
            var customVal = li[i].getAttribute("data-value");
            var value = this.getFormattedValue(customVal);
            var mainElement = this.mainList ? this.mainList.querySelectorAll(state ? 'li.e-list-item:not([aria-selected="true"]):not(.e-reorder-hide)' : 'li.e-list-item[aria-selected="true"]:not(.e-reorder-hide)')[i] : null;
            if (state) {
              this.value = !this.value ? [] : this.value;
              if (this.value.indexOf(value) < 0) {
                this.setProperties({ value: [].concat([], this.value, [value]) }, true);
              }
              this.removeFocus();
              this.addListSelection(li[i], mainElement);
              this.updateChipStatus();
              this.checkMaxSelection();
            } else {
              this.removeAllItems(value, event, false, li[i], mainElement);
            }
            if (this.enableGroupCheckBox) {
              this.findGroupStart(li[i]);
            }
          }
          if (!state) {
            var limit = this.value && this.value.length ? this.value.length : 0;
            if (limit < this.maximumSelectionLength) {
              var collection = this.list.querySelectorAll("li." + dropDownBaseClasses.li + ":not(.e-active)");
              removeClass(collection, "e-disable");
            }
          }
          var args = {
            event,
            items: state ? li : [],
            itemData: state ? this.listData : [],
            isInteracted: event ? true : false,
            isChecked: state
          };
          this.trigger("selectedAll", args);
        }
      }
      this.updatedataValueItems(event);
      this.checkPlaceholderSize();
      if (length <= 50 && !beforeSelectArgs.preventSelectEvent) {
        if (!this.changeOnBlur) {
          this.updateValueState(event, this.value, this.tempValues);
          this.isSelectAll = this.isSelectAll ? !this.isSelectAll : this.isSelectAll;
        }
        this.updateHiddenElement();
      }
    };
    MultiSelect2.prototype.updateHiddenElement = function() {
      var _this = this;
      var hiddenValue = "";
      var wrapperText = "";
      var data = "";
      var text = [];
      if (this.mode === "CheckBox") {
        this.value.map(function(value, index) {
          hiddenValue += '<option selected value ="' + value + '">' + index + "</option>";
          if (_this.listData) {
            data = _this.getTextByValue(value);
          } else {
            data = value;
          }
          wrapperText += data + _this.delimiterChar + " ";
          text.push(data);
        });
        this.hiddenElement.innerHTML = hiddenValue;
        this.updateWrapperText(this.delimiterWrapper, wrapperText);
        this.delimiterWrapper.setAttribute("id", getUniqueID("delim_val"));
        this.inputElement.setAttribute("aria-describedby", this.delimiterWrapper.id);
        this.inputElement.setAttribute("aria-labelledby", this.delimiterWrapper.id);
        this.setProperties({ text: text.toString() }, true);
        this.refreshInputHight();
        this.refreshPlaceHolder();
      }
    };
    MultiSelect2.prototype.updatedataValueItems = function(event) {
      this.deselectHeader();
      this.textboxValueUpdate(event);
    };
    MultiSelect2.prototype.textboxValueUpdate = function(event) {
      var isRemoveAll = event && event.target && (closest(event.target, ".e-selectall-parent") || closest(event.target, ".e-close-hooker"));
      if (this.mode !== "Box" && !this.isPopupOpen() && !(this.mode === "CheckBox" && (this.isSelectAll || isRemoveAll))) {
        this.updateDelimView();
      } else {
        this.searchWrapper.classList.remove(ZERO_SIZE);
      }
      if (this.mode === "CheckBox") {
        this.updateDelimView();
        if (!(isRemoveAll || this.isSelectAll)) {
          this.updateDelimeter(this.delimiterChar, event);
        }
        this.refreshInputHight();
      } else {
        this.updateDelimeter(this.delimiterChar, event);
      }
      this.refreshPlaceHolder();
    };
    MultiSelect2.prototype.setZIndex = function() {
      if (this.popupObj) {
        this.popupObj.setProperties({ "zIndex": this.zIndex });
      }
    };
    MultiSelect2.prototype.updateDataSource = function(prop) {
      if (isNullOrUndefined(this.list)) {
        this.renderPopup();
      } else {
        this.resetList(this.dataSource);
      }
      if (this.value && this.value.length) {
        this.setProperties({ "value": this.value });
        this.refreshSelection();
      }
    };
    MultiSelect2.prototype.onLoadSelect = function() {
      this.setDynValue = true;
      this.renderPopup();
    };
    MultiSelect2.prototype.selectAllItems = function(state, event) {
      var _this = this;
      if (isNullOrUndefined(this.list)) {
        this.selectAllAction = function() {
          if (_this.mode === "CheckBox" && _this.showSelectAll) {
            var args2 = {
              module: "CheckBoxSelection",
              enable: _this.mode === "CheckBox",
              value: state ? "check" : "uncheck"
            };
            _this.notify("checkSelectAll", args2);
          }
          _this.selectAllItem(state, event);
          _this.selectAllAction = null;
        };
        _super.prototype.render.call(this);
      } else {
        this.selectAllAction = null;
        if (this.mode === "CheckBox" && this.showSelectAll) {
          var args = {
            value: state ? "check" : "uncheck",
            enable: this.mode === "CheckBox",
            module: "CheckBoxSelection"
          };
          this.notify("checkSelectAll", args);
        }
        this.selectAllItem(state, event);
      }
    };
    MultiSelect2.prototype.getPersistData = function() {
      return this.addOnPersist(["value"]);
    };
    MultiSelect2.prototype.onPropertyChanged = function(newProp, oldProp) {
      if (newProp.dataSource && !isNullOrUndefined(Object.keys(newProp.dataSource)) || newProp.query && !isNullOrUndefined(Object.keys(newProp.query))) {
        if (this.resetFilteredData) {
          this.resetMainList = !this.resetMainList ? this.mainList : this.resetMainList;
          this.resetFilteredData = false;
        }
        this.mainList = null;
        this.mainData = null;
        this.isFirstClick = false;
        this.isDynamicDataChange = true;
      }
      if (this.getModuleName() === "multiselect") {
        this.filterAction = false;
        this.setUpdateInitial(["fields", "query", "dataSource"], newProp);
      }
      for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {
        var prop = _a[_i];
        switch (prop) {
          case "query":
          case "dataSource":
            if (this.mode === "CheckBox" && this.showSelectAll) {
              if (!isNullOrUndefined(this.popupObj)) {
                this.popupObj.destroy();
                this.popupObj = null;
              }
              this.renderPopup();
            }
            break;
          case "htmlAttributes":
            this.updateHTMLAttribute();
            break;
          case "showClearButton":
            this.updateClearButton(newProp.showClearButton);
            break;
          case "text":
            this.updateVal(this.value, this.value, "text");
            break;
          case "value":
            this.updateVal(this.value, oldProp.value, "value");
            this.addValidInputClass();
            if (!this.closePopupOnSelect && this.isPopupOpen()) {
              this.refreshPopup();
            }
            this.preventChange = this.isAngular && this.preventChange ? !this.preventChange : this.preventChange;
            break;
          case "width":
            this.setWidth(newProp.width);
            this.popupObj.setProperties({ width: this.calcPopupWidth() });
            break;
          case "placeholder":
            this.refreshPlaceHolder();
            break;
          case "filterBarPlaceholder":
            if (this.allowFiltering) {
              this.notify("filterBarPlaceholder", { filterBarPlaceholder: newProp.filterBarPlaceholder });
            }
            break;
          case "delimiterChar":
            if (this.mode !== "Box") {
              this.updateDelimView();
            }
            this.updateData(newProp.delimiterChar);
            break;
          case "cssClass":
            this.updateOldPropCssClass(oldProp.cssClass);
            this.updateCssClass();
            this.calculateWidth();
            break;
          case "enableRtl":
            this.enableRTL(newProp.enableRtl);
            _super.prototype.onPropertyChanged.call(this, newProp, oldProp);
            break;
          case "readonly":
            this.updateReadonly(newProp.readonly);
            this.hidePopup();
            break;
          case "enabled":
            this.hidePopup();
            this.enable(newProp.enabled);
            break;
          case "showSelectAll":
            if (this.popupObj) {
              this.popupObj.destroy();
              this.popupObj = null;
            }
            this.renderPopup();
            break;
          case "showDropDownIcon":
            this.dropDownIcon();
            break;
          case "floatLabelType":
            this.setFloatLabelType();
            this.addValidInputClass();
            Input.createSpanElement(this.overAllWrapper, this.createElement);
            this.calculateWidth();
            if (!isNullOrUndefined(this.overAllWrapper) && !isNullOrUndefined(this.overAllWrapper.getElementsByClassName("e-ddl-icon")[0] && this.overAllWrapper.getElementsByClassName("e-float-text-content")[0] && this.floatLabelType !== "Never")) {
              this.overAllWrapper.getElementsByClassName("e-float-text-content")[0].classList.add("e-icon");
            }
            break;
          case "enableSelectionOrder":
            break;
          case "selectAllText":
            this.notify("selectAllText", false);
            break;
          case "popupHeight":
            if (this.popupObj) {
              var overAllHeight = parseInt(this.popupHeight, 10);
              if (this.popupHeight !== "auto") {
                this.list.style.maxHeight = formatUnit(overAllHeight);
                this.popupWrapper.style.maxHeight = formatUnit(this.popupHeight);
              } else {
                this.list.style.maxHeight = formatUnit(this.popupHeight);
              }
            }
            break;
          case "headerTemplate":
          case "footerTemplate":
            this.reInitializePoup();
            break;
          case "allowFiltering":
            if (this.mode === "CheckBox" && this.popupObj) {
              this.reInitializePoup();
            }
            this.updateSelectElementData(this.allowFiltering);
            break;
          default:
            {
              var msProps = this.getPropObject(prop, newProp, oldProp);
              _super.prototype.onPropertyChanged.call(this, msProps.newProperty, msProps.oldProperty);
            }
            break;
        }
      }
    };
    MultiSelect2.prototype.reInitializePoup = function() {
      if (this.popupObj) {
        this.popupObj.destroy();
        this.popupObj = null;
      }
      this.renderPopup();
    };
    MultiSelect2.prototype.presentItemValue = function(ulElement) {
      var valuecheck = [];
      for (var i = 0; i < this.value.length; i++) {
        var checkEle = this.findListElement(this.allowFiltering && !isNullOrUndefined(this.mainList) ? this.mainList : ulElement, "li", "data-value", this.value[i]);
        if (!checkEle) {
          valuecheck.push(this.value[i]);
        }
      }
      return valuecheck;
    };
    MultiSelect2.prototype.addNonPresentItems = function(valuecheck, ulElement, list, event) {
      var _this = this;
      this.dataSource.executeQuery(this.getForQuery(valuecheck)).then(function(e) {
        if (e.result.length > 0) {
          _this.addItem(e.result, list.length);
        }
        _this.updateActionList(ulElement, list, event);
      });
    };
    MultiSelect2.prototype.updateVal = function(newProp, oldProp, prop) {
      if (!this.list) {
        this.onLoadSelect();
      } else if (this.dataSource instanceof DataManager && (!this.listData || !(this.mainList && this.mainData))) {
        this.onLoadSelect();
      } else {
        var valuecheck = [];
        if (!isNullOrUndefined(this.value) && !this.allowCustomValue) {
          valuecheck = this.presentItemValue(this.ulElement);
        }
        if (prop == "value" && valuecheck.length > 0 && this.dataSource instanceof DataManager && !isNullOrUndefined(this.value) && this.listData != null) {
          this.mainData = null;
          this.setDynValue = true;
          this.addNonPresentItems(valuecheck, this.ulElement, this.listData);
        } else {
          if (prop === "text") {
            this.initialTextUpdate();
            newProp = this.value;
          }
          if (isNullOrUndefined(this.value) || this.value.length === 0) {
            this.tempValues = oldProp;
          }
          if (this.allowCustomValue && (this.mode === "Default" || this.mode === "Box") && this.isReact && this.inputFocus && this.isPopupOpen() && this.mainData !== this.listData) {
            var list = this.mainList.cloneNode ? this.mainList.cloneNode(true) : this.mainList;
            this.onActionComplete(list, this.mainData);
          }
          this.initialValueUpdate();
          if (this.mode !== "Box" && !this.inputFocus) {
            this.updateDelimView();
          }
          if (!this.inputFocus) {
            this.refreshInputHight();
          }
          this.refreshPlaceHolder();
          if (this.mode !== "CheckBox" && this.changeOnBlur) {
            this.updateValueState(null, newProp, oldProp);
          }
          this.checkPlaceholderSize();
        }
      }
      if (!this.changeOnBlur) {
        this.updateValueState(null, newProp, oldProp);
      }
    };
    MultiSelect2.prototype.addItem = function(items, itemIndex) {
      _super.prototype.addItem.call(this, items, itemIndex);
    };
    MultiSelect2.prototype.hidePopup = function(e) {
      var _this = this;
      var delay = 100;
      if (this.isPopupOpen()) {
        var animModel = {
          name: "FadeOut",
          duration: 100,
          delay
        };
        var eventArgs = { popup: this.popupObj, cancel: false, animation: animModel, event: e || null };
        this.trigger("close", eventArgs, function(eventArgs2) {
          if (!eventArgs2.cancel) {
            if (_this.fields.groupBy && _this.mode !== "CheckBox" && _this.fixedHeaderElement) {
              remove(_this.fixedHeaderElement);
              _this.fixedHeaderElement = null;
            }
            _this.beforePopupOpen = false;
            _this.overAllWrapper.classList.remove(iconAnimation);
            _this.popupObj.hide(new Animation$1(eventArgs2.animation));
            attributes(_this.inputElement, { "aria-expanded": "false" });
            _this.inputElement.removeAttribute("aria-owns");
            _this.inputElement.removeAttribute("aria-activedescendant");
            if (_this.allowFiltering) {
              _this.notify("inputFocus", { module: "CheckBoxSelection", enable: _this.mode === "CheckBox", value: "clear" });
            }
            _this.popupObj.hide();
            removeClass([document.body, _this.popupObj.element], "e-popup-full-page");
            EventHandler.remove(_this.list, "keydown", _this.onKeyDown);
          }
        });
      }
    };
    MultiSelect2.prototype.showPopup = function(e) {
      var _this = this;
      if (!this.enabled) {
        return;
      }
      var args = { cancel: false };
      this.trigger("beforeOpen", args, function(args2) {
        if (!args2.cancel) {
          if (!_this.ulElement) {
            _this.beforePopupOpen = true;
            _super.prototype.render.call(_this, e);
            if (_this.mode === "CheckBox" && Browser.isDevice && _this.allowFiltering) {
              _this.notify("popupFullScreen", { module: "CheckBoxSelection", enable: _this.mode === "CheckBox" });
            }
            return;
          }
          if (_this.mode === "CheckBox" && Browser.isDevice && _this.allowFiltering) {
            _this.notify("popupFullScreen", { module: "CheckBoxSelection", enable: _this.mode === "CheckBox" });
          }
          var mainLiLength = _this.ulElement.querySelectorAll("li.e-list-item").length;
          var liLength = _this.ulElement.querySelectorAll("li." + dropDownBaseClasses.li + "." + HIDE_LIST).length;
          if (mainLiLength > 0 && mainLiLength === liLength && liLength === _this.mainData.length && !(_this.targetElement() !== "" && _this.allowCustomValue)) {
            _this.beforePopupOpen = false;
            return;
          }
          _this.onPopupShown(e);
        }
      });
    };
    MultiSelect2.prototype.selectAll = function(state) {
      this.isSelectAll = true;
      this.selectAllItems(state);
    };
    MultiSelect2.prototype.getModuleName = function() {
      return "multiselect";
    };
    MultiSelect2.prototype.clear = function() {
      var _this = this;
      this.selectAll(false);
      if (this.value && this.value.length) {
        setTimeout(function() {
          _this.setProperties({ value: null }, true);
        }, 0);
      } else {
        this.setProperties({ value: null }, true);
      }
    };
    MultiSelect2.prototype.render = function() {
      this.setDynValue = this.initStatus = false;
      this.isSelectAll = false;
      this.selectAllEventEle = [];
      this.searchWrapper = this.createElement("span", { className: SEARCHBOX_WRAPPER + " " + (this.mode === "Box" ? BOX_ELEMENT : "") });
      this.viewWrapper = this.createElement("span", { className: DELIMITER_VIEW + " " + DELIMITER_WRAPPER, styles: "display:none;" });
      this.overAllClear = this.createElement("span", {
        className: CLOSEICON_CLASS,
        styles: "display:none;"
      });
      this.componentWrapper = this.createElement("div", { className: ELEMENT_WRAPPER });
      this.overAllWrapper = this.createElement("div", { className: OVER_ALL_WRAPPER });
      if (this.mode === "CheckBox") {
        addClass([this.overAllWrapper], "e-checkbox");
      }
      if (Browser.isDevice) {
        this.componentWrapper.classList.add(ELEMENT_MOBILE_WRAPPER);
      }
      this.setWidth(this.width);
      this.overAllWrapper.appendChild(this.componentWrapper);
      this.popupWrapper = this.createElement("div", { id: this.element.id + "_popup", className: POPUP_WRAPPER });
      if (this.mode === "Delimiter" || this.mode === "CheckBox") {
        this.delimiterWrapper = this.createElement("span", { className: DELIMITER_WRAPPER, styles: "display:none" });
        this.componentWrapper.appendChild(this.delimiterWrapper);
      } else {
        this.chipCollectionWrapper = this.createElement("span", {
          className: CHIP_WRAPPER,
          styles: "display:none"
        });
        if (this.mode === "Default") {
          this.chipCollectionWrapper.setAttribute("id", getUniqueID("chip_default"));
        } else if (this.mode === "Box") {
          this.chipCollectionWrapper.setAttribute("id", getUniqueID("chip_box"));
        }
        this.componentWrapper.appendChild(this.chipCollectionWrapper);
      }
      if (this.mode !== "Box") {
        this.componentWrapper.appendChild(this.viewWrapper);
      }
      this.componentWrapper.appendChild(this.searchWrapper);
      if (this.showClearButton && !Browser.isDevice) {
        this.componentWrapper.appendChild(this.overAllClear);
      } else {
        this.componentWrapper.classList.add(CLOSE_ICON_HIDE);
      }
      this.dropDownIcon();
      this.inputElement = this.createElement("input", {
        className: INPUT_ELEMENT,
        attrs: {
          spellcheck: "false",
          type: "text",
          autocomplete: "off",
          tabindex: "0",
          role: "combobox"
        }
      });
      if (this.mode === "Default" || this.mode === "Box") {
        this.inputElement.setAttribute("aria-describedby", this.chipCollectionWrapper.id);
      }
      if (this.element.tagName !== this.getNgDirective()) {
        this.element.style.display = "none";
      }
      if (this.element.tagName === this.getNgDirective()) {
        this.element.appendChild(this.overAllWrapper);
        this.searchWrapper.appendChild(this.inputElement);
      } else {
        this.element.parentElement.insertBefore(this.overAllWrapper, this.element);
        this.searchWrapper.appendChild(this.inputElement);
        this.searchWrapper.appendChild(this.element);
        this.element.removeAttribute("tabindex");
      }
      if (this.floatLabelType !== "Never") {
        createFloatLabel(this.overAllWrapper, this.searchWrapper, this.element, this.inputElement, this.value, this.floatLabelType, this.placeholder);
      } else if (this.floatLabelType === "Never") {
        this.refreshPlaceHolder();
      }
      this.addValidInputClass();
      this.element.style.opacity = "";
      var id = this.element.getAttribute("id") ? this.element.getAttribute("id") : getUniqueID("ej2_dropdownlist");
      this.element.id = id;
      this.hiddenElement = this.createElement("select", {
        attrs: { "aria-hidden": "true", "class": HIDDEN_ELEMENT, "tabindex": "-1", "multiple": "" }
      });
      this.componentWrapper.appendChild(this.hiddenElement);
      this.validationAttribute(this.element, this.hiddenElement);
      if (this.mode !== "CheckBox") {
        this.hideOverAllClear();
      }
      if (!isNullOrUndefined(closest(this.element, "fieldset")) && closest(this.element, "fieldset").disabled) {
        this.enabled = false;
      }
      this.wireEvent();
      this.enable(this.enabled);
      this.enableRTL(this.enableRtl);
      this.checkInitialValue();
      if (this.element.hasAttribute("data-val")) {
        this.element.setAttribute("data-val", "false");
      }
      Input.createSpanElement(this.overAllWrapper, this.createElement);
      this.calculateWidth();
      if (!isNullOrUndefined(this.overAllWrapper) && !isNullOrUndefined(this.overAllWrapper.getElementsByClassName("e-ddl-icon")[0] && this.overAllWrapper.getElementsByClassName("e-float-text-content")[0] && this.floatLabelType !== "Never")) {
        this.overAllWrapper.getElementsByClassName("e-float-text-content")[0].classList.add("e-icon");
      }
      this.renderComplete();
    };
    MultiSelect2.prototype.checkInitialValue = function() {
      var _this = this;
      var isData = this.dataSource instanceof Array ? this.dataSource.length > 0 : !isNullOrUndefined(this.dataSource);
      if (!(this.value && this.value.length) && isNullOrUndefined(this.text) && !isData && this.element.tagName === "SELECT" && this.element.options.length > 0) {
        var optionsElement = this.element.options;
        var valueCol = [];
        var textCol = "";
        for (var index = 0, optionsLen = optionsElement.length; index < optionsLen; index++) {
          var opt = optionsElement[index];
          if (!isNullOrUndefined(opt.getAttribute("selected"))) {
            if (opt.getAttribute("value")) {
              valueCol.push(opt.getAttribute("value"));
            } else {
              textCol += opt.text + this.delimiterChar;
            }
          }
        }
        if (valueCol.length > 0) {
          this.setProperties({ value: valueCol }, true);
        } else if (textCol !== "") {
          this.setProperties({ text: textCol }, true);
        }
        if (valueCol.length > 0 || textCol !== "") {
          this.refreshInputHight();
          this.refreshPlaceHolder();
        }
      }
      if (this.value && this.value.length || !isNullOrUndefined(this.text)) {
        if (!this.list) {
          _super.prototype.render.call(this);
        }
      }
      if (!isNullOrUndefined(this.text) && (isNullOrUndefined(this.value) || this.value.length === 0)) {
        this.initialTextUpdate();
      }
      if (this.value && this.value.length) {
        if (!(this.dataSource instanceof DataManager)) {
          this.initialValueUpdate();
          this.initialUpdate();
        } else {
          this.setInitialValue = function() {
            _this.initStatus = false;
            _this.initialValueUpdate();
            _this.initialUpdate();
            _this.setInitialValue = null;
            _this.initStatus = true;
          };
        }
        this.updateTempValue();
      } else {
        this.initialUpdate();
      }
      this.initStatus = true;
      this.checkAutoFocus();
      if (!isNullOrUndefined(this.text)) {
        this.element.setAttribute("data-initial-value", this.text);
      }
    };
    MultiSelect2.prototype.checkAutoFocus = function() {
      if (this.element.hasAttribute("autofocus")) {
        this.inputElement.focus();
      }
    };
    MultiSelect2.prototype.setFloatLabelType = function() {
      removeFloating(this.overAllWrapper, this.componentWrapper, this.searchWrapper, this.inputElement, this.value, this.floatLabelType, this.placeholder);
      if (this.floatLabelType !== "Never") {
        createFloatLabel(this.overAllWrapper, this.searchWrapper, this.element, this.inputElement, this.value, this.floatLabelType, this.placeholder);
      }
    };
    MultiSelect2.prototype.addValidInputClass = function() {
      if (!isNullOrUndefined(this.overAllWrapper)) {
        if (!isNullOrUndefined(this.value) && this.value.length || this.floatLabelType === "Always") {
          addClass([this.overAllWrapper], "e-valid-input");
        } else {
          removeClass([this.overAllWrapper], "e-valid-input");
        }
      }
    };
    MultiSelect2.prototype.dropDownIcon = function() {
      if (this.showDropDownIcon) {
        this.dropIcon = this.createElement("span", { className: dropdownIcon });
        this.componentWrapper.appendChild(this.dropIcon);
        addClass([this.componentWrapper], ["e-down-icon"]);
      } else {
        if (!isNullOrUndefined(this.dropIcon)) {
          this.dropIcon.parentElement.removeChild(this.dropIcon);
          removeClass([this.componentWrapper], ["e-down-icon"]);
        }
      }
    };
    MultiSelect2.prototype.initialUpdate = function() {
      if (this.mode !== "Box" && !(this.setDynValue && this.mode === "Default" && this.inputFocus)) {
        this.updateDelimView();
      }
      this.updateCssClass();
      this.updateHTMLAttribute();
      this.updateReadonly(this.readonly);
      this.refreshInputHight();
      this.checkPlaceholderSize();
    };
    MultiSelect2.prototype.destroy = function() {
      if (this.isReact) {
        this.clearTemplate();
      }
      if (this.popupObj) {
        this.popupObj.hide();
      }
      this.notify(destroy, {});
      this.unwireListEvents();
      this.unWireEvent();
      this.list = null;
      this.popupObj = null;
      this.mainList = null;
      this.mainData = null;
      this.filterParent = null;
      this.ulElement = null;
      this.mainListCollection = null;
      _super.prototype.destroy.call(this);
      var temp = ["readonly", "aria-disabled", "placeholder"];
      var length = temp.length;
      if (!isNullOrUndefined(this.inputElement)) {
        while (length > 0) {
          this.inputElement.removeAttribute(temp[length - 1]);
          length--;
        }
      }
      if (!isNullOrUndefined(this.element)) {
        this.element.removeAttribute("data-initial-value");
        this.element.style.display = "block";
      }
      if (this.overAllWrapper && this.overAllWrapper.parentElement) {
        if (this.overAllWrapper.parentElement.tagName === this.getNgDirective()) {
          remove(this.overAllWrapper);
        } else {
          this.overAllWrapper.parentElement.insertBefore(this.element, this.overAllWrapper);
          remove(this.overAllWrapper);
        }
      }
      this.componentWrapper = null;
      this.overAllClear = null;
      this.overAllWrapper = null;
      this.hiddenElement = null;
      this.searchWrapper = null;
      this.viewWrapper = null;
      this.chipCollectionWrapper = null;
      this.targetInputElement = null;
      this.popupWrapper = null;
      this.inputElement = null;
      this.delimiterWrapper = null;
      this.popupObj = null;
      this.popupWrapper = null;
      this.liCollections = null;
      this.header = null;
      this.mainList = null;
      this.mainListCollection = null;
      this.footer = null;
      this.selectAllEventEle = null;
    };
    __decorate$g([
      Complex({ text: null, value: null, iconCss: null, groupBy: null }, FieldSettings)
    ], MultiSelect2.prototype, "fields", void 0);
    __decorate$g([
      Property(false)
    ], MultiSelect2.prototype, "enablePersistence", void 0);
    __decorate$g([
      Property(null)
    ], MultiSelect2.prototype, "groupTemplate", void 0);
    __decorate$g([
      Property("No records found")
    ], MultiSelect2.prototype, "noRecordsTemplate", void 0);
    __decorate$g([
      Property("Request failed")
    ], MultiSelect2.prototype, "actionFailureTemplate", void 0);
    __decorate$g([
      Property("None")
    ], MultiSelect2.prototype, "sortOrder", void 0);
    __decorate$g([
      Property(true)
    ], MultiSelect2.prototype, "enabled", void 0);
    __decorate$g([
      Property(false)
    ], MultiSelect2.prototype, "enableHtmlSanitizer", void 0);
    __decorate$g([
      Property([])
    ], MultiSelect2.prototype, "dataSource", void 0);
    __decorate$g([
      Property(null)
    ], MultiSelect2.prototype, "query", void 0);
    __decorate$g([
      Property("StartsWith")
    ], MultiSelect2.prototype, "filterType", void 0);
    __decorate$g([
      Property(1e3)
    ], MultiSelect2.prototype, "zIndex", void 0);
    __decorate$g([
      Property(false)
    ], MultiSelect2.prototype, "ignoreAccent", void 0);
    __decorate$g([
      Property()
    ], MultiSelect2.prototype, "locale", void 0);
    __decorate$g([
      Property(false)
    ], MultiSelect2.prototype, "enableGroupCheckBox", void 0);
    __decorate$g([
      Property(null)
    ], MultiSelect2.prototype, "cssClass", void 0);
    __decorate$g([
      Property("100%")
    ], MultiSelect2.prototype, "width", void 0);
    __decorate$g([
      Property("300px")
    ], MultiSelect2.prototype, "popupHeight", void 0);
    __decorate$g([
      Property("100%")
    ], MultiSelect2.prototype, "popupWidth", void 0);
    __decorate$g([
      Property(null)
    ], MultiSelect2.prototype, "placeholder", void 0);
    __decorate$g([
      Property(null)
    ], MultiSelect2.prototype, "filterBarPlaceholder", void 0);
    __decorate$g([
      Property({})
    ], MultiSelect2.prototype, "htmlAttributes", void 0);
    __decorate$g([
      Property(null)
    ], MultiSelect2.prototype, "valueTemplate", void 0);
    __decorate$g([
      Property(null)
    ], MultiSelect2.prototype, "headerTemplate", void 0);
    __decorate$g([
      Property(null)
    ], MultiSelect2.prototype, "footerTemplate", void 0);
    __decorate$g([
      Property(null)
    ], MultiSelect2.prototype, "itemTemplate", void 0);
    __decorate$g([
      Property(null)
    ], MultiSelect2.prototype, "allowFiltering", void 0);
    __decorate$g([
      Property(true)
    ], MultiSelect2.prototype, "changeOnBlur", void 0);
    __decorate$g([
      Property(false)
    ], MultiSelect2.prototype, "allowCustomValue", void 0);
    __decorate$g([
      Property(true)
    ], MultiSelect2.prototype, "showClearButton", void 0);
    __decorate$g([
      Property(1e3)
    ], MultiSelect2.prototype, "maximumSelectionLength", void 0);
    __decorate$g([
      Property(false)
    ], MultiSelect2.prototype, "readonly", void 0);
    __decorate$g([
      Property(null)
    ], MultiSelect2.prototype, "text", void 0);
    __decorate$g([
      Property(null)
    ], MultiSelect2.prototype, "value", void 0);
    __decorate$g([
      Property(true)
    ], MultiSelect2.prototype, "hideSelectedItem", void 0);
    __decorate$g([
      Property(true)
    ], MultiSelect2.prototype, "closePopupOnSelect", void 0);
    __decorate$g([
      Property("Default")
    ], MultiSelect2.prototype, "mode", void 0);
    __decorate$g([
      Property(",")
    ], MultiSelect2.prototype, "delimiterChar", void 0);
    __decorate$g([
      Property(true)
    ], MultiSelect2.prototype, "ignoreCase", void 0);
    __decorate$g([
      Property(false)
    ], MultiSelect2.prototype, "showDropDownIcon", void 0);
    __decorate$g([
      Property("Never")
    ], MultiSelect2.prototype, "floatLabelType", void 0);
    __decorate$g([
      Property(false)
    ], MultiSelect2.prototype, "showSelectAll", void 0);
    __decorate$g([
      Property("Select All")
    ], MultiSelect2.prototype, "selectAllText", void 0);
    __decorate$g([
      Property("Unselect All")
    ], MultiSelect2.prototype, "unSelectAllText", void 0);
    __decorate$g([
      Property(true)
    ], MultiSelect2.prototype, "enableSelectionOrder", void 0);
    __decorate$g([
      Property(true)
    ], MultiSelect2.prototype, "openOnClick", void 0);
    __decorate$g([
      Property(false)
    ], MultiSelect2.prototype, "addTagOnBlur", void 0);
    __decorate$g([
      Event$1()
    ], MultiSelect2.prototype, "change", void 0);
    __decorate$g([
      Event$1()
    ], MultiSelect2.prototype, "removing", void 0);
    __decorate$g([
      Event$1()
    ], MultiSelect2.prototype, "removed", void 0);
    __decorate$g([
      Event$1()
    ], MultiSelect2.prototype, "beforeSelectAll", void 0);
    __decorate$g([
      Event$1()
    ], MultiSelect2.prototype, "selectedAll", void 0);
    __decorate$g([
      Event$1()
    ], MultiSelect2.prototype, "beforeOpen", void 0);
    __decorate$g([
      Event$1()
    ], MultiSelect2.prototype, "open", void 0);
    __decorate$g([
      Event$1()
    ], MultiSelect2.prototype, "close", void 0);
    __decorate$g([
      Event$1()
    ], MultiSelect2.prototype, "blur", void 0);
    __decorate$g([
      Event$1()
    ], MultiSelect2.prototype, "focus", void 0);
    __decorate$g([
      Event$1()
    ], MultiSelect2.prototype, "chipSelection", void 0);
    __decorate$g([
      Event$1()
    ], MultiSelect2.prototype, "filtering", void 0);
    __decorate$g([
      Event$1()
    ], MultiSelect2.prototype, "tagging", void 0);
    __decorate$g([
      Event$1()
    ], MultiSelect2.prototype, "customValueSelection", void 0);
    MultiSelect2 = __decorate$g([
      NotifyPropertyChanges
    ], MultiSelect2);
    return MultiSelect2;
  }(DropDownBase)
);
var ICON$2 = "e-icons";
var CHECKBOXFRAME = "e-frame";
var CHECK = "e-check";
var CHECKBOXWRAP = "e-checkbox-wrapper";
var INDETERMINATE = "e-stop";
var checkAllParent = "e-selectall-parent";
var searchBackIcon = "e-input-group-icon e-back-icon e-icons";
var filterBarClearIcon = "e-input-group-icon e-clear-icon e-icons";
var filterInput = "e-input-filter";
var filterParent = "e-filter-parent";
var mobileFilter = "e-ddl-device-filter";
var clearIcon = "e-clear-icon";
var popupFullScreen = "e-popup-full-page";
var device = "e-ddl-device";
var FOCUS$1 = "e-input-focus";
var CheckBoxSelection = (
  /** @class */
  function() {
    function CheckBoxSelection2(parent) {
      this.activeLi = [];
      this.activeEle = [];
      this.parent = parent;
      this.removeEventListener();
      this.addEventListener();
    }
    CheckBoxSelection2.prototype.getModuleName = function() {
      return "CheckBoxSelection";
    };
    CheckBoxSelection2.prototype.addEventListener = function() {
      if (this.parent.isDestroyed) {
        return;
      }
      this.parent.on("updatelist", this.listSelection, this);
      this.parent.on("listoption", this.listOption, this);
      this.parent.on("selectAll", this.setSelectAll, this);
      this.parent.on("checkSelectAll", this.checkSelectAll, this);
      this.parent.on("searchBox", this.setSearchBox, this);
      this.parent.on("blur", this.onBlurHandler, this);
      this.parent.on("targetElement", this.targetElement, this);
      this.parent.on("deviceSearchBox", this.setDeviceSearchBox, this);
      this.parent.on("inputFocus", this.getFocus, this);
      this.parent.on("reOrder", this.setReorder, this);
      this.parent.on("activeList", this.getActiveList, this);
      this.parent.on("selectAllText", this.setLocale, this);
      this.parent.on("filterBarPlaceholder", this.setPlaceholder, this);
      EventHandler.add(document, "mousedown", this.onDocumentClick, this);
      this.parent.on("addItem", this.checboxCreate, this);
      this.parent.on("popupFullScreen", this.setPopupFullScreen, this);
    };
    CheckBoxSelection2.prototype.removeEventListener = function() {
      if (this.parent.isDestroyed) {
        return;
      }
      this.parent.off("updatelist", this.listSelection);
      this.parent.off("listoption", this.listOption);
      this.parent.off("selectAll", this.setSelectAll);
      this.parent.off("checkSelectAll", this.checkSelectAll);
      this.parent.off("searchBox", this.setSearchBox);
      this.parent.off("blur", this.onBlurHandler);
      this.parent.off("targetElement", this.targetElement);
      this.parent.off("deviceSearchBox", this.setDeviceSearchBox);
      this.parent.off("inputFocus", this.getFocus);
      this.parent.off("reOrder", this.setReorder);
      this.parent.off("activeList", this.getActiveList);
      this.parent.off("selectAllText", this.setLocale);
      this.parent.off("filterBarPlaceholder", this.setPlaceholder);
      this.parent.off("addItem", this.checboxCreate);
      this.parent.off("popupFullScreen", this.setPopupFullScreen);
    };
    CheckBoxSelection2.prototype.listOption = function(args) {
      var _this = this;
      if (isNullOrUndefined(this.parent.listCurrentOptions.itemCreated)) {
        this.parent.listCurrentOptions.itemCreated = function(e) {
          _this.checboxCreate(e);
        };
      } else {
        var itemCreated_1 = this.parent.listCurrentOptions.itemCreated;
        this.parent.listCurrentOptions.itemCreated = function(e) {
          _this.checboxCreate(e);
          itemCreated_1.apply(_this, [e]);
        };
      }
    };
    CheckBoxSelection2.prototype.setPlaceholder = function(props2) {
      Input.setPlaceholder(props2.filterBarPlaceholder, this.filterInput);
    };
    CheckBoxSelection2.prototype.checboxCreate = function(e) {
      var item;
      if (!isNullOrUndefined(e.item)) {
        item = e.item;
      } else {
        item = e;
      }
      if (this.parent.enableGroupCheckBox || item.className !== "e-list-group-item " && item.className !== "e-list-group-item") {
        var checkboxEle = createCheckBox(this.parent.createElement, true);
        var icon = select$1("div." + ICON$2, item);
        item.insertBefore(checkboxEle, item.childNodes[isNullOrUndefined(icon) ? 0 : 1]);
        select$1("." + CHECKBOXFRAME, checkboxEle);
        if (this.parent.enableGroupCheckBox) {
          this.parent.popupWrapper.classList.add("e-multiselect-group");
        }
        return item;
      } else {
        return item;
      }
    };
    CheckBoxSelection2.prototype.setSelectAll = function() {
      if (this.parent.showSelectAll) {
        if (isNullOrUndefined(this.checkAllParent)) {
          this.checkAllParent = this.parent.createElement("div", {
            className: checkAllParent
          });
          this.selectAllSpan = this.parent.createElement("span", {
            className: "e-all-text"
          });
          this.selectAllSpan.textContent = "";
          this.checkAllParent.appendChild(this.selectAllSpan);
          this.setLocale();
          this.checboxCreate(this.checkAllParent);
          if (this.parent.headerTemplate) {
            if (!isNullOrUndefined(this.parent.filterParent)) {
              append2([this.checkAllParent], this.parent.filterParent);
            } else {
              append2([this.checkAllParent], this.parent.popupWrapper);
            }
          }
          if (!this.parent.headerTemplate) {
            if (!isNullOrUndefined(this.parent.filterParent)) {
              this.parent.filterParent.parentNode.insertBefore(this.checkAllParent, this.parent.filterParent.nextSibling);
            } else {
              prepend([this.checkAllParent], this.parent.popupWrapper);
            }
          }
          EventHandler.add(this.checkAllParent, "mousedown", this.clickHandler, this);
        }
        if (this.parent.list.classList.contains("e-nodata") || this.parent.listData && this.parent.listData.length <= 1 && !this.parent.isDynamicDataChange || this.parent.isDynamicDataChange && this.parent.listData && this.parent.listData.length <= 1) {
          this.checkAllParent.style.display = "none";
        } else {
          this.checkAllParent.style.display = "block";
        }
        this.parent.selectAllHeight = this.checkAllParent.getBoundingClientRect().height;
      } else if (!isNullOrUndefined(this.checkAllParent)) {
        this.checkAllParent.parentElement.removeChild(this.checkAllParent);
        this.checkAllParent = null;
      }
    };
    CheckBoxSelection2.prototype.destroy = function() {
      this.removeEventListener();
      EventHandler.remove(document, "mousedown", this.onDocumentClick);
      this.checkAllParent = null;
      this.clearIconElement = null;
      this.filterInput = null;
      this.filterInputObj = null;
      this.checkWrapper = null;
      this.selectAllSpan = null;
    };
    CheckBoxSelection2.prototype.listSelection = function(args) {
      var target;
      if (!isNullOrUndefined(args.e)) {
        args.li.querySelector(".e-checkbox-wrapper .e-frame");
        target = !isNullOrUndefined(args.e.target) ? args.e.target.classList.contains("e-frame") && (!this.parent.showSelectAll || this.checkAllParent && !this.checkAllParent.contains(args.e.target)) ? args.e.target : args.li.querySelector(".e-checkbox-wrapper").childNodes[1] : args.li.querySelector(".e-checkbox-wrapper").childNodes[1];
      } else {
        var checkboxWrapper = args.li.querySelector(".e-checkbox-wrapper");
        target = checkboxWrapper ? checkboxWrapper.childNodes[1] : args.li.lastElementChild.childNodes[1];
      }
      if (this.parent.itemTemplate || this.parent.enableGroupCheckBox) {
        target = args.li.firstElementChild.childNodes[1];
      }
      if (!isNullOrUndefined(target)) {
        this.checkWrapper = closest(target, "." + CHECKBOXWRAP);
      }
      if (!isNullOrUndefined(this.checkWrapper)) {
        var checkElement = select$1("." + CHECKBOXFRAME, this.checkWrapper);
        var selectAll2 = false;
        this.validateCheckNode(this.checkWrapper, checkElement.classList.contains(CHECK), args.li, args.e, selectAll2);
      }
    };
    CheckBoxSelection2.prototype.validateCheckNode = function(checkWrap, isCheck, li, e, selectAll2) {
      this.changeState(checkWrap, isCheck ? "uncheck" : "check", e, true, selectAll2);
    };
    CheckBoxSelection2.prototype.clickHandler = function(e) {
      var target;
      if (e.currentTarget.classList.contains(this.checkAllParent.className)) {
        target = e.currentTarget.firstElementChild.lastElementChild;
      } else {
        target = e.currentTarget;
      }
      this.checkWrapper = closest(target, "." + CHECKBOXWRAP);
      var selectAll2 = true;
      if (!isNullOrUndefined(this.checkWrapper)) {
        var checkElement = select$1("." + CHECKBOXFRAME, this.checkWrapper);
        this.validateCheckNode(this.checkWrapper, checkElement.classList.contains(CHECK), null, e, selectAll2);
      }
      e.preventDefault();
    };
    CheckBoxSelection2.prototype.changeState = function(wrapper, state, e, isPrevent, selectAll2) {
      var frameSpan = wrapper.getElementsByClassName(CHECKBOXFRAME)[0];
      if (state === "check" && !frameSpan.classList.contains(CHECK)) {
        frameSpan.classList.remove(INDETERMINATE);
        frameSpan.classList.add(CHECK);
        if (selectAll2) {
          this.parent.selectAllItems(true, e);
          this.setLocale(true);
        }
      } else if (state === "uncheck" && (frameSpan.classList.contains(CHECK) || frameSpan.classList.contains(INDETERMINATE))) {
        removeClass([frameSpan], [CHECK, INDETERMINATE]);
        if (selectAll2) {
          this.parent.selectAllItems(false, e);
          this.setLocale();
        }
      } else if (state === "indeterminate" && !frameSpan.classList.contains(INDETERMINATE)) {
        removeClass([frameSpan], [CHECK]);
        frameSpan.classList.add(INDETERMINATE);
        if (selectAll2) {
          this.parent.selectAllItems(false, e);
          this.setLocale();
        }
      }
    };
    CheckBoxSelection2.prototype.setSearchBox = function(args) {
      if (isNullOrUndefined(this.parent.filterParent)) {
        this.parent.filterParent = this.parent.createElement("span", {
          className: filterParent
        });
        this.filterInput = this.parent.createElement("input", {
          attrs: { type: "text" },
          className: filterInput
        });
        this.parent.element.parentNode.insertBefore(this.filterInput, this.parent.element);
        var backIcon = false;
        if (Browser.isDevice) {
          backIcon = true;
          this.parent.mobFilter = false;
        }
        this.filterInputObj = Input.createInput({
          element: this.filterInput,
          buttons: backIcon ? [searchBackIcon, filterBarClearIcon] : [filterBarClearIcon],
          properties: { placeholder: this.parent.filterBarPlaceholder }
        }, this.parent.createElement);
        if (!isNullOrUndefined(this.parent.cssClass)) {
          if (this.parent.cssClass.split(" ").indexOf("e-outline") !== -1) {
            addClass([this.filterInputObj.container], "e-outline");
          } else if (this.parent.cssClass.split(" ").indexOf("e-filled") !== -1) {
            addClass([this.filterInputObj.container], "e-filled");
          }
        }
        append2([this.filterInputObj.container], this.parent.filterParent);
        prepend([this.parent.filterParent], args.popupElement);
        attributes(this.filterInput, {
          "aria-disabled": "false",
          "role": "combobox",
          "autocomplete": "off",
          "autocapitalize": "off",
          "spellcheck": "false"
        });
        this.clearIconElement = this.filterInput.parentElement.querySelector("." + clearIcon);
        if (!Browser.isDevice && this.clearIconElement) {
          EventHandler.add(this.clearIconElement, "mousedown", this.clearText, this);
          this.clearIconElement.style.visibility = "hidden";
        }
        EventHandler.add(this.filterInput, "input", this.parent.onInput, this.parent);
        EventHandler.add(this.filterInput, "keyup", this.parent.keyUp, this.parent);
        EventHandler.add(this.filterInput, "keydown", this.parent.onKeyDown, this.parent);
        EventHandler.add(this.filterInput, "blur", this.onBlurHandler, this);
        EventHandler.add(this.filterInput, "paste", this.parent.pasteHandler, this.parent);
        this.parent.searchBoxHeight = this.filterInputObj.container.parentElement.getBoundingClientRect().height;
        return this.filterInputObj;
      }
    };
    CheckBoxSelection2.prototype.clickOnBackIcon = function(e) {
      this.parent.hidePopup();
      removeClass([document.body, this.parent.popupObj.element], popupFullScreen);
      this.parent.inputElement.focus();
    };
    CheckBoxSelection2.prototype.clearText = function(e) {
      this.parent.targetInputElement.value = "";
      if (this.parent.allowFiltering && this.parent.targetInputElement.value === "") {
        this.parent.search(null);
      }
      this.parent.refreshPopup();
      this.parent.refreshListItems(null);
      this.clearIconElement.style.visibility = "hidden";
      this.filterInput.focus();
      this.setReorder(e);
      e.preventDefault();
    };
    CheckBoxSelection2.prototype.setDeviceSearchBox = function() {
      this.parent.popupObj.element.classList.add(device);
      this.parent.popupObj.element.classList.add(mobileFilter);
      this.parent.popupObj.position = { X: 0, Y: 0 };
      this.parent.popupObj.dataBind();
      this.setSearchBoxPosition();
      this.backIconElement = this.filterInputObj.container.querySelector(".e-back-icon");
      this.clearIconElement = this.filterInputObj.container.querySelector("." + clearIcon);
      this.clearIconElement.style.visibility = "hidden";
      EventHandler.add(this.backIconElement, "click", this.clickOnBackIcon, this);
      EventHandler.add(this.clearIconElement, "click", this.clearText, this);
    };
    CheckBoxSelection2.prototype.setSearchBoxPosition = function() {
      var searchBoxHeight = this.filterInput.parentElement.getBoundingClientRect().height;
      var selectAllHeight = 0;
      if (this.checkAllParent) {
        selectAllHeight = this.checkAllParent.getBoundingClientRect().height;
      }
      this.parent.popupObj.element.style.maxHeight = "100%";
      this.parent.popupObj.element.style.width = "100%";
      this.parent.list.style.maxHeight = window.innerHeight - searchBoxHeight - selectAllHeight + "px";
      this.parent.list.style.height = window.innerHeight - searchBoxHeight - selectAllHeight + "px";
      var clearElement = this.filterInput.parentElement.querySelector("." + clearIcon);
      detach(this.filterInput);
      clearElement.parentElement.insertBefore(this.filterInput, clearElement);
    };
    CheckBoxSelection2.prototype.setPopupFullScreen = function() {
      attributes(this.parent.popupObj.element, { style: "left:0px;right:0px;top:0px;bottom:0px;" });
      addClass([document.body, this.parent.popupObj.element], popupFullScreen);
      this.parent.popupObj.element.style.maxHeight = "100%";
      this.parent.popupObj.element.style.width = "100%";
    };
    CheckBoxSelection2.prototype.targetElement = function() {
      if (!isNullOrUndefined(this.clearIconElement)) {
        this.parent.targetInputElement = this.filterInput;
        this.clearIconElement.style.visibility = this.parent.targetInputElement.value === "" ? "hidden" : "visible";
      }
      return this.parent.targetInputElement.value;
    };
    CheckBoxSelection2.prototype.onBlurHandler = function(e) {
      if (!this.parent.element.classList.contains("e-listbox")) {
        var target = void 0;
        if (this.parent.keyAction) {
          return;
        }
        if (Browser.isIE) {
          target = !isNullOrUndefined(e) && e.target;
        }
        if (!Browser.isIE) {
          target = !isNullOrUndefined(e) && e.relatedTarget;
        }
        if (this.parent.popupObj && document.body.contains(this.parent.popupObj.element) && this.parent.popupObj.element.contains(target) && !Browser.isIE && this.filterInput) {
          this.filterInput.focus();
          return;
        }
        if (this.parent.scrollFocusStatus && this.filterInput) {
          e.preventDefault();
          this.filterInput.focus();
          this.parent.scrollFocusStatus = false;
          return;
        }
        if (this.parent.popupObj && document.body.contains(this.parent.popupObj.element) && !this.parent.popupObj.element.classList.contains("e-popup-close")) {
          this.parent.inputFocus = false;
          this.parent.updateValueState(e, this.parent.value, this.parent.tempValues);
          this.parent.dispatchEvent(this.parent.hiddenElement, "change");
        }
        if (this.parent.popupObj && document.body.contains(this.parent.popupObj.element) && !this.parent.popupObj.element.classList.contains("e-popup-close")) {
          this.parent.inputFocus = false;
          this.parent.overAllWrapper.classList.remove(FOCUS$1);
          this.parent.trigger("blur");
          this.parent.focused = true;
        }
        if (this.parent.popupObj && document.body.contains(this.parent.popupObj.element) && !this.parent.popupObj.element.classList.contains("e-popup-close") && !Browser.isDevice) {
          this.parent.hidePopup();
        }
      }
    };
    CheckBoxSelection2.prototype.onDocumentClick = function(e) {
      if (this.parent.getLocaleName() !== "listbox") {
        var target = e.target;
        if (!isNullOrUndefined(this.parent.popupObj) && closest(target, '[id="' + this.parent.popupObj.element.id + '"]')) {
          if (!(this.filterInput && this.filterInput.value !== "")) {
            e.preventDefault();
          }
        }
        if (!(!isNullOrUndefined(this.parent.popupObj) && closest(target, '[id="' + this.parent.popupObj.element.id + '"]')) && !isNullOrUndefined(this.parent.overAllWrapper) && !this.parent.overAllWrapper.contains(e.target)) {
          if (this.parent.overAllWrapper.classList.contains(dropDownBaseClasses.focus) || this.parent.isPopupOpen()) {
            this.parent.inputFocus = false;
            this.parent.scrollFocusStatus = false;
            this.parent.hidePopup();
            this.parent.onBlurHandler(e, true);
            this.parent.focused = true;
          }
        } else {
          this.parent.scrollFocusStatus = (Browser.isIE || Browser.info.name === "edge") && document.activeElement === this.filterInput;
        }
        if (!isNullOrUndefined(this.parent.overAllWrapper) && !this.parent.overAllWrapper.contains(e.target) && this.parent.overAllWrapper.classList.contains("e-input-focus") && !this.parent.isPopupOpen()) {
          if (Browser.isIE) {
            this.parent.onBlurHandler();
          } else {
            this.parent.onBlurHandler(e);
          }
        }
        if (this.filterInput === target) {
          this.filterInput.focus();
        }
      }
    };
    CheckBoxSelection2.prototype.getFocus = function(e) {
      this.parent.overAllWrapper.classList.remove(FOCUS$1);
      if (this.parent.keyAction && e.value !== "clear" && e.value !== "focus") {
        this.parent.keyAction = false;
        return;
      }
      if (e.value === "focus") {
        this.filterInput.focus();
        this.parent.removeFocus();
        EventHandler.remove(this.parent.list, "keydown", this.parent.onKeyDown);
      }
      if (e.value === "clear") {
        this.filterInput.value = "";
        this.clearIconElement.style.visibility = "hidden";
      }
    };
    CheckBoxSelection2.prototype.checkSelectAll = function(e) {
      if (e.value === "check") {
        this.changeState(this.checkAllParent, e.value, null, null, false);
        this.setLocale(true);
      }
      if (e.value === "uncheck") {
        this.changeState(this.checkAllParent, e.value, null, null, false);
        this.setLocale();
      }
      if (e.value === "indeterminate") {
        this.changeState(this.checkAllParent, e.value, null, null, false);
        this.setLocale();
      }
    };
    CheckBoxSelection2.prototype.setLocale = function(unSelect) {
      if (this.parent.selectAllText !== "Select All" || this.parent.unSelectAllText !== "Unselect All") {
        var template = unSelect ? this.parent.unSelectAllText : this.parent.selectAllText;
        this.selectAllSpan.textContent = "";
        var compiledString = compile$1(template);
        var templateName = unSelect ? "unSelectAllText" : "selectAllText";
        for (var _i = 0, _a = compiledString({}, this.parent, templateName, null, !this.parent.isStringTemplate); _i < _a.length; _i++) {
          var item = _a[_i];
          this.selectAllSpan.textContent = item.textContent;
        }
      } else {
        var l10nLocale = { selectAllText: "Select All", unSelectAllText: "Unselect All" };
        var l10n = new L10n(this.parent.getLocaleName(), {}, this.parent.locale);
        if (l10n.getConstant("selectAllText") === "") {
          l10n = new L10n("dropdowns", l10nLocale, this.parent.locale);
        }
        this.selectAllSpan.textContent = unSelect ? l10n.getConstant("unSelectAllText") : l10n.getConstant("selectAllText");
      }
    };
    CheckBoxSelection2.prototype.getActiveList = function(args) {
      if (args.li.classList.contains("e-active")) {
        this.activeLi.push(args.li.cloneNode(true));
      } else {
        this.activeLi.splice(args.index, 1);
      }
    };
    CheckBoxSelection2.prototype.setReorder = function(args) {
      if (this.parent.enableSelectionOrder && !isNullOrUndefined(this.parent.value)) {
        var activeLiCount = this.parent.ulElement.querySelectorAll("li.e-active").length;
        var remLi = void 0;
        var ulEle_1 = this.parent.createElement("ul", {
          className: "e-list-parent e-ul e-reorder"
        });
        if (activeLiCount > 0) {
          var activeListItems = this.parent.ulElement.querySelectorAll("li.e-active");
          activeListItems.forEach(function(item) {
            ulEle_1.appendChild(item);
          });
          remLi = this.parent.ulElement.querySelectorAll("li.e-active");
          addClass(remLi, "e-reorder-hide");
          prepend([ulEle_1], this.parent.list);
        }
        this.parent.focusAtFirstListItem();
      }
    };
    return CheckBoxSelection2;
  }()
);
var KanbanDialog = (
  /** @class */
  function() {
    function KanbanDialog2(parent) {
      this.preventUpdate = false;
      this.parent = parent;
    }
    KanbanDialog2.prototype.openDialog = function(action, data) {
      this.action = action;
      this.parent.activeCardData.data = data;
      this.renderDialog(data, action);
      this.dialogObj.show();
    };
    KanbanDialog2.prototype.closeDialog = function() {
      this.dialogObj.hide();
    };
    KanbanDialog2.prototype.renderDialog = function(args, action) {
      this.element = createElement("div", { id: this.parent.element.id + "_dialog_wrapper" });
      this.parent.element.appendChild(this.element);
      var dialogModel = {
        buttons: this.getDialogButtons(action),
        content: this.getDialogContent(args, action),
        cssClass: DIALOG_CLASS,
        enableRtl: this.parent.enableRtl,
        header: this.parent.localeObj.getConstant(action === "Add" ? "addTitle" : action === "Edit" ? "editTitle" : "deleteTitle"),
        height: "auto",
        isModal: true,
        showCloseIcon: true,
        width: action === "Delete" ? 400 : 350,
        visible: false,
        beforeOpen: this.onBeforeDialogOpen.bind(this),
        beforeClose: this.onBeforeDialogClose.bind(this)
      };
      this.dialogObj = new Dialog(extend(dialogModel, action !== "Delete" ? this.parent.dialogSettings.model || {} : {}), this.element);
      if (action !== "Delete") {
        this.applyFormValidation();
      }
      this.dialogObj.element.querySelector(".e-dlg-closeicon-btn").title = this.parent.localeObj.getConstant("close");
    };
    KanbanDialog2.prototype.getDialogContent = function(args, action) {
      if (action === "Delete") {
        return this.parent.localeObj.getConstant("deleteContent");
      } else {
        var container = createElement("div", { className: FORM_WRAPPER_CLASS });
        var form = createElement("form", {
          id: this.parent.element.id + "EditForm",
          className: FORM_CLASS$1,
          attrs: { onsubmit: "return false;" }
        });
        if (this.parent.dialogSettings.template) {
          if (args) {
            this.destroyComponents();
            [].slice.call(form.childNodes).forEach(function(node) {
              return remove(node);
            });
          }
          var templateId = this.parent.element.id + "_dialogTemplate";
          var dialogTemplate = this.parent.templateParser(this.parent.dialogSettings.template)(args, this.parent, "dialogTemplate", templateId, false);
          append2(dialogTemplate, form);
          this.parent.renderTemplates();
        } else {
          var dialogWrapper = createElement("div", { className: DIALOG_CONTENT_CONTAINER });
          form.appendChild(dialogWrapper);
          var table = createElement("table");
          dialogWrapper.appendChild(table);
          var dialogFields = this.getDialogFields();
          for (var _i = 0, dialogFields_1 = dialogFields; _i < dialogFields_1.length; _i++) {
            var field = dialogFields_1[_i];
            var tr = createElement("tr");
            table.appendChild(tr);
            tr.appendChild(createElement("td", { className: "e-label", innerHTML: field.text ? field.text : field.key }));
            var td = createElement("td");
            tr.appendChild(td);
            td.appendChild(this.renderComponents(field));
          }
        }
        container.appendChild(form);
        return container;
      }
    };
    KanbanDialog2.prototype.getDialogFields = function() {
      var fields = this.parent.dialogSettings.fields;
      if (fields.length === 0) {
        fields = [
          { text: "ID", key: this.parent.cardSettings.headerField, type: "TextBox" },
          { key: this.parent.keyField, type: "DropDown" },
          { key: this.parent.cardSettings.contentField, type: "TextArea" }
        ];
        if (this.parent.sortSettings.field) {
          fields.splice(fields.length - 1, 0, { key: this.parent.sortSettings.field, type: "TextBox" });
        }
        if (this.parent.swimlaneSettings.keyField) {
          fields.splice(fields.length - 1, 0, { key: this.parent.swimlaneSettings.keyField, type: "DropDown" });
        }
      }
      return fields;
    };
    KanbanDialog2.prototype.getDialogButtons = function(action) {
      var primaryButtonClass = action === "Delete" ? "e-dialog-yes" : action === "Add" ? "e-dialog-add" : "e-dialog-edit";
      var flatButtonClass = action === "Delete" ? "e-dialog-no" : "e-dialog-cancel";
      var dialogButtons = [
        {
          buttonModel: {
            cssClass: "e-flat " + primaryButtonClass,
            isPrimary: true,
            content: this.parent.localeObj.getConstant(action === "Add" || action === "Edit" ? "save" : "yes")
          },
          click: this.dialogButtonClick.bind(this)
        },
        {
          buttonModel: {
            cssClass: "e-flat " + flatButtonClass,
            isPrimary: false,
            content: this.parent.localeObj.getConstant(action === "Add" || action === "Edit" ? "cancel" : "no")
          },
          click: this.dialogButtonClick.bind(this)
        }
      ];
      if (action === "Edit") {
        var deleteButton = {
          buttonModel: { cssClass: "e-flat e-dialog-delete", isPrimary: false, content: this.parent.localeObj.getConstant("delete") },
          click: this.dialogButtonClick.bind(this)
        };
        dialogButtons.splice(0, 0, deleteButton);
      }
      return dialogButtons;
    };
    KanbanDialog2.prototype.renderComponents = function(field) {
      var wrapper = createElement("div", { className: field.key + "_wrapper" });
      var element2 = createElement("input", { className: FIELD_CLASS, attrs: { "name": field.key } });
      wrapper.appendChild(element2);
      var divElement;
      var dropDownOptions;
      var controlObj;
      var fieldValue = this.parent.activeCardData.data ? this.parent.activeCardData.data[field.key] : null;
      switch (field.type) {
        case "DropDown":
          if (field.key === this.parent.keyField) {
            var currentKeys = this.parent.layoutModule.columnKeys;
            if (this.parent.actionModule.hideColumnKeys.length > 0) {
              currentKeys = [];
              for (var i = 0; i < this.parent.columns.length; i++) {
                if (this.parent.layoutModule.isColumnVisible(this.parent.columns[i])) {
                  var isNumeric = typeof this.parent.columns[i].keyField === "number";
                  if (isNumeric) {
                    currentKeys = currentKeys.concat(this.parent.columns[i].keyField.toString());
                  } else {
                    currentKeys = currentKeys.concat(this.parent.columns[i].keyField.split(",").map(function(e) {
                      return e.trim();
                    }));
                  }
                }
              }
            }
            dropDownOptions = { dataSource: currentKeys, value: fieldValue ? fieldValue.toString() : fieldValue };
          } else if (field.key === this.parent.swimlaneSettings.keyField) {
            dropDownOptions = {
              dataSource: [].slice.call(this.parent.layoutModule.kanbanRows),
              fields: { text: "textField", value: "keyField" },
              value: fieldValue
            };
          }
          controlObj = new DropDownList(dropDownOptions);
          break;
        case "Numeric":
          controlObj = new NumericTextBox({ value: fieldValue });
          break;
        case "TextBox":
          controlObj = new TextBox({ value: fieldValue });
          if (fieldValue && this.parent.cardSettings.headerField === field.key) {
            controlObj.enabled = false;
          }
          break;
        case "TextArea":
          remove(element2);
          divElement = createElement("div");
          element2 = createElement("textarea", {
            className: FIELD_CLASS,
            attrs: { "name": field.key, "rows": "3", "aria-label": this.parent.cardSettings.contentField },
            innerHTML: fieldValue
          });
          wrapper.appendChild(divElement).appendChild(element2);
          break;
      }
      if (controlObj) {
        controlObj.appendTo(element2);
      }
      return wrapper;
    };
    KanbanDialog2.prototype.onBeforeDialogOpen = function(args) {
      var _this = this;
      var eventProp = {
        data: this.parent.activeCardData.data,
        cancel: false,
        element: this.element,
        target: this.parent.activeCardData.element,
        requestType: this.action
      };
      this.storeElement = document.activeElement;
      if (parseInt(args.maxHeight, 10) <= 250) {
        args.maxHeight = "250px";
      }
      this.parent.trigger(dialogOpen, eventProp, function(openArgs) {
        args.cancel = openArgs.cancel;
        if (openArgs.cancel) {
          _this.destroy();
        }
      });
    };
    KanbanDialog2.prototype.onBeforeDialogClose = function(args) {
      var _this = this;
      var formInputs = this.getFormElements();
      var cardObj = {};
      if (args.isInteracted) {
        this.preventUpdate = true;
      }
      if (!this.preventUpdate) {
        for (var _i = 0, formInputs_1 = formInputs; _i < formInputs_1.length; _i++) {
          var input = formInputs_1[_i];
          var columnName = input.name || this.getColumnName(input);
          if (!isNullOrUndefined(columnName) && columnName !== "") {
            var value = this.getValueFromElement(input);
            if (columnName === this.parent.cardSettings.headerField) {
              value = this.getIDType() === "string" ? value : parseInt(value, 10);
            }
            cardObj[columnName] = value;
          }
        }
      }
      this.preventUpdate = false;
      cardObj = extend(this.parent.activeCardData.data, cardObj);
      var eventProp = { data: cardObj, cancel: false, element: this.element, requestType: this.action };
      this.parent.trigger(dialogClose, eventProp, function(closeArgs) {
        args.cancel = closeArgs.cancel;
        if (!closeArgs.cancel) {
          _this.cardData = eventProp.data;
          _this.destroy();
          _this.parent.actionModule.SingleCardSelection(_this.cardData);
        }
      });
    };
    KanbanDialog2.prototype.getIDType = function() {
      if (this.parent.kanbanData.length !== 0) {
        return typeof this.parent.kanbanData[0][this.parent.cardSettings.headerField];
      }
      return "string";
    };
    KanbanDialog2.prototype.applyFormValidation = function() {
      var _this = this;
      var form = this.element.querySelector("." + FORM_CLASS$1);
      var rules = {};
      for (var _i = 0, _a = this.parent.dialogSettings.fields; _i < _a.length; _i++) {
        var field = _a[_i];
        rules[field.key] = field.validationRules && Object.keys(field.validationRules).length > 0 ? field.validationRules : null;
      }
      this.formObj = new FormValidator(form, {
        rules,
        customPlacement: function(inputElement, error) {
          var id = error.getAttribute("for");
          var elem = _this.element.querySelector("#" + id + "_Error");
          if (!elem) {
            _this.createTooltip(inputElement, error, id, "");
          }
        },
        validationComplete: function(args) {
          var elem = _this.element.querySelector("#" + args.inputName + "_Error");
          if (elem) {
            elem.style.display = args.status === "failure" ? "" : "none";
          }
        }
      });
    };
    KanbanDialog2.prototype.createTooltip = function(element2, error, name, display) {
      var dlgContent;
      var client;
      var inputClient = element2.parentElement.getBoundingClientRect();
      if (this.element.classList.contains(DIALOG_CLASS)) {
        dlgContent = this.element;
        client = this.element.getBoundingClientRect();
      } else {
        dlgContent = this.element.querySelector(".e-kanban-dialog .e-dlg-content");
        client = dlgContent.getBoundingClientRect();
      }
      var div = createElement("div", {
        className: "e-tooltip-wrap e-popup " + ERROR_VALIDATION_CLASS$1,
        id: name + "_Error",
        styles: "display:" + display + ";top:" + (inputClient.bottom - client.top + dlgContent.scrollTop + 9) + "px;left:" + (inputClient.left - client.left + dlgContent.scrollLeft + inputClient.width / 2) + "px;"
      });
      var content = createElement("div", { className: "e-tip-content" });
      content.appendChild(error);
      var arrow = createElement("div", { className: "e-arrow-tip e-tip-top" });
      arrow.appendChild(createElement("div", { className: "e-arrow-tip-outer e-tip-top" }));
      arrow.appendChild(createElement("div", { className: "e-arrow-tip-inner e-tip-top" }));
      div.appendChild(content);
      div.appendChild(arrow);
      dlgContent.appendChild(div);
      div.style.left = parseInt(div.style.left, 10) - div.offsetWidth / 2 + "px";
    };
    KanbanDialog2.prototype.destroyToolTip = function() {
      if (this.element) {
        this.element.querySelectorAll("." + ERROR_VALIDATION_CLASS$1).forEach(function(node) {
          return remove(node);
        });
      }
      if (this.formObj && this.formObj.element) {
        this.formObj.reset();
      }
    };
    KanbanDialog2.prototype.dialogButtonClick = function(event) {
      var target = event.target.cloneNode(true);
      var id = this.formObj.element.id;
      if (document.getElementById(id) && this.formObj.validate() && (target.classList.contains("e-dialog-edit") || target.classList.contains("e-dialog-add"))) {
        this.dialogObj.hide();
        if (target.classList.contains("e-dialog-edit")) {
          var activeCard = this.parent.activeCardData;
          var updateIndex = void 0;
          if (activeCard.data[this.parent.keyField] === this.cardData[this.parent.keyField] && activeCard.element) {
            updateIndex = [].slice.call(activeCard.element.parentElement.children).indexOf(activeCard.element);
          }
          if (this.parent.enableHtmlSanitizer) {
            if (typeof this.cardData[this.parent.cardSettings.contentField] === "string") {
              this.cardData[this.parent.cardSettings.contentField] = SanitizeHtmlHelper.sanitize(this.cardData[this.parent.cardSettings.contentField]);
            }
          }
          this.parent.crudModule.updateCard(this.cardData, updateIndex);
        }
        if (target.classList.contains("e-dialog-add")) {
          this.parent.crudModule.addCard(this.cardData);
        }
        this.parent.actionModule.SingleCardSelection(this.cardData);
        this.cardData = null;
      }
      if (!target.classList.contains("e-dialog-edit") && !target.classList.contains("e-dialog-add")) {
        if (target.classList.contains("e-dialog-cancel")) {
          this.preventUpdate = true;
        }
        this.dialogObj.hide();
        if (target.classList.contains("e-dialog-yes")) {
          this.parent.crudModule.deleteCard(this.parent.activeCardData.data);
        } else if (target.classList.contains("e-dialog-no")) {
          this.openDialog("Edit", this.parent.activeCardData.data);
        } else if (target.classList.contains("e-dialog-delete")) {
          this.openDialog("Delete", this.parent.activeCardData.data);
        }
      }
    };
    KanbanDialog2.prototype.getFormElements = function() {
      var elements = [].slice.call(this.element.querySelectorAll("." + FIELD_CLASS));
      var validElements = [];
      for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {
        var element2 = elements_1[_i];
        if (element2.classList.contains("e-control")) {
          validElements.push(element2);
        } else if (element2.querySelector(".e-control")) {
          validElements.push(element2.querySelector(".e-control"));
        } else {
          validElements.push(element2);
        }
      }
      return validElements;
    };
    KanbanDialog2.prototype.getColumnName = function(element2) {
      var attrName = element2.getAttribute("data-name") || "";
      if (attrName === "") {
        var isDropDowns = false;
        var fieldSelector = "";
        if (element2.classList.contains("e-dropdownlist") || element2.classList.contains("e-multiselect")) {
          fieldSelector = element2.classList.contains("e-dropdownlist") ? "e-ddl" : "e-multiselect";
          isDropDowns = true;
        } else if (element2.classList.contains("e-numerictextbox")) {
          fieldSelector = "e-numeric";
        }
        var classSelector = isDropDowns ? "." + fieldSelector + ":not(.e-control)" : "." + fieldSelector;
        var control = closest(element2, classSelector) || element2.querySelector("." + fieldSelector);
        if (control) {
          var attrEle = control.querySelector("[name]");
          if (attrEle) {
            attrName = attrEle.name;
          }
        }
      }
      return attrName;
    };
    KanbanDialog2.prototype.getValueFromElement = function(element2) {
      var value;
      if (element2.classList.contains("e-dropdownlist")) {
        value = element2.ej2_instances[0].value;
      } else if (element2.classList.contains("e-multiselect")) {
        value = element2.ej2_instances[0].value;
      } else if (element2.classList.contains("e-checkbox")) {
        value = element2.ej2_instances[0].checked;
      } else {
        if (element2.type === "checkbox") {
          value = element2.checked;
        } else {
          value = element2.value;
        }
      }
      return value;
    };
    KanbanDialog2.prototype.destroyComponents = function() {
      var formelement = this.getFormElements();
      for (var _i = 0, formelement_1 = formelement; _i < formelement_1.length; _i++) {
        var element2 = formelement_1[_i];
        var instance = element2.ej2_instances;
        if (instance && instance.length > 0) {
          instance.forEach(function(node) {
            return node.destroy();
          });
        }
      }
    };
    KanbanDialog2.prototype.destroy = function() {
      this.destroyToolTip();
      this.destroyComponents();
      if (this.dialogObj) {
        this.dialogObj.destroy();
        this.storeElement.focus();
        this.dialogObj = null;
        remove(this.element);
        this.element = null;
      }
    };
    return KanbanDialog2;
  }()
);
var Keyboard = (
  /** @class */
  function() {
    function Keyboard2(parent) {
      this.keyConfigs = {
        firstCardSelection: "36",
        lastCardSelection: "35",
        upArrow: "38",
        downArrow: "40",
        rightArrow: "39",
        leftArrow: "37",
        multiSelectionEnter: "ctrl+13",
        multiSelectionSpace: "ctrl+32",
        multiSelectionByUpArrow: "shift+38",
        multiSelectionByDownArrow: "shift+40",
        shiftTab: "shift+tab",
        enter: "13",
        tab: "tab",
        delete: "46",
        escape: "27",
        space: "32"
      };
      this.parent = parent;
      this.parent.element.tabIndex = this.parent.element.tabIndex === -1 ? 0 : this.parent.element.tabIndex;
      this.keyboardModule = new KeyboardEvents(this.parent.element, {
        keyAction: this.keyActionHandler.bind(this),
        keyConfigs: this.keyConfigs,
        eventName: "keydown"
      });
      this.multiSelection = false;
    }
    Keyboard2.prototype.keyActionHandler = function(e) {
      var _this = this;
      var selectedCard = this.parent.element.querySelectorAll("." + CARD_CLASS + "." + CARD_SELECTION_CLASS).item(0);
      if (!selectedCard && !closest(document.activeElement, "." + ROOT_CLASS)) {
        return;
      }
      var contentCell;
      var selectedCards;
      var selectedCardsData = [];
      switch (e.action) {
        case "upArrow":
        case "downArrow":
        case "multiSelectionByUpArrow":
        case "multiSelectionByDownArrow":
          e.preventDefault();
          this.processUpDownArrow(e.action, selectedCard);
          break;
        case "rightArrow":
        case "leftArrow":
          this.processLeftRightArrow(e);
          break;
        case "firstCardSelection":
        case "lastCardSelection":
          this.processCardSelection(e.action, selectedCard);
          break;
        case "multiSelectionEnter":
        case "multiSelectionSpace":
          if (document.activeElement) {
            this.parent.actionModule.cardSelection(document.activeElement, true, false);
          }
          break;
        case "space":
        case "enter":
          this.processEnter(e, selectedCard);
          break;
        case "escape":
          if (document.activeElement.classList.contains(CARD_CLASS) || document.activeElement.classList.contains(SHOW_ADD_BUTTON)) {
            if (document.activeElement.classList.contains(CARD_SELECTION_CLASS)) {
              removeClass([document.activeElement], CARD_SELECTION_CLASS);
              document.activeElement.focus();
            } else {
              var ele = closest(document.activeElement, "." + CONTENT_CELLS_CLASS);
              var cards = [].slice.call(ele.querySelectorAll("." + CARD_CLASS));
              removeClass(cards, CARD_SELECTION_CLASS);
              ele.focus();
              this.cardTabIndexRemove();
              this.addRemoveTabIndex("Add");
            }
          }
          break;
        case "tab":
        case "shiftTab":
          contentCell = closest(document.activeElement, "." + CONTENT_CELLS_CLASS);
          if (document.activeElement.classList.contains(CARD_CLASS)) {
            if (!document.activeElement.nextElementSibling && e.action === "tab") {
              e.preventDefault();
            }
            if (!document.activeElement.previousElementSibling && contentCell.querySelector("." + SHOW_ADD_BUTTON) && e.action === "tab") {
              addClass([contentCell.querySelector("." + SHOW_ADD_BUTTON)], SHOW_ADD_FOCUS);
            }
          }
          if (document.activeElement.classList.contains(SHOW_ADD_BUTTON)) {
            if (!contentCell.querySelector("." + CARD_CLASS) && e.action === "tab" || e.action === "shiftTab") {
              e.preventDefault();
            }
          }
          if (document.activeElement.classList.contains(ROOT_CLASS)) {
            this.cardTabIndexRemove();
            this.parent.keyboardModule.addRemoveTabIndex("Add");
          }
          break;
        case "delete":
          selectedCards = [].slice.call(this.parent.element.querySelectorAll("." + CARD_CLASS + "." + CARD_SELECTION_CLASS));
          selectedCards.forEach(function(selected) {
            selectedCardsData.push(_this.parent.getCardDetails(selected));
          });
          this.parent.crudModule.deleteCard(selectedCardsData);
          break;
      }
    };
    Keyboard2.prototype.processCardSelection = function(action, selectedCard) {
      if (selectedCard) {
        removeClass([selectedCard], CARD_SELECTION_CLASS);
        this.parent.layoutModule.disableAttributeSelection(selectedCard);
        var selection = this.parent.actionModule.selectionArray;
        selection.splice(selection.indexOf(selectedCard.getAttribute("data-id")), 1);
      }
      this.cardTabIndexRemove();
      var cards = [].slice.call(this.parent.element.querySelectorAll("." + CARD_CLASS));
      var element2 = action === "firstCardSelection" ? cards[0] : cards[cards.length - 1];
      this.parent.actionModule.cardSelection(element2, false, false);
      this.addRemoveTabIndex("Remove");
      element2.focus();
      var card = [].slice.call(closest(element2, "." + CONTENT_CELLS_CLASS).querySelectorAll("." + CARD_CLASS));
      card.forEach(function(element3) {
        element3.setAttribute("tabindex", "0");
      });
    };
    Keyboard2.prototype.processLeftRightArrow = function(e) {
      if (document.activeElement.classList.contains(CONTENT_CELLS_CLASS)) {
        if (e.action === "rightArrow" && document.activeElement.nextElementSibling) {
          document.activeElement.nextElementSibling.focus();
        } else if (e.action === "leftArrow" && document.activeElement.previousElementSibling) {
          document.activeElement.previousElementSibling.focus();
        }
      }
    };
    Keyboard2.prototype.processUpDownArrow = function(action, selectedCard) {
      if (action === "upArrow" && document.activeElement) {
        if (document.activeElement.classList.contains(CARD_CLASS) && document.activeElement.previousElementSibling) {
          document.activeElement.previousElementSibling.focus();
        } else if (document.activeElement.classList.contains(SHOW_ADD_BUTTON)) {
          document.activeElement.setAttribute("tabindex", "-1");
          removeClass([document.activeElement], SHOW_ADD_FOCUS);
          var cell = closest(document.activeElement, "." + CONTENT_CELLS_CLASS);
          if (cell.querySelectorAll("." + CARD_CLASS).length > 0) {
            [].slice.call(cell.querySelectorAll("." + CARD_CLASS)).slice(-1)[0].focus();
          }
        }
        this.removeSelection();
      } else if (action === "downArrow" && document.activeElement && document.activeElement.classList.contains(CARD_CLASS)) {
        if (document.activeElement.nextElementSibling) {
          document.activeElement.nextElementSibling.focus();
        } else if (closest(document.activeElement, "." + CARD_WRAPPER_CLASS).nextElementSibling) {
          var ele = closest(document.activeElement, "." + CARD_WRAPPER_CLASS).nextElementSibling;
          ele.setAttribute("tabindex", "0");
          addClass([ele], SHOW_ADD_FOCUS);
          ele.focus();
        }
        this.removeSelection();
      }
      if ((action === "multiSelectionByUpArrow" || action === "multiSelectionByDownArrow") && selectedCard && this.parent.cardSettings.selectionType === "Multiple") {
        var card = void 0;
        if (action === "multiSelectionByUpArrow") {
          card = document.activeElement.previousElementSibling;
        } else {
          card = document.activeElement.nextElementSibling;
        }
        if (card) {
          this.parent.actionModule.cardSelection(card, false, true);
          card.focus();
          this.multiSelection = true;
        }
      }
    };
    Keyboard2.prototype.removeSelection = function() {
      if (this.multiSelection) {
        var cards = this.parent.getSelectedCards();
        if (cards.length > 0) {
          removeClass(cards, CARD_SELECTION_CLASS);
          this.parent.layoutModule.disableAttributeSelection(cards);
        }
        this.multiSelection = false;
      }
    };
    Keyboard2.prototype.cardTabIndexRemove = function() {
      var cards = [].slice.call(this.parent.element.querySelectorAll("." + CARD_CLASS));
      cards.forEach(function(card) {
        card.setAttribute("tabindex", "-1");
      });
      var addButton = [].slice.call(this.parent.element.querySelectorAll("." + SHOW_ADD_BUTTON));
      addButton.forEach(function(add2) {
        add2.setAttribute("tabindex", "-1");
        removeClass([add2], SHOW_ADD_FOCUS);
      });
    };
    Keyboard2.prototype.processEnter = function(e, selectedCard) {
      if (e.action === "space") {
        e.preventDefault();
      }
      var element2 = e.target;
      if (element2.classList.contains(HEADER_ICON_CLASS)) {
        this.parent.actionModule.columnExpandCollapse(e);
      }
      if (element2.classList.contains(SWIMLANE_ROW_EXPAND_CLASS) || element2.classList.contains(SWIMLANE_ROW_COLLAPSE_CLASS)) {
        this.parent.actionModule.rowExpandCollapse(e);
      }
      if (document.activeElement.classList.contains(CARD_CLASS)) {
        this.parent.actionModule.cardSelection(document.activeElement, false, false);
      }
      if (document.activeElement.classList.contains(SHOW_ADD_BUTTON)) {
        if (!this.parent.dialogModule.dialogObj) {
          this.parent.actionModule.addButtonClick(document.activeElement);
        }
        document.activeElement.focus();
      }
      if (element2.classList.contains(CONTENT_CELLS_CLASS)) {
        var cards = [].slice.call(element2.querySelectorAll("." + CARD_CLASS));
        this.addRemoveTabIndex("Remove");
        if (cards.length > 0) {
          element2.querySelector("." + CARD_CLASS).focus();
          cards.forEach(function(element3) {
            element3.setAttribute("tabindex", "0");
          });
        }
        if (element2.querySelector("." + SHOW_ADD_BUTTON)) {
          element2.querySelector("." + SHOW_ADD_BUTTON).setAttribute("tabindex", "0");
          element2.querySelector("." + SHOW_ADD_BUTTON).focus();
        }
      }
      if (selectedCard === document.activeElement && this.parent.element.querySelectorAll("." + CARD_SELECTION_CLASS).length === 1) {
        this.parent.activeCardData = {
          data: this.parent.getCardDetails(selectedCard),
          element: selectedCard
        };
        if (!this.parent.dialogModule.dialogObj) {
          this.parent.dialogModule.openDialog("Edit", this.parent.getCardDetails(selectedCard));
        }
        selectedCard.focus();
      }
    };
    Keyboard2.prototype.addRemoveTabIndex = function(action) {
      var attribute = action === "Add" ? "0" : "-1";
      var headerIcon = [].slice.call(this.parent.element.querySelectorAll("." + HEADER_ICON_CLASS));
      if (headerIcon.length > 0) {
        headerIcon.forEach(function(element2) {
          element2.setAttribute("tabindex", attribute);
        });
      }
      var swimlaneIcon = [].slice.call(this.parent.element.querySelectorAll("." + SWIMLANE_ROW_EXPAND_CLASS));
      if (swimlaneIcon.length > 0) {
        swimlaneIcon.forEach(function(element2) {
          element2.setAttribute("tabindex", attribute);
        });
      }
      var className = "." + CONTENT_ROW_CLASS + ":not(." + SWIMLANE_ROW_CLASS + ") ." + CONTENT_CELLS_CLASS;
      var contentCell = [].slice.call(this.parent.element.querySelectorAll(className));
      contentCell.forEach(function(element2) {
        element2.setAttribute("tabindex", attribute);
      });
    };
    Keyboard2.prototype.destroy = function() {
      this.keyboardModule.destroy();
    };
    return Keyboard2;
  }()
);
var KanbanTooltip = (
  /** @class */
  function() {
    function KanbanTooltip2(parent) {
      this.parent = parent;
      this.renderTooltip();
    }
    KanbanTooltip2.prototype.renderTooltip = function() {
      this.tooltipObj = new Tooltip({
        cssClass: this.parent.cssClass + " " + TOOLTIP_CLASS,
        enableRtl: this.parent.enableRtl,
        mouseTrail: !this.parent.isAdaptive,
        offsetY: 5,
        position: "BottomCenter",
        showTipPointer: true,
        target: "." + TOOLTIP_TEXT_CLASS,
        beforeRender: this.onBeforeRender.bind(this),
        beforeClose: this.onBeforeClose.bind(this)
      });
      this.tooltipObj.appendTo(this.parent.element);
      this.tooltipObj.isStringTemplate = true;
    };
    KanbanTooltip2.prototype.onBeforeRender = function(args) {
      if (this.parent.dragAndDropModule.isDragging) {
        args.cancel = true;
        return;
      }
      var tooltipContent;
      if (this.parent.tooltipTemplate) {
        tooltipContent = createElement("div");
        var target = closest(args.target, "." + CARD_CLASS);
        var data = this.parent.getCardDetails(target);
        var templateId = this.parent.element.id + "_tooltipTemplate";
        var tooltipTemplate = this.parent.templateParser(this.parent.tooltipTemplate)(data, this.parent, "tooltipTemplate", templateId, false);
        append2(tooltipTemplate, tooltipContent);
        this.parent.renderTemplates();
      } else {
        tooltipContent = '<div class="e-card-header-caption">' + args.target.innerText + "</div>";
      }
      this.tooltipObj.setProperties({ content: tooltipContent }, true);
    };
    KanbanTooltip2.prototype.onBeforeClose = function() {
      this.parent.resetTemplates(["tooltipTemplate"]);
    };
    KanbanTooltip2.prototype.destroy = function() {
      this.tooltipObj.destroy();
      addClass([this.parent.element], "e-control");
      this.tooltipObj = null;
    };
    return KanbanTooltip2;
  }()
);
var KanbanTouch = (
  /** @class */
  function() {
    function KanbanTouch2(parent) {
      this.parent = parent;
      this.tabHold = false;
    }
    KanbanTouch2.prototype.wireTouchEvents = function() {
      this.element = this.parent.element.querySelector("." + CONTENT_CLASS);
      this.touchObj = new Touch(this.element, { tapHold: this.tapHoldHandler.bind(this) });
    };
    KanbanTouch2.prototype.tapHoldHandler = function(e) {
      this.tabHold = true;
      var target = closest(e.originalEvent.target, "." + CARD_CLASS);
      if (target && this.parent.cardSettings.selectionType === "Multiple") {
        this.parent.actionModule.cardSelection(target, true, false);
        if (!this.mobilePopup) {
          this.renderMobilePopup();
          this.mobilePopup.show();
        }
        this.updatePopupContent();
      }
    };
    KanbanTouch2.prototype.renderMobilePopup = function() {
      if (this.parent.cardSettings.selectionType === "Multiple") {
        var mobilePopupWrapper = createElement("div", {
          className: POPUP_WRAPPER_CLASS$1 + " e-popup-close",
          innerHTML: '<div class="' + POPUP_HEADER_CLASS$1 + '"><button class="' + CLOSE_CLASS$1 + '"></button></div>' + ('<div class="' + POPUP_CONTENT_CLASS$1 + '"></div>')
        });
        document.body.appendChild(mobilePopupWrapper);
        addClass([mobilePopupWrapper], DEVICE_CLASS$1);
        this.mobilePopup = new Popup(mobilePopupWrapper, {
          targetType: "container",
          enableRtl: this.parent.enableRtl,
          hideAnimation: { name: "ZoomOut" },
          showAnimation: { name: "ZoomIn" },
          collision: { X: "fit", Y: "fit" },
          position: { X: "left", Y: "top" },
          viewPortElement: document.body,
          zIndex: 1004,
          close: this.popupClose.bind(this)
        });
        var closeIcon = this.mobilePopup.element.querySelector("." + CLOSE_CLASS$1);
        var buttonObj = new Button({
          cssClass: "e-flat e-round e-small",
          enableRtl: this.parent.enableRtl,
          iconCss: ICON_CLASS + " " + CLOSE_ICON_CLASS$1
        });
        buttonObj.appendTo(closeIcon);
        buttonObj.isStringTemplate = true;
        EventHandler.add(closeIcon, "click", this.closeClick, this);
      }
    };
    KanbanTouch2.prototype.getPopupContent = function() {
      var popupContent;
      var selectedCards = this.parent.getSelectedCards();
      if (selectedCards.length > 1) {
        popupContent = "(" + selectedCards.length + ") " + this.parent.localeObj.getConstant("cardsSelected");
      } else if (selectedCards.length === 1) {
        popupContent = " " + this.parent.getCardDetails(selectedCards[0])[this.parent.cardSettings.headerField];
      }
      return popupContent;
    };
    KanbanTouch2.prototype.updatePopupContent = function() {
      if (!this.mobilePopup) {
        return;
      }
      var popupContent = this.getPopupContent();
      if (popupContent) {
        this.mobilePopup.element.querySelector("." + POPUP_CONTENT_CLASS$1).textContent = popupContent;
      } else {
        this.mobilePopup.hide();
      }
    };
    KanbanTouch2.prototype.closeClick = function() {
      this.parent.touchModule.mobilePopup.hide();
    };
    KanbanTouch2.prototype.popupClose = function() {
      this.popupDestroy();
    };
    KanbanTouch2.prototype.popupDestroy = function() {
      if (this.mobilePopup && this.mobilePopup.element) {
        var instance = this.mobilePopup.element.querySelector(".e-control.e-btn").ej2_instances[0];
        if (instance) {
          instance.destroy();
        }
        this.mobilePopup.destroy();
        remove(this.mobilePopup.element);
        this.mobilePopup = null;
      }
    };
    KanbanTouch2.prototype.unWireTouchEvents = function() {
      if (this.touchObj) {
        this.touchObj.destroy();
      }
      this.touchObj = null;
      this.element = null;
    };
    KanbanTouch2.prototype.destroy = function() {
      this.popupDestroy();
      this.unWireTouchEvents();
      this.tabHold = false;
    };
    return KanbanTouch2;
  }()
);
var MobileLayout = (
  /** @class */
  function() {
    function MobileLayout2(parent) {
      this.parent = parent;
    }
    MobileLayout2.prototype.renderSwimlaneHeader = function() {
      var toolbarWrapper = createElement("div", {
        className: SWIMLANE_HEADER_CLASS,
        innerHTML: '<div class="' + SWIMLANE_HEADER_TOOLBAR_CLASS + '"><div class="' + TOOLBAR_MENU_CLASS + '"><div class="e-icons ' + TOOLBAR_MENU_ICON_CLASS + '"></div></div><div class="' + TOOLBAR_LEVEL_TITLE_CLASS + '"><div class="' + TOOLBAR_SWIMLANE_NAME_CLASS + '"></div></div></div>'
      });
      this.parent.element.appendChild(toolbarWrapper);
      EventHandler.add(toolbarWrapper.querySelector("." + TOOLBAR_MENU_ICON_CLASS), "click", this.menuClick, this);
    };
    MobileLayout2.prototype.renderSwimlaneTree = function() {
      var height = this.parent.element.querySelector("." + SWIMLANE_HEADER_CLASS).offsetHeight;
      var treeHeight = window.innerHeight - height;
      this.popupOverlay = createElement("div", { className: SWIMLANE_OVERLAY_CLASS, styles: "height: " + treeHeight + "px;" });
      var wrapper = createElement("div", { className: SWIMLANE_CONTENT_CLASS, styles: "top:" + height + "px;" });
      var treeWrapper = createElement("div", {
        className: SWIMLANE_RESOURCE_CLASS + " e-popup-close",
        styles: "height: " + treeHeight + "px;"
      });
      wrapper.appendChild(treeWrapper);
      wrapper.appendChild(this.popupOverlay);
      this.parent.element.appendChild(wrapper);
      var swimlaneTree = createElement("div", { className: SWIMLANE_TREE_CLASS });
      treeWrapper.appendChild(swimlaneTree);
      this.treeViewObj = new TreeView({
        cssClass: this.parent.cssClass,
        enableRtl: this.parent.enableRtl,
        fields: {
          dataSource: this.parent.layoutModule.kanbanRows,
          id: "keyField",
          text: "textField"
        },
        nodeTemplate: this.parent.swimlaneSettings.template,
        nodeClicked: this.treeSwimlaneClick.bind(this),
        drawNode: this.drawNode.bind(this)
      });
      this.treeViewObj.appendTo(swimlaneTree);
      var popupObj = {
        targetType: "relative",
        actionOnScroll: "none",
        enableRtl: this.parent.enableRtl,
        zIndex: 10,
        hideAnimation: { name: "SlideLeftOut", duration: 500 },
        showAnimation: { name: "SlideLeftIn", duration: 500 },
        viewPortElement: this.parent.element.querySelector("." + CONTENT_CLASS)
      };
      popupObj.content = this.treeViewObj.element;
      this.treePopup = new Popup(treeWrapper, popupObj);
    };
    MobileLayout2.prototype.menuClick = function() {
      if (this.parent.element.querySelector("." + SWIMLANE_RESOURCE_CLASS).classList.contains("e-popup-open")) {
        this.treePopup.hide();
        removeClass([this.popupOverlay], "e-enable");
      } else {
        var treeNodes = [].slice.call(this.treeViewObj.element.querySelectorAll(".e-list-item"));
        removeClass(treeNodes, "e-active");
        addClass([treeNodes[this.parent.layoutModule.swimlaneIndex]], "e-active");
        this.treePopup.show();
        addClass([this.popupOverlay], "e-enable");
      }
    };
    MobileLayout2.prototype.treeSwimlaneClick = function(args) {
      this.treePopup.hide();
      var treeNodes = [].slice.call(this.treeViewObj.element.querySelectorAll(".e-list-item"));
      this.parent.layoutModule.swimlaneIndex = treeNodes.indexOf(args.node);
      this.parent.layoutModule.scrollLeft = 0;
      this.parent.notify(dataReady$1, { processedData: this.parent.kanbanData });
      args.event.preventDefault();
    };
    MobileLayout2.prototype.hidePopup = function() {
      this.treePopup.hide();
      removeClass([this.popupOverlay], "e-enable");
    };
    MobileLayout2.prototype.getWidth = function() {
      return window.innerWidth * 80 / 100;
    };
    MobileLayout2.prototype.drawNode = function(args) {
      if (this.parent.swimlaneSettings.template && this.parent.isReact) {
        var templateId = this.parent.element.id + "_treeviewTemplate";
        var treeViewTemplate = this.parent.templateParser(this.parent.swimlaneSettings.template)(args.nodeData, this.parent, "nodeTemplate", templateId, false);
        append2(treeViewTemplate, args.node.querySelector(".e-list-text"));
      }
    };
    return MobileLayout2;
  }()
);
var __extends$q = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var LayoutRender = (
  /** @class */
  function(_super) {
    __extends$q(LayoutRender2, _super);
    function LayoutRender2(parent) {
      var _this = _super.call(this, parent) || this;
      _this.kanbanRows = [];
      _this.parent = parent;
      _this.columnKeys = [];
      _this.swimlaneIndex = 0;
      _this.swimlaneData = {};
      _this.scrollLeft = 0;
      _this.frozenOrder = 0;
      _this.parent.on(dataReady$1, _this.initRender, _this);
      _this.parent.on(contentReady$1, _this.scrollUiUpdate, _this);
      return _this;
    }
    LayoutRender2.prototype.initRender = function() {
      if (this.parent.columns.length === 0) {
        return;
      }
      this.columnData = this.getColumnCards();
      this.kanbanRows = this.getRows();
      this.swimlaneData = this.getSwimlaneCards();
      if (this.parent.isAdaptive) {
        var parent_1 = this.parent.element.querySelector("." + CONTENT_CLASS);
        if (parent_1) {
          this.scrollLeft = parent_1.scrollLeft;
        }
      }
      this.destroy();
      this.parent.on(dataReady$1, this.initRender, this);
      this.parent.on(contentReady$1, this.scrollUiUpdate, this);
      if (this.parent.isAdaptive && this.parent.swimlaneSettings.keyField && this.parent.kanbanData.length !== 0) {
        this.renderSwimlaneHeader();
      }
      var header = createElement("div", { className: HEADER_CLASS });
      this.parent.element.appendChild(header);
      this.renderHeader(header);
      this.renderContent();
      this.renderCards();
      this.renderValidation();
      this.parent.renderTemplates();
      this.parent.notify(contentReady$1, {});
      this.wireEvents();
      if (this.parent.isInitialRender) {
        this.parent.isInitialRender = false;
      }
    };
    LayoutRender2.prototype.renderHeader = function(header) {
      var headerWrap = createElement("div", { className: this.parent.swimlaneSettings.keyField ? SWIMLANE_CLASS : "" });
      header.appendChild(headerWrap);
      var headerTable = createElement("table", {
        className: TABLE_CLASS + " " + HEADER_TABLE_CLASS,
        attrs: { "role": "table" }
      });
      headerWrap.appendChild(headerTable);
      this.renderColGroup(headerTable);
      var tableHead = createElement("thead");
      headerTable.appendChild(tableHead);
      if (this.parent.stackedHeaders.length > 0) {
        tableHead.appendChild(this.createStackedRow(this.parent.stackedHeaders));
      }
      var tr = createElement("tr", { className: HEADER_ROW_CLASS$1 });
      tableHead.appendChild(tr);
      var _loop_1 = function(column2) {
        if (this_1.isColumnVisible(column2)) {
          var index = this_1.parent.actionModule.columnToggleArray.indexOf(column2.keyField.toString());
          var th_1 = createElement("th", {
            className: index === -1 ? HEADER_CELLS_CLASS$1 : HEADER_CELLS_CLASS$1 + " " + COLLAPSED_CLASS,
            attrs: { "data-role": "kanban-column", "data-key": column2.keyField.toString() }
          });
          var classList2 = [];
          if (column2.allowToggle) {
            classList2.push(HEADER_ROW_TOGGLE_CLASS);
            if (!column2.isExpanded) {
              classList2.push(COLLAPSED_CLASS);
            }
          }
          addClass([th_1], classList2);
          var headerWrapper = createElement("div", { className: HEADER_WRAP_CLASS });
          th_1.appendChild(headerWrapper);
          var noOfCard = this_1.columnData[column2.keyField].length;
          var headerTitle = createElement("div", { className: HEADER_TITLE_CLASS });
          headerWrapper.appendChild(headerTitle);
          if (column2.template) {
            var templateArgs = {
              keyField: column2.keyField,
              headerText: column2.headerText,
              minCount: column2.minCount,
              maxCount: column2.maxCount,
              allowToggle: column2.allowToggle,
              isExpanded: column2.isExpanded,
              showItemCount: column2.showItemCount,
              count: noOfCard
            };
            addClass([th_1], TEMPLATE_CLASS);
            var templateId = this_1.parent.element.id + "_columnTemplate";
            var templateHeader = this_1.parent.templateParser(column2.template)(templateArgs, this_1.parent, "columnTemplate", templateId, false);
            append2(templateHeader, headerTitle);
          } else {
            var header_1 = createElement("div", { className: HEADER_TEXT_CLASS, innerHTML: column2.headerText });
            headerTitle.appendChild(header_1);
            if (column2.showItemCount) {
              var itemCount = createElement("div", {
                className: CARD_ITEM_COUNT_CLASS,
                innerHTML: "- " + noOfCard.toString() + " " + this_1.parent.localeObj.getConstant("items")
              });
              headerTitle.appendChild(itemCount);
            }
          }
          if (column2.allowToggle) {
            var isExpand = column2.isExpanded && index === -1 ? true : false;
            var name_1 = isExpand ? COLUMN_EXPAND_CLASS : COLUMN_COLLAPSE_CLASS;
            var icon = createElement("div", {
              className: HEADER_ICON_CLASS + " " + ICON_CLASS + " " + name_1,
              attrs: { "tabindex": "0", "role": "button" }
            });
            icon.setAttribute("aria-label", isExpand ? column2.keyField + " Expand" : column2.keyField + " Collapse");
            th_1.setAttribute("aria-expanded", isExpand.toString());
            headerWrapper.appendChild(icon);
          }
          var dataObj = [{ keyField: column2.keyField, textField: column2.headerText, count: noOfCard }];
          var args = { data: dataObj, element: tr, cancel: false, requestType: "headerRow" };
          this_1.parent.trigger(queryCellInfo, args, function(columnArgs) {
            if (!columnArgs.cancel) {
              tr.appendChild(th_1);
            }
          });
        }
      };
      var this_1 = this;
      for (var _i = 0, _a = this.parent.columns; _i < _a.length; _i++) {
        var column = _a[_i];
        _loop_1(column);
      }
    };
    LayoutRender2.prototype.renderContent = function() {
      var content = createElement("div", { className: CONTENT_CLASS });
      this.parent.element.appendChild(content);
      var contentWrap = createElement("div", { className: this.parent.swimlaneSettings.keyField ? SWIMLANE_CLASS : "" });
      content.appendChild(contentWrap);
      var contentTable = createElement("table", {
        className: TABLE_CLASS + " " + CONTENT_TABLE_CLASS$1,
        attrs: { "role": "presentation" }
      });
      contentWrap.appendChild(contentTable);
      this.renderColGroup(contentTable);
      var tBody = createElement("tbody");
      tBody.setAttribute("role", "rowgroup");
      contentTable.appendChild(tBody);
      var isCollaspsed = false;
      this.swimlaneRow = this.kanbanRows;
      this.initializeSwimlaneTree();
      for (var _i = 0, _a = this.swimlaneRow; _i < _a.length; _i++) {
        var row = _a[_i];
        if (this.parent.swimlaneSettings.keyField && this.parent.swimlaneToggleArray.length !== 0) {
          var index = this.parent.swimlaneToggleArray.indexOf(row.keyField);
          isCollaspsed = index !== -1;
        }
        if (this.parent.swimlaneSettings.keyField && !this.parent.isAdaptive) {
          this.renderSwimlaneRow(tBody, row, isCollaspsed);
        }
        this.renderSingleContent(tBody, row, isCollaspsed);
      }
    };
    LayoutRender2.prototype.renderSingleContent = function(tBody, row, isCollaspsed) {
      var className = isCollaspsed ? CONTENT_ROW_CLASS + " " + COLLAPSED_CLASS : CONTENT_ROW_CLASS;
      var tr = createElement("tr", { className, attrs: { "aria-expanded": "true", "role": "row" } });
      for (var _i = 0, _a = this.parent.columns; _i < _a.length; _i++) {
        var column = _a[_i];
        if (this.isColumnVisible(column)) {
          var index = this.parent.actionModule.columnToggleArray.indexOf(column.keyField.toString());
          var className_1 = index === -1 ? CONTENT_CELLS_CLASS : CONTENT_CELLS_CLASS + " " + COLLAPSED_CLASS;
          var dragClass = (column.allowDrag ? " " + DRAG_CLASS : "") + (column.allowDrop ? " " + DROP_CLASS + " " + DROPPABLE_CLASS : "");
          var td = createElement("td", {
            className: className_1 + dragClass,
            attrs: {
              "data-role": "kanban-column",
              "data-key": column.keyField.toString(),
              "tabindex": "0",
              "role": "treegrid",
              "aria-label": column.keyField.toString()
            }
          });
          if (column.allowToggle && !column.isExpanded || index !== -1) {
            addClass([td], COLLAPSED_CLASS);
            var text = (column.showItemCount ? "[" + this.getColumnData(column.keyField, this.swimlaneData[row.keyField]).length + "] " : "") + column.headerText;
            td.appendChild(createElement("div", { className: COLLAPSE_HEADER_TEXT_CLASS, innerHTML: text }));
            td.setAttribute("aria-expanded", "false");
          }
          if (column.showAddButton) {
            var button = createElement("div", { className: SHOW_ADD_BUTTON, attrs: { "tabindex": "-1" } });
            button.appendChild(createElement("div", { className: SHOW_ADD_ICON + " " + ICON_CLASS }));
            td.appendChild(button);
          }
          tr.appendChild(td);
        }
      }
      var dataObj = [{ keyField: row.keyField, textField: row.textField, count: row.count }];
      var args = { data: dataObj, element: tr, cancel: false, requestType: "contentRow" };
      this.parent.trigger(queryCellInfo, args, function(columnArgs) {
        if (!columnArgs.cancel) {
          if (tBody.classList.contains("e-swimlane-row")) {
            tBody.insertAdjacentElement("beforebegin", tr);
          } else {
            tBody.appendChild(tr);
          }
        }
      });
    };
    LayoutRender2.prototype.initializeSwimlaneTree = function() {
      if (this.parent.swimlaneSettings.keyField && this.parent.isAdaptive && this.parent.kanbanData.length !== 0) {
        this.swimlaneRow = [this.kanbanRows[this.swimlaneIndex]];
        this.renderSwimlaneTree();
        this.parent.element.querySelector("." + TOOLBAR_SWIMLANE_NAME_CLASS).innerHTML = this.swimlaneRow[0].textField;
      }
    };
    LayoutRender2.prototype.renderSwimlaneRow = function(tBody, row, isCollapsed) {
      var name = CONTENT_ROW_CLASS + " " + SWIMLANE_ROW_CLASS;
      var className = isCollapsed ? " " + COLLAPSED_CLASS : "";
      var tr = createElement("tr", {
        className: name + className,
        attrs: { "data-key": row.keyField, "aria-expanded": (!isCollapsed).toString(), "role": "row" }
      });
      var col = this.parent.columns.length - this.parent.actionModule.hideColumnKeys.length;
      var td = createElement("td", {
        className: CONTENT_CELLS_CLASS,
        attrs: { "data-role": "kanban-column", "colspan": col.toString() }
      });
      var swimlaneHeader = createElement("div", { className: SWIMLANE_HEADER_CLASS });
      td.appendChild(swimlaneHeader);
      var iconClass = isCollapsed ? SWIMLANE_ROW_COLLAPSE_CLASS : SWIMLANE_ROW_EXPAND_CLASS;
      var iconDiv = createElement("div", {
        className: ICON_CLASS + " " + iconClass,
        attrs: {
          "tabindex": "0",
          "role": "button",
          "aria-label": isCollapsed ? row.keyField + " Collapse" : row.keyField + " Expand"
        }
      });
      swimlaneHeader.appendChild(iconDiv);
      var headerWrap = createElement("div", { className: HEADER_WRAP_CLASS });
      swimlaneHeader.appendChild(headerWrap);
      var cardCount = this.swimlaneData[row.keyField].length;
      if (this.parent.swimlaneSettings.template) {
        var templateArgs = extend({}, row, { count: cardCount }, true);
        addClass([td], TEMPLATE_CLASS);
        var templateId = this.parent.element.id + "_swimlaneTemplate";
        var swimlaneTemplate = this.parent.templateParser(this.parent.swimlaneSettings.template)(templateArgs, this.parent, "swimlaneTemplate", templateId, false);
        append2(swimlaneTemplate, headerWrap);
      } else {
        headerWrap.appendChild(createElement("div", {
          className: SWIMLANE_ROW_TEXT_CLASS,
          innerHTML: row.textField,
          attrs: { "data-role": row.textField }
        }));
      }
      if (this.parent.swimlaneSettings.showItemCount) {
        swimlaneHeader.appendChild(createElement("div", {
          className: CARD_ITEM_COUNT_CLASS,
          innerHTML: "- " + cardCount.toString() + " " + this.parent.localeObj.getConstant("items")
        }));
      }
      tr.appendChild(td);
      var dataObj = [{ keyField: row.keyField, textField: row.textField, count: row.count }];
      var args = { data: dataObj, element: tr, cancel: false, requestType: "swimlaneRow" };
      this.parent.trigger(queryCellInfo, args, function(columnArgs) {
        if (!columnArgs.cancel) {
          if (tBody.classList.contains("e-swimlane-row")) {
            tBody.insertAdjacentElement("beforebegin", tr);
          } else {
            tBody.appendChild(tr);
          }
        }
      });
    };
    LayoutRender2.prototype.renderCards = function() {
      var _this = this;
      var rows = this.swimlaneRow;
      var cardRows = [].slice.call(this.parent.element.querySelectorAll(".e-content-row:not(.e-swimlane-row)"));
      var swimlaneRows = [].slice.call(this.parent.element.querySelectorAll(".e-content-row.e-swimlane-row"));
      var removeTrs = [];
      var columnTransition = false;
      cardRows.forEach(function(tr, index) {
        var dataCount = 0;
        var _loop_2 = function(column2) {
          if (_this.isColumnVisible(column2)) {
            var columnData = _this.parent.swimlaneSettings.keyField ? _this.getColumnData(column2.keyField, _this.swimlaneData[rows[index].keyField]) : _this.columnData[column2.keyField];
            dataCount += columnData.length;
            var columnWrapper = tr.querySelector('[data-key="' + column2.keyField + '"]');
            var cardWrapper_1 = createElement("div", {
              className: CARD_WRAPPER_CLASS,
              attrs: { "role": "listbox", "tabindex": "0" }
            });
            if (column2.transitionColumns.length > 0) {
              columnTransition = true;
            }
            if (!columnTransition && isNullOrUndefined(_this.parent.swimlaneSettings.keyField)) {
              var borderElem = createElement("div", { className: BORDER_CLASS });
              columnWrapper.appendChild(borderElem);
            }
            columnWrapper.appendChild(cardWrapper_1);
            if (columnData.length > 0) {
              var _loop_3 = function(data2) {
                var cardText = data2[_this.parent.cardSettings.headerField];
                var cardIndex = _this.parent.actionModule.selectionArray.indexOf(cardText);
                var cardElement = _this.renderCard(data2);
                if (cardIndex !== -1) {
                  cardElement.setAttribute("aria-selected", "true");
                  addClass([cardElement], CARD_SELECTION_CLASS);
                }
                var args = { data: data2, element: cardElement, cancel: false };
                _this.parent.trigger(cardRendered, args, function(cardArgs) {
                  if (!cardArgs.cancel) {
                    cardWrapper_1.appendChild(cardElement);
                  }
                });
              };
              for (var _i2 = 0, _a2 = columnData; _i2 < _a2.length; _i2++) {
                var data = _a2[_i2];
                _loop_3(data);
              }
            } else {
              cardWrapper_1.appendChild(_this.renderEmptyCard());
            }
          }
        };
        for (var _i = 0, _a = _this.parent.columns; _i < _a.length; _i++) {
          var column = _a[_i];
          _loop_2(column);
        }
        if (dataCount === 0) {
          removeTrs.push(tr);
          if (swimlaneRows.length > 0) {
            removeTrs.push(swimlaneRows[index]);
          }
        }
      });
      if (!this.parent.swimlaneSettings.showEmptyRow && (this.parent.kanbanData.length === 0 && !this.parent.showEmptyColumn)) {
        removeTrs.forEach(function(tr) {
          return remove(tr);
        });
      }
    };
    LayoutRender2.prototype.renderCard = function(data) {
      var cardElement = createElement("div", {
        className: CARD_CLASS,
        attrs: {
          "data-id": data[this.parent.cardSettings.headerField],
          "data-key": data[this.parent.keyField],
          "aria-selected": "false",
          "tabindex": "-1",
          "role": "option"
        }
      });
      if (this.parent.cardSettings.template) {
        addClass([cardElement], TEMPLATE_CLASS);
        var templateId = this.parent.element.id + "_cardTemplate";
        var cardTemplate = this.parent.templateParser(this.parent.cardSettings.template)(data, this.parent, "cardTemplate", templateId, false);
        append2(cardTemplate, cardElement);
      } else {
        var tooltipClass = this.parent.enableTooltip ? " " + TOOLTIP_TEXT_CLASS : "";
        if (this.parent.cardSettings.showHeader) {
          var cardHeader = createElement("div", { className: CARD_HEADER_CLASS });
          var cardCaption = createElement("div", { className: CARD_HEADER_TEXT_CLASS });
          var cardText = createElement("div", {
            className: CARD_HEADER_TITLE_CLASS + tooltipClass,
            innerHTML: data[this.parent.cardSettings.headerField] || ""
          });
          cardHeader.appendChild(cardCaption);
          cardCaption.appendChild(cardText);
          cardElement.appendChild(cardHeader);
        }
        var cardContent = createElement("div", {
          className: CARD_CONTENT_CLASS + tooltipClass,
          innerHTML: data[this.parent.cardSettings.contentField] || ""
        });
        cardElement.appendChild(cardContent);
        if (this.parent.cardSettings.tagsField && data[this.parent.cardSettings.tagsField]) {
          var cardTags = createElement("div", { className: CARD_TAGS_CLASS });
          var tags = data[this.parent.cardSettings.tagsField].toString().split(",");
          for (var _i = 0, tags_1 = tags; _i < tags_1.length; _i++) {
            var tag = tags_1[_i];
            cardTags.appendChild(createElement("div", {
              className: CARD_TAG_CLASS + " " + CARD_LABEL_CLASS,
              innerHTML: tag
            }));
          }
          cardElement.appendChild(cardTags);
        }
        if (this.parent.cardSettings.grabberField && data[this.parent.cardSettings.grabberField]) {
          addClass([cardElement], CARD_COLOR_CLASS);
          cardElement.style.borderLeftColor = data[this.parent.cardSettings.grabberField];
        }
        if (this.parent.cardSettings.footerCssField) {
          var cardFields = createElement("div", { className: CARD_FOOTER_CLASS });
          var keys2 = data[this.parent.cardSettings.footerCssField].split(",");
          for (var _a = 0, keys_1 = keys2; _a < keys_1.length; _a++) {
            var key = keys_1[_a];
            cardFields.appendChild(createElement("div", {
              className: key.trim() + " " + CARD_FOOTER_CSS_CLASS
            }));
          }
          cardElement.appendChild(cardFields);
        }
      }
      return cardElement;
    };
    LayoutRender2.prototype.renderEmptyCard = function() {
      var emptyCard = createElement("span", {
        className: EMPTY_CARD_CLASS,
        innerHTML: this.parent.localeObj.getConstant("noCard")
      });
      return emptyCard;
    };
    LayoutRender2.prototype.renderColGroup = function(table) {
      var _this = this;
      var colGroup = createElement("colgroup");
      this.parent.columns.forEach(function(column) {
        if (_this.isColumnVisible(column)) {
          var index = _this.parent.actionModule.columnToggleArray.indexOf(column.keyField.toString());
          var isToggle = column.allowToggle && !column.isExpanded;
          var className = index === -1 ? isToggle ? COLLAPSED_CLASS : "" : COLLAPSED_CLASS;
          var col = createElement("col", {
            className,
            attrs: { "data-key": column.keyField.toString() },
            styles: _this.parent.isAdaptive ? "width: " + (isToggle ? formatUnit(toggleWidth) : formatUnit(_this.getWidth())) : ""
          });
          colGroup.appendChild(col);
        }
      });
      table.appendChild(colGroup);
    };
    LayoutRender2.prototype.getRows = function() {
      var _this = this;
      var kanbanRows = [];
      if (this.parent.swimlaneSettings.keyField) {
        this.parent.kanbanData.map(function(obj) {
          if (!_this.parent.swimlaneSettings.showEmptyRow) {
            if (isNullOrUndefined(obj[_this.parent.keyField]) || obj[_this.parent.keyField] === "" || obj[_this.parent.keyField] && _this.columnKeys.indexOf(obj[_this.parent.keyField].toString()) === -1) {
              return;
            }
          }
          var textField = obj[_this.parent.swimlaneSettings.textField] || obj[_this.parent.swimlaneSettings.keyField];
          var keyField = obj[_this.parent.swimlaneSettings.keyField];
          if (!obj[_this.parent.swimlaneSettings.keyField]) {
            if (_this.parent.swimlaneSettings.showUnassignedRow) {
              textField = _this.parent.localeObj.getConstant("unassigned");
              keyField = "";
            } else {
              return;
            }
          }
          kanbanRows.push({ keyField, textField });
        });
        kanbanRows = kanbanRows.filter(function(item, index, arr) {
          return index === arr.map(function(item2) {
            return item2.keyField;
          }).indexOf(item.keyField);
        });
        kanbanRows = this.swimlaneSorting(kanbanRows);
        kanbanRows.forEach(function(row) {
          row.count = _this.parent.kanbanData.filter(function(obj) {
            return _this.columnKeys.indexOf(obj[_this.parent.keyField]) > -1 && obj[_this.parent.swimlaneSettings.keyField] === row.keyField;
          }).length;
        });
        if (kanbanRows.length === 0) {
          kanbanRows.push({ keyField: "", textField: "" });
        }
      } else {
        kanbanRows.push({ keyField: "", textField: "" });
      }
      return kanbanRows;
    };
    LayoutRender2.prototype.swimlaneSorting = function(rows) {
      if (this.parent.swimlaneSettings.sortComparer) {
        rows = this.parent.swimlaneSettings.sortComparer.call(this.parent, rows);
      } else {
        rows.sort(function(a, b) {
          return a.textField.localeCompare(b.textField, void 0, { numeric: true });
        });
        if (this.parent.swimlaneSettings.sortDirection === "Descending") {
          rows.reverse();
        }
      }
      return rows;
    };
    LayoutRender2.prototype.createStackedRow = function(rows) {
      var tr = createElement("tr", { className: HEADER_ROW_CLASS$1 + " " + STACKED_HEADER_ROW_CLASS });
      var stackedHeaders = [];
      this.parent.columns.forEach(function(column) {
        var headerText = "";
        for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {
          var row = rows_1[_i];
          if (row.keyFields.indexOf(column.keyField.toString()) !== -1) {
            headerText = row.text;
          }
        }
        stackedHeaders.push(headerText);
      });
      for (var h2 = 0; h2 < stackedHeaders.length; h2++) {
        var colSpan = 1;
        for (var j = h2 + 1; j < stackedHeaders.length; j++) {
          if (stackedHeaders[h2] !== "" && stackedHeaders[j] !== "" && stackedHeaders[h2] === stackedHeaders[j]) {
            colSpan++;
          } else {
            break;
          }
        }
        var div = createElement("div", { className: HEADER_TEXT_CLASS, innerHTML: stackedHeaders[h2] });
        var th = createElement("th", {
          className: HEADER_CELLS_CLASS$1 + " " + STACKED_HEADER_CELL_CLASS,
          attrs: { "colspan": colSpan.toString() }
        });
        tr.appendChild(th).appendChild(div);
        h2 += colSpan - 1;
      }
      return tr;
    };
    LayoutRender2.prototype.scrollUiUpdate = function() {
      var _this = this;
      var header = this.parent.element.querySelector("." + HEADER_CLASS);
      var content = this.parent.element.querySelector("." + CONTENT_CLASS);
      var height = this.parent.element.offsetHeight - header.offsetHeight;
      if (this.parent.isAdaptive) {
        height = window.innerHeight - (header.offsetHeight + bottomSpace);
        var swimlaneToolbar = this.parent.element.querySelector("." + SWIMLANE_HEADER_CLASS);
        if (swimlaneToolbar) {
          height -= swimlaneToolbar.offsetHeight;
        }
        var cardWrappers = [].slice.call(this.parent.element.querySelectorAll("." + CONTENT_CELLS_CLASS));
        cardWrappers.forEach(function(cell) {
          var cardWrapper = cell.querySelector("." + CARD_WRAPPER_CLASS);
          if (!cardWrapper.classList.contains(MULTI_CARD_WRAPPER_CLASS)) {
            cardWrapper.style.height = formatUnit(height);
            EventHandler.add(cell, "touchmove", _this.onAdaptiveScroll, _this);
          }
        });
      }
      if (this.parent.height !== "auto" && this.parent.height !== "100%") {
        content.style.height = formatUnit(height);
      }
      [].slice.call(header.children).forEach(function(node) {
        var paddingValue = 0;
        if (content.offsetWidth - content.clientWidth > 0) {
          paddingValue = 17;
          if (content.offsetHeight - content.clientHeight > 0) {
            node.style.width = formatUnit(content.clientWidth);
          }
        }
        if (_this.parent.enableRtl) {
          node.style.paddingLeft = formatUnit(paddingValue);
        } else {
          node.style.paddingRight = formatUnit(paddingValue);
        }
      });
      this.updateScrollPosition();
    };
    LayoutRender2.prototype.onContentScroll = function(e) {
      var target = e.target;
      var header = this.parent.element.querySelector("." + HEADER_CLASS);
      [].slice.call(header.children).forEach(function(node) {
        node.scrollLeft = target.scrollLeft;
      });
      this.parent.scrollPosition.content = { left: target.scrollLeft, top: target.scrollTop };
      if (!isNullOrUndefined(this.parent.swimlaneSettings.keyField) && this.parent.swimlaneSettings.enableFrozenRows) {
        this.frozenRows(e);
      }
    };
    LayoutRender2.prototype.addFrozenSwimlaneDataKey = function(currentElem) {
      var frozenKey = currentElem.getAttribute("data-key");
      if (!isNullOrUndefined(frozenKey)) {
        this.frozenSwimlaneRow.setAttribute("data-key", frozenKey);
      }
    };
    LayoutRender2.prototype.frozenRows = function(e) {
      var firstSwimlane = this.parent.element.querySelector("." + SWIMLANE_ROW_CLASS);
      var header = this.parent.element.querySelector("." + HEADER_CLASS);
      var content = this.parent.element.querySelector("." + CONTENT_CLASS);
      if (isNullOrUndefined(this.frozenSwimlaneRow)) {
        this.frozenSwimlaneRow = createElement("div", { className: FROZEN_SWIMLANE_ROW_CLASS });
        var frozenRow = createElement("div", { className: FROZEN_ROW_CLASS });
        this.frozenSwimlaneRow.appendChild(frozenRow);
        this.parent.element.insertBefore(this.frozenSwimlaneRow, this.parent.element.firstElementChild);
        frozenRow.appendChild(firstSwimlane.querySelector("." + SWIMLANE_HEADER_CLASS).cloneNode(true));
        this.addFrozenSwimlaneDataKey(firstSwimlane);
        setStyleAttribute(this.frozenSwimlaneRow, {
          height: formatUnit(firstSwimlane.getBoundingClientRect().height),
          width: formatUnit(content.querySelector(".e-swimlane").getBoundingClientRect().width),
          top: formatUnit(header.getBoundingClientRect().height.toString())
        });
        setStyleAttribute(header, { position: "relative", top: formatUnit(-this.frozenSwimlaneRow.getBoundingClientRect().height) });
        setStyleAttribute(content, { position: "relative", top: formatUnit(-this.frozenSwimlaneRow.getBoundingClientRect().height) });
      } else {
        var swimlaneRows = [].slice.call(this.parent.element.querySelectorAll("." + SWIMLANE_ROW_CLASS));
        var curSwim = swimlaneRows[this.frozenOrder];
        var prevSwim = swimlaneRows[this.frozenOrder - 1];
        var nextSwim = swimlaneRows[this.frozenOrder + 1];
        var curSwimHeight = void 0;
        var prevSwimHeight = void 0;
        var nextSwimHeight = void 0;
        if (curSwim) {
          curSwimHeight = curSwim.getBoundingClientRect().top + curSwim.getBoundingClientRect().height;
        }
        if (prevSwim) {
          prevSwimHeight = prevSwim.getBoundingClientRect().top + prevSwim.getBoundingClientRect().height;
        }
        if (nextSwim) {
          nextSwimHeight = nextSwim.getBoundingClientRect().top + nextSwim.getBoundingClientRect().height;
        }
        var frozenSwimHeight = content.getBoundingClientRect().top + this.frozenSwimlaneRow.getBoundingClientRect().height;
        var frozenRowsElement = this.frozenSwimlaneRow.querySelector("." + FROZEN_ROW_CLASS);
        if (nextSwimHeight && frozenSwimHeight >= nextSwimHeight && this.frozenOrder < swimlaneRows.length - 1) {
          if (frozenRowsElement) {
            remove(frozenRowsElement.querySelector("." + SWIMLANE_HEADER_CLASS));
            frozenRowsElement.appendChild(nextSwim.querySelector("." + SWIMLANE_HEADER_CLASS).cloneNode(true));
            this.addFrozenSwimlaneDataKey(nextSwim);
          }
          ++this.frozenOrder;
        } else if (prevSwimHeight && frozenSwimHeight < curSwimHeight && frozenSwimHeight > prevSwimHeight && this.frozenOrder > 0) {
          if (frozenRowsElement) {
            remove(frozenRowsElement.querySelector("." + SWIMLANE_HEADER_CLASS));
            frozenRowsElement.appendChild(prevSwim.querySelector("." + SWIMLANE_HEADER_CLASS).cloneNode(true));
            this.addFrozenSwimlaneDataKey(prevSwim);
          }
          --this.frozenOrder;
        }
      }
      if (e && e.target.scrollTop === 0) {
        this.removeFrozenRows();
      }
    };
    LayoutRender2.prototype.removeFrozenRows = function() {
      remove(this.frozenSwimlaneRow);
      this.frozenSwimlaneRow = null;
      var header = this.parent.element.querySelector("." + HEADER_CLASS);
      var content = this.parent.element.querySelector("." + CONTENT_CLASS);
      setStyleAttribute(header, { position: "", top: "" });
      setStyleAttribute(content, { position: "", top: "" });
      this.parent.scrollPosition.content = { left: this.parent.scrollPosition.content.left, top: 0 };
      content.scrollTop = 0;
      this.frozenOrder = 0;
    };
    LayoutRender2.prototype.onColumnScroll = function(e) {
      var target = e.target;
      if (target.offsetParent) {
        var columnKey = target.offsetParent.getAttribute("data-key");
        this.parent.scrollPosition.column["" + columnKey] = { left: target.scrollLeft, top: target.scrollTop };
      }
    };
    LayoutRender2.prototype.onAdaptiveScroll = function(e) {
      if (this.parent.touchModule.tabHold && !this.parent.touchModule.mobilePopup) {
        e.preventDefault();
      }
    };
    LayoutRender2.prototype.isColumnVisible = function(column) {
      var _this = this;
      var isVisible2 = false;
      var isNumeric = typeof column.keyField === "number";
      if (isNumeric) {
        isVisible2 = this.parent.actionModule.hideColumnKeys.indexOf(column.keyField.toString()) === -1;
      } else {
        column.keyField.split(",").forEach(function(key) {
          isVisible2 = _this.parent.actionModule.hideColumnKeys.indexOf(key) === -1;
        });
      }
      return isVisible2;
    };
    LayoutRender2.prototype.renderLimits = function(column, target) {
      var limits = createElement("div", { className: LIMITS_CLASS });
      if (column.minCount) {
        limits.appendChild(createElement("div", {
          className: MIN_COUNT_CLASS,
          innerHTML: this.parent.localeObj.getConstant("min") + ": " + column.minCount.toString()
        }));
      }
      if (column.maxCount) {
        limits.appendChild(createElement("div", {
          className: MAX_COUNT_CLASS,
          innerHTML: this.parent.localeObj.getConstant("max") + ": " + column.maxCount.toString()
        }));
      }
      if (limits.childElementCount > 0) {
        if (target.querySelector("." + CARD_WRAPPER_CLASS)) {
          target.insertBefore(limits, target.firstElementChild);
        } else {
          target.appendChild(limits);
        }
      }
    };
    LayoutRender2.prototype.renderValidation = function() {
      var _this = this;
      this.parent.columns.forEach(function(column) {
        if (!column.minCount && !column.maxCount) {
          return;
        }
        var cardData = _this.columnData[column.keyField];
        var keySelector = '[data-key="' + column.keyField + '"]';
        var headerCell = _this.parent.element.querySelector("." + (HEADER_CELLS_CLASS$1 + keySelector));
        var rowCells = [].slice.call(_this.parent.element.querySelectorAll("." + (CONTENT_CELLS_CLASS + keySelector)));
        if (_this.parent.constraintType === "Swimlane" && _this.parent.swimlaneSettings.keyField) {
          _this.swimlaneRow.forEach(function(row, index) {
            _this.renderLimits(column, rowCells[index]);
            var rowCards = cardData.filter(function(card) {
              return card[_this.parent.swimlaneSettings.keyField] === row.keyField;
            });
            var colorClass2 = _this.getValidationClass(column, rowCards.length);
            if (colorClass2) {
              addClass([rowCells[index]], colorClass2);
            }
          });
        } else {
          _this.renderLimits(column, headerCell);
          var colorClass = _this.getValidationClass(column, cardData.length);
          if (colorClass) {
            addClass(rowCells.concat(headerCell), colorClass);
          }
        }
      });
    };
    LayoutRender2.prototype.getValidationClass = function(column, count) {
      var colorClass;
      if (column.maxCount && count > column.maxCount) {
        colorClass = MAX_COLOR_CLASS;
      } else if (column.minCount && count < column.minCount) {
        colorClass = MIN_COLOR_CLASS;
      }
      return colorClass;
    };
    LayoutRender2.prototype.refreshValidation = function() {
      var validations = [].slice.call(this.parent.element.querySelectorAll("." + LIMITS_CLASS));
      validations.forEach(function(node) {
        remove(node);
      });
      var minClass = [].slice.call(this.parent.element.querySelectorAll("." + MIN_COLOR_CLASS));
      removeClass(minClass, MIN_COLOR_CLASS);
      var maxClass = [].slice.call(this.parent.element.querySelectorAll("." + MAX_COLOR_CLASS));
      removeClass(maxClass, MAX_COLOR_CLASS);
      this.renderValidation();
    };
    LayoutRender2.prototype.getColumnData = function(columnValue, dataSource) {
      var _this = this;
      if (dataSource === void 0) {
        dataSource = this.parent.kanbanData;
      }
      var cardData = [];
      var isNumeric = typeof columnValue === "number";
      if (isNumeric) {
        var keyData = dataSource.filter(function(cardObj) {
          return cardObj[_this.parent.keyField] === columnValue;
        });
        cardData = cardData.concat(keyData);
      } else {
        var columnKeys = columnValue.split(",");
        var _loop_4 = function(key2) {
          var keyData2 = dataSource.filter(function(cardObj) {
            return cardObj[_this.parent.keyField] === key2.trim();
          });
          cardData = cardData.concat(keyData2);
        };
        for (var _i = 0, columnKeys_1 = columnKeys; _i < columnKeys_1.length; _i++) {
          var key = columnKeys_1[_i];
          _loop_4(key);
        }
      }
      this.sortCategory(cardData);
      return cardData;
    };
    LayoutRender2.prototype.sortCategory = function(cardData) {
      var key = this.parent.cardSettings.headerField;
      var direction = this.parent.sortSettings.direction;
      switch (this.parent.sortSettings.sortBy) {
        case "DataSourceOrder":
          this.sortOrder(key, direction, cardData);
          break;
        case "Custom":
        case "Index":
          if (this.parent.sortSettings.field) {
            key = this.parent.sortSettings.field;
          }
          this.sortOrder(key, direction, cardData);
          break;
      }
      return cardData;
    };
    LayoutRender2.prototype.sortOrder = function(key, direction, cardData) {
      var isNumeric = true;
      if (this.parent.kanbanData.length > 0) {
        isNumeric = typeof this.parent.kanbanData[0]["" + key] === "number";
      }
      if (!isNumeric && this.parent.sortSettings.sortBy === "Index") {
        return cardData;
      }
      var first;
      var second;
      cardData = cardData.sort(function(firstData, secondData) {
        if (!isNumeric) {
          first = firstData["" + key].toLowerCase();
          second = secondData["" + key].toLowerCase();
        } else {
          first = firstData["" + key];
          second = secondData["" + key];
        }
        return first > second ? 1 : second > first ? -1 : 0;
      });
      if (direction === "Descending") {
        cardData.reverse();
      }
      return cardData;
    };
    LayoutRender2.prototype.documentClick = function(args) {
      if (args.target.classList.contains(SWIMLANE_OVERLAY_CLASS) && this.parent.element.querySelector("." + SWIMLANE_RESOURCE_CLASS).classList.contains("e-popup-open")) {
        this.treePopup.hide();
        removeClass([this.popupOverlay], "e-enable");
      }
      if (closest(args.target, "." + ROOT_CLASS)) {
        return;
      }
      var cards = [].slice.call(this.parent.element.querySelectorAll("." + CARD_CLASS + "." + CARD_SELECTION_CLASS));
      removeClass(cards, CARD_SELECTION_CLASS);
      this.disableAttributeSelection(cards);
    };
    LayoutRender2.prototype.disableAttributeSelection = function(cards) {
      if (cards instanceof Element) {
        cards.setAttribute("aria-selected", "false");
      } else {
        cards.forEach(function(card) {
          card.setAttribute("aria-selected", "false");
        });
      }
    };
    LayoutRender2.prototype.getColumnCards = function(data) {
      var _this = this;
      var columnData = {};
      this.columnKeys = [];
      this.parent.columns.forEach(function(column) {
        var isNumeric = typeof column.keyField === "number";
        if (isNumeric) {
          _this.columnKeys = _this.columnKeys.concat(column.keyField.toString());
        } else {
          _this.columnKeys = _this.columnKeys.concat(column.keyField.split(",").map(function(e) {
            return e.trim();
          }));
        }
        var cardData = _this.getColumnData(column.keyField, data);
        columnData[column.keyField] = cardData;
      });
      return columnData;
    };
    LayoutRender2.prototype.getSwimlaneCards = function() {
      var _this = this;
      var swimlaneData = {};
      if (this.parent.swimlaneSettings.keyField) {
        this.kanbanRows.forEach(function(row) {
          return swimlaneData[row.keyField] = _this.parent.kanbanData.filter(function(obj) {
            return !isNullOrUndefined(obj[_this.parent.keyField]) && _this.columnKeys.indexOf(obj[_this.parent.keyField].toString()) > -1 && (!obj[_this.parent.swimlaneSettings.keyField] && _this.parent.swimlaneSettings.showUnassignedRow ? "" : obj[_this.parent.swimlaneSettings.keyField]) === row.keyField;
          });
        });
      }
      return swimlaneData;
    };
    LayoutRender2.prototype.refreshHeaders = function() {
      var header = this.parent.element.querySelector("." + HEADER_CLASS);
      [].slice.call(header.children).forEach(function(child) {
        return remove(child);
      });
      this.renderHeader(header);
    };
    LayoutRender2.prototype.refreshCards = function() {
      this.parent.resetTemplates(["cardTemplate"]);
      var cards = [].slice.call(this.parent.element.querySelectorAll("." + CARD_WRAPPER_CLASS));
      cards.forEach(function(card) {
        return remove(card);
      });
      this.renderCards();
      this.wireDragEvent();
      this.parent.renderTemplates();
    };
    LayoutRender2.prototype.refresh = function() {
      var _this = this;
      var isColumnTemplateRefreshed = false;
      this.parent.columns.forEach(function(column) {
        if (column.showItemCount) {
          if (column && column.template && !isColumnTemplateRefreshed) {
            _this.refreshHeaders();
            isColumnTemplateRefreshed = true;
          }
          var countSelector = "." + HEADER_CELLS_CLASS$1 + '[data-key="' + column.keyField + '"] .' + CARD_ITEM_COUNT_CLASS;
          var itemCount = _this.parent.element.querySelector(countSelector);
          if (itemCount) {
            var isNumeric = typeof column.keyField === "number";
            var cardLength = 0;
            if (isNumeric) {
              cardLength = [].slice.call(_this.parent.element.querySelectorAll("." + CARD_CLASS + '[data-key="' + column.keyField + '"]')).length;
            } else {
              var keys2 = column.keyField.split(",");
              for (var _i = 0, keys_2 = keys2; _i < keys_2.length; _i++) {
                var key = keys_2[_i];
                var cards = [].slice.call(_this.parent.element.querySelectorAll("." + CARD_CLASS + '[data-key="' + key.trim() + '"]'));
                cardLength = cards.length + cardLength;
              }
            }
            itemCount.innerHTML = "- " + cardLength + " " + _this.parent.localeObj.getConstant("items");
          }
        }
      });
      if (this.parent.swimlaneSettings.keyField) {
        var swimlaneRows = [].slice.call(this.parent.element.querySelectorAll("." + SWIMLANE_ROW_CLASS));
        swimlaneRows.forEach(function(swimlane) {
          var swimlaneKey = swimlane.getAttribute("data-key");
          var itemCount = swimlane.querySelector("." + CARD_ITEM_COUNT_CLASS);
          if (itemCount && swimlaneKey) {
            var cards = [].slice.call(swimlane.nextElementSibling.querySelectorAll("." + CARD_CLASS));
            itemCount.innerHTML = "- " + cards.length + " " + _this.parent.localeObj.getConstant("items");
          }
        });
      }
      this.refreshValidation();
    };
    LayoutRender2.prototype.updateScrollPosition = function() {
      var _this = this;
      var content = this.parent.element.querySelector("." + CONTENT_CLASS);
      if (content) {
        if (!Browser.isIE) {
          content.scrollTo(this.parent.scrollPosition.content.left, this.parent.scrollPosition.content.top);
        } else {
          content.scrollTop = this.parent.scrollPosition.content.top;
          content.scrollLeft = this.parent.scrollPosition.content.left;
        }
      }
      var cardWrapper = [].slice.call(this.parent.element.querySelectorAll("." + CARD_WRAPPER_CLASS));
      cardWrapper.forEach(function(wrapper) {
        if (wrapper.offsetParent) {
          var scrollData = _this.parent.scrollPosition.column[wrapper.offsetParent.getAttribute("data-key")];
          if (scrollData) {
            if (!Browser.isIE) {
              wrapper.scrollTo(scrollData.left, scrollData.top);
            } else {
              wrapper.scrollTop = scrollData.top;
              wrapper.scrollLeft = scrollData.left;
            }
          }
        }
      });
    };
    LayoutRender2.prototype.renderCardBasedOnIndex = function(data, index) {
      var _this = this;
      var key = data[this.parent.keyField];
      var cardRow = this.parent.element.querySelector(".e-content-row:not(.e-swimlane-row)");
      if (this.parent.swimlaneSettings.keyField && !this.parent.isAdaptive) {
        var rowSelector = '.e-content-row.e-swimlane-row[data-key="' + data[this.parent.swimlaneSettings.keyField] + '"]';
        if (this.parent.element.querySelector(rowSelector)) {
          cardRow = this.parent.element.querySelector(rowSelector).nextElementSibling;
        } else {
          var columnIndex = this.columnKeys.indexOf(key);
          if (columnIndex !== -1 && this.parent.actionModule.hideColumnKeys.indexOf(key) === -1) {
            var index_1 = this.kanbanRows.findIndex(function(rowData) {
              return rowData["keyField"] === data[_this.parent.swimlaneSettings.keyField];
            });
            var swim = [].slice.call(this.parent.element.querySelectorAll(".e-swimlane-row"));
            var swimRow = this.parent.element.querySelector("." + CONTENT_TABLE_CLASS$1 + " tbody");
            if (swim[index_1]) {
              swimRow = swim[index_1];
            }
            this.renderSwimlaneRow(swimRow, this.kanbanRows[index_1], false);
            this.renderSingleContent(swimRow, this.kanbanRows[index_1], false);
          }
          cardRow = this.parent.element.querySelector(rowSelector).nextElementSibling;
          [].slice.call(cardRow.children).forEach(function(cell) {
            var cardWrapper = createElement("div", { className: CARD_WRAPPER_CLASS });
            cell.appendChild(cardWrapper);
            cardWrapper.appendChild(_this.renderEmptyCard());
          });
        }
      }
      if (this.parent.sortSettings.sortBy !== "Index") {
        var field_1 = this.parent.cardSettings.headerField;
        if (this.parent.sortSettings.sortBy === "Custom") {
          field_1 = this.parent.sortSettings.field;
        }
        if (isNullOrUndefined(this.parent.swimlaneSettings.keyField)) {
          index = this.getColumnData(key, this.parent.kanbanData).findIndex(function(colData) {
            return colData["" + field_1] === data["" + field_1];
          });
        } else {
          var swimlaneDatas = this.parent.getSwimlaneData(data[this.parent.swimlaneSettings.keyField]);
          index = this.getColumnData(key, swimlaneDatas).findIndex(function(colData) {
            return colData["" + field_1] === data["" + field_1];
          });
        }
      } else if (this.parent.sortSettings.sortBy === "Index" && this.parent.sortSettings.field && this.parent.sortSettings.direction === "Ascending") {
        index = data[this.parent.sortSettings.field] - 1;
      }
      if (cardRow) {
        var td = [].slice.call(cardRow.children).filter(function(e) {
          return e.getAttribute("data-key").replace(/\s/g, "").split(",").indexOf(key.toString().replace(/\s/g, "")) !== -1;
        })[0];
        var cardWrapper_2 = td.querySelector("." + CARD_WRAPPER_CLASS);
        var emptyCard = cardWrapper_2.querySelector("." + EMPTY_CARD_CLASS);
        if (emptyCard) {
          remove(emptyCard);
        }
        var cardElement_1 = this.renderCard(data);
        if (this.parent.allowDragAndDrop && td.classList.contains(DRAG_CLASS)) {
          this.parent.dragAndDropModule.wireDragEvents(cardElement_1);
          addClass([cardElement_1], DROPPABLE_CLASS);
        }
        var args = { data, element: cardElement_1, cancel: false };
        this.parent.trigger(cardRendered, args, function(cardArgs) {
          if (!cardArgs.cancel) {
            if (isNullOrUndefined(index) || cardWrapper_2.children.length === 0) {
              cardWrapper_2.appendChild(cardElement_1);
            } else {
              cardWrapper_2.insertBefore(cardElement_1, cardWrapper_2.childNodes[index]);
            }
          }
        });
      }
    };
    LayoutRender2.prototype.removeCard = function(data) {
      var cardKey = data[this.parent.cardSettings.headerField];
      var cardElement = this.parent.element.querySelector("." + CARD_CLASS + '[data-id="' + cardKey + '"]');
      this.isSelectedCard = cardElement.classList.contains(CARD_SELECTION_CLASS) ? true : false;
      var cardContainer = cardElement.parentElement;
      if (cardElement) {
        remove(cardElement);
      }
      if (cardContainer.querySelectorAll("." + CARD_CLASS + ":not(." + CLONED_CARD_CLASS + ")").length === 0) {
        cardContainer.appendChild(this.renderEmptyCard());
      }
    };
    LayoutRender2.prototype.wireEvents = function() {
      var _this = this;
      EventHandler.add(this.parent.element, "click", this.parent.actionModule.clickHandler, this.parent.actionModule);
      EventHandler.add(this.parent.element, "dblclick", this.parent.actionModule.doubleClickHandler, this.parent.actionModule);
      EventHandler.add(document, Browser.touchStartEvent, this.documentClick, this);
      var content = this.parent.element.querySelector("." + CONTENT_CLASS);
      EventHandler.add(content, "scroll", this.onContentScroll, this);
      var cardWrapper = [].slice.call(this.parent.element.querySelectorAll("." + CARD_WRAPPER_CLASS));
      cardWrapper.forEach(function(wrapper) {
        if (_this.parent.isInitialRender && wrapper.offsetParent) {
          _this.parent.scrollPosition.column[wrapper.offsetParent.getAttribute("data-key")] = { left: 0, top: 0 };
        }
        EventHandler.add(wrapper, "scroll", _this.onColumnScroll, _this);
      });
      if (this.parent.isAdaptive) {
        this.parent.touchModule.wireTouchEvents();
        content.scrollLeft = this.scrollLeft;
      }
      this.wireDragEvent();
    };
    LayoutRender2.prototype.unWireEvents = function() {
      var _this = this;
      EventHandler.remove(this.parent.element, "click", this.parent.actionModule.clickHandler);
      EventHandler.remove(this.parent.element, "dblclick", this.parent.actionModule.doubleClickHandler);
      EventHandler.remove(document, Browser.touchStartEvent, this.documentClick);
      var content = this.parent.element.querySelector("." + CONTENT_CLASS);
      if (content) {
        EventHandler.remove(content, "scroll", this.onContentScroll);
        if (this.parent.allowDragAndDrop) {
          this.unWireDragEvent();
        }
      }
      var cardWrapper = [].slice.call(this.parent.element.querySelectorAll("." + CARD_WRAPPER_CLASS));
      cardWrapper.forEach(function(wrapper) {
        EventHandler.remove(wrapper, "scroll", _this.onColumnScroll);
      });
      if (this.parent.isAdaptive) {
        this.parent.touchModule.unWireTouchEvents();
      }
    };
    LayoutRender2.prototype.wireDragEvent = function() {
      var _this = this;
      if (this.parent.allowDragAndDrop) {
        var cards = [].slice.call(this.parent.element.querySelectorAll("." + CONTENT_CELLS_CLASS + "." + DRAG_CLASS + " ." + CARD_CLASS));
        addClass(cards, DROPPABLE_CLASS);
        cards.forEach(function(card) {
          return _this.parent.dragAndDropModule.wireDragEvents(card);
        });
      }
    };
    LayoutRender2.prototype.unWireDragEvent = function() {
      var _this = this;
      var cards = [].slice.call(this.parent.element.querySelectorAll("." + CONTENT_CELLS_CLASS + "." + DRAG_CLASS + " ." + CARD_CLASS));
      removeClass(cards, DROPPABLE_CLASS);
      cards.forEach(function(card) {
        return _this.parent.dragAndDropModule.unWireDragEvents(card);
      });
    };
    LayoutRender2.prototype.destroy = function() {
      this.parent.resetTemplates();
      this.parent.off(dataReady$1, this.initRender);
      this.parent.off(contentReady$1, this.scrollUiUpdate);
      this.unWireEvents();
      var header = this.parent.element.querySelector("." + HEADER_CLASS);
      if (header) {
        remove(header);
      }
      var content = this.parent.element.querySelector("." + CONTENT_CLASS);
      if (content) {
        remove(content);
      }
      if (this.treeViewObj) {
        this.treeViewObj.destroy();
        this.treeViewObj = null;
      }
      if (this.treePopup) {
        this.treePopup.destroy();
        this.treePopup = null;
      }
      var swimlaneToolBarEle = this.parent.element.querySelector("." + SWIMLANE_HEADER_CLASS);
      if (swimlaneToolBarEle) {
        remove(swimlaneToolBarEle);
      }
      var swimlaneContent = this.parent.element.querySelector("." + SWIMLANE_CONTENT_CLASS);
      if (swimlaneContent) {
        remove(swimlaneContent);
      }
    };
    return LayoutRender2;
  }(MobileLayout)
);
var __extends$p = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$f = globalThis && globalThis.__decorate || function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i = decorators.length - 1; i >= 0; i--)
      if (d = decorators[i])
        r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var Kanban$1 = (
  /** @class */
  function(_super) {
    __extends$p(Kanban2, _super);
    function Kanban2(options, element2) {
      var _this = _super.call(this, options, element2) || this;
      _this.needsID = true;
      return _this;
    }
    Kanban2.prototype.preRender = function() {
      this.isAdaptive = Browser.isDevice;
      this.kanbanData = [];
      if (!this.enablePersistence || !this.swimlaneToggleArray) {
        this.swimlaneToggleArray = [];
      }
      this.activeCardData = { data: null, element: null };
      var defaultLocale = {
        items: "items",
        min: "Min",
        max: "Max",
        cardsSelected: "Cards Selected",
        addTitle: "Add New Card",
        editTitle: "Edit Card Details",
        deleteTitle: "Delete Card",
        deleteContent: "Are you sure you want to delete this card?",
        save: "Save",
        delete: "Delete",
        cancel: "Cancel",
        yes: "Yes",
        no: "No",
        close: "Close",
        noCard: "No cards to display",
        unassigned: "Unassigned"
      };
      this.localeObj = new L10n(this.getModuleName(), defaultLocale, this.locale);
      this.scrollPosition = { content: { left: 0, top: 0 }, column: {} };
      this.isInitialRender = true;
    };
    Kanban2.prototype.requiredModules = function() {
      var modules = [];
      return modules;
    };
    Kanban2.prototype.getPersistData = function() {
      if (this.dataSource.length > 0) {
        return this.addOnPersist(["columns", "dataSource", "swimlaneToggleArray"]);
      } else {
        return this.addOnPersist(["columns", "kanbanData", "swimlaneToggleArray"]);
      }
    };
    Kanban2.prototype.getModuleName = function() {
      return "kanban";
    };
    Kanban2.prototype.render = function() {
      var addClasses = [ROOT_CLASS];
      var removeClasses = [];
      if (this.enableRtl) {
        addClasses.push(RTL_CLASS$1);
      } else {
        removeClasses.push(RTL_CLASS$1);
      }
      if (this.isAdaptive) {
        addClasses.push(DEVICE_CLASS$1);
      } else {
        removeClasses.push(DEVICE_CLASS$1);
      }
      if (this.cssClass) {
        addClasses.push(this.cssClass);
      }
      this.element.setAttribute("role", "main");
      classList(this.element, addClasses, removeClasses);
      this.element.style.width = formatUnit(this.width);
      this.element.style.height = formatUnit(this.height);
      createSpinner({ target: this.element });
      this.showSpinner();
      this.initializeModules();
    };
    Kanban2.prototype.onPropertyChanged = function(newProp, oldProp) {
      for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {
        var prop = _a[_i];
        switch (prop) {
          case "cssClass":
            if (oldProp.cssClass) {
              removeClass([this.element], oldProp.cssClass);
            }
            if (newProp.cssClass) {
              addClass([this.element], newProp.cssClass);
            }
            break;
          case "enableRtl":
          case "locale":
            this.refresh();
            break;
          case "width":
            this.element.style.width = formatUnit(newProp.width);
            this.element.querySelector("." + HEADER_CLASS).firstElementChild.style.width = "auto";
            this.notify(contentReady$1, {});
            break;
          case "height":
            this.element.style.height = formatUnit(newProp.height);
            this.element.querySelector("." + CONTENT_CLASS).style.height = "auto";
            this.notify(contentReady$1, {});
            break;
          case "dataSource":
          case "query":
            if (this.dataModule) {
              this.dataModule.setState({ isDataChanged: false });
            }
            this.dataModule = new Data$1(this);
            break;
          case "columns":
          case "constraintType":
            this.notify(dataReady$1, { processedData: this.kanbanData });
            break;
          case "swimlaneSettings":
            this.onSwimlaneSettingsPropertyChanged(newProp.swimlaneSettings, oldProp.swimlaneSettings);
            break;
          case "cardSettings":
            this.onCardSettingsPropertyChanged(newProp.cardSettings, oldProp.cardSettings);
            break;
          case "allowDragAndDrop":
            if (newProp.allowDragAndDrop) {
              this.layoutModule.wireDragEvent();
            } else {
              this.layoutModule.unWireDragEvent();
            }
            break;
          case "enableTooltip":
            if (this.tooltipModule) {
              this.tooltipModule.destroy();
              this.tooltipModule = null;
            }
            if (newProp.enableTooltip) {
              this.tooltipModule = new KanbanTooltip(this);
              this.layoutModule.refreshCards();
            }
            break;
          case "dialogSettings":
            if (newProp.dialogSettings) {
              this.dialogModule = new KanbanDialog(this);
            }
            break;
          case "allowKeyboard":
            if (this.keyboardModule) {
              this.keyboardModule.destroy();
              this.keyboardModule = null;
            }
            if (newProp.allowKeyboard) {
              this.keyboardModule = new Keyboard(this);
            }
            break;
          case "stackedHeaders":
            this.layoutModule.refreshHeaders();
            break;
          case "sortSettings":
            this.notify(dataReady$1, { processedData: this.kanbanData });
            break;
        }
      }
    };
    Kanban2.prototype.onSwimlaneSettingsPropertyChanged = function(newProp, _oldProp) {
      for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {
        var prop = _a[_i];
        switch (prop) {
          case "keyField":
          case "textField":
          case "showEmptyRow":
          case "showItemCount":
          case "template":
          case "sortDirection":
            this.notify(dataReady$1, { processedData: this.kanbanData });
            break;
          case "enableFrozenRows":
            if (this.layoutModule.frozenSwimlaneRow && !this.swimlaneSettings.enableFrozenRows) {
              this.layoutModule.removeFrozenRows();
            }
            break;
        }
      }
    };
    Kanban2.prototype.onCardSettingsPropertyChanged = function(newProp, _oldProp) {
      var cards = [];
      for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {
        var prop = _a[_i];
        switch (prop) {
          case "showHeader":
          case "headerField":
          case "contentField":
          case "template":
          case "tagsField":
          case "grabberField":
          case "footerCssField":
            this.layoutModule.refreshCards();
            break;
          case "selectionType":
            cards = this.getSelectedCards();
            if (cards.length > 0) {
              removeClass(cards, CARD_SELECTION_CLASS);
              this.layoutModule.disableAttributeSelection(cards);
            }
            break;
        }
      }
    };
    Kanban2.prototype.initializeModules = function() {
      this.dataModule = new Data$1(this);
      this.layoutModule = new LayoutRender(this);
      if (this.allowKeyboard) {
        this.keyboardModule = new Keyboard(this);
      }
      this.actionModule = new Action(this);
      this.crudModule = new Crud$1(this);
      this.dragAndDropModule = new DragAndDrop$1(this);
      this.dialogModule = new KanbanDialog(this);
      if (this.enableTooltip) {
        this.tooltipModule = new KanbanTooltip(this);
      }
      if (Browser.isDevice || Browser.isTouch) {
        this.touchModule = new KanbanTouch(this);
      }
    };
    Kanban2.prototype.renderTemplates = function() {
      if (this.isReact) {
        this.renderReactTemplates();
      }
    };
    Kanban2.prototype.resetTemplates = function(templates) {
      if (this.isReact) {
        this.clearTemplate(templates);
      }
    };
    Kanban2.prototype.destroyModules = function() {
      if (this.layoutModule) {
        this.layoutModule.destroy();
        this.layoutModule = null;
      }
      if (this.keyboardModule) {
        this.keyboardModule.destroy();
        this.keyboardModule = null;
      }
      if (this.touchModule) {
        this.touchModule.destroy();
        this.touchModule = null;
      }
      this.dialogModule = null;
      this.actionModule = null;
      this.crudModule = null;
      this.dataModule = null;
      this.dragAndDropModule = null;
    };
    Kanban2.prototype.templateParser = function(template) {
      if (template) {
        try {
          if (document.querySelectorAll(template).length) {
            return compile$1(document.querySelector(template).innerHTML.trim());
          } else {
            return compile$1(template);
          }
        } catch (error) {
          return compile$1(template);
        }
      }
      return void 0;
    };
    Kanban2.prototype.getCardDetails = function(target) {
      var _this = this;
      var isNumeric = typeof this.kanbanData[0][this.cardSettings.headerField] === "number";
      var targetId = isNumeric ? parseInt(target.getAttribute("data-id"), 10) : target.getAttribute("data-id");
      var cardObj = this.kanbanData.filter(function(data) {
        return data[_this.cardSettings.headerField] === targetId;
      })[0];
      return cardObj;
    };
    Kanban2.prototype.getColumnData = function(columnKey, dataSource) {
      return this.layoutModule.getColumnCards(dataSource)["" + columnKey] || [];
    };
    Kanban2.prototype.getSwimlaneData = function(keyField) {
      return this.layoutModule.getSwimlaneCards()["" + keyField] || [];
    };
    Kanban2.prototype.getSelectedCards = function() {
      return [].slice.call(this.element.querySelectorAll("." + CARD_CLASS + "." + CARD_SELECTION_CLASS));
    };
    Kanban2.prototype.showSpinner = function() {
      showSpinner(this.element);
    };
    Kanban2.prototype.hideSpinner = function() {
      hideSpinner(this.element);
    };
    Kanban2.prototype.openDialog = function(action, data) {
      this.dialogModule.openDialog(action, data);
    };
    Kanban2.prototype.closeDialog = function() {
      this.dialogModule.closeDialog();
    };
    Kanban2.prototype.addCard = function(cardData, index) {
      this.crudModule.addCard(cardData, index);
    };
    Kanban2.prototype.updateCard = function(cardData, index) {
      this.crudModule.updateCard(cardData, index);
    };
    Kanban2.prototype.deleteCard = function(cardData) {
      this.crudModule.deleteCard(cardData);
    };
    Kanban2.prototype.addColumn = function(columnOptions, index) {
      this.actionModule.addColumn(columnOptions, index);
    };
    Kanban2.prototype.deleteColumn = function(index) {
      this.actionModule.deleteColumn(index);
    };
    Kanban2.prototype.showColumn = function(key) {
      this.actionModule.showColumn(key);
    };
    Kanban2.prototype.hideColumn = function(key) {
      this.actionModule.hideColumn(key);
    };
    Kanban2.prototype.refreshUI = function(args, index) {
      index = index ? index : 0;
      this.dataModule.refreshUI(args, index);
    };
    Kanban2.prototype.refreshHeader = function() {
      this.resetTemplates(["columnTemplate"]);
      if (this.layoutModule) {
        this.layoutModule.refreshHeaders();
      }
      this.renderTemplates();
    };
    Kanban2.prototype.destroy = function() {
      this.destroyModules();
      [].slice.call(this.element.childNodes).forEach(function(node) {
        detach(node);
      });
      var removeClasses = [ROOT_CLASS];
      if (this.cssClass) {
        removeClasses = removeClasses.concat(this.cssClass.split(" "));
      }
      removeClass([this.element], removeClasses);
      _super.prototype.destroy.call(this);
    };
    __decorate$f([
      Property()
    ], Kanban2.prototype, "cssClass", void 0);
    __decorate$f([
      Property("auto")
    ], Kanban2.prototype, "width", void 0);
    __decorate$f([
      Property("auto")
    ], Kanban2.prototype, "height", void 0);
    __decorate$f([
      Property([])
    ], Kanban2.prototype, "dataSource", void 0);
    __decorate$f([
      Property()
    ], Kanban2.prototype, "query", void 0);
    __decorate$f([
      Property()
    ], Kanban2.prototype, "keyField", void 0);
    __decorate$f([
      Property("Column")
    ], Kanban2.prototype, "constraintType", void 0);
    __decorate$f([
      Property([])
    ], Kanban2.prototype, "externalDropId", void 0);
    __decorate$f([
      Collection([], Columns)
    ], Kanban2.prototype, "columns", void 0);
    __decorate$f([
      Property(true)
    ], Kanban2.prototype, "allowKeyboard", void 0);
    __decorate$f([
      Property(true)
    ], Kanban2.prototype, "enableHtmlSanitizer", void 0);
    __decorate$f([
      Collection([], StackedHeaders)
    ], Kanban2.prototype, "stackedHeaders", void 0);
    __decorate$f([
      Complex({}, SwimlaneSettings)
    ], Kanban2.prototype, "swimlaneSettings", void 0);
    __decorate$f([
      Complex({}, CardSettings)
    ], Kanban2.prototype, "cardSettings", void 0);
    __decorate$f([
      Complex({}, SortSettings)
    ], Kanban2.prototype, "sortSettings", void 0);
    __decorate$f([
      Complex({}, DialogSettings)
    ], Kanban2.prototype, "dialogSettings", void 0);
    __decorate$f([
      Property(true)
    ], Kanban2.prototype, "allowDragAndDrop", void 0);
    __decorate$f([
      Property(false)
    ], Kanban2.prototype, "enableTooltip", void 0);
    __decorate$f([
      Property(false)
    ], Kanban2.prototype, "showEmptyColumn", void 0);
    __decorate$f([
      Property(false)
    ], Kanban2.prototype, "enablePersistence", void 0);
    __decorate$f([
      Property()
    ], Kanban2.prototype, "tooltipTemplate", void 0);
    __decorate$f([
      Event$1()
    ], Kanban2.prototype, "actionBegin", void 0);
    __decorate$f([
      Event$1()
    ], Kanban2.prototype, "actionComplete", void 0);
    __decorate$f([
      Event$1()
    ], Kanban2.prototype, "actionFailure", void 0);
    __decorate$f([
      Event$1()
    ], Kanban2.prototype, "created", void 0);
    __decorate$f([
      Event$1()
    ], Kanban2.prototype, "dataBinding", void 0);
    __decorate$f([
      Event$1()
    ], Kanban2.prototype, "dataBound", void 0);
    __decorate$f([
      Event$1()
    ], Kanban2.prototype, "cardClick", void 0);
    __decorate$f([
      Event$1()
    ], Kanban2.prototype, "cardDoubleClick", void 0);
    __decorate$f([
      Event$1()
    ], Kanban2.prototype, "queryCellInfo", void 0);
    __decorate$f([
      Event$1()
    ], Kanban2.prototype, "cardRendered", void 0);
    __decorate$f([
      Event$1()
    ], Kanban2.prototype, "dragStart", void 0);
    __decorate$f([
      Event$1()
    ], Kanban2.prototype, "drag", void 0);
    __decorate$f([
      Event$1()
    ], Kanban2.prototype, "dragStop", void 0);
    __decorate$f([
      Event$1()
    ], Kanban2.prototype, "dialogOpen", void 0);
    __decorate$f([
      Event$1()
    ], Kanban2.prototype, "dialogClose", void 0);
    __decorate$f([
      Event$1()
    ], Kanban2.prototype, "dataStateChange", void 0);
    __decorate$f([
      Event$1()
    ], Kanban2.prototype, "dataSourceChanged", void 0);
    Kanban2 = __decorate$f([
      NotifyPropertyChanges
    ], Kanban2);
    return Kanban2;
  }(Component)
);
function _interopRequireWildcard(obj) {
  if (obj && obj.__esModule) {
    return obj;
  } else {
    var newObj = {};
    if (obj != null) {
      for (var key in obj) {
        if (Object.prototype.hasOwnProperty.call(obj, key))
          newObj["" + key] = obj["" + key];
      }
    }
    newObj.default = obj;
    return newObj;
  }
}
var curVue = _interopRequireWildcard(Vue);
var isExecute = parseInt(curVue["version"]) > 2 ? false : true, aVue = !isExecute ? curVue : curVue["default"]["default"] ? curVue["default"]["default"] : curVue["default"], gh = curVue["h"];
var vueDefineComponent = function(options) {
  return !isExecute ? aVue["defineComponent"](options) : aVue["extend"](options);
};
var ComponentBase = vueDefineComponent({
  name: "ComponentBase",
  data: function() {
    return {
      tagMapper: {},
      tagNameMapper: {},
      hasInjectedModules: false,
      hasChildDirective: false,
      childDirObjects: "",
      propKeys: {},
      isDecorator: false
    };
  },
  created: function() {
    var _this = this;
    if (this.ej2Instance) {
      this.ej2Instances = this.isVue3 ? aVue.toRaw(this.ej2Instance) : this.ej2Instance;
    }
    if (!this.propKeys) {
      return;
    }
    var _loop_1 = function(prop2) {
      this_1.ej2Instances.addEventListener(prop2, function(args) {
        _this.$emit(prop2, args);
      });
    };
    var this_1 = this;
    for (var _i = 0, _a = this.propKeys; _i < _a.length; _i++) {
      var prop = _a[_i];
      _loop_1(prop);
    }
    var injectables = getValue("$root.$options.provide", this);
    var vueInjectables = getValue("$parent.$options.provide", this);
    vueInjectables = !isNullOrUndefined(vueInjectables) ? vueInjectables : getValue("$.parent.provides", this);
    if (this.hasInjectedModules && !isExecute) {
      var prevModule = [];
      if (injectables && injectables.managed) {
        this.isDecorator = true;
        prevModule = this.getInjectedServices() || [];
      } else if (injectables) {
        prevModule = injectables[this.ej2Instances.getModuleName()] || [];
      } else if (vueInjectables) {
        prevModule = this.getInjectedServices() || [];
      }
      var curModule = this.ej2Instances.getInjectedModules() || [];
      for (var _b = 0, curModule_1 = curModule; _b < curModule_1.length; _b++) {
        var mod = curModule_1[_b];
        if (prevModule.indexOf(mod) === -1) {
          prevModule.push(mod);
        }
      }
      this.ej2Instances.injectedModules = prevModule;
    }
  },
  mounted: function() {
    var cusEle = this.$el ? this.$el.querySelectorAll("div.e-directive") : null;
    if (!isExecute && cusEle) {
      for (var i = 0; i < cusEle.length; i++) {
        cusEle[parseInt(i.toString(), 10)].parentElement && cusEle[parseInt(i.toString(), 10)].parentElement.removeChild(cusEle[parseInt(i.toString(), 10)]);
      }
    }
    this.ej2Instances.isVue = true;
    this.ej2Instances.isVue3 = this.isVue3;
    this.ej2Instances.vueInstance = this;
    if (this.isVue3) {
      this.ej2Instances.ej2Instances = this.ej2Instances;
      this.ej2Instances.referModels = this.models;
      this.setModelValue();
    }
    this.ej2Instances.appendTo(this.$el);
  },
  updated: function() {
    if (this.isVue3) {
      this.setModelValue();
    }
    if (this.hasChildDirective) {
      var childKey = {};
      this.fetchChildPropValues(childKey);
      var curChildDir = JSON.stringify(childKey);
      if (this.childDirObjects !== curChildDir) {
        this.childDirObjects = curChildDir;
        this.assignValueToWrapper(childKey, false);
      }
    }
  },
  beforeDestroy: function() {
    this.destroyComponent();
  },
  beforeUnmount: function() {
    this.destroyComponent();
  },
  methods: {
    setModelValue: function() {
      if (!isNullOrUndefined(this.modelValue) || !isNullOrUndefined(this.$attrs.modelValue)) {
        var key = this.models.toString().match(/checked|value/) || [];
        var propKey = key[0];
        if (!isNullOrUndefined(propKey)) {
          this.ej2Instances["" + propKey] = !isNullOrUndefined(this.modelValue) ? this.modelValue : this.$attrs.modelValue;
        }
      }
    },
    updated: function() {
      if (this.isVue3) {
        this.setModelValue();
      }
      if (this.hasChildDirective) {
        var childKey = {};
        this.fetchChildPropValues(childKey);
        var curChildDir = JSON.stringify(childKey);
        if (this.childDirObjects !== curChildDir) {
          this.childDirObjects = curChildDir;
          this.assignValueToWrapper(childKey, false);
        }
      }
    },
    getInjectedServices: function() {
      var ret = [];
      var provide2;
      if (this.$root && this.isDecorator) {
        provide2 = getValue("$root.$options.provide", this);
      } else if (this.$vnode) {
        provide2 = getValue("$vnode.context.$options.provide", this);
      } else if (this.$parent) {
        provide2 = getValue("$parent.$options.provide", this);
      }
      if (isNullOrUndefined(provide2) && !isNullOrUndefined(this.$)) {
        provide2 = getValue("$.parent.provides", this);
      }
      if (provide2) {
        var injectables = provide2;
        if (typeof provide2 === "function") {
          if (provide2.managed) {
            var provideKey = provide2.managed;
            var provideValue = Object.keys(provideKey);
            var key = void 0;
            if (this.$root && this.isDecorator) {
              key = Object.keys(this.$root);
            } else if (this.$vnode) {
              key = Object.keys(this.$vnode.context);
            } else if (this.$parent) {
              key = Object.keys(this.$parent);
            }
            for (var i = 0; i < provideValue.length; i++) {
              for (var j = 0; j < key.length; j++) {
                if (key[parseInt(j.toString(), 10)].indexOf(provideValue[parseInt(i.toString(), 10)]) !== -1) {
                  if (this.$root && this.isDecorator) {
                    provideKey[provideValue[parseInt(j.toString(), 10)]] = this.$root[key[parseInt(i.toString(), 10)]];
                  } else if (this.$vnode) {
                    provideKey[provideValue[parseInt(i.toString(), 10)]] = this.$vnode.context[key[parseInt(j.toString(), 10)]];
                  } else if (this.$parent) {
                    provideKey[provideValue[parseInt(i.toString(), 10)]] = this.$parent[key[parseInt(j.toString(), 10)]];
                  }
                  injectables = provideKey;
                }
              }
            }
          } else if (this.$vnode) {
            injectables = this.$vnode.context.$options.provide();
          } else if (this.$parent) {
            injectables = this.$parent.$options.provide();
          }
        }
        ret = injectables[this.ej2Instances.getModuleName()] || [];
      }
      this.isDecorator = false;
      return ret;
    },
    destroyComponent: function() {
      var tempBeforeDestroyThis = this;
      tempBeforeDestroyThis.ej2Instances.destroy();
      tempBeforeDestroyThis.$el.style.visibility = "hidden";
      tempBeforeDestroyThis = null;
    },
    bindProperties: function() {
      var options = {};
      for (var _i = 0, _a = this.propKeys; _i < _a.length; _i++) {
        var prop = _a[_i];
        if (!isNullOrUndefined(this["" + prop])) {
          options["" + prop] = this["" + prop];
        } else if (this[0] && !isNullOrUndefined(this[0][0]) && !isNullOrUndefined(this[0][0]["" + prop])) {
          options["" + prop] = this[0][0]["" + prop];
        }
      }
      if (this.hasChildDirective) {
        this.fetchChildPropValues(options);
      }
      if (this.hasInjectedModules) {
        var prevModule = this.getInjectedServices() || [];
        var curModule = this.ej2Instances.getInjectedModules() || [];
        for (var _b = 0, curModule_2 = curModule; _b < curModule_2.length; _b++) {
          var mod = curModule_2[_b];
          if (prevModule.indexOf(mod) === -1) {
            prevModule.push(mod);
          }
        }
        this.ej2Instances.injectedModules = prevModule;
      }
      this.assignValueToWrapper(options);
    },
    assignValueToWrapper: function(option, silent) {
      this.ej2Instances.setProperties(extend({}, {}, option, true), isNullOrUndefined(silent) ? true : silent);
    },
    fetchChildPropValues: function(childOption) {
      var dirProps = {};
      if (!this.isVue3) {
        dirProps = this.getDirectiveValues(this.$slots.default, this.tagMapper || {}, this.tagNameMapper || {});
      } else {
        var propRef = void 0;
        if (this[0] && this[0][1].slots.default) {
          propRef = this[0][1].slots.default();
        } else if (this && this.$ && this.$.slots && this.$.slots.default) {
          propRef = this.$.slots.default();
        }
        if (propRef) {
          for (var i = 0; i < propRef.length; i++) {
            if (propRef[parseInt(i.toString(), 10)].type.methods || propRef[parseInt(i.toString(), 10)].type === "e-seriescollection") {
              var key = propRef[parseInt(i.toString(), 10)].type === "e-seriescollection" ? "series-collection" : propRef[parseInt(i.toString(), 10)].type.methods.getTag().replace("e-", "");
              var ref2 = this.resolveArrayDirectives(propRef[parseInt(i.toString(), 10)].children, key);
              var splitKeys = key.split("-");
              var controlName = this.ej2Instances.getModuleName().toLowerCase();
              var keyRef = splitKeys.length > 1 && controlName.indexOf(splitKeys[0]) > -1 ? splitKeys[1] : splitKeys[0];
              keyRef = keyRef.replace(controlName, "");
              if (controlName == "splitter" && keyRef == "panes") {
                keyRef = "paneSettings";
              } else if (controlName == "bulletchart" && keyRef == "range") {
                keyRef = "ranges";
              } else if (controlName == "schedule" && keyRef == "header") {
                keyRef = "headerRows";
              }
              dirProps["" + keyRef] = ref2["" + key];
            }
          }
        } else {
          return;
        }
      }
      if (!this.childDirObjects) {
        this.childDirObjects = JSON.stringify(dirProps);
      }
      for (var _i = 0, _a = Object.keys(dirProps); _i < _a.length; _i++) {
        var dirProp = _a[_i];
        childOption["" + dirProp] = dirProps["" + dirProp];
      }
    },
    resolveArrayDirectives: function(slots, tagName) {
      var slot = [];
      var innerDirValues;
      slot = slots.default ? slots.default() : slots;
      var items = {};
      items["" + tagName] = [];
      var _loop_2 = function(childSlot2) {
        var tempObj = {};
        var tagRef = childSlot2.type.methods ? childSlot2.type.methods.getTag() : tagName;
        if (childSlot2.children) {
          var key = void 0;
          innerDirValues = this_2.resolveComplexDirs(childSlot2.children, this_2.tagMapper["e-" + tagName], tagRef);
          if (innerDirValues.length) {
            tempObj = innerDirValues;
          } else {
            for (var i = 0; i < Object.keys(innerDirValues).length; i++) {
              key = Object.keys(innerDirValues)[parseInt(i.toString(), 10)];
              tempObj["" + key] = innerDirValues["" + key];
            }
          }
        }
        if (childSlot2.props) {
          Object.keys(childSlot2.props).forEach(function(key2) {
            var propName = key2.replace(/-[a-z]/g, function(e) {
              return e[1].toUpperCase();
            });
            if (propName) {
              tempObj["" + propName] = childSlot2.props["" + key2];
            }
          });
        }
        if (/[s]\b/.test(tagRef) && innerDirValues && (!/[s]\b/.test(tagName) || innerDirValues.length)) {
          Array.isArray(tempObj) ? tempObj.forEach(function(item) {
            items["" + tagName].push(item);
          }) : items["" + tagName].push(tempObj);
        } else if (tempObj && Object.keys(tempObj).length !== 0) {
          items["" + tagName].push(tempObj);
        }
      };
      var this_2 = this;
      for (var _i = 0, slot_1 = slot; _i < slot_1.length; _i++) {
        var childSlot = slot_1[_i];
        _loop_2(childSlot);
      }
      return items;
    },
    resolveComplexDirs: function(slots, tagObject, tagName) {
      var slot = [];
      var innerDirValues;
      slot = slots.default ? slots.default() : slots;
      var items = {};
      var _loop_3 = function(childSlot2) {
        var tagRef = void 0;
        var tag = void 0;
        if (tagObject["" + tagName]) {
          tagRef = Object.keys(tagObject["" + tagName]);
          tag = tagRef.find(function(key) {
            return tagObject["" + tagName]["" + key] === childSlot2.type.methods.getTag().replace(/[s]\b/, "");
          });
          var moduleName = this_3.ej2Instances.getModuleName().toLowerCase();
          tag = tag ? tag.replace("e-", "") : childSlot2.type.methods.getTag().replace(moduleName === "ribbon" ? "e-ribbon-" : "e-", "");
          if (this_3.ej2Instances.getModuleName().toLowerCase() == "diagram" && tag.indexOf("annotations") != -1) {
            tag = "annotations";
          }
        }
        if (childSlot2.children) {
          innerDirValues = this_3.resolveComplexInnerDirs(childSlot2.children, tagObject["" + tagName], childSlot2.type.methods.getTag());
          if (!items["" + tag]) {
            items["" + tag] = [];
          }
          if (innerDirValues.length > 1) {
            items["" + tag] = innerDirValues;
          } else {
            items["" + tag].push(innerDirValues);
          }
        }
        if (childSlot2.props) {
          childSlot2.props = this_3.getCamelCaseProps(childSlot2.props);
        }
        if (slot.length > 1) {
          items = Object.keys(items).length == 0 && !items.length ? [] : items;
          if (childSlot2.props) {
            items.push(childSlot2.props);
          }
        } else {
          items = childSlot2.props ? Object.assign(items, childSlot2.props) : items;
        }
      };
      var this_3 = this;
      for (var _i = 0, slot_2 = slot; _i < slot_2.length; _i++) {
        var childSlot = slot_2[_i];
        _loop_3(childSlot);
      }
      return items;
    },
    resolveComplexInnerDirs: function(slots, tagObject, tagName) {
      var slot = [];
      var innerDirValues;
      slot = slots.default ? slots.default() : slots;
      var items = slot.length > 1 ? [] : {};
      for (var _i = 0, slot_3 = slot; _i < slot_3.length; _i++) {
        var childSlot = slot_3[_i];
        var isRibbon = this.ej2Instances.getModuleName().toLowerCase() == "ribbon";
        var tag = childSlot.type.methods.getTag().replace(isRibbon ? "e-ribbon-" : "e-", "");
        if (childSlot.children) {
          innerDirValues = this.resolveMultilevelComplexInnerDirs(childSlot.children, tagObject["" + tagName], childSlot.type.methods.getTag());
          if (/[s]\b/.test(tag) || slot.length > 1) {
            if (/[s]\b/.test(tag)) {
              items["" + tag] = !items["" + tag] ? [] : items["" + tag];
              if (innerDirValues.length) {
                items["" + tag] = innerDirValues;
              } else {
                items["" + tag].push(innerDirValues);
              }
            } else if (innerDirValues && !(isRibbon && innerDirValues.hasOwnProperty("collections"))) {
              items.push(innerDirValues);
            }
          } else {
            items = innerDirValues ? innerDirValues : items;
          }
        }
        if (childSlot.props) {
          childSlot.props = this.getCamelCaseProps(childSlot.props);
        }
        if (slot.length > 1 && childSlot.props) {
          if (isRibbon && innerDirValues && innerDirValues.hasOwnProperty("collections")) {
            innerDirValues = childSlot.props ? Object.assign(innerDirValues, childSlot.props) : innerDirValues;
            items.push(innerDirValues);
          } else if (items.length >= 0) {
            items.push(childSlot.props);
          } else {
            items = childSlot.props ? Object.assign(items, childSlot.props) : items;
          }
        } else {
          items = childSlot.props ? Object.assign(items, childSlot.props) : items;
        }
      }
      return items;
    },
    resolveMultilevelComplexInnerDirs: function(slots, tagObject, tagName) {
      var slot = [];
      var innerDirValues;
      slot = slots.default ? slots.default() : slots;
      var items = slot.length > 1 ? [] : {};
      for (var _i = 0, slot_4 = slot; _i < slot_4.length; _i++) {
        var childSlot = slot_4[_i];
        var moduleName = this.ej2Instances.getModuleName().toLowerCase();
        var tag = childSlot.type.methods.getTag().replace(moduleName === "ribbon" ? "e-ribbon-" : "e-", "");
        if (childSlot.children) {
          innerDirValues = this.resolveComplexInnerDirs(childSlot.children, tagObject["" + tagName], childSlot.type.methods.getTag());
        }
        if (childSlot.props) {
          childSlot.props = this.getCamelCaseProps(childSlot.props);
        }
        if (/[s]\b/.test(tag)) {
          items["" + tag] = !items["" + tag] ? [] : items["" + tag];
          if (innerDirValues.length) {
            items["" + tag] = innerDirValues;
          } else {
            items["" + tag].push(innerDirValues);
          }
          if (childSlot.props) {
            items["" + tag].push(childSlot.props);
          }
        } else {
          items = innerDirValues;
          items = childSlot.props ? Object.assign(items, childSlot.props) : items;
        }
      }
      return items;
    },
    getDirectiveValues: function(tagDirectives, tagMapper, tagNameMapper) {
      var keyTags = Object.keys(tagMapper);
      var dir = {};
      if (tagDirectives) {
        for (var _i = 0, tagDirectives_1 = tagDirectives; _i < tagDirectives_1.length; _i++) {
          var tagDirective = tagDirectives_1[_i];
          if (tagDirective.componentOptions && tagDirective.componentOptions.children && tagDirective.componentOptions.tag || tagDirective.tag === "e-seriescollection" && tagDirective.children) {
            var dirTag = tagDirective.componentOptions ? tagDirective.componentOptions.tag : tagDirective.tag;
            dirTag = dirTag === "e-seriescollection" ? "e-seriesCollection" : dirTag;
            if (keyTags.indexOf(dirTag) !== -1) {
              var tagName = tagNameMapper["" + dirTag] ? tagNameMapper["" + dirTag] : dirTag;
              dir[tagName.replace("e-", "")] = [];
              var children = tagDirective.componentOptions ? tagDirective.componentOptions.children : tagDirective.children;
              for (var _a = 0, children_1 = children; _a < children_1.length; _a++) {
                var tagDirChild = children_1[_a];
                var retObj = this.getVNodeValue(tagDirChild, tagMapper["" + dirTag], tagNameMapper);
                if (Object.keys(retObj).length !== 0) {
                  dir[tagName.replace("e-", "")].push(retObj);
                }
              }
            }
          }
        }
      }
      return dir;
    },
    getMultiLevelDirValue: function(tagDirectories, tagKey, tagNameMapper) {
      var mulObj = {};
      for (var _i = 0, tagDirectories_1 = tagDirectories; _i < tagDirectories_1.length; _i++) {
        var tagDir = tagDirectories_1[_i];
        var key = void 0;
        var children = void 0;
        if (tagDir.componentOptions) {
          key = tagDir.componentOptions.tag;
          if (tagDir.componentOptions.children) {
            children = tagDir.componentOptions.children;
          }
        } else if ((tagDir.tag === "e-markersettings" || tagDir.tag === "e-markersetting") && tagDir.children) {
          key = tagDir.tag === "e-markersettings" ? "e-markerSettings" : "e-markerSetting";
          children = tagDir.children;
        }
        if (key) {
          var tagName = tagNameMapper["" + key] ? tagNameMapper["" + key] : key;
          mulObj[tagName.replace("e-", "")] = [];
          if (children) {
            for (var _a = 0, children_2 = children; _a < children_2.length; _a++) {
              var tagDirChild = children_2[_a];
              var mulLevObj = this.getVNodeValue(tagDirChild, tagKey["" + key], tagNameMapper);
              if (Object.keys(mulLevObj).length !== 0) {
                mulObj[tagName.replace("e-", "")].push(mulLevObj);
              }
            }
          }
        }
      }
      return mulObj;
    },
    getVNodeValue: function(tagDirective, tagKey, tagNameMapper) {
      var ret = {};
      if (tagDirective.componentOptions || (tagDirective.tag === "e-markersettings" || tagDirective.tag === "e-markersetting") && tagDirective.context) {
        var dirTag = void 0;
        if (tagDirective.componentOptions) {
          dirTag = tagDirective.componentOptions.tag;
        } else {
          dirTag = tagDirective.tag === "e-markersettings" ? "e-markerSettings" : "e-markerSetting";
        }
        if (typeof tagKey === "string" && dirTag === tagKey && tagDirective.data) {
          ret = tagDirective.data.attrs ? this.getCamelCaseProps(tagDirective.data.attrs) : this.getCamelCaseProps(tagDirective.data);
        } else if (typeof tagKey === "object") {
          if (tagDirective.componentOptions.children && Object.keys(tagKey).indexOf(dirTag) !== -1) {
            ret = this.getMultiLevelDirValue(tagDirective.componentOptions.children, tagKey["" + dirTag], tagNameMapper);
          } else if (tagDirective.children && Object.keys(tagKey).indexOf(dirTag) !== -1 && (dirTag === "e-markersettings" || dirTag === "e-markersetting")) {
            ret = this.getMultiLevelDirValue(tagDirective.children, tagKey["" + dirTag], tagNameMapper);
          }
          if (tagDirective.data && tagDirective.data.attrs) {
            ret = extend(ret, this.getCamelCaseProps(tagDirective.data.attrs));
          }
        }
      }
      return ret;
    },
    /**
     * convert kebab case directive props to camel case
     */
    getCamelCaseProps: function(props2) {
      var retProps = {};
      for (var _i = 0, _a = Object.keys(props2); _i < _a.length; _i++) {
        var prop = _a[_i];
        retProps[prop.replace(/-[a-z]/g, function(e) {
          return e[1].toUpperCase();
        })] = props2["" + prop];
      }
      return retProps;
    },
    dataBind: function() {
      this.ej2Instances.dataBind();
    },
    setProperties: function(arg, muteOnChange) {
      return this.ej2Instances.setProperties(arg, muteOnChange);
    }
  }
});
function getProps(options) {
  if (options === void 0) {
    options = {};
  }
  if (options.props) {
    var _loop_4 = function(prop2) {
      (options.newprops || (options.newprops = {}))["" + prop2] = {};
      (options.watch || (options.watch = {}))["" + prop2] = function(newVal) {
        this.ej2Instances["" + prop2] = newVal;
        if (this.dataBind && options.name !== "DateRangePickerComponent") {
          this.dataBind();
        }
      };
    };
    for (var _i = 0, _a = options.props; _i < _a.length; _i++) {
      var prop = _a[_i];
      _loop_4(prop);
    }
  }
  return [options.newprops, options.watch];
}
var __assign = globalThis && globalThis.__assign || function() {
  __assign = Object.assign || function(t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
      s = arguments[i];
      for (var p2 in s)
        if (Object.prototype.hasOwnProperty.call(s, p2))
          t[p2] = s[p2];
    }
    return t;
  };
  return __assign.apply(this, arguments);
};
var stringCompiler = getTemplateEngine();
function compile(templateElement, helper) {
  var that2 = this;
  return function(data, context, propName, element2, root) {
    var returnEle;
    if (context) {
      var plugins = context.vueInstance ? context.vueInstance.plugins : null;
      var pid = getUniqueID("templateParentDiv");
      var id = getUniqueID("templateDiv");
      var ele = createElement("div", {
        id: pid,
        innerHTML: '<div id="' + id + '"></div>'
      });
      document.body.appendChild(ele);
      if (!isExecute && typeof templateElement === "string") {
        var vueSlot_1 = getCurrentVueSlot(context.vueInstance, templateElement, root);
        if (vueSlot_1) {
          var app = aVue.createApp({
            render: function() {
              return vueSlot_1["" + templateElement]({ data });
            }
          });
          if (plugins) {
            for (var i = 0; i < plugins.length; i++) {
              app.use(plugins[parseInt(i.toString(), 10)]);
            }
          }
          getValues(app, context.vueInstance, root);
          app.mount("#" + pid);
          returnEle = ele.childNodes;
          detach(ele);
        } else {
          detach(ele);
          return stringCompiler(templateElement, helper)(data);
        }
      } else if (!isExecute) {
        var tempObj = templateElement.call(that2, {});
        var object = tempObj;
        var propsData = getValue("template.propsData", tempObj);
        var dataObj_1 = {
          data: { data: extend(tempObj.data || {}, data) },
          parent: context.vueInstance
        };
        if (!object.template) {
          object.template = object[Object.keys(object)[0]];
        }
        var templateCompRef = void 0;
        if (object.template.extends) {
          templateCompRef = object.template.extends._context.components.template;
        } else {
          templateCompRef = object.template._context.components[templateElement.name];
          if (!templateCompRef) {
            var key = Object.keys(object.template._context.components)[0];
            templateCompRef = object.template._context.components["" + key];
          }
        }
        var tempRef_1;
        if (propsData) {
          tempRef_1 = Object.assign(templateCompRef.data(), propsData);
        } else {
          tempRef_1 = Object.assign(templateCompRef.data(), dataObj_1.data);
          if (templateCompRef.components) {
            var objkeys = Object.keys(templateCompRef.components) || [];
            var _loop_1 = function(objstring2) {
              var intComponent = templateCompRef.components["" + objstring2];
              if (intComponent && intComponent.data) {
                if (!intComponent.__data)
                  intComponent.__data = intComponent.data;
                intComponent.data = function(proxy2) {
                  return Object.assign(intComponent.__data.call(proxy2), dataObj_1.data);
                };
              }
            };
            for (var _i = 0, objkeys_1 = objkeys; _i < objkeys_1.length; _i++) {
              var objstring = objkeys_1[_i];
              _loop_1(objstring);
            }
          }
        }
        templateCompRef.data = function() {
          return tempRef_1;
        };
        var app = aVue.createApp(templateCompRef);
        if (plugins) {
          for (var i = 0; i < plugins.length; i++) {
            app.use(plugins[parseInt(i.toString(), 10)]);
          }
        }
        getValues(app, context.vueInstance, root);
        app.mount("#" + pid);
        returnEle = ele.childNodes;
        detach(ele);
      } else if (typeof templateElement === "string") {
        var vueSlot_2 = getVueSlot(context.vueInstance, templateElement, root);
        if (vueSlot_2) {
          var provided_1 = {};
          var getProvideValues_1 = function(vueinstance) {
            if (vueinstance["$parent"])
              getProvideValues_1(vueinstance.$parent);
            if (vueinstance["_provided"] && Object.keys(vueinstance["_provided"]).length > 0) {
              provided_1 = __assign({}, provided_1, vueinstance._provided);
            }
          };
          var vueInstance = context.vueInstance ? context.vueInstance : root && root.vueInstance ? root.vueInstance : null;
          if (vueInstance) {
            getProvideValues_1(vueInstance);
          }
          var vueTemplate = new aVue({
            provide: __assign({}, provided_1),
            render: function() {
              return vueSlot_2["" + templateElement]({ data });
            }
          });
          vueTemplate.$mount("#" + id);
          returnEle = ele.childNodes;
          detach(ele);
        } else {
          detach(ele);
          return stringCompiler(templateElement, helper)(data);
        }
      } else {
        var tempObj = templateElement.call(that2, {});
        var templateFunction = tempObj.template;
        var propsData = getValue("template.propsData", tempObj);
        var dataObj = {
          data: { data: extend(tempObj.data || {}, data) },
          parent: context.vueInstance
        };
        if (propsData) {
          templateFunction = tempObj.template.extends;
          dataObj.propsData = propsData;
        }
        if (typeof templateFunction !== "function") {
          templateFunction = aVue.extend(templateFunction);
        }
        var templateVue = new templateFunction(dataObj);
        templateVue.$mount("#" + id);
        returnEle = ele.childNodes;
        if (context.vueInstance) {
          var templateInstance = context.vueInstance.templateCollection;
          if (!templateInstance) {
            context.vueInstance.templateCollection = {};
            templateInstance = context.vueInstance.templateCollection;
          }
          if (propName) {
            if (!templateInstance["" + propName]) {
              templateInstance["" + propName] = [];
            }
            templateInstance["" + propName].push(returnEle[0]);
          }
        }
        detach(ele);
      }
    }
    return returnEle || [];
  };
}
setTemplateEngine({ compile });
function getValues(app, cInstance, root) {
  var vueInstance = cInstance ? cInstance : root && root.vueInstance ? root.vueInstance : null;
  if (!vueInstance) {
    return;
  }
  var globalVariables2 = ["components", "mixins", "provides"];
  for (var i = 0; i < globalVariables2.length; i++) {
    var gVariable = globalVariables2[i];
    if (app["_context"][gVariable] && vueInstance["$"]["appContext"][gVariable]) {
      app["_context"][gVariable] = vueInstance["$"]["appContext"][gVariable];
    }
  }
  var provided = {};
  var getProvideValue = function(vueinstance) {
    if (vueinstance["$"] && vueinstance["$"]["parent"])
      getProvideValue(vueinstance.$.parent);
    if (vueinstance["provides"] && Object.keys(vueinstance["provides"]).length > 0) {
      provided = __assign({}, provided, vueinstance.provides);
    }
  };
  getProvideValue(vueInstance);
  if (app["_context"]["provides"]) {
    app._context.provides = __assign({}, app._context.provides, provided);
  }
  if (app["_context"]["config"]["globalProperties"] && vueInstance["$"]["appContext"]["config"]["globalProperties"]) {
    app["_context"]["config"]["globalProperties"] = vueInstance["$"]["appContext"]["config"]["globalProperties"];
  }
}
function getVueSlot(vueInstance, templateElement, root) {
  if (!vueInstance && !(root && root.vueInstance)) {
    return void 0;
  }
  var instance = root && root.vueInstance ? root.vueInstance : vueInstance;
  return getVueChildSlot(instance, templateElement);
}
function getVueChildSlot(vueInstance, templateElement) {
  if (!vueInstance) {
    return void 0;
  }
  var slots = vueInstance.$slots;
  var scopedSlots = vueInstance.$scopedSlots;
  var vSlots = vueInstance.scopedSlots;
  var children = vueInstance.children;
  if (scopedSlots && scopedSlots["" + templateElement]) {
    return scopedSlots;
  } else if (slots && slots.default) {
    var childSlots = slots.default;
    for (var i = 0; i < childSlots.length; i++) {
      var slot = getVueChildSlot(getSlot(childSlots[parseInt(i.toString(), 10)]), templateElement);
      if (slot) {
        return slot;
      }
    }
  } else if (vSlots && vSlots["" + templateElement]) {
    return vSlots;
  } else if (children) {
    for (var i = 0; i < children.length; i++) {
      var slot = getVueChildSlot(getSlot(children[parseInt(i.toString(), 10)]), templateElement);
      if (slot) {
        return slot;
      }
    }
  }
  return void 0;
}
function getSlot(vnode) {
  var slot = vnode.componentOptions && vnode.componentOptions.children ? vnode.componentOptions : !vnode.data && (vnode.tag === "e-markersettings" || vnode.tag === "e-markersetting") ? vnode : vnode.data;
  return vnode.componentInstance ? vnode.componentInstance : slot;
}
function getCurrentVueSlot(vueInstance, templateElement, root) {
  if (!vueInstance && !(root && root.vueInstance)) {
    return void 0;
  }
  var slots = root && root.vueInstance ? root.vueInstance.$slots : vueInstance.$slots;
  return getChildVueSlot(slots, templateElement);
}
function getChildVueSlot(slots, templateElement) {
  if (slots && slots["" + templateElement]) {
    return slots;
  } else if (slots && slots.default) {
    var childSlots = slots.default();
    for (var i = 0; i < childSlots.length; i++) {
      var slot = getChildVueSlot(childSlots[parseInt(i.toString(), 10)].children, templateElement);
      if (slot) {
        return slot;
      }
    }
  }
  return void 0;
}
var ColumnsDirective = vueDefineComponent({
  inject: { custom: { default: null } },
  render: function(createElement2) {
    if (!isExecute) {
      var h2 = !isExecute ? gh : createElement2;
      var slots = null;
      if (!isNullOrUndefined(this.$slots.default)) {
        slots = !isExecute ? this.$slots.default() : this.$slots.default;
      }
      return h2("div", { class: "e-directive" }, slots);
    }
    return;
  },
  updated: function() {
    if (!isExecute && this.custom) {
      this.custom();
    }
  },
  methods: {
    getTag: function() {
      return "e-columns";
    }
  }
});
var ColumnDirective = vueDefineComponent({
  render: function() {
    return;
  },
  methods: {
    getTag: function() {
      return "e-column";
    }
  }
});
var properties$c = ["isLazyUpdate", "plugins", "allowDragAndDrop", "allowKeyboard", "cardSettings", "columns", "constraintType", "cssClass", "dataSource", "dialogSettings", "enableHtmlSanitizer", "enablePersistence", "enableRtl", "enableTooltip", "externalDropId", "height", "keyField", "locale", "query", "showEmptyColumn", "sortSettings", "stackedHeaders", "swimlaneSettings", "tooltipTemplate", "width", "actionBegin", "actionComplete", "actionFailure", "cardClick", "cardDoubleClick", "cardRendered", "created", "dataBinding", "dataBound", "dataSourceChanged", "dataStateChange", "dialogClose", "dialogOpen", "drag", "dragStart", "dragStop", "queryCellInfo"];
var modelProps$c = [];
var testProp$c = getProps({ props: properties$c });
var props$c = testProp$c[0], watch$c = testProp$c[1], emitProbs$c = Object.keys(watch$c);
emitProbs$c.push("modelchanged", "update:modelValue");
for (var _i$c = 0, modelProps_1$c = modelProps$c; _i$c < modelProps_1$c.length; _i$c++) {
  var props_1$c = modelProps_1$c[_i$c];
  emitProbs$c.push("update:" + props_1$c);
}
var KanbanComponent = vueDefineComponent({
  name: "KanbanComponent",
  mixins: [ComponentBase],
  props: props$c,
  watch: watch$c,
  emits: emitProbs$c,
  provide: function() {
    return { custom: this.custom };
  },
  data: function() {
    return {
      ej2Instances: new Kanban$1({}),
      propKeys: properties$c,
      models: modelProps$c,
      hasChildDirective: true,
      hasInjectedModules: false,
      tagMapper: { "e-columns": "e-column", "e-stackedHeaders": "e-stackedHeader" },
      tagNameMapper: {},
      isVue3: !isExecute,
      templateCollection: {}
    };
  },
  created: function() {
    this.bindProperties();
    this.ej2Instances._setProperties = this.ej2Instances.setProperties;
    this.ej2Instances.setProperties = this.setProperties;
    this.ej2Instances.clearTemplate = this.clearTemplate;
    this.updated = this.updated;
  },
  render: function(createElement2) {
    var h2 = !isExecute ? gh : createElement2;
    var slots = null;
    if (!isNullOrUndefined(this.$slots.default)) {
      slots = !isExecute ? this.$slots.default() : this.$slots.default;
    }
    return h2("div", slots);
  },
  methods: {
    clearTemplate: function(templateNames) {
      if (!templateNames) {
        templateNames = Object.keys(this.templateCollection || {});
      }
      if (templateNames.length && this.templateCollection) {
        for (var _i = 0, templateNames_1 = templateNames; _i < templateNames_1.length; _i++) {
          var tempName = templateNames_1[_i];
          var elementCollection = this.templateCollection[tempName];
          if (elementCollection && elementCollection.length) {
            for (var _a = 0, elementCollection_1 = elementCollection; _a < elementCollection_1.length; _a++) {
              var ele = elementCollection_1[_a];
              var destroy2 = getValue("__vue__.$destroy", ele);
              if (destroy2) {
                ele.__vue__.$destroy();
              }
              if (ele.innerHTML) {
                ele.innerHTML = "";
              }
            }
            delete this.templateCollection[tempName];
          }
        }
      }
    },
    setProperties: function(prop, muteOnChange) {
      var _this = this;
      if (this.isVue3) {
        this.models = !this.models ? this.ej2Instances.referModels : this.models;
      }
      if (this.ej2Instances && this.ej2Instances._setProperties) {
        this.ej2Instances._setProperties(prop, muteOnChange);
      }
      if (prop && this.models && this.models.length) {
        Object.keys(prop).map(function(key) {
          _this.models.map(function(model) {
            if (key === model && !/datasource/i.test(key)) {
              if (_this.isVue3) {
                _this.ej2Instances.vueInstance.$emit("update:" + key, prop[key]);
              } else {
                _this.$emit("update:" + key, prop[key]);
                _this.$emit("modelchanged", prop[key]);
              }
            }
          });
        });
      }
    },
    custom: function() {
      this.updated();
    },
    addCard: function(cardData, index) {
      return this.ej2Instances.addCard(cardData, index);
    },
    addColumn: function(columnOptions, index) {
      return this.ej2Instances.addColumn(columnOptions, index);
    },
    closeDialog: function() {
      return this.ej2Instances.closeDialog();
    },
    deleteCard: function(cardData) {
      return this.ej2Instances.deleteCard(cardData);
    },
    deleteColumn: function(index) {
      return this.ej2Instances.deleteColumn(index);
    },
    getCardDetails: function(target) {
      return this.ej2Instances.getCardDetails(target);
    },
    getColumnData: function(columnKey, dataSource) {
      return this.ej2Instances.getColumnData(columnKey, dataSource);
    },
    getSelectedCards: function() {
      return this.ej2Instances.getSelectedCards();
    },
    getSwimlaneData: function(keyField) {
      return this.ej2Instances.getSwimlaneData(keyField);
    },
    hideColumn: function(key) {
      return this.ej2Instances.hideColumn(key);
    },
    hideSpinner: function() {
      return this.ej2Instances.hideSpinner();
    },
    openDialog: function(action, data) {
      return this.ej2Instances.openDialog(action, data);
    },
    refreshHeader: function() {
      return this.ej2Instances.refreshHeader();
    },
    refreshUI: function(args, index) {
      return this.ej2Instances.refreshUI(args, index);
    },
    renderTemplates: function() {
      return this.ej2Instances.renderTemplates();
    },
    resetTemplates: function(templates) {
      return this.ej2Instances.resetTemplates(templates);
    },
    showColumn: function(key) {
      return this.ej2Instances.showColumn(key);
    },
    showSpinner: function() {
      return this.ej2Instances.showSpinner();
    },
    templateParser: function(template) {
      return this.ej2Instances.templateParser(template);
    },
    updateCard: function(cardData, index) {
      return this.ej2Instances.updateCard(cardData, index);
    }
  }
});
var __extends$o = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$e = globalThis && globalThis.__decorate || function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i = decorators.length - 1; i >= 0; i--)
      if (d = decorators[i])
        r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var OTHERMONTH = "e-other-month";
var OTHERDECADE = "e-other-year";
var ROOT$4 = "e-calendar";
var DEVICE = "e-device";
var HEADER$1 = "e-header";
var RTL$1 = "e-rtl";
var CONTENT$2 = "e-content";
var YEAR$2 = "e-year";
var MONTH$2 = "e-month";
var DECADE = "e-decade";
var ICON$1 = "e-icons";
var PREVICON = "e-prev";
var NEXTICON = "e-next";
var PREVSPAN = "e-date-icon-prev";
var NEXTSPAN = "e-date-icon-next ";
var ICONCONTAINER = "e-icon-container";
var DISABLED$2 = "e-disabled";
var OVERLAY = "e-overlay";
var WEEKEND = "e-weekend";
var WEEKNUMBER = "e-week-number";
var SELECTED$2 = "e-selected";
var FOCUSEDDATE$1 = "e-focused-date";
var OTHERMONTHROW = "e-month-hide";
var TODAY = "e-today";
var TITLE = "e-title";
var LINK = "e-day";
var CELL = "e-cell";
var WEEKHEADER = "e-week-header";
var ZOOMIN = "e-zoomin";
var FOOTER = "e-footer-container";
var BTN = "e-btn";
var FLAT = "e-flat";
var CSS = "e-css";
var PRIMARY$1 = "e-primary";
var DAYHEADERLONG = "e-calendar-day-header-lg";
var dayMilliSeconds = 864e5;
var minutesMilliSeconds = 6e4;
var CalendarBase = (
  /** @class */
  function(_super) {
    __extends$o(CalendarBase2, _super);
    function CalendarBase2(options, element2) {
      var _this = _super.call(this, options, element2) || this;
      _this.effect = "";
      _this.isPopupClicked = false;
      _this.isDateSelected = true;
      _this.isTodayClicked = false;
      _this.preventChange = false;
      _this.isAngular = false;
      _this.previousDates = false;
      return _this;
    }
    CalendarBase2.prototype.render = function() {
      this.rangeValidation(this.min, this.max);
      this.calendarEleCopy = this.element.cloneNode(true);
      if (this.calendarMode === "Islamic") {
        if (+this.min.setSeconds(0) === +new Date(1900, 0, 1, 0, 0, 0)) {
          this.min = new Date(1944, 2, 18);
        }
        if (+this.max === +new Date(2099, 11, 31)) {
          this.max = new Date(2069, 10, 16);
        }
      }
      this.globalize = new Internationalization(this.locale);
      if (isNullOrUndefined(this.firstDayOfWeek) || this.firstDayOfWeek > 6 || this.firstDayOfWeek < 0) {
        this.setProperties({ firstDayOfWeek: this.globalize.getFirstDayOfWeek() }, true);
      }
      this.todayDisabled = false;
      this.todayDate = new Date((/* @__PURE__ */ new Date()).setHours(0, 0, 0, 0));
      if (this.getModuleName() === "calendar") {
        this.element.classList.add(ROOT$4);
        if (this.enableRtl) {
          this.element.classList.add(RTL$1);
        }
        if (Browser.isDevice) {
          this.element.classList.add(DEVICE);
        }
        attributes(this.element, {
          "data-role": "calendar"
        });
        this.tabIndex = this.element.hasAttribute("tabindex") ? this.element.getAttribute("tabindex") : "0";
        this.element.setAttribute("tabindex", this.tabIndex);
      } else {
        this.calendarElement = this.createElement("div");
        this.calendarElement.classList.add(ROOT$4);
        if (this.enableRtl) {
          this.calendarElement.classList.add(RTL$1);
        }
        if (Browser.isDevice) {
          this.calendarElement.classList.add(DEVICE);
        }
        attributes(this.calendarElement, {
          "data-role": "calendar"
        });
      }
      if (!isNullOrUndefined(closest(this.element, "fieldset")) && closest(this.element, "fieldset").disabled) {
        this.enabled = false;
      }
      this.createHeader();
      this.createContent();
      this.wireEvents();
    };
    CalendarBase2.prototype.rangeValidation = function(min, max) {
      if (isNullOrUndefined(min)) {
        this.setProperties({ min: new Date(1900, 0, 1) }, true);
      }
      if (isNullOrUndefined(max)) {
        this.setProperties({ max: new Date(2099, 11, 31) }, true);
      }
    };
    CalendarBase2.prototype.getDefaultKeyConfig = function() {
      this.defaultKeyConfigs = {
        controlUp: "ctrl+38",
        controlDown: "ctrl+40",
        moveDown: "downarrow",
        moveUp: "uparrow",
        moveLeft: "leftarrow",
        moveRight: "rightarrow",
        select: "enter",
        home: "home",
        end: "end",
        pageUp: "pageup",
        pageDown: "pagedown",
        shiftPageUp: "shift+pageup",
        shiftPageDown: "shift+pagedown",
        controlHome: "ctrl+home",
        controlEnd: "ctrl+end",
        altUpArrow: "alt+uparrow",
        spacebar: "space",
        altRightArrow: "alt+rightarrow",
        altLeftArrow: "alt+leftarrow"
      };
      return this.defaultKeyConfigs;
    };
    CalendarBase2.prototype.validateDate = function(value) {
      this.setProperties({ min: this.checkDateValue(new Date(this.checkValue(this.min))) }, true);
      this.setProperties({ max: this.checkDateValue(new Date(this.checkValue(this.max))) }, true);
      this.currentDate = this.currentDate ? this.currentDate : new Date((/* @__PURE__ */ new Date()).setHours(0, 0, 0, 0));
      if (!isNullOrUndefined(value) && this.min <= this.max && value >= this.min && value <= this.max) {
        this.currentDate = new Date(this.checkValue(value));
      }
    };
    CalendarBase2.prototype.setOverlayIndex = function(popupWrapper, popupElement, modal, isDevice) {
      if (isDevice && !isNullOrUndefined(popupElement) && !isNullOrUndefined(modal) && !isNullOrUndefined(popupWrapper)) {
        var index = parseInt(popupElement.style.zIndex, 10) ? parseInt(popupElement.style.zIndex, 10) : 1e3;
        modal.style.zIndex = (index - 1).toString();
        popupWrapper.style.zIndex = index.toString();
      }
    };
    CalendarBase2.prototype.minMaxUpdate = function(value) {
      if (!(+this.min <= +this.max)) {
        this.setProperties({ min: this.min }, true);
        addClass([this.element], OVERLAY);
      } else {
        removeClass([this.element], OVERLAY);
      }
      this.min = isNullOrUndefined(this.min) || !+this.min ? this.min = new Date(1900, 0, 1) : this.min;
      this.max = isNullOrUndefined(this.max) || !+this.max ? this.max = new Date(2099, 11, 31) : this.max;
      if (+this.min <= +this.max && value && +value <= +this.max && +value >= +this.min) {
        this.currentDate = new Date(this.checkValue(value));
      } else {
        if (+this.min <= +this.max && !value && +this.currentDate > +this.max) {
          this.currentDate = new Date(this.checkValue(this.max));
        } else {
          if (+this.currentDate < +this.min) {
            this.currentDate = new Date(this.checkValue(this.min));
          }
        }
      }
    };
    CalendarBase2.prototype.createHeader = function() {
      var ariaPrevAttrs = {
        "aria-disabled": "false",
        "aria-label": "previous month"
      };
      var ariaNextAttrs = {
        "aria-disabled": "false",
        "aria-label": "next month"
      };
      var ariaTitleAttrs = {
        "aria-atomic": "true",
        "aria-live": "assertive",
        "aria-label": "title"
      };
      this.headerElement = this.createElement("div", { className: HEADER$1 });
      var iconContainer = this.createElement("div", { className: ICONCONTAINER });
      this.previousIcon = this.createElement("button", { className: "" + PREVICON, attrs: { type: "button" } });
      rippleEffect(this.previousIcon, {
        duration: 400,
        selector: ".e-prev",
        isCenterRipple: true
      });
      attributes(this.previousIcon, ariaPrevAttrs);
      this.nextIcon = this.createElement("button", { className: "" + NEXTICON, attrs: { type: "button" } });
      rippleEffect(this.nextIcon, {
        selector: ".e-next",
        duration: 400,
        isCenterRipple: true
      });
      if (this.getModuleName() === "daterangepicker") {
        attributes(this.previousIcon, { tabIndex: "-1" });
        attributes(this.nextIcon, { tabIndex: "-1" });
      }
      attributes(this.nextIcon, ariaNextAttrs);
      this.headerTitleElement = this.createElement("div", { className: "" + LINK + " " + TITLE });
      attributes(this.headerTitleElement, ariaTitleAttrs);
      this.headerElement.appendChild(this.headerTitleElement);
      this.previousIcon.appendChild(this.createElement("span", { className: "" + PREVSPAN + " " + ICON$1 }));
      this.nextIcon.appendChild(this.createElement("span", { className: "" + NEXTSPAN + " " + ICON$1 }));
      iconContainer.appendChild(this.previousIcon);
      iconContainer.appendChild(this.nextIcon);
      this.headerElement.appendChild(iconContainer);
      if (this.getModuleName() === "calendar") {
        this.element.appendChild(this.headerElement);
      } else {
        this.calendarElement.appendChild(this.headerElement);
      }
      this.adjustLongHeaderSize();
    };
    CalendarBase2.prototype.createContent = function() {
      this.contentElement = this.createElement("div", { className: CONTENT$2 });
      this.table = this.createElement("table", { attrs: { tabIndex: "0", "role": "grid", "aria-activedescendant": "", "aria-labelledby": this.element.id } });
      if (this.getModuleName() === "calendar") {
        this.element.appendChild(this.contentElement);
      } else {
        this.calendarElement.appendChild(this.contentElement);
      }
      this.contentElement.appendChild(this.table);
      this.createContentHeader();
      this.createContentBody();
      if (this.showTodayButton) {
        this.createContentFooter();
      }
    };
    CalendarBase2.prototype.getCultureValues = function() {
      var culShortNames = [];
      var cldrObj;
      var dayFormat = "days.stand-alone." + this.dayHeaderFormat.toLowerCase();
      if (this.locale === "en" || this.locale === "en-US") {
        cldrObj = getValue(dayFormat, getDefaultDateObject());
      } else {
        cldrObj = this.getCultureObjects(cldrData, "" + this.locale);
      }
      if (!isNullOrUndefined(cldrObj)) {
        for (var _i = 0, _a = Object.keys(cldrObj); _i < _a.length; _i++) {
          var obj = _a[_i];
          culShortNames.push(getValue(obj, cldrObj));
        }
      }
      return culShortNames;
    };
    CalendarBase2.prototype.toCapitalize = function(text) {
      return !isNullOrUndefined(text) && text.length ? text[0].toUpperCase() + text.slice(1) : text;
    };
    CalendarBase2.prototype.createContentHeader = function() {
      if (this.getModuleName() === "calendar") {
        if (!isNullOrUndefined(this.element.querySelectorAll(".e-content .e-week-header")[0])) {
          detach(this.element.querySelectorAll(".e-content .e-week-header")[0]);
        }
      } else {
        if (!isNullOrUndefined(this.calendarElement.querySelectorAll(".e-content .e-week-header")[0])) {
          detach(this.calendarElement.querySelectorAll(".e-content .e-week-header")[0]);
        }
      }
      var daysCount = 6;
      var html = "";
      if (this.firstDayOfWeek > 6 || this.firstDayOfWeek < 0) {
        this.setProperties({ firstDayOfWeek: 0 }, true);
      }
      this.tableHeadElement = this.createElement("thead", { className: WEEKHEADER });
      if (this.weekNumber) {
        html += '<th class="e-week-number"></th>';
        if (this.getModuleName() === "calendar") {
          addClass([this.element], "" + WEEKNUMBER);
        } else {
          addClass([this.calendarElement], "" + WEEKNUMBER);
        }
      }
      var shortNames = this.getCultureValues().length > 0 && this.getCultureValues() ? this.shiftArray(this.getCultureValues().length > 0 && this.getCultureValues(), this.firstDayOfWeek) : null;
      if (!isNullOrUndefined(shortNames)) {
        for (var days = 0; days <= daysCount; days++) {
          html += '<th  class="">' + this.toCapitalize(shortNames[days]) + "</th>";
        }
      }
      html = "<tr>" + html + "</tr>";
      this.tableHeadElement.innerHTML = html;
      this.table.appendChild(this.tableHeadElement);
    };
    CalendarBase2.prototype.createContentBody = function() {
      if (this.getModuleName() === "calendar") {
        if (!isNullOrUndefined(this.element.querySelectorAll(".e-content tbody")[0])) {
          detach(this.element.querySelectorAll(".e-content tbody")[0]);
        }
      } else {
        if (!isNullOrUndefined(this.calendarElement.querySelectorAll(".e-content tbody")[0])) {
          detach(this.calendarElement.querySelectorAll(".e-content tbody")[0]);
        }
      }
      switch (this.start) {
        case "Year":
          this.renderYears();
          break;
        case "Decade":
          this.renderDecades();
          break;
        default:
          this.renderMonths();
      }
    };
    CalendarBase2.prototype.updateFooter = function() {
      this.todayElement.textContent = this.l10.getConstant("today");
      this.todayElement.setAttribute("aria-label", this.l10.getConstant("today"));
    };
    CalendarBase2.prototype.createContentFooter = function() {
      if (this.showTodayButton) {
        var minimum = /* @__PURE__ */ new Date(+this.min);
        var maximum = /* @__PURE__ */ new Date(+this.max);
        var l10nLocale = { today: "Today" };
        this.globalize = new Internationalization(this.locale);
        this.l10 = new L10n(this.getModuleName(), l10nLocale, this.locale);
        this.todayElement = this.createElement("button", { attrs: { role: "button" } });
        rippleEffect(this.todayElement);
        this.updateFooter();
        addClass([this.todayElement], [BTN, TODAY, FLAT, PRIMARY$1, CSS]);
        if (!(+new Date(minimum.setHours(0, 0, 0, 0)) <= +this.todayDate && +this.todayDate <= +new Date(maximum.setHours(0, 0, 0, 0))) || this.todayDisabled) {
          addClass([this.todayElement], DISABLED$2);
        }
        this.footer = this.createElement("div", { className: FOOTER });
        this.footer.appendChild(this.todayElement);
        if (this.getModuleName() === "calendar") {
          this.element.appendChild(this.footer);
        }
        if (this.getModuleName() === "datepicker") {
          this.calendarElement.appendChild(this.footer);
        }
        if (this.getModuleName() === "datetimepicker") {
          this.calendarElement.appendChild(this.footer);
        }
        if (!this.todayElement.classList.contains(DISABLED$2)) {
          EventHandler.add(this.todayElement, "click", this.todayButtonClick, this);
        }
      }
    };
    CalendarBase2.prototype.wireEvents = function(id, ref2, keyConfig, moduleName) {
      EventHandler.add(this.headerTitleElement, "click", this.navigateTitle, this);
      this.defaultKeyConfigs = extend(this.defaultKeyConfigs, this.keyConfigs);
      if (this.getModuleName() === "calendar") {
        this.keyboardModule = new KeyboardEvents(this.element, {
          eventName: "keydown",
          keyAction: this.keyActionHandle.bind(this),
          keyConfigs: this.defaultKeyConfigs
        });
      } else {
        this.keyboardModule = new KeyboardEvents(this.calendarElement, {
          eventName: "keydown",
          keyAction: this.keyActionHandle.bind(this),
          keyConfigs: this.defaultKeyConfigs
        });
      }
    };
    CalendarBase2.prototype.dateWireEvents = function(id, ref2, keyConfig, moduleName) {
      this.defaultKeyConfigs = this.getDefaultKeyConfig();
      this.defaultKeyConfigs = extend(this.defaultKeyConfigs, keyConfig);
      this.serverModuleName = moduleName;
    };
    CalendarBase2.prototype.todayButtonClick = function(e, value, isCustomDate) {
      if (this.showTodayButton) {
        if (this.currentView() === this.depth) {
          this.effect = "";
        } else {
          this.effect = "e-zoomin";
        }
        if (this.getViewNumber(this.start) >= this.getViewNumber(this.depth)) {
          this.navigateTo(this.depth, new Date(this.checkValue(value)), isCustomDate);
        } else {
          this.navigateTo("Month", new Date(this.checkValue(value)), isCustomDate);
        }
      }
    };
    CalendarBase2.prototype.resetCalendar = function() {
      this.calendarElement && detach(this.calendarElement);
      this.tableBodyElement && detach(this.tableBodyElement);
      this.table && detach(this.table);
      this.tableHeadElement && detach(this.tableHeadElement);
      this.nextIcon && detach(this.nextIcon);
      this.previousIcon && detach(this.previousIcon);
      this.footer && detach(this.footer);
      this.todayElement = null;
      this.renderDayCellArgs = null;
      this.calendarElement = this.tableBodyElement = this.footer = this.tableHeadElement = this.nextIcon = this.previousIcon = this.table = null;
    };
    CalendarBase2.prototype.keyActionHandle = function(e, value, multiSelection) {
      var focusedDate = this.tableBodyElement.querySelector("tr td.e-focused-date");
      var selectedDate;
      if (multiSelection) {
        if (!isNullOrUndefined(focusedDate) && +value === parseInt(focusedDate.getAttribute("id").split("_")[0], 10)) {
          selectedDate = focusedDate;
        } else {
          selectedDate = this.tableBodyElement.querySelector("tr td.e-selected");
        }
      } else {
        selectedDate = this.tableBodyElement.querySelector("tr td.e-selected");
      }
      var view = this.getViewNumber(this.currentView());
      var depthValue = this.getViewNumber(this.depth);
      var levelRestrict = view === depthValue && this.getViewNumber(this.start) >= depthValue;
      this.effect = "";
      switch (e.action) {
        case "moveLeft":
          this.keyboardNavigate(-1, view, e, this.max, this.min);
          e.preventDefault();
          break;
        case "moveRight":
          this.keyboardNavigate(1, view, e, this.max, this.min);
          e.preventDefault();
          break;
        case "moveUp":
          if (view === 0) {
            this.keyboardNavigate(-7, view, e, this.max, this.min);
          } else {
            this.keyboardNavigate(-4, view, e, this.max, this.min);
          }
          e.preventDefault();
          break;
        case "moveDown":
          if (view === 0) {
            this.keyboardNavigate(7, view, e, this.max, this.min);
          } else {
            this.keyboardNavigate(4, view, e, this.max, this.min);
          }
          e.preventDefault();
          break;
        case "select":
          if (e.target === this.todayElement) {
            this.todayButtonClick(e, value);
          } else {
            var element2 = !isNullOrUndefined(focusedDate) ? focusedDate : selectedDate;
            if (!isNullOrUndefined(element2) && !element2.classList.contains(DISABLED$2)) {
              if (levelRestrict) {
                var d = new Date(parseInt("" + element2.id, 0));
                this.selectDate(e, d, element2);
              } else {
                this.contentClick(null, --view, element2, value);
              }
            }
          }
          break;
        case "controlUp":
          this.title();
          e.preventDefault();
          break;
        case "controlDown":
          if (!isNullOrUndefined(focusedDate) && !levelRestrict || !isNullOrUndefined(selectedDate) && !levelRestrict) {
            this.contentClick(null, --view, focusedDate || selectedDate, value);
          }
          e.preventDefault();
          break;
        case "home":
          this.currentDate = this.firstDay(this.currentDate);
          detach(this.tableBodyElement);
          if (view === 0) {
            this.renderMonths(e);
          } else if (view === 1) {
            this.renderYears(e);
          } else {
            this.renderDecades(e);
          }
          e.preventDefault();
          break;
        case "end":
          this.currentDate = this.lastDay(this.currentDate, view);
          detach(this.tableBodyElement);
          if (view === 0) {
            this.renderMonths(e);
          } else if (view === 1) {
            this.renderYears(e);
          } else {
            this.renderDecades(e);
          }
          e.preventDefault();
          break;
        case "pageUp":
          this.addMonths(this.currentDate, -1);
          this.navigateTo("Month", this.currentDate);
          e.preventDefault();
          break;
        case "pageDown":
          this.addMonths(this.currentDate, 1);
          this.navigateTo("Month", this.currentDate);
          e.preventDefault();
          break;
        case "shiftPageUp":
          this.addYears(this.currentDate, -1);
          this.navigateTo("Month", this.currentDate);
          e.preventDefault();
          break;
        case "shiftPageDown":
          this.addYears(this.currentDate, 1);
          this.navigateTo("Month", this.currentDate);
          e.preventDefault();
          break;
        case "controlHome":
          this.navigateTo("Month", new Date(this.currentDate.getFullYear(), 0, 1));
          e.preventDefault();
          break;
        case "controlEnd":
          this.navigateTo("Month", new Date(this.currentDate.getFullYear(), 11, 31));
          e.preventDefault();
          break;
      }
      if (this.getModuleName() === "calendar") {
        this.table.focus();
      }
    };
    CalendarBase2.prototype.keyboardNavigate = function(number, currentView, e, max, min) {
      var date = new Date(this.checkValue(this.currentDate));
      switch (currentView) {
        case 2:
          this.addYears(this.currentDate, number);
          if (this.isMonthYearRange(this.currentDate)) {
            detach(this.tableBodyElement);
            this.renderDecades(e);
          } else {
            this.currentDate = date;
          }
          break;
        case 1:
          this.addMonths(this.currentDate, number);
          if (this.calendarMode === "Gregorian") {
            if (this.isMonthYearRange(this.currentDate)) {
              detach(this.tableBodyElement);
              this.renderYears(e);
            } else {
              this.currentDate = date;
            }
          } else {
            if (this.isMonthYearRange(this.currentDate)) {
              detach(this.tableBodyElement);
              this.renderYears(e);
            } else {
              this.currentDate = date;
            }
          }
          break;
        case 0:
          this.addDay(this.currentDate, number, e, max, min);
          if (this.isMinMaxRange(this.currentDate)) {
            detach(this.tableBodyElement);
            this.renderMonths(e);
          } else {
            this.currentDate = date;
          }
          break;
      }
    };
    CalendarBase2.prototype.preRender = function(value) {
      var _this = this;
      this.navigatePreviousHandler = this.navigatePrevious.bind(this);
      this.navigateNextHandler = this.navigateNext.bind(this);
      this.defaultKeyConfigs = this.getDefaultKeyConfig();
      this.navigateHandler = function(e) {
        _this.triggerNavigate(e);
      };
    };
    CalendarBase2.prototype.minMaxDate = function(localDate) {
      var currentDate = new Date((/* @__PURE__ */ new Date(+localDate)).setHours(0, 0, 0, 0));
      var minDate = new Date((/* @__PURE__ */ new Date(+this.min)).setHours(0, 0, 0, 0));
      var maxDate = new Date((/* @__PURE__ */ new Date(+this.max)).setHours(0, 0, 0, 0));
      if (+currentDate === +minDate || +currentDate === +maxDate) {
        if (+localDate < +this.min) {
          localDate = /* @__PURE__ */ new Date(+this.min);
        }
        if (+localDate > +this.max) {
          localDate = /* @__PURE__ */ new Date(+this.max);
        }
      }
      return localDate;
    };
    CalendarBase2.prototype.renderMonths = function(e, value, isCustomDate) {
      var numCells = this.weekNumber ? 8 : 7;
      var tdEles;
      if (this.calendarMode === "Gregorian") {
        tdEles = this.renderDays(this.currentDate, value, null, null, isCustomDate, e);
      } else {
        tdEles = this.islamicModule.islamicRenderDays(this.currentDate, value);
      }
      this.createContentHeader();
      if (this.calendarMode === "Gregorian") {
        this.renderTemplate(tdEles, numCells, MONTH$2, e, value);
      } else {
        this.islamicModule.islamicRenderTemplate(tdEles, numCells, MONTH$2, e, value);
      }
    };
    CalendarBase2.prototype.renderDays = function(currentDate, value, multiSelection, values, isTodayDate, e) {
      var tdEles = [];
      var cellsCount = 42;
      var todayDate = isTodayDate ? /* @__PURE__ */ new Date(+currentDate) : this.getDate(/* @__PURE__ */ new Date(), this.timezone);
      var localDate = new Date(this.checkValue(currentDate));
      var minMaxDate;
      var currentMonth = localDate.getMonth();
      this.titleUpdate(currentDate, "days");
      var d = localDate;
      localDate = new Date(d.getFullYear(), d.getMonth(), 0, d.getHours(), d.getMinutes(), d.getSeconds(), d.getMilliseconds());
      while (localDate.getDay() !== this.firstDayOfWeek) {
        this.setStartDate(localDate, -1 * dayMilliSeconds);
      }
      for (var day = 0; day < cellsCount; ++day) {
        var weekEle = this.createElement("td", { className: CELL });
        var weekAnchor = this.createElement("span");
        if (day % 7 === 0 && this.weekNumber) {
          var numberOfDays = this.weekRule === "FirstDay" ? 6 : this.weekRule === "FirstFourDayWeek" ? 3 : 0;
          var finalDate = new Date(localDate.getFullYear(), localDate.getMonth(), localDate.getDate() + numberOfDays);
          weekAnchor.textContent = "" + this.getWeek(finalDate);
          weekEle.appendChild(weekAnchor);
          addClass([weekEle], "" + WEEKNUMBER);
          tdEles.push(weekEle);
        }
        minMaxDate = /* @__PURE__ */ new Date(+localDate);
        localDate = this.minMaxDate(localDate);
        var dateFormatOptions = { type: "dateTime", skeleton: "full" };
        var date = this.globalize.parseDate(this.globalize.formatDate(localDate, dateFormatOptions), dateFormatOptions);
        var tdEle = this.dayCell(localDate);
        var title = this.globalize.formatDate(localDate, { type: "date", skeleton: "full" });
        var dayLink = this.createElement("span");
        dayLink.textContent = this.globalize.formatDate(localDate, { format: "d", type: "date", skeleton: "yMd" });
        var disabled = this.min > localDate || this.max < localDate;
        if (disabled) {
          addClass([tdEle], DISABLED$2);
          addClass([tdEle], OVERLAY);
        } else {
          dayLink.setAttribute("title", "" + title);
        }
        if (currentMonth !== localDate.getMonth()) {
          addClass([tdEle], OTHERMONTH);
        }
        if (localDate.getDay() === 0 || localDate.getDay() === 6) {
          addClass([tdEle], WEEKEND);
        }
        tdEle.appendChild(dayLink);
        this.renderDayCellArgs = {
          date: localDate,
          isDisabled: false,
          element: tdEle,
          isOutOfRange: disabled
        };
        var argument = this.renderDayCellArgs;
        this.renderDayCellEvent(argument);
        if (argument.isDisabled) {
          var selectDate = new Date(this.checkValue(value));
          var argsDate = new Date(this.checkValue(argument.date));
          if (multiSelection) {
            if (!isNullOrUndefined(values) && values.length > 0) {
              for (var index = 0; index < values.length; index++) {
                var localDateString = +new Date(this.globalize.formatDate(argument.date, { type: "date", skeleton: "yMd" }));
                var tempDateString = +new Date(this.globalize.formatDate(values[index], { type: "date", skeleton: "yMd" }));
                if (localDateString === tempDateString) {
                  values.splice(index, 1);
                  index = -1;
                }
              }
            }
          } else if (selectDate && +selectDate === +argsDate) {
            this.setProperties({ value: null }, true);
          }
        }
        if (this.renderDayCellArgs.isDisabled && !tdEle.classList.contains(SELECTED$2)) {
          addClass([tdEle], DISABLED$2);
          addClass([tdEle], OVERLAY);
          if (+this.renderDayCellArgs.date === +this.todayDate) {
            this.todayDisabled = true;
          }
        }
        var otherMnthBool = tdEle.classList.contains(OTHERMONTH);
        var disabledCls = tdEle.classList.contains(DISABLED$2);
        if (!disabledCls) {
          EventHandler.add(tdEle, "click", this.clickHandler, this);
        }
        var currentTarget = void 0;
        if (!isNullOrUndefined(e) && e.type === "click") {
          currentTarget = e.currentTarget;
        }
        if (multiSelection && !isNullOrUndefined(values) && !disabledCls) {
          for (var tempValue = 0; tempValue < values.length; tempValue++) {
            var type = this.calendarMode === "Gregorian" ? "gregorian" : "islamic";
            var formatOptions = { format: null, type: "date", skeleton: "short", calendar: type };
            var localDateString = this.globalize.formatDate(localDate, formatOptions);
            var tempDateString = this.globalize.formatDate(values[tempValue], formatOptions);
            if (localDateString === tempDateString && this.getDateVal(localDate, values[tempValue]) || this.getDateVal(localDate, value)) {
              addClass([tdEle], SELECTED$2);
            }
            if (!isNullOrUndefined(currentTarget) && currentTarget.innerText === tdEle.innerText && this.previousDates && tdEle.classList.contains(SELECTED$2) && currentTarget.classList.contains(SELECTED$2)) {
              removeClass([tdEle], SELECTED$2);
              this.previousDates = false;
              var copyValues = this.copyValues(values);
              for (var i = 0; i < copyValues.length; i++) {
                var type_1 = this.calendarMode === "Gregorian" ? "gregorian" : "islamic";
                var formatOptions_1 = { format: null, type: "date", skeleton: "short", calendar: type_1 };
                var localDateString_1 = this.globalize.formatDate(date, formatOptions_1);
                var tempDateString_1 = this.globalize.formatDate(copyValues[i], formatOptions_1);
                if (localDateString_1 === tempDateString_1) {
                  var index = copyValues.indexOf(copyValues[i]);
                  copyValues.splice(index, 1);
                  values.splice(index, 1);
                }
              }
              this.setProperties({ values: copyValues }, true);
            } else {
              this.updateFocus(otherMnthBool, disabledCls, localDate, tdEle, currentDate);
            }
          }
          if (values.length <= 0) {
            this.updateFocus(otherMnthBool, disabledCls, localDate, tdEle, currentDate);
          }
        } else if (!disabledCls && this.getDateVal(localDate, value)) {
          addClass([tdEle], SELECTED$2);
        }
        this.updateFocus(otherMnthBool, disabledCls, localDate, tdEle, currentDate);
        if (!isNullOrUndefined(date) && date.getFullYear() === todayDate.getFullYear() && date.getMonth() === todayDate.getMonth() && date.getDate() === todayDate.getDate()) {
          addClass([tdEle], TODAY);
        }
        tdEles.push(this.renderDayCellArgs.element);
        localDate = /* @__PURE__ */ new Date(+minMaxDate);
        this.addDay(localDate, 1, null, this.max, this.min);
      }
      return tdEles;
    };
    CalendarBase2.prototype.updateFocus = function(otherMonth, disabled, localDate, tableElement, currentDate) {
      if (currentDate.getDate() === localDate.getDate() && !otherMonth && !disabled) {
        addClass([tableElement], FOCUSEDDATE$1);
      } else {
        if (currentDate >= this.max && parseInt(tableElement.id, 0) === +this.max && !otherMonth && !disabled) {
          addClass([tableElement], FOCUSEDDATE$1);
        }
        if (currentDate <= this.min && parseInt(tableElement.id, 0) === +this.min && !otherMonth && !disabled) {
          addClass([tableElement], FOCUSEDDATE$1);
        }
      }
    };
    CalendarBase2.prototype.renderYears = function(e, value) {
      this.removeTableHeadElement();
      var numCells = 4;
      var tdEles = [];
      var valueUtil = isNullOrUndefined(value);
      var curDate = new Date(this.checkValue(this.currentDate));
      var mon = curDate.getMonth();
      var yr = curDate.getFullYear();
      var localDate = curDate;
      var curYrs = localDate.getFullYear();
      var minYr = new Date(this.checkValue(this.min)).getFullYear();
      var minMonth = new Date(this.checkValue(this.min)).getMonth();
      var maxYr = new Date(this.checkValue(this.max)).getFullYear();
      var maxMonth = new Date(this.checkValue(this.max)).getMonth();
      localDate.setMonth(0);
      this.titleUpdate(this.currentDate, "months");
      localDate.setDate(1);
      for (var month2 = 0; month2 < 12; ++month2) {
        var tdEle = this.dayCell(localDate);
        var dayLink = this.createElement("span");
        var localMonth = value && value.getMonth() === localDate.getMonth();
        var select2 = value && value.getFullYear() === yr && localMonth;
        dayLink.textContent = this.toCapitalize(this.globalize.formatDate(localDate, {
          format: null,
          type: "dateTime",
          skeleton: "MMM"
        }));
        if (this.min && (curYrs < minYr || month2 < minMonth && curYrs === minYr) || this.max && (curYrs > maxYr || month2 > maxMonth && curYrs >= maxYr)) {
          addClass([tdEle], DISABLED$2);
        } else if (!valueUtil && select2) {
          addClass([tdEle], SELECTED$2);
        } else {
          if (localDate.getMonth() === mon && this.currentDate.getMonth() === mon) {
            addClass([tdEle], FOCUSEDDATE$1);
          }
        }
        localDate.setDate(1);
        localDate.setMonth(localDate.getMonth() + 1);
        if (!tdEle.classList.contains(DISABLED$2)) {
          EventHandler.add(tdEle, "click", this.clickHandler, this);
        }
        tdEle.appendChild(dayLink);
        tdEles.push(tdEle);
      }
      this.renderTemplate(tdEles, numCells, YEAR$2, e, value);
    };
    CalendarBase2.prototype.renderDecades = function(e, value) {
      this.removeTableHeadElement();
      var numCells = 4;
      var yearCell = 12;
      var tdEles = [];
      var localDate = new Date(this.checkValue(this.currentDate));
      localDate.setMonth(0);
      localDate.setDate(1);
      var localYr = localDate.getFullYear();
      var startYr = new Date(localDate.setFullYear(localYr - localYr % 10));
      var endYr = new Date(localDate.setFullYear(localYr - localYr % 10 + (10 - 1)));
      var startFullYr = startYr.getFullYear();
      var endFullYr = endYr.getFullYear();
      var startHdrYr = this.globalize.formatDate(startYr, {
        format: null,
        type: "dateTime",
        skeleton: "y"
      });
      var endHdrYr = this.globalize.formatDate(endYr, { format: null, type: "dateTime", skeleton: "y" });
      this.headerTitleElement.textContent = startHdrYr + " - " + endHdrYr;
      var start = new Date(localYr - localYr % 10 - 1, 0, 1);
      var startYear = start.getFullYear();
      for (var rowIterator = 0; rowIterator < yearCell; ++rowIterator) {
        var year = startYear + rowIterator;
        localDate.setFullYear(year);
        var tdEle = this.dayCell(localDate);
        var dayLink = this.createElement("span");
        dayLink.textContent = this.globalize.formatDate(localDate, {
          format: null,
          type: "dateTime",
          skeleton: "y"
        });
        if (year < startFullYr || year > endFullYr) {
          addClass([tdEle], OTHERDECADE);
          if (!isNullOrUndefined(value) && localDate.getFullYear() === value.getFullYear()) {
            addClass([tdEle], SELECTED$2);
          }
          if (year < new Date(this.checkValue(this.min)).getFullYear() || year > new Date(this.checkValue(this.max)).getFullYear()) {
            addClass([tdEle], DISABLED$2);
          }
        } else if (year < new Date(this.checkValue(this.min)).getFullYear() || year > new Date(this.checkValue(this.max)).getFullYear()) {
          addClass([tdEle], DISABLED$2);
        } else if (!isNullOrUndefined(value) && localDate.getFullYear() === value.getFullYear()) {
          addClass([tdEle], SELECTED$2);
        } else {
          if (localDate.getFullYear() === this.currentDate.getFullYear() && !tdEle.classList.contains(DISABLED$2)) {
            addClass([tdEle], FOCUSEDDATE$1);
          }
        }
        if (!tdEle.classList.contains(DISABLED$2)) {
          EventHandler.add(tdEle, "click", this.clickHandler, this);
        }
        tdEle.appendChild(dayLink);
        tdEles.push(tdEle);
      }
      this.renderTemplate(tdEles, numCells, "e-decade", e, value);
    };
    CalendarBase2.prototype.dayCell = function(localDate) {
      var type = this.calendarMode === "Gregorian" ? "gregorian" : "islamic";
      var dateFormatOptions = { skeleton: "full", type: "dateTime", calendar: type };
      var date = this.globalize.parseDate(this.globalize.formatDate(localDate, dateFormatOptions), dateFormatOptions);
      var value;
      if (!isNullOrUndefined(date)) {
        value = date.valueOf();
      }
      var attrs = {
        className: CELL,
        attrs: { "id": "" + getUniqueID("" + value), "aria-selected": "false" }
      };
      return this.createElement("td", attrs);
    };
    CalendarBase2.prototype.firstDay = function(date) {
      var collection = this.currentView() !== "Decade" ? this.tableBodyElement.querySelectorAll("td:not(." + OTHERMONTH) : this.tableBodyElement.querySelectorAll("td:not(." + OTHERDECADE);
      if (collection.length) {
        for (var i = 0; i < collection.length; i++) {
          if (!collection[i].classList.contains(DISABLED$2)) {
            date = new Date(parseInt(collection[i].id, 0));
            break;
          }
        }
      }
      return date;
    };
    CalendarBase2.prototype.lastDay = function(date, view) {
      var lastDate = new Date(date.getFullYear(), date.getMonth() + 1, 0);
      if (view !== 2) {
        var timeOffset = Math.abs(lastDate.getTimezoneOffset() - this.firstDay(date).getTimezoneOffset());
        if (timeOffset) {
          lastDate.setHours(this.firstDay(date).getHours() + timeOffset / 60);
        }
        return this.findLastDay(lastDate);
      } else {
        return this.findLastDay(this.firstDay(lastDate));
      }
    };
    CalendarBase2.prototype.checkDateValue = function(value) {
      return !isNullOrUndefined(value) && value instanceof Date && !isNaN(+value) ? value : null;
    };
    CalendarBase2.prototype.findLastDay = function(date) {
      var collection = this.currentView() === "Decade" ? this.tableBodyElement.querySelectorAll("td:not(." + OTHERDECADE) : this.tableBodyElement.querySelectorAll("td:not(." + OTHERMONTH);
      if (collection.length) {
        for (var i = collection.length - 1; i >= 0; i--) {
          if (!collection[i].classList.contains(DISABLED$2)) {
            date = new Date(parseInt(collection[i].id, 0));
            break;
          }
        }
      }
      return date;
    };
    CalendarBase2.prototype.removeTableHeadElement = function() {
      if (this.getModuleName() === "calendar") {
        if (!isNullOrUndefined(this.element.querySelectorAll(".e-content table thead")[0])) {
          detach(this.tableHeadElement);
        }
      } else {
        if (!isNullOrUndefined(this.calendarElement.querySelectorAll(".e-content table thead")[0])) {
          detach(this.tableHeadElement);
        }
      }
    };
    CalendarBase2.prototype.renderTemplate = function(elements, count, classNm, e, value) {
      var view = this.getViewNumber(this.currentView());
      var trEle;
      this.tableBodyElement = this.createElement("tbody");
      this.table.appendChild(this.tableBodyElement);
      removeClass([this.contentElement, this.headerElement], [MONTH$2, DECADE, YEAR$2]);
      addClass([this.contentElement, this.headerElement], [classNm]);
      var weekNumCell = 41;
      var numberCell = 35;
      var otherMonthCell = 6;
      var row = count;
      var rowIterator = 0;
      for (var dayCell = 0; dayCell < elements.length / count; ++dayCell) {
        trEle = this.createElement("tr");
        for (rowIterator = 0 + rowIterator; rowIterator < row; rowIterator++) {
          if (!elements[rowIterator].classList.contains("e-week-number") && !isNullOrUndefined(elements[rowIterator].children[0])) {
            addClass([elements[rowIterator].children[0]], [LINK]);
            rippleEffect(elements[rowIterator].children[0], {
              duration: 600,
              isCenterRipple: true
            });
          }
          trEle.appendChild(elements[rowIterator]);
          if (this.weekNumber && rowIterator === otherMonthCell + 1 && elements[otherMonthCell + 1].classList.contains(OTHERMONTH)) {
            addClass([trEle], OTHERMONTHROW);
          }
          if (!this.weekNumber && rowIterator === otherMonthCell && elements[otherMonthCell].classList.contains(OTHERMONTH)) {
            addClass([trEle], OTHERMONTHROW);
          }
          if (this.weekNumber) {
            if (rowIterator === weekNumCell && elements[weekNumCell].classList.contains(OTHERMONTH)) {
              addClass([trEle], OTHERMONTHROW);
            }
          } else {
            if (rowIterator === numberCell && elements[numberCell].classList.contains(OTHERMONTH)) {
              addClass([trEle], OTHERMONTHROW);
            }
          }
        }
        row = row + count;
        rowIterator = rowIterator + 0;
        this.tableBodyElement.appendChild(trEle);
      }
      this.table.querySelector("tbody").className = this.effect;
      if (this.calendarMode === "Gregorian") {
        this.iconHandler();
      } else {
        this.islamicModule.islamicIconHandler();
      }
      if (view !== this.getViewNumber(this.currentView()) || view === 0 && view !== this.getViewNumber(this.currentView())) {
        this.navigateHandler(e);
      }
      this.setAriaActiveDescendant();
    };
    CalendarBase2.prototype.clickHandler = function(e, value) {
      this.clickEventEmitter(e);
      var eve = e.currentTarget;
      var view = this.getViewNumber(this.currentView());
      if (eve.classList.contains(OTHERMONTH)) {
        this.contentClick(e, 0, null, value);
      } else if (view === this.getViewNumber(this.depth) && this.getViewNumber(this.start) >= this.getViewNumber(this.depth)) {
        this.contentClick(e, 1, null, value);
      } else if (2 === view) {
        this.contentClick(e, 1, null, value);
      } else if (!eve.classList.contains(OTHERMONTH) && view === 0) {
        this.selectDate(e, this.getIdValue(e, null), null);
      } else {
        this.contentClick(e, 0, eve, value);
      }
      if (this.getModuleName() === "calendar") {
        this.table.focus();
      }
    };
    CalendarBase2.prototype.clickEventEmitter = function(e) {
      e.preventDefault();
    };
    CalendarBase2.prototype.contentClick = function(e, view, element2, value) {
      var currentView = this.getViewNumber(this.currentView());
      var d = this.getIdValue(e, element2);
      switch (view) {
        case 0:
          if (currentView === this.getViewNumber(this.depth) && this.getViewNumber(this.start) >= this.getViewNumber(this.depth)) {
            detach(this.tableBodyElement);
            this.currentDate = d;
            this.effect = ZOOMIN;
            this.renderMonths(e);
          } else {
            if (this.calendarMode === "Gregorian") {
              this.currentDate.setMonth(d.getMonth());
              if (d.getMonth() > 0 && this.currentDate.getMonth() !== d.getMonth()) {
                this.currentDate.setDate(0);
              }
              this.currentDate.setFullYear(d.getFullYear());
            } else {
              this.currentDate = d;
            }
            this.effect = ZOOMIN;
            detach(this.tableBodyElement);
            this.renderMonths(e);
          }
          break;
        case 1:
          if (currentView === this.getViewNumber(this.depth) && this.getViewNumber(this.start) >= this.getViewNumber(this.depth)) {
            this.selectDate(e, d, null);
          } else {
            if (this.calendarMode === "Gregorian") {
              this.currentDate.setFullYear(d.getFullYear());
            } else {
              this.islamicPreviousHeader = this.headerElement.textContent;
              var islamicDate = this.islamicModule.getIslamicDate(d);
              this.currentDate = this.islamicModule.toGregorian(islamicDate.year, islamicDate.month, 1);
            }
            this.effect = ZOOMIN;
            detach(this.tableBodyElement);
            this.renderYears(e);
          }
      }
    };
    CalendarBase2.prototype.switchView = function(view, e, multiSelection, isCustomDate) {
      switch (view) {
        case 0:
          detach(this.tableBodyElement);
          this.renderMonths(e, null, isCustomDate);
          break;
        case 1:
          detach(this.tableBodyElement);
          this.renderYears(e);
          break;
        case 2:
          detach(this.tableBodyElement);
          this.renderDecades(e);
      }
    };
    CalendarBase2.prototype.getModuleName = function() {
      return "calendar";
    };
    CalendarBase2.prototype.requiredModules = function() {
      var modules = [];
      if (this) {
        modules.push({ args: [this], member: "islamic" });
      }
      return modules;
    };
    CalendarBase2.prototype.getPersistData = function() {
      var keyEntity = ["value"];
      return this.addOnPersist(keyEntity);
    };
    CalendarBase2.prototype.onPropertyChanged = function(newProp, oldProp, multiSelection, values) {
      this.effect = "";
      for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {
        var prop = _a[_i];
        switch (prop) {
          case "enableRtl":
            if (newProp.enableRtl) {
              if (this.getModuleName() === "calendar") {
                this.element.classList.add("e-rtl");
              } else {
                this.calendarElement.classList.add("e-rtl");
              }
            } else {
              if (this.getModuleName() === "calendar") {
                this.element.classList.remove("e-rtl");
              } else {
                this.calendarElement.classList.remove("e-rtl");
              }
            }
            break;
          case "dayHeaderFormat":
            this.getCultureValues();
            if (this.getModuleName() !== "datepicker") {
              this.createContentHeader();
            } else if (this.calendarElement) {
              this.createContentHeader();
            }
            this.adjustLongHeaderSize();
            break;
          case "min":
          case "max":
            this.rangeValidation(this.min, this.max);
            if (prop === "min") {
              this.setProperties({ min: this.checkDateValue(new Date(this.checkValue(newProp.min))) }, true);
            } else {
              this.setProperties({ max: this.checkDateValue(new Date(this.checkValue(newProp.max))) }, true);
            }
            this.setProperties({ start: this.currentView() }, true);
            if (this.tableBodyElement) {
              detach(this.tableBodyElement);
            }
            this.minMaxUpdate();
            if (multiSelection) {
              this.validateValues(multiSelection, values);
            }
            if (this.getModuleName() !== "datepicker") {
              this.createContentBody();
            } else if (this.calendarElement) {
              this.createContentBody();
            }
            if ((this.todayDate < this.min || this.max < this.todayDate) && this.footer && this.todayElement) {
              detach(this.todayElement);
              detach(this.footer);
              this.todayElement = this.footer = null;
              this.createContentFooter();
            } else {
              if (this.footer && this.todayElement && this.todayElement.classList.contains("e-disabled")) {
                removeClass([this.todayElement], DISABLED$2);
                detach(this.todayElement);
                detach(this.footer);
                this.todayElement = this.footer = null;
                this.createContentFooter();
              }
            }
            break;
          case "start":
          case "depth":
          case "weekNumber":
          case "firstDayOfWeek":
          case "weekRule":
            this.checkView();
            if (this.getModuleName() !== "datepicker") {
              this.createContentHeader();
              this.createContentBody();
            } else if (this.calendarElement) {
              this.createContentHeader();
              this.createContentBody();
            }
            break;
          case "locale":
            this.globalize = new Internationalization(this.locale);
            if (this.getModuleName() !== "datepicker") {
              this.createContentHeader();
              this.createContentBody();
            } else if (this.calendarElement) {
              this.createContentHeader();
              this.createContentBody();
            }
            this.l10.setLocale(this.locale);
            this.updateFooter();
            break;
          case "showTodayButton":
            if (newProp.showTodayButton) {
              this.createContentFooter();
            } else {
              if (!isNullOrUndefined(this.todayElement) && !isNullOrUndefined(this.footer)) {
                detach(this.todayElement);
                detach(this.footer);
                this.todayElement = this.footer = void 0;
              }
            }
            this.setProperties({ showTodayButton: newProp.showTodayButton }, true);
            break;
        }
      }
    };
    CalendarBase2.prototype.validateValues = function(multiSelection, values) {
      if (multiSelection && !isNullOrUndefined(values) && values.length > 0) {
        var copyValues = this.copyValues(values);
        for (var skipIndex = 0; skipIndex < copyValues.length; skipIndex++) {
          var tempValue = copyValues[skipIndex];
          var type = this.calendarMode === "Gregorian" ? "gregorian" : "islamic";
          var tempValueString = void 0;
          if (this.calendarMode === "Gregorian") {
            tempValueString = this.globalize.formatDate(tempValue, { type: "date", skeleton: "yMd" });
          } else {
            tempValueString = this.globalize.formatDate(tempValue, { type: "dateTime", skeleton: "full", calendar: "islamic" });
          }
          var minFormatOption = { type: "date", skeleton: "yMd", calendar: type };
          var minStringValue = this.globalize.formatDate(this.min, minFormatOption);
          var minString = minStringValue;
          var maxFormatOption = { type: "date", skeleton: "yMd", calendar: type };
          var maxStringValue = this.globalize.formatDate(this.max, maxFormatOption);
          var maxString = maxStringValue;
          if (+new Date(tempValueString) < +new Date(minString) || +new Date(tempValueString) > +new Date(maxString)) {
            copyValues.splice(skipIndex, 1);
            skipIndex = -1;
          }
        }
        this.setProperties({ values: copyValues }, true);
      }
    };
    CalendarBase2.prototype.setValueUpdate = function() {
      if (!isNullOrUndefined(this.tableBodyElement)) {
        detach(this.tableBodyElement);
        this.setProperties({ start: this.currentView() }, true);
        this.createContentBody();
      }
    };
    CalendarBase2.prototype.copyValues = function(values) {
      var copyValues = [];
      if (!isNullOrUndefined(values) && values.length > 0) {
        for (var index = 0; index < values.length; index++) {
          copyValues.push(/* @__PURE__ */ new Date(+values[index]));
        }
      }
      return copyValues;
    };
    CalendarBase2.prototype.titleUpdate = function(date, view) {
      var globalize = new Internationalization(this.locale);
      var dayFormatOptions;
      var monthFormatOptions;
      var type = this.calendarMode === "Gregorian" ? "gregorian" : "islamic";
      if (this.calendarMode === "Gregorian") {
        dayFormatOptions = globalize.formatDate(date, { type: "dateTime", skeleton: "yMMMM", calendar: type });
        monthFormatOptions = globalize.formatDate(date, {
          format: null,
          type: "dateTime",
          skeleton: "y",
          calendar: type
        });
      } else {
        dayFormatOptions = globalize.formatDate(date, { type: "dateTime", format: "MMMM y", calendar: type });
        monthFormatOptions = globalize.formatDate(date, { type: "dateTime", format: "y", calendar: type });
      }
      switch (view) {
        case "days":
          this.headerTitleElement.textContent = this.toCapitalize(dayFormatOptions);
          break;
        case "months":
          this.headerTitleElement.textContent = monthFormatOptions;
      }
    };
    CalendarBase2.prototype.setActiveDescendant = function() {
      var id;
      var focusedEle = this.tableBodyElement.querySelector("tr td.e-focused-date");
      var selectedEle = this.tableBodyElement.querySelector("tr td.e-selected");
      var type = this.calendarMode === "Gregorian" ? "gregorian" : "islamic";
      var title;
      var view = this.currentView();
      if (view === "Month") {
        title = this.globalize.formatDate(this.currentDate, { type: "date", skeleton: "full", calendar: type });
      } else if (view === "Year") {
        if (type !== "islamic") {
          title = this.globalize.formatDate(this.currentDate, { type: "date", skeleton: "yMMMM", calendar: type });
        } else {
          title = this.globalize.formatDate(this.currentDate, { type: "date", skeleton: "GyMMM", calendar: type });
        }
      } else {
        title = this.globalize.formatDate(this.currentDate, {
          format: null,
          type: "date",
          skeleton: "y",
          calendar: type
        });
      }
      if (selectedEle || focusedEle) {
        if (!isNullOrUndefined(selectedEle)) {
          selectedEle.setAttribute("aria-selected", "true");
        }
        (focusedEle || selectedEle).setAttribute("aria-label", title);
        id = (focusedEle || selectedEle).getAttribute("id");
      }
      return id;
    };
    CalendarBase2.prototype.iconHandler = function() {
      new Date(this.checkValue(this.currentDate)).setDate(1);
      switch (this.currentView()) {
        case "Month":
          this.previousIconHandler(this.compareMonth(new Date(this.checkValue(this.currentDate)), this.min) < 1);
          this.nextIconHandler(this.compareMonth(new Date(this.checkValue(this.currentDate)), this.max) > -1);
          break;
        case "Year":
          this.previousIconHandler(this.compareYear(new Date(this.checkValue(this.currentDate)), this.min) < 1);
          this.nextIconHandler(this.compareYear(new Date(this.checkValue(this.currentDate)), this.max) > -1);
          break;
        case "Decade":
          this.previousIconHandler(this.compareDecade(new Date(this.checkValue(this.currentDate)), this.min) < 1);
          this.nextIconHandler(this.compareDecade(new Date(this.checkValue(this.currentDate)), this.max) > -1);
      }
    };
    CalendarBase2.prototype.destroy = function() {
      if (this.getModuleName() === "calendar" && this.element) {
        removeClass([this.element], [ROOT$4]);
      } else {
        if (this.calendarElement && this.element) {
          removeClass([this.element], [ROOT$4]);
        }
      }
      if (this.getModuleName() === "calendar" && this.element) {
        if (!isNullOrUndefined(this.headerTitleElement)) {
          EventHandler.remove(this.headerTitleElement, "click", this.navigateTitle);
        }
        if (this.todayElement) {
          EventHandler.remove(this.todayElement, "click", this.todayButtonClick);
        }
        this.previousIconHandler(true);
        this.nextIconHandler(true);
        this.keyboardModule.destroy();
        this.element.removeAttribute("data-role");
        if (!isNullOrUndefined(this.calendarEleCopy.getAttribute("tabindex"))) {
          this.element.setAttribute("tabindex", this.tabIndex);
        } else {
          this.element.removeAttribute("tabindex");
        }
      }
      if (this.element) {
        this.element.innerHTML = "";
      }
      this.todayElement = null;
      this.tableBodyElement = null;
      this.renderDayCellArgs = null;
      this.headerElement = null;
      this.nextIcon = null;
      this.table = null;
      this.tableHeadElement = null;
      this.previousIcon = null;
      this.headerTitleElement = null;
      this.footer = null;
      this.contentElement = null;
      _super.prototype.destroy.call(this);
    };
    CalendarBase2.prototype.title = function(e) {
      var currentView = this.getViewNumber(this.currentView());
      this.effect = ZOOMIN;
      this.switchView(++currentView, e);
    };
    CalendarBase2.prototype.getViewNumber = function(stringVal) {
      if (stringVal === "Month") {
        return 0;
      } else if (stringVal === "Year") {
        return 1;
      } else {
        return 2;
      }
    };
    CalendarBase2.prototype.navigateTitle = function(e) {
      e.preventDefault();
      this.title(e);
      if (this.getModuleName() === "calendar") {
        this.table.focus();
      }
    };
    CalendarBase2.prototype.previous = function() {
      this.effect = "";
      var currentView = this.getViewNumber(this.currentView());
      switch (this.currentView()) {
        case "Month":
          this.addMonths(this.currentDate, -1);
          this.switchView(currentView);
          break;
        case "Year":
          this.addYears(this.currentDate, -1);
          this.switchView(currentView);
          break;
        case "Decade":
          this.addYears(this.currentDate, -10);
          this.switchView(currentView);
          break;
      }
    };
    CalendarBase2.prototype.navigatePrevious = function(e) {
      e.preventDefault();
      if (this.calendarMode === "Gregorian") {
        this.previous();
      } else {
        this.islamicModule.islamicPrevious();
      }
      this.triggerNavigate(e);
      if (this.getModuleName() === "calendar") {
        this.table.focus();
      }
    };
    CalendarBase2.prototype.next = function() {
      this.effect = "";
      var currentView = this.getViewNumber(this.currentView());
      switch (this.currentView()) {
        case "Month":
          this.addMonths(this.currentDate, 1);
          this.switchView(currentView);
          break;
        case "Year":
          this.addYears(this.currentDate, 1);
          this.switchView(currentView);
          break;
        case "Decade":
          this.addYears(this.currentDate, 10);
          this.switchView(currentView);
          break;
      }
    };
    CalendarBase2.prototype.navigateNext = function(eve) {
      eve.preventDefault();
      if (this.calendarMode === "Gregorian") {
        this.next();
      } else {
        this.islamicModule.islamicNext();
      }
      this.triggerNavigate(eve);
      if (this.getModuleName() === "calendar") {
        this.table.focus();
      }
    };
    CalendarBase2.prototype.navigateTo = function(view, date, isCustomDate) {
      if (+date >= +this.min && +date <= +this.max) {
        this.currentDate = date;
      }
      if (+date <= +this.min) {
        this.currentDate = new Date(this.checkValue(this.min));
      }
      if (+date >= +this.max) {
        this.currentDate = new Date(this.checkValue(this.max));
      }
      if (this.getViewNumber(this.depth) >= this.getViewNumber(view)) {
        if (this.getViewNumber(this.depth) <= this.getViewNumber(this.start) || this.getViewNumber(this.depth) === this.getViewNumber(view)) {
          view = this.depth;
        }
      }
      this.switchView(this.getViewNumber(view), null, null, isCustomDate);
    };
    CalendarBase2.prototype.currentView = function() {
      if (this.contentElement.classList.contains(YEAR$2)) {
        return "Year";
      } else if (this.contentElement.classList.contains(DECADE)) {
        return "Decade";
      } else {
        return "Month";
      }
    };
    CalendarBase2.prototype.getDateVal = function(date, value) {
      return !isNullOrUndefined(value) && date.getDate() === value.getDate() && date.getMonth() === value.getMonth() && date.getFullYear() === value.getFullYear();
    };
    CalendarBase2.prototype.getCultureObjects = function(ld, c) {
      var gregorianFormat = ".dates.calendars.gregorian.days.format." + this.dayHeaderFormat.toLowerCase();
      var islamicFormat = ".dates.calendars.islamic.days.format." + this.dayHeaderFormat.toLowerCase();
      var mainVal = "main.";
      if (this.calendarMode === "Gregorian") {
        return getValue(mainVal + "" + this.locale + gregorianFormat, ld);
      } else {
        return getValue("main." + this.locale + islamicFormat, ld);
      }
    };
    CalendarBase2.prototype.getWeek = function(d) {
      var currentDate = new Date(this.checkValue(d)).valueOf();
      var date = new Date(d.getFullYear(), 0, 1).valueOf();
      return Math.ceil((currentDate - date + dayMilliSeconds) / dayMilliSeconds / 7);
    };
    CalendarBase2.prototype.setStartDate = function(date, time) {
      var tzOffset = date.getTimezoneOffset();
      var d = new Date(date.getTime() + time);
      var tzOffsetDiff = d.getTimezoneOffset() - tzOffset;
      date.setTime(d.getTime() + tzOffsetDiff * minutesMilliSeconds);
    };
    CalendarBase2.prototype.addMonths = function(date, i) {
      if (this.calendarMode === "Gregorian") {
        var day = date.getDate();
        date.setDate(1);
        date.setMonth(date.getMonth() + i);
        date.setDate(Math.min(day, this.getMaxDays(date)));
      } else {
        var islamicDate = this.islamicModule.getIslamicDate(date);
        this.currentDate = this.islamicModule.toGregorian(islamicDate.year, islamicDate.month + i, 1);
      }
    };
    CalendarBase2.prototype.addYears = function(date, i) {
      if (this.calendarMode === "Gregorian") {
        var day = date.getDate();
        date.setDate(1);
        date.setFullYear(date.getFullYear() + i);
        date.setDate(Math.min(day, this.getMaxDays(date)));
      } else {
        var islamicDate = this.islamicModule.getIslamicDate(date);
        this.currentDate = this.islamicModule.toGregorian(islamicDate.year + i, islamicDate.month, 1);
      }
    };
    CalendarBase2.prototype.getIdValue = function(e, element2) {
      var eve;
      if (e) {
        eve = e.currentTarget;
      } else {
        eve = element2;
      }
      var type = this.calendarMode === "Gregorian" ? "gregorian" : "islamic";
      var dateFormatOptions = { type: "dateTime", skeleton: "full", calendar: type };
      var dateString = this.globalize.formatDate(new Date(parseInt("" + eve.getAttribute("id"), 0)), dateFormatOptions);
      var date = this.globalize.parseDate(dateString, dateFormatOptions);
      var value = date.valueOf() - date.valueOf() % 1e3;
      return new Date(value);
    };
    CalendarBase2.prototype.adjustLongHeaderSize = function() {
      removeClass([this.element], DAYHEADERLONG);
      if (this.dayHeaderFormat === "Wide") {
        addClass([this.getModuleName() === "calendar" ? this.element : this.calendarElement], DAYHEADERLONG);
      }
    };
    CalendarBase2.prototype.selectDate = function(e, date, node, multiSelection, values) {
      var element2 = node || e.currentTarget;
      this.isDateSelected = false;
      if (this.currentView() === "Decade") {
        this.setDateDecade(this.currentDate, date.getFullYear());
      } else if (this.currentView() === "Year") {
        this.setDateYear(this.currentDate, date);
      } else {
        if (multiSelection && !this.checkPresentDate(date, values)) {
          var copyValues = this.copyValues(values);
          if (!isNullOrUndefined(values) && copyValues.length > 0) {
            copyValues.push(new Date(this.checkValue(date)));
            this.setProperties({ values: copyValues }, true);
            this.setProperties({ value: values[values.length - 1] }, true);
          } else {
            this.setProperties({ values: [new Date(this.checkValue(date))] }, true);
          }
        } else {
          this.setProperties({ value: new Date(this.checkValue(date)) }, true);
        }
        this.currentDate = new Date(this.checkValue(date));
      }
      var tableBodyElement = closest(element2, "." + ROOT$4);
      if (isNullOrUndefined(tableBodyElement)) {
        tableBodyElement = this.tableBodyElement;
      }
      if (!multiSelection && !isNullOrUndefined(tableBodyElement.querySelector("." + SELECTED$2))) {
        removeClass([tableBodyElement.querySelector("." + SELECTED$2)], SELECTED$2);
      }
      if (!multiSelection && !isNullOrUndefined(tableBodyElement.querySelector("." + FOCUSEDDATE$1))) {
        removeClass([tableBodyElement.querySelector("." + FOCUSEDDATE$1)], FOCUSEDDATE$1);
      }
      if (multiSelection) {
        var copyValues = this.copyValues(values);
        var collection = Array.prototype.slice.call(this.tableBodyElement.querySelectorAll("td"));
        for (var index = 0; index < collection.length; index++) {
          var tempElement = tableBodyElement.querySelectorAll("td." + FOCUSEDDATE$1)[0];
          var selectedElement = tableBodyElement.querySelectorAll("td." + SELECTED$2)[0];
          if (collection[index] === tempElement) {
            removeClass([collection[index]], FOCUSEDDATE$1);
          }
          if (collection[index] === selectedElement && !this.checkPresentDate(new Date(parseInt(selectedElement.getAttribute("id").split("_")[0], 10)), values)) {
            removeClass([collection[index]], SELECTED$2);
          }
        }
        if (element2.classList.contains(SELECTED$2)) {
          removeClass([element2], SELECTED$2);
          for (var i = 0; i < copyValues.length; i++) {
            var type = this.calendarMode === "Gregorian" ? "gregorian" : "islamic";
            var formatOptions = { format: null, type: "date", skeleton: "short", calendar: type };
            var localDateString = this.globalize.formatDate(date, formatOptions);
            var tempDateString = this.globalize.formatDate(copyValues[i], formatOptions);
            if (localDateString === tempDateString) {
              var index = copyValues.indexOf(copyValues[i]);
              copyValues.splice(index, 1);
              addClass([element2], FOCUSEDDATE$1);
            }
          }
          this.setProperties({ values: copyValues }, true);
        } else {
          addClass([element2], SELECTED$2);
        }
      } else {
        addClass([element2], SELECTED$2);
      }
      this.isDateSelected = true;
    };
    CalendarBase2.prototype.checkPresentDate = function(dates, values) {
      var previousValue = false;
      if (!isNullOrUndefined(values)) {
        for (var checkPrevious = 0; checkPrevious < values.length; checkPrevious++) {
          var type = this.calendarMode === "Gregorian" ? "gregorian" : "islamic";
          var localDateString = this.globalize.formatDate(dates, {
            format: null,
            type: "date",
            skeleton: "short",
            calendar: type
          });
          var tempDateString = this.globalize.formatDate(values[checkPrevious], {
            format: null,
            type: "date",
            skeleton: "short",
            calendar: type
          });
          if (localDateString === tempDateString) {
            previousValue = true;
          }
        }
      }
      return previousValue;
    };
    CalendarBase2.prototype.setAriaActiveDescendant = function() {
      attributes(this.table, {
        "aria-activedescendant": "" + this.setActiveDescendant()
      });
    };
    CalendarBase2.prototype.previousIconHandler = function(disabled) {
      if (disabled) {
        if (!isNullOrUndefined(this.previousIcon)) {
          EventHandler.remove(this.previousIcon, "click", this.navigatePreviousHandler);
          addClass([this.previousIcon], "" + DISABLED$2);
          addClass([this.previousIcon], "" + OVERLAY);
          this.previousIcon.setAttribute("aria-disabled", "true");
        }
      } else {
        EventHandler.add(this.previousIcon, "click", this.navigatePreviousHandler);
        removeClass([this.previousIcon], "" + DISABLED$2);
        removeClass([this.previousIcon], "" + OVERLAY);
        this.previousIcon.setAttribute("aria-disabled", "false");
      }
    };
    CalendarBase2.prototype.renderDayCellEvent = function(args) {
      extend(this.renderDayCellArgs, { name: "renderDayCell" });
      this.trigger("renderDayCell", args);
    };
    CalendarBase2.prototype.navigatedEvent = function(eve) {
      extend(this.navigatedArgs, { name: "navigated", event: eve });
      this.trigger("navigated", this.navigatedArgs);
    };
    CalendarBase2.prototype.triggerNavigate = function(event) {
      this.navigatedArgs = { view: this.currentView(), date: this.currentDate };
      this.navigatedEvent(event);
    };
    CalendarBase2.prototype.nextIconHandler = function(disabled) {
      if (disabled) {
        if (!isNullOrUndefined(this.previousIcon)) {
          EventHandler.remove(this.nextIcon, "click", this.navigateNextHandler);
          addClass([this.nextIcon], DISABLED$2);
          addClass([this.nextIcon], OVERLAY);
          this.nextIcon.setAttribute("aria-disabled", "true");
        }
      } else {
        EventHandler.add(this.nextIcon, "click", this.navigateNextHandler);
        removeClass([this.nextIcon], DISABLED$2);
        removeClass([this.nextIcon], OVERLAY);
        this.nextIcon.setAttribute("aria-disabled", "false");
      }
    };
    CalendarBase2.prototype.compare = function(startDate, endDate, modifier) {
      var start = endDate.getFullYear();
      var end;
      var result;
      end = start;
      result = 0;
      if (modifier) {
        start = start - start % modifier;
        end = start - start % modifier + modifier - 1;
      }
      if (startDate.getFullYear() > end) {
        result = 1;
      } else if (startDate.getFullYear() < start) {
        result = -1;
      }
      return result;
    };
    CalendarBase2.prototype.isMinMaxRange = function(date) {
      return +date >= +this.min && +date <= +this.max;
    };
    CalendarBase2.prototype.isMonthYearRange = function(date) {
      if (this.calendarMode === "Gregorian") {
        return date.getMonth() >= this.min.getMonth() && date.getFullYear() >= this.min.getFullYear() && date.getMonth() <= this.max.getMonth() && date.getFullYear() <= this.max.getFullYear();
      } else {
        var islamicDate = this.islamicModule.getIslamicDate(date);
        return islamicDate.month >= this.islamicModule.getIslamicDate(new Date(1944, 1, 18)).month && islamicDate.year >= this.islamicModule.getIslamicDate(new Date(1944, 1, 18)).year && islamicDate.month <= this.islamicModule.getIslamicDate(new Date(2069, 1, 16)).month && islamicDate.year <= this.islamicModule.getIslamicDate(new Date(2069, 1, 16)).year;
      }
    };
    CalendarBase2.prototype.compareYear = function(start, end) {
      return this.compare(start, end, 0);
    };
    CalendarBase2.prototype.compareDecade = function(start, end) {
      return this.compare(start, end, 10);
    };
    CalendarBase2.prototype.shiftArray = function(array, i) {
      return array.slice(i).concat(array.slice(0, i));
    };
    CalendarBase2.prototype.addDay = function(date, i, e, max, min) {
      var column = i;
      var value = /* @__PURE__ */ new Date(+date);
      if (!isNullOrUndefined(this.tableBodyElement) && !isNullOrUndefined(e)) {
        while (this.findNextTD(/* @__PURE__ */ new Date(+date), column, max, min)) {
          column += i;
        }
        var rangeValue = new Date(value.setDate(value.getDate() + column));
        column = +rangeValue > +max || +rangeValue < +min ? column === i ? i - i : i : column;
      }
      date.setDate(date.getDate() + column);
    };
    CalendarBase2.prototype.findNextTD = function(date, column, max, min) {
      var value = new Date(date.setDate(date.getDate() + column));
      var collection = [];
      var isDisabled = false;
      if ((!isNullOrUndefined(value) && value.getMonth()) === (!isNullOrUndefined(this.currentDate) && this.currentDate.getMonth())) {
        var tdEles = void 0;
        if (this.calendarMode === "Gregorian") {
          tdEles = this.renderDays(value);
        } else {
          tdEles = this.islamicModule.islamicRenderDays(this.currentDate, value);
        }
        collection = tdEles.filter(function(element2) {
          return element2.classList.contains(DISABLED$2);
        });
      } else {
        collection = this.tableBodyElement.querySelectorAll("td." + DISABLED$2);
      }
      if (+value <= +max && +value >= +min) {
        if (collection.length) {
          for (var i = 0; i < collection.length; i++) {
            isDisabled = +value === +new Date(parseInt(collection[i].id, 0)) ? true : false;
            if (isDisabled) {
              break;
            }
          }
        }
      }
      return isDisabled;
    };
    CalendarBase2.prototype.getMaxDays = function(d) {
      var date;
      var tmpDate = new Date(this.checkValue(d));
      date = 28;
      var month2 = tmpDate.getMonth();
      while (tmpDate.getMonth() === month2) {
        ++date;
        tmpDate.setDate(date);
      }
      return date - 1;
    };
    CalendarBase2.prototype.setDateDecade = function(date, year) {
      date.setFullYear(year);
      this.setProperties({ value: new Date(this.checkValue(date)) }, true);
    };
    CalendarBase2.prototype.setDateYear = function(date, value) {
      date.setFullYear(value.getFullYear(), value.getMonth(), date.getDate());
      if (value.getMonth() !== date.getMonth()) {
        date.setDate(0);
        this.currentDate = new Date(this.checkValue(value));
      }
      this.setProperties({ value: new Date(this.checkValue(date)) }, true);
    };
    CalendarBase2.prototype.compareMonth = function(start, end) {
      var result;
      if (start.getFullYear() > end.getFullYear()) {
        result = 1;
      } else if (start.getFullYear() < end.getFullYear()) {
        result = -1;
      } else {
        result = start.getMonth() === end.getMonth() ? 0 : start.getMonth() > end.getMonth() ? 1 : -1;
      }
      return result;
    };
    CalendarBase2.prototype.checkValue = function(inValue) {
      if (inValue instanceof Date) {
        return inValue.toUTCString();
      } else {
        return "" + inValue;
      }
    };
    CalendarBase2.prototype.checkView = function() {
      if (this.start !== "Decade" && this.start !== "Year") {
        this.setProperties({ start: "Month" }, true);
      }
      if (this.depth !== "Decade" && this.depth !== "Year") {
        this.setProperties({ depth: "Month" }, true);
      }
      if (this.getViewNumber(this.depth) > this.getViewNumber(this.start)) {
        this.setProperties({ depth: "Month" }, true);
      }
    };
    CalendarBase2.prototype.getDate = function(date, timezone) {
      if (timezone) {
        date = new Date(date.toLocaleString("en-US", { timeZone: timezone }));
      }
      return date;
    };
    __decorate$e([
      Property(new Date(1900, 0, 1))
    ], CalendarBase2.prototype, "min", void 0);
    __decorate$e([
      Property(true)
    ], CalendarBase2.prototype, "enabled", void 0);
    __decorate$e([
      Property(null)
    ], CalendarBase2.prototype, "cssClass", void 0);
    __decorate$e([
      Property(new Date(2099, 11, 31))
    ], CalendarBase2.prototype, "max", void 0);
    __decorate$e([
      Property(null)
    ], CalendarBase2.prototype, "firstDayOfWeek", void 0);
    __decorate$e([
      Property("Gregorian")
    ], CalendarBase2.prototype, "calendarMode", void 0);
    __decorate$e([
      Property("Month")
    ], CalendarBase2.prototype, "start", void 0);
    __decorate$e([
      Property("Month")
    ], CalendarBase2.prototype, "depth", void 0);
    __decorate$e([
      Property(false)
    ], CalendarBase2.prototype, "weekNumber", void 0);
    __decorate$e([
      Property("FirstDay")
    ], CalendarBase2.prototype, "weekRule", void 0);
    __decorate$e([
      Property(true)
    ], CalendarBase2.prototype, "showTodayButton", void 0);
    __decorate$e([
      Property("Short")
    ], CalendarBase2.prototype, "dayHeaderFormat", void 0);
    __decorate$e([
      Property(false)
    ], CalendarBase2.prototype, "enablePersistence", void 0);
    __decorate$e([
      Property(null)
    ], CalendarBase2.prototype, "keyConfigs", void 0);
    __decorate$e([
      Property(null)
    ], CalendarBase2.prototype, "serverTimezoneOffset", void 0);
    __decorate$e([
      Event$1()
    ], CalendarBase2.prototype, "created", void 0);
    __decorate$e([
      Event$1()
    ], CalendarBase2.prototype, "destroyed", void 0);
    __decorate$e([
      Event$1()
    ], CalendarBase2.prototype, "navigated", void 0);
    __decorate$e([
      Event$1()
    ], CalendarBase2.prototype, "renderDayCell", void 0);
    CalendarBase2 = __decorate$e([
      NotifyPropertyChanges
    ], CalendarBase2);
    return CalendarBase2;
  }(Component)
);
var Calendar = (
  /** @class */
  function(_super) {
    __extends$o(Calendar2, _super);
    function Calendar2(options, element2) {
      return _super.call(this, options, element2) || this;
    }
    Calendar2.prototype.render = function() {
      if (this.calendarMode === "Islamic" && this.islamicModule === void 0) {
        throwError("Requires the injectable Islamic modules to render Calendar in Islamic mode");
      }
      if (this.isMultiSelection && typeof this.values === "object" && !isNullOrUndefined(this.values) && this.values.length > 0) {
        var tempValues = [];
        var copyValues = [];
        for (var limit = 0; limit < this.values.length; limit++) {
          if (tempValues.indexOf(+this.values[limit]) === -1) {
            tempValues.push(+this.values[limit]);
            copyValues.push(this.values[limit]);
          }
        }
        this.setProperties({ values: copyValues }, true);
        for (var index = 0; index < this.values.length; index++) {
          if (!this.checkDateValue(this.values[index])) {
            if (typeof this.values[index] === "string" && this.checkDateValue(new Date(this.checkValue(this.values[index])))) {
              var copyDate = new Date(this.checkValue(this.values[index]));
              this.values.splice(index, 1);
              this.values.splice(index, 0, copyDate);
            } else {
              this.values.splice(index, 1);
            }
          }
        }
        this.setProperties({ value: this.values[this.values.length - 1] }, true);
        this.previousValues = this.values.length;
      }
      this.validateDate();
      this.minMaxUpdate();
      if (this.getModuleName() === "calendar") {
        this.setEnable(this.enabled);
        this.setClass(this.cssClass);
      }
      _super.prototype.render.call(this);
      if (this.getModuleName() === "calendar") {
        var form = closest(this.element, "form");
        if (form) {
          EventHandler.add(form, "reset", this.formResetHandler.bind(this));
        }
        this.setTimeZone(this.serverTimezoneOffset);
      }
      this.renderComplete();
    };
    Calendar2.prototype.setEnable = function(enable) {
      if (!enable) {
        addClass([this.element], DISABLED$2);
      } else {
        removeClass([this.element], DISABLED$2);
      }
    };
    Calendar2.prototype.setClass = function(newCssClass, oldCssClass) {
      if (!isNullOrUndefined(oldCssClass)) {
        oldCssClass = oldCssClass.replace(/\s+/g, " ").trim();
      }
      if (!isNullOrUndefined(newCssClass)) {
        newCssClass = newCssClass.replace(/\s+/g, " ").trim();
      }
      if (!isNullOrUndefined(oldCssClass) && oldCssClass !== "") {
        removeClass([this.element], oldCssClass.split(" "));
      }
      if (!isNullOrUndefined(newCssClass)) {
        addClass([this.element], newCssClass.split(" "));
      }
    };
    Calendar2.prototype.isDayLightSaving = function() {
      var secondOffset = new Date(this.value.getFullYear(), 6, 1).getTimezoneOffset();
      var firstOffset = new Date(this.value.getFullYear(), 0, 1).getTimezoneOffset();
      return this.value.getTimezoneOffset() < Math.max(firstOffset, secondOffset);
    };
    Calendar2.prototype.setTimeZone = function(offsetValue) {
      if (!isNullOrUndefined(this.serverTimezoneOffset) && this.value) {
        var serverTimezoneDiff = offsetValue;
        var clientTimeZoneDiff = (/* @__PURE__ */ new Date()).getTimezoneOffset() / 60;
        var timeZoneDiff = serverTimezoneDiff + clientTimeZoneDiff;
        timeZoneDiff = this.isDayLightSaving() ? timeZoneDiff-- : timeZoneDiff;
        this.value = new Date(this.value.getTime() + timeZoneDiff * 60 * 60 * 1e3);
      }
    };
    Calendar2.prototype.formResetHandler = function() {
      this.setProperties({ value: null }, true);
    };
    Calendar2.prototype.validateDate = function() {
      if (typeof this.value === "string") {
        this.setProperties({ value: this.checkDateValue(new Date(this.checkValue(this.value))) }, true);
      }
      _super.prototype.validateDate.call(this, this.value);
      if (!isNullOrUndefined(this.value) && this.min <= this.max && this.value >= this.min && this.value <= this.max) {
        this.currentDate = new Date(this.checkValue(this.value));
      }
      if (isNaN(+this.value)) {
        this.setProperties({ value: null }, true);
      }
    };
    Calendar2.prototype.minMaxUpdate = function() {
      if (this.getModuleName() === "calendar") {
        if (!isNullOrUndefined(this.value) && this.value <= this.min && this.min <= this.max) {
          this.setProperties({ value: this.min }, true);
          this.changedArgs = { value: this.value };
        } else {
          if (!isNullOrUndefined(this.value) && this.value >= this.max && this.min <= this.max) {
            this.setProperties({ value: this.max }, true);
            this.changedArgs = { value: this.value };
          }
        }
      }
      if (this.getModuleName() !== "calendar" && !isNullOrUndefined(this.value)) {
        if (!isNullOrUndefined(this.value) && this.value < this.min && this.min <= this.max) {
          _super.prototype.minMaxUpdate.call(this, this.min);
        } else {
          if (!isNullOrUndefined(this.value) && this.value > this.max && this.min <= this.max) {
            _super.prototype.minMaxUpdate.call(this, this.max);
          }
        }
      } else {
        _super.prototype.minMaxUpdate.call(this, this.value);
      }
    };
    Calendar2.prototype.generateTodayVal = function(value) {
      var tempValue = /* @__PURE__ */ new Date();
      if (!isNullOrUndefined(this.timezone)) {
        tempValue = _super.prototype.getDate.call(this, tempValue, this.timezone);
      }
      if (value && isNullOrUndefined(this.timezone)) {
        tempValue.setHours(value.getHours());
        tempValue.setMinutes(value.getMinutes());
        tempValue.setSeconds(value.getSeconds());
        tempValue.setMilliseconds(value.getMilliseconds());
      } else {
        tempValue = new Date(tempValue.getFullYear(), tempValue.getMonth(), tempValue.getDate(), 0, 0, 0, 0);
      }
      return tempValue;
    };
    Calendar2.prototype.todayButtonClick = function(e) {
      if (this.showTodayButton) {
        var tempValue = this.generateTodayVal(this.value);
        this.setProperties({ value: tempValue }, true);
        this.isTodayClicked = true;
        this.todayButtonEvent = e;
        if (this.isMultiSelection) {
          var copyValues = this.copyValues(this.values);
          if (!_super.prototype.checkPresentDate.call(this, tempValue, this.values)) {
            copyValues.push(tempValue);
            this.setProperties({ values: copyValues });
          }
        }
        _super.prototype.todayButtonClick.call(this, e, /* @__PURE__ */ new Date(+this.value));
      }
    };
    Calendar2.prototype.keyActionHandle = function(e) {
      _super.prototype.keyActionHandle.call(this, e, this.value, this.isMultiSelection);
    };
    Calendar2.prototype.preRender = function() {
      var _this = this;
      this.changeHandler = function(e) {
        _this.triggerChange(e);
      };
      this.checkView();
      _super.prototype.preRender.call(this, this.value);
    };
    Calendar2.prototype.createContent = function() {
      this.previousDate = this.value;
      this.previousDateTime = this.value;
      _super.prototype.createContent.call(this);
    };
    Calendar2.prototype.minMaxDate = function(localDate) {
      return _super.prototype.minMaxDate.call(this, localDate);
    };
    Calendar2.prototype.renderMonths = function(e, value, isCustomDate) {
      _super.prototype.renderMonths.call(this, e, this.value, isCustomDate);
    };
    Calendar2.prototype.renderDays = function(currentDate, value, isMultiSelect, values, isCustomDate, e) {
      var tempDays = _super.prototype.renderDays.call(this, currentDate, this.value, this.isMultiSelection, this.values, isCustomDate, e);
      if (this.isMultiSelection) {
        _super.prototype.validateValues.call(this, this.isMultiSelection, this.values);
      }
      return tempDays;
    };
    Calendar2.prototype.renderYears = function(e) {
      if (this.calendarMode === "Gregorian") {
        _super.prototype.renderYears.call(this, e, this.value);
      } else {
        this.islamicModule.islamicRenderYears(e, this.value);
      }
    };
    Calendar2.prototype.renderDecades = function(e) {
      if (this.calendarMode === "Gregorian") {
        _super.prototype.renderDecades.call(this, e, this.value);
      } else {
        this.islamicModule.islamicRenderDecade(e, this.value);
      }
    };
    Calendar2.prototype.renderTemplate = function(elements, count, classNm, e) {
      if (this.calendarMode === "Gregorian") {
        _super.prototype.renderTemplate.call(this, elements, count, classNm, e, this.value);
      } else {
        this.islamicModule.islamicRenderTemplate(elements, count, classNm, e, this.value);
      }
      this.changedArgs = { value: this.value, values: this.values };
      this.changeHandler();
    };
    Calendar2.prototype.clickHandler = function(e) {
      var eve = e.currentTarget;
      this.isPopupClicked = true;
      if (eve.classList.contains(OTHERMONTH)) {
        if (this.isMultiSelection) {
          var copyValues = this.copyValues(this.values);
          if (copyValues.toString().indexOf(this.getIdValue(e, null).toString()) === -1) {
            copyValues.push(this.getIdValue(e, null));
            this.setProperties({ values: copyValues }, true);
            this.setProperties({ value: this.values[this.values.length - 1] }, true);
          } else {
            this.previousDates = true;
          }
        } else {
          this.setProperties({ value: this.getIdValue(e, null) }, true);
        }
      }
      var storeView = this.currentView();
      _super.prototype.clickHandler.call(this, e, this.value);
      if (this.isMultiSelection && this.currentDate !== this.value && !isNullOrUndefined(this.tableBodyElement.querySelectorAll("." + FOCUSEDDATE$1)[0]) && storeView === "Year") {
        this.tableBodyElement.querySelectorAll("." + FOCUSEDDATE$1)[0].classList.remove(FOCUSEDDATE$1);
      }
    };
    Calendar2.prototype.switchView = function(view, e, isMultiSelection, isCustomDate) {
      _super.prototype.switchView.call(this, view, e, this.isMultiSelection, isCustomDate);
    };
    Calendar2.prototype.getModuleName = function() {
      _super.prototype.getModuleName.call(this);
      return "calendar";
    };
    Calendar2.prototype.getPersistData = function() {
      _super.prototype.getPersistData.call(this);
      var keyEntity = ["value", "values"];
      return this.addOnPersist(keyEntity);
    };
    Calendar2.prototype.onPropertyChanged = function(newProp, oldProp) {
      this.effect = "";
      this.rangeValidation(this.min, this.max);
      for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {
        var prop = _a[_i];
        switch (prop) {
          case "value":
            if (this.isDateSelected) {
              if (typeof newProp.value === "string") {
                this.setProperties({ value: new Date(this.checkValue(newProp.value)) }, true);
              } else {
                newProp.value = new Date(this.checkValue(newProp.value));
              }
              if (isNaN(+this.value)) {
                this.setProperties({ value: oldProp.value }, true);
              }
              this.update();
            }
            break;
          case "values":
            if (this.isDateSelected) {
              if (typeof newProp.values === "string" || typeof newProp.values === "number") {
                this.setProperties({ values: null }, true);
              } else {
                var copyValues = this.copyValues(this.values);
                for (var index = 0; index < copyValues.length; index++) {
                  var tempDate = copyValues[index];
                  if (this.checkDateValue(tempDate) && !_super.prototype.checkPresentDate.call(this, tempDate, copyValues)) {
                    copyValues.push(tempDate);
                  }
                }
                this.setProperties({ values: copyValues }, true);
                if (this.values.length > 0) {
                  this.setProperties({ value: newProp.values[newProp.values.length - 1] }, true);
                }
              }
              this.validateValues(this.isMultiSelection, this.values);
              this.update();
            }
            break;
          case "isMultiSelection":
            if (this.isDateSelected) {
              this.setProperties({ isMultiSelection: newProp.isMultiSelection }, true);
              this.update();
            }
            break;
          case "enabled":
            this.setEnable(this.enabled);
            break;
          case "cssClass":
            if (this.getModuleName() === "calendar") {
              this.setClass(newProp.cssClass, oldProp.cssClass);
            }
            break;
          default:
            _super.prototype.onPropertyChanged.call(this, newProp, oldProp, this.isMultiSelection, this.values);
        }
      }
      this.preventChange = this.isAngular && this.preventChange ? !this.preventChange : this.preventChange;
    };
    Calendar2.prototype.destroy = function() {
      _super.prototype.destroy.call(this);
      if (this.getModuleName() === "calendar") {
        var form = closest(this.element, "form");
        if (form) {
          EventHandler.remove(form, "reset", this.formResetHandler.bind(this));
        }
      }
    };
    Calendar2.prototype.navigateTo = function(view, date, isCustomDate) {
      this.minMaxUpdate();
      _super.prototype.navigateTo.call(this, view, date, isCustomDate);
    };
    Calendar2.prototype.currentView = function() {
      return _super.prototype.currentView.call(this);
    };
    Calendar2.prototype.addDate = function(dates) {
      if (typeof dates !== "string" && typeof dates !== "number") {
        var copyValues = this.copyValues(this.values);
        if (typeof dates === "object" && dates.length > 0) {
          var tempDates = dates;
          for (var i = 0; i < tempDates.length; i++) {
            if (this.checkDateValue(tempDates[i]) && !_super.prototype.checkPresentDate.call(this, tempDates[i], copyValues)) {
              if (!isNullOrUndefined(copyValues) && copyValues.length > 0) {
                copyValues.push(tempDates[i]);
              } else {
                copyValues = [/* @__PURE__ */ new Date(+tempDates[i])];
              }
            }
          }
        } else {
          if (this.checkDateValue(dates) && !_super.prototype.checkPresentDate.call(this, dates, copyValues)) {
            if (!isNullOrUndefined(copyValues) && copyValues.length > 0) {
              copyValues.push(dates);
            } else {
              copyValues = [/* @__PURE__ */ new Date(+dates)];
            }
          }
        }
        this.setProperties({ values: copyValues }, true);
        if (this.isMultiSelection) {
          this.setProperties({ value: this.values[this.values.length - 1] }, true);
        }
        this.validateValues(this.isMultiSelection, copyValues);
        this.update();
        this.changedArgs = { value: this.value, values: this.values };
        this.changeHandler();
      }
    };
    Calendar2.prototype.removeDate = function(dates) {
      if (typeof dates !== "string" && typeof dates !== "number" && !isNullOrUndefined(this.values) && this.values.length > 0) {
        var copyValues = this.copyValues(this.values);
        if (typeof dates === "object" && dates.length > 0) {
          var tempDates = dates;
          for (var index = 0; index < tempDates.length; index++) {
            for (var i = 0; i < copyValues.length; i++) {
              if (+copyValues[i] === +tempDates[index]) {
                copyValues.splice(i, 1);
              }
            }
          }
        } else {
          for (var i = 0; i < copyValues.length; i++) {
            if (+copyValues[i] === +dates) {
              copyValues.splice(i, 1);
            }
          }
        }
        this.setProperties({ values: copyValues }, false);
        this.update();
        if (this.isMultiSelection) {
          this.setProperties({ value: this.values[this.values.length - 1] }, true);
        }
        this.changedArgs = { value: this.value, values: this.values };
        this.changeHandler();
      }
    };
    Calendar2.prototype.setTodayDate = function(date) {
      var todayDate = /* @__PURE__ */ new Date(+date);
      this.setProperties({ value: todayDate }, true);
      _super.prototype.todayButtonClick.call(this, null, todayDate, true);
    };
    Calendar2.prototype.update = function() {
      this.validateDate();
      this.minMaxUpdate();
      _super.prototype.setValueUpdate.call(this);
    };
    Calendar2.prototype.selectDate = function(e, date, element2) {
      _super.prototype.selectDate.call(this, e, date, element2, this.isMultiSelection, this.values);
      if (this.isMultiSelection && !isNullOrUndefined(this.values) && this.values.length > 0) {
        this.setProperties({ value: this.values[this.values.length - 1] }, true);
      }
      this.changedArgs = { value: this.value, values: this.values };
      this.changeHandler(e);
    };
    Calendar2.prototype.changeEvent = function(e) {
      if ((this.value && this.value.valueOf()) !== (this.previousDate && +this.previousDate.valueOf()) || this.isMultiSelection) {
        if (this.isAngular && this.preventChange) {
          this.preventChange = false;
        } else {
          this.trigger("change", this.changedArgs);
        }
        this.previousDate = /* @__PURE__ */ new Date(+this.value);
      }
    };
    Calendar2.prototype.triggerChange = function(e) {
      if (!isNullOrUndefined(this.todayButtonEvent) && this.isTodayClicked) {
        e = this.todayButtonEvent;
        this.isTodayClicked = false;
      }
      this.changedArgs.event = e || null;
      this.changedArgs.isInteracted = !isNullOrUndefined(e);
      if (!isNullOrUndefined(this.value)) {
        this.setProperties({ value: this.value }, true);
      }
      if (!this.isMultiSelection && +this.value !== Number.NaN && (!isNullOrUndefined(this.value) && !isNullOrUndefined(this.previousDate) || this.previousDate === null && !isNaN(+this.value))) {
        this.changeEvent(e);
      } else if (!isNullOrUndefined(this.values) && this.previousValues !== this.values.length) {
        this.changeEvent(e);
        this.previousValues = this.values.length;
      }
    };
    __decorate$e([
      Property(null)
    ], Calendar2.prototype, "value", void 0);
    __decorate$e([
      Property(null)
    ], Calendar2.prototype, "values", void 0);
    __decorate$e([
      Property(false)
    ], Calendar2.prototype, "isMultiSelection", void 0);
    __decorate$e([
      Event$1()
    ], Calendar2.prototype, "change", void 0);
    Calendar2 = __decorate$e([
      NotifyPropertyChanges
    ], Calendar2);
    return Calendar2;
  }(CalendarBase)
);
var __extends$n = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$d = globalThis && globalThis.__decorate || function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i = decorators.length - 1; i >= 0; i--)
      if (d = decorators[i])
        r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var DATEWRAPPER$1 = "e-date-wrapper";
var ROOT$3 = "e-datepicker";
var LIBRARY$1 = "e-lib";
var CONTROL$1 = "e-control";
var POPUPWRAPPER = "e-popup-wrapper";
var INPUTWRAPPER$1 = "e-input-group-icon";
var POPUP$2 = "e-popup";
var INPUTCONTAINER = "e-input-group";
var INPUTFOCUS$1 = "e-input-focus";
var INPUTROOT = "e-input";
var ERROR$2 = "e-error";
var ACTIVE$2 = "e-active";
var OVERFLOW$2 = "e-date-overflow";
var DATEICON = "e-date-icon";
var ICONS$1 = "e-icons";
var OPENDURATION = 300;
var OFFSETVALUE = 4;
var SELECTED$1 = "e-selected";
var FOCUSEDDATE = "e-focused-date";
var NONEDIT = "e-non-edit";
var containerAttr = ["title", "class", "style"];
var DatePicker = (
  /** @class */
  function(_super) {
    __extends$n(DatePicker2, _super);
    function DatePicker2(options, element2) {
      var _this = _super.call(this, options, element2) || this;
      _this.isDateIconClicked = false;
      _this.isAltKeyPressed = false;
      _this.isInteracted = true;
      _this.invalidValueString = null;
      _this.checkPreviousValue = null;
      _this.maskedDateValue = "";
      _this.isAngular = false;
      _this.preventChange = false;
      _this.isIconClicked = false;
      _this.isDynamicValueChanged = false;
      _this.moduleName = _this.getModuleName();
      _this.isFocused = false;
      _this.datepickerOptions = options;
      return _this;
    }
    DatePicker2.prototype.render = function() {
      this.initialize();
      this.bindEvents();
      Input.calculateWidth(this.inputElement, this.inputWrapper.container);
      if (!isNullOrUndefined(this.inputWrapper.buttons[0]) && !isNullOrUndefined(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0]) && this.floatLabelType !== "Never") {
        this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon");
      }
      if (!isNullOrUndefined(closest(this.element, "fieldset")) && closest(this.element, "fieldset").disabled) {
        this.enabled = false;
      }
      this.renderComplete();
      this.setTimeZone(this.serverTimezoneOffset);
    };
    DatePicker2.prototype.setTimeZone = function(offsetValue) {
      if (!isNullOrUndefined(this.serverTimezoneOffset) && this.value) {
        var clientTimeZoneDiff = (/* @__PURE__ */ new Date()).getTimezoneOffset() / 60;
        var serverTimezoneDiff = offsetValue;
        var timeZoneDiff = serverTimezoneDiff + clientTimeZoneDiff;
        timeZoneDiff = this.isDayLightSaving() ? timeZoneDiff-- : timeZoneDiff;
        this.value = new Date(this.value.getTime() + timeZoneDiff * 60 * 60 * 1e3);
        this.updateInput();
      }
    };
    DatePicker2.prototype.isDayLightSaving = function() {
      var firstOffset = new Date(this.value.getFullYear(), 0, 1).getTimezoneOffset();
      var secondOffset = new Date(this.value.getFullYear(), 6, 1).getTimezoneOffset();
      return this.value.getTimezoneOffset() < Math.max(firstOffset, secondOffset);
    };
    DatePicker2.prototype.setAllowEdit = function() {
      if (this.allowEdit) {
        if (!this.readonly) {
          this.inputElement.removeAttribute("readonly");
        }
      } else {
        attributes(this.inputElement, { "readonly": "" });
      }
      this.updateIconState();
    };
    DatePicker2.prototype.updateIconState = function() {
      if (!this.allowEdit && this.inputWrapper && !this.readonly) {
        if (this.inputElement.value === "") {
          removeClass([this.inputWrapper.container], [NONEDIT]);
        } else {
          addClass([this.inputWrapper.container], [NONEDIT]);
        }
      } else if (this.inputWrapper) {
        removeClass([this.inputWrapper.container], [NONEDIT]);
      }
    };
    DatePicker2.prototype.initialize = function() {
      this.checkInvalidValue(this.value);
      if (this.enableMask) {
        this.notify("createMask", {
          module: "MaskedDateTime"
        });
      }
      this.createInput();
      this.updateHtmlAttributeToWrapper();
      this.setAllowEdit();
      this.updateInput(true);
      if (this.enableMask && !this.value && this.maskedDateValue && (this.floatLabelType === "Always" || !this.floatLabelType || !this.placeholder)) {
        this.updateInputValue(this.maskedDateValue);
      }
      this.previousElementValue = this.inputElement.value;
      this.previousDate = !isNullOrUndefined(this.value) ? /* @__PURE__ */ new Date(+this.value) : null;
      this.inputElement.setAttribute("value", this.inputElement.value);
      this.inputValueCopy = this.value;
    };
    DatePicker2.prototype.createInput = function() {
      var ariaAttrs = {
        "aria-atomic": "true",
        "aria-expanded": "false",
        "role": "combobox",
        "autocomplete": "off",
        "autocorrect": "off",
        "autocapitalize": "off",
        "spellcheck": "false",
        "aria-invalid": "false"
      };
      if (this.getModuleName() === "datepicker") {
        var l10nLocale = { placeholder: this.placeholder };
        this.globalize = new Internationalization(this.locale);
        this.l10n = new L10n("datepicker", l10nLocale, this.locale);
        this.setProperties({ placeholder: this.placeholder || this.l10n.getConstant("placeholder") }, true);
      }
      var updatedCssClassValues = this.cssClass;
      if (!isNullOrUndefined(this.cssClass) && this.cssClass !== "") {
        updatedCssClassValues = this.cssClass.replace(/\s+/g, " ").trim();
      }
      var isBindClearAction = this.enableMask ? false : true;
      this.inputWrapper = Input.createInput({
        element: this.inputElement,
        floatLabelType: this.floatLabelType,
        bindClearAction: isBindClearAction,
        properties: {
          readonly: this.readonly,
          placeholder: this.placeholder,
          cssClass: updatedCssClassValues,
          enabled: this.enabled,
          enableRtl: this.enableRtl,
          showClearButton: this.showClearButton
        },
        buttons: [INPUTWRAPPER$1 + " " + DATEICON + " " + ICONS$1]
      }, this.createElement);
      this.setWidth(this.width);
      if (this.inputElement.name !== "") {
        this.inputElement.setAttribute("name", "" + this.inputElement.getAttribute("name"));
      } else {
        this.inputElement.setAttribute("name", "" + this.element.id);
      }
      attributes(this.inputElement, ariaAttrs);
      if (!this.enabled) {
        this.inputElement.setAttribute("aria-disabled", "true");
        this.inputElement.tabIndex = -1;
      } else {
        this.inputElement.setAttribute("aria-disabled", "false");
        this.inputElement.setAttribute("tabindex", this.tabIndex);
      }
      Input.addAttributes({ "aria-label": "select" }, this.inputWrapper.buttons[0]);
      addClass([this.inputWrapper.container], DATEWRAPPER$1);
    };
    DatePicker2.prototype.updateInput = function(isDynamic) {
      if (isDynamic === void 0) {
        isDynamic = false;
      }
      var formatOptions;
      if (this.value && !this.isCalendar()) {
        this.disabledDates(isDynamic);
      }
      if (isNaN(+new Date(this.checkValue(this.value)))) {
        this.setProperties({ value: null }, true);
      }
      if (this.strictMode) {
        _super.prototype.validateDate.call(this);
        this.minMaxUpdates();
        _super.prototype.minMaxUpdate.call(this);
      }
      if (!isNullOrUndefined(this.value)) {
        var dateValue = this.value;
        var dateString = void 0;
        var tempFormat = !isNullOrUndefined(this.formatString) ? this.formatString : this.dateTimeFormat;
        if (this.getModuleName() === "datetimepicker") {
          if (this.calendarMode === "Gregorian") {
            dateString = this.globalize.formatDate(this.value, {
              format: tempFormat,
              type: "dateTime",
              skeleton: "yMd"
            });
          } else {
            dateString = this.globalize.formatDate(this.value, {
              format: tempFormat,
              type: "dateTime",
              skeleton: "yMd",
              calendar: "islamic"
            });
          }
        } else {
          if (this.calendarMode === "Gregorian") {
            formatOptions = { format: this.formatString, type: "dateTime", skeleton: "yMd" };
          } else {
            formatOptions = { format: this.formatString, type: "dateTime", skeleton: "yMd", calendar: "islamic" };
          }
          dateString = this.globalize.formatDate(this.value, formatOptions);
        }
        if (+dateValue <= +this.max && +dateValue >= +this.min) {
          this.updateInputValue(dateString);
        } else {
          var value = +dateValue >= +this.max || !+this.value || (!+this.value || +dateValue <= +this.min);
          if (!this.strictMode && value) {
            this.updateInputValue(dateString);
          }
        }
      }
      if (isNullOrUndefined(this.value) && this.strictMode) {
        if (!this.enableMask) {
          this.updateInputValue("");
        } else {
          this.updateInputValue(this.maskedDateValue);
          this.notify("createMask", {
            module: "MaskedDateTime"
          });
        }
      }
      if (!this.strictMode && isNullOrUndefined(this.value) && this.invalidValueString) {
        this.updateInputValue(this.invalidValueString);
      }
      this.changedArgs = { value: this.value };
      this.errorClass();
      this.updateIconState();
    };
    DatePicker2.prototype.minMaxUpdates = function() {
      if (!isNullOrUndefined(this.value) && this.value < this.min && this.min <= this.max && this.strictMode) {
        this.setProperties({ value: this.min }, true);
        this.changedArgs = { value: this.value };
      } else {
        if (!isNullOrUndefined(this.value) && this.value > this.max && this.min <= this.max && this.strictMode) {
          this.setProperties({ value: this.max }, true);
          this.changedArgs = { value: this.value };
        }
      }
    };
    DatePicker2.prototype.checkStringValue = function(val) {
      var returnDate = null;
      var formatOptions = null;
      var formatDateTime = null;
      if (this.getModuleName() === "datetimepicker") {
        var culture = new Internationalization(this.locale);
        if (this.calendarMode === "Gregorian") {
          formatOptions = { format: this.dateTimeFormat, type: "dateTime", skeleton: "yMd" };
          formatDateTime = { format: culture.getDatePattern({ skeleton: "yMd" }), type: "dateTime" };
        } else {
          formatOptions = { format: this.dateTimeFormat, type: "dateTime", skeleton: "yMd", calendar: "islamic" };
          formatDateTime = { format: culture.getDatePattern({ skeleton: "yMd" }), type: "dateTime", calendar: "islamic" };
        }
      } else {
        if (this.calendarMode === "Gregorian") {
          formatOptions = { format: this.formatString, type: "dateTime", skeleton: "yMd" };
        } else {
          formatOptions = { format: this.formatString, type: "dateTime", skeleton: "yMd", calendar: "islamic" };
        }
      }
      returnDate = this.checkDateValue(this.globalize.parseDate(val, formatOptions));
      if (isNullOrUndefined(returnDate) && this.getModuleName() === "datetimepicker") {
        returnDate = this.checkDateValue(this.globalize.parseDate(val, formatDateTime));
      }
      return returnDate;
    };
    DatePicker2.prototype.checkInvalidValue = function(value) {
      if (!(value instanceof Date) && !isNullOrUndefined(value)) {
        var valueDate = null;
        var valueString = value;
        if (typeof value === "number") {
          valueString = value.toString();
        }
        if (this.getModuleName() === "datetimepicker") {
          var culture = new Internationalization(this.locale);
          if (this.calendarMode === "Gregorian") {
            ({ format: this.dateTimeFormat, type: "dateTime", skeleton: "yMd" });
            ({ format: culture.getDatePattern({ skeleton: "yMd" }), type: "dateTime" });
          } else {
            ({ format: this.dateTimeFormat, type: "dateTime", skeleton: "yMd", calendar: "islamic" });
            ({ format: culture.getDatePattern({ skeleton: "yMd" }), type: "dateTime", calendar: "islamic" });
          }
        } else {
          if (this.calendarMode === "Gregorian") {
            ({ format: this.formatString, type: "dateTime", skeleton: "yMd" });
          } else {
            ({ format: this.formatString, type: "dateTime", skeleton: "yMd", calendar: "islamic" });
          }
        }
        var invalid = false;
        if (typeof valueString !== "string") {
          valueString = null;
          invalid = true;
        } else {
          if (typeof valueString === "string") {
            valueString = valueString.trim();
          }
          valueDate = this.checkStringValue(valueString);
          if (!valueDate) {
            var extISOString = null;
            var basicISOString = null;
            extISOString = /^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/;
            basicISOString = /^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/;
            if (!extISOString.test(valueString) && !basicISOString.test(valueString) || /^[a-zA-Z0-9- ]*$/.test(valueString) || isNaN(+new Date(this.checkValue(valueString)))) {
              invalid = true;
            } else {
              valueDate = new Date(valueString);
            }
          }
        }
        if (invalid) {
          if (!this.strictMode) {
            this.invalidValueString = valueString;
          }
          this.setProperties({ value: null }, true);
        } else {
          this.setProperties({ value: valueDate }, true);
        }
      }
    };
    DatePicker2.prototype.bindInputEvent = function() {
      if (!isNullOrUndefined(this.formatString) || this.enableMask) {
        if (this.enableMask || this.formatString.indexOf("y") === -1) {
          EventHandler.add(this.inputElement, "input", this.inputHandler, this);
        } else {
          EventHandler.remove(this.inputElement, "input", this.inputHandler);
        }
      }
    };
    DatePicker2.prototype.bindEvents = function() {
      EventHandler.add(this.inputWrapper.buttons[0], "mousedown touchstart", this.dateIconHandler, this);
      EventHandler.add(this.inputElement, "mouseup", this.mouseUpHandler, this);
      EventHandler.add(this.inputElement, "focus", this.inputFocusHandler, this);
      EventHandler.add(this.inputElement, "blur", this.inputBlurHandler, this);
      if (this.enableMask) {
        EventHandler.add(this.inputElement, "keydown", this.keydownHandler, this);
      }
      this.bindInputEvent();
      EventHandler.add(this.inputElement, "change", this.inputChangeHandler, this);
      if (this.showClearButton && this.inputWrapper.clearButton) {
        EventHandler.add(this.inputWrapper.clearButton, "mousedown touchstart", this.resetHandler, this);
      }
      if (this.formElement) {
        EventHandler.add(this.formElement, "reset", this.resetFormHandler, this);
      }
      this.defaultKeyConfigs = extend(this.defaultKeyConfigs, this.keyConfigs);
      this.keyboardModules = new KeyboardEvents(this.inputElement, {
        eventName: "keydown",
        keyAction: this.inputKeyActionHandle.bind(this),
        keyConfigs: this.defaultKeyConfigs
      });
    };
    DatePicker2.prototype.keydownHandler = function(e) {
      switch (e.code) {
        case "ArrowLeft":
        case "ArrowRight":
        case "ArrowUp":
        case "ArrowDown":
        case "Home":
        case "End":
        case "Delete":
          if (this.enableMask && !this.popupObj && !this.readonly) {
            if (e.code !== "Delete") {
              e.preventDefault();
            }
            this.notify("keyDownHandler", {
              module: "MaskedDateTime",
              e
            });
          }
          break;
      }
    };
    DatePicker2.prototype.unBindEvents = function() {
      if (!isNullOrUndefined(this.inputWrapper)) {
        EventHandler.remove(this.inputWrapper.buttons[0], "mousedown touchstart", this.dateIconHandler);
      }
      EventHandler.remove(this.inputElement, "mouseup", this.mouseUpHandler);
      EventHandler.remove(this.inputElement, "focus", this.inputFocusHandler);
      EventHandler.remove(this.inputElement, "blur", this.inputBlurHandler);
      EventHandler.remove(this.inputElement, "change", this.inputChangeHandler);
      if (this.enableMask) {
        EventHandler.remove(this.inputElement, "keydown", this.keydownHandler);
      }
      if (this.showClearButton && this.inputWrapper.clearButton) {
        EventHandler.remove(this.inputWrapper.clearButton, "mousedown touchstart", this.resetHandler);
      }
      if (this.formElement) {
        EventHandler.remove(this.formElement, "reset", this.resetFormHandler);
      }
    };
    DatePicker2.prototype.resetFormHandler = function() {
      if (!this.enabled) {
        return;
      }
      if (!this.inputElement.disabled) {
        var value = this.inputElement.getAttribute("value");
        if (this.element.tagName === "EJS-DATEPICKER" || this.element.tagName === "EJS-DATETIMEPICKER") {
          value = "";
          this.inputValueCopy = null;
          this.inputElement.setAttribute("value", "");
        }
        this.setProperties({ value: this.inputValueCopy }, true);
        this.restoreValue();
        if (this.inputElement) {
          this.updateInputValue(value);
          this.errorClass();
        }
      }
    };
    DatePicker2.prototype.restoreValue = function() {
      this.currentDate = this.value ? this.value : /* @__PURE__ */ new Date();
      this.previousDate = this.value;
      this.previousElementValue = isNullOrUndefined(this.inputValueCopy) ? "" : this.globalize.formatDate(this.inputValueCopy, {
        format: this.formatString,
        type: "dateTime",
        skeleton: "yMd"
      });
    };
    DatePicker2.prototype.inputChangeHandler = function(e) {
      if (!this.enabled) {
        return;
      }
      e.stopPropagation();
    };
    DatePicker2.prototype.bindClearEvent = function() {
      if (this.showClearButton && this.inputWrapper.clearButton) {
        EventHandler.add(this.inputWrapper.clearButton, "mousedown touchstart", this.resetHandler, this);
      }
    };
    DatePicker2.prototype.resetHandler = function(e) {
      if (!this.enabled) {
        return;
      }
      e.preventDefault();
      this.clear(e);
    };
    DatePicker2.prototype.mouseUpHandler = function(e) {
      if (this.enableMask) {
        e.preventDefault();
        this.notify("setMaskSelection", {
          module: "MaskedDateTime"
        });
      }
    };
    DatePicker2.prototype.clear = function(event) {
      this.setProperties({ value: null }, true);
      if (!this.enableMask) {
        this.updateInputValue("");
      }
      var clearedArgs = {
        event
      };
      this.trigger("cleared", clearedArgs);
      this.invalidValueString = "";
      this.updateInput();
      this.popupUpdate();
      this.changeEvent(event);
      if (this.enableMask) {
        this.notify("clearHandler", {
          module: "MaskedDateTime"
        });
      }
      if (closest(this.element, "form")) {
        var element2 = this.element;
        var keyupEvent = document.createEvent("KeyboardEvent");
        keyupEvent.initEvent("keyup", false, true);
        element2.dispatchEvent(keyupEvent);
      }
    };
    DatePicker2.prototype.preventEventBubbling = function(e) {
      e.preventDefault();
      this.interopAdaptor.invokeMethodAsync("OnDateIconClick");
    };
    DatePicker2.prototype.updateInputValue = function(value) {
      Input.setValue(value, this.inputElement, this.floatLabelType, this.showClearButton);
    };
    DatePicker2.prototype.dateIconHandler = function(e) {
      if (!this.enabled) {
        return;
      }
      this.isIconClicked = true;
      if (Browser.isDevice) {
        this.inputElement.setAttribute("readonly", "");
        this.inputElement.blur();
      }
      e.preventDefault();
      if (!this.readonly) {
        if (this.isCalendar()) {
          this.hide(e);
        } else {
          this.isDateIconClicked = true;
          this.show(null, e);
          if (this.getModuleName() === "datetimepicker") {
            this.inputElement.focus();
          }
          this.inputElement.focus();
          addClass([this.inputWrapper.container], [INPUTFOCUS$1]);
          addClass(this.inputWrapper.buttons, ACTIVE$2);
        }
      }
      this.isIconClicked = false;
    };
    DatePicker2.prototype.updateHtmlAttributeToWrapper = function() {
      if (!isNullOrUndefined(this.htmlAttributes)) {
        for (var _i = 0, _a = Object.keys(this.htmlAttributes); _i < _a.length; _i++) {
          var key = _a[_i];
          if (!isNullOrUndefined(this.htmlAttributes["" + key])) {
            if (containerAttr.indexOf(key) > -1) {
              if (key === "class") {
                var updatedClassValues = this.htmlAttributes["" + key].replace(/\s+/g, " ").trim();
                if (updatedClassValues !== "") {
                  addClass([this.inputWrapper.container], updatedClassValues.split(" "));
                }
              } else if (key === "style") {
                var setStyle2 = this.inputWrapper.container.getAttribute(key);
                if (!isNullOrUndefined(setStyle2)) {
                  if (setStyle2.charAt(setStyle2.length - 1) === ";") {
                    setStyle2 = setStyle2 + this.htmlAttributes["" + key];
                  } else {
                    setStyle2 = setStyle2 + ";" + this.htmlAttributes["" + key];
                  }
                } else {
                  setStyle2 = this.htmlAttributes["" + key];
                }
                this.inputWrapper.container.setAttribute(key, setStyle2);
              } else {
                this.inputWrapper.container.setAttribute(key, this.htmlAttributes["" + key]);
              }
            }
          }
        }
      }
    };
    DatePicker2.prototype.updateHtmlAttributeToElement = function() {
      if (!isNullOrUndefined(this.htmlAttributes)) {
        for (var _i = 0, _a = Object.keys(this.htmlAttributes); _i < _a.length; _i++) {
          var key = _a[_i];
          if (containerAttr.indexOf(key) < 0) {
            this.inputElement.setAttribute(key, this.htmlAttributes["" + key]);
          }
        }
      }
    };
    DatePicker2.prototype.updateCssClass = function(newCssClass, oldCssClass) {
      if (!isNullOrUndefined(oldCssClass)) {
        oldCssClass = oldCssClass.replace(/\s+/g, " ").trim();
      }
      if (!isNullOrUndefined(newCssClass)) {
        newCssClass = newCssClass.replace(/\s+/g, " ").trim();
      }
      Input.setCssClass(newCssClass, [this.inputWrapper.container], oldCssClass);
      if (this.popupWrapper) {
        Input.setCssClass(newCssClass, [this.popupWrapper], oldCssClass);
      }
    };
    DatePicker2.prototype.calendarKeyActionHandle = function(e) {
      switch (e.action) {
        case "escape":
          if (this.isCalendar()) {
            this.hide(e);
          } else {
            this.inputWrapper.container.children[this.index].blur();
          }
          break;
        case "enter":
          if (!this.isCalendar()) {
            this.show(null, e);
          } else {
            if (+this.value !== +this.currentDate && !this.isCalendar()) {
              this.inputWrapper.container.children[this.index].focus();
            }
          }
          if (this.getModuleName() === "datetimepicker") {
            this.inputElement.focus();
          }
          break;
        case "tab":
          this.hide(e);
      }
    };
    DatePicker2.prototype.inputFocusHandler = function() {
      this.isFocused = true;
      if (!this.enabled) {
        return;
      }
      if (this.enableMask && !this.inputElement.value && this.placeholder) {
        if (this.maskedDateValue && !this.value && (this.floatLabelType === "Auto" || this.floatLabelType === "Never" || this.placeholder)) {
          this.updateInputValue(this.maskedDateValue);
          this.inputElement.selectionStart = 0;
          this.inputElement.selectionEnd = this.inputElement.value.length;
        }
      }
      var focusArguments = {
        model: this
      };
      this.isDateIconClicked = false;
      this.trigger("focus", focusArguments);
      this.updateIconState();
      if (this.openOnFocus && !this.isIconClicked) {
        this.show();
      }
    };
    DatePicker2.prototype.inputHandler = function() {
      this.isPopupClicked = false;
      if (this.enableMask) {
        this.notify("inputHandler", {
          module: "MaskedDateTime"
        });
      }
    };
    DatePicker2.prototype.inputBlurHandler = function(e) {
      if (!this.enabled) {
        return;
      }
      this.strictModeUpdate();
      if (this.inputElement.value === "" && isNullOrUndefined(this.value)) {
        this.invalidValueString = null;
        this.updateInputValue("");
      }
      this.updateInput();
      this.popupUpdate();
      this.changeTrigger(e);
      if (this.enableMask && this.maskedDateValue && this.placeholder && this.floatLabelType !== "Always") {
        if (this.inputElement.value === this.maskedDateValue && !this.value && (this.floatLabelType === "Auto" || this.floatLabelType === "Never" || this.placeholder)) {
          this.updateInputValue("");
        }
      }
      this.errorClass();
      if (this.isCalendar() && document.activeElement === this.inputElement) {
        this.hide(e);
      }
      if (this.getModuleName() === "datepicker") {
        var blurArguments = {
          model: this
        };
        this.trigger("blur", blurArguments);
      }
      if (this.isCalendar()) {
        this.defaultKeyConfigs = extend(this.defaultKeyConfigs, this.keyConfigs);
        this.calendarKeyboardModules = new KeyboardEvents(this.calendarElement.children[1].firstElementChild, {
          eventName: "keydown",
          keyAction: this.calendarKeyActionHandle.bind(this),
          keyConfigs: this.defaultKeyConfigs
        });
      }
      this.isPopupClicked = false;
    };
    DatePicker2.prototype.documentHandler = function(e) {
      if (!isNullOrUndefined(this.popupObj) && !isNullOrUndefined(this.inputWrapper) && (this.inputWrapper.container.contains(e.target) && e.type !== "mousedown" || this.popupObj.element && this.popupObj.element.contains(e.target)) && e.type !== "touchstart") {
        e.preventDefault();
      }
      var target = e.target;
      if (!closest(target, ".e-datepicker.e-popup-wrapper") && !isNullOrUndefined(this.inputWrapper) && !(closest(target, "." + INPUTCONTAINER) === this.inputWrapper.container) && !target.classList.contains("e-day")) {
        this.hide(e);
        this.focusOut();
      } else if (closest(target, ".e-datepicker.e-popup-wrapper")) {
        if (target.classList.contains("e-day") && !isNullOrUndefined(e.target.parentElement) && e.target.parentElement.classList.contains("e-selected") && closest(target, ".e-content") && closest(target, ".e-content").classList.contains("e-" + this.depth.toLowerCase())) {
          this.hide(e);
        } else if (closest(target, ".e-footer-container") && target.classList.contains("e-today") && target.classList.contains("e-btn") && +/* @__PURE__ */ new Date(+this.value) === +_super.prototype.generateTodayVal.call(this, this.value)) {
          this.hide(e);
        }
      }
    };
    DatePicker2.prototype.inputKeyActionHandle = function(e) {
      var clickedView = this.currentView();
      switch (e.action) {
        case "altUpArrow":
          this.isAltKeyPressed = false;
          this.hide(e);
          this.inputElement.focus();
          break;
        case "altDownArrow":
          this.isAltKeyPressed = true;
          this.strictModeUpdate();
          this.updateInput();
          this.changeTrigger(e);
          if (this.getModuleName() === "datepicker") {
            this.show(null, e);
          }
          break;
        case "escape":
          this.hide(e);
          break;
        case "enter":
          this.strictModeUpdate();
          this.updateInput();
          this.popupUpdate();
          this.changeTrigger(e);
          this.errorClass();
          if (!this.isCalendar() && document.activeElement === this.inputElement) {
            this.hide(e);
          }
          if (this.isCalendar()) {
            e.preventDefault();
            e.stopPropagation();
          }
          break;
        case "tab":
        case "shiftTab": {
          var start = this.inputElement.selectionStart;
          var end = this.inputElement.selectionEnd;
          if (this.enableMask && !this.popupObj && !this.readonly) {
            var length_1 = this.inputElement.value.length;
            if (start === 0 && end === length_1 || end !== length_1 && e.action === "tab" || start !== 0 && e.action === "shiftTab") {
              e.preventDefault();
            }
            this.notify("keyDownHandler", {
              module: "MaskedDateTime",
              e
            });
            start = this.inputElement.selectionStart;
            end = this.inputElement.selectionEnd;
          }
          this.strictModeUpdate();
          this.updateInput();
          this.popupUpdate();
          this.changeTrigger(e);
          this.errorClass();
          if (this.enableMask) {
            this.inputElement.selectionStart = start;
            this.inputElement.selectionEnd = end;
          }
          this.hide(e);
          break;
        }
        default:
          this.defaultAction(e);
          if (e.action === "select" && clickedView === this.depth) {
            this.hide(e);
          }
      }
    };
    DatePicker2.prototype.defaultAction = function(e) {
      this.previousDate = !isNullOrUndefined(this.value) && /* @__PURE__ */ new Date(+this.value) || null;
      if (this.isCalendar()) {
        _super.prototype.keyActionHandle.call(this, e);
        if (this.isCalendar()) {
          attributes(this.inputElement, {
            "aria-activedescendant": "" + this.setActiveDescendant()
          });
        }
      }
    };
    DatePicker2.prototype.popupUpdate = function() {
      if (isNullOrUndefined(this.value) && !isNullOrUndefined(this.previousDate) || +this.value !== +this.previousDate) {
        if (this.popupObj) {
          if (this.popupObj.element.querySelectorAll("." + SELECTED$1).length > 0) {
            removeClass(this.popupObj.element.querySelectorAll("." + SELECTED$1), [SELECTED$1]);
          }
        }
        if (!isNullOrUndefined(this.value)) {
          if (+this.value >= +this.min && +this.value <= +this.max) {
            var targetdate = new Date(this.checkValue(this.value));
            _super.prototype.navigateTo.call(this, "Month", targetdate);
          }
        }
      }
    };
    DatePicker2.prototype.strictModeUpdate = function() {
      var format;
      var formatOptions;
      if (this.getModuleName() === "datetimepicker") {
        format = !isNullOrUndefined(this.formatString) ? this.formatString : this.dateTimeFormat;
      } else {
        format = isNullOrUndefined(this.formatString) ? this.formatString : this.formatString.replace("dd", "d");
      }
      if (!isNullOrUndefined(format)) {
        var len = format.split("M").length - 1;
        if (len < 3) {
          format = format.replace("MM", "M");
        }
      }
      var dateOptions;
      if (this.getModuleName() === "datetimepicker") {
        if (this.calendarMode === "Gregorian") {
          dateOptions = {
            format: !isNullOrUndefined(this.formatString) ? this.formatString : this.dateTimeFormat,
            type: "dateTime",
            skeleton: "yMd"
          };
        } else {
          dateOptions = {
            format: !isNullOrUndefined(this.formatString) ? this.formatString : this.dateTimeFormat,
            type: "dateTime",
            skeleton: "yMd",
            calendar: "islamic"
          };
        }
      } else {
        if (this.calendarMode === "Gregorian") {
          formatOptions = { format, type: "dateTime", skeleton: "yMd" };
        } else {
          formatOptions = { format, type: "dateTime", skeleton: "yMd", calendar: "islamic" };
        }
        dateOptions = formatOptions;
      }
      var date;
      if (typeof this.inputElement.value === "string") {
        this.inputElement.value = this.inputElement.value.trim();
      }
      if (this.getModuleName() === "datetimepicker") {
        if (this.checkDateValue(this.globalize.parseDate(this.inputElement.value, dateOptions))) {
          date = this.globalize.parseDate(this.inputElement.value.toLocaleUpperCase(), dateOptions);
        } else {
          if (this.calendarMode === "Gregorian") {
            formatOptions = { type: "dateTime", skeleton: "yMd" };
          } else {
            formatOptions = { type: "dateTime", skeleton: "yMd", calendar: "islamic" };
          }
          date = this.globalize.parseDate(this.inputElement.value, formatOptions);
        }
      } else {
        date = this.globalize.parseDate(this.inputElement.value, dateOptions);
        date = !isNullOrUndefined(date) && isNaN(+date) ? null : date;
        if (!isNullOrUndefined(this.formatString) && this.inputElement.value !== "" && this.strictMode) {
          if ((this.isPopupClicked || !this.isPopupClicked && this.inputElement.value === this.previousElementValue) && this.formatString.indexOf("y") === -1) {
            date.setFullYear(this.value.getFullYear());
          }
        }
      }
      if (this.getModuleName() === "datepicker" && (this.value && !isNaN(+this.value)) && date) {
        date.setHours(this.value.getHours(), this.value.getMinutes(), this.value.getSeconds(), this.value.getMilliseconds());
      }
      if (this.strictMode && date) {
        this.updateInputValue(this.globalize.formatDate(date, dateOptions));
        if (this.inputElement.value !== this.previousElementValue) {
          this.setProperties({ value: date }, true);
        }
      } else if (!this.strictMode) {
        if (this.inputElement.value !== this.previousElementValue) {
          this.setProperties({ value: date }, true);
        }
      }
      if (this.strictMode && !date && this.inputElement.value === (this.enableMask ? this.maskedDateValue : "")) {
        this.setProperties({ value: null }, true);
      }
      if (isNaN(+this.value)) {
        this.setProperties({ value: null }, true);
      }
      if (isNullOrUndefined(this.value)) {
        this.currentDate = new Date((/* @__PURE__ */ new Date()).setHours(0, 0, 0, 0));
      }
    };
    DatePicker2.prototype.createCalendar = function() {
      var _this = this;
      this.popupWrapper = this.createElement("div", { className: "" + ROOT$3 + " " + POPUPWRAPPER });
      if (!isNullOrUndefined(this.cssClass)) {
        this.popupWrapper.className += " " + this.cssClass;
      }
      if (Browser.isDevice) {
        this.modelHeader();
        this.modal = this.createElement("div");
        this.modal.className = "" + ROOT$3 + " e-date-modal";
        document.body.className += " " + OVERFLOW$2;
        this.modal.style.display = "block";
        document.body.appendChild(this.modal);
      }
      this.calendarElement.querySelector("table tbody").className = "";
      this.popupObj = new Popup(this.popupWrapper, {
        content: this.calendarElement,
        relateTo: Browser.isDevice ? document.body : this.inputWrapper.container,
        position: Browser.isDevice ? { X: "center", Y: "center" } : { X: "left", Y: "bottom" },
        offsetY: OFFSETVALUE,
        targetType: "container",
        enableRtl: this.enableRtl,
        zIndex: this.zIndex,
        collision: Browser.isDevice ? { X: "fit", Y: "fit" } : { X: "flip", Y: "flip" },
        open: function() {
          if (_this.getModuleName() !== "datetimepicker") {
            if (document.activeElement !== _this.inputElement) {
              _this.defaultKeyConfigs = extend(_this.defaultKeyConfigs, _this.keyConfigs);
              _this.calendarElement.children[1].firstElementChild.focus();
              _this.calendarKeyboardModules = new KeyboardEvents(_this.calendarElement.children[1].firstElementChild, {
                eventName: "keydown",
                keyAction: _this.calendarKeyActionHandle.bind(_this),
                keyConfigs: _this.defaultKeyConfigs
              });
              _this.calendarKeyboardModules = new KeyboardEvents(_this.inputWrapper.container.children[_this.index], {
                eventName: "keydown",
                keyAction: _this.calendarKeyActionHandle.bind(_this),
                keyConfigs: _this.defaultKeyConfigs
              });
            }
          }
        },
        close: function() {
          if (_this.isDateIconClicked) {
            _this.inputWrapper.container.children[_this.index].focus();
          }
          if (_this.value) {
            _this.disabledDates();
          }
          if (_this.popupObj) {
            _this.popupObj.destroy();
          }
          _this.resetCalendar();
          detach(_this.popupWrapper);
          _this.popupObj = _this.popupWrapper = null;
          _this.preventArgs = null;
          _this.calendarKeyboardModules = null;
          _this.setAriaAttributes();
        },
        targetExitViewport: function() {
          if (!Browser.isDevice) {
            _this.hide();
          }
        }
      });
      this.popupObj.element.className += " " + this.cssClass;
      this.setAriaAttributes();
    };
    DatePicker2.prototype.setAriaDisabled = function() {
      if (!this.enabled) {
        this.inputElement.setAttribute("aria-disabled", "true");
        this.inputElement.tabIndex = -1;
      } else {
        this.inputElement.setAttribute("aria-disabled", "false");
        this.inputElement.setAttribute("tabindex", this.tabIndex);
      }
    };
    DatePicker2.prototype.modelHeader = function() {
      var dateOptions;
      var modelHeader = this.createElement("div", { className: "e-model-header" });
      var yearHeading = this.createElement("h1", { className: "e-model-year" });
      var h2 = this.createElement("div");
      var daySpan = this.createElement("span", { className: "e-model-day" });
      var monthSpan = this.createElement("span", { className: "e-model-month" });
      if (this.calendarMode === "Gregorian") {
        dateOptions = { format: "y", skeleton: "dateTime" };
      } else {
        dateOptions = { format: "y", skeleton: "dateTime", calendar: "islamic" };
      }
      yearHeading.textContent = "" + this.globalize.formatDate(this.value || /* @__PURE__ */ new Date(), dateOptions);
      if (this.calendarMode === "Gregorian") {
        dateOptions = { format: "E", skeleton: "dateTime" };
      } else {
        dateOptions = { format: "E", skeleton: "dateTime", calendar: "islamic" };
      }
      daySpan.textContent = "" + this.globalize.formatDate(this.value || /* @__PURE__ */ new Date(), dateOptions) + ", ";
      if (this.calendarMode === "Gregorian") {
        dateOptions = { format: "MMM d", skeleton: "dateTime" };
      } else {
        dateOptions = { format: "MMM d", skeleton: "dateTime", calendar: "islamic" };
      }
      monthSpan.textContent = "" + this.globalize.formatDate(this.value || /* @__PURE__ */ new Date(), dateOptions);
      modelHeader.appendChild(yearHeading);
      h2.appendChild(daySpan);
      h2.appendChild(monthSpan);
      modelHeader.appendChild(h2);
      this.calendarElement.insertBefore(modelHeader, this.calendarElement.firstElementChild);
    };
    DatePicker2.prototype.changeTrigger = function(event) {
      if (this.inputElement.value !== this.previousElementValue) {
        if ((this.previousDate && this.previousDate.valueOf()) !== (this.value && this.value.valueOf())) {
          if (this.isDynamicValueChanged && this.isCalendar()) {
            this.popupUpdate();
          }
          this.changedArgs.value = this.value;
          this.changedArgs.event = event || null;
          this.changedArgs.element = this.element;
          this.changedArgs.isInteracted = !isNullOrUndefined(event);
          if (this.isAngular && this.preventChange) {
            this.preventChange = false;
          } else {
            this.trigger("change", this.changedArgs);
          }
          this.previousElementValue = this.inputElement.value;
          this.previousDate = !isNaN(+new Date(this.checkValue(this.value))) ? new Date(this.checkValue(this.value)) : null;
          this.isInteracted = true;
        }
      }
    };
    DatePicker2.prototype.navigatedEvent = function() {
      this.trigger("navigated", this.navigatedArgs);
    };
    DatePicker2.prototype.changeEvent = function(event) {
      if (!this.isIconClicked) {
        this.selectCalendar(event);
      }
      if ((this.previousDate && this.previousDate.valueOf()) !== (this.value && this.value.valueOf())) {
        this.changedArgs.event = event ? event : null;
        this.changedArgs.element = this.element;
        this.changedArgs.isInteracted = this.isInteracted;
        if (!this.isDynamicValueChanged) {
          this.trigger("change", this.changedArgs);
        }
        this.previousDate = this.value && /* @__PURE__ */ new Date(+this.value);
        if (!this.isDynamicValueChanged) {
          this.hide(event);
        }
        this.previousElementValue = this.inputElement.value;
        this.errorClass();
      } else if (event) {
        this.hide(event);
      }
    };
    DatePicker2.prototype.requiredModules = function() {
      var modules = [];
      if (this) {
        modules.push({ args: [this], member: "islamic" });
      }
      if (this.enableMask) {
        modules.push({ args: [this], member: "MaskedDateTime" });
      }
      return modules;
    };
    DatePicker2.prototype.selectCalendar = function(e) {
      var date;
      var tempFormat;
      var formatOptions;
      if (this.getModuleName() === "datetimepicker") {
        tempFormat = !isNullOrUndefined(this.formatString) ? this.formatString : this.dateTimeFormat;
      } else {
        tempFormat = this.formatString;
      }
      if (this.value) {
        if (this.getModuleName() === "datetimepicker") {
          if (this.calendarMode === "Gregorian") {
            formatOptions = { format: tempFormat, type: "dateTime", skeleton: "yMd" };
          } else {
            formatOptions = { format: tempFormat, type: "dateTime", skeleton: "yMd", calendar: "islamic" };
          }
          date = this.globalize.formatDate(this.changedArgs.value, formatOptions);
        } else {
          if (this.calendarMode === "Gregorian") {
            formatOptions = { format: this.formatString, type: "dateTime", skeleton: "yMd" };
          } else {
            formatOptions = { format: this.formatString, type: "dateTime", skeleton: "yMd", calendar: "islamic" };
          }
          date = this.globalize.formatDate(this.changedArgs.value, formatOptions);
        }
        if (this.enableMask) {
          this.notify("createMask", {
            module: "MaskedDateTime"
          });
        }
      }
      if (!isNullOrUndefined(date)) {
        this.updateInputValue(date);
        if (this.enableMask) {
          this.notify("setMaskSelection", {
            module: "MaskedDateTime"
          });
        }
      }
    };
    DatePicker2.prototype.isCalendar = function() {
      if (this.popupWrapper && this.popupWrapper.classList.contains("" + POPUPWRAPPER)) {
        return true;
      }
      return false;
    };
    DatePicker2.prototype.setWidth = function(width) {
      if (typeof width === "number") {
        this.inputWrapper.container.style.width = formatUnit(this.width);
      } else if (typeof width === "string") {
        this.inputWrapper.container.style.width = width.match(/px|%|em/) ? this.width : formatUnit(this.width);
      } else {
        this.inputWrapper.container.style.width = "100%";
      }
    };
    DatePicker2.prototype.show = function(type, e) {
      var _this = this;
      if (this.enabled && this.readonly || !this.enabled || this.popupObj) {
        return;
      } else {
        var prevent_1 = true;
        var outOfRange = void 0;
        if (!isNullOrUndefined(this.value) && !(+this.value >= +new Date(this.checkValue(this.min)) && +this.value <= +new Date(this.checkValue(this.max)))) {
          outOfRange = new Date(this.checkValue(this.value));
          this.setProperties({ "value": null }, true);
        } else {
          outOfRange = this.value || null;
        }
        if (!this.isCalendar()) {
          _super.prototype.render.call(this);
          this.setProperties({ "value": outOfRange || null }, true);
          this.previousDate = outOfRange;
          this.createCalendar();
        }
        if (Browser.isDevice) {
          this.mobilePopupWrapper = this.createElement("div", { className: "e-datepick-mob-popup-wrap" });
          document.body.appendChild(this.mobilePopupWrapper);
        }
        this.preventArgs = {
          preventDefault: function() {
            prevent_1 = false;
          },
          popup: this.popupObj,
          event: e || null,
          cancel: false,
          appendTo: Browser.isDevice ? this.mobilePopupWrapper : document.body
        };
        var eventArgs = this.preventArgs;
        this.trigger("open", eventArgs, function(eventArgs2) {
          _this.preventArgs = eventArgs2;
          if (prevent_1 && !_this.preventArgs.cancel) {
            addClass(_this.inputWrapper.buttons, ACTIVE$2);
            _this.preventArgs.appendTo.appendChild(_this.popupWrapper);
            _this.popupObj.refreshPosition(_this.inputElement);
            var openAnimation = {
              name: "FadeIn",
              duration: Browser.isDevice ? 0 : OPENDURATION
            };
            if (_this.zIndex === 1e3) {
              _this.popupObj.show(new Animation$1(openAnimation), _this.element);
            } else {
              _this.popupObj.show(new Animation$1(openAnimation), null);
            }
            _super.prototype.setOverlayIndex.call(_this, _this.mobilePopupWrapper, _this.popupObj.element, _this.modal, Browser.isDevice);
            _this.setAriaAttributes();
          } else {
            _this.popupObj.destroy();
            _this.popupWrapper = _this.popupObj = null;
          }
          if (!isNullOrUndefined(_this.inputElement) && _this.inputElement.value === "") {
            if (!isNullOrUndefined(_this.tableBodyElement) && _this.tableBodyElement.querySelectorAll("td.e-selected").length > 0) {
              addClass([_this.tableBodyElement.querySelector("td.e-selected")], FOCUSEDDATE);
              removeClass(_this.tableBodyElement.querySelectorAll("td.e-selected"), SELECTED$1);
            }
          }
          EventHandler.add(document, "mousedown touchstart", _this.documentHandler, _this);
        });
      }
    };
    DatePicker2.prototype.hide = function(event) {
      var _this = this;
      if (!isNullOrUndefined(this.popupWrapper)) {
        var prevent_2 = true;
        this.preventArgs = {
          preventDefault: function() {
            prevent_2 = false;
          },
          popup: this.popupObj,
          event: event || null,
          cancel: false
        };
        removeClass(this.inputWrapper.buttons, ACTIVE$2);
        removeClass([document.body], OVERFLOW$2);
        var eventArgs = this.preventArgs;
        if (this.isCalendar()) {
          this.trigger("close", eventArgs, function(eventArgs2) {
            _this.closeEventCallback(prevent_2, eventArgs2);
          });
        } else {
          this.closeEventCallback(prevent_2, eventArgs);
        }
      } else {
        if (Browser.isDevice && this.allowEdit && !this.readonly) {
          this.inputElement.removeAttribute("readonly");
        }
        this.setAllowEdit();
      }
    };
    DatePicker2.prototype.closeEventCallback = function(prevent, eventArgs) {
      this.preventArgs = eventArgs;
      if (this.isCalendar() && (prevent && !this.preventArgs.cancel)) {
        this.popupObj.hide();
        this.isAltKeyPressed = false;
        this.keyboardModule.destroy();
        removeClass(this.inputWrapper.buttons, ACTIVE$2);
      }
      this.setAriaAttributes();
      if (Browser.isDevice && this.modal) {
        this.modal.style.display = "none";
        this.modal.outerHTML = "";
        this.modal = null;
      }
      if (Browser.isDevice) {
        if (!isNullOrUndefined(this.mobilePopupWrapper)) {
          this.mobilePopupWrapper.remove();
          this.mobilePopupWrapper = null;
        }
      }
      EventHandler.remove(document, "mousedown touchstart", this.documentHandler);
      if (Browser.isDevice && this.allowEdit && !this.readonly) {
        this.inputElement.removeAttribute("readonly");
      }
      this.setAllowEdit();
    };
    DatePicker2.prototype.focusIn = function(triggerEvent2) {
      if (document.activeElement !== this.inputElement && this.enabled) {
        this.inputElement.focus();
        addClass([this.inputWrapper.container], [INPUTFOCUS$1]);
      }
    };
    DatePicker2.prototype.focusOut = function() {
      if (document.activeElement === this.inputElement) {
        removeClass([this.inputWrapper.container], [INPUTFOCUS$1]);
        this.inputElement.blur();
      }
    };
    DatePicker2.prototype.currentView = function() {
      var currentView;
      if (this.calendarElement) {
        currentView = _super.prototype.currentView.call(this);
      }
      return currentView;
    };
    DatePicker2.prototype.navigateTo = function(view, date) {
      if (this.calendarElement) {
        _super.prototype.navigateTo.call(this, view, date);
      }
    };
    DatePicker2.prototype.destroy = function() {
      this.unBindEvents();
      _super.prototype.destroy.call(this);
      if (!isNullOrUndefined(this.keyboardModules)) {
        this.keyboardModules.destroy();
      }
      if (this.popupObj && this.popupObj.element.classList.contains(POPUP$2)) {
        _super.prototype.destroy.call(this);
      }
      var ariaAttrs = {
        "aria-atomic": "true",
        "aria-disabled": "true",
        "aria-expanded": "false",
        "role": "combobox",
        "autocomplete": "off",
        "autocorrect": "off",
        "autocapitalize": "off",
        "spellcheck": "false"
      };
      if (this.inputElement) {
        Input.removeAttributes(ariaAttrs, this.inputElement);
        if (!isNullOrUndefined(this.inputElementCopy.getAttribute("tabindex"))) {
          this.inputElement.setAttribute("tabindex", this.tabIndex);
        } else {
          this.inputElement.removeAttribute("tabindex");
        }
        EventHandler.remove(this.inputElement, "blur", this.inputBlurHandler);
        EventHandler.remove(this.inputElement, "focus", this.inputFocusHandler);
        this.ensureInputAttribute();
      }
      if (this.isCalendar()) {
        if (this.popupWrapper) {
          detach(this.popupWrapper);
        }
        this.popupObj = this.popupWrapper = null;
        this.keyboardModule.destroy();
      }
      if (this.ngTag === null) {
        if (this.inputElement) {
          if (!isNullOrUndefined(this.inputWrapper)) {
            this.inputWrapper.container.insertAdjacentElement("afterend", this.inputElement);
          }
          removeClass([this.inputElement], [INPUTROOT]);
        }
        removeClass([this.element], [ROOT$3]);
        if (!isNullOrUndefined(this.inputWrapper)) {
          detach(this.inputWrapper.container);
        }
      }
      if (this.formElement) {
        EventHandler.remove(this.formElement, "reset", this.resetFormHandler);
      }
      this.inputWrapper = null;
      this.keyboardModules = null;
    };
    DatePicker2.prototype.ensureInputAttribute = function() {
      var prop = [];
      for (var i = 0; i < this.inputElement.attributes.length; i++) {
        prop[i] = this.inputElement.attributes[i].name;
      }
      for (var i = 0; i < prop.length; i++) {
        if (isNullOrUndefined(this.inputElementCopy.getAttribute(prop[i]))) {
          if (prop[i].toLowerCase() === "value") {
            this.inputElement.value = "";
          }
          this.inputElement.removeAttribute(prop[i]);
        } else {
          if (prop[i].toLowerCase() === "value") {
            this.inputElement.value = this.inputElementCopy.getAttribute(prop[i]);
          }
          this.inputElement.setAttribute(prop[i], this.inputElementCopy.getAttribute(prop[i]));
        }
      }
    };
    DatePicker2.prototype.preRender = function() {
      this.inputElementCopy = this.element.cloneNode(true);
      removeClass([this.inputElementCopy], [ROOT$3, CONTROL$1, LIBRARY$1]);
      this.inputElement = this.element;
      this.formElement = closest(this.inputElement, "form");
      this.index = this.showClearButton ? 2 : 1;
      this.ngTag = null;
      if (this.element.tagName === "EJS-DATEPICKER" || this.element.tagName === "EJS-DATETIMEPICKER") {
        this.ngTag = this.element.tagName;
        this.inputElement = this.createElement("input");
        this.element.appendChild(this.inputElement);
      }
      if (this.element.getAttribute("id")) {
        if (this.ngTag !== null) {
          this.inputElement.id = this.element.getAttribute("id") + "_input";
        }
      } else {
        if (this.getModuleName() === "datetimepicker") {
          this.element.id = getUniqueID("ej2-datetimepicker");
          if (this.ngTag !== null) {
            attributes(this.inputElement, { "id": this.element.id + "_input" });
          }
        } else {
          this.element.id = getUniqueID("ej2-datepicker");
          if (this.ngTag !== null) {
            attributes(this.inputElement, { "id": this.element.id + "_input" });
          }
        }
      }
      if (this.ngTag !== null) {
        this.validationAttribute(this.element, this.inputElement);
      }
      this.updateHtmlAttributeToElement();
      this.defaultKeyConfigs = this.getDefaultKeyConfig();
      this.checkHtmlAttributes(false);
      this.tabIndex = this.element.hasAttribute("tabindex") ? this.element.getAttribute("tabindex") : "0";
      this.element.removeAttribute("tabindex");
      _super.prototype.preRender.call(this);
    };
    DatePicker2.prototype.getDefaultKeyConfig = function() {
      this.defaultKeyConfigs = {
        altUpArrow: "alt+uparrow",
        altDownArrow: "alt+downarrow",
        escape: "escape",
        enter: "enter",
        controlUp: "ctrl+38",
        controlDown: "ctrl+40",
        moveDown: "downarrow",
        moveUp: "uparrow",
        moveLeft: "leftarrow",
        moveRight: "rightarrow",
        select: "enter",
        home: "home",
        end: "end",
        pageUp: "pageup",
        pageDown: "pagedown",
        shiftPageUp: "shift+pageup",
        shiftPageDown: "shift+pagedown",
        controlHome: "ctrl+home",
        controlEnd: "ctrl+end",
        shiftTab: "shift+tab",
        tab: "tab"
      };
      return this.defaultKeyConfigs;
    };
    DatePicker2.prototype.validationAttribute = function(target, inputElement) {
      var nameAttribute = target.getAttribute("name") ? target.getAttribute("name") : target.getAttribute("id");
      inputElement.setAttribute("name", nameAttribute);
      target.removeAttribute("name");
      var attribute = ["required", "aria-required", "form"];
      for (var i = 0; i < attribute.length; i++) {
        if (isNullOrUndefined(target.getAttribute(attribute[i]))) {
          continue;
        }
        var attr = target.getAttribute(attribute[i]);
        inputElement.setAttribute(attribute[i], attr);
        target.removeAttribute(attribute[i]);
      }
    };
    DatePicker2.prototype.checkFormat = function() {
      var culture = new Internationalization(this.locale);
      if (this.format) {
        if (typeof this.format === "string") {
          this.formatString = this.format;
        } else if (this.format.skeleton !== "" && !isNullOrUndefined(this.format.skeleton)) {
          var skeletonString = this.format.skeleton;
          if (this.getModuleName() === "datetimepicker") {
            this.formatString = culture.getDatePattern({ skeleton: skeletonString, type: "dateTime" });
          } else {
            this.formatString = culture.getDatePattern({ skeleton: skeletonString, type: "date" });
          }
        } else {
          if (this.getModuleName() === "datetimepicker") {
            this.formatString = this.dateTimeFormat;
          } else {
            this.formatString = null;
          }
        }
      } else {
        this.formatString = null;
      }
    };
    DatePicker2.prototype.checkHtmlAttributes = function(dynamic) {
      this.globalize = new Internationalization(this.locale);
      this.checkFormat();
      this.checkView();
      var attributes2 = dynamic ? isNullOrUndefined(this.htmlAttributes) ? [] : Object.keys(this.htmlAttributes) : ["value", "min", "max", "disabled", "readonly", "style", "name", "placeholder", "type"];
      var options;
      if (this.getModuleName() === "datetimepicker") {
        if (this.calendarMode === "Gregorian") {
          options = {
            format: !isNullOrUndefined(this.formatString) ? this.formatString : this.dateTimeFormat,
            type: "dateTime",
            skeleton: "yMd"
          };
        } else {
          options = {
            format: !isNullOrUndefined(this.formatString) ? this.formatString : this.dateTimeFormat,
            type: "dateTime",
            skeleton: "yMd",
            calendar: "islamic"
          };
        }
      } else {
        if (this.calendarMode === "Gregorian") {
          options = { format: this.formatString, type: "dateTime", skeleton: "yMd" };
        } else {
          options = { format: this.formatString, type: "dateTime", skeleton: "yMd", calendar: "islamic" };
        }
      }
      for (var _i = 0, attributes_1 = attributes2; _i < attributes_1.length; _i++) {
        var prop = attributes_1[_i];
        if (!isNullOrUndefined(this.inputElement.getAttribute(prop))) {
          switch (prop) {
            case "disabled":
              if (isNullOrUndefined(this.datepickerOptions) || this.datepickerOptions["enabled"] === void 0 || dynamic) {
                var enabled = this.inputElement.getAttribute(prop) === "disabled" || this.inputElement.getAttribute(prop) === "" || this.inputElement.getAttribute(prop) === "true" ? false : true;
                this.setProperties({ enabled }, !dynamic);
              }
              break;
            case "readonly":
              if (isNullOrUndefined(this.datepickerOptions) || this.datepickerOptions["readonly"] === void 0 || dynamic) {
                var readonly2 = this.inputElement.getAttribute(prop) === "readonly" || this.inputElement.getAttribute(prop) === "" || this.inputElement.getAttribute(prop) === "true" ? true : false;
                this.setProperties({ readonly: readonly2 }, !dynamic);
              }
              break;
            case "placeholder":
              if (isNullOrUndefined(this.datepickerOptions) || this.datepickerOptions["placeholder"] === void 0 || dynamic) {
                this.setProperties({ placeholder: this.inputElement.getAttribute(prop) }, !dynamic);
              }
              break;
            case "style":
              this.inputElement.setAttribute("style", "" + this.inputElement.getAttribute(prop));
              break;
            case "name":
              this.inputElement.setAttribute("name", "" + this.inputElement.getAttribute(prop));
              break;
            case "value":
              if (isNullOrUndefined(this.datepickerOptions) || this.datepickerOptions["value"] === void 0 || dynamic) {
                var value = this.inputElement.getAttribute(prop);
                this.setProperties(setValue(prop, this.globalize.parseDate(value, options), {}), !dynamic);
              }
              break;
            case "min":
              if (+this.min === +new Date(1900, 0, 1) || dynamic) {
                var min = this.inputElement.getAttribute(prop);
                this.setProperties(setValue(prop, this.globalize.parseDate(min), {}), !dynamic);
              }
              break;
            case "max":
              if (+this.max === +new Date(2099, 11, 31) || dynamic) {
                var max = this.inputElement.getAttribute(prop);
                this.setProperties(setValue(prop, this.globalize.parseDate(max), {}), !dynamic);
              }
              break;
            case "type":
              if (this.inputElement.getAttribute(prop) !== "text") {
                this.inputElement.setAttribute("type", "text");
              }
              break;
          }
        }
      }
    };
    DatePicker2.prototype.getModuleName = function() {
      return "datepicker";
    };
    DatePicker2.prototype.disabledDates = function(isDynamic) {
      if (isDynamic === void 0) {
        isDynamic = false;
      }
      var formatOptions;
      var globalize;
      var valueCopy = this.checkDateValue(this.value) ? /* @__PURE__ */ new Date(+this.value) : new Date(this.checkValue(this.value));
      var previousValCopy = this.previousDate;
      this.minMaxUpdates();
      if (!isDynamic || isDynamic && !isNullOrUndefined(this.renderDayCell)) {
        _super.prototype.render.call(this);
      }
      this.previousDate = previousValCopy;
      var date = valueCopy && +valueCopy;
      var dateIdString = '*[id^="/id"]'.replace("/id", "" + date);
      if (!this.strictMode) {
        if (typeof this.value === "string" || typeof this.value === "object" && +this.value !== +valueCopy) {
          this.setProperties({ value: valueCopy }, true);
        }
      }
      if (!isNullOrUndefined(this.calendarElement) && !isNullOrUndefined(this.calendarElement.querySelectorAll(dateIdString)[0])) {
        if (this.calendarElement.querySelectorAll(dateIdString)[0].classList.contains("e-disabled")) {
          if (!this.strictMode) {
            this.currentDate = new Date((/* @__PURE__ */ new Date()).setHours(0, 0, 0, 0));
          }
        }
      }
      var inputVal;
      if (this.getModuleName() === "datetimepicker") {
        if (this.calendarMode === "Gregorian") {
          globalize = this.globalize.formatDate(valueCopy, {
            format: !isNullOrUndefined(this.formatString) ? this.formatString : this.dateTimeFormat,
            type: "dateTime",
            skeleton: "yMd"
          });
        } else {
          globalize = this.globalize.formatDate(valueCopy, {
            format: !isNullOrUndefined(this.formatString) ? this.formatString : this.dateTimeFormat,
            type: "dateTime",
            skeleton: "yMd",
            calendar: "islamic"
          });
        }
        inputVal = globalize;
      } else {
        if (this.calendarMode === "Gregorian") {
          formatOptions = { format: this.formatString, type: "dateTime", skeleton: "yMd" };
        } else {
          formatOptions = { format: this.formatString, type: "dateTime", skeleton: "yMd", calendar: "islamic" };
        }
        inputVal = this.globalize.formatDate(valueCopy, formatOptions);
      }
      if (!this.popupObj) {
        this.updateInputValue(inputVal);
        if (this.enableMask) {
          this.updateInputValue(this.maskedDateValue);
          this.notify("createMask", {
            module: "MaskedDateTime"
          });
        }
      }
    };
    DatePicker2.prototype.setAriaAttributes = function() {
      if (this.isCalendar()) {
        Input.addAttributes({ "aria-expanded": "true" }, this.inputElement);
        attributes(this.inputElement, { "aria-owns": this.inputElement.id + "_options" });
        if (this.value) {
          attributes(this.inputElement, { "aria-activedescendant": "" + this.setActiveDescendant() });
        }
      } else {
        Input.addAttributes({ "aria-expanded": "false" }, this.inputElement);
        this.inputElement.removeAttribute("aria-owns");
        this.inputElement.removeAttribute("aria-activedescendant");
      }
    };
    DatePicker2.prototype.errorClass = function() {
      var dateIdString = '*[id^="/id"]'.replace("/id", "" + +this.value);
      var isDisabledDate = this.calendarElement && this.calendarElement.querySelectorAll(dateIdString)[0] && this.calendarElement.querySelectorAll(dateIdString)[0].classList.contains("e-disabled");
      if (!isNullOrUndefined(this.value) && !isNullOrUndefined(this.min) && // eslint-disable-next-line @typescript-eslint/no-explicit-any
      !isNullOrUndefined(this.max) && !(new Date(this.value).setMilliseconds(0) >= new Date(this.min).setMilliseconds(0) && new Date(this.value).setMilliseconds(0) <= new Date(this.max).setMilliseconds(0)) || (!this.strictMode && this.inputElement.value !== "" && this.inputElement.value !== this.maskedDateValue && isNullOrUndefined(this.value) || isDisabledDate)) {
        addClass([this.inputWrapper.container], ERROR$2);
        attributes(this.inputElement, { "aria-invalid": "true" });
      } else if (!isNullOrUndefined(this.inputWrapper)) {
        removeClass([this.inputWrapper.container], ERROR$2);
        attributes(this.inputElement, { "aria-invalid": "false" });
      }
    };
    DatePicker2.prototype.onPropertyChanged = function(newProp, oldProp) {
      for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {
        var prop = _a[_i];
        switch (prop) {
          case "value":
            this.isDynamicValueChanged = true;
            this.isInteracted = false;
            this.invalidValueString = null;
            this.checkInvalidValue(newProp.value);
            newProp.value = this.value;
            this.previousElementValue = this.inputElement.value;
            if (isNullOrUndefined(this.value)) {
              if (this.enableMask) {
                this.updateInputValue(this.maskedDateValue);
              } else {
                this.updateInputValue("");
              }
              this.currentDate = new Date((/* @__PURE__ */ new Date()).setHours(0, 0, 0, 0));
            }
            this.updateInput(true);
            if (+this.previousDate !== +this.value) {
              this.changeTrigger(null);
            }
            this.isInteracted = true;
            this.preventChange = this.isAngular && this.preventChange ? !this.preventChange : this.preventChange;
            if (this.enableMask) {
              this.notify("createMask", {
                module: "MaskedDateTime"
              });
            }
            break;
          case "format":
            this.checkFormat();
            this.bindInputEvent();
            this.updateInput();
            if (this.enableMask) {
              this.notify("createMask", {
                module: "MaskedDateTime"
              });
              if (!this.value) {
                this.updateInputValue(this.maskedDateValue);
              }
            }
            break;
          case "allowEdit":
            this.setAllowEdit();
            break;
          case "placeholder":
            Input.setPlaceholder(this.placeholder, this.inputElement);
            break;
          case "readonly":
            Input.setReadonly(this.readonly, this.inputElement);
            break;
          case "enabled":
            Input.setEnabled(this.enabled, this.inputElement);
            this.setAriaDisabled();
            break;
          case "htmlAttributes":
            this.updateHtmlAttributeToElement();
            this.updateHtmlAttributeToWrapper();
            this.checkHtmlAttributes(true);
            break;
          case "locale":
            this.globalize = new Internationalization(this.locale);
            this.l10n.setLocale(this.locale);
            this.setProperties({ placeholder: this.l10n.getConstant("placeholder") }, true);
            Input.setPlaceholder(this.placeholder, this.inputElement);
            this.updateInput();
            if (this.enableMask) {
              this.notify("createMask", {
                module: "MaskedDateTime"
              });
            }
            break;
          case "enableRtl":
            Input.setEnableRtl(this.enableRtl, [this.inputWrapper.container]);
            break;
          case "start":
          case "depth":
            this.checkView();
            if (this.calendarElement) {
              _super.prototype.onPropertyChanged.call(this, newProp, oldProp);
            }
            break;
          case "zIndex":
            this.setProperties({ zIndex: newProp.zIndex }, true);
            break;
          case "cssClass":
            this.updateCssClass(newProp.cssClass, oldProp.cssClass);
            break;
          case "showClearButton":
            Input.setClearButton(this.showClearButton, this.inputElement, this.inputWrapper);
            this.bindClearEvent();
            this.index = this.showClearButton ? 2 : 1;
            break;
          case "strictMode":
            this.invalidValueString = null;
            this.updateInput();
            break;
          case "width":
            this.setWidth(newProp.width);
            Input.calculateWidth(this.inputElement, this.inputWrapper.container);
            if (!isNullOrUndefined(this.inputWrapper.buttons[0]) && !isNullOrUndefined(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0]) && this.floatLabelType !== "Never") {
              this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon");
            }
            break;
          case "floatLabelType":
            this.floatLabelType = newProp.floatLabelType;
            Input.removeFloating(this.inputWrapper);
            Input.addFloating(this.inputElement, this.floatLabelType, this.placeholder);
            if (!isNullOrUndefined(this.inputWrapper.buttons[0]) && !isNullOrUndefined(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0]) && this.floatLabelType !== "Never") {
              this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon");
            }
            break;
          case "enableMask":
            if (this.enableMask) {
              this.notify("createMask", {
                module: "MaskedDateTime"
              });
              this.updateInputValue(this.maskedDateValue);
              this.bindInputEvent();
            } else {
              if (this.inputElement.value === this.maskedDateValue) {
                this.updateInputValue("");
              }
            }
            break;
          default:
            if (this.calendarElement && this.isCalendar()) {
              _super.prototype.onPropertyChanged.call(this, newProp, oldProp);
            }
            break;
        }
        if (!this.isDynamicValueChanged) {
          this.hide(null);
        }
        this.isDynamicValueChanged = false;
      }
    };
    __decorate$d([
      Property(null)
    ], DatePicker2.prototype, "width", void 0);
    __decorate$d([
      Property(null)
    ], DatePicker2.prototype, "value", void 0);
    __decorate$d([
      Property(null)
    ], DatePicker2.prototype, "cssClass", void 0);
    __decorate$d([
      Property(false)
    ], DatePicker2.prototype, "strictMode", void 0);
    __decorate$d([
      Property(null)
    ], DatePicker2.prototype, "format", void 0);
    __decorate$d([
      Property(true)
    ], DatePicker2.prototype, "enabled", void 0);
    __decorate$d([
      Property({})
    ], DatePicker2.prototype, "htmlAttributes", void 0);
    __decorate$d([
      Property(null)
    ], DatePicker2.prototype, "values", void 0);
    __decorate$d([
      Property(false)
    ], DatePicker2.prototype, "isMultiSelection", void 0);
    __decorate$d([
      Property(true)
    ], DatePicker2.prototype, "showClearButton", void 0);
    __decorate$d([
      Property(true)
    ], DatePicker2.prototype, "allowEdit", void 0);
    __decorate$d([
      Property(null)
    ], DatePicker2.prototype, "keyConfigs", void 0);
    __decorate$d([
      Property(false)
    ], DatePicker2.prototype, "enablePersistence", void 0);
    __decorate$d([
      Property(1e3)
    ], DatePicker2.prototype, "zIndex", void 0);
    __decorate$d([
      Property(false)
    ], DatePicker2.prototype, "readonly", void 0);
    __decorate$d([
      Property(null)
    ], DatePicker2.prototype, "placeholder", void 0);
    __decorate$d([
      Property("Never")
    ], DatePicker2.prototype, "floatLabelType", void 0);
    __decorate$d([
      Property(null)
    ], DatePicker2.prototype, "serverTimezoneOffset", void 0);
    __decorate$d([
      Property(false)
    ], DatePicker2.prototype, "openOnFocus", void 0);
    __decorate$d([
      Property(false)
    ], DatePicker2.prototype, "enableMask", void 0);
    __decorate$d([
      Property({ day: "day", month: "month", year: "year", hour: "hour", minute: "minute", second: "second", dayOfTheWeek: "day of the week" })
    ], DatePicker2.prototype, "maskPlaceholder", void 0);
    __decorate$d([
      Event$1()
    ], DatePicker2.prototype, "open", void 0);
    __decorate$d([
      Event$1()
    ], DatePicker2.prototype, "cleared", void 0);
    __decorate$d([
      Event$1()
    ], DatePicker2.prototype, "close", void 0);
    __decorate$d([
      Event$1()
    ], DatePicker2.prototype, "blur", void 0);
    __decorate$d([
      Event$1()
    ], DatePicker2.prototype, "focus", void 0);
    __decorate$d([
      Event$1()
    ], DatePicker2.prototype, "created", void 0);
    __decorate$d([
      Event$1()
    ], DatePicker2.prototype, "destroyed", void 0);
    DatePicker2 = __decorate$d([
      NotifyPropertyChanges
    ], DatePicker2);
    return DatePicker2;
  }(Calendar)
);
var __extends$m = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$c = globalThis && globalThis.__decorate || function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i = decorators.length - 1; i >= 0; i--)
      if (d = decorators[i])
        r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var WRAPPERCLASS = "e-time-wrapper";
var POPUP$1 = "e-popup";
var ERROR$1 = "e-error";
var POPUPDIMENSION$1 = "240px";
var DAY$1 = (/* @__PURE__ */ new Date()).getDate();
var MONTH$1 = (/* @__PURE__ */ new Date()).getMonth();
var YEAR$1 = (/* @__PURE__ */ new Date()).getFullYear();
var ROOT$2 = "e-timepicker";
var LIBRARY = "e-lib";
var CONTROL = "e-control";
var CONTENT$1 = "e-content";
var SELECTED = "e-active";
var HOVER$1 = "e-hover";
var NAVIGATION$1 = "e-navigation";
var DISABLED$1 = "e-disabled";
var ICONANIMATION$1 = "e-icon-anim";
var FOCUS = "e-input-focus";
var LISTCLASS$1 = "e-list-item";
var HALFPOSITION$1 = 2;
var ANIMATIONDURATION$1 = 50;
var OVERFLOW$1 = "e-time-overflow";
var OFFSETVAL = 4;
var EDITABLE = "e-non-edit";
var wrapperAttributes = ["title", "class", "style"];
var TimePickerBase;
(function(TimePickerBase2) {
  function createListItems(createdEl, min, max, globalize, timeFormat, step) {
    if (this.calendarMode === "Gregorian")
      ;
    var start;
    var interval = step * 6e4;
    var listItems = [];
    var timeCollections = [];
    start = +min.setMilliseconds(0);
    var end = +max.setMilliseconds(0);
    while (end >= start) {
      timeCollections.push(start);
      listItems.push(globalize.formatDate(new Date(start), { format: timeFormat, type: "time" }));
      start += interval;
    }
    var listTag = ListBase.createList(createdEl, listItems, null, true);
    return { collection: timeCollections, list: listTag };
  }
  TimePickerBase2.createListItems = createListItems;
})(TimePickerBase || (TimePickerBase = {}));
(function(_super) {
  __extends$m(TimeMaskPlaceholder, _super);
  function TimeMaskPlaceholder() {
    return _super !== null && _super.apply(this, arguments) || this;
  }
  __decorate$c([
    Property("day")
  ], TimeMaskPlaceholder.prototype, "day", void 0);
  __decorate$c([
    Property("month")
  ], TimeMaskPlaceholder.prototype, "month", void 0);
  __decorate$c([
    Property("year")
  ], TimeMaskPlaceholder.prototype, "year", void 0);
  __decorate$c([
    Property("day of the week")
  ], TimeMaskPlaceholder.prototype, "dayOfTheWeek", void 0);
  __decorate$c([
    Property("hour")
  ], TimeMaskPlaceholder.prototype, "hour", void 0);
  __decorate$c([
    Property("minute")
  ], TimeMaskPlaceholder.prototype, "minute", void 0);
  __decorate$c([
    Property("second")
  ], TimeMaskPlaceholder.prototype, "second", void 0);
  return TimeMaskPlaceholder;
})(ChildProperty);
(function(_super) {
  __extends$m(TimePicker, _super);
  function TimePicker(options, element2) {
    var _this = _super.call(this, options, element2) || this;
    _this.liCollections = [];
    _this.timeCollections = [];
    _this.disableItemCollection = [];
    _this.invalidValueString = null;
    _this.isAngular = false;
    _this.preventChange = false;
    _this.maskedDateValue = "";
    _this.moduleName = _this.getModuleName();
    _this.timeOptions = options;
    return _this;
  }
  TimePicker.prototype.preRender = function() {
    this.keyConfigure = {
      enter: "enter",
      escape: "escape",
      end: "end",
      tab: "tab",
      home: "home",
      down: "downarrow",
      up: "uparrow",
      left: "leftarrow",
      right: "rightarrow",
      open: "alt+downarrow",
      close: "alt+uparrow"
    };
    this.cloneElement = this.element.cloneNode(true);
    removeClass([this.cloneElement], [ROOT$2, CONTROL, LIBRARY]);
    this.inputElement = this.element;
    this.angularTag = null;
    this.formElement = closest(this.element, "form");
    if (this.element.tagName === "EJS-TIMEPICKER") {
      this.angularTag = this.element.tagName;
      this.inputElement = this.createElement("input");
      this.element.appendChild(this.inputElement);
    }
    this.tabIndex = this.element.hasAttribute("tabindex") ? this.element.getAttribute("tabindex") : "0";
    this.element.removeAttribute("tabindex");
    this.openPopupEventArgs = {
      appendTo: document.body
    };
  };
  TimePicker.prototype.render = function() {
    this.initialize();
    this.createInputElement();
    this.updateHtmlAttributeToWrapper();
    this.setTimeAllowEdit();
    this.setEnable();
    this.validateInterval();
    this.bindEvents();
    this.validateDisable();
    this.setValue(this.getFormattedValue(this.value));
    if (this.enableMask && !this.value && this.maskedDateValue && (this.floatLabelType === "Always" || !this.floatLabelType || !this.placeholder)) {
      this.updateInputValue(this.maskedDateValue);
      this.checkErrorState(this.maskedDateValue);
    }
    this.anchor = this.inputElement;
    this.inputElement.setAttribute("value", this.inputElement.value);
    this.inputEleValue = this.getDateObject(this.inputElement.value);
    if (!isNullOrUndefined(this.inputWrapper.buttons[0]) && !isNullOrUndefined(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0]) && this.floatLabelType !== "Never") {
      this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon");
    }
    if (!isNullOrUndefined(closest(this.element, "fieldset")) && closest(this.element, "fieldset").disabled) {
      this.enabled = false;
    }
    this.renderComplete();
  };
  TimePicker.prototype.setTimeAllowEdit = function() {
    if (this.allowEdit) {
      if (!this.readonly) {
        this.inputElement.removeAttribute("readonly");
      }
    } else {
      attributes(this.inputElement, { "readonly": "" });
    }
    this.clearIconState();
  };
  TimePicker.prototype.clearIconState = function() {
    if (!this.allowEdit && this.inputWrapper && !this.readonly) {
      if (this.inputElement.value === "") {
        removeClass([this.inputWrapper.container], [EDITABLE]);
      } else {
        addClass([this.inputWrapper.container], [EDITABLE]);
      }
    } else if (this.inputWrapper) {
      removeClass([this.inputWrapper.container], [EDITABLE]);
    }
  };
  TimePicker.prototype.validateDisable = function() {
    this.setMinMax(this.initMin, this.initMax);
    this.popupCreation();
    this.popupObj.destroy();
    this.popupWrapper = this.popupObj = null;
    if (!isNaN(+this.value) && this.value !== null) {
      if (!this.valueIsDisable(this.value)) {
        if (this.strictMode) {
          this.resetState();
        }
        this.initValue = null;
        this.initMax = this.getDateObject(this.initMax);
        this.initMin = this.getDateObject(this.initMin);
        this.timeCollections = this.liCollections = [];
        this.setMinMax(this.initMin, this.initMax);
      }
    }
  };
  TimePicker.prototype.validationAttribute = function(target, input) {
    var name = target.getAttribute("name") ? target.getAttribute("name") : target.getAttribute("id");
    input.setAttribute("name", name);
    target.removeAttribute("name");
    var attributes2 = ["required", "aria-required", "form"];
    for (var i = 0; i < attributes2.length; i++) {
      if (isNullOrUndefined(target.getAttribute(attributes2[i]))) {
        continue;
      }
      var attr = target.getAttribute(attributes2[i]);
      input.setAttribute(attributes2[i], attr);
      target.removeAttribute(attributes2[i]);
    }
  };
  TimePicker.prototype.initialize = function() {
    this.globalize = new Internationalization(this.locale);
    this.defaultCulture = new Internationalization("en");
    this.checkTimeFormat();
    this.checkInvalidValue(this.value);
    this.setProperties({ value: this.checkDateValue(new Date(this.checkInValue(this.value))) }, true);
    this.setProperties({ min: this.checkDateValue(new Date(this.checkInValue(this.min))) }, true);
    this.setProperties({ max: this.checkDateValue(new Date(this.checkInValue(this.max))) }, true);
    this.setProperties({ scrollTo: this.checkDateValue(new Date(this.checkInValue(this.scrollTo))) }, true);
    if (this.angularTag !== null) {
      this.validationAttribute(this.element, this.inputElement);
    }
    this.updateHtmlAttributeToElement();
    this.checkAttributes(false);
    var localeText = { placeholder: this.placeholder };
    this.l10n = new L10n("timepicker", localeText, this.locale);
    this.setProperties({ placeholder: this.placeholder || this.l10n.getConstant("placeholder") }, true);
    this.initValue = this.checkDateValue(this.value);
    this.initMin = this.checkDateValue(this.min);
    this.initMax = this.checkDateValue(this.max);
    this.isNavigate = this.isPreventBlur = this.isTextSelected = false;
    this.activeIndex = this.valueWithMinutes = this.prevDate = null;
    if (!isNullOrUndefined(this.element.getAttribute("id"))) {
      if (this.angularTag !== null) {
        this.inputElement.id = this.element.getAttribute("id") + "_input";
      }
    } else {
      this.element.id = getUniqueID("ej2_timepicker");
      if (this.angularTag !== null) {
        attributes(this.inputElement, { "id": this.element.id + "_input" });
      }
    }
    if (isNullOrUndefined(this.inputElement.getAttribute("name"))) {
      attributes(this.inputElement, { "name": this.element.id });
    }
    if (this.enableMask) {
      this.notify("createMask", {
        module: "MaskedDateTime"
      });
    }
  };
  TimePicker.prototype.checkTimeFormat = function() {
    if (this.format) {
      if (typeof this.format === "string") {
        this.formatString = this.format;
      } else if (!isNullOrUndefined(this.format.skeleton) && this.format.skeleton !== "") {
        var skeletonString = this.format.skeleton;
        this.formatString = this.globalize.getDatePattern({ type: "time", skeleton: skeletonString });
      } else {
        this.formatString = this.globalize.getDatePattern({ type: "time", skeleton: "short" });
      }
    } else {
      this.formatString = null;
    }
  };
  TimePicker.prototype.checkDateValue = function(value) {
    return !isNullOrUndefined(value) && value instanceof Date && !isNaN(+value) ? value : null;
  };
  TimePicker.prototype.createInputElement = function() {
    var updatedCssClassesValue = this.cssClass;
    var isBindClearAction = this.enableMask ? false : true;
    if (!isNullOrUndefined(this.cssClass) && this.cssClass !== "") {
      updatedCssClassesValue = this.cssClass.replace(/\s+/g, " ").trim();
    }
    this.inputWrapper = Input.createInput({
      element: this.inputElement,
      bindClearAction: isBindClearAction,
      floatLabelType: this.floatLabelType,
      properties: {
        readonly: this.readonly,
        placeholder: this.placeholder,
        cssClass: updatedCssClassesValue,
        enabled: this.enabled,
        enableRtl: this.enableRtl,
        showClearButton: this.showClearButton
      },
      buttons: [" e-input-group-icon e-time-icon e-icons"]
    }, this.createElement);
    this.inputWrapper.container.style.width = this.setWidth(this.width);
    attributes(this.inputElement, {
      "aria-autocomplete": "list",
      "tabindex": "0",
      "aria-expanded": "false",
      "role": "combobox",
      "autocomplete": "off",
      "autocorrect": "off",
      "autocapitalize": "off",
      "spellcheck": "false",
      "aria-disabled": "false",
      "aria-invalid": "false"
    });
    if (!this.isNullOrEmpty(this.inputStyle)) {
      Input.addAttributes({ "style": this.inputStyle }, this.inputElement);
    }
    addClass([this.inputWrapper.container], WRAPPERCLASS);
  };
  TimePicker.prototype.getCldrDateTimeFormat = function() {
    var culture = new Internationalization(this.locale);
    var cldrTime;
    var dateFormat = culture.getDatePattern({ skeleton: "yMd" });
    if (this.isNullOrEmpty(this.formatString)) {
      cldrTime = dateFormat + " " + this.cldrFormat("time");
    } else {
      cldrTime = this.formatString;
    }
    return cldrTime;
  };
  TimePicker.prototype.checkInvalidValue = function(value) {
    var isInvalid = false;
    if (typeof value !== "object" && !isNullOrUndefined(value)) {
      var valueString = value;
      if (typeof valueString === "string") {
        valueString = valueString.trim();
      }
      var valueExpression = null;
      var valueExp = null;
      if (typeof value === "number") {
        valueString = value.toString();
      } else if (typeof value === "string") {
        if (!/^[a-zA-Z0-9- ]*$/.test(value)) {
          valueExpression = this.setCurrentDate(this.getDateObject(value));
          if (isNullOrUndefined(valueExpression)) {
            valueExpression = this.checkDateValue(this.globalize.parseDate(valueString, {
              format: this.getCldrDateTimeFormat(),
              type: "datetime"
            }));
            if (isNullOrUndefined(valueExpression)) {
              valueExpression = this.checkDateValue(this.globalize.parseDate(valueString, {
                format: this.formatString,
                type: "dateTime",
                skeleton: "yMd"
              }));
            }
          }
        }
      }
      valueExp = this.globalize.parseDate(valueString, {
        format: this.getCldrDateTimeFormat(),
        type: "datetime"
      });
      valueExpression = !isNullOrUndefined(valueExp) && valueExp instanceof Date && !isNaN(+valueExp) ? valueExp : null;
      if (isNullOrUndefined(valueExpression) && valueString.replace(/\s/g, "").length) {
        var extISOString = null;
        var basicISOString = null;
        extISOString = /^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/;
        basicISOString = /^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/;
        if (!extISOString.test(valueString) && !basicISOString.test(valueString) || /^[a-zA-Z0-9- ]*$/.test(value) || isNaN(+/* @__PURE__ */ new Date("" + valueString))) {
          isInvalid = true;
        } else {
          valueExpression = /* @__PURE__ */ new Date("" + valueString);
        }
      }
      if (isInvalid) {
        if (!this.strictMode) {
          this.invalidValueString = valueString;
        }
        this.setProperties({ value: null }, true);
        this.initValue = null;
      } else {
        this.setProperties({ value: valueExpression }, true);
        this.initValue = this.value;
      }
    }
  };
  TimePicker.prototype.requiredModules = function() {
    var modules = [];
    if (this.enableMask) {
      modules.push({ args: [this], member: "MaskedDateTime" });
    }
    return modules;
  };
  TimePicker.prototype.cldrFormat = function(type) {
    var cldrDateTimeString;
    if (this.locale === "en" || this.locale === "en-US") {
      cldrDateTimeString = getValue("timeFormats.short", getDefaultDateObject());
    } else {
      cldrDateTimeString = this.getCultureTimeObject(cldrData, "" + this.locale);
    }
    return cldrDateTimeString;
  };
  TimePicker.prototype.destroy = function() {
    this.hide();
    this.unBindEvents();
    var ariaAttribute = {
      "aria-autocomplete": "list",
      "tabindex": "0",
      "aria-expanded": "false",
      "role": "combobox",
      "autocomplete": "off",
      "autocorrect": "off",
      "autocapitalize": "off",
      "spellcheck": "false",
      "aria-disabled": "true",
      "aria-invalid": "false"
    };
    if (this.inputElement) {
      Input.removeAttributes(ariaAttribute, this.inputElement);
      if (this.angularTag === null) {
        this.inputWrapper.container.parentElement.appendChild(this.inputElement);
      }
      if (!isNullOrUndefined(this.cloneElement.getAttribute("tabindex"))) {
        this.inputElement.setAttribute("tabindex", this.tabIndex);
      } else {
        this.inputElement.removeAttribute("tabindex");
      }
      this.ensureInputAttribute();
      this.enableElement([this.inputElement]);
      this.inputElement.classList.remove("e-input");
      if (isNullOrUndefined(this.cloneElement.getAttribute("disabled"))) {
        Input.setEnabled(true, this.inputElement, this.floatLabelType);
      }
    }
    if (this.inputWrapper.container) {
      detach(this.inputWrapper.container);
    }
    this.inputWrapper = this.popupWrapper = this.cloneElement = void 0;
    this.liCollections = this.timeCollections = this.disableItemCollection = [];
    if (!isNullOrUndefined(this.rippleFn)) {
      this.rippleFn();
    }
    _super.prototype.destroy.call(this);
    if (this.formElement) {
      EventHandler.remove(this.formElement, "reset", this.formResetHandler);
    }
    this.rippleFn = null;
    this.openPopupEventArgs = null;
    this.selectedElement = null;
    this.listTag = null;
    this.liCollections = null;
  };
  TimePicker.prototype.ensureInputAttribute = function() {
    var propertyList = [];
    for (var i = 0; i < this.inputElement.attributes.length; i++) {
      propertyList[i] = this.inputElement.attributes[i].name;
    }
    for (var i = 0; i < propertyList.length; i++) {
      if (!isNullOrUndefined(this.cloneElement.getAttribute(propertyList[i]))) {
        this.inputElement.setAttribute(propertyList[i], this.cloneElement.getAttribute(propertyList[i]));
        if (propertyList[i].toLowerCase() === "value") {
          this.inputElement.value = this.cloneElement.getAttribute(propertyList[i]);
        }
      } else {
        this.inputElement.removeAttribute(propertyList[i]);
        if (propertyList[i].toLowerCase() === "value") {
          this.inputElement.value = "";
        }
      }
    }
  };
  TimePicker.prototype.popupCreation = function() {
    this.popupWrapper = this.createElement("div", {
      className: ROOT$2 + " " + POPUP$1,
      attrs: { "id": this.element.id + "_popup", "style": "visibility:hidden" }
    });
    if (!isNullOrUndefined(this.cssClass)) {
      this.popupWrapper.className += " " + this.cssClass;
    }
    if (!isNullOrUndefined(this.step) && this.step > 0) {
      this.generateList();
      append2([this.listWrapper], this.popupWrapper);
    }
    this.openPopupEventArgs.appendTo.appendChild(this.popupWrapper);
    this.addSelection();
    this.renderPopup();
    detach(this.popupWrapper);
  };
  TimePicker.prototype.getPopupHeight = function() {
    var height = parseInt(POPUPDIMENSION$1, 10);
    var popupHeight = this.popupWrapper.getBoundingClientRect().height;
    return popupHeight > height ? height : popupHeight;
  };
  TimePicker.prototype.generateList = function() {
    this.createListItems();
    this.wireListEvents();
    var rippleModel = { duration: 300, selector: "." + LISTCLASS$1 };
    this.rippleFn = rippleEffect(this.listWrapper, rippleModel);
    this.liCollections = this.listWrapper.querySelectorAll("." + LISTCLASS$1);
  };
  TimePicker.prototype.renderPopup = function() {
    var _this = this;
    this.containerStyle = this.inputWrapper.container.getBoundingClientRect();
    this.popupObj = new Popup(this.popupWrapper, {
      width: this.setPopupWidth(this.width),
      zIndex: this.zIndex,
      targetType: "relative",
      position: Browser.isDevice ? { X: "center", Y: "center" } : { X: "left", Y: "bottom" },
      collision: Browser.isDevice ? { X: "fit", Y: "fit" } : { X: "flip", Y: "flip" },
      enableRtl: this.enableRtl,
      relateTo: Browser.isDevice ? document.body : this.inputWrapper.container,
      offsetY: OFFSETVAL,
      open: function() {
        _this.popupWrapper.style.visibility = "visible";
        addClass([_this.inputWrapper.buttons[0]], SELECTED);
      },
      close: function() {
        removeClass([_this.inputWrapper.buttons[0]], SELECTED);
        _this.unWireListEvents();
        _this.inputElement.removeAttribute("aria-activedescendant");
        remove(_this.popupObj.element);
        _this.popupObj.destroy();
        _this.popupWrapper.innerHTML = "";
        _this.listWrapper = _this.popupWrapper = _this.listTag = void 0;
      },
      targetExitViewport: function() {
        if (!Browser.isDevice) {
          _this.hide();
        }
      }
    });
    if (!Browser.isDevice) {
      this.popupObj.collision = { X: "none", Y: "flip" };
    }
    this.popupObj.element.style.maxHeight = POPUPDIMENSION$1;
  };
  TimePicker.prototype.getFormattedValue = function(value) {
    if (isNullOrUndefined(this.checkDateValue(value))) {
      return null;
    } else {
      return this.globalize.formatDate(value, { skeleton: "medium", type: "time" });
    }
  };
  TimePicker.prototype.getDateObject = function(text) {
    if (!this.isNullOrEmpty(text)) {
      var dateValue = this.createDateObj(text);
      var value = !this.isNullOrEmpty(this.initValue);
      if (this.checkDateValue(dateValue)) {
        var date = value ? this.initValue.getDate() : DAY$1;
        var month2 = value ? this.initValue.getMonth() : MONTH$1;
        var year = value ? this.initValue.getFullYear() : YEAR$1;
        return new Date(year, month2, date, dateValue.getHours(), dateValue.getMinutes(), dateValue.getSeconds());
      }
    }
    return null;
  };
  TimePicker.prototype.updateHtmlAttributeToWrapper = function() {
    if (!isNullOrUndefined(this.htmlAttributes)) {
      for (var _i = 0, _a = Object.keys(this.htmlAttributes); _i < _a.length; _i++) {
        var key = _a[_i];
        if (wrapperAttributes.indexOf(key) > -1) {
          if (key === "class") {
            var updatedClassesValue = this.htmlAttributes["" + key].replace(/\s+/g, " ").trim();
            if (updatedClassesValue !== "") {
              addClass([this.inputWrapper.container], updatedClassesValue.split(" "));
            }
          } else if (key === "style") {
            var timeStyle = this.inputWrapper.container.getAttribute(key);
            timeStyle = !isNullOrUndefined(timeStyle) ? timeStyle + this.htmlAttributes["" + key] : this.htmlAttributes["" + key];
            this.inputWrapper.container.setAttribute(key, timeStyle);
          } else {
            this.inputWrapper.container.setAttribute(key, this.htmlAttributes["" + key]);
          }
        }
      }
    }
  };
  TimePicker.prototype.updateHtmlAttributeToElement = function() {
    if (!isNullOrUndefined(this.htmlAttributes)) {
      for (var _i = 0, _a = Object.keys(this.htmlAttributes); _i < _a.length; _i++) {
        var key = _a[_i];
        if (wrapperAttributes.indexOf(key) < 0) {
          this.inputElement.setAttribute(key, this.htmlAttributes["" + key]);
        }
      }
    }
  };
  TimePicker.prototype.updateCssClass = function(cssClassNew, cssClassOld) {
    if (!isNullOrUndefined(cssClassOld)) {
      cssClassOld = cssClassOld.replace(/\s+/g, " ").trim();
    }
    if (!isNullOrUndefined(cssClassNew)) {
      cssClassNew = cssClassNew.replace(/\s+/g, " ").trim();
    }
    Input.setCssClass(cssClassNew, [this.inputWrapper.container], cssClassOld);
    if (this.popupWrapper) {
      Input.setCssClass(cssClassNew, [this.popupWrapper], cssClassOld);
    }
  };
  TimePicker.prototype.removeErrorClass = function() {
    removeClass([this.inputWrapper.container], ERROR$1);
    attributes(this.inputElement, { "aria-invalid": "false" });
  };
  TimePicker.prototype.checkErrorState = function(val) {
    var value = this.getDateObject(val);
    if (this.validateState(value) && !this.invalidValueString || this.enableMask && this.inputElement.value === this.maskedDateValue) {
      this.removeErrorClass();
    } else {
      addClass([this.inputWrapper.container], ERROR$1);
      attributes(this.inputElement, { "aria-invalid": "true" });
    }
  };
  TimePicker.prototype.validateInterval = function() {
    if (!isNullOrUndefined(this.step) && this.step > 0) {
      this.enableElement([this.inputWrapper.buttons[0]]);
    } else {
      this.disableTimeIcon();
    }
  };
  TimePicker.prototype.disableTimeIcon = function() {
    this.disableElement([this.inputWrapper.buttons[0]]);
    this.hide();
  };
  TimePicker.prototype.disableElement = function(element2) {
    addClass(element2, DISABLED$1);
  };
  TimePicker.prototype.enableElement = function(element2) {
    removeClass(element2, DISABLED$1);
  };
  TimePicker.prototype.selectInputText = function() {
    this.inputElement.setSelectionRange(0, this.inputElement.value.length);
  };
  TimePicker.prototype.setCursorToEnd = function() {
    this.inputElement.setSelectionRange(this.inputElement.value.length, this.inputElement.value.length);
  };
  TimePicker.prototype.getMeridianText = function() {
    var meridian;
    if (this.locale === "en" || this.locale === "en-US") {
      meridian = getValue("dayPeriods.format.wide", getDefaultDateObject());
    } else {
      var gregorianFormat = ".dates.calendars.gregorian.dayPeriods.format.abbreviated";
      var mainVal = "main.";
      meridian = getValue(mainVal + "" + this.locale + gregorianFormat, cldrData);
    }
    return meridian;
  };
  TimePicker.prototype.getCursorSelection = function() {
    var input = this.inputElement;
    var start = 0;
    var end = 0;
    if (!isNaN(input.selectionStart)) {
      start = input.selectionStart;
      end = input.selectionEnd;
    }
    return { start: Math.abs(start), end: Math.abs(end) };
  };
  TimePicker.prototype.getActiveElement = function() {
    if (!isNullOrUndefined(this.popupWrapper)) {
      return this.popupWrapper.querySelectorAll("." + SELECTED);
    } else {
      return null;
    }
  };
  TimePicker.prototype.isNullOrEmpty = function(value) {
    if (isNullOrUndefined(value) || typeof value === "string" && value.trim() === "") {
      return true;
    } else {
      return false;
    }
  };
  TimePicker.prototype.setWidth = function(width) {
    if (typeof width === "number") {
      width = formatUnit(width);
    } else if (typeof width === "string") {
      width = width.match(/px|%|em/) ? width : formatUnit(width);
    } else {
      width = "100%";
    }
    return width;
  };
  TimePicker.prototype.setPopupWidth = function(width) {
    width = this.setWidth(width);
    if (width.indexOf("%") > -1) {
      var inputWidth = this.containerStyle.width * parseFloat(width) / 100;
      width = inputWidth.toString() + "px";
    }
    return width;
  };
  TimePicker.prototype.setScrollPosition = function() {
    var element2 = this.selectedElement;
    if (!isNullOrUndefined(element2)) {
      this.findScrollTop(element2);
    } else if (this.popupWrapper && this.checkDateValue(this.scrollTo)) {
      this.setScrollTo();
    }
  };
  TimePicker.prototype.findScrollTop = function(element2) {
    var listHeight = this.getPopupHeight();
    var nextEle = element2.nextElementSibling;
    var height = nextEle ? nextEle.offsetTop : element2.offsetTop;
    var liHeight = element2.getBoundingClientRect().height;
    if (height + element2.offsetTop > listHeight) {
      this.popupWrapper.scrollTop = nextEle ? height - (listHeight / HALFPOSITION$1 + liHeight / HALFPOSITION$1) : height;
    } else {
      this.popupWrapper.scrollTop = 0;
    }
  };
  TimePicker.prototype.setScrollTo = function() {
    var element2;
    if (!isNullOrUndefined(this.popupWrapper)) {
      var items = this.popupWrapper.querySelectorAll("." + LISTCLASS$1);
      if (items.length) {
        var initialTime = this.timeCollections[0];
        var scrollTime = this.getDateObject(this.checkDateValue(this.scrollTo)).getTime();
        element2 = items[Math.round((scrollTime - initialTime) / (this.step * 6e4))];
      }
    } else {
      this.popupWrapper.scrollTop = 0;
    }
    if (!isNullOrUndefined(element2)) {
      this.findScrollTop(element2);
    } else {
      this.popupWrapper.scrollTop = 0;
    }
  };
  TimePicker.prototype.getText = function() {
    return isNullOrUndefined(this.checkDateValue(this.value)) ? "" : this.getValue(this.value);
  };
  TimePicker.prototype.getValue = function(value) {
    return isNullOrUndefined(this.checkDateValue(value)) ? null : this.globalize.formatDate(value, {
      format: this.cldrTimeFormat(),
      type: "time"
    });
  };
  TimePicker.prototype.cldrDateFormat = function() {
    var cldrDate;
    if (this.locale === "en" || this.locale === "en-US") {
      cldrDate = getValue("dateFormats.short", getDefaultDateObject());
    } else {
      cldrDate = this.getCultureDateObject(cldrData, "" + this.locale);
    }
    return cldrDate;
  };
  TimePicker.prototype.cldrTimeFormat = function() {
    var cldrTime;
    if (this.isNullOrEmpty(this.formatString)) {
      if (this.locale === "en" || this.locale === "en-US") {
        cldrTime = getValue("timeFormats.short", getDefaultDateObject());
      } else {
        cldrTime = this.getCultureTimeObject(cldrData, "" + this.locale);
      }
    } else {
      cldrTime = this.formatString;
    }
    return cldrTime;
  };
  TimePicker.prototype.dateToNumeric = function() {
    var cldrTime;
    if (this.locale === "en" || this.locale === "en-US") {
      cldrTime = getValue("timeFormats.medium", getDefaultDateObject());
    } else {
      cldrTime = getValue("main." + this.locale + ".dates.calendars.gregorian.timeFormats.medium", cldrData);
    }
    return cldrTime;
  };
  TimePicker.prototype.getExactDateTime = function(value) {
    if (isNullOrUndefined(this.checkDateValue(value))) {
      return null;
    } else {
      return this.globalize.formatDate(value, { format: this.dateToNumeric(), type: "time" });
    }
  };
  TimePicker.prototype.setValue = function(value) {
    var time = this.checkValue(value);
    if (!this.strictMode && !this.validateState(time)) {
      if (this.checkDateValue(this.valueWithMinutes) === null) {
        this.initValue = this.valueWithMinutes = null;
      }
      this.validateMinMax(this.value, this.min, this.max);
    } else {
      if (this.isNullOrEmpty(time)) {
        this.initValue = null;
        this.validateMinMax(this.value, this.min, this.max);
      } else {
        this.initValue = this.compareFormatChange(time);
      }
    }
    this.updateInput(true, this.initValue);
  };
  TimePicker.prototype.compareFormatChange = function(value) {
    if (isNullOrUndefined(value)) {
      return null;
    }
    return value !== this.getText() ? this.getDateObject(value) : this.getDateObject(this.value);
  };
  TimePicker.prototype.updatePlaceHolder = function() {
    Input.setPlaceholder(this.l10n.getConstant("placeholder"), this.inputElement);
  };
  TimePicker.prototype.updateInputValue = function(value) {
    Input.setValue(value, this.inputElement, this.floatLabelType, this.showClearButton);
  };
  TimePicker.prototype.preventEventBubbling = function(e) {
    e.preventDefault();
    this.interopAdaptor.invokeMethodAsync("OnTimeIconClick");
  };
  TimePicker.prototype.popupHandler = function(e) {
    if (!this.enabled) {
      return;
    }
    if (Browser.isDevice) {
      this.inputElement.setAttribute("readonly", "");
    }
    e.preventDefault();
    if (this.isPopupOpen()) {
      this.closePopup(0, e);
    } else {
      this.inputElement.focus();
      this.show(e);
    }
  };
  TimePicker.prototype.mouseDownHandler = function() {
    if (!this.enabled) {
      return;
    }
    if (!this.readonly) {
      this.inputElement.setSelectionRange(0, 0);
      EventHandler.add(this.inputElement, "mouseup", this.mouseUpHandler, this);
    }
  };
  TimePicker.prototype.mouseUpHandler = function(event) {
    if (!this.readonly) {
      event.preventDefault();
      if (this.enableMask) {
        event.preventDefault();
        this.notify("setMaskSelection", {
          module: "MaskedDateTime"
        });
        return;
      } else {
        EventHandler.remove(this.inputElement, "mouseup", this.mouseUpHandler);
        var curPos = this.getCursorSelection();
        if (!(curPos.start === 0 && curPos.end === this.inputElement.value.length)) {
          if (this.inputElement.value.length > 0) {
            this.cursorDetails = this.focusSelection();
          }
          this.inputElement.setSelectionRange(this.cursorDetails.start, this.cursorDetails.end);
        }
      }
    }
  };
  TimePicker.prototype.focusSelection = function() {
    var regex2 = new RegExp("^[a-zA-Z0-9]+$");
    var split = this.inputElement.value.split("");
    split.push(" ");
    var curPos = this.getCursorSelection();
    var start = 0;
    var end = 0;
    var isSeparator = false;
    if (!this.isTextSelected) {
      for (var i = 0; i < split.length; i++) {
        if (!regex2.test(split[i])) {
          end = i;
          isSeparator = true;
        }
        if (isSeparator) {
          if (curPos.start >= start && curPos.end <= end) {
            end = end;
            this.isTextSelected = true;
            break;
          } else {
            start = i + 1;
            isSeparator = false;
          }
        }
      }
    } else {
      start = curPos.start;
      end = curPos.end;
      this.isTextSelected = false;
    }
    return { start, end };
  };
  TimePicker.prototype.inputHandler = function(event) {
    if (!this.readonly && this.enabled) {
      if (event.action !== "right" && event.action !== "left" && event.action !== "tab") {
        event.preventDefault();
      }
      switch (event.action) {
        case "home":
        case "end":
        case "up":
        case "down":
          if (this.enableMask && !this.readonly && !this.isPopupOpen()) {
            event.preventDefault();
            this.notify("keyDownHandler", {
              module: "MaskedDateTime",
              e: event
            });
          }
          if (!this.enableMask || this.isPopupOpen()) {
            this.keyHandler(event);
          }
          break;
        case "enter":
          if (this.isNavigate) {
            this.selectedElement = this.liCollections[this.activeIndex];
            this.valueWithMinutes = new Date(this.timeCollections[this.activeIndex]);
            this.updateValue(this.valueWithMinutes, event);
          } else {
            this.updateValue(this.inputElement.value, event);
          }
          this.hide();
          this.isNavigate = false;
          if (this.isPopupOpen()) {
            event.stopPropagation();
          }
          break;
        case "open":
          this.show(event);
          break;
        case "escape":
          this.updateInputValue(this.objToString(this.value));
          if (this.enableMask) {
            if (!this.value) {
              this.updateInputValue(this.maskedDateValue);
            }
            this.createMask();
          }
          this.previousState(this.value);
          this.hide();
          break;
        case "close":
          this.hide();
          break;
        case "right":
        case "left":
        case "tab":
        case "shiftTab":
          if (!this.isPopupOpen() && this.enableMask && !this.readonly) {
            if (this.inputElement.selectionStart === 0 && this.inputElement.selectionEnd === this.inputElement.value.length || this.inputElement.selectionEnd !== this.inputElement.value.length && event.action === "tab" || this.inputElement.selectionStart !== 0 && event.action === "shiftTab" || (event.action === "left" || event.action === "right")) {
              event.preventDefault();
            }
            this.notify("keyDownHandler", {
              module: "MaskedDateTime",
              e: event
            });
          }
          break;
        default:
          this.isNavigate = false;
          break;
      }
    }
  };
  TimePicker.prototype.onMouseClick = function(event) {
    var target = event.target;
    var li = this.selectedElement = closest(target, "." + LISTCLASS$1);
    this.setSelection(li, event);
    if (li && li.classList.contains(LISTCLASS$1)) {
      this.hide();
    }
  };
  TimePicker.prototype.closePopup = function(delay, e) {
    var _this = this;
    if (this.isPopupOpen() && this.popupWrapper) {
      var args = {
        popup: this.popupObj,
        event: e || null,
        cancel: false,
        name: "open"
      };
      removeClass([document.body], OVERFLOW$1);
      this.trigger("close", args, function(args2) {
        if (!args2.cancel) {
          var animModel = {
            name: "FadeOut",
            duration: ANIMATIONDURATION$1,
            delay: delay ? delay : 0
          };
          _this.popupObj.hide(new Animation$1(animModel));
          removeClass([_this.inputWrapper.container], [ICONANIMATION$1]);
          attributes(_this.inputElement, { "aria-expanded": "false" });
          _this.inputElement.removeAttribute("aria-owns");
          _this.inputElement.removeAttribute("aria-activedescendant");
          EventHandler.remove(document, "mousedown touchstart", _this.documentClickHandler);
        }
        if (Browser.isDevice && _this.modal) {
          _this.modal.style.display = "none";
          _this.modal.outerHTML = "";
          _this.modal = null;
        }
        if (Browser.isDevice) {
          if (!isNullOrUndefined(_this.mobileTimePopupWrap)) {
            _this.mobileTimePopupWrap.remove();
            _this.mobileTimePopupWrap = null;
          }
        }
        if (Browser.isDevice && _this.allowEdit && !_this.readonly) {
          _this.inputElement.removeAttribute("readonly");
        }
      });
    } else {
      if (Browser.isDevice && this.allowEdit && !this.readonly) {
        this.inputElement.removeAttribute("readonly");
      }
    }
  };
  TimePicker.prototype.disposeServerPopup = function() {
    if (this.popupWrapper) {
      this.popupWrapper.style.visibility = "hidden";
      this.popupWrapper.style.top = "-9999px";
      this.popupWrapper.style.left = "-9999px";
      this.popupWrapper.style.width = "0px";
      this.popupWrapper.style.height = "0px";
    }
  };
  TimePicker.prototype.checkValueChange = function(event, isNavigation) {
    if (!this.strictMode && !this.validateState(this.valueWithMinutes)) {
      if (this.checkDateValue(this.valueWithMinutes) === null) {
        this.initValue = this.valueWithMinutes = null;
      }
      this.setProperties({ value: this.compareFormatChange(this.inputElement.value) }, true);
      this.initValue = this.valueWithMinutes = this.compareFormatChange(this.inputElement.value);
      this.prevValue = this.inputElement.value;
      if (+this.prevDate !== +this.value) {
        this.changeEvent(event);
      }
    } else {
      if (!isNavigation) {
        if (this.prevValue !== this.inputElement.value || isNullOrUndefined(this.checkDateValue(this.value))) {
          this.valueProcess(event, this.compareFormatChange(this.inputElement.value));
        }
      } else {
        var value = this.getDateObject(new Date(this.timeCollections[this.activeIndex]));
        if (+this.prevDate !== +value) {
          this.valueProcess(event, value);
        }
      }
    }
  };
  TimePicker.prototype.onMouseOver = function(event) {
    var currentLi = closest(event.target, "." + LISTCLASS$1);
    this.setHover(currentLi, HOVER$1);
  };
  TimePicker.prototype.setHover = function(li, className) {
    if (this.enabled && this.isValidLI(li) && !li.classList.contains(className)) {
      this.removeHover(className);
      addClass([li], className);
      if (className === NAVIGATION$1) {
        li.setAttribute("aria-selected", "true");
      }
    }
  };
  TimePicker.prototype.setSelection = function(li, event) {
    if (this.isValidLI(li)) {
      this.checkValue(li.getAttribute("data-value"));
      if (this.enableMask) {
        this.notify("createMask", {
          module: "MaskedDateTime",
          navigated: true
        });
      }
      this.selectedElement = li;
      this.activeIndex = Array.prototype.slice.call(this.liCollections).indexOf(li);
      this.valueWithMinutes = new Date(this.timeCollections[this.activeIndex]);
      addClass([this.selectedElement], SELECTED);
      this.selectedElement.setAttribute("aria-selected", "true");
      this.checkValueChange(event, true);
    }
  };
  TimePicker.prototype.onMouseLeave = function() {
    this.removeHover(HOVER$1);
  };
  TimePicker.prototype.scrollHandler = function() {
    if (this.getModuleName() === "timepicker" && Browser.isDevice) {
      return;
    } else {
      this.hide();
    }
  };
  TimePicker.prototype.setMinMax = function(minVal, maxVal) {
    if (isNullOrUndefined(this.checkDateValue(minVal))) {
      this.initMin = this.getDateObject("12:00:00 AM");
    }
    if (isNullOrUndefined(this.checkDateValue(maxVal))) {
      this.initMax = this.getDateObject("11:59:59 PM");
    }
  };
  TimePicker.prototype.validateMinMax = function(dateVal, minVal, maxVal) {
    var value = dateVal instanceof Date ? dateVal : this.getDateObject(dateVal);
    if (!isNullOrUndefined(this.checkDateValue(value))) {
      dateVal = this.strictOperation(this.initMin, this.initMax, dateVal, value);
    } else if (+this.createDateObj(this.getFormattedValue(this.initMin)) > +this.createDateObj(this.getFormattedValue(this.initMax))) {
      this.disableTimeIcon();
    }
    if (this.strictMode) {
      dateVal = this.valueIsDisable(dateVal) ? dateVal : null;
    }
    this.checkErrorState(dateVal);
    return dateVal;
  };
  TimePicker.prototype.valueIsDisable = function(value) {
    if (this.disableItemCollection.length > 0) {
      if (this.disableItemCollection.length === this.timeCollections.length) {
        return false;
      }
      var time = value instanceof Date ? this.objToString(value) : value;
      for (var index = 0; index < this.disableItemCollection.length; index++) {
        if (time === this.disableItemCollection[index]) {
          return false;
        }
      }
    }
    return true;
  };
  TimePicker.prototype.validateState = function(val) {
    if (!this.strictMode) {
      if (this.valueIsDisable(val)) {
        var value = typeof val === "string" ? this.setCurrentDate(this.getDateObject(val)) : this.setCurrentDate(this.getDateObject(val));
        var maxValue = this.setCurrentDate(this.getDateObject(this.initMax));
        var minValue = this.setCurrentDate(this.getDateObject(this.initMin));
        if (!isNullOrUndefined(this.checkDateValue(value))) {
          if (+value > +maxValue || +value < +minValue) {
            return false;
          }
        } else {
          if (+maxValue < +minValue || this.inputElement.value !== "") {
            return false;
          }
        }
      } else {
        return false;
      }
    }
    return true;
  };
  TimePicker.prototype.strictOperation = function(minimum, maximum, dateVal, val) {
    var maxValue = this.createDateObj(this.getFormattedValue(maximum));
    var minValue = this.createDateObj(this.getFormattedValue(minimum));
    var value = this.createDateObj(this.getFormattedValue(val));
    if (this.strictMode) {
      if (+minValue > +maxValue) {
        this.disableTimeIcon();
        this.initValue = this.getDateObject(maxValue);
        this.updateInputValue(this.getValue(this.initValue));
        if (this.enableMask) {
          this.createMask();
        }
        return this.inputElement.value;
      } else if (+minValue >= +value) {
        return this.getDateObject(minValue);
      } else if (+value >= +maxValue || +minValue === +maxValue) {
        return this.getDateObject(maxValue);
      }
    } else {
      if (+minValue > +maxValue) {
        this.disableTimeIcon();
        if (!isNaN(+this.createDateObj(dateVal))) {
          return dateVal;
        }
      }
    }
    return dateVal;
  };
  TimePicker.prototype.bindEvents = function() {
    EventHandler.add(this.inputWrapper.buttons[0], "mousedown", this.popupHandler, this);
    EventHandler.add(this.inputElement, "blur", this.inputBlurHandler, this);
    EventHandler.add(this.inputElement, "focus", this.inputFocusHandler, this);
    EventHandler.add(this.inputElement, "change", this.inputChangeHandler, this);
    EventHandler.add(this.inputElement, "input", this.inputEventHandler, this);
    if (this.enableMask) {
      EventHandler.add(this.inputElement, "keydown", this.keydownHandler, this);
    }
    if (this.showClearButton && this.inputWrapper.clearButton) {
      EventHandler.add(this.inputWrapper.clearButton, "mousedown", this.clearHandler, this);
    }
    if (this.formElement) {
      EventHandler.add(this.formElement, "reset", this.formResetHandler, this);
    }
    if (!Browser.isDevice) {
      this.keyConfigure = extend(this.keyConfigure, this.keyConfigs);
      this.inputEvent = new KeyboardEvents(this.inputWrapper.container, {
        keyAction: this.inputHandler.bind(this),
        keyConfigs: this.keyConfigure,
        eventName: "keydown"
      });
      if (this.showClearButton && this.inputElement) {
        EventHandler.add(this.inputElement, "mousedown", this.mouseDownHandler, this);
      }
    }
  };
  TimePicker.prototype.keydownHandler = function(e) {
    switch (e.code) {
      case "Delete":
        if (this.enableMask && !this.popupObj && !this.readonly) {
          this.notify("keyDownHandler", {
            module: "MaskedDateTime",
            e
          });
        }
        break;
    }
  };
  TimePicker.prototype.formResetHandler = function() {
    if (!this.enabled) {
      return;
    }
    if (!this.inputElement.disabled) {
      var timeValue = this.inputElement.getAttribute("value");
      var val = this.checkDateValue(this.inputEleValue);
      if (this.element.tagName === "EJS-TIMEPICKER") {
        val = null;
        timeValue = "";
        this.inputElement.setAttribute("value", "");
      }
      this.setProperties({ value: val }, true);
      this.prevDate = this.value;
      this.valueWithMinutes = this.value;
      this.initValue = this.value;
      if (this.inputElement) {
        this.updateInputValue(timeValue);
        if (this.enableMask) {
          if (!timeValue) {
            this.updateInputValue(this.maskedDateValue);
          }
          this.createMask();
        }
        this.checkErrorState(timeValue);
        this.prevValue = this.inputElement.value;
      }
    }
  };
  TimePicker.prototype.inputChangeHandler = function(e) {
    if (!this.enabled) {
      return;
    }
    e.stopPropagation();
  };
  TimePicker.prototype.inputEventHandler = function() {
    if (this.enableMask) {
      this.notify("inputHandler", {
        module: "MaskedDateTime"
      });
    }
  };
  TimePicker.prototype.unBindEvents = function() {
    if (this.inputWrapper) {
      EventHandler.remove(this.inputWrapper.buttons[0], "mousedown touchstart", this.popupHandler);
    }
    EventHandler.remove(this.inputElement, "blur", this.inputBlurHandler);
    EventHandler.remove(this.inputElement, "focus", this.inputFocusHandler);
    EventHandler.remove(this.inputElement, "change", this.inputChangeHandler);
    EventHandler.remove(this.inputElement, "input", this.inputEventHandler);
    if (this.inputEvent) {
      this.inputEvent.destroy();
    }
    EventHandler.remove(this.inputElement, "mousedown touchstart", this.mouseDownHandler);
    if (this.showClearButton && !isNullOrUndefined(this.inputWrapper) && !isNullOrUndefined(this.inputWrapper.clearButton)) {
      EventHandler.remove(this.inputWrapper.clearButton, "mousedown touchstart", this.clearHandler);
    }
    if (this.formElement) {
      EventHandler.remove(this.formElement, "reset", this.formResetHandler);
    }
  };
  TimePicker.prototype.bindClearEvent = function() {
    if (this.showClearButton && this.inputWrapper.clearButton) {
      EventHandler.add(this.inputWrapper.clearButton, "mousedown", this.clearHandler, this);
    }
  };
  TimePicker.prototype.raiseClearedEvent = function(e) {
    var clearedArgs = {
      event: e
    };
    this.trigger("cleared", clearedArgs);
  };
  TimePicker.prototype.clearHandler = function(e) {
    if (!this.enabled) {
      return;
    }
    e.preventDefault();
    if (!isNullOrUndefined(this.value)) {
      this.clear(e);
    } else {
      this.resetState();
      this.raiseClearedEvent(e);
    }
    if (this.popupWrapper) {
      this.popupWrapper.scrollTop = 0;
    }
    if (this.enableMask) {
      this.notify("clearHandler", {
        module: "MaskedDateTime"
      });
    }
    if (closest(this.element, "form")) {
      var element2 = this.element;
      var keyupEvent = document.createEvent("KeyboardEvent");
      keyupEvent.initEvent("keyup", false, true);
      element2.dispatchEvent(keyupEvent);
    }
  };
  TimePicker.prototype.clear = function(event) {
    this.setProperties({ value: null }, true);
    this.initValue = null;
    this.resetState();
    this.raiseClearedEvent(event);
    this.changeEvent(event);
  };
  TimePicker.prototype.setZIndex = function() {
    if (this.popupObj) {
      this.popupObj.zIndex = this.zIndex;
      this.popupObj.dataBind();
    }
  };
  TimePicker.prototype.checkAttributes = function(isDynamic) {
    var attributes2 = isDynamic ? isNullOrUndefined(this.htmlAttributes) ? [] : Object.keys(this.htmlAttributes) : ["step", "disabled", "readonly", "style", "name", "value", "min", "max", "placeholder"];
    var value;
    for (var _i = 0, attributes_1 = attributes2; _i < attributes_1.length; _i++) {
      var prop = attributes_1[_i];
      if (!isNullOrUndefined(this.inputElement.getAttribute(prop))) {
        switch (prop) {
          case "disabled":
            if (isNullOrUndefined(this.timeOptions) || this.timeOptions["enabled"] === void 0 || isDynamic) {
              var enabled = this.inputElement.getAttribute(prop) === "disabled" || this.inputElement.getAttribute(prop) === "" || this.inputElement.getAttribute(prop) === "true" ? false : true;
              this.setProperties({ enabled }, !isDynamic);
            }
            break;
          case "style":
            this.inputStyle = this.inputElement.getAttribute(prop);
            break;
          case "readonly":
            if (isNullOrUndefined(this.timeOptions) || this.timeOptions["readonly"] === void 0 || isDynamic) {
              var readonly2 = this.inputElement.getAttribute(prop) === "readonly" || this.inputElement.getAttribute(prop) === "" || this.inputElement.getAttribute(prop) === "true" ? true : false;
              this.setProperties({ readonly: readonly2 }, !isDynamic);
            }
            break;
          case "name":
            this.inputElement.setAttribute("name", this.inputElement.getAttribute(prop));
            break;
          case "step":
            this.step = parseInt(this.inputElement.getAttribute(prop), 10);
            break;
          case "placeholder":
            if (isNullOrUndefined(this.timeOptions) || this.timeOptions["placeholder"] === void 0 || isDynamic) {
              this.setProperties({ placeholder: this.inputElement.getAttribute(prop) }, !isDynamic);
            }
            break;
          case "min":
            if (isNullOrUndefined(this.timeOptions) || this.timeOptions["min"] === void 0 || isDynamic) {
              value = new Date(this.inputElement.getAttribute(prop));
              if (!isNullOrUndefined(this.checkDateValue(value))) {
                this.setProperties({ min: value }, !isDynamic);
              }
            }
            break;
          case "max":
            if (isNullOrUndefined(this.timeOptions) || this.timeOptions["max"] === void 0 || isDynamic) {
              value = new Date(this.inputElement.getAttribute(prop));
              if (!isNullOrUndefined(this.checkDateValue(value))) {
                this.setProperties({ max: value }, !isDynamic);
              }
            }
            break;
          case "value":
            if (isNullOrUndefined(this.timeOptions) || this.timeOptions["value"] === void 0 || isDynamic) {
              value = new Date(this.inputElement.getAttribute(prop));
              if (!isNullOrUndefined(this.checkDateValue(value))) {
                this.initValue = value;
                this.updateInput(false, this.initValue);
                this.setProperties({ value }, !isDynamic);
              }
            }
            break;
        }
      }
    }
  };
  TimePicker.prototype.setCurrentDate = function(value) {
    if (isNullOrUndefined(this.checkDateValue(value))) {
      return null;
    }
    return new Date(YEAR$1, MONTH$1, DAY$1, value.getHours(), value.getMinutes(), value.getSeconds());
  };
  TimePicker.prototype.getTextFormat = function() {
    var time = 0;
    if (this.cldrTimeFormat().split(" ")[0] === "a" || this.cldrTimeFormat().indexOf("a") === 0) {
      time = 1;
    } else if (this.cldrTimeFormat().indexOf("a") < 0) {
      var strArray = this.cldrTimeFormat().split(" ");
      for (var i = 0; i < strArray.length; i++) {
        if (strArray[i].toLowerCase().indexOf("h") >= 0) {
          time = i;
          break;
        }
      }
    }
    return time;
  };
  TimePicker.prototype.updateValue = function(value, event) {
    var val;
    if (this.isNullOrEmpty(value)) {
      this.resetState();
    } else {
      val = this.checkValue(value);
      if (this.strictMode) {
        var inputVal = val === null && value.trim().length > 0 ? this.previousState(this.prevDate) : this.inputElement.value;
        this.updateInputValue(inputVal);
        if (this.enableMask) {
          if (!inputVal) {
            this.updateInputValue(this.maskedDateValue);
          }
          if (isNullOrUndefined(val) && value !== this.maskedDateValue) {
            this.createMask();
          }
          if (isNullOrUndefined(val) && value === this.maskedDateValue) {
            this.updateInputValue(this.maskedDateValue);
          }
        }
      }
    }
    this.checkValueChange(event, typeof value === "string" ? false : true);
  };
  TimePicker.prototype.previousState = function(date) {
    var value = this.getDateObject(date);
    for (var i = 0; i < this.timeCollections.length; i++) {
      if (+value === this.timeCollections[i]) {
        this.activeIndex = i;
        this.selectedElement = this.liCollections[i];
        this.valueWithMinutes = new Date(this.timeCollections[i]);
        break;
      }
    }
    return this.prevValue;
  };
  TimePicker.prototype.resetState = function() {
    this.removeSelection();
    Input.setValue("", this.inputElement, this.floatLabelType, false);
    this.valueWithMinutes = this.activeIndex = null;
    if (!this.strictMode) {
      this.checkErrorState(null);
    }
  };
  TimePicker.prototype.objToString = function(val) {
    if (isNullOrUndefined(this.checkDateValue(val))) {
      return null;
    } else {
      return this.globalize.formatDate(val, { format: this.cldrTimeFormat(), type: "time" });
    }
  };
  TimePicker.prototype.checkValue = function(value) {
    if (!this.isNullOrEmpty(value)) {
      var date = value instanceof Date ? value : this.getDateObject(value);
      return this.validateValue(date, value);
    }
    this.resetState();
    return this.valueWithMinutes = null;
  };
  TimePicker.prototype.validateValue = function(date, value) {
    var time;
    var val = this.validateMinMax(value, this.min, this.max);
    var newval = this.createDateObj(val);
    if (this.getFormattedValue(newval) !== this.getFormattedValue(this.value)) {
      this.valueWithMinutes = isNullOrUndefined(newval) ? null : newval;
      time = this.objToString(this.valueWithMinutes);
    } else {
      if (this.strictMode) {
        date = newval;
      }
      this.valueWithMinutes = this.checkDateValue(date);
      time = this.objToString(this.valueWithMinutes);
    }
    if (!this.strictMode && isNullOrUndefined(time)) {
      var value_1 = val.trim().length > 0 ? val : "";
      this.updateInputValue(value_1);
      if (this.enableMask) {
        if (!value_1) {
          this.updateInputValue(this.maskedDateValue);
        }
      }
    } else {
      this.updateInputValue(time);
      if (this.enableMask) {
        if (time === "") {
          this.updateInputValue(this.maskedDateValue);
        }
        if (isNullOrUndefined(time) && value !== this.maskedDateValue) {
          this.createMask();
        }
        if (isNullOrUndefined(time) && value === this.maskedDateValue) {
          this.updateInputValue(this.maskedDateValue);
        }
      }
    }
    return time;
  };
  TimePicker.prototype.createMask = function() {
    this.notify("createMask", {
      module: "MaskedDateTime"
    });
  };
  TimePicker.prototype.findNextElement = function(event) {
    var textVal = this.inputElement.value;
    var value = isNullOrUndefined(this.valueWithMinutes) ? this.createDateObj(textVal) : this.getDateObject(this.valueWithMinutes);
    var timeVal = null;
    var count = this.liCollections.length;
    var collections = this.timeCollections;
    if (!isNullOrUndefined(this.checkDateValue(value)) || !isNullOrUndefined(this.activeIndex)) {
      if (event.action === "home") {
        var index = this.validLiElement(0);
        timeVal = +this.createDateObj(new Date(this.timeCollections[index]));
        this.activeIndex = index;
      } else if (event.action === "end") {
        var index = this.validLiElement(collections.length - 1, true);
        timeVal = +this.createDateObj(new Date(this.timeCollections[index]));
        this.activeIndex = index;
      } else {
        if (event.action === "down") {
          for (var i = 0; i < count; i++) {
            if (+value < this.timeCollections[i]) {
              var index = this.validLiElement(i);
              timeVal = +this.createDateObj(new Date(this.timeCollections[index]));
              this.activeIndex = index;
              break;
            } else if (i === count - 1) {
              var index = this.validLiElement(0);
              timeVal = +this.createDateObj(new Date(this.timeCollections[index]));
              this.activeIndex = index;
              break;
            }
          }
        } else {
          for (var i = count - 1; i >= 0; i--) {
            if (+value > this.timeCollections[i]) {
              var index = this.validLiElement(i, true);
              timeVal = +this.createDateObj(new Date(this.timeCollections[index]));
              this.activeIndex = index;
              break;
            } else if (i === 0) {
              var index = this.validLiElement(count - 1);
              timeVal = +this.createDateObj(new Date(this.timeCollections[index]));
              this.activeIndex = index;
              break;
            }
          }
        }
      }
      this.selectedElement = this.liCollections[this.activeIndex];
      this.elementValue(isNullOrUndefined(timeVal) ? null : new Date(timeVal));
    } else {
      this.selectNextItem(event);
    }
  };
  TimePicker.prototype.selectNextItem = function(event) {
    var index = this.validLiElement(0, event.action === "down" ? false : true);
    this.activeIndex = index;
    this.selectedElement = this.liCollections[index];
    this.elementValue(new Date(this.timeCollections[index]));
  };
  TimePicker.prototype.elementValue = function(value) {
    if (!isNullOrUndefined(this.checkDateValue(value))) {
      this.checkValue(value);
    }
  };
  TimePicker.prototype.validLiElement = function(index, backward) {
    var elementIndex = null;
    var items = isNullOrUndefined(this.popupWrapper) ? this.liCollections : this.popupWrapper.querySelectorAll("." + LISTCLASS$1);
    var isCheck = true;
    if (items.length) {
      if (backward) {
        for (var i = index; i >= 0; i--) {
          if (!items[i].classList.contains(DISABLED$1)) {
            elementIndex = i;
            break;
          } else if (i === 0) {
            if (isCheck) {
              index = i = items.length;
              isCheck = false;
            }
          }
        }
      } else {
        for (var i = index; i <= items.length - 1; i++) {
          if (!items[i].classList.contains(DISABLED$1)) {
            elementIndex = i;
            break;
          } else if (i === items.length - 1) {
            if (isCheck) {
              index = i = -1;
              isCheck = false;
            }
          }
        }
      }
    }
    return elementIndex;
  };
  TimePicker.prototype.keyHandler = function(event) {
    if (isNullOrUndefined(this.step) || this.step <= 0 || !isNullOrUndefined(this.inputWrapper) && this.inputWrapper.buttons[0].classList.contains(DISABLED$1)) {
      return;
    }
    var count = this.timeCollections.length;
    if (isNullOrUndefined(this.getActiveElement()) || this.getActiveElement().length === 0) {
      if (this.liCollections.length > 0) {
        if (isNullOrUndefined(this.value) && isNullOrUndefined(this.activeIndex)) {
          var index = this.validLiElement(0, event.action === "down" ? false : true);
          this.activeIndex = index;
          this.selectedElement = this.liCollections[index];
          this.elementValue(new Date(this.timeCollections[index]));
        } else {
          this.findNextElement(event);
        }
      } else {
        this.findNextElement(event);
      }
    } else {
      var nextItem = void 0;
      if (event.keyCode >= 37 && event.keyCode <= 40) {
        var index = event.keyCode === 40 || event.keyCode === 39 ? ++this.activeIndex : --this.activeIndex;
        this.activeIndex = index = this.activeIndex === count ? 0 : this.activeIndex;
        this.activeIndex = index = this.activeIndex < 0 ? count - 1 : this.activeIndex;
        this.activeIndex = index = this.validLiElement(this.activeIndex, event.keyCode === 40 || event.keyCode === 39 ? false : true);
        nextItem = isNullOrUndefined(this.timeCollections[index]) ? this.timeCollections[0] : this.timeCollections[index];
      } else if (event.action === "home") {
        var index = this.validLiElement(0);
        this.activeIndex = index;
        nextItem = this.timeCollections[index];
      } else if (event.action === "end") {
        var index = this.validLiElement(count - 1, true);
        this.activeIndex = index;
        nextItem = this.timeCollections[index];
      }
      this.selectedElement = this.liCollections[this.activeIndex];
      this.elementValue(new Date(nextItem));
    }
    this.isNavigate = true;
    this.setHover(this.selectedElement, NAVIGATION$1);
    this.setActiveDescendant();
    this.selectInputText();
    if (this.isPopupOpen() && this.selectedElement !== null && (!event || event.type !== "click")) {
      this.setScrollPosition();
    }
  };
  TimePicker.prototype.getCultureTimeObject = function(ld, c) {
    return getValue("main." + c + ".dates.calendars.gregorian.timeFormats.short", ld);
  };
  TimePicker.prototype.getCultureDateObject = function(ld, c) {
    return getValue("main." + c + ".dates.calendars.gregorian.dateFormats.short", ld);
  };
  TimePicker.prototype.wireListEvents = function() {
    EventHandler.add(this.listWrapper, "click", this.onMouseClick, this);
    if (!Browser.isDevice) {
      EventHandler.add(this.listWrapper, "mouseover", this.onMouseOver, this);
      EventHandler.add(this.listWrapper, "mouseout", this.onMouseLeave, this);
    }
  };
  TimePicker.prototype.unWireListEvents = function() {
    if (this.listWrapper) {
      EventHandler.remove(this.listWrapper, "click", this.onMouseClick);
      if (!Browser.isDevice) {
        EventHandler.remove(this.listWrapper, "mouseover", this.onMouseOver);
        EventHandler.remove(this.listWrapper, "mouseout", this.onMouseLeave);
      }
    }
  };
  TimePicker.prototype.valueProcess = function(event, value) {
    var result = isNullOrUndefined(this.checkDateValue(value)) ? null : value;
    if (+this.prevDate !== +result) {
      this.initValue = result;
      this.changeEvent(event);
    }
  };
  TimePicker.prototype.changeEvent = function(e) {
    this.addSelection();
    this.updateInput(true, this.initValue);
    var eventArgs = {
      event: e || null,
      value: this.value,
      text: this.inputElement.value,
      isInteracted: !isNullOrUndefined(e),
      element: this.element
    };
    eventArgs.value = this.valueWithMinutes || this.getDateObject(this.inputElement.value);
    this.prevDate = this.valueWithMinutes || this.getDateObject(this.inputElement.value);
    if (this.isAngular && this.preventChange) {
      this.preventChange = false;
    } else {
      this.trigger("change", eventArgs);
    }
    this.invalidValueString = null;
    this.checkErrorState(this.value);
  };
  TimePicker.prototype.updateInput = function(isUpdate, date) {
    if (isUpdate) {
      this.prevValue = this.getValue(date);
    }
    this.prevDate = this.valueWithMinutes = date;
    if (typeof date !== "number" || (this.value && +(/* @__PURE__ */ new Date(+this.value)).setMilliseconds(0)) !== +date) {
      this.setProperties({ value: date }, true);
      if (this.enableMask) {
        this.createMask();
      }
    }
    if (!this.strictMode && isNullOrUndefined(this.value) && this.invalidValueString) {
      this.checkErrorState(this.invalidValueString);
      this.updateInputValue(this.invalidValueString);
    }
    this.clearIconState();
  };
  TimePicker.prototype.setActiveDescendant = function() {
    if (!isNullOrUndefined(this.selectedElement) && this.value) {
      attributes(this.inputElement, { "aria-activedescendant": this.selectedElement.getAttribute("id") });
    } else {
      this.inputElement.removeAttribute("aria-activedescendant");
    }
  };
  TimePicker.prototype.removeSelection = function() {
    this.removeHover(HOVER$1);
    if (!isNullOrUndefined(this.popupWrapper)) {
      var items = this.popupWrapper.querySelectorAll("." + SELECTED);
      if (items.length) {
        removeClass(items, SELECTED);
        items[0].removeAttribute("aria-selected");
      }
    }
  };
  TimePicker.prototype.removeHover = function(className) {
    var hoveredItem = this.getHoverItem(className);
    if (hoveredItem && hoveredItem.length) {
      removeClass(hoveredItem, className);
      if (className === NAVIGATION$1) {
        hoveredItem[0].removeAttribute("aria-selected");
      }
    }
  };
  TimePicker.prototype.getHoverItem = function(className) {
    var hoveredItem;
    if (!isNullOrUndefined(this.popupWrapper)) {
      hoveredItem = this.popupWrapper.querySelectorAll("." + className);
    }
    return hoveredItem;
  };
  TimePicker.prototype.setActiveClass = function() {
    if (!isNullOrUndefined(this.popupWrapper)) {
      var items = this.popupWrapper.querySelectorAll("." + LISTCLASS$1);
      if (items.length) {
        for (var i = 0; i < items.length; i++) {
          if (this.timeCollections[i] === +this.getDateObject(this.valueWithMinutes)) {
            items[i].setAttribute("aria-selected", "true");
            this.selectedElement = items[i];
            this.activeIndex = i;
            break;
          }
        }
      }
    }
  };
  TimePicker.prototype.addSelection = function() {
    this.selectedElement = null;
    this.removeSelection();
    this.setActiveClass();
    if (!isNullOrUndefined(this.selectedElement)) {
      addClass([this.selectedElement], SELECTED);
      this.selectedElement.setAttribute("aria-selected", "true");
    }
  };
  TimePicker.prototype.isValidLI = function(li) {
    return li && li.classList.contains(LISTCLASS$1) && !li.classList.contains(DISABLED$1);
  };
  TimePicker.prototype.createDateObj = function(val) {
    var formatStr = null;
    var today = this.globalize.formatDate(/* @__PURE__ */ new Date(), { format: formatStr, skeleton: "short", type: "date" });
    var value = null;
    if (typeof val === "string") {
      if (val.toUpperCase().indexOf("AM") > -1 || val.toUpperCase().indexOf("PM") > -1) {
        today = this.defaultCulture.formatDate(/* @__PURE__ */ new Date(), { format: formatStr, skeleton: "short", type: "date" });
        value = isNaN(+/* @__PURE__ */ new Date(today + " " + val)) ? null : new Date((/* @__PURE__ */ new Date(today + " " + val)).setMilliseconds(0));
        if (isNullOrUndefined(value)) {
          value = this.timeParse(today, val);
        }
      } else {
        value = this.timeParse(today, val);
      }
    } else if (val instanceof Date) {
      value = val;
    }
    return value;
  };
  TimePicker.prototype.timeParse = function(today, val) {
    var value;
    value = this.globalize.parseDate(today + " " + val, {
      format: this.cldrDateFormat() + " " + this.cldrTimeFormat(),
      type: "datetime"
    });
    value = isNullOrUndefined(value) ? this.globalize.parseDate(today + " " + val, {
      format: this.cldrDateFormat() + " " + this.dateToNumeric(),
      type: "datetime"
    }) : value;
    value = isNullOrUndefined(value) ? value : new Date(value.setMilliseconds(0));
    return value;
  };
  TimePicker.prototype.createListItems = function() {
    var _this = this;
    this.listWrapper = this.createElement("div", { className: CONTENT$1, attrs: { "tabindex": "-1" } });
    var start;
    var interval = this.step * 6e4;
    var listItems = [];
    this.timeCollections = [];
    this.disableItemCollection = [];
    start = +this.getDateObject(this.initMin).setMilliseconds(0);
    var end = +this.getDateObject(this.initMax).setMilliseconds(0);
    while (end >= start) {
      this.timeCollections.push(start);
      listItems.push(this.globalize.formatDate(new Date(start), { format: this.cldrTimeFormat(), type: "time" }));
      start += interval;
    }
    var listBaseOptions = {
      itemCreated: function(args) {
        var eventArgs = {
          element: args.item,
          text: args.text,
          value: _this.getDateObject(args.text),
          isDisabled: false
        };
        _this.trigger("itemRender", eventArgs, function(eventArgs2) {
          if (eventArgs2.isDisabled) {
            eventArgs2.element.classList.add(DISABLED$1);
          }
          if (eventArgs2.element.classList.contains(DISABLED$1)) {
            _this.disableItemCollection.push(eventArgs2.element.getAttribute("data-value"));
          }
        });
      }
    };
    this.listTag = ListBase.createList(this.createElement, listItems, listBaseOptions, true);
    attributes(this.listTag, { "role": "listbox", "aria-hidden": "false", "id": this.element.id + "_options", "tabindex": "0" });
    append2([this.listTag], this.listWrapper);
  };
  TimePicker.prototype.documentClickHandler = function(event) {
    var target = event.target;
    if (!isNullOrUndefined(this.popupObj) && !isNullOrUndefined(this.inputWrapper) && (this.inputWrapper.container.contains(target) && event.type !== "mousedown" || this.popupObj.element && this.popupObj.element.contains(target)) && event.type !== "touchstart") {
      event.preventDefault();
    }
    if (!closest(target, '[id="' + this.popupObj.element.id + '"]') && target !== this.inputElement && target !== (this.inputWrapper && this.inputWrapper.buttons[0]) && target !== (this.inputWrapper && this.inputWrapper.clearButton) && target !== (this.inputWrapper && this.inputWrapper.container)) {
      if (this.isPopupOpen()) {
        this.hide();
        this.focusOut();
      }
    } else if (target !== this.inputElement) {
      if (!Browser.isDevice) {
        this.isPreventBlur = (Browser.isIE || Browser.info.name === "edge") && document.activeElement === this.inputElement && target === this.popupWrapper;
      }
    }
  };
  TimePicker.prototype.setEnableRtl = function() {
    Input.setEnableRtl(this.enableRtl, [this.inputWrapper.container]);
    if (this.popupObj) {
      this.popupObj.enableRtl = this.enableRtl;
      this.popupObj.dataBind();
    }
  };
  TimePicker.prototype.setEnable = function() {
    Input.setEnabled(this.enabled, this.inputElement, this.floatLabelType);
    if (this.enabled) {
      removeClass([this.inputWrapper.container], DISABLED$1);
      attributes(this.inputElement, { "aria-disabled": "false" });
      this.inputElement.setAttribute("tabindex", this.tabIndex);
    } else {
      this.hide();
      addClass([this.inputWrapper.container], DISABLED$1);
      attributes(this.inputElement, { "aria-disabled": "true" });
      this.inputElement.tabIndex = -1;
    }
  };
  TimePicker.prototype.getProperty = function(date, val) {
    if (val === "min") {
      this.initMin = this.checkDateValue(new Date(this.checkInValue(date.min)));
      this.setProperties({ min: this.initMin }, true);
    } else {
      this.initMax = this.checkDateValue(new Date(this.checkInValue(date.max)));
      this.setProperties({ max: this.initMax }, true);
    }
    if (this.inputElement.value === "") {
      this.validateMinMax(this.value, this.min, this.max);
    } else {
      this.checkValue(this.inputElement.value);
    }
    this.checkValueChange(null, false);
  };
  TimePicker.prototype.inputBlurHandler = function(e) {
    if (!this.enabled) {
      return;
    }
    if (this.isPreventBlur && this.isPopupOpen()) {
      this.inputElement.focus();
      return;
    }
    this.closePopup(0, e);
    if (this.enableMask && this.maskedDateValue && this.placeholder && this.floatLabelType !== "Always") {
      if (this.inputElement.value === this.maskedDateValue && !this.value && (this.floatLabelType === "Auto" || this.floatLabelType === "Never" || this.placeholder)) {
        this.updateInputValue("");
      }
    }
    removeClass([this.inputWrapper.container], [FOCUS]);
    var blurArguments = {
      model: this
    };
    this.trigger("blur", blurArguments);
    if (this.getText() !== this.inputElement.value) {
      this.updateValue(this.inputElement.value, e);
    } else if (this.inputElement.value.trim().length === 0) {
      this.resetState();
    }
    this.cursorDetails = null;
    this.isNavigate = false;
    if (this.inputElement.value === "") {
      this.invalidValueString = null;
    }
  };
  TimePicker.prototype.focusOut = function() {
    if (document.activeElement === this.inputElement) {
      this.inputElement.blur();
      removeClass([this.inputWrapper.container], [FOCUS]);
      var blurArguments = {
        model: this
      };
      this.trigger("blur", blurArguments);
    }
  };
  TimePicker.prototype.isPopupOpen = function() {
    if (this.popupWrapper && this.popupWrapper.classList.contains("" + ROOT$2)) {
      return true;
    }
    return false;
  };
  TimePicker.prototype.inputFocusHandler = function() {
    if (!this.enabled) {
      return;
    }
    var focusArguments = {
      model: this
    };
    if (!this.readonly && !Browser.isDevice && !this.enableMask) {
      this.selectInputText();
    }
    if (this.enableMask && !this.inputElement.value && this.placeholder) {
      if (this.maskedDateValue && !this.value && (this.floatLabelType === "Auto" || this.floatLabelType === "Never" || this.placeholder)) {
        this.updateInputValue(this.maskedDateValue);
        this.inputElement.selectionStart = 0;
        this.inputElement.selectionEnd = this.inputElement.value.length;
      }
    }
    this.trigger("focus", focusArguments);
    this.clearIconState();
    if (this.openOnFocus) {
      this.show();
    }
  };
  TimePicker.prototype.focusIn = function() {
    if (document.activeElement !== this.inputElement && this.enabled) {
      this.inputElement.focus();
    }
  };
  TimePicker.prototype.hide = function() {
    this.closePopup(100, null);
    this.clearIconState();
  };
  TimePicker.prototype.show = function(event) {
    var _this = this;
    if (this.enabled && this.readonly || !this.enabled || this.popupWrapper) {
      return;
    } else {
      this.popupCreation();
      if (Browser.isDevice && this.listWrapper) {
        this.modal = this.createElement("div");
        this.modal.className = "" + ROOT$2 + " e-time-modal";
        document.body.className += " " + OVERFLOW$1;
        document.body.appendChild(this.modal);
      }
      if (Browser.isDevice) {
        this.mobileTimePopupWrap = this.createElement("div", { className: "e-timepicker-mob-popup-wrap" });
        document.body.appendChild(this.mobileTimePopupWrap);
      }
      this.openPopupEventArgs = {
        popup: this.popupObj || null,
        cancel: false,
        event: event || null,
        name: "open",
        appendTo: Browser.isDevice ? this.mobileTimePopupWrap : document.body
      };
      var eventArgs = this.openPopupEventArgs;
      this.trigger("open", eventArgs, function(eventArgs2) {
        _this.openPopupEventArgs = eventArgs2;
        if (!_this.openPopupEventArgs.cancel && !_this.inputWrapper.buttons[0].classList.contains(DISABLED$1)) {
          _this.openPopupEventArgs.appendTo.appendChild(_this.popupWrapper);
          _this.popupAlignment(_this.openPopupEventArgs);
          _this.setScrollPosition();
          if (!Browser.isDevice) {
            _this.inputElement.focus();
          }
          var openAnimation = {
            name: "FadeIn",
            duration: ANIMATIONDURATION$1
          };
          _this.popupObj.refreshPosition(_this.anchor);
          if (_this.zIndex === 1e3) {
            _this.popupObj.show(new Animation$1(openAnimation), _this.element);
          } else {
            _this.popupObj.show(new Animation$1(openAnimation), null);
          }
          _this.setActiveDescendant();
          attributes(_this.inputElement, { "aria-expanded": "true" });
          attributes(_this.inputElement, { "aria-owns": _this.inputElement.id + "_options" });
          addClass([_this.inputWrapper.container], FOCUS);
          EventHandler.add(document, "mousedown touchstart", _this.documentClickHandler, _this);
          _this.setOverlayIndex(_this.mobileTimePopupWrap, _this.popupObj.element, _this.modal, Browser.isDevice);
        } else {
          _this.popupObj.destroy();
          _this.popupWrapper = _this.listTag = void 0;
          _this.liCollections = _this.timeCollections = _this.disableItemCollection = [];
          _this.popupObj = null;
        }
      });
    }
  };
  TimePicker.prototype.setOverlayIndex = function(popupWrapper, timePopupElement, modal, isDevice) {
    if (isDevice && !isNullOrUndefined(timePopupElement) && !isNullOrUndefined(modal) && !isNullOrUndefined(popupWrapper)) {
      var index = parseInt(timePopupElement.style.zIndex, 10) ? parseInt(timePopupElement.style.zIndex, 10) : 1e3;
      modal.style.zIndex = (index - 1).toString();
      popupWrapper.style.zIndex = index.toString();
    }
  };
  TimePicker.prototype.formatValues = function(type) {
    var value;
    if (typeof type === "number") {
      value = formatUnit(type);
    } else if (typeof type === "string") {
      value = type.match(/px|%|em/) ? type : isNaN(parseInt(type, 10)) ? type : formatUnit(type);
    }
    return value;
  };
  TimePicker.prototype.popupAlignment = function(args) {
    args.popup.position.X = this.formatValues(args.popup.position.X);
    args.popup.position.Y = this.formatValues(args.popup.position.Y);
    if (!isNaN(parseFloat(args.popup.position.X)) || !isNaN(parseFloat(args.popup.position.Y))) {
      this.popupObj.relateTo = this.anchor = document.body;
      this.popupObj.targetType = "container";
    }
    if (!isNaN(parseFloat(args.popup.position.X))) {
      this.popupObj.offsetX = parseFloat(args.popup.position.X);
    }
    if (!isNaN(parseFloat(args.popup.position.Y))) {
      this.popupObj.offsetY = parseFloat(args.popup.position.Y);
    }
    if (!Browser.isDevice) {
      switch (args.popup.position.X) {
        case "left":
          break;
        case "right":
          args.popup.offsetX = this.containerStyle.width;
          break;
        case "center":
          args.popup.offsetX = -(this.containerStyle.width / 2);
          break;
      }
      switch (args.popup.position.Y) {
        case "top":
          break;
        case "bottom":
          break;
        case "center":
          args.popup.offsetY = -(this.containerStyle.height / 2);
          break;
      }
      if (args.popup.position.X === "center" && args.popup.position.Y === "center") {
        this.popupObj.relateTo = this.inputWrapper.container;
        this.anchor = this.inputElement;
        this.popupObj.targetType = "relative";
      }
    } else {
      if (args.popup.position.X === "center" && args.popup.position.Y === "center") {
        this.popupObj.relateTo = this.anchor = document.body;
        this.popupObj.offsetY = 0;
        this.popupObj.targetType = "container";
        this.popupObj.collision = { X: "fit", Y: "fit" };
      }
    }
  };
  TimePicker.prototype.getPersistData = function() {
    var keyEntity = ["value"];
    return this.addOnPersist(keyEntity);
  };
  TimePicker.prototype.getModuleName = function() {
    return "timepicker";
  };
  TimePicker.prototype.onPropertyChanged = function(newProp, oldProp) {
    for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {
      var prop = _a[_i];
      switch (prop) {
        case "placeholder":
          Input.setPlaceholder(newProp.placeholder, this.inputElement);
          break;
        case "readonly":
          Input.setReadonly(this.readonly, this.inputElement, this.floatLabelType);
          if (this.readonly) {
            this.hide();
          }
          this.setTimeAllowEdit();
          break;
        case "enabled":
          this.setProperties({ enabled: newProp.enabled }, true);
          this.setEnable();
          break;
        case "allowEdit":
          this.setTimeAllowEdit();
          break;
        case "enableRtl":
          this.setProperties({ enableRtl: newProp.enableRtl }, true);
          this.setEnableRtl();
          break;
        case "cssClass":
          this.updateCssClass(newProp.cssClass, oldProp.cssClass);
          break;
        case "zIndex":
          this.setProperties({ zIndex: newProp.zIndex }, true);
          this.setZIndex();
          break;
        case "htmlAttributes":
          this.updateHtmlAttributeToElement();
          this.updateHtmlAttributeToWrapper();
          this.checkAttributes(true);
          break;
        case "min":
        case "max":
          this.getProperty(newProp, prop);
          break;
        case "showClearButton":
          Input.setClearButton(this.showClearButton, this.inputElement, this.inputWrapper);
          this.bindClearEvent();
          break;
        case "locale":
          this.setProperties({ locale: newProp.locale }, true);
          this.globalize = new Internationalization(this.locale);
          this.l10n.setLocale(this.locale);
          this.updatePlaceHolder();
          this.setValue(this.value);
          if (this.enableMask) {
            this.notify("createMask", {
              module: "MaskedDateTime"
            });
          }
          break;
        case "width":
          setStyleAttribute(this.inputWrapper.container, { "width": this.setWidth(newProp.width) });
          this.containerStyle = this.inputWrapper.container.getBoundingClientRect();
          Input.calculateWidth(this.inputElement, this.inputWrapper.container);
          if (!isNullOrUndefined(this.inputWrapper.buttons[0]) && !isNullOrUndefined(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0]) && this.floatLabelType !== "Never") {
            this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon");
          }
          break;
        case "format":
          this.setProperties({ format: newProp.format }, true);
          this.checkTimeFormat();
          this.setValue(this.value);
          if (this.enableMask) {
            this.createMask();
            if (!this.value) {
              this.updateInputValue(this.maskedDateValue);
            }
          }
          break;
        case "value":
          this.invalidValueString = null;
          this.checkInvalidValue(newProp.value);
          newProp.value = this.value;
          if (!this.invalidValueString && !this.enableMask) {
            if (typeof newProp.value === "string") {
              this.setProperties({ value: this.checkDateValue(new Date(newProp.value)) }, true);
              newProp.value = this.value;
            } else {
              if ((newProp.value && +(/* @__PURE__ */ new Date(+newProp.value)).setMilliseconds(0)) !== +this.value) {
                newProp.value = this.checkDateValue(/* @__PURE__ */ new Date("" + newProp.value));
              }
            }
            this.initValue = newProp.value;
            newProp.value = this.compareFormatChange(this.checkValue(newProp.value));
          } else if (this.enableMask) {
            this.updateInputValue(this.maskedDateValue);
            this.checkErrorState(this.maskedDateValue);
          } else {
            this.updateInputValue(this.invalidValueString);
            this.checkErrorState(this.invalidValueString);
          }
          this.checkValueChange(null, false);
          if (this.isPopupOpen()) {
            this.setScrollPosition();
          }
          if (this.isAngular && this.preventChange) {
            this.preventChange = false;
          }
          if (this.enableMask) {
            this.notify("createMask", {
              module: "MaskedDateTime"
            });
          }
          break;
        case "floatLabelType":
          this.floatLabelType = newProp.floatLabelType;
          Input.removeFloating(this.inputWrapper);
          Input.addFloating(this.inputElement, this.floatLabelType, this.placeholder);
          if (!isNullOrUndefined(this.inputWrapper.buttons[0]) && !isNullOrUndefined(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0]) && this.floatLabelType !== "Never") {
            this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon");
          }
          break;
        case "strictMode":
          this.invalidValueString = null;
          if (newProp.strictMode) {
            this.checkErrorState(null);
          }
          this.setProperties({ strictMode: newProp.strictMode }, true);
          this.checkValue(this.inputElement.value);
          this.checkValueChange(null, false);
          break;
        case "scrollTo":
          if (this.checkDateValue(new Date(this.checkInValue(newProp.scrollTo)))) {
            if (this.popupWrapper) {
              this.setScrollTo();
            }
            this.setProperties({ scrollTo: this.checkDateValue(new Date(this.checkInValue(newProp.scrollTo))) }, true);
          } else {
            this.setProperties({ scrollTo: null }, true);
          }
          break;
        case "enableMask":
          if (this.enableMask) {
            this.notify("createMask", {
              module: "MaskedDateTime"
            });
            this.updateInputValue(this.maskedDateValue);
          } else {
            if (this.inputElement.value === this.maskedDateValue) {
              this.updateInputValue("");
            }
          }
          break;
      }
    }
  };
  TimePicker.prototype.checkInValue = function(inValue) {
    if (inValue instanceof Date) {
      return inValue.toUTCString();
    } else {
      return "" + inValue;
    }
  };
  __decorate$c([
    Property(null)
  ], TimePicker.prototype, "width", void 0);
  __decorate$c([
    Property(null)
  ], TimePicker.prototype, "cssClass", void 0);
  __decorate$c([
    Property(false)
  ], TimePicker.prototype, "strictMode", void 0);
  __decorate$c([
    Property(null)
  ], TimePicker.prototype, "keyConfigs", void 0);
  __decorate$c([
    Property(null)
  ], TimePicker.prototype, "format", void 0);
  __decorate$c([
    Property(true)
  ], TimePicker.prototype, "enabled", void 0);
  __decorate$c([
    Property(false)
  ], TimePicker.prototype, "readonly", void 0);
  __decorate$c([
    Property({})
  ], TimePicker.prototype, "htmlAttributes", void 0);
  __decorate$c([
    Property("Never")
  ], TimePicker.prototype, "floatLabelType", void 0);
  __decorate$c([
    Property(null)
  ], TimePicker.prototype, "placeholder", void 0);
  __decorate$c([
    Property(1e3)
  ], TimePicker.prototype, "zIndex", void 0);
  __decorate$c([
    Property(false)
  ], TimePicker.prototype, "enablePersistence", void 0);
  __decorate$c([
    Property(true)
  ], TimePicker.prototype, "showClearButton", void 0);
  __decorate$c([
    Property(30)
  ], TimePicker.prototype, "step", void 0);
  __decorate$c([
    Property(null)
  ], TimePicker.prototype, "scrollTo", void 0);
  __decorate$c([
    Property(null)
  ], TimePicker.prototype, "value", void 0);
  __decorate$c([
    Property(null)
  ], TimePicker.prototype, "min", void 0);
  __decorate$c([
    Property(null)
  ], TimePicker.prototype, "max", void 0);
  __decorate$c([
    Property(true)
  ], TimePicker.prototype, "allowEdit", void 0);
  __decorate$c([
    Property(false)
  ], TimePicker.prototype, "openOnFocus", void 0);
  __decorate$c([
    Property(false)
  ], TimePicker.prototype, "enableMask", void 0);
  __decorate$c([
    Property({ day: "day", month: "month", year: "year", hour: "hour", minute: "minute", second: "second", dayOfTheWeek: "day of the week" })
  ], TimePicker.prototype, "maskPlaceholder", void 0);
  __decorate$c([
    Event$1()
  ], TimePicker.prototype, "change", void 0);
  __decorate$c([
    Event$1()
  ], TimePicker.prototype, "created", void 0);
  __decorate$c([
    Event$1()
  ], TimePicker.prototype, "destroyed", void 0);
  __decorate$c([
    Event$1()
  ], TimePicker.prototype, "open", void 0);
  __decorate$c([
    Event$1()
  ], TimePicker.prototype, "itemRender", void 0);
  __decorate$c([
    Event$1()
  ], TimePicker.prototype, "close", void 0);
  __decorate$c([
    Event$1()
  ], TimePicker.prototype, "cleared", void 0);
  __decorate$c([
    Event$1()
  ], TimePicker.prototype, "blur", void 0);
  __decorate$c([
    Event$1()
  ], TimePicker.prototype, "focus", void 0);
  TimePicker = __decorate$c([
    NotifyPropertyChanges
  ], TimePicker);
  return TimePicker;
})(Component);
var __extends$l = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$b = globalThis && globalThis.__decorate || function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i = decorators.length - 1; i >= 0; i--)
      if (d = decorators[i])
        r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var DATEWRAPPER = "e-date-wrapper";
var DATEPICKERROOT = "e-datepicker";
var DATETIMEWRAPPER = "e-datetime-wrapper";
var DAY = (/* @__PURE__ */ new Date()).getDate();
var MONTH = (/* @__PURE__ */ new Date()).getMonth();
var YEAR = (/* @__PURE__ */ new Date()).getFullYear();
var HOUR = (/* @__PURE__ */ new Date()).getHours();
var MINUTE = (/* @__PURE__ */ new Date()).getMinutes();
var SECOND$1 = (/* @__PURE__ */ new Date()).getSeconds();
var MILLISECOND = (/* @__PURE__ */ new Date()).getMilliseconds();
var ROOT$1 = "e-datetimepicker";
var DATETIMEPOPUPWRAPPER = "e-datetimepopup-wrapper";
var INPUTWRAPPER = "e-input-group-icon";
var POPUP = "e-popup";
var TIMEICON = "e-time-icon";
var INPUTFOCUS = "e-input-focus";
var POPUPDIMENSION = "250px";
var ICONANIMATION = "e-icon-anim";
var DISABLED = "e-disabled";
var ERROR = "e-error";
var CONTENT = "e-content";
var NAVIGATION = "e-navigation";
var ACTIVE$1 = "e-active";
var HOVER = "e-hover";
var ICONS = "e-icons";
var HALFPOSITION = 2;
var LISTCLASS = "e-list-item";
var ANIMATIONDURATION = 100;
var OVERFLOW = "e-time-overflow";
var DateTimePicker = (
  /** @class */
  function(_super) {
    __extends$l(DateTimePicker2, _super);
    function DateTimePicker2(options, element2) {
      var _this = _super.call(this, options, element2) || this;
      _this.valueWithMinutes = null;
      _this.scrollInvoked = false;
      _this.moduleName = _this.getModuleName();
      _this.dateTimeOptions = options;
      return _this;
    }
    DateTimePicker2.prototype.focusHandler = function() {
      if (!this.enabled) {
        return;
      }
      addClass([this.inputWrapper.container], INPUTFOCUS);
    };
    DateTimePicker2.prototype.focusIn = function() {
      _super.prototype.focusIn.call(this);
    };
    DateTimePicker2.prototype.focusOut = function() {
      if (document.activeElement === this.inputElement) {
        this.inputElement.blur();
        removeClass([this.inputWrapper.container], [INPUTFOCUS]);
      }
    };
    DateTimePicker2.prototype.blurHandler = function(e) {
      if (!this.enabled) {
        return;
      }
      if (this.isTimePopupOpen() && this.isPreventBlur) {
        this.inputElement.focus();
        return;
      }
      removeClass([this.inputWrapper.container], INPUTFOCUS);
      var blurArguments = {
        model: this
      };
      if (this.isTimePopupOpen()) {
        this.hide(e);
      }
      this.trigger("blur", blurArguments);
    };
    DateTimePicker2.prototype.destroy = function() {
      if (this.popupObject && this.popupObject.element.classList.contains(POPUP)) {
        this.popupObject.destroy();
        detach(this.dateTimeWrapper);
        this.dateTimeWrapper = void 0;
        this.liCollections = this.timeCollections = [];
        if (!isNullOrUndefined(this.rippleFn)) {
          this.rippleFn();
        }
      }
      var ariaAttribute = {
        "aria-live": "assertive",
        "aria-atomic": "true",
        "aria-invalid": "false",
        "autocorrect": "off",
        "autocapitalize": "off",
        "spellcheck": "false",
        "aria-expanded": "false",
        "role": "combobox",
        "autocomplete": "off"
      };
      if (this.inputElement) {
        Input.removeAttributes(ariaAttribute, this.inputElement);
      }
      if (this.isCalendar()) {
        if (this.popupWrapper) {
          detach(this.popupWrapper);
        }
        this.popupObject = this.popupWrapper = null;
        this.keyboardHandler.destroy();
      }
      this.unBindInputEvents();
      this.liCollections = null;
      this.rippleFn = null;
      this.selectedElement = null;
      this.listTag = null;
      this.timeIcon = null;
      this.popupObject = null;
      this.preventArgs = null;
      this.keyboardModule = null;
      _super.prototype.destroy.call(this);
    };
    DateTimePicker2.prototype.render = function() {
      this.timekeyConfigure = {
        enter: "enter",
        escape: "escape",
        end: "end",
        tab: "tab",
        home: "home",
        down: "downarrow",
        up: "uparrow",
        left: "leftarrow",
        right: "rightarrow",
        open: "alt+downarrow",
        close: "alt+uparrow"
      };
      this.valueWithMinutes = null;
      this.previousDateTime = null;
      this.isPreventBlur = false;
      this.cloneElement = this.element.cloneNode(true);
      this.dateTimeFormat = this.cldrDateTimeFormat();
      this.initValue = this.value;
      if (!isNullOrUndefined(closest(this.element, "fieldset")) && closest(this.element, "fieldset").disabled) {
        this.enabled = false;
      }
      _super.prototype.updateHtmlAttributeToElement.call(this);
      this.checkAttributes(false);
      var localeText = { placeholder: this.placeholder };
      this.l10n = new L10n("datetimepicker", localeText, this.locale);
      this.setProperties({ placeholder: this.placeholder || this.l10n.getConstant("placeholder") }, true);
      _super.prototype.render.call(this);
      this.createInputElement();
      _super.prototype.updateHtmlAttributeToWrapper.call(this);
      this.bindInputEvents();
      if (this.enableMask) {
        this.notify("createMask", {
          module: "MaskedDateTime"
        });
      }
      this.setValue(true);
      if (this.enableMask && !this.value && this.maskedDateValue && (this.floatLabelType === "Always" || !this.floatLabelType || !this.placeholder)) {
        Input.setValue(this.maskedDateValue, this.inputElement, this.floatLabelType, this.showClearButton);
      }
      this.setProperties({ scrollTo: this.checkDateValue(new Date(this.checkValue(this.scrollTo))) }, true);
      this.previousDateTime = this.value && /* @__PURE__ */ new Date(+this.value);
      if (this.element.tagName === "EJS-DATETIMEPICKER") {
        this.tabIndex = this.element.hasAttribute("tabindex") ? this.element.getAttribute("tabindex") : "0";
        this.element.removeAttribute("tabindex");
        if (!this.enabled) {
          this.inputElement.tabIndex = -1;
        }
      }
      Input.calculateWidth(this.inputElement, this.inputWrapper.container);
      if (!isNullOrUndefined(this.inputWrapper.buttons[0]) && !isNullOrUndefined(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0]) && this.floatLabelType !== "Never") {
        this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-date-time-icon");
      }
      this.renderComplete();
    };
    DateTimePicker2.prototype.setValue = function(isDynamic) {
      if (isDynamic === void 0) {
        isDynamic = false;
      }
      this.initValue = this.validateMinMaxRange(this.value);
      if (!this.strictMode && this.isDateObject(this.initValue)) {
        var value = this.validateMinMaxRange(this.initValue);
        Input.setValue(this.getFormattedValue(value), this.inputElement, this.floatLabelType, this.showClearButton);
        this.setProperties({ value }, true);
      } else {
        if (isNullOrUndefined(this.value)) {
          this.initValue = null;
          this.setProperties({ value: null }, true);
        }
      }
      this.valueWithMinutes = this.value;
      _super.prototype.updateInput.call(this, isDynamic);
    };
    DateTimePicker2.prototype.validateMinMaxRange = function(value) {
      var result = value;
      if (this.isDateObject(value)) {
        result = this.validateValue(value);
      } else {
        if (+this.min > +this.max) {
          this.disablePopupButton(true);
        }
      }
      this.checkValidState(result);
      return result;
    };
    DateTimePicker2.prototype.checkValidState = function(value) {
      this.isValidState = true;
      if (!this.strictMode) {
        if (+value > +this.max || +value < +this.min) {
          this.isValidState = false;
        }
      }
      this.checkErrorState();
    };
    DateTimePicker2.prototype.checkErrorState = function() {
      if (this.isValidState) {
        removeClass([this.inputWrapper.container], ERROR);
      } else {
        addClass([this.inputWrapper.container], ERROR);
      }
      attributes(this.inputElement, { "aria-invalid": this.isValidState ? "false" : "true" });
    };
    DateTimePicker2.prototype.validateValue = function(value) {
      var dateVal = value;
      if (this.strictMode) {
        if (+this.min > +this.max) {
          this.disablePopupButton(true);
          dateVal = this.max;
        } else if (+value < +this.min) {
          dateVal = this.min;
        } else if (+value > +this.max) {
          dateVal = this.max;
        }
      } else {
        if (+this.min > +this.max) {
          this.disablePopupButton(true);
          dateVal = value;
        }
      }
      return dateVal;
    };
    DateTimePicker2.prototype.disablePopupButton = function(isDisable) {
      if (isDisable) {
        addClass([this.inputWrapper.buttons[0], this.timeIcon], DISABLED);
        this.hide();
      } else {
        removeClass([this.inputWrapper.buttons[0], this.timeIcon], DISABLED);
      }
    };
    DateTimePicker2.prototype.getFormattedValue = function(value) {
      var dateOptions;
      if (!isNullOrUndefined(value)) {
        if (this.calendarMode === "Gregorian") {
          dateOptions = { format: this.cldrDateTimeFormat(), type: "dateTime", skeleton: "yMd" };
        } else {
          dateOptions = { format: this.cldrDateTimeFormat(), type: "dateTime", skeleton: "yMd", calendar: "islamic" };
        }
        return this.globalize.formatDate(value, dateOptions);
      } else {
        return null;
      }
    };
    DateTimePicker2.prototype.isDateObject = function(value) {
      return !isNullOrUndefined(value) && !isNaN(+value) ? true : false;
    };
    DateTimePicker2.prototype.createInputElement = function() {
      removeClass([this.inputElement], DATEPICKERROOT);
      removeClass([this.inputWrapper.container], DATEWRAPPER);
      addClass([this.inputWrapper.container], DATETIMEWRAPPER);
      addClass([this.inputElement], ROOT$1);
      this.renderTimeIcon();
    };
    DateTimePicker2.prototype.renderTimeIcon = function() {
      this.timeIcon = Input.appendSpan(INPUTWRAPPER + " " + TIMEICON + " " + ICONS, this.inputWrapper.container);
    };
    DateTimePicker2.prototype.bindInputEvents = function() {
      EventHandler.add(this.timeIcon, "mousedown", this.timeHandler, this);
      EventHandler.add(this.inputWrapper.buttons[0], "mousedown", this.dateHandler, this);
      EventHandler.add(this.inputElement, "blur", this.blurHandler, this);
      EventHandler.add(this.inputElement, "focus", this.focusHandler, this);
      this.defaultKeyConfigs = extend(this.defaultKeyConfigs, this.keyConfigs);
      this.keyboardHandler = new KeyboardEvents(this.inputElement, {
        eventName: "keydown",
        keyAction: this.inputKeyAction.bind(this),
        keyConfigs: this.defaultKeyConfigs
      });
    };
    DateTimePicker2.prototype.unBindInputEvents = function() {
      EventHandler.remove(this.timeIcon, "mousedown touchstart", this.timeHandler);
      EventHandler.remove(this.inputWrapper.buttons[0], "mousedown touchstart", this.dateHandler);
      if (this.inputElement) {
        EventHandler.remove(this.inputElement, "blur", this.blurHandler);
        EventHandler.remove(this.inputElement, "focus", this.focusHandler);
      }
      if (this.keyboardHandler) {
        this.keyboardHandler.destroy();
      }
    };
    DateTimePicker2.prototype.cldrTimeFormat = function() {
      var cldrTime;
      if (this.isNullOrEmpty(this.timeFormat)) {
        if (this.locale === "en" || this.locale === "en-US") {
          cldrTime = getValue("timeFormats.short", getDefaultDateObject());
        } else {
          cldrTime = this.getCultureTimeObject(cldrData, "" + this.locale);
        }
      } else {
        cldrTime = this.timeFormat;
      }
      return cldrTime;
    };
    DateTimePicker2.prototype.cldrDateTimeFormat = function() {
      var cldrTime;
      var culture = new Internationalization(this.locale);
      var dateFormat = culture.getDatePattern({ skeleton: "yMd" });
      if (this.isNullOrEmpty(this.formatString)) {
        cldrTime = dateFormat + " " + this.getCldrFormat("time");
      } else {
        cldrTime = this.formatString;
      }
      return cldrTime;
    };
    DateTimePicker2.prototype.getCldrFormat = function(type) {
      var cldrDateTime;
      if (this.locale === "en" || this.locale === "en-US") {
        cldrDateTime = getValue("timeFormats.short", getDefaultDateObject());
      } else {
        cldrDateTime = this.getCultureTimeObject(cldrData, "" + this.locale);
      }
      return cldrDateTime;
    };
    DateTimePicker2.prototype.isNullOrEmpty = function(value) {
      if (isNullOrUndefined(value) || typeof value === "string" && value.trim() === "") {
        return true;
      } else {
        return false;
      }
    };
    DateTimePicker2.prototype.getCultureTimeObject = function(ld, c) {
      if (this.calendarMode === "Gregorian") {
        return getValue("main." + this.locale + ".dates.calendars.gregorian.timeFormats.short", ld);
      } else {
        return getValue("main." + this.locale + ".dates.calendars.islamic.timeFormats.short", ld);
      }
    };
    DateTimePicker2.prototype.timeHandler = function(e) {
      if (!this.enabled) {
        return;
      }
      this.isIconClicked = true;
      if (Browser.isDevice) {
        this.inputElement.setAttribute("readonly", "");
      }
      if (e.currentTarget === this.timeIcon) {
        e.preventDefault();
      }
      if (this.enabled && !this.readonly) {
        if (this.isDatePopupOpen()) {
          _super.prototype.hide.call(this, e);
        }
        if (this.isTimePopupOpen()) {
          this.closePopup(e);
        } else {
          this.inputElement.focus();
          this.popupCreation("time", e);
          addClass([this.inputWrapper.container], [INPUTFOCUS]);
        }
      }
      this.isIconClicked = false;
    };
    DateTimePicker2.prototype.dateHandler = function(e) {
      if (!this.enabled) {
        return;
      }
      if (e.currentTarget === this.inputWrapper.buttons[0]) {
        e.preventDefault();
      }
      if (this.enabled && !this.readonly) {
        if (this.isTimePopupOpen()) {
          this.closePopup(e);
        }
        if (!isNullOrUndefined(this.popupWrapper)) {
          this.popupCreation("date", e);
        }
      }
    };
    DateTimePicker2.prototype.show = function(type, e) {
      if (this.enabled && this.readonly || !this.enabled) {
        return;
      } else {
        if (type === "time" && !this.dateTimeWrapper) {
          if (this.isDatePopupOpen()) {
            this.hide(e);
          }
          this.popupCreation("time", e);
        } else if (!this.popupObj) {
          if (this.isTimePopupOpen()) {
            this.hide(e);
          }
          _super.prototype.show.call(this);
          this.popupCreation("date", e);
        }
      }
    };
    DateTimePicker2.prototype.toggle = function(e) {
      if (this.isDatePopupOpen()) {
        _super.prototype.hide.call(this, e);
        this.show("time", null);
      } else if (this.isTimePopupOpen()) {
        this.hide(e);
        _super.prototype.show.call(this, null, e);
        this.popupCreation("date", null);
      } else {
        this.show(null, e);
      }
    };
    DateTimePicker2.prototype.listCreation = function() {
      var dateObject;
      if (this.calendarMode === "Gregorian") {
        dateObject = this.globalize.parseDate(this.inputElement.value, {
          format: this.cldrDateTimeFormat(),
          type: "datetime"
        });
      } else {
        dateObject = this.globalize.parseDate(this.inputElement.value, {
          format: this.cldrDateTimeFormat(),
          type: "datetime",
          calendar: "islamic"
        });
      }
      var value = isNullOrUndefined(this.value) ? this.inputElement.value !== "" ? dateObject : /* @__PURE__ */ new Date() : this.value;
      this.valueWithMinutes = value;
      this.listWrapper = createElement("div", { className: CONTENT, attrs: { "tabindex": "0" } });
      var min = this.startTime(value);
      var max = this.endTime(value);
      var listDetails = TimePickerBase.createListItems(this.createElement, min, max, this.globalize, this.cldrTimeFormat(), this.step);
      this.timeCollections = listDetails.collection;
      this.listTag = listDetails.list;
      attributes(this.listTag, { "role": "listbox", "aria-hidden": "false", "id": this.element.id + "_options" });
      append2([listDetails.list], this.listWrapper);
      this.wireTimeListEvents();
      var rippleModel = { duration: 300, selector: "." + LISTCLASS };
      this.rippleFn = rippleEffect(this.listWrapper, rippleModel);
      this.liCollections = this.listWrapper.querySelectorAll("." + LISTCLASS);
    };
    DateTimePicker2.prototype.popupCreation = function(type, e) {
      if (Browser.isDevice) {
        this.element.setAttribute("readonly", "readonly");
      }
      if (type === "date") {
        if (!this.readonly && this.popupWrapper) {
          addClass([this.popupWrapper], DATETIMEPOPUPWRAPPER);
          attributes(this.popupWrapper, { "id": this.element.id + "_datepopup" });
        }
      } else {
        if (!this.readonly) {
          this.dateTimeWrapper = createElement("div", {
            className: ROOT$1 + " " + POPUP,
            attrs: { "id": this.element.id + "_timepopup", "style": "visibility:hidden ; display:block" }
          });
          if (!isNullOrUndefined(this.cssClass)) {
            this.dateTimeWrapper.className += " " + this.cssClass;
          }
          if (!isNullOrUndefined(this.step) && this.step > 0) {
            this.listCreation();
            append2([this.listWrapper], this.dateTimeWrapper);
          }
          document.body.appendChild(this.dateTimeWrapper);
          this.addTimeSelection();
          this.renderPopup();
          this.setTimeScrollPosition();
          this.openPopup(e);
          this.popupObject.refreshPosition(this.inputElement);
        }
      }
    };
    DateTimePicker2.prototype.openPopup = function(e) {
      var _this = this;
      this.preventArgs = {
        cancel: false,
        popup: this.popupObject,
        event: e || null
      };
      var eventArgs = this.preventArgs;
      this.trigger("open", eventArgs, function(eventArgs2) {
        _this.preventArgs = eventArgs2;
        if (!_this.preventArgs.cancel && !_this.readonly) {
          var openAnimation = {
            name: "FadeIn",
            duration: ANIMATIONDURATION
          };
          if (_this.zIndex === 1e3) {
            _this.popupObject.show(new Animation$1(openAnimation), _this.element);
          } else {
            _this.popupObject.show(new Animation$1(openAnimation), null);
          }
          addClass([_this.inputWrapper.container], [ICONANIMATION]);
          attributes(_this.inputElement, { "aria-expanded": "true" });
          attributes(_this.inputElement, { "aria-owns": _this.inputElement.id + "_options" });
          EventHandler.add(document, "mousedown touchstart", _this.documentClickHandler, _this);
        }
      });
    };
    DateTimePicker2.prototype.documentClickHandler = function(event) {
      var target = event.target;
      if (!isNullOrUndefined(this.popupObject) && (this.inputWrapper.container.contains(target) && event.type !== "mousedown" || this.popupObject.element && this.popupObject.element.contains(target)) && event.type !== "touchstart") {
        event.preventDefault();
      }
      if (!closest(target, '[id="' + (this.popupObject && this.popupObject.element.id + '"]')) && target !== this.inputElement && target !== this.timeIcon && !isNullOrUndefined(this.inputWrapper) && target !== this.inputWrapper.container) {
        if (this.isTimePopupOpen()) {
          this.hide(event);
          this.focusOut();
        }
      } else if (target !== this.inputElement) {
        if (!Browser.isDevice) {
          this.isPreventBlur = document.activeElement === this.inputElement && (Browser.isIE || Browser.info.name === "edge") && target === this.popupObject.element;
        }
      }
    };
    DateTimePicker2.prototype.isTimePopupOpen = function() {
      return this.dateTimeWrapper && this.dateTimeWrapper.classList.contains("" + ROOT$1) ? true : false;
    };
    DateTimePicker2.prototype.isDatePopupOpen = function() {
      return this.popupWrapper && this.popupWrapper.classList.contains("" + DATETIMEPOPUPWRAPPER) ? true : false;
    };
    DateTimePicker2.prototype.renderPopup = function() {
      var _this = this;
      this.containerStyle = this.inputWrapper.container.getBoundingClientRect();
      if (Browser.isDevice) {
        this.timeModal = createElement("div");
        this.timeModal.className = "" + ROOT$1 + " e-time-modal";
        document.body.className += " " + OVERFLOW;
        this.timeModal.style.display = "block";
        document.body.appendChild(this.timeModal);
      }
      var offset = 4;
      this.popupObject = new Popup(this.dateTimeWrapper, {
        width: this.setPopupWidth(),
        zIndex: this.zIndex,
        targetType: "container",
        collision: Browser.isDevice ? { X: "fit", Y: "fit" } : { X: "flip", Y: "flip" },
        relateTo: Browser.isDevice ? document.body : this.inputWrapper.container,
        position: Browser.isDevice ? { X: "center", Y: "center" } : { X: "left", Y: "bottom" },
        enableRtl: this.enableRtl,
        offsetY: offset,
        open: function() {
          _this.dateTimeWrapper.style.visibility = "visible";
          addClass([_this.timeIcon], ACTIVE$1);
          if (!Browser.isDevice) {
            _this.timekeyConfigure = extend(_this.timekeyConfigure, _this.keyConfigs);
            _this.inputEvent = new KeyboardEvents(_this.inputWrapper.container, {
              keyAction: _this.timeKeyActionHandle.bind(_this),
              keyConfigs: _this.timekeyConfigure,
              eventName: "keydown"
            });
          }
        },
        close: function() {
          removeClass([_this.timeIcon], ACTIVE$1);
          _this.unWireTimeListEvents();
          _this.inputElement.removeAttribute("aria-activedescendant");
          remove(_this.popupObject.element);
          _this.popupObject.destroy();
          _this.dateTimeWrapper.innerHTML = "";
          _this.listWrapper = _this.dateTimeWrapper = void 0;
          if (_this.inputEvent) {
            _this.inputEvent.destroy();
          }
        },
        targetExitViewport: function() {
          if (!Browser.isDevice) {
            _this.hide();
          }
        }
      });
      this.popupObject.element.style.maxHeight = POPUPDIMENSION;
    };
    DateTimePicker2.prototype.setDimension = function(width) {
      if (typeof width === "number") {
        width = formatUnit(width);
      } else if (typeof width === "string") {
        width = width;
      } else {
        width = "100%";
      }
      return width;
    };
    DateTimePicker2.prototype.setPopupWidth = function() {
      var width = this.setDimension(this.width);
      if (width.indexOf("%") > -1) {
        var inputWidth = this.containerStyle.width * parseFloat(width) / 100;
        width = inputWidth.toString() + "px";
      }
      return width;
    };
    DateTimePicker2.prototype.wireTimeListEvents = function() {
      EventHandler.add(this.listWrapper, "click", this.onMouseClick, this);
      if (!Browser.isDevice) {
        EventHandler.add(this.listWrapper, "mouseover", this.onMouseOver, this);
        EventHandler.add(this.listWrapper, "mouseout", this.onMouseLeave, this);
      }
    };
    DateTimePicker2.prototype.unWireTimeListEvents = function() {
      if (this.listWrapper) {
        EventHandler.remove(this.listWrapper, "click", this.onMouseClick);
        EventHandler.remove(document, "mousedown touchstart", this.documentClickHandler);
        if (!Browser.isDevice) {
          EventHandler.add(this.listWrapper, "mouseover", this.onMouseOver, this);
          EventHandler.add(this.listWrapper, "mouseout", this.onMouseLeave, this);
        }
      }
    };
    DateTimePicker2.prototype.onMouseOver = function(event) {
      var currentLi = closest(event.target, "." + LISTCLASS);
      this.setTimeHover(currentLi, HOVER);
    };
    DateTimePicker2.prototype.onMouseLeave = function() {
      this.removeTimeHover(HOVER);
    };
    DateTimePicker2.prototype.setTimeHover = function(li, className) {
      if (this.enabled && this.isValidLI(li) && !li.classList.contains(className)) {
        this.removeTimeHover(className);
        addClass([li], className);
      }
    };
    DateTimePicker2.prototype.getPopupHeight = function() {
      var height = parseInt(POPUPDIMENSION, 10);
      var popupHeight = this.dateTimeWrapper.getBoundingClientRect().height;
      return popupHeight > height ? height : popupHeight;
    };
    DateTimePicker2.prototype.changeEvent = function(e) {
      _super.prototype.changeEvent.call(this, e);
      if ((this.value && this.value.valueOf()) !== (this.previousDateTime && +this.previousDateTime.valueOf())) {
        this.valueWithMinutes = this.value;
        this.setInputValue("date");
        this.previousDateTime = this.value && /* @__PURE__ */ new Date(+this.value);
      }
    };
    DateTimePicker2.prototype.updateValue = function(e) {
      this.setInputValue("time");
      if (+this.previousDateTime !== +this.value) {
        this.changedArgs = {
          value: this.value,
          event: e || null,
          isInteracted: !isNullOrUndefined(e),
          element: this.element
        };
        this.addTimeSelection();
        this.trigger("change", this.changedArgs);
        this.previousDateTime = this.previousDate = this.value;
      }
    };
    DateTimePicker2.prototype.setTimeScrollPosition = function() {
      var popupElement = this.selectedElement;
      if (!isNullOrUndefined(popupElement)) {
        this.findScrollTop(popupElement);
      } else if (this.dateTimeWrapper && this.checkDateValue(this.scrollTo)) {
        this.setScrollTo();
      }
    };
    DateTimePicker2.prototype.findScrollTop = function(element2) {
      var listHeight = this.getPopupHeight();
      var nextElement = element2.nextElementSibling;
      var height = nextElement ? nextElement.offsetTop : element2.offsetTop;
      var lineHeight = element2.getBoundingClientRect().height;
      if (height + element2.offsetTop > listHeight) {
        this.dateTimeWrapper.scrollTop = nextElement ? height - (listHeight / HALFPOSITION + lineHeight / HALFPOSITION) : height;
      } else {
        this.dateTimeWrapper.scrollTop = 0;
      }
    };
    DateTimePicker2.prototype.setScrollTo = function() {
      var element2;
      var items = this.dateTimeWrapper.querySelectorAll("." + LISTCLASS);
      if (items.length >= 0) {
        this.scrollInvoked = true;
        var initialTime = this.timeCollections[0];
        var scrollTime = this.getDateObject(this.checkDateValue(this.scrollTo)).getTime();
        element2 = items[Math.round((scrollTime - initialTime) / (this.step * 6e4))];
      } else {
        this.dateTimeWrapper.scrollTop = 0;
      }
      if (!isNullOrUndefined(element2)) {
        this.findScrollTop(element2);
      } else {
        this.dateTimeWrapper.scrollTop = 0;
      }
    };
    DateTimePicker2.prototype.setInputValue = function(type) {
      if (type === "date") {
        this.inputElement.value = this.previousElementValue = this.getFormattedValue(this.getFullDateTime());
        this.setProperties({ value: this.getFullDateTime() }, true);
      } else {
        var tempVal = this.getFormattedValue(new Date(this.timeCollections[this.activeIndex]));
        Input.setValue(tempVal, this.inputElement, this.floatLabelType, this.showClearButton);
        this.previousElementValue = this.inputElement.value;
        this.setProperties({ value: new Date(this.timeCollections[this.activeIndex]) }, true);
        if (this.enableMask) {
          this.createMask();
        }
      }
      this.updateIconState();
    };
    DateTimePicker2.prototype.getFullDateTime = function() {
      var value = null;
      if (this.isDateObject(this.valueWithMinutes)) {
        value = this.combineDateTime(this.valueWithMinutes);
      } else {
        value = this.previousDate;
      }
      return this.validateMinMaxRange(value);
    };
    DateTimePicker2.prototype.createMask = function() {
      this.notify("createMask", {
        module: "MaskedDateTime"
      });
    };
    DateTimePicker2.prototype.combineDateTime = function(value) {
      if (this.isDateObject(value)) {
        var day = this.previousDate.getDate();
        var month2 = this.previousDate.getMonth();
        var year = this.previousDate.getFullYear();
        var hour = value.getHours();
        var minutes = value.getMinutes();
        var seconds = value.getSeconds();
        return new Date(year, month2, day, hour, minutes, seconds);
      } else {
        return this.previousDate;
      }
    };
    DateTimePicker2.prototype.onMouseClick = function(event) {
      var target = event.target;
      var li = this.selectedElement = closest(target, "." + LISTCLASS);
      if (li && li.classList.contains(LISTCLASS)) {
        this.timeValue = li.getAttribute("data-value");
        this.hide(event);
      }
      this.setSelection(li, event);
    };
    DateTimePicker2.prototype.setSelection = function(li, event) {
      if (this.isValidLI(li) && !li.classList.contains(ACTIVE$1)) {
        this.selectedElement = li;
        var index = Array.prototype.slice.call(this.liCollections).indexOf(li);
        this.activeIndex = index;
        this.valueWithMinutes = new Date(this.timeCollections[this.activeIndex]);
        addClass([this.selectedElement], ACTIVE$1);
        this.selectedElement.setAttribute("aria-selected", "true");
        this.updateValue(event);
      }
    };
    DateTimePicker2.prototype.setTimeActiveClass = function() {
      var collections = isNullOrUndefined(this.dateTimeWrapper) ? this.listWrapper : this.dateTimeWrapper;
      if (!isNullOrUndefined(collections)) {
        var items = collections.querySelectorAll("." + LISTCLASS);
        if (items.length) {
          for (var i = 0; i < items.length; i++) {
            if (this.timeCollections[i] === +this.valueWithMinutes) {
              items[i].setAttribute("aria-selected", "true");
              this.selectedElement = items[i];
              this.activeIndex = i;
              this.setTimeActiveDescendant();
              break;
            }
          }
        }
      }
    };
    DateTimePicker2.prototype.setTimeActiveDescendant = function() {
      if (!isNullOrUndefined(this.selectedElement) && this.value) {
        attributes(this.inputElement, { "aria-activedescendant": this.selectedElement.getAttribute("id") });
      } else {
        this.inputElement.removeAttribute("aria-activedescendant");
      }
    };
    DateTimePicker2.prototype.addTimeSelection = function() {
      this.selectedElement = null;
      this.removeTimeSelection();
      this.setTimeActiveClass();
      if (!isNullOrUndefined(this.selectedElement)) {
        addClass([this.selectedElement], ACTIVE$1);
        this.selectedElement.setAttribute("aria-selected", "true");
      }
    };
    DateTimePicker2.prototype.removeTimeSelection = function() {
      this.removeTimeHover(HOVER);
      if (!isNullOrUndefined(this.dateTimeWrapper)) {
        var items = this.dateTimeWrapper.querySelectorAll("." + ACTIVE$1);
        if (items.length) {
          removeClass(items, ACTIVE$1);
          items[0].removeAttribute("aria-selected");
        }
      }
    };
    DateTimePicker2.prototype.removeTimeHover = function(className) {
      var hoveredItem = this.getTimeHoverItem(className);
      if (hoveredItem && hoveredItem.length) {
        removeClass(hoveredItem, className);
      }
    };
    DateTimePicker2.prototype.getTimeHoverItem = function(className) {
      var collections = isNullOrUndefined(this.dateTimeWrapper) ? this.listWrapper : this.dateTimeWrapper;
      var hoveredItem;
      if (!isNullOrUndefined(collections)) {
        hoveredItem = collections.querySelectorAll("." + className);
      }
      return hoveredItem;
    };
    DateTimePicker2.prototype.isValidLI = function(li) {
      return li && li.classList.contains(LISTCLASS) && !li.classList.contains(DISABLED);
    };
    DateTimePicker2.prototype.calculateStartEnd = function(value, range, method) {
      var day = value.getDate();
      var month2 = value.getMonth();
      var year = value.getFullYear();
      var hours = value.getHours();
      var minutes = value.getMinutes();
      var seconds = value.getSeconds();
      var milliseconds = value.getMilliseconds();
      if (range) {
        if (method === "starttime") {
          return new Date(year, month2, day, 0, 0, 0);
        } else {
          return new Date(year, month2, day, 23, 59, 59);
        }
      } else {
        return new Date(year, month2, day, hours, minutes, seconds, milliseconds);
      }
    };
    DateTimePicker2.prototype.startTime = function(date) {
      var tempStartValue;
      var start;
      var tempMin = this.min;
      var value = date === null ? /* @__PURE__ */ new Date() : date;
      if (+value.getDate() === +tempMin.getDate() && +value.getMonth() === +tempMin.getMonth() && +value.getFullYear() === +tempMin.getFullYear() || +new Date(value.getFullYear(), value.getMonth(), value.getDate()) <= +new Date(tempMin.getFullYear(), tempMin.getMonth(), tempMin.getDate())) {
        start = false;
        tempStartValue = this.min;
      } else if (+value < +this.max && +value > +this.min) {
        start = true;
        tempStartValue = value;
      } else if (+value >= +this.max) {
        start = true;
        tempStartValue = this.max;
      }
      return this.calculateStartEnd(tempStartValue, start, "starttime");
    };
    DateTimePicker2.prototype.endTime = function(date) {
      var tempEndValue;
      var end;
      var tempMax = this.max;
      var value = date === null ? /* @__PURE__ */ new Date() : date;
      if (+value.getDate() === +tempMax.getDate() && +value.getMonth() === +tempMax.getMonth() && +value.getFullYear() === +tempMax.getFullYear() || +new Date(value.getUTCFullYear(), value.getMonth(), value.getDate()) >= +new Date(tempMax.getFullYear(), tempMax.getMonth(), tempMax.getDate())) {
        end = false;
        tempEndValue = this.max;
      } else if (+value < +this.max && +value > +this.min) {
        end = true;
        tempEndValue = value;
      } else if (+value <= +this.min) {
        end = true;
        tempEndValue = this.min;
      }
      return this.calculateStartEnd(tempEndValue, end, "endtime");
    };
    DateTimePicker2.prototype.hide = function(e) {
      var _this = this;
      if (this.popupObj || this.dateTimeWrapper) {
        this.preventArgs = {
          cancel: false,
          popup: this.popupObj || this.popupObject,
          event: e || null
        };
        var eventArgs = this.preventArgs;
        if (isNullOrUndefined(this.popupObj)) {
          this.trigger("close", eventArgs, function(eventArgs2) {
            _this.dateTimeCloseEventCallback(e, eventArgs2);
          });
        } else {
          this.dateTimeCloseEventCallback(e, eventArgs);
        }
      } else {
        if (Browser.isDevice && this.allowEdit && !this.readonly) {
          this.inputElement.removeAttribute("readonly");
        }
        this.setAllowEdit();
      }
    };
    DateTimePicker2.prototype.dateTimeCloseEventCallback = function(e, eventArgs) {
      this.preventArgs = eventArgs;
      if (!this.preventArgs.cancel) {
        if (this.isDatePopupOpen()) {
          _super.prototype.hide.call(this, e);
        } else if (this.isTimePopupOpen()) {
          this.closePopup(e);
          removeClass([document.body], OVERFLOW);
          if (Browser.isDevice && this.timeModal) {
            this.timeModal.style.display = "none";
            this.timeModal.outerHTML = "";
            this.timeModal = null;
          }
          this.setTimeActiveDescendant();
        }
      }
      if (Browser.isDevice && this.allowEdit && !this.readonly) {
        this.inputElement.removeAttribute("readonly");
      }
      this.setAllowEdit();
    };
    DateTimePicker2.prototype.closePopup = function(e) {
      if (this.isTimePopupOpen() && this.popupObject) {
        var animModel = {
          name: "FadeOut",
          duration: ANIMATIONDURATION,
          delay: 0
        };
        this.popupObject.hide(new Animation$1(animModel));
        this.inputWrapper.container.classList.remove(ICONANIMATION);
        attributes(this.inputElement, { "aria-expanded": "false" });
        this.inputElement.removeAttribute("aria-owns");
        EventHandler.remove(document, "mousedown touchstart", this.documentClickHandler);
      }
    };
    DateTimePicker2.prototype.preRender = function() {
      this.checkFormat();
      this.dateTimeFormat = this.cldrDateTimeFormat();
      _super.prototype.preRender.call(this);
      removeClass([this.inputElementCopy], [ROOT$1]);
    };
    DateTimePicker2.prototype.getProperty = function(date, val) {
      if (val === "min") {
        this.setProperties({ min: this.validateValue(date.min) }, true);
      } else {
        this.setProperties({ max: this.validateValue(date.max) }, true);
      }
    };
    DateTimePicker2.prototype.checkAttributes = function(isDynamic) {
      var attributes2 = isDynamic ? isNullOrUndefined(this.htmlAttributes) ? [] : Object.keys(this.htmlAttributes) : ["style", "name", "step", "disabled", "readonly", "value", "min", "max", "placeholder", "type"];
      var value;
      for (var _i = 0, attributes_1 = attributes2; _i < attributes_1.length; _i++) {
        var prop = attributes_1[_i];
        if (!isNullOrUndefined(this.inputElement.getAttribute(prop))) {
          switch (prop) {
            case "name":
              this.inputElement.setAttribute("name", this.inputElement.getAttribute(prop));
              break;
            case "step":
              this.step = parseInt(this.inputElement.getAttribute(prop), 10);
              break;
            case "readonly":
              if (isNullOrUndefined(this.dateTimeOptions) || this.dateTimeOptions["readonly"] === void 0 || isDynamic) {
                var readonly2 = this.inputElement.getAttribute(prop) === "disabled" || this.inputElement.getAttribute(prop) === "" || this.inputElement.getAttribute(prop) === "true" ? true : false;
                this.setProperties({ readonly: readonly2 }, !isDynamic);
              }
              break;
            case "placeholder":
              if (isNullOrUndefined(this.dateTimeOptions) || this.dateTimeOptions["placeholder"] === void 0 || isDynamic) {
                this.setProperties({ placeholder: this.inputElement.getAttribute(prop) }, !isDynamic);
              }
              break;
            case "min":
              if (isNullOrUndefined(this.dateTimeOptions) || this.dateTimeOptions["min"] === void 0 || isDynamic) {
                value = new Date(this.inputElement.getAttribute(prop));
                if (!this.isNullOrEmpty(value) && !isNaN(+value)) {
                  this.setProperties({ min: value }, !isDynamic);
                }
              }
              break;
            case "disabled":
              if (isNullOrUndefined(this.dateTimeOptions) || this.dateTimeOptions["enabled"] === void 0 || isDynamic) {
                var enabled = this.inputElement.getAttribute(prop) === "disabled" || this.inputElement.getAttribute(prop) === "true" || this.inputElement.getAttribute(prop) === "" ? false : true;
                this.setProperties({ enabled }, !isDynamic);
              }
              break;
            case "value":
              if (isNullOrUndefined(this.dateTimeOptions) || this.dateTimeOptions["value"] === void 0 || isDynamic) {
                value = new Date(this.inputElement.getAttribute(prop));
                if (!this.isNullOrEmpty(value) && !isNaN(+value)) {
                  this.setProperties({ value }, !isDynamic);
                }
              }
              break;
            case "max":
              if (isNullOrUndefined(this.dateTimeOptions) || this.dateTimeOptions["max"] === void 0 || isDynamic) {
                value = new Date(this.inputElement.getAttribute(prop));
                if (!this.isNullOrEmpty(value) && !isNaN(+value)) {
                  this.setProperties({ max: value }, !isDynamic);
                }
              }
              break;
          }
        }
      }
    };
    DateTimePicker2.prototype.requiredModules = function() {
      var modules = [];
      if (this) {
        modules.push({ args: [this], member: "islamic" });
      }
      if (this.enableMask) {
        modules.push(this.maskedDateModule());
      }
      return modules;
    };
    DateTimePicker2.prototype.maskedDateModule = function() {
      var modules = { args: [this], member: "MaskedDateTime" };
      return modules;
    };
    DateTimePicker2.prototype.getTimeActiveElement = function() {
      if (!isNullOrUndefined(this.dateTimeWrapper)) {
        return this.dateTimeWrapper.querySelectorAll("." + ACTIVE$1);
      } else {
        return null;
      }
    };
    DateTimePicker2.prototype.createDateObj = function(val) {
      return val instanceof Date ? val : null;
    };
    DateTimePicker2.prototype.getDateObject = function(text) {
      if (!this.isNullOrEmpty(text)) {
        var dateValue = this.createDateObj(text);
        var value = this.valueWithMinutes;
        var status_1 = !isNullOrUndefined(value);
        if (this.checkDateValue(dateValue)) {
          var date = status_1 ? value.getDate() : DAY;
          var month2 = status_1 ? value.getMonth() : MONTH;
          var year = status_1 ? value.getFullYear() : YEAR;
          var hour = status_1 ? value.getHours() : HOUR;
          var minute = status_1 ? value.getMinutes() : MINUTE;
          var second = status_1 ? value.getSeconds() : SECOND$1;
          var millisecond = status_1 ? value.getMilliseconds() : MILLISECOND;
          if (!this.scrollInvoked) {
            return new Date(year, month2, date, hour, minute, second, millisecond);
          } else {
            this.scrollInvoked = false;
            return new Date(year, month2, date, dateValue.getHours(), dateValue.getMinutes(), dateValue.getSeconds(), dateValue.getMilliseconds());
          }
        }
      }
      return null;
    };
    DateTimePicker2.prototype.findNextTimeElement = function(event) {
      var textVal = this.inputElement.value;
      var value = isNullOrUndefined(this.valueWithMinutes) ? this.createDateObj(textVal) : this.getDateObject(this.valueWithMinutes);
      var dateTimeVal = null;
      var listCount = this.liCollections.length;
      if (!isNullOrUndefined(this.activeIndex) || !isNullOrUndefined(this.checkDateValue(value))) {
        if (event.action === "home") {
          dateTimeVal = +this.createDateObj(new Date(this.timeCollections[0]));
          this.activeIndex = 0;
        } else if (event.action === "end") {
          dateTimeVal = +this.createDateObj(new Date(this.timeCollections[this.timeCollections.length - 1]));
          this.activeIndex = this.timeCollections.length - 1;
        } else {
          if (event.action === "down") {
            for (var i = 0; i < listCount; i++) {
              if (+value < this.timeCollections[i]) {
                dateTimeVal = +this.createDateObj(new Date(this.timeCollections[i]));
                this.activeIndex = i;
                break;
              }
            }
          } else {
            for (var i = listCount - 1; i >= 0; i--) {
              if (+value > this.timeCollections[i]) {
                dateTimeVal = +this.createDateObj(new Date(this.timeCollections[i]));
                this.activeIndex = i;
                break;
              }
            }
          }
        }
        this.selectedElement = this.liCollections[this.activeIndex];
        this.timeElementValue(isNullOrUndefined(dateTimeVal) ? null : new Date(dateTimeVal));
      }
    };
    DateTimePicker2.prototype.setTimeValue = function(date, value) {
      var dateString;
      var time;
      var val = this.validateMinMaxRange(value);
      var newval = this.createDateObj(val);
      if (this.getFormattedValue(newval) !== (!isNullOrUndefined(this.value) ? this.getFormattedValue(this.value) : null)) {
        this.valueWithMinutes = isNullOrUndefined(newval) ? null : newval;
        time = /* @__PURE__ */ new Date(+this.valueWithMinutes);
      } else {
        if (this.strictMode) {
          date = newval;
        }
        this.valueWithMinutes = this.checkDateValue(date);
        time = /* @__PURE__ */ new Date(+this.valueWithMinutes);
      }
      if (this.calendarMode === "Gregorian") {
        dateString = this.globalize.formatDate(time, {
          format: !isNullOrUndefined(this.formatString) ? this.formatString : this.cldrDateTimeFormat(),
          type: "dateTime",
          skeleton: "yMd"
        });
      } else {
        dateString = this.globalize.formatDate(time, {
          format: !isNullOrUndefined(this.formatString) ? this.formatString : this.cldrDateTimeFormat(),
          type: "dateTime",
          skeleton: "yMd",
          calendar: "islamic"
        });
      }
      if (!this.strictMode && isNullOrUndefined(time)) {
        Input.setValue(dateString, this.inputElement, this.floatLabelType, this.showClearButton);
      } else {
        Input.setValue(dateString, this.inputElement, this.floatLabelType, this.showClearButton);
      }
      return time;
    };
    DateTimePicker2.prototype.timeElementValue = function(value) {
      if (!isNullOrUndefined(this.checkDateValue(value)) && !this.isNullOrEmpty(value)) {
        var date = value instanceof Date ? value : this.getDateObject(value);
        return this.setTimeValue(date, value);
      }
      return null;
    };
    DateTimePicker2.prototype.timeKeyHandler = function(event) {
      if (isNullOrUndefined(this.step) || this.step <= 0) {
        return;
      }
      var listCount = this.timeCollections.length;
      if (isNullOrUndefined(this.getTimeActiveElement()) || this.getTimeActiveElement().length === 0) {
        if (this.liCollections.length > 0) {
          if (isNullOrUndefined(this.value) && isNullOrUndefined(this.activeIndex)) {
            this.activeIndex = 0;
            this.selectedElement = this.liCollections[0];
            this.timeElementValue(new Date(this.timeCollections[0]));
          } else {
            this.findNextTimeElement(event);
          }
        }
      } else {
        var nextItemValue = void 0;
        if (event.keyCode >= 37 && event.keyCode <= 40) {
          var index = event.keyCode === 40 || event.keyCode === 39 ? ++this.activeIndex : --this.activeIndex;
          this.activeIndex = index = this.activeIndex === listCount ? 0 : this.activeIndex;
          this.activeIndex = index = this.activeIndex < 0 ? listCount - 1 : this.activeIndex;
          nextItemValue = isNullOrUndefined(this.timeCollections[index]) ? this.timeCollections[0] : this.timeCollections[index];
        } else if (event.action === "home") {
          this.activeIndex = 0;
          nextItemValue = this.timeCollections[0];
        } else if (event.action === "end") {
          this.activeIndex = listCount - 1;
          nextItemValue = this.timeCollections[listCount - 1];
        }
        this.selectedElement = this.liCollections[this.activeIndex];
        this.timeElementValue(new Date(nextItemValue));
      }
      this.isNavigate = true;
      this.setTimeHover(this.selectedElement, NAVIGATION);
      this.setTimeActiveDescendant();
      if (this.isTimePopupOpen() && this.selectedElement !== null && (!event || event.type !== "click")) {
        this.setTimeScrollPosition();
      }
    };
    DateTimePicker2.prototype.timeKeyActionHandle = function(event) {
      if (this.enabled) {
        if (event.action !== "right" && event.action !== "left" && event.action !== "tab") {
          event.preventDefault();
        }
        switch (event.action) {
          case "up":
          case "down":
          case "home":
          case "end":
            this.timeKeyHandler(event);
            break;
          case "enter":
            if (this.isNavigate) {
              this.selectedElement = this.liCollections[this.activeIndex];
              this.valueWithMinutes = new Date(this.timeCollections[this.activeIndex]);
              this.setInputValue("time");
              if (+this.previousDateTime !== +this.value) {
                this.changedArgs.value = this.value;
                this.addTimeSelection();
                this.previousDateTime = this.value;
              }
            } else {
              this.updateValue(event);
            }
            this.hide(event);
            addClass([this.inputWrapper.container], INPUTFOCUS);
            this.isNavigate = false;
            event.stopPropagation();
            break;
          case "escape":
            this.hide(event);
            break;
          default:
            this.isNavigate = false;
            break;
        }
      }
    };
    DateTimePicker2.prototype.inputKeyAction = function(event) {
      switch (event.action) {
        case "altDownArrow":
          this.strictModeUpdate();
          this.updateInput();
          this.toggle(event);
          break;
      }
    };
    DateTimePicker2.prototype.onPropertyChanged = function(newProp, oldProp) {
      for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {
        var prop = _a[_i];
        switch (prop) {
          case "value":
            this.isDynamicValueChanged = true;
            this.invalidValueString = null;
            this.checkInvalidValue(newProp.value);
            newProp.value = this.value;
            newProp.value = this.validateValue(newProp.value);
            if (this.enableMask) {
              Input.setValue(this.maskedDateValue, this.inputElement, this.floatLabelType, this.showClearButton);
            } else {
              Input.setValue(this.getFormattedValue(newProp.value), this.inputElement, this.floatLabelType, this.showClearButton);
            }
            this.valueWithMinutes = newProp.value;
            this.setProperties({ value: newProp.value }, true);
            if (this.popupObj) {
              this.popupUpdate();
            }
            this.previousDateTime = new Date(this.inputElement.value);
            this.updateInput();
            this.changeTrigger(null);
            this.preventChange = this.isAngular && this.preventChange ? !this.preventChange : this.preventChange;
            if (this.enableMask && this.value) {
              this.notify("createMask", {
                module: "MaskedDateTime"
              });
            }
            break;
          case "min":
          case "max":
            this.getProperty(newProp, prop);
            this.updateInput();
            break;
          case "enableRtl":
            Input.setEnableRtl(this.enableRtl, [this.inputWrapper.container]);
            break;
          case "cssClass":
            if (!isNullOrUndefined(oldProp.cssClass)) {
              oldProp.cssClass = oldProp.cssClass.replace(/\s+/g, " ").trim();
            }
            if (!isNullOrUndefined(newProp.cssClass)) {
              newProp.cssClass = newProp.cssClass.replace(/\s+/g, " ").trim();
            }
            Input.setCssClass(newProp.cssClass, [this.inputWrapper.container], oldProp.cssClass);
            if (this.dateTimeWrapper) {
              Input.setCssClass(newProp.cssClass, [this.dateTimeWrapper], oldProp.cssClass);
            }
            break;
          case "locale":
            this.globalize = new Internationalization(this.locale);
            this.l10n.setLocale(this.locale);
            this.setProperties({ placeholder: this.l10n.getConstant("placeholder") }, true);
            Input.setPlaceholder(this.l10n.getConstant("placeholder"), this.inputElement);
            this.dateTimeFormat = this.cldrDateTimeFormat();
            _super.prototype.updateInput.call(this);
            break;
          case "htmlAttributes":
            this.updateHtmlAttributeToElement();
            this.updateHtmlAttributeToWrapper();
            this.checkAttributes(true);
            break;
          case "format":
            this.setProperties({ format: newProp.format }, true);
            this.checkFormat();
            this.dateTimeFormat = this.formatString;
            this.setValue();
            if (this.enableMask) {
              this.notify("createMask", {
                module: "MaskedDateTime"
              });
              if (!this.value) {
                Input.setValue(this.maskedDateValue, this.inputElement, this.floatLabelType, this.showClearButton);
              }
            }
            break;
          case "placeholder":
            Input.setPlaceholder(newProp.placeholder, this.inputElement);
            break;
          case "enabled":
            Input.setEnabled(this.enabled, this.inputElement);
            if (!this.enabled) {
              this.inputElement.tabIndex = -1;
            }
            break;
          case "strictMode":
            this.invalidValueString = null;
            this.updateInput();
            break;
          case "width":
            this.setWidth(newProp.width);
            Input.calculateWidth(this.inputElement, this.inputWrapper.container);
            if (!isNullOrUndefined(this.inputWrapper.buttons[0]) && !isNullOrUndefined(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0]) && this.floatLabelType !== "Never") {
              this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-date-time-icon");
            }
            break;
          case "readonly":
            Input.setReadonly(this.readonly, this.inputElement);
            break;
          case "floatLabelType":
            this.floatLabelType = newProp.floatLabelType;
            Input.removeFloating(this.inputWrapper);
            Input.addFloating(this.inputElement, this.floatLabelType, this.placeholder);
            if (!isNullOrUndefined(this.inputWrapper.buttons[0]) && !isNullOrUndefined(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0]) && this.floatLabelType !== "Never") {
              this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-date-time-icon");
            }
            break;
          case "scrollTo":
            if (this.checkDateValue(new Date(this.checkValue(newProp.scrollTo)))) {
              if (this.dateTimeWrapper) {
                this.setScrollTo();
              }
              this.setProperties({ scrollTo: this.checkDateValue(new Date(this.checkValue(newProp.scrollTo))) }, true);
            } else {
              this.setProperties({ scrollTo: null }, true);
            }
            break;
          case "enableMask":
            if (this.enableMask) {
              this.notify("createMask", {
                module: "MaskedDateTime"
              });
              Input.setValue(this.maskedDateValue, this.inputElement, this.floatLabelType, this.showClearButton);
            } else {
              if (this.inputElement.value === this.maskedDateValue) {
                this.maskedDateValue = "";
                Input.setValue(this.maskedDateValue, this.inputElement, this.floatLabelType, this.showClearButton);
              }
            }
            break;
          default:
            _super.prototype.onPropertyChanged.call(this, newProp, oldProp);
            break;
        }
        if (!this.isDynamicValueChanged) {
          this.hide(null);
        }
        this.isDynamicValueChanged = false;
      }
    };
    DateTimePicker2.prototype.getModuleName = function() {
      return "datetimepicker";
    };
    DateTimePicker2.prototype.restoreValue = function() {
      this.previousDateTime = this.previousDate;
      this.currentDate = this.value ? this.value : /* @__PURE__ */ new Date();
      this.valueWithMinutes = this.value;
      this.previousDate = this.value;
      this.previousElementValue = this.previousElementValue = isNullOrUndefined(this.inputValueCopy) ? "" : this.getFormattedValue(this.inputValueCopy);
    };
    __decorate$b([
      Property(null)
    ], DateTimePicker2.prototype, "timeFormat", void 0);
    __decorate$b([
      Property(30)
    ], DateTimePicker2.prototype, "step", void 0);
    __decorate$b([
      Property(null)
    ], DateTimePicker2.prototype, "scrollTo", void 0);
    __decorate$b([
      Property(1e3)
    ], DateTimePicker2.prototype, "zIndex", void 0);
    __decorate$b([
      Property(null)
    ], DateTimePicker2.prototype, "value", void 0);
    __decorate$b([
      Property(null)
    ], DateTimePicker2.prototype, "keyConfigs", void 0);
    __decorate$b([
      Property({})
    ], DateTimePicker2.prototype, "htmlAttributes", void 0);
    __decorate$b([
      Property(false)
    ], DateTimePicker2.prototype, "enablePersistence", void 0);
    __decorate$b([
      Property(true)
    ], DateTimePicker2.prototype, "allowEdit", void 0);
    __decorate$b([
      Property(false)
    ], DateTimePicker2.prototype, "isMultiSelection", void 0);
    __decorate$b([
      Property(null)
    ], DateTimePicker2.prototype, "values", void 0);
    __decorate$b([
      Property(true)
    ], DateTimePicker2.prototype, "showClearButton", void 0);
    __decorate$b([
      Property(null)
    ], DateTimePicker2.prototype, "placeholder", void 0);
    __decorate$b([
      Property(false)
    ], DateTimePicker2.prototype, "strictMode", void 0);
    __decorate$b([
      Property(null)
    ], DateTimePicker2.prototype, "serverTimezoneOffset", void 0);
    __decorate$b([
      Property(new Date(1900, 0, 1))
    ], DateTimePicker2.prototype, "min", void 0);
    __decorate$b([
      Property(new Date(2099, 11, 31))
    ], DateTimePicker2.prototype, "max", void 0);
    __decorate$b([
      Property(null)
    ], DateTimePicker2.prototype, "firstDayOfWeek", void 0);
    __decorate$b([
      Property("Gregorian")
    ], DateTimePicker2.prototype, "calendarMode", void 0);
    __decorate$b([
      Property("Month")
    ], DateTimePicker2.prototype, "start", void 0);
    __decorate$b([
      Property("Month")
    ], DateTimePicker2.prototype, "depth", void 0);
    __decorate$b([
      Property(false)
    ], DateTimePicker2.prototype, "weekNumber", void 0);
    __decorate$b([
      Property(true)
    ], DateTimePicker2.prototype, "showTodayButton", void 0);
    __decorate$b([
      Property("Short")
    ], DateTimePicker2.prototype, "dayHeaderFormat", void 0);
    __decorate$b([
      Property(false)
    ], DateTimePicker2.prototype, "openOnFocus", void 0);
    __decorate$b([
      Property(false)
    ], DateTimePicker2.prototype, "enableMask", void 0);
    __decorate$b([
      Property({ day: "day", month: "month", year: "year", hour: "hour", minute: "minute", second: "second", dayOfTheWeek: "day of the week" })
    ], DateTimePicker2.prototype, "maskPlaceholder", void 0);
    __decorate$b([
      Event$1()
    ], DateTimePicker2.prototype, "open", void 0);
    __decorate$b([
      Event$1()
    ], DateTimePicker2.prototype, "close", void 0);
    __decorate$b([
      Event$1()
    ], DateTimePicker2.prototype, "cleared", void 0);
    __decorate$b([
      Event$1()
    ], DateTimePicker2.prototype, "blur", void 0);
    __decorate$b([
      Event$1()
    ], DateTimePicker2.prototype, "focus", void 0);
    __decorate$b([
      Event$1()
    ], DateTimePicker2.prototype, "created", void 0);
    __decorate$b([
      Event$1()
    ], DateTimePicker2.prototype, "destroyed", void 0);
    DateTimePicker2 = __decorate$b([
      NotifyPropertyChanges
    ], DateTimePicker2);
    return DateTimePicker2;
  }(DatePicker)
);
var cellClick = "cellClick";
var cellDoubleClick = "cellDoubleClick";
var moreEventsClick = "moreEventsClick";
var select = "select";
var hover = "hover";
var actionBegin = "actionBegin";
var actionComplete = "actionComplete";
var actionFailure = "actionFailure";
var navigating = "navigating";
var renderCell = "renderCell";
var eventClick = "eventClick";
var eventRendered = "eventRendered";
var dataBinding = "dataBinding";
var dataBound = "dataBound";
var popupOpen = "popupOpen";
var popupClose = "popupClose";
var dragStart = "dragStart";
var drag = "drag";
var dragStop = "dragStop";
var resizeStart = "resizeStart";
var resizing = "resizing";
var resizeStop = "resizeStop";
var inlineClick = "inlineClick";
var cellSelect = "cellSelect";
var print = "print";
var dataReady = "data-ready";
var eventsLoaded = "events-loaded";
var contentReady = "content-ready";
var virtualScroll = "virtual-scroll";
var scrollUiUpdate = "scroll-ui-update";
var uiUpdate = "ui-update";
var documentClick = "document-click";
var cellMouseDown = "cell-mouse-down";
var WEEK_LENGTH = 7;
var DEFAULT_WEEKS = 6;
var MS_PER_DAY = 864e5;
var MS_PER_MINUTE = 6e4;
function getElementHeightFromClass(container, elementClass2) {
  var height = 0;
  var el = createElement("div", { className: elementClass2 }).cloneNode();
  el.style.visibility = "hidden";
  el.style.position = "absolute";
  container.appendChild(el);
  height = el.getBoundingClientRect().height;
  remove(el);
  return height;
}
function getElementWidthFromClass(container, elementClass2) {
  var width = 0;
  var el = createElement("div", { className: elementClass2 }).cloneNode();
  el.style.visibility = "hidden";
  el.style.position = "absolute";
  container.appendChild(el);
  width = el.getBoundingClientRect().width;
  remove(el);
  return width;
}
function getTranslateY(element2) {
  var style = getComputedStyle(element2);
  return window.WebKitCSSMatrix ? new WebKitCSSMatrix(style.webkitTransform).m42 : 0;
}
function getTranslateX(element2) {
  var style = getComputedStyle(element2);
  return window.WebKitCSSMatrix ? new WebKitCSSMatrix(style.webkitTransform).m41 : 0;
}
function getWeekFirstDate(date, firstDayOfWeek) {
  var date1 = new Date(date.getTime());
  firstDayOfWeek = (firstDayOfWeek - date1.getDay() + 7 * -1) % 7;
  return new Date(date1.setDate(date1.getDate() + firstDayOfWeek));
}
function getWeekLastDate(date, firstDayOfWeek) {
  var weekFirst = getWeekFirstDate(date, firstDayOfWeek);
  var weekLast = new Date(weekFirst.getFullYear(), weekFirst.getMonth(), weekFirst.getDate() + 6);
  return new Date(weekLast.getTime());
}
function firstDateOfMonth(date) {
  return new Date(date.getFullYear(), date.getMonth(), 1);
}
function lastDateOfMonth(date) {
  return new Date(date.getFullYear(), date.getMonth() + 1, 0);
}
function getWeekNumber(date) {
  var date1 = new Date(date.getFullYear(), 0, 1).valueOf();
  var currentDate = new Date(date.getFullYear(), date.getMonth(), date.getDate()).valueOf();
  var dayOfYear = (currentDate - date1 + MS_PER_DAY) / MS_PER_DAY;
  return Math.ceil(dayOfYear / 7);
}
function getWeekMiddleDate(weekFirst, weekLast) {
  return new Date(weekLast.valueOf() - (weekLast.valueOf() - weekFirst.valueOf()) / 2);
}
function setTime(date, time) {
  var tzOffsetBefore = date.getTimezoneOffset();
  var d = new Date(date.getTime() + time);
  var tzOffsetDiff = d.getTimezoneOffset() - tzOffsetBefore;
  date.setTime(d.getTime() + tzOffsetDiff * MS_PER_MINUTE);
  return date;
}
function resetTime(date) {
  return new Date(date.getFullYear(), date.getMonth(), date.getDate());
}
function getDateInMs(date) {
  var localOffset = new Date(date.getFullYear(), date.getMonth(), date.getDate(), 0, 0, 0).getTimezoneOffset();
  var dateOffset = date.getTimezoneOffset();
  var timezoneOffset = dateOffset - localOffset;
  return date.getTime() - new Date(date.getFullYear(), date.getMonth(), date.getDate(), 0, 0, 0).getTime() - timezoneOffset * 60 * 1e3;
}
function getDateCount$1(startDate, endDate) {
  return Math.ceil((endDate.getTime() - startDate.getTime()) / MS_PER_DAY);
}
function addDays(date, noOfDays) {
  date = /* @__PURE__ */ new Date("" + date);
  return new Date(date.setDate(date.getDate() + noOfDays));
}
function addMonths(date, noOfMonths) {
  date = /* @__PURE__ */ new Date("" + date);
  var day = date.getDate();
  date.setDate(1);
  date.setMonth(date.getMonth() + noOfMonths);
  date.setDate(Math.min(day, getMaxDays(date)));
  return date;
}
function getStartEndHours(date, startHour, endHour) {
  var date1 = new Date(date.getTime());
  date1.setHours(startHour.getHours());
  date1.setMinutes(startHour.getMinutes());
  date1.setSeconds(startHour.getSeconds());
  var date2 = new Date(date.getTime());
  if (endHour.getHours() === 0) {
    date2 = addDays(date2, 1);
  } else {
    date2.setHours(endHour.getHours());
    date2.setMinutes(endHour.getMinutes());
    date2.setSeconds(endHour.getSeconds());
  }
  return { startHour: date1, endHour: date2 };
}
function getMaxDays(date) {
  return lastDateOfMonth(date).getDate();
}
function getDaysCount(startDate, endDate) {
  var strTime = resetTime(new Date(startDate));
  var endTime = resetTime(new Date(endDate));
  return Math.round((endTime.getTime() - strTime.getTime()) / MS_PER_DAY);
}
function getDateFromString(date) {
  return date.indexOf("Date") !== -1 ? new Date(parseInt(date.match(/\d+/g).toString(), 10)) : date.indexOf("T") !== -1 ? new Date(date) : new Date(date.replace(/-/g, "/"));
}
function getScrollBarWidth() {
  var divNode = createElement("div");
  var value = 0;
  divNode.style.cssText = "width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;";
  document.body.appendChild(divNode);
  var ratio = devicePixelRatio ? devicePixelRatio.toFixed(2) === "1.10" || devicePixelRatio <= 1 ? Math.ceil(devicePixelRatio % 1) : Math.floor(devicePixelRatio % 1) : 0;
  value = divNode.offsetWidth - divNode.clientWidth - ratio | 0;
  document.body.removeChild(divNode);
  return value;
}
function findIndexInData(data, field, value, event, resourceCollection) {
  for (var i = 0, length_1 = data.length; i < length_1; i++) {
    if (data[parseInt(i.toString(), 10)]["" + field] === value) {
      if (event) {
        var field_1 = resourceCollection.slice(-2)[0].field;
        var res = event["" + field_1] instanceof Array ? event["" + field_1] : [event["" + field_1]];
        var resData = res.join(",");
        if (resData.includes(data[parseInt(i.toString(), 10)][resourceCollection.slice(-1)[0].groupIDField])) {
          return i;
        }
      } else {
        return i;
      }
    }
  }
  return -1;
}
function getOuterHeight(element2) {
  var style = getComputedStyle(element2);
  return element2.offsetHeight + (parseInt(style.marginTop, 10) || 0) + (parseInt(style.marginBottom, 10) || 0);
}
function removeChildren(element2) {
  var elementChildren = [].slice.call(element2.children);
  for (var _i = 0, elementChildren_1 = elementChildren; _i < elementChildren_1.length; _i++) {
    var elementChild = elementChildren_1[_i];
    element2.removeChild(elementChild);
  }
}
function isDaylightSavingTime(date) {
  var jan = new Date(date.getFullYear(), 0, 1);
  var jul = new Date(date.getFullYear(), 6, 1);
  return date.getTimezoneOffset() < Math.max(jan.getTimezoneOffset(), jul.getTimezoneOffset());
}
function getUniversalTime(date) {
  var year = date.getFullYear();
  var month2 = date.getMonth();
  var day = date.getDate();
  var hours = date.getHours();
  var minutes = date.getMinutes();
  var seconds = date.getSeconds();
  var milliseconds = date.getMilliseconds();
  return Date.UTC(year, month2, day, hours, minutes, seconds, milliseconds);
}
function isMobile() {
  return window.navigator.userAgent.toLowerCase().indexOf("mobi") > -1;
}
function isIPadDevice() {
  return window.navigator.userAgent.toLowerCase().indexOf("ipad") > -1;
}
function capitalizeFirstWord(inputString, type) {
  if (type === "multiple") {
    inputString = inputString.split(" ").map(function(e) {
      return e.charAt(0).toLocaleUpperCase() + e.substring(1);
    }).join(" ");
  } else if (type === "single") {
    if (inputString[0] >= "0" && inputString[0] <= "9") {
      var array = inputString.match(/[a-zA-Z]/);
      inputString = isNullOrUndefined(array) ? inputString : inputString.slice(0, array.index) + inputString[array.index].toLocaleUpperCase() + inputString.slice(array.index + 1);
    }
    inputString = inputString[0].toLocaleUpperCase() + inputString.slice(1);
  }
  return inputString;
}
var ROOT = "e-schedule";
var RTL = "e-rtl";
var DEVICE_CLASS = "e-device";
var MULTI_DRAG = "e-multi-drag";
var ICON = "e-icons";
var ENABLE_CLASS = "e-enable";
var DISABLE_CLASS = "e-disable";
var TABLE_CONTAINER_CLASS = "e-table-container";
var SCHEDULE_TABLE_CLASS = "e-schedule-table";
var ALLDAY_CELLS_CLASS = "e-all-day-cells";
var HEADER_POPUP_CLASS = "e-header-popup";
var HEADER_CALENDAR_CLASS = "e-header-calendar";
var ALLDAY_ROW_CLASS = "e-all-day-row";
var CONTENT_TABLE_CLASS = "e-content-table";
var WORK_CELLS_CLASS = "e-work-cells";
var WORK_HOURS_CLASS = "e-work-hours";
var POPUP_OPEN = "e-popup-open";
var DATE_HEADER_WRAP_CLASS = "e-date-header-wrap";
var DATE_HEADER_CONTAINER_CLASS = "e-date-header-container";
var HEADER_CELLS_CLASS = "e-header-cells";
var HEADER_WEEK_CELLS_CLASS = "e-header-week-cell";
var HEADER_MONTH_CELLS_CLASS = "e-header-month-cell";
var HEADER_YEAR_CELLS_CLASS = "e-header-year-cell";
var WORKDAY_CLASS = "e-work-days";
var OTHERMONTH_CLASS = "e-other-month";
var CURRENT_DAY_CLASS = "e-current-day";
var CURRENTDATE_CLASS = "e-current-date";
var CURRENT_PANEL_CLASS = "e-current-panel";
var PREVIOUS_PANEL_CLASS = "e-previous-panel";
var NEXT_PANEL_CLASS = "e-next-panel";
var PREVIOUS_DATE_CLASS = "e-prev";
var NEXT_DATE_CLASS = "e-next";
var TRANSLATE_CLASS = "e-translate";
var LEFT_INDENT_CLASS = "e-left-indent";
var LEFT_INDENT_WRAP_CLASS = "e-left-indent-wrap";
var EVENT_TABLE_CLASS = "e-event-table";
var RESOURCE_LEFT_TD_CLASS = "e-resource-left-td";
var RESOURCE_GROUP_CELLS_CLASS = "e-resource-group-cells";
var RESOURCE_TEXT_CLASS = "e-resource-text";
var RESOURCE_COLUMN_WRAP_CLASS = "e-resource-column-wrap";
var RESOURCE_COLUMN_TABLE_CLASS = "e-resource-column-table";
var RESOURCE_CHILD_CLASS = "e-child-node";
var RESOURCE_PARENT_CLASS = "e-parent-node";
var RESOURCE_EXPAND_CLASS = "e-resource-expand";
var RESOURCE_COLLAPSE_CLASS = "e-resource-collapse";
var RESOURCE_TREE_ICON_CLASS = "e-resource-tree-icon";
var RESOURCE_CELLS_CLASS = "e-resource-cells";
var TIME_CELLS_WRAP_CLASS = "e-time-cells-wrap";
var TIME_CELLS_CLASS = "e-time-cells";
var TIME_SLOT_CLASS = "e-time-slots";
var ALTERNATE_CELLS_CLASS = "e-alternate-cells";
var CURRENT_TIME_CLASS = "e-current-time";
var CURRENT_TIMELINE_CLASS = "e-current-timeline";
var PREVIOUS_TIMELINE_CLASS = "e-previous-timeline";
var HIDE_CHILDS_CLASS = "e-hide-childs";
var SCROLL_CONTAINER_CLASS = "e-scroll-container";
var TIMELINE_WRAPPER_CLASS = "e-timeline-wrapper";
var APPOINTMENT_WRAPPER_CLASS = "e-appointment-wrapper";
var DAY_WRAPPER_CLASS = "e-day-wrapper";
var TOOLBAR_CONTAINER = "e-schedule-toolbar-container";
var RESOURCE_TOOLBAR_CONTAINER = "e-schedule-resource-toolbar-container";
var HEADER_TOOLBAR = "e-schedule-toolbar";
var RESOURCE_HEADER_TOOLBAR = "e-schedule-resource-toolbar";
var SELECTED_CELL_CLASS = "e-selected-cell";
var WEEK_NUMBER_WRAPPER_CLASS = "e-week-number-wrapper";
var WEEK_NUMBER_CLASS = "e-week-number";
var WRAPPER_CONTAINER_CLASS = "e-wrapper-container";
var APPOINTMENT_CONTAINER_CLASS = "e-appointment-container";
var APPOINTMENT_CLASS = "e-appointment";
var BLOCK_APPOINTMENT_CLASS = "e-block-appointment";
var BLOCK_INDICATOR_CLASS = "e-block-indicator";
var APPOINTMENT_BORDER = "e-appointment-border";
var APPOINTMENT_DETAILS = "e-appointment-details";
var SUBJECT_WRAP = "e-subject-wrap";
var RESOURCE_NAME = "e-resource-name";
var APPOINTMENT_TIME = "e-time";
var TABLE_WRAP_CLASS = "e-table-wrap";
var OUTER_TABLE_CLASS = "e-outer-table";
var CONTENT_WRAP_CLASS = "e-content-wrap";
var VIRTUAL_TRACK_CLASS = "e-virtual-track";
var AGENDA_CELLS_CLASS = "e-agenda-cells";
var AGENDA_SELECTED_CELL = "e-active-appointment-agenda";
var MONTH_HEADER_CLASS = "e-month-header";
var NAVIGATE_CLASS = "e-navigate";
var DATE_HEADER_CLASS = "e-date-header";
var DATE_TIME_CLASS = "e-date-time";
var DATE_TIME_WRAPPER_CLASS = "e-date-time-wrapper";
var EVENT_INDICATOR_CLASS = "e-indicator";
var EVENT_ICON_UP_CLASS = "e-up-icon";
var EVENT_ICON_DOWN_CLASS = "e-down-icon";
var EVENT_ICON_LEFT_CLASS = "e-left-icon";
var EVENT_ICON_RIGHT_CLASS = "e-right-icon";
var EVENT_ACTION_CLASS = "e-event-action";
var NEW_EVENT_CLASS = "e-new-event";
var CLONE_ELEMENT_CLASS = "e-schedule-event-clone";
var MONTH_CLONE_ELEMENT_CLASS = "e-month-event";
var CLONE_TIME_INDICATOR_CLASS = "e-clone-time-indicator";
var DRAG_CLONE_CLASS = "e-drag-clone";
var EVENT_RESIZE_CLASS = "e-event-resize";
var RESIZE_CLONE_CLASS = "e-resize-clone";
var LEFT_RESIZE_HANDLER = "e-left-handler";
var RIGHT_RESIZE_HANDLER = "e-right-handler";
var TOP_RESIZE_HANDLER = "e-top-handler";
var BOTTOM_RESIZE_HANDLER = "e-bottom-handler";
var EVENT_RECURRENCE_ICON_CLASS = "e-recurrence-icon";
var EVENT_RECURRENCE_EDIT_ICON_CLASS = "e-recurrence-edit-icon";
var HEADER_ROW_CLASS = "e-header-row";
var ALLDAY_APPOINTMENT_WRAPPER_CLASS = "e-all-day-appointment-wrapper";
var ALLDAY_APPOINTMENT_CLASS = "e-all-day-appointment";
var EVENT_COUNT_CLASS = "e-appointment-hide";
var ROW_COUNT_WRAPPER_CLASS = "e-row-count-wrapper";
var ALLDAY_APPOINTMENT_SECTION_CLASS = "e-all-day-appointment-section";
var APPOINTMENT_ROW_EXPAND_CLASS = "e-appointment-expand";
var APPOINTMENT_ROW_COLLAPSE_CLASS = "e-appointment-collapse";
var MORE_INDICATOR_CLASS = "e-more-indicator";
var CELL_POPUP_CLASS = "e-cell-popup";
var EVENT_POPUP_CLASS = "e-event-popup";
var MULTIPLE_EVENT_POPUP_CLASS = "e-multiple-event-popup";
var POPUP_HEADER_CLASS = "e-popup-header";
var POPUP_HEADER_ICON_WRAPPER = "e-header-icon-wrapper";
var POPUP_CONTENT_CLASS = "e-popup-content";
var POPUP_FOOTER_CLASS = "e-popup-footer";
var DATE_TIME_DETAILS_CLASS = "e-date-time-details";
var RECURRENCE_SUMMARY_CLASS = "e-recurrence-summary";
var QUICK_POPUP_EVENT_DETAILS_CLASS = "e-event-details";
var EVENT_CREATE_CLASS = "e-event-create";
var EDIT_EVENT_CLASS = "e-event-edit";
var DELETE_EVENT_CLASS = "e-event-delete";
var TEXT_ELLIPSIS = "e-text-ellipsis";
var MORE_POPUP_WRAPPER_CLASS = "e-more-popup-wrapper";
var MORE_EVENT_POPUP_CLASS = "e-more-event-popup";
var MORE_EVENT_HEADER_CLASS = "e-more-event-header";
var MORE_EVENT_DATE_HEADER_CLASS = "e-more-event-date-header";
var MORE_EVENT_HEADER_DAY_CLASS = "e-header-day";
var MORE_EVENT_HEADER_DATE_CLASS = "e-header-date";
var MORE_EVENT_CLOSE_CLASS = "e-more-event-close";
var MORE_EVENT_CONTENT_CLASS = "e-more-event-content";
var MORE_EVENT_WRAPPER_CLASS = "e-more-appointment-wrapper";
var QUICK_DIALOG_CLASS = "e-quick-dialog";
var QUICK_DIALOG_OCCURRENCE_CLASS = "e-quick-dialog-occurrence-event";
var QUICK_DIALOG_SERIES_CLASS = "e-quick-dialog-series-event";
var QUICK_DIALOG_FOLLOWING_EVENTS_CLASS = "e-quick-dialog-following-events";
var FOLLOWING_EVENTS_DIALOG = "e-following-events-dialog";
var QUICK_DIALOG_DELETE_CLASS = "e-quick-dialog-delete";
var QUICK_DIALOG_CANCEL_CLASS = "e-quick-dialog-cancel";
var QUICK_DIALOG_ALERT_OK = "e-quick-alertok";
var QUICK_DIALOG_ALERT_CANCEL = "e-quick-alertcancel";
var QUICK_DIALOG_ALERT_FOLLOWING = "e-quick-alertfollowing";
var QUICK_DIALOG_ALERT_BTN_CLASS = "e-quick-dialog-alert-btn";
var EVENT_WINDOW_DIALOG_CLASS = "e-schedule-dialog";
var FORM_CONTAINER_CLASS = "e-form-container";
var FORM_CLASS = "e-schedule-form";
var EVENT_WINDOW_ALLDAY_TZ_DIV_CLASS = "e-all-day-time-zone-row";
var EVENT_WINDOW_ALL_DAY_CLASS = "e-all-day";
var TIME_ZONE_CLASS = "e-time-zone";
var TIME_ZONE_ICON_CLASS = "e-time-zone-icon";
var TIME_ZONE_DETAILS_CLASS = "e-time-zone-details";
var EVENT_WINDOW_REPEAT_DIV_CLASS = "e-repeat-parent-row";
var EVENT_WINDOW_REPEAT_CLASS = "e-repeat";
var EVENT_WINDOW_TITLE_LOCATION_DIV_CLASS = "e-title-location-row";
var SUBJECT_CLASS = "e-subject";
var LOCATION_CLASS = "e-location";
var LOCATION_ICON_CLASS = "e-location-icon";
var LOCATION_DETAILS_CLASS = "e-location-details";
var EVENT_WINDOW_START_END_DIV_CLASS = "e-start-end-row";
var EVENT_WINDOW_START_CLASS = "e-start";
var EVENT_WINDOW_END_CLASS = "e-end";
var EVENT_WINDOW_RESOURCES_DIV_CLASS = "e-resources-row";
var DESCRIPTION_CLASS = "e-description";
var DESCRIPTION_ICON_CLASS = "e-description-icon";
var DESCRIPTION_DETAILS_CLASS = "e-description-details";
var EVENT_WINDOW_TIME_ZONE_DIV_CLASS = "e-time-zone-row";
var EVENT_WINDOW_START_TZ_CLASS = "e-start-time-zone";
var EVENT_WINDOW_END_TZ_CLASS = "e-end-time-zone";
var EVENT_WINDOW_BACK_ICON_CLASS = "e-back-icon";
var EVENT_WINDOW_SAVE_ICON_CLASS = "e-save-icon";
var EVENT_WINDOW_CANCEL_BUTTON_CLASS = "e-event-cancel";
var EVENT_WINDOW_SAVE_BUTTON_CLASS = "e-event-save";
var EVENT_WINDOW_DIALOG_PARENT_CLASS = "e-dialog-parent";
var EVENT_WINDOW_TITLE_TEXT_CLASS = "e-title-text";
var EVENT_WINDOW_ICON_DISABLE_CLASS = "e-icon-disable";
var EDIT_CLASS = "e-edit";
var EDIT_ICON_CLASS = "e-edit-icon";
var DELETE_CLASS = "e-delete";
var DELETE_ICON_CLASS = "e-delete-icon";
var CLOSE_CLASS = "e-close";
var CLOSE_ICON_CLASS = "e-close-icon";
var ERROR_VALIDATION_CLASS = "e-schedule-error";
var EVENT_TOOLTIP_ROOT_CLASS = "e-schedule-event-tooltip";
var ALLDAY_ROW_ANIMATE_CLASS = "e-animate";
var TIMESCALE_DISABLE = "e-timescale-disable";
var DISABLE_DATE = "e-disable-date";
var HIDDEN_CLASS = "e-hidden";
var DISABLE_DATES = "e-disable-dates";
var POPUP_WRAPPER_CLASS = "e-quick-popup-wrapper";
var POPUP_TABLE_CLASS = "e-popup-table";
var RESOURCE_MENU = "e-resource-menu";
var RESOURCE_MENU_ICON = "e-icon-menu";
var RESOURCE_LEVEL_TITLE = "e-resource-level-title";
var RESOURCE_TREE = "e-resource-tree";
var RESOURCE_TREE_POPUP_OVERLAY = "e-resource-tree-popup-overlay";
var RESOURCE_TREE_POPUP = "e-resource-tree-popup";
var RESOURCE_CLASS = "e-resource";
var RESOURCE_ICON_CLASS = "e-resource-icon";
var RESOURCE_DETAILS_CLASS = "e-resource-details";
var DATE_TIME_ICON_CLASS = "e-date-time-icon";
var VIRTUAL_SCROLL_CLASS = "e-virtual-scroll";
var ICON_DISABLE_CLASS = "e-icon-disable";
var AUTO_HEIGHT = "e-auto-height";
var IGNORE_WHITESPACE = "e-ignore-whitespace";
var READ_ONLY = "e-read-only";
var MONTH_HEADER_WRAPPER = "e-month-header-wrapper";
var INLINE_SUBJECT_CLASS = "e-inline-subject";
var INLINE_APPOINTMENT_CLASS = "e-inline-appointment";
var SCROLL_HIDDEN = "e-scroll-hidden";
var ALLDAY_APPOINTMENT_SCROLL = "e-all-day-scroll";
var ALLDAY_APPOINTMENT_AUTO = "e-all-day-auto";
var HeaderRenderer = (
  /** @class */
  function() {
    function HeaderRenderer2(parent) {
      this.parent = parent;
      this.l10n = this.parent.localeObj;
      this.renderHeader();
      this.addEventListener();
    }
    HeaderRenderer2.prototype.addEventListener = function() {
      this.parent.on(documentClick, this.closeHeaderPopup, this);
    };
    HeaderRenderer2.prototype.removeEventListener = function() {
      this.parent.off(documentClick, this.closeHeaderPopup);
    };
    HeaderRenderer2.prototype.closeHeaderPopup = function(e) {
      var closestEle = closest(e.event.target, ".e-date-range,.e-header-popup,.e-day,.e-selected");
      var closestPop = closest(e.event.target, ".e-hor-nav,.e-toolbar-pop");
      var contentWrap = this.parent.element.querySelector("." + CONTENT_WRAP_CLASS);
      if (this.parent.isAdaptive) {
        if (!isNullOrUndefined(closestPop) && (closestPop.classList.contains("e-toolbar-pop") || closestPop.classList.contains("e-hor-nav")) && !(closestPop.classList.contains("e-hor-nav") && this.element.querySelector(".e-toolbar-pop").classList.contains(POPUP_OPEN))) {
          addClass([contentWrap], SCROLL_HIDDEN);
        } else {
          removeClass([contentWrap], SCROLL_HIDDEN);
          var popupEle = this.element.querySelector(".e-toolbar-pop");
          if (!isNullOrUndefined(popupEle)) {
            var popupObj = popupEle.ej2_instances[0];
            if (popupObj && !(!isNullOrUndefined(closestPop) && closestPop.classList.contains("e-hor-nav") && popupEle.classList.contains(POPUP_OPEN))) {
              popupObj.hide();
            }
          }
        }
      }
      if (!isNullOrUndefined(closestEle)) {
        return;
      }
      this.hideHeaderPopup();
    };
    HeaderRenderer2.prototype.hideHeaderPopup = function() {
      if (this.headerPopup) {
        this.headerPopup.hide();
      }
    };
    HeaderRenderer2.prototype.renderHeader = function() {
      this.element = createElement("div", { className: TOOLBAR_CONTAINER });
      var toolbarEle = createElement("div", { className: HEADER_TOOLBAR });
      this.element.appendChild(toolbarEle);
      this.parent.element.insertBefore(this.element, this.parent.element.firstElementChild);
      this.renderToolbar();
    };
    HeaderRenderer2.prototype.renderToolbar = function() {
      var _this = this;
      var items = this.getItems();
      this.parent.trigger(actionBegin, { requestType: "toolbarItemRendering", items }, function(args) {
        _this.toolbarObj = new Toolbar({
          items: args.items,
          overflowMode: "Popup",
          clicked: _this.toolbarClickHandler.bind(_this),
          enableRtl: _this.parent.enableRtl,
          enableHtmlSanitizer: _this.parent.enableHtmlSanitizer,
          locale: _this.parent.locale
        });
        _this.toolbarObj.appendTo(_this.parent.element.querySelector("." + HEADER_TOOLBAR));
        var prevNavEle = _this.toolbarObj.element.querySelector(".e-prev");
        if (prevNavEle) {
          prevNavEle.firstElementChild.setAttribute("title", _this.l10n.getConstant("previous"));
        }
        var nextNavEle = _this.toolbarObj.element.querySelector(".e-next");
        if (nextNavEle) {
          nextNavEle.firstElementChild.setAttribute("title", _this.l10n.getConstant("next"));
        }
        _this.updateAddIcon();
        _this.updateActiveView();
        _this.parent.trigger(actionComplete, { requestType: "toolBarItemRendered", items: _this.toolbarObj.items });
      });
    };
    HeaderRenderer2.prototype.updateItems = function() {
      var _this = this;
      if (this.toolbarObj) {
        var items = this.getItems();
        this.parent.trigger(actionBegin, { requestType: "toolbarItemRendering", items }, function(args) {
          _this.toolbarObj.items = args.items;
          _this.toolbarObj.dataBind();
          _this.parent.trigger(actionComplete, { requestType: "toolBarItemRendered", items: _this.toolbarObj.items });
        });
      }
    };
    HeaderRenderer2.prototype.getPopUpRelativeElement = function() {
      if (this.parent.isAdaptive) {
        return this.toolbarObj.element;
      }
      return this.element.querySelector(".e-date-range");
    };
    HeaderRenderer2.prototype.setDayOfWeek = function(index) {
      if (this.headerCalendar) {
        this.headerCalendar.firstDayOfWeek = index;
        this.headerCalendar.dataBind();
      }
    };
    HeaderRenderer2.prototype.setCalendarDate = function(date) {
      if (this.headerCalendar) {
        this.headerCalendar.value = date;
        this.headerCalendar.dataBind();
      }
    };
    HeaderRenderer2.prototype.setCalendarMinMaxDate = function() {
      if (this.headerCalendar) {
        this.headerCalendar.min = this.parent.minDate;
        this.headerCalendar.max = this.parent.maxDate;
        this.headerCalendar.dataBind();
      }
    };
    HeaderRenderer2.prototype.getCalendarView = function() {
      if (["Month", "MonthAgenda", "TimelineMonth"].indexOf(this.parent.currentView) > -1) {
        return "Year";
      } else if (["Year", "TimelineYear"].indexOf(this.parent.currentView) > -1) {
        return "Decade";
      } else {
        return "Month";
      }
    };
    HeaderRenderer2.prototype.setCalendarView = function() {
      if (this.headerCalendar) {
        var calendarView = this.getCalendarView();
        this.headerCalendar.depth = calendarView;
        this.headerCalendar.start = calendarView;
        this.headerCalendar.refresh();
      }
    };
    HeaderRenderer2.prototype.updateActiveView = function() {
      var selEle = [].slice.call(this.toolbarObj.element.querySelectorAll(".e-views"));
      removeClass(selEle, ["e-active-view"]);
      if (selEle.length > 0 && selEle[this.parent.viewIndex]) {
        addClass([selEle[this.parent.viewIndex]], ["e-active-view"]);
      }
    };
    HeaderRenderer2.prototype.updateDateRange = function(date) {
      var selEle = this.toolbarObj.element.querySelector(".e-date-range");
      if (!selEle) {
        return;
      }
      var textEle = selEle.querySelector(".e-tbar-btn-text");
      if (this.parent.activeViewOptions.dateRangeTemplate) {
        textEle.textContent = "";
        var args = {
          startDate: this.parent.activeView.getStartDate(),
          endDate: this.parent.activeView.getEndDate(),
          currentView: this.parent.currentView
        };
        var viewName = this.parent.activeViewOptions.dateRangeTemplateName;
        var templateId = this.parent.element.id + "_" + viewName + "dateRangeTemplate";
        var dateTemplate = [].slice.call(this.parent.getDateRangeTemplate()(args, this.parent, "dateRangeTemplate", templateId, false));
        append2(dateTemplate, textEle);
      } else {
        var text = this.parent.activeView.getDateRangeText(date);
        selEle.setAttribute("aria-label", text);
        textEle.textContent = text;
      }
      this.refresh();
    };
    HeaderRenderer2.prototype.refresh = function() {
      if (this.toolbarObj) {
        this.toolbarObj.refreshOverflow();
      }
    };
    HeaderRenderer2.prototype.updateAddIcon = function() {
      var addEle = this.toolbarObj.element.querySelector(".e-add");
      if (addEle) {
        if (!this.parent.eventSettings.allowAdding) {
          addClass([addEle], HIDDEN_CLASS);
        } else {
          removeClass([addEle], HIDDEN_CLASS);
        }
      }
    };
    HeaderRenderer2.prototype.getDateRangeText = function() {
      var dateString = this.parent.globalize.formatDate(this.parent.selectedDate, {
        format: "MMMM y",
        calendar: this.parent.getCalendarMode()
      });
      return capitalizeFirstWord(dateString, "single");
    };
    HeaderRenderer2.prototype.getItems = function() {
      var items = [];
      items.push({
        align: "Left",
        prefixIcon: "e-icon-prev",
        tooltipText: "Previous",
        overflow: "Show",
        cssClass: "e-prev",
        htmlAttributes: { "aria-label": "previous period", "role": "navigation" }
      });
      items.push({
        align: "Left",
        prefixIcon: "e-icon-next",
        tooltipText: "Next",
        overflow: "Show",
        cssClass: "e-next",
        htmlAttributes: { "aria-label": "next period", "role": "navigation" }
      });
      items.push({
        align: "Left",
        text: this.getDateRangeText(),
        suffixIcon: "e-icon-down-arrow",
        cssClass: "e-date-range",
        overflow: "Show",
        htmlAttributes: { "aria-atomic": "true", "aria-live": "assertive", "aria-label": "title", "role": "navigation" }
      });
      if (this.parent.isAdaptive || this.parent.enableAdaptiveUI) {
        items.push({
          align: "Right",
          showAlwaysInPopup: this.parent.isAdaptive || this.parent.enableAdaptiveUI,
          prefixIcon: "e-icon-add",
          text: this.l10n.getConstant("newEvent"),
          cssClass: "e-add",
          overflow: "Show"
        });
        items.push({
          align: "Right",
          showAlwaysInPopup: this.parent.isAdaptive || this.parent.enableAdaptiveUI,
          prefixIcon: "e-icon-today",
          text: this.l10n.getConstant("today"),
          cssClass: "e-today",
          overflow: "Show"
        });
      } else {
        items.push({
          align: "Right",
          showAlwaysInPopup: this.parent.isAdaptive || this.parent.enableAdaptiveUI,
          prefixIcon: "e-icon-day",
          text: this.l10n.getConstant("today"),
          cssClass: "e-today",
          overflow: "Show"
        });
        if (this.parent.views.length > 1) {
          items.push({ align: "Right", type: "Separator", cssClass: "e-schedule-seperator" });
        }
      }
      if (this.parent.views.length > 1) {
        for (var _i = 0, _a = this.parent.views; _i < _a.length; _i++) {
          var item = _a[_i];
          items.push(this.getItemObject(item));
        }
      }
      return items;
    };
    HeaderRenderer2.prototype.getItemObject = function(item) {
      var viewName;
      var displayName;
      if (typeof item === "string") {
        viewName = item.toLowerCase();
        displayName = null;
      } else {
        viewName = item.option.toLowerCase();
        displayName = item.displayName;
      }
      var view;
      var orientationClass;
      var isItemInsidePopup = this.parent.isAdaptive || this.parent.enableAdaptiveUI;
      switch (viewName) {
        case "day":
          view = {
            align: "Right",
            showAlwaysInPopup: isItemInsidePopup,
            prefixIcon: "e-icon-day",
            text: displayName || this.l10n.getConstant("day"),
            cssClass: "e-views e-day"
          };
          break;
        case "week":
          view = {
            align: "Right",
            showAlwaysInPopup: isItemInsidePopup,
            prefixIcon: "e-icon-week",
            text: displayName || this.l10n.getConstant("week"),
            cssClass: "e-views e-week"
          };
          break;
        case "workweek":
          view = {
            align: "Right",
            showAlwaysInPopup: isItemInsidePopup,
            prefixIcon: "e-icon-workweek",
            text: displayName || this.l10n.getConstant("workWeek"),
            cssClass: "e-views e-work-week"
          };
          break;
        case "month":
          view = {
            align: "Right",
            showAlwaysInPopup: isItemInsidePopup,
            prefixIcon: "e-icon-month",
            text: displayName || this.l10n.getConstant("month"),
            cssClass: "e-views e-month"
          };
          break;
        case "year":
          view = {
            align: "Right",
            showAlwaysInPopup: isItemInsidePopup,
            prefixIcon: "e-icon-year",
            text: displayName || this.l10n.getConstant("year"),
            cssClass: "e-views e-year"
          };
          break;
        case "agenda":
          view = {
            align: "Right",
            showAlwaysInPopup: isItemInsidePopup,
            prefixIcon: "e-icon-agenda",
            text: displayName || this.l10n.getConstant("agenda"),
            cssClass: "e-views e-agenda"
          };
          break;
        case "monthagenda":
          view = {
            align: "Right",
            showAlwaysInPopup: isItemInsidePopup,
            prefixIcon: "e-icon-month-agenda",
            text: displayName || this.l10n.getConstant("monthAgenda"),
            cssClass: "e-views e-month-agenda"
          };
          break;
        case "timelineday":
          view = {
            align: "Right",
            showAlwaysInPopup: isItemInsidePopup,
            prefixIcon: "e-icon-timeline-day",
            text: displayName || this.l10n.getConstant("timelineDay"),
            cssClass: "e-views e-timeline-day"
          };
          break;
        case "timelineweek":
          view = {
            align: "Right",
            showAlwaysInPopup: isItemInsidePopup,
            prefixIcon: "e-icon-timeline-week",
            text: displayName || this.l10n.getConstant("timelineWeek"),
            cssClass: "e-views e-timeline-week"
          };
          break;
        case "timelineworkweek":
          view = {
            align: "Right",
            showAlwaysInPopup: isItemInsidePopup,
            prefixIcon: "e-icon-timeline-workweek",
            text: displayName || this.l10n.getConstant("timelineWorkWeek"),
            cssClass: "e-views e-timeline-work-week"
          };
          break;
        case "timelinemonth":
          view = {
            align: "Right",
            showAlwaysInPopup: isItemInsidePopup,
            prefixIcon: "e-icon-timeline-month",
            text: displayName || this.l10n.getConstant("timelineMonth"),
            cssClass: "e-views e-timeline-month"
          };
          break;
        case "timelineyear":
          orientationClass = item.orientation === "Vertical" ? "vertical" : "horizontal";
          view = {
            align: "Right",
            showAlwaysInPopup: isItemInsidePopup,
            prefixIcon: "e-icon-timeline-year-" + orientationClass,
            text: displayName || this.l10n.getConstant("timelineYear"),
            cssClass: "e-views e-timeline-year"
          };
          break;
      }
      return view;
    };
    HeaderRenderer2.prototype.renderHeaderPopup = function() {
      var headerPopupEle = createElement("div", { className: HEADER_POPUP_CLASS });
      var headerCalendarEle = createElement("div", { className: HEADER_CALENDAR_CLASS });
      headerPopupEle.appendChild(headerCalendarEle);
      this.element.appendChild(headerPopupEle);
      this.headerPopup = new Popup(headerPopupEle, {
        actionOnScroll: "hide",
        targetType: "relative",
        relateTo: this.getPopUpRelativeElement(),
        position: { X: "left", Y: "bottom" },
        enableRtl: this.parent.enableRtl
      });
      var calendarView = this.getCalendarView();
      var isDisplayDate = this.parent.currentView === "Month" && !isNullOrUndefined(this.parent.activeViewOptions.displayDate) && !this.hasSelectedDate();
      this.headerCalendar = new Calendar({
        value: isDisplayDate ? this.parent.activeViewOptions.displayDate : this.parent.selectedDate,
        min: this.parent.minDate,
        max: this.parent.maxDate,
        firstDayOfWeek: this.parent.activeViewOptions.firstDayOfWeek,
        enableRtl: this.parent.enableRtl,
        locale: this.parent.locale,
        depth: calendarView,
        start: calendarView,
        calendarMode: this.parent.calendarMode,
        change: this.calendarChange.bind(this)
      });
      this.setCalendarTimezone();
      this.headerCalendar.appendTo(headerCalendarEle);
      this.headerPopup.hide();
    };
    HeaderRenderer2.prototype.calendarChange = function(args) {
      if (args.value.getTime() !== this.parent.selectedDate.getTime()) {
        var calendarDate = resetTime(new Date(args.value));
        this.parent.changeDate(calendarDate);
      }
      this.headerPopup.hide();
    };
    HeaderRenderer2.prototype.setCalendarTimezone = function() {
      if (this.headerCalendar) {
        this.headerCalendar.timezone = this.parent.timezone || this.parent.tzModule.getLocalTimezoneName();
      }
    };
    HeaderRenderer2.prototype.calculateViewIndex = function(args) {
      var target = closest(args.originalEvent.target, ".e-views");
      var views = [].slice.call(this.element.querySelectorAll(".e-views"));
      return views.indexOf(target);
    };
    HeaderRenderer2.prototype.toolbarClickHandler = function(args) {
      if (!args.item) {
        return;
      }
      var strClass = args.item.cssClass.replace("e-views ", "");
      var data;
      var isSameTime;
      var currentTime;
      switch (strClass) {
        case "e-date-range":
          if (!this.headerPopup) {
            this.renderHeaderPopup();
          }
          if (this.headerPopup.element.classList.contains(POPUP_OPEN)) {
            this.headerPopup.hide();
          } else {
            this.headerPopup.show();
          }
          break;
        case "e-day":
          this.parent.changeView("Day", args.originalEvent, void 0, this.calculateViewIndex(args));
          break;
        case "e-week":
          this.parent.changeView("Week", args.originalEvent, void 0, this.calculateViewIndex(args));
          break;
        case "e-work-week":
          this.parent.changeView("WorkWeek", args.originalEvent, void 0, this.calculateViewIndex(args));
          break;
        case "e-month":
          this.parent.changeView("Month", args.originalEvent, void 0, this.calculateViewIndex(args));
          break;
        case "e-year":
          this.parent.changeView("Year", args.originalEvent, void 0, this.calculateViewIndex(args));
          break;
        case "e-agenda":
          this.parent.changeView("Agenda", args.originalEvent, void 0, this.calculateViewIndex(args));
          break;
        case "e-month-agenda":
          this.parent.changeView("MonthAgenda", args.originalEvent, void 0, this.calculateViewIndex(args));
          break;
        case "e-timeline-day":
          this.parent.changeView("TimelineDay", args.originalEvent, void 0, this.calculateViewIndex(args));
          break;
        case "e-timeline-week":
          this.parent.changeView("TimelineWeek", args.originalEvent, void 0, this.calculateViewIndex(args));
          break;
        case "e-timeline-work-week":
          this.parent.changeView("TimelineWorkWeek", args.originalEvent, void 0, this.calculateViewIndex(args));
          break;
        case "e-timeline-month":
          this.parent.changeView("TimelineMonth", args.originalEvent, void 0, this.calculateViewIndex(args));
          break;
        case "e-timeline-year":
          this.parent.changeView("TimelineYear", args.originalEvent, void 0, this.calculateViewIndex(args));
          break;
        case "e-today":
          currentTime = resetTime(this.parent.getCurrentTime());
          if (this.parent.currentView === "Agenda" || this.parent.currentView === "MonthAgenda" || !this.parent.isSelectedDate(currentTime) || this.parent.currentView === "Month" && this.parent.activeViewOptions.displayDate && !this.hasSelectedDate() && resetTime(this.parent.activeViewOptions.displayDate) !== currentTime || this.parent.currentView === "Month" && this.parent.activeViewOptions.numberOfWeeks > 0 && !this.hasSelectedDate() && resetTime(firstDateOfMonth(this.parent.selectedDate)) !== currentTime) {
            this.parent.changeDate(currentTime, args.originalEvent);
          }
          break;
        case "e-prev":
          this.parent.changeDate(this.parent.activeView.getNextPreviousDate("previous"), args.originalEvent);
          break;
        case "e-next":
          this.parent.changeDate(this.parent.activeView.getNextPreviousDate("next"), args.originalEvent);
          break;
        case "e-add":
          isSameTime = this.parent.activeCellsData.startTime.getTime() === this.parent.activeCellsData.endTime.getTime();
          if (this.parent.activeCellsData && !isSameTime) {
            data = this.parent.activeCellsData;
          } else {
            var interval = this.parent.activeViewOptions.timeScale.interval;
            var slotCount = this.parent.activeViewOptions.timeScale.slotCount;
            var msInterval = interval * MS_PER_MINUTE / slotCount;
            var startTime = new Date(this.parent.selectedDate.getTime());
            var currentTime_1 = this.parent.getCurrentTime();
            startTime.setHours(currentTime_1.getHours(), Math.round(startTime.getMinutes() / msInterval) * msInterval, 0);
            var endTime = new Date(new Date(startTime.getTime()).setMilliseconds(startTime.getMilliseconds() + msInterval));
            data = { startTime, endTime, isAllDay: false };
          }
          this.parent.eventWindow.openEditor(extend(data, { cancel: false, event: args.originalEvent }), "Add");
          break;
      }
      if (isNullOrUndefined(this.toolbarObj)) {
        return;
      }
      var toolbarPopUp = this.toolbarObj.element.querySelector(".e-toolbar-pop");
      if (toolbarPopUp && args.item.type !== "Input") {
        toolbarPopUp.ej2_instances[0].hide({ name: "SlideUp", duration: 100 });
      }
    };
    HeaderRenderer2.prototype.hasSelectedDate = function() {
      var selectedTime = resetTime(this.parent.selectedDate).getTime();
      return selectedTime >= this.parent.activeView.getStartDate().getTime() && selectedTime <= this.parent.activeView.getEndDate().getTime();
    };
    HeaderRenderer2.prototype.getHeaderElement = function() {
      return this.toolbarObj.element;
    };
    HeaderRenderer2.prototype.updateHeaderItems = function(classType) {
      var prevNavEle = this.toolbarObj.element.querySelector(".e-prev");
      var nextNavEle = this.toolbarObj.element.querySelector(".e-next");
      var dateRangeEle = this.toolbarObj.element.querySelector(".e-date-range");
      if (prevNavEle) {
        if (classType === "add") {
          addClass([prevNavEle], HIDDEN_CLASS);
        } else {
          removeClass([prevNavEle], HIDDEN_CLASS);
        }
      }
      if (nextNavEle) {
        if (classType === "add") {
          addClass([nextNavEle], HIDDEN_CLASS);
        } else {
          removeClass([nextNavEle], HIDDEN_CLASS);
        }
      }
      if (dateRangeEle) {
        if (classType === "add") {
          addClass([dateRangeEle], TEXT_ELLIPSIS);
        } else {
          removeClass([dateRangeEle], TEXT_ELLIPSIS);
        }
      }
    };
    HeaderRenderer2.prototype.previousNextIconHandler = function() {
      var dates = this.parent.currentView === "Agenda" ? [this.parent.getCurrentViewDates()[0]] : this.parent.getCurrentViewDates();
      var prevNavEle = this.toolbarObj.element.querySelector("." + PREVIOUS_DATE_CLASS);
      var nextNavEle = this.toolbarObj.element.querySelector("." + NEXT_DATE_CLASS);
      var firstDate = new Date(dates[0].getTime());
      var lastDate = new Date(dates[dates.length - 1].getTime());
      if (this.parent.currentView === "WorkWeek" || this.parent.currentView === "TimelineWorkWeek") {
        firstDate = getWeekFirstDate(resetTime(this.parent.selectedDate), this.parent.firstDayOfWeek);
        lastDate = addDays(firstDate, 7 * this.parent.activeViewOptions.interval);
      } else if (this.parent.currentView === "Month") {
        var isCustomMonth = !isNullOrUndefined(this.parent.activeViewOptions.displayDate) || this.parent.activeViewOptions.numberOfWeeks > 0;
        firstDate = isCustomMonth ? this.parent.activeView.getStartDate() : firstDateOfMonth(this.parent.selectedDate);
        lastDate = isCustomMonth ? this.parent.activeView.getEndDate() : lastDateOfMonth(addMonths(firstDate, this.parent.activeViewOptions.interval - 1));
      }
      if (!isNullOrUndefined(prevNavEle)) {
        this.toolbarObj.enableItems(prevNavEle, firstDate > resetTime(this.parent.minDate));
      }
      if (!isNullOrUndefined(nextNavEle)) {
        this.toolbarObj.enableItems(nextNavEle, lastDate < resetTime(this.parent.maxDate));
      }
      this.setCalendarMinMaxDate();
    };
    HeaderRenderer2.prototype.getModuleName = function() {
      return "headerbar";
    };
    HeaderRenderer2.prototype.destroy = function() {
      if (this.headerPopup && !this.headerPopup.isDestroyed) {
        this.headerPopup.destroy();
        this.headerPopup = null;
      }
      if (this.headerCalendar && !this.headerCalendar.isDestroyed) {
        this.headerCalendar.destroy();
        this.headerCalendar = null;
      }
      if (this.toolbarObj && !this.toolbarObj.isDestroyed) {
        this.toolbarObj.destroy();
        this.removeEventListener();
        remove(this.element);
        this.toolbarObj = null;
      }
      this.element = null;
      this.parent = null;
      this.l10n = null;
    };
    return HeaderRenderer2;
  }()
);
var Scroll = (
  /** @class */
  function() {
    function Scroll2(parent) {
      this.parent = parent;
      this.addEventListener();
    }
    Scroll2.prototype.getModuleName = function() {
      return "scroll";
    };
    Scroll2.prototype.setWidth = function() {
      this.parent.element.style.width = formatUnit(this.parent.width);
    };
    Scroll2.prototype.setHeight = function() {
      this.parent.element.style.height = formatUnit(this.parent.height);
    };
    Scroll2.prototype.addEventListener = function() {
      this.parent.on(contentReady, this.setDimensions, this);
      this.parent.on(uiUpdate, this.onPropertyChanged, this);
    };
    Scroll2.prototype.removeEventListener = function() {
      this.parent.off(contentReady, this.setDimensions);
      this.parent.off(uiUpdate, this.onPropertyChanged);
    };
    Scroll2.prototype.setDimensions = function() {
      this.setWidth();
      this.setHeight();
      var data = { cssProperties: this.parent.getCssProperties(), module: this.getModuleName() };
      this.parent.notify(scrollUiUpdate, data);
    };
    Scroll2.prototype.onPropertyChanged = function() {
      this.setDimensions();
    };
    Scroll2.prototype.destroy = function() {
      this.removeEventListener();
    };
    return Scroll2;
  }()
);
var ScheduleTouch = (
  /** @class */
  function() {
    function ScheduleTouch2(parent) {
      this.parent = parent;
      this.element = this.parent.element.querySelector("." + TABLE_CONTAINER_CLASS);
      this.touchObj = new Touch(this.element, {
        scroll: this.scrollHandler.bind(this),
        swipe: this.swipeHandler.bind(this),
        tapHold: this.tapHoldHandler.bind(this),
        swipeSettings: { swipeThresholdDistance: 1 }
      });
      EventHandler.add(this.element, "transitionend", this.onTransitionEnd, this);
      this.touchLeftDirection = this.parent.enableRtl ? "Right" : "Left";
      this.touchRightDirection = this.parent.enableRtl ? "Left" : "Right";
    }
    ScheduleTouch2.prototype.scrollHandler = function(e) {
      if (this.parent.currentView === "Agenda" || this.parent.uiStateValues.action || !this.parent.allowSwiping || e.originalEvent && e.originalEvent.target && (e.originalEvent.target.classList.contains(APPOINTMENT_CLASS) || closest(e.originalEvent.target, "." + APPOINTMENT_CLASS)) && !this.parent.isAdaptive) {
        return;
      }
      if (!this.timeStampStart) {
        this.timeStampStart = Date.now();
      }
      if (this.element.classList.contains(TRANSLATE_CLASS)) {
        this.onTransitionEnd();
      }
      if (e.scrollDirection === "Left" || e.scrollDirection === "Right") {
        var args = { requestType: "dateNavigate", cancel: false, event: e.originalEvent };
        this.parent.trigger(actionBegin, args);
        if (args.cancel) {
          return;
        }
        var scrollDiv = this.element.querySelector("." + CONTENT_WRAP_CLASS);
        if (scrollDiv && scrollDiv.scrollWidth > scrollDiv.clientWidth) {
          return;
        } else {
          this.isScrollTriggered = true;
          e.originalEvent.preventDefault();
          e.originalEvent.stopPropagation();
        }
      }
      if (e.scrollDirection === this.touchLeftDirection) {
        if (!this.nextPanel) {
          this.renderPanel(NEXT_PANEL_CLASS, "next");
          this.nextPanel = {
            element: this.parent.activeView.getPanel(),
            selectedDate: new Date(this.parent.selectedDate.getTime()),
            renderDates: this.parent.activeView.renderDates,
            colLevels: this.parent.activeView.colLevels
          };
          this.setDimensions(this.nextPanel.element);
        }
        var x = this.parent.enableRtl ? e.distanceX : -e.distanceX;
        this.element.style.transform = "translatex(" + (this.getTranslateX(this.element) + x) + "px)";
      } else if (e.scrollDirection === this.touchRightDirection) {
        var prevWidth = 0;
        if (!this.previousPanel) {
          this.renderPanel(PREVIOUS_PANEL_CLASS, "previous");
          this.previousPanel = {
            element: this.parent.activeView.getPanel(),
            selectedDate: new Date(this.parent.selectedDate.getTime()),
            renderDates: this.parent.activeView.renderDates,
            colLevels: this.parent.activeView.colLevels
          };
          this.setDimensions(this.previousPanel.element);
          prevWidth = this.previousPanel.element.offsetWidth;
        }
        var x = this.parent.enableRtl ? prevWidth - e.distanceX : -prevWidth + e.distanceX;
        this.element.style.transform = "translatex(" + (this.getTranslateX(this.element) + x) + "px)";
      }
    };
    ScheduleTouch2.prototype.swipeHandler = function(e) {
      if (!this.isScrollTriggered || this.parent.uiStateValues.action || !this.parent.allowSwiping) {
        return;
      }
      this.isScrollTriggered = false;
      var swipeDate = e.swipeDirection === "Left" ? this.parent.activeView.renderDates[0] : this.parent.activeView.renderDates.slice(-1)[0];
      if (e.swipeDirection === "Left" && swipeDate < this.parent.maxDate || e.swipeDirection === "Right" && swipeDate >= this.parent.minDate) {
        var time = Date.now() - this.timeStampStart;
        var offsetDist = e.distanceX * (Browser.isDevice ? 6 : 1.66);
        if (offsetDist > time || e.distanceX > this.parent.element.offsetWidth / 2) {
          this.swapPanels(e.swipeDirection);
          if (offsetDist > time && e.distanceX > this.parent.element.offsetWidth / 2) {
            this.element.style.transitionDuration = (Browser.isDevice ? e.distanceX : offsetDist) / time / 10 + "s";
          }
          this.confirmSwipe(e.swipeDirection);
        } else {
          this.cancelSwipe();
        }
        var args = { requestType: "dateNavigate", cancel: false, event: e.originalEvent };
        this.parent.trigger(actionComplete, args);
      } else {
        this.cancelSwipe();
      }
      this.timeStampStart = null;
    };
    ScheduleTouch2.prototype.tapHoldHandler = function(e) {
      var target = closest(e.originalEvent.target, "." + APPOINTMENT_CLASS);
      if (!isNullOrUndefined(target) && this.parent.isAdaptive) {
        this.parent.quickPopup.tapHoldEventPopup(e.originalEvent);
        return;
      }
    };
    ScheduleTouch2.prototype.renderPanel = function(clsName, nextPrevType) {
      if (!this.currentPanel) {
        this.currentPanel = {
          element: this.parent.activeView.getPanel(),
          selectedDate: new Date(this.parent.selectedDate.getTime()),
          renderDates: this.parent.activeView.renderDates,
          colLevels: this.parent.activeView.colLevels
        };
        this.setDimensions(this.currentPanel.element);
      } else {
        this.parent.setProperties({ selectedDate: this.currentPanel.selectedDate }, true);
      }
      this.parent.setProperties({ selectedDate: this.parent.activeView.getNextPreviousDate(nextPrevType) }, true);
      if (this.parent.headerModule) {
        this.parent.headerModule.setCalendarDate(this.parent.selectedDate);
      }
      this.parent.activeView.getRenderDates();
      this.parent.activeView.renderLayout(clsName);
    };
    ScheduleTouch2.prototype.swapPanels = function(direction) {
      if (direction === this.touchLeftDirection) {
        var temp = this.nextPanel;
        this.nextPanel = this.currentPanel;
        this.currentPanel = temp;
      } else {
        var temp = this.previousPanel;
        this.previousPanel = this.currentPanel;
        this.currentPanel = temp;
      }
    };
    ScheduleTouch2.prototype.confirmSwipe = function(swipeDirection) {
      var _this = this;
      var previousDate = swipeDirection === this.touchLeftDirection ? this.nextPanel.selectedDate : this.previousPanel.selectedDate;
      var args = {
        action: "date",
        cancel: false,
        previousDate,
        currentDate: this.currentPanel.selectedDate
      };
      this.parent.trigger(navigating, args, function(navArgs) {
        if (navArgs.cancel) {
          _this.swapPanels(swipeDirection);
          _this.cancelSwipe();
        } else {
          _this.parent.activeView.setPanel(_this.currentPanel.element);
          _this.parent.setProperties({ selectedDate: _this.currentPanel.selectedDate }, true);
          var translateX = void 0;
          if (_this.parent.enableRtl) {
            translateX = swipeDirection === _this.touchLeftDirection ? _this.previousPanel ? _this.previousPanel.element.offsetLeft : _this.currentPanel.element.offsetWidth : 0;
          } else {
            translateX = swipeDirection === _this.touchLeftDirection ? -_this.currentPanel.element.offsetLeft : 0;
          }
          _this.parent.activeView.renderDates = _this.currentPanel.renderDates;
          _this.parent.activeView.colLevels = _this.currentPanel.colLevels;
          addClass([_this.element], TRANSLATE_CLASS);
          _this.element.style.transform = "translatex(" + translateX + "px)";
          if (_this.parent.headerModule) {
            _this.parent.headerModule.updateDateRange();
          }
          _this.parent.renderTemplates();
          _this.parent.crudModule.refreshDataManager();
        }
      });
    };
    ScheduleTouch2.prototype.cancelSwipe = function() {
      this.parent.activeView.setPanel(this.currentPanel.element);
      this.parent.setProperties({ selectedDate: this.currentPanel.selectedDate }, true);
      this.parent.activeView.renderDates = this.currentPanel.renderDates;
      this.parent.activeView.colLevels = this.currentPanel.colLevels;
      addClass([this.element], TRANSLATE_CLASS);
      var prevWidth = this.previousPanel ? this.previousPanel.element.offsetWidth : 0;
      this.element.style.transform = "translatex(" + (this.parent.enableRtl ? prevWidth : -this.currentPanel.element.offsetLeft) + "px)";
    };
    ScheduleTouch2.prototype.onTransitionEnd = function() {
      removeClass([this.element], TRANSLATE_CLASS);
      this.element.style.transitionDuration = "";
      this.element.style.transform = "";
      if (this.previousPanel) {
        remove(this.previousPanel.element);
        this.previousPanel = null;
        removeClass([this.currentPanel.element], PREVIOUS_PANEL_CLASS);
        addClass([this.currentPanel.element], CURRENT_PANEL_CLASS);
      }
      if (this.nextPanel) {
        remove(this.nextPanel.element);
        this.nextPanel = null;
        removeClass([this.currentPanel.element], NEXT_PANEL_CLASS);
        addClass([this.currentPanel.element], CURRENT_PANEL_CLASS);
      }
      this.currentPanel = null;
      this.parent.activeView.getPanel().style.width = "";
    };
    ScheduleTouch2.prototype.getTranslateX = function(element2) {
      var style = window.getComputedStyle(element2);
      return new WebKitCSSMatrix(style.webkitTransform).m41;
    };
    ScheduleTouch2.prototype.setDimensions = function(element2) {
      element2.style.width = this.parent.element.clientWidth + "px";
    };
    ScheduleTouch2.prototype.resetValues = function() {
      this.currentPanel = null;
      this.previousPanel = null;
      this.nextPanel = null;
      this.timeStampStart = null;
      this.element.style.transform = "";
      this.element.style.transitionDuration = "";
      removeChildren(this.element);
      removeClass([this.element], TRANSLATE_CLASS);
    };
    ScheduleTouch2.prototype.destroy = function() {
      if (this.touchObj) {
        this.touchObj.destroy();
        this.touchObj = null;
      }
      EventHandler.remove(this.element, "transitionend", this.onTransitionEnd);
      this.resetValues();
    };
    return ScheduleTouch2;
  }()
);
var KeyboardInteraction = (
  /** @class */
  function() {
    function KeyboardInteraction2(parent) {
      this.selectedCells = [];
      this.keyConfigs = {
        downArrow: "downarrow",
        upArrow: "uparrow",
        rightArrow: "rightarrow",
        leftArrow: "leftarrow",
        shiftDownArrow: "shift+downarrow",
        shiftUpArrow: "shift+uparrow",
        shiftRightArrow: "shift+rightarrow",
        shiftLeftArrow: "shift+leftarrow",
        ctrlLeftArrow: "ctrl+leftarrow",
        ctrlRightArrow: "ctrl+rightarrow",
        altOne: "alt+1",
        altTwo: "alt+2",
        altThree: "alt+3",
        altFour: "alt+4",
        altFive: "alt+5",
        altSix: "alt+6",
        altSeven: "alt+7",
        altEight: "alt+8",
        altNine: "alt+9",
        enter: "enter",
        escape: "escape",
        delete: "delete",
        backspace: "backspace",
        home: "home",
        pageUp: "pageup",
        pageDown: "pagedown",
        tab: "tab",
        shiftTab: "shift+tab",
        ctrlShiftUpArrow: "ctrl+shift+uparrow",
        ctrlShiftDownArrow: "ctrl+shift+downarrow",
        ctrlShiftLeftArrow: "ctrl+shift+leftarrow",
        ctrlShiftRightArrow: "ctrl+shift+rightarrow"
      };
      this.parent = parent;
      this.parent.element.tabIndex = this.parent.element.tabIndex === -1 ? 0 : this.parent.element.tabIndex;
      this.keyboardModule = new KeyboardEvents(this.parent.element, {
        keyAction: this.keyActionHandler.bind(this),
        keyConfigs: this.keyConfigs,
        eventName: "keydown"
      });
      this.addEventListener();
    }
    KeyboardInteraction2.prototype.keyActionHandler = function(e) {
      switch (e.action) {
        case "downArrow":
        case "shiftDownArrow":
          this.processDown(e, e.shiftKey);
          break;
        case "upArrow":
        case "shiftUpArrow":
          this.processUp(e, e.shiftKey);
          break;
        case "leftArrow":
        case "shiftLeftArrow":
          this.processLeft(e, e.shiftKey);
          break;
        case "rightArrow":
        case "shiftRightArrow":
          this.processRight(e, e.shiftKey);
          break;
        case "ctrlLeftArrow":
          this.parent.changeDate(this.parent.activeView.getNextPreviousDate("previous"), e);
          if (this.parent.headerModule) {
            this.parent.headerModule.element.querySelector(".e-prev button").focus();
          }
          break;
        case "ctrlRightArrow":
          this.parent.changeDate(this.parent.activeView.getNextPreviousDate("next"), e);
          if (this.parent.headerModule) {
            this.parent.headerModule.element.querySelector(".e-next button").focus();
          }
          break;
        case "altOne":
        case "altTwo":
        case "altThree":
        case "altFour":
        case "altFive":
        case "altSix":
        case "altSeven":
        case "altEight":
        case "altNine":
          this.processViewNavigation(e);
          break;
        case "enter":
          this.processEnter(e);
          break;
        case "home":
          this.focusFirstCell();
          break;
        case "tab":
        case "shiftTab":
          this.processTab(e, e.shiftKey);
          break;
        case "delete":
        case "backspace":
          this.processDelete(e);
          break;
        case "ctrlShiftUpArrow":
        case "ctrlShiftDownArrow":
        case "ctrlShiftLeftArrow":
        case "ctrlShiftRightArrow":
          this.processCtrlShiftNavigationArrows(e);
          break;
        case "escape":
          this.processEscape(e);
          break;
        case "fTwelve":
          if (this.parent.allowInline && this.parent.inlineModule) {
            e.preventDefault();
            this.processFTwelve(e);
          }
          break;
      }
    };
    KeyboardInteraction2.prototype.processFTwelve = function(e) {
      var target = e.target;
      if (target.classList.contains(WORK_CELLS_CLASS) || target.classList.contains(ALLDAY_CELLS_CLASS)) {
        this.parent.activeCellsData = this.getSelectedElements(target);
        var args = extend(this.parent.activeCellsData, { cancel: false, event: e });
        var inlineArgs = {
          element: args.element,
          groupIndex: args.groupIndex,
          type: "Cell"
        };
        this.parent.notify(inlineClick, inlineArgs);
      }
      if (target.classList.contains(APPOINTMENT_CLASS)) {
        target.click();
        return;
      }
    };
    KeyboardInteraction2.prototype.addEventListener = function() {
      this.parent.on(cellMouseDown, this.onCellMouseDown, this);
    };
    KeyboardInteraction2.prototype.removeEventListener = function() {
      this.parent.off(cellMouseDown, this.onCellMouseDown);
    };
    KeyboardInteraction2.prototype.onCellMouseDown = function(e) {
      if (e.event.shiftKey) {
        return;
      }
      this.initialTarget = this.getClosestCell(e.event);
      if (this.parent.activeViewOptions.readonly || this.parent.currentView === "MonthAgenda" || !this.initialTarget) {
        return;
      }
      if (e.event.target.classList.contains(WORK_CELLS_CLASS) && e.event.which !== 3) {
        this.parent.removeSelectedClass();
        EventHandler.add(this.parent.getContentTable(), "mousemove", this.onMouseSelection, this);
        EventHandler.add(this.parent.getContentTable(), "mouseup", this.onMoveUp, this);
      }
      if (e.event.target.classList.contains(ALLDAY_CELLS_CLASS) && e.event.which !== 3) {
        this.parent.removeSelectedClass();
        var allDayRow = this.parent.getAllDayRow();
        EventHandler.add(allDayRow, "mousemove", this.onMouseSelection, this);
        EventHandler.add(allDayRow, "mouseup", this.onMoveUp, this);
      }
    };
    KeyboardInteraction2.prototype.onMouseSelection = function(e) {
      var appointments = [].slice.call(this.parent.element.querySelectorAll("." + APPOINTMENT_CLASS));
      addClass(appointments, "e-allow-select");
      var selectionEdges = this.parent.boundaryValidation(e.pageY, e.pageX);
      if (selectionEdges.bottom || selectionEdges.top || selectionEdges.left || selectionEdges.right) {
        var parent_1 = this.parent.element.querySelector("." + CONTENT_WRAP_CLASS);
        var yInBounds = parent_1.offsetHeight <= parent_1.scrollHeight && parent_1.scrollTop >= 0 && parent_1.scrollTop + parent_1.offsetHeight <= parent_1.scrollHeight;
        var xInBounds = parent_1.offsetWidth <= parent_1.scrollWidth && parent_1.scrollLeft >= 0 && parent_1.scrollLeft + parent_1.offsetWidth <= parent_1.scrollWidth;
        if (yInBounds && (selectionEdges.top || selectionEdges.bottom)) {
          parent_1.scrollTop += selectionEdges.top ? -e.target.offsetHeight : e.target.offsetHeight;
        }
        if (xInBounds && (selectionEdges.left || selectionEdges.right)) {
          parent_1.scrollLeft += selectionEdges.left ? -e.target.offsetWidth : e.target.offsetWidth;
        }
      }
      var target = this.getClosestCell(e);
      if (target) {
        this.selectCells(true, target);
      }
    };
    KeyboardInteraction2.prototype.getClosestCell = function(e) {
      return closest(e.target, "." + WORK_CELLS_CLASS + ",." + ALLDAY_CELLS_CLASS);
    };
    KeyboardInteraction2.prototype.onMoveUp = function(e) {
      var _this = this;
      var appointments = [].slice.call(this.parent.element.querySelectorAll("." + APPOINTMENT_CLASS));
      removeClass(appointments, "e-allow-select");
      if (e.target.classList.contains(WORK_CELLS_CLASS)) {
        EventHandler.remove(this.parent.getContentTable(), "mousemove", this.onMouseSelection);
        EventHandler.remove(this.parent.getContentTable(), "mouseup", this.onMoveUp);
      }
      if (e.target.classList.contains(ALLDAY_CELLS_CLASS)) {
        var allDayRow = this.parent.getAllDayRow();
        EventHandler.remove(allDayRow, "mousemove", this.onMouseSelection);
        EventHandler.remove(allDayRow, "mouseup", this.onMoveUp);
      }
      if (this.isPreventAction(e)) {
        return;
      }
      var queryStr = "." + WORK_CELLS_CLASS + ",." + ALLDAY_CELLS_CLASS + ",." + HEADER_CELLS_CLASS;
      var target = closest(e.target, queryStr);
      if (this.parent.currentView === "TimelineYear" && target.classList.contains(OTHERMONTH_CLASS)) {
        return;
      }
      this.parent.activeCellsData = this.getSelectedElements(target);
      var cellData = {};
      if (this.parent.eventWindow) {
        this.parent.eventWindow.convertToEventData(this.parent.activeCellsData, cellData);
      }
      var selectedCells = this.parent.getSelectedCells();
      var args = {
        data: cellData,
        element: this.parent.activeCellsData.element,
        event: e,
        requestType: cellSelect,
        showQuickPopup: false
      };
      this.parent.trigger(select, args, function(selectArgs) {
        var isPopupShow = selectArgs.showQuickPopup || _this.parent.quickInfoOnSelectionEnd;
        if (isPopupShow && selectedCells.length > 1) {
          var cellArgs = extend(_this.parent.activeCellsData, { cancel: false, event: e, name: "cellClick" });
          _this.parent.notify(cellClick, cellArgs);
        }
      });
    };
    KeyboardInteraction2.prototype.processEnter = function(e) {
      if (this.parent.activeViewOptions.readonly && !e.target.classList.contains(APPOINTMENT_CLASS) || this.isPreventAction(e)) {
        return;
      }
      if (this.parent.currentView === "TimelineYear" && e.target.classList.contains(OTHERMONTH_CLASS)) {
        return;
      }
      var target = e.target;
      if (closest(target, "." + POPUP_WRAPPER_CLASS)) {
        if (target.classList.contains(QUICK_POPUP_EVENT_DETAILS_CLASS) || target.classList.contains(EVENT_CREATE_CLASS) || target.classList.contains(EDIT_EVENT_CLASS) || target.classList.contains(DELETE_EVENT_CLASS) || target.classList.contains(CLOSE_CLASS)) {
          target.click();
          e.preventDefault();
        } else if (target.classList.contains(SUBJECT_CLASS)) {
          this.parent.element.querySelector("." + EVENT_CREATE_CLASS).click();
          e.preventDefault();
        }
        return;
      }
      if (target.classList.contains(RESOURCE_CELLS_CLASS) && target.classList.contains(RESOURCE_PARENT_CLASS)) {
        var resourceIcon = target.querySelector("." + RESOURCE_TREE_ICON_CLASS);
        if (resourceIcon) {
          resourceIcon.click();
        }
        return;
      }
      if (target.classList.contains(WORK_CELLS_CLASS) || target.classList.contains(ALLDAY_CELLS_CLASS)) {
        this.parent.activeCellsData = this.getSelectedElements(target);
        var args = extend(this.parent.activeCellsData, { cancel: false, event: e });
        if (this.parent.allowInline) {
          var inlineArgs = {
            element: args.element,
            groupIndex: args.groupIndex,
            type: "Cell"
          };
          this.parent.notify(inlineClick, inlineArgs);
        } else {
          if (this.parent.currentView === "Year") {
            target.click();
          } else {
            this.parent.notify(cellClick, args);
          }
        }
        return;
      }
      if (target.classList.contains(INLINE_SUBJECT_CLASS) && this.parent.inlineModule) {
        this.parent.inlineModule.inlineCrudActions(target);
        return;
      }
      if (target.classList.contains(APPOINTMENT_CLASS) || target.classList.contains(MORE_EVENT_CLOSE_CLASS) || target.classList.contains(ALLDAY_APPOINTMENT_SECTION_CLASS) || target.classList.contains(MORE_INDICATOR_CLASS)) {
        target.click();
        return;
      }
      if (target.classList.contains(MORE_EVENT_HEADER_DATE_CLASS)) {
        this.parent.setProperties({ selectedDate: this.parent.getDateFromElement(target) }, true);
        this.parent.changeView(this.parent.getNavigateView(), e);
        this.processEscape(e);
        return;
      }
    };
    KeyboardInteraction2.prototype.getSelectedElements = function(target) {
      var cellDetails;
      if (this.selectedCells.length > 1 && target.classList.contains(SELECTED_CELL_CLASS)) {
        var start = this.parent.getCellDetails(this.selectedCells[0]);
        var end = this.parent.getCellDetails(this.selectedCells.slice(-1)[0]);
        start.endTime = end.endTime;
        start.element = target;
        cellDetails = start;
      } else {
        cellDetails = this.parent.getCellDetails(target);
      }
      return cellDetails;
    };
    KeyboardInteraction2.prototype.getCells = function(isInverseTable, start, end) {
      var tableEle = this.parent.getContentTable();
      var isTimelineYear = this.parent.currentView === "TimelineYear";
      var query = isTimelineYear && !isInverseTable ? "." + WORK_CELLS_CLASS + ":not(." + OTHERMONTH_CLASS + ")" : "td";
      var cells = [].slice.call(tableEle.querySelectorAll(query));
      var maxRow = tableEle.rows.length;
      var maxColumn = tableEle.rows[0].cells.length;
      if (start && start.classList.contains(ALLDAY_CELLS_CLASS)) {
        var allDayRow = this.parent.getAllDayRow();
        cells = [].slice.call(allDayRow.cells);
        maxRow = 1;
        maxColumn = allDayRow.cells.length;
      }
      var startIndex = cells.indexOf(start);
      var endIndex = cells.indexOf(end);
      var inverseCells = [];
      if (isInverseTable) {
        for (var i = 0; i < maxColumn; i++) {
          for (var j = 0; j < maxRow; j++) {
            var cell = cells[maxColumn * j + i];
            if (isTimelineYear && cell.classList.contains(OTHERMONTH_CLASS)) {
              continue;
            }
            inverseCells.push(cell);
          }
        }
        startIndex = inverseCells.indexOf(start);
        endIndex = inverseCells.indexOf(end);
      }
      if (startIndex > endIndex) {
        var temp = startIndex;
        startIndex = endIndex;
        endIndex = temp;
      }
      var sCells = isInverseTable ? inverseCells : cells;
      return sCells.slice(startIndex, endIndex + 1);
    };
    KeyboardInteraction2.prototype.focusFirstCell = function() {
      if (this.parent.currentView === "Agenda") {
        var focusCell = this.parent.getContentTable().querySelector("." + AGENDA_CELLS_CLASS);
        focusCell.setAttribute("tabindex", "0");
        focusCell.focus();
        return;
      }
      this.parent.eventBase.removeSelectedAppointmentClass();
      if (this.parent.activeView.isTimelineView() && this.parent.currentView !== "TimelineYear") {
        var cell = this.parent.element.querySelector("." + CONTENT_TABLE_CLASS + " tr:not(." + HIDDEN_CLASS + ") ." + WORK_CELLS_CLASS + ":not(." + RESOURCE_GROUP_CELLS_CLASS + ")");
        this.selectCells(false, cell);
      } else if (this.parent.currentView.indexOf("Year") > -1) {
        var query = "." + WORK_CELLS_CLASS + ":not(." + OTHERMONTH_CLASS + "):not(." + RESOURCE_GROUP_CELLS_CLASS + ")";
        var isVerticalYear = this.parent.currentView === "TimelineYear" && this.parent.activeViewOptions.orientation === "Vertical";
        query += isVerticalYear ? '[data-date="' + this.parent.activeView.startDate().getTime() + '"]' : "";
        this.selectCells(false, this.parent.element.querySelector(query));
      } else {
        this.selectCells(false, this.parent.getWorkCellElements()[0]);
      }
    };
    KeyboardInteraction2.prototype.isInverseTableSelect = function() {
      return this.parent.activeView.isInverseTableSelect;
    };
    KeyboardInteraction2.prototype.selectCells = function(isMultiple, targetCell) {
      var _this = this;
      this.parent.removeSelectedClass();
      var target = targetCell instanceof Array ? targetCell.slice(-1)[0] : targetCell;
      if (isMultiple) {
        var initialId_1;
        var views_1 = ["Day", "Week", "WorkWeek", "TimelineDay", "TimelineWeek", "TimelineWorkWeek", "TimelineMonth", "TimelineYear"];
        var args = { element: targetCell, requestType: "mousemove", allowMultipleRow: true };
        this.parent.inlineModule.removeInlineAppointmentElement();
        this.parent.trigger(select, args, function(selectArgs) {
          var allowMultipleRow = !selectArgs.allowMultipleRow || !_this.parent.allowMultiRowSelection;
          if (allowMultipleRow) {
            var isTimelineYear = _this.parent.currentView === "TimelineYear";
            if (isTimelineYear && _this.parent.activeViewOptions.orientation === "Horizontal" || _this.parent.currentView === "Month") {
              var isGroupYear = isTimelineYear && _this.parent.activeViewOptions.group.resources.length > 0;
              target = isGroupYear ? _this.initialTarget : _this.initialTarget.parentElement.children[target.cellIndex];
            } else if (views_1.indexOf(_this.parent.currentView) > -1) {
              target = target.parentElement.children[_this.initialTarget.cellIndex];
            }
          }
          var selectedCells = _this.getCells(_this.isInverseTableSelect(), _this.initialTarget, target);
          if (_this.parent.activeViewOptions.group.resources.length > 0) {
            initialId_1 = _this.initialTarget.getAttribute("data-group-index");
            var resourceSelectedCells = [];
            for (var _i = 0, selectedCells_1 = selectedCells; _i < selectedCells_1.length; _i++) {
              var cell = selectedCells_1[_i];
              if (cell.getAttribute("data-group-index") === initialId_1) {
                resourceSelectedCells.push(cell);
              }
            }
            selectedCells = resourceSelectedCells;
          }
          if (!_this.parent.allowMultiCellSelection) {
            selectedCells = [_this.initialTarget];
          }
          _this.selectedCells = selectedCells;
          if (selectedCells.length > 2 && !target.classList.contains(ALLDAY_CELLS_CLASS)) {
            var allDayCells = _this.getAllDayCells(selectedCells);
            if (_this.parent.activeViewOptions.group.resources.length > 0) {
              var resourceAllDayCells = [];
              for (var _a = 0, allDayCells_1 = allDayCells; _a < allDayCells_1.length; _a++) {
                var cell = allDayCells_1[_a];
                if (cell.getAttribute("data-group-index") === initialId_1) {
                  resourceAllDayCells.push(cell);
                }
              }
              allDayCells = resourceAllDayCells;
            }
            selectedCells = selectedCells.concat(allDayCells);
          }
          if (target.getAttribute("data-group-index") !== initialId_1 && _this.parent.activeViewOptions.group.resources.length > 0) {
            target = _this.selectedCells[_this.selectedCells.length - 1];
          }
          _this.parent.addSelectedClass(selectedCells, target);
        });
      } else {
        var args = {
          element: target,
          requestType: cellSelect
        };
        this.parent.trigger(select, args, function() {
          _this.initialTarget = target;
          _this.selectedCells = [target];
          _this.parent.addSelectedClass([target], target);
        });
      }
    };
    KeyboardInteraction2.prototype.selectAppointment = function(isReverse, target) {
      var appointments = this.getAppointmentElements();
      if (appointments.length < 0) {
        return;
      }
      this.parent.eventBase.removeSelectedAppointmentClass();
      var nextAppEle;
      if (target.classList.contains(APPOINTMENT_CLASS)) {
        var targetIndex = appointments.indexOf(target);
        nextAppEle = appointments[isReverse ? targetIndex - 1 : targetIndex + 1];
      } else {
        nextAppEle = isReverse ? appointments[appointments.length - 1] : appointments[0];
      }
      if (nextAppEle) {
        this.parent.eventBase.addSelectedAppointments([nextAppEle], true);
        nextAppEle.focus();
        addClass([nextAppEle], AGENDA_SELECTED_CELL);
      }
    };
    KeyboardInteraction2.prototype.selectAppointmentElementFromWorkCell = function(isReverse, target) {
      var _this = this;
      this.parent.eventBase.removeSelectedAppointmentClass();
      this.parent.removeSelectedClass();
      if (target.classList.contains(WORK_CELLS_CLASS) || target.classList.contains(ALLDAY_CELLS_CLASS)) {
        var appointmentElements_1 = this.getUniqueAppointmentElements();
        var filteredElements_1 = [];
        var selectedDate_1 = this.parent.getDateFromElement(target).getTime();
        var selectedSeriesEvents = this.parent.eventsProcessed.filter(function(eventObject) {
          return !isReverse ? eventObject[_this.parent.eventFields.startTime].getTime() >= selectedDate_1 : eventObject[_this.parent.eventFields.startTime].getTime() <= selectedDate_1;
        });
        selectedSeriesEvents.filter(function(event) {
          appointmentElements_1.filter(function(element2) {
            if (JSON.stringify(event.Guid) === JSON.stringify(element2.getAttribute("data-guid"))) {
              filteredElements_1.push(element2);
            }
          });
        });
        if (filteredElements_1.length > 0) {
          var selectedElement = isReverse ? filteredElements_1[filteredElements_1.length - 1] : filteredElements_1[0];
          var focusElements = this.getAppointmentElementsByGuid(selectedElement.getAttribute("data-guid"));
          this.parent.eventBase.addSelectedAppointments(focusElements, true);
          focusElements[focusElements.length - 1].focus();
        }
      }
    };
    KeyboardInteraction2.prototype.getAllDayCells = function(cells) {
      var allDayRow = this.parent.getAllDayRow();
      if (!allDayRow) {
        return [];
      }
      var startCell = cells[0];
      var endCell = cells[cells.length - 1];
      var start = this.parent.getCellDetails(startCell);
      var end = this.parent.getCellDetails(endCell);
      if (end.endTime.getTime() - start.startTime.getTime() >= MS_PER_DAY) {
        var allDayCells = [].slice.call(allDayRow.cells);
        return allDayCells.slice(startCell.cellIndex, endCell.cellIndex + 1);
      }
      return [];
    };
    KeyboardInteraction2.prototype.getAppointmentElements = function() {
      return [].slice.call(this.parent.element.querySelectorAll("." + APPOINTMENT_CLASS));
    };
    KeyboardInteraction2.prototype.getAppointmentElementsByGuid = function(guid) {
      return [].slice.call(this.parent.element.querySelectorAll('div[data-guid="' + guid + '"]'));
    };
    KeyboardInteraction2.prototype.getUniqueAppointmentElements = function() {
      var appointments = this.getAppointmentElements();
      var appointmentElements = [];
      appointments.map(function(value) {
        return value.getAttribute("data-guid");
      }).filter(function(value, index, self2) {
        if (self2.indexOf(value) === index) {
          appointmentElements.push(appointments[parseInt(index.toString(), 10)]);
        }
      });
      return appointmentElements;
    };
    KeyboardInteraction2.prototype.getWorkCellFromAppointmentElement = function(target) {
      var selectedObject = this.parent.eventBase.getEventByGuid(target.getAttribute("data-guid"));
      return this.parent.eventBase.selectWorkCellByTime([selectedObject]);
    };
    KeyboardInteraction2.prototype.processViewNavigation = function(e) {
      var index = parseInt(e.key, 10) - 1;
      if (index < this.parent.views.length) {
        var view = this.parent.viewCollections[parseInt(index.toString(), 10)].option;
        this.parent.changeView(view, e, void 0, index);
        if (this.parent.headerModule) {
          this.parent.headerModule.element.querySelector(".e-active-view button").focus();
        }
      }
    };
    KeyboardInteraction2.prototype.cancelUpDownAction = function(isTimelineYear) {
      var isVerticalYear = isTimelineYear && this.parent.activeViewOptions.orientation === "Vertical";
      var isGroup = this.parent.activeViewOptions.group.resources.length > 0;
      if (isVerticalYear && isGroup || isTimelineYear && this.initialTarget.classList.contains(OTHERMONTH_CLASS)) {
        return true;
      }
      if (this.parent.activeView.isTimelineView() && !isTimelineYear || this.parent.currentView === "MonthAgenda") {
        return true;
      }
      return false;
    };
    KeyboardInteraction2.prototype.processUp = function(e, isMultiple) {
      var isTimelineYear = this.parent.currentView === "TimelineYear";
      if (isMultiple && this.cancelUpDownAction(isTimelineYear)) {
        return;
      }
      var target = e.target;
      var selectedElements = this.parent.getSelectedCells();
      var selectedEventElements = this.parent.eventBase.getSelectedAppointments();
      var moreEventWrapper = this.parent.element.querySelector("." + MORE_POPUP_WRAPPER_CLASS);
      var quickPopupWrapper = this.getQuickPopupElement();
      if (selectedElements.length > 0 && !e.target.classList.contains(WORK_CELLS_CLASS)) {
        target = selectedElements[selectedElements.length - 1];
      }
      if (selectedEventElements.length > 0 && !moreEventWrapper.classList.contains(POPUP_OPEN) && !quickPopupWrapper.classList.contains(POPUP_OPEN) && ["Day", "Week", "WorkWeek", "Month"].indexOf(this.parent.currentView) !== -1) {
        target = this.getWorkCellFromAppointmentElement(selectedEventElements[selectedEventElements.length - 1]);
        this.parent.eventBase.removeSelectedAppointmentClass();
      }
      if (!target) {
        return;
      }
      if (target.classList.contains(WORK_CELLS_CLASS) && !this.parent.element.querySelector("." + POPUP_OPEN)) {
        var tableRows = this.parent.getTableRows();
        var curRowIndex = tableRows.indexOf(target.parentElement);
        var targetCell = void 0;
        if (isTimelineYear && isMultiple && this.parent.activeViewOptions.group.resources.length === 0) {
          targetCell = this.isInverseTableSelect() ? this.getVerticalUpDownCell(tableRows, target, curRowIndex, true) : this.getHorizontalUpDownCell(tableRows, target, curRowIndex, true);
        }
        if ((curRowIndex > 0 || targetCell) && curRowIndex < tableRows.length) {
          targetCell = targetCell ? targetCell : tableRows[curRowIndex - 1].cells[target.cellIndex];
          if (this.parent.currentView === "Year" && targetCell.classList.contains(OTHERMONTH_CLASS)) {
            if (this.parent.activeView.getStartDate().getTime() < +targetCell.getAttribute("data-date")) {
              targetCell = this.getYearUpDownCell(tableRows, curRowIndex - 1, target.cellIndex, true);
            } else {
              return;
            }
          }
          this.selectCells(isMultiple, targetCell);
        }
      } else if (this.parent.currentView === "Agenda" || this.parent.currentView === "MonthAgenda") {
        this.selectAppointment(true, target);
      }
    };
    KeyboardInteraction2.prototype.processDown = function(e, isMultiple) {
      var isTimelineYear = this.parent.currentView === "TimelineYear";
      if (isMultiple && this.cancelUpDownAction(isTimelineYear)) {
        return;
      }
      var target = e.target;
      var selectedCells = this.parent.getSelectedCells();
      var selectedElements = this.parent.eventBase.getSelectedAppointments();
      var moreEventWrapper = this.parent.element.querySelector("." + MORE_POPUP_WRAPPER_CLASS);
      var quickPopupWrapper = this.getQuickPopupElement();
      if (selectedCells.length > 0 && !e.target.classList.contains(WORK_CELLS_CLASS)) {
        target = selectedCells[selectedCells.length - 1];
      }
      if (selectedElements.length > 0 && !moreEventWrapper.classList.contains(POPUP_OPEN) && !quickPopupWrapper.classList.contains(POPUP_OPEN) && ["Day", "Week", "WorkWeek", "Month"].indexOf(this.parent.currentView) !== -1) {
        target = this.getWorkCellFromAppointmentElement(selectedElements[selectedElements.length - 1]);
        this.parent.eventBase.removeSelectedAppointmentClass();
      }
      var tableRows = this.parent.getTableRows();
      if (!target) {
        return;
      }
      if (target.classList.contains(WORK_CELLS_CLASS) && !this.parent.element.querySelector("." + POPUP_OPEN)) {
        var curRowIndex = tableRows.indexOf(target.parentElement);
        var targetCell = void 0;
        if (isTimelineYear && isMultiple && this.parent.activeViewOptions.group.resources.length === 0) {
          targetCell = this.isInverseTableSelect() ? this.getVerticalUpDownCell(tableRows, target, curRowIndex, false) : this.getHorizontalUpDownCell(tableRows, target, curRowIndex, false);
        }
        if (curRowIndex >= 0 && (curRowIndex < tableRows.length - 1 || targetCell)) {
          targetCell = targetCell ? targetCell : tableRows[curRowIndex + 1].cells[target.cellIndex];
          if (this.parent.currentView === "Year" && targetCell.classList.contains(OTHERMONTH_CLASS)) {
            if (this.parent.activeView.getEndDate().getTime() > +targetCell.getAttribute("data-date")) {
              targetCell = this.getYearUpDownCell(tableRows, curRowIndex + 1, target.cellIndex, false);
            } else {
              return;
            }
          }
          this.selectCells(isMultiple, targetCell);
        }
      } else if (this.parent.currentView === "Agenda" || this.parent.currentView === "MonthAgenda") {
        this.selectAppointment(false, target);
      }
    };
    KeyboardInteraction2.prototype.getYearUpDownCell = function(tableRows, rowIndex, cellIndex, isUp) {
      while (tableRows[parseInt(rowIndex.toString(), 10)] && tableRows[parseInt(rowIndex.toString(), 10)].cells[parseInt(cellIndex.toString(), 10)].classList.contains(OTHERMONTH_CLASS)) {
        rowIndex = rowIndex + (isUp ? -1 : 1);
      }
      return tableRows[parseInt(rowIndex.toString(), 10)].cells[parseInt(cellIndex.toString(), 10)];
    };
    KeyboardInteraction2.prototype.getHorizontalUpDownCell = function(tableRows, target, curRowIndex, isUp) {
      var row = tableRows[curRowIndex + (isUp ? -1 : 1)];
      var cell = row ? row.cells[target.cellIndex] : target;
      if (cell.classList.contains(OTHERMONTH_CLASS)) {
        var workCell = row.querySelector("." + WORK_CELLS_CLASS + ":not(." + OTHERMONTH_CLASS + ")");
        var date = /* @__PURE__ */ new Date(+workCell.getAttribute("data-date"));
        var query = '[data-date="' + new Date(date.getFullYear(), date.getMonth() + 1, 0).getTime() + '"]';
        cell = cell.cellIndex < workCell.cellIndex ? workCell : row.querySelector(query);
      }
      return cell;
    };
    KeyboardInteraction2.prototype.getVerticalUpDownCell = function(tableRows, target, curRowIndex, isUp) {
      var hasRow = isUp && curRowIndex > 0 || !isUp && curRowIndex < tableRows.length - 1;
      var targetCell = hasRow ? tableRows[curRowIndex + (isUp ? -1 : 1)].cells[target.cellIndex] : void 0;
      if (!targetCell || targetCell.classList.contains(OTHERMONTH_CLASS)) {
        var column = tableRows[parseInt(curRowIndex.toString(), 10)].cells[target.cellIndex - (isUp ? 1 : -1)];
        if (column) {
          var dateAttr = +target.getAttribute("data-date") - (isUp ? MS_PER_DAY : -MS_PER_DAY);
          return this.parent.getContentTable().querySelector("." + WORK_CELLS_CLASS + '[data-date="' + dateAttr + '"]');
        }
        targetCell = target;
      }
      return targetCell;
    };
    KeyboardInteraction2.prototype.processLeftRight = function(target) {
      var tableEle = this.parent.currentView === "Year" ? target.closest("tbody") : this.parent.getContentTable();
      var curRowIndex = target.parentNode.sectionRowIndex;
      var key = {
        element: tableEle,
        rowIndex: curRowIndex,
        columnIndex: target.cellIndex,
        maxIndex: tableEle.rows[parseInt(curRowIndex.toString(), 10)].cells.length
      };
      return key;
    };
    KeyboardInteraction2.prototype.getQuickPopupElement = function() {
      return (this.parent.isAdaptive ? document.body : this.parent.element).querySelector("." + POPUP_WRAPPER_CLASS);
    };
    KeyboardInteraction2.prototype.isCancelLeftRightAction = function(e, isMultiple, isTimelineYear) {
      var prevent = this.parent.currentView === "MonthAgenda" || isTimelineYear && this.initialTarget.classList.contains(OTHERMONTH_CLASS);
      if (this.parent.currentView === "Agenda" || isMultiple && prevent) {
        return true;
      }
      if (this.isPreventAction(e) && isMultiple) {
        return true;
      }
      var moreEventWrapper = this.parent.element.querySelector("." + MORE_POPUP_WRAPPER_CLASS);
      var quickPopupWrapper = this.getQuickPopupElement();
      if (moreEventWrapper.classList.contains(POPUP_OPEN) || quickPopupWrapper.classList.contains(POPUP_OPEN)) {
        return true;
      }
      return false;
    };
    KeyboardInteraction2.prototype.processRight = function(e, isMultiple) {
      var isTimelineYear = this.parent.currentView === "TimelineYear";
      if (this.isCancelLeftRightAction(e, isMultiple, isTimelineYear)) {
        return;
      }
      var selectedCells = this.parent.getSelectedCells();
      var targetCell;
      var selectedAppointments = this.parent.eventBase.getSelectedAppointments();
      var target = e.target;
      if (selectedCells.length > 0 && !target.classList.contains(WORK_CELLS_CLASS) && !target.classList.contains(ALLDAY_CELLS_CLASS)) {
        target = selectedCells[selectedCells.length - 1];
      }
      if (selectedAppointments.length > 0) {
        target = this.getWorkCellFromAppointmentElement(selectedAppointments[selectedAppointments.length - 1]);
        this.parent.eventBase.removeSelectedAppointmentClass();
        if (!target) {
          return;
        }
      }
      if (target.classList.contains(WORK_CELLS_CLASS) && e.target.classList.contains(WORK_CELLS_CLASS)) {
        var key = this.processLeftRight(target);
        var targetDate = /* @__PURE__ */ new Date(+target.getAttribute("data-date"));
        var isMonthEnd = this.parent.currentView === "Year" && targetDate.getTime() === lastDateOfMonth(targetDate).getTime();
        if (key.columnIndex >= 0 && key.columnIndex < key.maxIndex - 1 && !isMonthEnd) {
          targetCell = this.calculateNextPrevDate(target, key.element.rows[key.rowIndex].cells[target.cellIndex + 1], "right");
          if (isTimelineYear && isMultiple && targetCell.classList.contains(OTHERMONTH_CLASS)) {
            targetCell = this.getTimelineYearTargetCell(key, target, true);
          }
          if (!isNullOrUndefined(targetCell)) {
            this.selectCells(isMultiple, targetCell);
          }
        } else if (key.columnIndex === key.maxIndex - 1 || isMonthEnd) {
          if (!this.isInverseTableSelect() && key.rowIndex < key.element.rows.length - 1 && !isMonthEnd) {
            targetCell = this.calculateNextPrevDate(target, key.element.rows[key.rowIndex + 1].cells[0], "right");
            var changeTargetCell = isTimelineYear && isMultiple && targetCell.classList.contains(OTHERMONTH_CLASS);
            targetCell = changeTargetCell ? this.getHorizontalLeftRightCell(key, target, true) : targetCell;
            if (!isNullOrUndefined(targetCell)) {
              this.selectCells(isMultiple, targetCell);
            }
          } else if (!isMultiple) {
            if (isMonthEnd && targetDate.getTime() !== this.parent.activeView.getEndDate().getTime()) {
              this.selectCells(isMultiple, this.parent.element.querySelector(":not(." + OTHERMONTH_CLASS + ')[data-date="' + (targetDate.getTime() + MS_PER_DAY) + '"]'));
              return;
            }
            var rowIndex = this.isInverseTableSelect() ? key.rowIndex : 0;
            this.parent.changeDate(this.parent.activeView.getNextPreviousDate("next"), e);
            var tableEle = this.parent.getContentTable();
            var cell = isMonthEnd ? tableEle.rows[parseInt(rowIndex.toString(), 10)].querySelector("." + WORK_CELLS_CLASS + ":not(." + OTHERMONTH_CLASS + ")") : tableEle.rows[parseInt(rowIndex.toString(), 10)].cells[0];
            this.selectCells(false, cell);
          }
        }
      } else if (target.classList.contains(ALLDAY_CELLS_CLASS)) {
        var curColIndex = target.cellIndex;
        var allDayRow = this.parent.getAllDayRow();
        var maxColIndex = allDayRow.cells.length;
        if (curColIndex >= 0 && curColIndex < maxColIndex - 1) {
          this.selectCells(isMultiple, allDayRow.cells[curColIndex + 1]);
        } else if (curColIndex === maxColIndex - 1 && !isMultiple) {
          this.parent.changeDate(this.parent.activeView.getNextPreviousDate("next"), e);
          var allDayRow_1 = this.parent.getAllDayRow();
          this.selectCells(false, allDayRow_1.cells[0]);
        }
      }
    };
    KeyboardInteraction2.prototype.processLeft = function(e, isMultiple) {
      var isTimelineYear = this.parent.currentView === "TimelineYear";
      if (this.isCancelLeftRightAction(e, isMultiple, isTimelineYear)) {
        return;
      }
      var target = e.target;
      var selectedCells = this.parent.getSelectedCells();
      var targetCell;
      if (selectedCells.length > 0 && !target.classList.contains(WORK_CELLS_CLASS) && !target.classList.contains(ALLDAY_CELLS_CLASS)) {
        target = selectedCells[selectedCells.length - 1];
      }
      var selectedElements = this.parent.eventBase.getSelectedAppointments();
      if (selectedElements.length > 0) {
        target = this.getWorkCellFromAppointmentElement(selectedElements[selectedElements.length - 1]);
        this.parent.eventBase.removeSelectedAppointmentClass();
        if (!target) {
          return;
        }
      }
      if (e.target.classList.contains(WORK_CELLS_CLASS) && target.classList.contains(WORK_CELLS_CLASS)) {
        var key = this.processLeftRight(target);
        var targetDate = /* @__PURE__ */ new Date(+target.getAttribute("data-date"));
        var isMonthStart = this.parent.currentView === "Year" && targetDate.getTime() === firstDateOfMonth(targetDate).getTime();
        if (key.columnIndex > 0 && key.columnIndex < key.maxIndex && !isMonthStart) {
          targetCell = this.calculateNextPrevDate(target, key.element.rows[key.rowIndex].cells[target.cellIndex - 1], "left");
          if (isTimelineYear && isMultiple && targetCell.classList.contains(OTHERMONTH_CLASS)) {
            targetCell = this.getTimelineYearTargetCell(key, target, false);
          }
          if (!isNullOrUndefined(targetCell)) {
            this.selectCells(isMultiple, targetCell);
          }
        } else if (key.columnIndex === 0 || isMonthStart) {
          if (!this.isInverseTableSelect() && key.rowIndex > 0) {
            targetCell = this.calculateNextPrevDate(target, key.element.rows[key.rowIndex - 1].cells[key.maxIndex - 1], "left");
            var otherMonthCell = isTimelineYear && isMultiple && targetCell.classList.contains(OTHERMONTH_CLASS);
            targetCell = otherMonthCell ? this.getHorizontalLeftRightCell(key, target, false) : targetCell;
            if (!isNullOrUndefined(targetCell)) {
              this.selectCells(isMultiple, targetCell);
            }
          } else if (!isMultiple) {
            if (isMonthStart && targetDate.getTime() !== this.parent.activeView.getStartDate().getTime()) {
              this.selectCells(isMultiple, this.parent.element.querySelector('[data-date="' + (targetDate.getTime() - MS_PER_DAY) + '"]'));
              return;
            }
            this.parent.changeDate(this.parent.activeView.getNextPreviousDate("previous"), e);
            var tableEle = this.parent.getContentTable();
            var rowIndex = this.isInverseTableSelect() ? key.rowIndex : tableEle.rows.length - 1;
            var cell = tableEle.rows[parseInt(rowIndex.toString(), 10)].cells[key.maxIndex - 1];
            if (isMonthStart) {
              var tbody = this.parent.element.querySelectorAll("." + CONTENT_TABLE_CLASS + " tbody");
              cell = tbody.item(tbody.length - 1).querySelector(":not(." + OTHERMONTH_CLASS + ')[data-date="' + this.parent.activeView.getEndDate().getTime() + '"]');
            }
            this.selectCells(false, cell);
          }
        }
      } else if (target.classList.contains(ALLDAY_CELLS_CLASS)) {
        var curColIndex = target.cellIndex;
        var allDayRow = this.parent.getAllDayRow();
        var maxColIndex = allDayRow.cells.length;
        if (curColIndex > 0 && curColIndex < maxColIndex) {
          this.selectCells(isMultiple, allDayRow.cells[curColIndex - 1]);
        } else if (curColIndex === 0 && !isMultiple) {
          this.parent.changeDate(this.parent.activeView.getNextPreviousDate("previous"), e);
          var allDayRow_2 = this.parent.getAllDayRow();
          this.selectCells(false, allDayRow_2.cells[maxColIndex - 1]);
        }
      }
    };
    KeyboardInteraction2.prototype.getTimelineYearTargetCell = function(key, target, isRight) {
      return this.isInverseTableSelect() ? this.getVerticalLeftRightCell(target, isRight) : this.getHorizontalLeftRightCell(key, target, isRight);
    };
    KeyboardInteraction2.prototype.getHorizontalLeftRightCell = function(key, target, isRight) {
      var row = key.element.rows[target.parentNode.sectionRowIndex + (isRight ? 1 : -1)];
      if (row) {
        var query = isRight ? "." + WORK_CELLS_CLASS + ":not(." + OTHERMONTH_CLASS + ")" : '[data-date="' + (+target.getAttribute("data-date") - MS_PER_DAY) + '"]';
        return row.querySelector(query);
      }
      return target;
    };
    KeyboardInteraction2.prototype.getVerticalLeftRightCell = function(target, isRight) {
      var date = /* @__PURE__ */ new Date(+target.getAttribute("data-date"));
      var start = new Date(date.getFullYear(), date.getMonth() + (isRight ? 1 : -1), 1);
      var tableEle = this.parent.getContentTable();
      var targetCell = tableEle.querySelector('[data-date="' + start.getTime() + '"]');
      if (targetCell.parentNode.sectionRowIndex > target.parentNode.sectionRowIndex) {
        return targetCell;
      }
      return tableEle.querySelector('[data-date="' + new Date(start.getFullYear(), start.getMonth() + 1, 0).getTime() + '"]');
    };
    KeyboardInteraction2.prototype.calculateNextPrevDate = function(currentCell, target, type) {
      var initialId = this.initialTarget.getAttribute("data-group-index");
      if (this.parent.activeViewOptions.group.resources.length > 0 && this.parent.currentView === "Month") {
        if (currentCell && target && target.getAttribute("data-group-index") !== initialId) {
          var currentDate = this.parent.getDateFromElement(currentCell);
          var nextPrevDate = type === "right" ? new Date(currentDate.setDate(currentDate.getDate() + 1)) : new Date(currentDate.setDate(currentDate.getDate() - 1));
          target = [].slice.call(this.parent.element.querySelectorAll('td[data-date="' + nextPrevDate.getTime().toString() + '"][data-group-index="' + initialId + '"]'))[0];
        }
      }
      return target;
    };
    KeyboardInteraction2.prototype.getFocusableElements = function(container) {
      var queryString2 = 'a[href]:not([tabindex="-1"]),input:not([disabled]):not([tabindex="-1"]),textarea:not([disabled]):not([tabindex="-1"]),button:not([disabled]):not([tabindex="-1"]),select:not([disabled]):not([tabindex="-1"]),[tabindex]:not([tabindex="-1"]),[contentEditable=true]:not([tabindex="-1"])';
      return [].slice.call(container.querySelectorAll(queryString2));
    };
    KeyboardInteraction2.prototype.processTabOnPopup = function(e, popupElement) {
      var _this = this;
      var focusableElements = this.getFocusableElements(popupElement);
      focusableElements = focusableElements.filter(function(element2) {
        var footerEle = _this.parent.element.querySelector("." + POPUP_FOOTER_CLASS);
        if (footerEle && footerEle.offsetParent) {
          return !(element2.classList.contains(EDIT_CLASS) || element2.classList.contains(DELETE_CLASS));
        } else {
          return !(element2.classList.contains(EDIT_EVENT_CLASS) || element2.classList.contains(DELETE_EVENT_CLASS));
        }
      });
      var firstEle = focusableElements[0];
      var lastEle = focusableElements[focusableElements.length - 1];
      if (!isNullOrUndefined(lastEle) && document.activeElement === lastEle && !e.shiftKey) {
        e.preventDefault();
        firstEle.focus();
      }
      if (!isNullOrUndefined(firstEle) && document.activeElement === firstEle && e.shiftKey) {
        e.preventDefault();
        lastEle.focus();
      }
    };
    KeyboardInteraction2.prototype.processTab = function(e, isReverse) {
      var target = e.target;
      if (target.classList.contains(INLINE_SUBJECT_CLASS) && this.parent.inlineModule) {
        target = target.closest(".e-appointment");
        this.parent.inlineModule.inlineCrudActions(e.target);
      }
      if (this.parent.currentView === "TimelineYear" && target.classList.contains(OTHERMONTH_CLASS)) {
        if (target.classList.contains(SELECTED_CELL_CLASS)) {
          this.parent.removeSelectedClass();
        }
        return;
      }
      var popupWrapper = closest(target, "." + POPUP_WRAPPER_CLASS + ",." + MORE_POPUP_WRAPPER_CLASS);
      if (popupWrapper && popupWrapper.classList.contains(POPUP_OPEN)) {
        if (popupWrapper.classList.contains(MORE_POPUP_WRAPPER_CLASS)) {
          this.parent.eventBase.removeSelectedAppointmentClass();
        }
        this.processTabOnPopup(e, popupWrapper);
        return;
      }
      if (target.classList.contains(ROOT)) {
        this.parent.eventBase.removeSelectedAppointmentClass();
        return;
      }
      if (target.classList.contains(RESOURCE_CELLS_CLASS) && this.parent.activeView.isTimelineView() && this.parent.activeViewOptions.group.resources.length > 0) {
        var index = parseInt(target.getAttribute("data-group-index"), 10);
        var appSelector = "." + APPOINTMENT_CLASS + '[data-group-index="' + (isReverse ? index - 1 : index) + '"]';
        var appElements = [].slice.call(this.parent.element.querySelectorAll(appSelector));
        if (appElements.length > 0) {
          this.parent.eventBase.removeSelectedAppointmentClass();
          var focusAppointment = isReverse ? appElements.slice(-1)[0] : appElements[0];
          this.parent.eventBase.addSelectedAppointments([focusAppointment], true);
          focusAppointment.focus();
          e.preventDefault();
        } else if (index + 1 === this.parent.resourceBase.lastResourceLevel.length) {
          this.parent.element.focus();
          e.preventDefault();
        } else if (this.parent.virtualScrollModule) {
          var virtual = this.parent.element.querySelector("." + VIRTUAL_TRACK_CLASS);
          var averageRowHeight = Math.round(virtual.offsetHeight / this.parent.resourceBase.expandedResources.length);
          this.parent.element.querySelector(".e-content-wrap").scrollTop = (isReverse ? index - 1 : index + 1) * averageRowHeight;
          this.parent.virtualScrollModule.virtualScrolling();
        } else {
          this.setScrollPosition(index);
        }
        return;
      }
      if (target.classList.contains(APPOINTMENT_CLASS)) {
        var appElements = [].slice.call(this.parent.element.querySelectorAll("." + APPOINTMENT_CLASS));
        var isTimelineYear = this.parent.currentView === "TimelineYear";
        var isTimeline = this.parent.activeView.isTimelineView() && !isTimelineYear;
        if ((isTimeline || isTimelineYear && this.parent.activeViewOptions.orientation === "Vertical") && this.parent.activeViewOptions.group.resources.length > 0) {
          var index = parseInt(target.getAttribute("data-group-index"), 10);
          appElements = [].slice.call(this.parent.element.querySelectorAll("." + APPOINTMENT_CLASS + '[data-group-index="' + index + '"]'));
          var resCellSelector = "." + RESOURCE_CELLS_CLASS + '[data-group-index="' + (isReverse ? index : index + 1) + '"]';
          var resourceCell = this.parent.element.querySelector(resCellSelector);
          if (resourceCell && (isReverse && target.getAttribute("data-guid") === appElements[0].getAttribute("data-guid") || !isReverse && target.getAttribute("data-guid") === appElements.slice(-1)[0].getAttribute("data-guid"))) {
            this.parent.eventBase.removeSelectedAppointmentClass();
            if (this.parent.virtualScrollModule) {
              resourceCell.focus({ preventScroll: true });
            } else {
              resourceCell.focus();
            }
            if (this.parent.activeView.isTimelineView() && this.parent.activeViewOptions.group.resources.length > 0 && isNullOrUndefined(this.parent.virtualScrollModule)) {
              this.setScrollPosition(index);
            }
            e.preventDefault();
            return;
          }
        }
        var selectedAppointments = this.parent.eventBase.getSelectedAppointments();
        if (selectedAppointments.length > 0) {
          target = selectedAppointments[selectedAppointments.length - 1];
        }
        this.parent.eventBase.removeSelectedAppointmentClass();
        if (!isReverse && target.getAttribute("data-guid") === appElements[appElements.length - 1].getAttribute("data-guid") || isReverse && target.getAttribute("data-guid") === appElements[0].getAttribute("data-guid")) {
          return;
        }
        if (this.parent.currentView === "Agenda" || this.parent.currentView === "MonthAgenda") {
          this.selectAppointment(isReverse, target);
          e.preventDefault();
        }
        return;
      }
      var selectedCells = this.parent.getSelectedCells();
      if (selectedCells.length > 0 && !target.classList.contains(APPOINTMENT_CLASS)) {
        target = selectedCells[selectedCells.length - 1];
        this.selectAppointmentElementFromWorkCell(isReverse, target);
        e.preventDefault();
        return;
      }
      if (target && !target.classList.contains(RESOURCE_CELLS_CLASS) && this.parent.activeView.isTimelineView() && this.parent.activeViewOptions.group.resources.length > 0) {
        this.processTabOnResourceCells(target, isReverse);
      }
    };
    KeyboardInteraction2.prototype.processDelete = function(e) {
      var activeEle = document.activeElement;
      if (this.parent.currentView === "MonthAgenda") {
        var selectedEle = this.parent.eventBase.getSelectedEvents().element;
        activeEle = selectedEle && isNullOrUndefined(selectedEle.length) ? selectedEle : selectedEle[0];
      }
      if (activeEle && activeEle.classList.contains(APPOINTMENT_CLASS)) {
        addClass([activeEle], APPOINTMENT_BORDER);
        this.parent.activeEventData = this.parent.eventBase.getSelectedEvents();
        if (this.parent.activeViewOptions.readonly || activeEle.classList.contains(READ_ONLY) || !this.parent.eventSettings.allowDeleting) {
          return;
        }
        this.parent.quickPopup.deleteClick(e);
      }
    };
    KeyboardInteraction2.prototype.processCtrlShiftNavigationArrows = function(e) {
      if (this.parent.activeViewOptions.group.resources.length > 0 && document.activeElement.classList.contains(APPOINTMENT_CLASS)) {
        var groupIndex = parseInt(document.activeElement.getAttribute("data-group-index"), 10);
        var index = e.action === "ctrlShiftLeftArrow" || e.action === "ctrlShiftUpArrow" ? groupIndex - 1 : groupIndex + 1;
        index = index < 0 ? 0 : index > this.parent.resourceBase.lastResourceLevel.length ? this.parent.resourceBase.lastResourceLevel.length : index;
        var eventEle = [];
        while (eventEle.length === 0 && index >= 0 && index <= this.parent.resourceBase.lastResourceLevel.length) {
          eventEle = [].slice.call(this.parent.element.querySelectorAll("." + APPOINTMENT_CLASS + '[data-group-index="' + index + '"]'));
          index = e.action === "ctrlShiftLeftArrow" || e.action === "ctrlShiftUpArrow" ? index - 1 : index + 1;
        }
        var nextAppEle = eventEle[0];
        if (nextAppEle) {
          this.parent.eventBase.removeSelectedAppointmentClass();
          this.parent.eventBase.addSelectedAppointments([nextAppEle], true);
          nextAppEle.focus();
        }
      } else if (this.parent.activeViewOptions.group.resources.length > 0 && !document.activeElement.classList.contains(APPOINTMENT_CLASS)) {
        var index = this.parent.resourceBase.renderedResources[0].groupIndex;
        var appSelector = "." + APPOINTMENT_CLASS + '[data-group-index="' + index + '"]';
        var appElements = [].slice.call(this.parent.element.querySelectorAll(appSelector));
        if (appElements.length > 0) {
          this.parent.eventBase.removeSelectedAppointmentClass();
          var focusAppointment = appElements[0];
          this.parent.eventBase.addSelectedAppointments([focusAppointment], true);
          focusAppointment.focus();
          e.preventDefault();
        }
      }
    };
    KeyboardInteraction2.prototype.processEscape = function(event) {
      this.parent.quickPopup.onClosePopup(event);
      this.parent.quickPopup.morePopup.hide();
      if (this.parent.headerModule) {
        this.parent.headerModule.hideHeaderPopup();
      }
      if (this.parent.inlineModule) {
        this.parent.inlineModule.removeInlineAppointmentElement();
      }
    };
    KeyboardInteraction2.prototype.isPreventAction = function(e) {
      var target = closest(e.target, "." + RESOURCE_GROUP_CELLS_CLASS);
      if (this.parent.activeView.isTimelineView() && !isNullOrUndefined(target)) {
        return true;
      }
      return false;
    };
    KeyboardInteraction2.prototype.processTabOnResourceCells = function(target, isReverse) {
      var tabElements = [].slice.call(this.parent.element.querySelectorAll('[tabIndex="0"]'));
      var currentTabIndex = tabElements.indexOf(target);
      var nextTabElement = !isReverse ? tabElements[currentTabIndex + 1] : tabElements[currentTabIndex - 1];
      if (nextTabElement && nextTabElement.classList.contains(RESOURCE_CELLS_CLASS)) {
        var groupIndex = parseInt(nextTabElement.getAttribute("data-group-index"), 10);
        if (this.parent.virtualScrollModule) {
          var resColWrap_1 = this.parent.element.querySelector("." + RESOURCE_COLUMN_WRAP_CLASS);
          var resCells = [].slice.call(this.parent.element.querySelectorAll("." + RESOURCE_CELLS_CLASS));
          resCells.forEach(function(element2) {
            if (element2.getBoundingClientRect().top < resColWrap_1.getBoundingClientRect().top) {
              element2.setAttribute("tabindex", "-1");
            }
          });
        } else {
          this.setScrollPosition(groupIndex);
        }
      }
    };
    KeyboardInteraction2.prototype.setScrollPosition = function(index) {
      var workCell = this.parent.element.querySelector("." + WORK_CELLS_CLASS + '[data-group-index="' + index + '"]');
      if (workCell) {
        this.parent.element.querySelector("." + CONTENT_WRAP_CLASS).scrollTop = workCell.offsetTop;
      }
    };
    KeyboardInteraction2.prototype.getModuleName = function() {
      return "keyboard";
    };
    KeyboardInteraction2.prototype.destroy = function() {
      this.removeEventListener();
      this.selectedCells = [];
      this.keyboardModule.destroy();
    };
    return KeyboardInteraction2;
  }()
);
var Data = (
  /** @class */
  function() {
    function Data2(parent, dataSource, query) {
      this.parent = parent;
      this.initDataManager(dataSource, query);
    }
    Data2.prototype.initDataManager = function(dataSource, query) {
      this.dataManager = dataSource instanceof DataManager ? dataSource : new DataManager(dataSource);
      this.query = query instanceof Query ? query : new Query();
    };
    Data2.prototype.generateQuery = function(startDate, endDate) {
      var query = this.query.clone();
      if (this.parent && this.parent.eventSettings.includeFiltersInQuery && startDate && endDate) {
        var dateQuery = this.getStartEndQuery(startDate, endDate);
        var recurrenceQuery = new Predicate(this.parent.eventFields.recurrenceRule, "notequal", null).and(new Predicate(this.parent.eventFields.recurrenceRule, "notequal", ""));
        return query.where(dateQuery.or(recurrenceQuery));
      }
      if (startDate) {
        query.addParams("StartDate", startDate.toISOString());
      }
      if (endDate) {
        query.addParams("EndDate", endDate.toISOString());
      }
      return query;
    };
    Data2.prototype.getStartEndQuery = function(startDate, endDate) {
      var fieldMapping = this.parent.eventFields;
      var dateQuery = new Predicate(fieldMapping.startTime, "greaterthanorequal", startDate).and(new Predicate(fieldMapping.endTime, "greaterthanorequal", startDate)).and(new Predicate(fieldMapping.startTime, "lessthan", endDate)).or(new Predicate(fieldMapping.startTime, "lessthanorequal", startDate).and(new Predicate(fieldMapping.endTime, "greaterthan", startDate)));
      return dateQuery;
    };
    Data2.prototype.getData = function(query) {
      return this.dataManager.executeQuery(query);
    };
    Data2.prototype.destroy = function() {
      this.dataManager = null;
      this.query = null;
    };
    return Data2;
  }()
);
var Gregorian = (
  /** @class */
  function() {
    function Gregorian2() {
    }
    Gregorian2.prototype.firstDateOfMonth = function(date) {
      return new Date(date.getFullYear(), date.getMonth());
    };
    Gregorian2.prototype.lastDateOfMonth = function(dt) {
      return new Date(dt.getFullYear(), dt.getMonth() + 1, 0);
    };
    Gregorian2.prototype.isMonthStart = function(date) {
      return date.getDate() === 1;
    };
    Gregorian2.prototype.getLeapYearDaysCount = function() {
      return 366;
    };
    Gregorian2.prototype.getYearDaysCount = function(date, interval) {
      return (date.getFullYear() + interval) % 4 === 0 ? 366 : 365;
    };
    Gregorian2.prototype.getDate = function(date) {
      return date.getDate();
    };
    Gregorian2.prototype.getMonth = function(date) {
      return date.getMonth() + 1;
    };
    Gregorian2.prototype.getFullYear = function(date) {
      return date.getFullYear();
    };
    Gregorian2.prototype.getYearLastDate = function(date, interval) {
      return new Date(date.getFullYear() + interval, 0, 0);
    };
    Gregorian2.prototype.getMonthDaysCount = function(date) {
      return this.lastDateOfMonth(date).getDate();
    };
    Gregorian2.prototype.getMonthStartDate = function(date) {
      return new Date(date.getFullYear(), date.getMonth(), 1, date.getHours(), date.getMinutes());
    };
    Gregorian2.prototype.getMonthEndDate = function(date) {
      date.setDate(1);
      return new Date(date.setMonth(date.getMonth() + 1));
    };
    Gregorian2.prototype.getExpectedDays = function(date, days) {
      return days;
    };
    Gregorian2.prototype.setDate = function(dateObj, date) {
      dateObj.setDate(date);
    };
    Gregorian2.prototype.setValidDate = function(date, interval, startDate, monthValue, beginDate) {
      if (!isNullOrUndefined(beginDate)) {
        date.setMonth((beginDate ? monthValue : date.getMonth()) + interval);
      } else {
        date.setMonth(date.getMonth() + interval, startDate);
      }
    };
    Gregorian2.prototype.setMonth = function(date, interval, startDate) {
      date.setDate(1);
      date.setFullYear(date.getFullYear());
      date.setMonth(interval - 1);
      var maxDay = new Date(date.getFullYear(), date.getMonth() + 1, 0).getDate();
      date.setDate(Math.min(startDate, maxDay));
    };
    Gregorian2.prototype.addYears = function(date, interval) {
      date.setFullYear(date.getFullYear() + interval);
    };
    Gregorian2.prototype.isSameMonth = function(date1, date2) {
      return date1.getMonth() === date2.getMonth();
    };
    Gregorian2.prototype.checkMonth = function(date, months) {
      return months.indexOf(date.getMonth() + 1) === -1;
    };
    Gregorian2.prototype.compareMonth = function(date1, date2) {
      return date1.getMonth() > date2.getMonth();
    };
    Gregorian2.prototype.isSameYear = function(date1, date2) {
      return date1.getFullYear() === date2.getFullYear();
    };
    Gregorian2.prototype.isLastMonth = function(date) {
      return date.getMonth() === 11;
    };
    Gregorian2.prototype.isLeapYear = function(year, interval) {
      return (year + interval) % 4 === 0;
    };
    return Gregorian2;
  }()
);
var Islamic = (
  /** @class */
  function() {
    function Islamic2() {
    }
    Islamic2.prototype.firstDateOfMonth = function(date) {
      var hDate = this.getHijriDate(date);
      var gDate = HijriParser.toGregorian(hDate.year, hDate.month, 1);
      return gDate;
    };
    Islamic2.prototype.lastDateOfMonth = function(date) {
      var hDate = this.getHijriDate(date);
      var daysInMonth = this.getDaysInMonth(hDate.month, hDate.year);
      var gDate = HijriParser.toGregorian(hDate.year, hDate.month, daysInMonth);
      var finalGDate = new Date(gDate.getTime());
      finalGDate = new Date(finalGDate.setDate(finalGDate.getDate() + 1));
      var finalHDate = this.getHijriDate(finalGDate);
      if (hDate.month === finalHDate.month) {
        return finalGDate;
      }
      finalHDate = this.getHijriDate(gDate);
      if (hDate.month === finalHDate.month) {
        return gDate;
      }
      return new Date(gDate.setDate(gDate.getDate() - 1));
    };
    Islamic2.prototype.isMonthStart = function(date) {
      var hijriDate = this.getHijriDate(date);
      return hijriDate.date === 1;
    };
    Islamic2.prototype.getLeapYearDaysCount = function() {
      return 355;
    };
    Islamic2.prototype.getYearDaysCount = function(date, interval) {
      var hDate = this.getHijriDate(date);
      return this.isLeapYear(hDate.year, interval) ? 355 : 354;
    };
    Islamic2.prototype.getDate = function(date) {
      var hijriDate = this.getHijriDate(date);
      return hijriDate.date;
    };
    Islamic2.prototype.getMonth = function(date) {
      var hDate = this.getHijriDate(date);
      return hDate.month;
    };
    Islamic2.prototype.getFullYear = function(date) {
      var hDate = this.getHijriDate(date);
      return hDate.year;
    };
    Islamic2.prototype.getYearLastDate = function(date, interval) {
      var hDate = this.getHijriDate(date);
      var gDate = HijriParser.toGregorian(hDate.year + interval, 1, 0);
      return gDate;
    };
    Islamic2.prototype.getMonthDaysCount = function(date) {
      var maxDate = this.lastDateOfMonth(date);
      var hijriDate = this.getHijriDate(maxDate);
      return hijriDate.date;
    };
    Islamic2.prototype.getMonthStartDate = function(date) {
      var firstDate = this.firstDateOfMonth(date);
      return new Date(firstDate.getFullYear(), firstDate.getMonth(), firstDate.getDate(), date.getHours(), date.getMinutes());
    };
    Islamic2.prototype.getMonthEndDate = function(date) {
      var lastDate = this.lastDateOfMonth(date);
      lastDate.setDate(lastDate.getDate() + 1);
      return new Date(lastDate.setMonth(lastDate.getMonth()));
    };
    Islamic2.prototype.getExpectedDays = function(date, days) {
      var hDate = this.getHijriDate(date);
      var day = [];
      for (var i = 0; i < days.length; i++) {
        var gDate = HijriParser.toGregorian(hDate.year, hDate.month, days[parseInt(i.toString(), 10)]);
        day.push(gDate.getDate());
      }
      return day;
    };
    Islamic2.prototype.setDate = function(dateObj, date) {
      var hDate = this.getHijriDate(dateObj);
      var gDate = HijriParser.toGregorian(hDate.year, hDate.month, date);
      this.updateDateObj(dateObj, gDate);
    };
    Islamic2.prototype.setValidDate = function(date, interval, startDate, monthValue, beginDate) {
      var firstDate = !isNullOrUndefined(beginDate) ? this.firstDateOfMonth(beginDate) : date;
      var hDate = this.getHijriDate(firstDate);
      var gDate = HijriParser.toGregorian(hDate.year, hDate.month + interval, startDate);
      this.updateDateObj(date, gDate);
    };
    Islamic2.prototype.setMonth = function(date, interval, startDate) {
      var hDate = this.getHijriDate(date);
      var gDate = HijriParser.toGregorian(hDate.year, interval, startDate);
      this.updateDateObj(date, gDate);
    };
    Islamic2.prototype.addYears = function(date, interval, monthValue) {
      var hDate = this.getHijriDate(date);
      var gDate = HijriParser.toGregorian(hDate.year + interval, monthValue, 1);
      this.updateDateObj(date, gDate);
    };
    Islamic2.prototype.isSameMonth = function(date1, date2) {
      var currentHijri = this.getHijriDate(date1);
      var tempHijri = this.getHijriDate(date2);
      return currentHijri.month === tempHijri.month;
    };
    Islamic2.prototype.checkMonth = function(date, months) {
      var hDate = this.getHijriDate(date);
      return months.indexOf(hDate.month) === -1;
    };
    Islamic2.prototype.compareMonth = function(date1, date2) {
      var hDate = this.getHijriDate(date1);
      var hDate1 = this.getHijriDate(date2);
      return hDate.month > hDate1.month;
    };
    Islamic2.prototype.isSameYear = function(date1, date2) {
      var hDate = this.getHijriDate(date1);
      var hDate1 = this.getHijriDate(date2);
      return hDate.year === hDate1.year;
    };
    Islamic2.prototype.isLastMonth = function(date) {
      var hDate = this.getHijriDate(date);
      return hDate.month === 12;
    };
    Islamic2.prototype.updateDateObj = function(date, gDate) {
      date.setFullYear(gDate.getFullYear(), gDate.getMonth(), gDate.getDate());
    };
    Islamic2.prototype.isLeapYear = function(year, interval) {
      return (14 + 11 * (year + interval)) % 30 < 11;
    };
    Islamic2.prototype.getDaysInMonth = function(month2, year) {
      var length = 0;
      length = 29 + (month2 + 1) % 2;
      if (month2 === 11 && this.isLeapYear(year, 0)) {
        length++;
      }
      return length;
    };
    Islamic2.prototype.getHijriDate = function(date) {
      return HijriParser.getHijriDate(date);
    };
    return Islamic2;
  }()
);
var Timezone = (
  /** @class */
  function() {
    function Timezone2() {
      this.timezoneData = [];
      this.timezoneData = this.getTimezoneData();
    }
    Timezone2.prototype.offset = function(date, timezone) {
      var localOffset = date.getTimezoneOffset();
      try {
        var convertedDate = new Date(date.toLocaleString("en-US", { timeZone: timezone }));
        if (!isNaN(convertedDate.getTime())) {
          return (date.getTime() - convertedDate.getTime()) / 6e4 + localOffset;
        }
        return 0;
      } catch (error) {
        return 0;
      }
    };
    Timezone2.prototype.convert = function(date, fromOffset, toOffset) {
      if (typeof fromOffset === "string") {
        fromOffset = this.offset(date, fromOffset);
      }
      if (typeof toOffset === "string") {
        toOffset = this.offset(date, toOffset);
      }
      var fromLocalOffset = date.getTimezoneOffset();
      date = new Date(date.getTime() + (fromOffset - toOffset) * 6e4);
      var toLocalOffset = date.getTimezoneOffset();
      return new Date(date.getTime() + (toLocalOffset - fromLocalOffset) * 6e4);
    };
    Timezone2.prototype.add = function(date, timezone) {
      return this.convert(date, date.getTimezoneOffset(), timezone);
    };
    Timezone2.prototype.remove = function(date, timezone) {
      return this.convert(date, timezone, date.getTimezoneOffset());
    };
    Timezone2.prototype.removeLocalOffset = function(date) {
      return new Date(date.getTime() - date.getTimezoneOffset() * 6e4);
    };
    Timezone2.prototype.getLocalTimezoneName = function() {
      return window.Intl ? Intl.DateTimeFormat().resolvedOptions().timeZone || "UTC" : "UTC";
    };
    Timezone2.prototype.getTimezoneData = function() {
      return timezoneData;
    };
    return Timezone2;
  }()
);
var timezoneData = [
  { Value: "Pacific/Niue", Text: "(UTC-11:00) Niue" },
  { Value: "Pacific/Pago_Pago", Text: "(UTC-11:00) Pago Pago" },
  { Value: "Pacific/Honolulu", Text: "(UTC-10:00) Hawaii Time" },
  { Value: "Pacific/Rarotonga", Text: "(UTC-10:00) Rarotonga" },
  { Value: "Pacific/Tahiti", Text: "(UTC-10:00) Tahiti" },
  { Value: "Pacific/Marquesas", Text: "(UTC-09:30) Marquesas" },
  { Value: "America/Anchorage", Text: "(UTC-09:00) Alaska Time" },
  { Value: "Pacific/Gambier", Text: "(UTC-09:00) Gambier" },
  { Value: "America/Los_Angeles", Text: "(UTC-08:00) Pacific Time" },
  { Value: "America/Tijuana", Text: "(UTC-08:00) Pacific Time - Tijuana" },
  { Value: "America/Vancouver", Text: "(UTC-08:00) Pacific Time - Vancouver" },
  { Value: "America/Whitehorse", Text: "(UTC-08:00) Pacific Time - Whitehorse" },
  { Value: "Pacific/Pitcairn", Text: "(UTC-08:00) Pitcairn" },
  { Value: "America/Denver", Text: "(UTC-07:00) Mountain Time" },
  { Value: "America/Phoenix", Text: "(UTC-07:00) Mountain Time - Arizona" },
  { Value: "America/Mazatlan", Text: "(UTC-07:00) Mountain Time - Chihuahua, Mazatlan" },
  { Value: "America/Dawson_Creek", Text: "(UTC-07:00) Mountain Time - Dawson Creek" },
  { Value: "America/Edmonton", Text: "(UTC-07:00) Mountain Time - Edmonton" },
  { Value: "America/Hermosillo", Text: "(UTC-07:00) Mountain Time - Hermosillo" },
  { Value: "America/Yellowknife", Text: "(UTC-07:00) Mountain Time - Yellowknife" },
  { Value: "America/Belize", Text: "(UTC-06:00) Belize" },
  { Value: "America/Chicago", Text: "(UTC-06:00) Central Time" },
  { Value: "America/Mexico_City", Text: "(UTC-06:00) Central Time - Mexico City" },
  { Value: "America/Regina", Text: "(UTC-06:00) Central Time - Regina" },
  { Value: "America/Tegucigalpa", Text: "(UTC-06:00) Central Time - Tegucigalpa" },
  { Value: "America/Winnipeg", Text: "(UTC-06:00) Central Time - Winnipeg" },
  { Value: "America/Costa_Rica", Text: "(UTC-06:00) Costa Rica" },
  { Value: "America/El_Salvador", Text: "(UTC-06:00) El Salvador" },
  { Value: "Pacific/Galapagos", Text: "(UTC-06:00) Galapagos" },
  { Value: "America/Guatemala", Text: "(UTC-06:00) Guatemala" },
  { Value: "America/Managua", Text: "(UTC-06:00) Managua" },
  { Value: "America/Cancun", Text: "(UTC-05:00) America Cancun" },
  { Value: "America/Bogota", Text: "(UTC-05:00) Bogota" },
  { Value: "Pacific/Easter", Text: "(UTC-05:00) Easter Island" },
  { Value: "America/New_York", Text: "(UTC-05:00) Eastern Time" },
  { Value: "America/Iqaluit", Text: "(UTC-05:00) Eastern Time - Iqaluit" },
  { Value: "America/Toronto", Text: "(UTC-05:00) Eastern Time - Toronto" },
  { Value: "America/Guayaquil", Text: "(UTC-05:00) Guayaquil" },
  { Value: "America/Havana", Text: "(UTC-05:00) Havana" },
  { Value: "America/Jamaica", Text: "(UTC-05:00) Jamaica" },
  { Value: "America/Lima", Text: "(UTC-05:00) Lima" },
  { Value: "America/Nassau", Text: "(UTC-05:00) Nassau" },
  { Value: "America/Panama", Text: "(UTC-05:00) Panama" },
  { Value: "America/Port-au-Prince", Text: "(UTC-05:00) Port-au-Prince" },
  { Value: "America/Rio_Branco", Text: "(UTC-05:00) Rio Branco" },
  { Value: "America/Halifax", Text: "(UTC-04:00) Atlantic Time - Halifax" },
  { Value: "America/Barbados", Text: "(UTC-04:00) Barbados" },
  { Value: "Atlantic/Bermuda", Text: "(UTC-04:00) Bermuda" },
  { Value: "America/Boa_Vista", Text: "(UTC-04:00) Boa Vista" },
  { Value: "America/Caracas", Text: "(UTC-04:00) Caracas" },
  { Value: "America/Curacao", Text: "(UTC-04:00) Curacao" },
  { Value: "America/Grand_Turk", Text: "(UTC-04:00) Grand Turk" },
  { Value: "America/Guyana", Text: "(UTC-04:00) Guyana" },
  { Value: "America/La_Paz", Text: "(UTC-04:00) La Paz" },
  { Value: "America/Manaus", Text: "(UTC-04:00) Manaus" },
  { Value: "America/Martinique", Text: "(UTC-04:00) Martinique" },
  { Value: "America/Port_of_Spain", Text: "(UTC-04:00) Port of Spain" },
  { Value: "America/Porto_Velho", Text: "(UTC-04:00) Porto Velho" },
  { Value: "America/Puerto_Rico", Text: "(UTC-04:00) Puerto Rico" },
  { Value: "America/Santo_Domingo", Text: "(UTC-04:00) Santo Domingo" },
  { Value: "America/Thule", Text: "(UTC-04:00) Thule" },
  { Value: "America/St_Johns", Text: "(UTC-03:30) Newfoundland Time - St. Johns" },
  { Value: "America/Araguaina", Text: "(UTC-03:00) Araguaina" },
  { Value: "America/Asuncion", Text: "(UTC-03:00) Asuncion" },
  { Value: "America/Belem", Text: "(UTC-03:00) Belem" },
  { Value: "America/Argentina/Buenos_Aires", Text: "(UTC-03:00) Buenos Aires" },
  { Value: "America/Campo_Grande", Text: "(UTC-03:00) Campo Grande" },
  { Value: "America/Cayenne", Text: "(UTC-03:00) Cayenne" },
  { Value: "America/Cuiaba", Text: "(UTC-03:00) Cuiaba" },
  { Value: "America/Fortaleza", Text: "(UTC-03:00) Fortaleza" },
  { Value: "America/Godthab", Text: "(UTC-03:00) Godthab" },
  { Value: "America/Maceio", Text: "(UTC-03:00) Maceio" },
  { Value: "America/Miquelon", Text: "(UTC-03:00) Miquelon" },
  { Value: "America/Montevideo", Text: "(UTC-03:00) Montevideo" },
  { Value: "Antarctica/Palmer", Text: "(UTC-03:00) Palmer" },
  { Value: "America/Paramaribo", Text: "(UTC-03:00) Paramaribo" },
  { Value: "America/Punta_Arenas", Text: "(UTC-03:00) Punta Arenas" },
  { Value: "America/Recife", Text: "(UTC-03:00) Recife" },
  { Value: "Antarctica/Rothera", Text: "(UTC-03:00) Rothera" },
  { Value: "America/Bahia", Text: "(UTC-03:00) Salvador" },
  { Value: "America/Santiago", Text: "(UTC-03:00) Santiago" },
  { Value: "Atlantic/Stanley", Text: "(UTC-03:00) Stanley" },
  { Value: "America/Noronha", Text: "(UTC-02:00) Noronha" },
  { Value: "America/Sao_Paulo", Text: "(UTC-02:00) Sao Paulo" },
  { Value: "Atlantic/South_Georgia", Text: "(UTC-02:00) South Georgia" },
  { Value: "Atlantic/Azores", Text: "(UTC-01:00) Azores" },
  { Value: "Atlantic/Cape_Verde", Text: "(UTC-01:00) Cape Verde" },
  { Value: "America/Scoresbysund", Text: "(UTC-01:00) Scoresbysund" },
  { Value: "Africa/Abidjan", Text: "(UTC+00:00) Abidjan" },
  { Value: "Africa/Accra", Text: "(UTC+00:00) Accra" },
  { Value: "Africa/Bissau", Text: "(UTC+00:00) Bissau" },
  { Value: "Atlantic/Canary", Text: "(UTC+00:00) Canary Islands" },
  { Value: "Africa/Casablanca", Text: "(UTC+00:00) Casablanca" },
  { Value: "America/Danmarkshavn", Text: "(UTC+00:00) Danmarkshavn" },
  { Value: "Europe/Dublin", Text: "(UTC+00:00) Dublin" },
  { Value: "Africa/El_Aaiun", Text: "(UTC+00:00) El Aaiun" },
  { Value: "Atlantic/Faroe", Text: "(UTC+00:00) Faeroe" },
  { Value: "Etc/UTC", Text: "(UTC+00:00) UTC (no daylight saving)" },
  { Value: "Europe/Lisbon", Text: "(UTC+00:00) Lisbon" },
  { Value: "Europe/London", Text: "(UTC+00:00) London" },
  { Value: "Africa/Monrovia", Text: "(UTC+00:00) Monrovia" },
  { Value: "Atlantic/Reykjavik", Text: "(UTC+00:00) Reykjavik" },
  { Value: "UTC", Text: "UTC" },
  { Value: "Africa/Algiers", Text: "(UTC+01:00) Algiers" },
  { Value: "Europe/Amsterdam", Text: "(UTC+01:00) Amsterdam" },
  { Value: "Europe/Andorra", Text: "(UTC+01:00) Andorra" },
  { Value: "Europe/Berlin", Text: "(UTC+01:00) Berlin" },
  { Value: "Europe/Brussels", Text: "(UTC+01:00) Brussels" },
  { Value: "Europe/Budapest", Text: "(UTC+01:00) Budapest" },
  { Value: "Europe/Belgrade", Text: "(UTC+01:00) Central European Time - Belgrade" },
  { Value: "Europe/Prague", Text: "(UTC+01:00) Central European Time - Prague" },
  { Value: "Africa/Ceuta", Text: "(UTC+01:00) Ceuta" },
  { Value: "Europe/Copenhagen", Text: "(UTC+01:00) Copenhagen" },
  { Value: "Europe/Gibraltar", Text: "(UTC+01:00) Gibraltar" },
  { Value: "Africa/Lagos", Text: "(UTC+01:00) Lagos" },
  { Value: "Europe/Luxembourg", Text: "(UTC+01:00) Luxembourg" },
  { Value: "Europe/Madrid", Text: "(UTC+01:00) Madrid" },
  { Value: "Europe/Malta", Text: "(UTC+01:00) Malta" },
  { Value: "Europe/Monaco", Text: "(UTC+01:00) Monaco" },
  { Value: "Africa/Ndjamena", Text: "(UTC+01:00) Ndjamena" },
  { Value: "Europe/Oslo", Text: "(UTC+01:00) Oslo" },
  { Value: "Europe/Paris", Text: "(UTC+01:00) Paris" },
  { Value: "Europe/Rome", Text: "(UTC+01:00) Rome" },
  { Value: "Europe/Stockholm", Text: "(UTC+01:00) Stockholm" },
  { Value: "Europe/Tirane", Text: "(UTC+01:00) Tirane" },
  { Value: "Africa/Tunis", Text: "(UTC+01:00) Tunis" },
  { Value: "Europe/Vienna", Text: "(UTC+01:00) Vienna" },
  { Value: "Europe/Warsaw", Text: "(UTC+01:00) Warsaw" },
  { Value: "Europe/Zurich", Text: "(UTC+01:00) Zurich" },
  { Value: "Asia/Amman", Text: "(UTC+02:00) Amman" },
  { Value: "Europe/Athens", Text: "(UTC+02:00) Athens" },
  { Value: "Asia/Beirut", Text: "(UTC+02:00) Beirut" },
  { Value: "Europe/Bucharest", Text: "(UTC+02:00) Bucharest" },
  { Value: "Africa/Cairo", Text: "(UTC+02:00) Cairo" },
  { Value: "Europe/Chisinau", Text: "(UTC+02:00) Chisinau" },
  { Value: "Asia/Damascus", Text: "(UTC+02:00) Damascus" },
  { Value: "Asia/Gaza", Text: "(UTC+02:00) Gaza" },
  { Value: "Europe/Helsinki", Text: "(UTC+02:00) Helsinki" },
  { Value: "Asia/Jerusalem", Text: "(UTC+02:00) Jerusalem" },
  { Value: "Africa/Johannesburg", Text: "(UTC+02:00) Johannesburg" },
  { Value: "Africa/Khartoum", Text: "(UTC+02:00) Khartoum" },
  { Value: "Europe/Kiev", Text: "(UTC+02:00) Kiev" },
  { Value: "Africa/Maputo", Text: "(UTC+02:00) Maputo" },
  { Value: "Europe/Kaliningrad", Text: "(UTC+02:00) Moscow-01 - Kaliningrad" },
  { Value: "Asia/Nicosia", Text: "(UTC+02:00) Nicosia" },
  { Value: "Europe/Riga", Text: "(UTC+02:00) Riga" },
  { Value: "Europe/Sofia", Text: "(UTC+02:00) Sofia" },
  { Value: "Europe/Tallinn", Text: "(UTC+02:00) Tallinn" },
  { Value: "Africa/Tripoli", Text: "(UTC+02:00) Tripoli" },
  { Value: "Europe/Vilnius", Text: "(UTC+02:00) Vilnius" },
  { Value: "Africa/Windhoek", Text: "(UTC+02:00) Windhoek" },
  { Value: "Asia/Baghdad", Text: "(UTC+03:00) Baghdad" },
  { Value: "Europe/Istanbul", Text: "(UTC+03:00) Istanbul" },
  { Value: "Europe/Minsk", Text: "(UTC+03:00) Minsk" },
  { Value: "Europe/Moscow", Text: "(UTC+03:00) Moscow+00 - Moscow" },
  { Value: "Africa/Nairobi", Text: "(UTC+03:00) Nairobi" },
  { Value: "Asia/Qatar", Text: "(UTC+03:00) Qatar" },
  { Value: "Asia/Riyadh", Text: "(UTC+03:00) Riyadh" },
  { Value: "Antarctica/Syowa", Text: "(UTC+03:00) Syowa" },
  { Value: "Asia/Tehran", Text: "(UTC+03:30) Tehran" },
  { Value: "Asia/Baku", Text: "(UTC+04:00) Baku" },
  { Value: "Asia/Dubai", Text: "(UTC+04:00) Dubai" },
  { Value: "Indian/Mahe", Text: "(UTC+04:00) Mahe" },
  { Value: "Indian/Mauritius", Text: "(UTC+04:00) Mauritius" },
  { Value: "Europe/Samara", Text: "(UTC+04:00) Moscow+01 - Samara" },
  { Value: "Indian/Reunion", Text: "(UTC+04:00) Reunion" },
  { Value: "Asia/Tbilisi", Text: "(UTC+04:00) Tbilisi" },
  { Value: "Asia/Yerevan", Text: "(UTC+04:00) Yerevan" },
  { Value: "Asia/Kabul", Text: "(UTC+04:30) Kabul" },
  { Value: "Asia/Aqtau", Text: "(UTC+05:00) Aqtau" },
  { Value: "Asia/Aqtobe", Text: "(UTC+05:00) Aqtobe" },
  { Value: "Asia/Ashgabat", Text: "(UTC+05:00) Ashgabat" },
  { Value: "Asia/Dushanbe", Text: "(UTC+05:00) Dushanbe" },
  { Value: "Asia/Karachi", Text: "(UTC+05:00) Karachi" },
  { Value: "Indian/Kerguelen", Text: "(UTC+05:00) Kerguelen" },
  { Value: "Indian/Maldives", Text: "(UTC+05:00) Maldives" },
  { Value: "Antarctica/Mawson", Text: "(UTC+05:00) Mawson" },
  { Value: "Asia/Yekaterinburg", Text: "(UTC+05:00) Moscow+02 - Yekaterinburg" },
  { Value: "Asia/Tashkent", Text: "(UTC+05:00) Tashkent" },
  { Value: "Asia/Colombo", Text: "(UTC+05:30) Colombo" },
  { Value: "Asia/Kolkata", Text: "(UTC+05:30) India Standard Time" },
  { Value: "Asia/Katmandu", Text: "(UTC+05:45) Katmandu" },
  { Value: "Asia/Almaty", Text: "(UTC+06:00) Almaty" },
  { Value: "Asia/Bishkek", Text: "(UTC+06:00) Bishkek" },
  { Value: "Indian/Chagos", Text: "(UTC+06:00) Chagos" },
  { Value: "Asia/Dhaka", Text: "(UTC+06:00) Dhaka" },
  { Value: "Asia/Omsk", Text: "(UTC+06:00) Moscow+03 - Omsk" },
  { Value: "Asia/Thimphu", Text: "(UTC+06:00) Thimphu" },
  { Value: "Antarctica/Vostok", Text: "(UTC+06:00) Vostok" },
  { Value: "Indian/Cocos", Text: "(UTC+06:30) Cocos" },
  { Value: "Asia/Yangon", Text: "(UTC+06:30) Rangoon" },
  { Value: "Asia/Bangkok", Text: "(UTC+07:00) Bangkok" },
  { Value: "Indian/Christmas", Text: "(UTC+07:00) Christmas" },
  { Value: "Antarctica/Davis", Text: "(UTC+07:00) Davis" },
  { Value: "Asia/Saigon", Text: "(UTC+07:00) Hanoi" },
  { Value: "Asia/Hovd", Text: "(UTC+07:00) Hovd" },
  { Value: "Asia/Jakarta", Text: "(UTC+07:00) Jakarta" },
  { Value: "Asia/Krasnoyarsk", Text: "(UTC+07:00) Moscow+04 - Krasnoyarsk" },
  { Value: "Asia/Brunei", Text: "(UTC+08:00) Brunei" },
  { Value: "Asia/Shanghai", Text: "(UTC+08:00) China Time - Beijing" },
  { Value: "Asia/Choibalsan", Text: "(UTC+08:00) Choibalsan" },
  { Value: "Asia/Hong_Kong", Text: "(UTC+08:00) Hong Kong" },
  { Value: "Asia/Kuala_Lumpur", Text: "(UTC+08:00) Kuala Lumpur" },
  { Value: "Asia/Macau", Text: "(UTC+08:00) Macau" },
  { Value: "Asia/Makassar", Text: "(UTC+08:00) Makassar" },
  { Value: "Asia/Manila", Text: "(UTC+08:00) Manila" },
  { Value: "Asia/Irkutsk", Text: "(UTC+08:00) Moscow+05 - Irkutsk" },
  { Value: "Asia/Singapore", Text: "(UTC+08:00) Singapore" },
  { Value: "Asia/Taipei", Text: "(UTC+08:00) Taipei" },
  { Value: "Asia/Ulaanbaatar", Text: "(UTC+08:00) Ulaanbaatar" },
  { Value: "Australia/Perth", Text: "(UTC+08:00) Western Time - Perth" },
  { Value: "Asia/Pyongyang", Text: "(UTC+08:30) Pyongyang" },
  { Value: "Asia/Dili", Text: "(UTC+09:00) Dili" },
  { Value: "Asia/Jayapura", Text: "(UTC+09:00) Jayapura" },
  { Value: "Asia/Yakutsk", Text: "(UTC+09:00) Moscow+06 - Yakutsk" },
  { Value: "Pacific/Palau", Text: "(UTC+09:00) Palau" },
  { Value: "Asia/Seoul", Text: "(UTC+09:00) Seoul" },
  { Value: "Asia/Tokyo", Text: "(UTC+09:00) Tokyo" },
  { Value: "Australia/Darwin", Text: "(UTC+09:30) Central Time - Darwin" },
  { Value: "Antarctica/DumontDUrville", Text: '(UTC+10:00) Dumont D"Urville' },
  { Value: "Australia/Brisbane", Text: "(UTC+10:00) Eastern Time - Brisbane" },
  { Value: "Pacific/Guam", Text: "(UTC+10:00) Guam" },
  { Value: "Asia/Vladivostok", Text: "(UTC+10:00) Moscow+07 - Vladivostok" },
  { Value: "Pacific/Port_Moresby", Text: "(UTC+10:00) Port Moresby" },
  { Value: "Pacific / Chuuk", Text: "(UTC+10:00) Truk" },
  { Value: "Australia/Adelaide", Text: "(UTC+10:30) Central Time - Adelaide" },
  { Value: "Antarctica/Casey", Text: "(UTC+11:00) Casey" },
  { Value: "Australia/Hobart", Text: "(UTC+11:00) Eastern Time - Hobart" },
  { Value: "Australia/Sydney", Text: "(UTC+11:00) Eastern Time - Melbourne, Sydney" },
  { Value: "Pacific/Efate", Text: "(UTC+11:00) Efate" },
  { Value: "Pacific/Guadalcanal", Text: "(UTC+11:00) Guadalcanal" },
  { Value: "Pacific/Kosrae", Text: "(UTC+11:00) Kosrae" },
  { Value: "Asia/Magadan", Text: "(UTC+11:00) Moscow+08 - Magadan" },
  { Value: "Pacific / Norfolk", Text: "(UTC+11:00) Norfolk" },
  { Value: "Pacific/Noumea", Text: "(UTC+11:00) Noumea" },
  { Value: "Pacific/Pohnpei", Text: "(UTC+11:00) Ponape" },
  { Value: "Pacific/Funafuti", Text: "(UTC+12:00) Funafuti" },
  { Value: "Pacific/Kwajalein", Text: "(UTC+12:00) Kwajalein" },
  { Value: "Pacific/Majuro", Text: "(UTC+12:00) Majuro" },
  { Value: "Asia/Kamchatka", Text: "(UTC+12:00) Moscow+09 - Petropavlovsk - Kamchatskiy" },
  { Value: "Pacific / Nauru", Text: "(UTC+12:00) Nauru" },
  { Value: "Pacific/Tarawa", Text: "(UTC+12:00) Tarawa" },
  { Value: "Pacific/Wake", Text: "(UTC+12:00) Wake" },
  { Value: "Pacific/Wallis", Text: "(UTC+12:00) Wallis" },
  { Value: "Pacific/Auckland", Text: "(UTC+13:00) Auckland" },
  { Value: "Pacific/Enderbury", Text: "(UTC+13:00) Enderbury" },
  { Value: "Pacific/Fakaofo", Text: "(UTC+13:00) Fakaofo" },
  { Value: "Pacific/Fiji", Text: "(UTC+13:00) Fiji" },
  { Value: "Pacific/Tongatapu", Text: "(UTC+13:00) Tongatapu" },
  { Value: "Pacific/Apia", Text: "(UTC+14:00) Apia" },
  { Value: "Pacific/Kiritimati", Text: "(UTC+14:00) Kiritimati" }
];
function generateSummary(rule, localeObject, locale, calendarType) {
  if (calendarType === void 0) {
    calendarType = "Gregorian";
  }
  var ruleObject = extractObjectFromRule(rule);
  var summary = localeObject.getConstant(EVERY) + " ";
  var cldrObj;
  var cldrObj1;
  var calendarMode = calendarType.toLowerCase();
  if (locale === "en" || locale === "en-US") {
    var nameSpace1 = "months.stand-alone.abbreviated";
    var nameSpace = "days.stand-alone.abbreviated";
    cldrObj1 = getValue(nameSpace1, getDefaultDateObject(calendarMode));
    cldrObj = getValue(nameSpace, getDefaultDateObject(calendarMode));
  } else {
    var nameSpace1 = "main." + locale + ".dates.calendars." + calendarMode + ".months.stand-alone.abbreviated";
    var nameSpace = "main." + locale + ".dates.calendars." + calendarMode + ".days.stand-alone.abbreviated";
    cldrObj1 = getValue(nameSpace1, cldrData);
    cldrObj = getValue(nameSpace, cldrData);
  }
  if (ruleObject.interval > 1) {
    summary += ruleObject.interval + " ";
  }
  switch (ruleObject.freq) {
    case "DAILY":
      summary += localeObject.getConstant(DAYS);
      break;
    case "WEEKLY":
      summary += localeObject.getConstant(WEEKS) + " " + localeObject.getConstant(ON$1) + " ";
      ruleObject.day.forEach(function(day, index) {
        summary += capitalizeFirstWord(getValue(DAYINDEXOBJECT["" + day], cldrObj), "single");
        summary += ruleObject.day.length - 1 === index ? "" : ", ";
      });
      break;
    case "MONTHLY":
      summary += localeObject.getConstant(MONTHS) + " " + localeObject.getConstant(ON$1) + " ";
      summary += getMonthSummary(ruleObject, cldrObj, localeObject);
      break;
    case "YEARLY":
      summary += localeObject.getConstant(YEARS) + " " + localeObject.getConstant(ON$1) + " ";
      summary += capitalizeFirstWord(getValue(ruleObject.month[0].toString(), cldrObj1), "single") + " ";
      summary += getMonthSummary(ruleObject, cldrObj, localeObject);
      break;
  }
  if (ruleObject.count) {
    summary += ", " + ruleObject.count + " " + localeObject.getConstant(TIMES);
  } else if (ruleObject.until) {
    var tempDate = ruleObject.until;
    summary += ", " + localeObject.getConstant(UNTIL$1) + " " + tempDate.getDate() + " " + capitalizeFirstWord(getValue((tempDate.getMonth() + 1).toString(), cldrObj1), "single") + " " + tempDate.getFullYear();
  }
  return summary;
}
function getMonthSummary(ruleObject, cldrObj, localeObj) {
  var summary = "";
  if (ruleObject.monthDay.length) {
    summary += ruleObject.monthDay[0];
  } else if (ruleObject.day) {
    var pos = ruleObject.setPosition - 1;
    summary += localeObj.getConstant(WEEKPOS[pos > -1 ? pos : WEEKPOS.length - 1]) + " " + capitalizeFirstWord(getValue(DAYINDEXOBJECT[ruleObject.day[0]], cldrObj), "single");
  }
  return summary;
}
function generate(startDate, rule, excludeDate, startDayOfWeek, maximumCount, viewDate, calendarMode, oldTimezone, newTimezone) {
  if (maximumCount === void 0) {
    maximumCount = MAXOCCURRENCE;
  }
  if (viewDate === void 0) {
    viewDate = null;
  }
  if (calendarMode === void 0) {
    calendarMode = "Gregorian";
  }
  if (oldTimezone === void 0) {
    oldTimezone = null;
  }
  if (newTimezone === void 0) {
    newTimezone = null;
  }
  var ruleObject = extractObjectFromRule(rule);
  var cacheDate;
  calendarUtil = getCalendarUtil(calendarMode);
  var data = [];
  var modifiedDate = new Date(startDate.getTime());
  tempExcludeDate = [];
  var tempDate = isNullOrUndefined(excludeDate) ? [] : excludeDate.split(",");
  var tz = new Timezone();
  tempDate.forEach(function(content) {
    var parsedDate = getDateFromRecurrenceDateString(content);
    if (oldTimezone && newTimezone) {
      parsedDate = tz.convert(new Date(parsedDate.getTime()), oldTimezone, newTimezone);
    }
    tempExcludeDate.push(new Date(parsedDate.getTime()).setHours(0, 0, 0, 0));
  });
  ruleObject.recExceptionCount = !isNullOrUndefined(ruleObject.count) ? tempExcludeDate.length : 0;
  if (viewDate && viewDate > startDate && !ruleObject.count) {
    tempViewDate = new Date(new Date(viewDate.getTime()).setHours(0, 0, 0));
  } else {
    tempViewDate = null;
  }
  if (!ruleObject.until && tempViewDate) {
    cacheDate = new Date(tempViewDate.getTime());
    cacheDate.setDate(tempViewDate.getDate() + maximumCount * ruleObject.interval);
    ruleObject.until = cacheDate;
  }
  if (ruleObject.until && startDate > ruleObject.until) {
    return data;
  }
  maxOccurrence = maximumCount;
  setFirstDayOfWeek(DAYINDEX[parseInt(startDayOfWeek.toString(), 10)]);
  if (ruleObject.until) {
    var end = resetTime(ruleObject.until);
    ruleObject.until = new Date(end.getFullYear(), end.getMonth(), end.getDate(), 23, 59, 59);
  }
  switch (ruleObject.freq) {
    case "DAILY":
      dailyType(modifiedDate, ruleObject.until, data, ruleObject);
      break;
    case "WEEKLY":
      weeklyType(modifiedDate, ruleObject.until, data, ruleObject);
      break;
    case "MONTHLY":
      monthlyType(modifiedDate, ruleObject.until, data, ruleObject);
      break;
    case "YEARLY":
      yearlyType(modifiedDate, ruleObject.until, data, ruleObject);
  }
  return data;
}
function getDateFromRecurrenceDateString(recDateString) {
  return /* @__PURE__ */ new Date(recDateString.substr(0, 4) + "-" + recDateString.substr(4, 2) + "-" + recDateString.substr(6, 5) + ":" + recDateString.substr(11, 2) + ":" + recDateString.substr(13));
}
function excludeDateHandler(data, date) {
  var zeroIndex = new Date(date).setHours(0, 0, 0, 0);
  if (tempExcludeDate.indexOf(zeroIndex) === -1 && (!tempViewDate || zeroIndex >= tempViewDate.getTime())) {
    data.push(date);
  }
}
function getDateCount(startDate, ruleObject) {
  var count = maxOccurrence;
  if (ruleObject.count) {
    count = ruleObject.count;
  } else if (ruleObject.until) {
    if (ruleObject.freq === "DAILY" || ruleObject.freq === "WEEKLY") {
      count = Math.floor((ruleObject.until.getTime() - startDate.getTime()) / MS_PER_DAY) + 1;
    } else if (ruleObject.freq === "MONTHLY" || ruleObject.freq === "YEARLY") {
      count = Math.floor((ruleObject.until.getMonth() + 12 * ruleObject.until.getFullYear() - (startDate.getMonth() + 12 * startDate.getFullYear())) / ruleObject.interval) + (ruleObject.day.length > 1 ? Math.floor((ruleObject.until.getTime() - startDate.getTime()) / MS_PER_DAY) + 1 : 1);
      if (ruleObject.freq === "YEARLY") {
        count = ruleObject.month.length > 1 ? count * ruleObject.month.length : count;
      }
    }
  }
  return count;
}
function dailyType(startDate, endDate, data, ruleObject) {
  var tempDate = new Date(startDate.getTime());
  var interval = ruleObject.interval;
  var expectedCount = getDateCount(startDate, ruleObject);
  var state;
  var expectedDays = ruleObject.day;
  while (compareDates(tempDate, endDate)) {
    state = true;
    state = validateRules(tempDate, ruleObject);
    if (state && (expectedDays.indexOf(DAYINDEX[tempDate.getDay()]) > -1 || expectedDays.length === 0)) {
      excludeDateHandler(data, tempDate.getTime());
      if (expectedCount && data.length + ruleObject.recExceptionCount >= expectedCount) {
        break;
      }
    }
    tempDate.setDate(tempDate.getDate() + interval);
    if (tempDate.getHours() !== startDate.getHours()) {
      tempDate.setHours(startDate.getHours());
    }
  }
}
function weeklyType(startDate, endDate, data, ruleObject) {
  var tempDate = new Date(startDate.getTime());
  if (!ruleObject.day.length) {
    ruleObject.day.push(DAYINDEX[startDate.getDay()]);
  }
  var interval = ruleObject.interval;
  var expectedDays = ruleObject.day;
  var expectedCount = getDateCount(startDate, ruleObject);
  var weekState = true;
  var wkstIndex;
  var weekCollection = [];
  if (expectedDays.length > 1) {
    if (isNullOrUndefined(ruleObject.wkst) || ruleObject.wkst === "") {
      ruleObject.wkst = dayIndex[0];
    }
    wkstIndex = DAYINDEX.indexOf(ruleObject.wkst);
    while (compareDates(tempDate, endDate)) {
      var startDateDiff = DAYINDEX.indexOf(DAYINDEX[tempDate.getDay()]) - wkstIndex;
      startDateDiff = startDateDiff === -1 ? 6 : startDateDiff;
      var weekstartDate = addDays(tempDate, -startDateDiff);
      var weekendDate = addDays(weekstartDate, 6);
      var compareTempDate = new Date(tempDate.getTime());
      weekendDate = resetTime(weekendDate);
      compareTempDate = resetTime(compareTempDate);
      while (weekendDate >= compareTempDate) {
        if (expectedDays.indexOf(DAYINDEX[tempDate.getDay()]) > -1) {
          weekCollection.push([tempDate.getTime()]);
        }
        if (expectedCount && data.length + ruleObject.recExceptionCount >= expectedCount) {
          break;
        }
        tempDate.setDate(tempDate.getDate() + 1);
        if (tempDate.getHours() !== startDate.getHours()) {
          tempDate.setHours(startDate.getHours());
        }
        compareTempDate = new Date(tempDate.getTime());
        compareTempDate = resetTime(compareTempDate);
      }
      tempDate.setDate(tempDate.getDate() - 1);
      if (expectedCount && data.length + ruleObject.recExceptionCount >= expectedCount) {
        break;
      }
      tempDate.setDate(tempDate.getDate() + 1 + (interval - 1) * 7);
      insertDataCollection(weekCollection, weekState, startDate, endDate, data, ruleObject);
      weekCollection = [];
    }
  } else {
    tempDate = getStartDateForWeek(startDate, ruleObject.day);
    while (compareDates(tempDate, endDate)) {
      weekState = validateRules(tempDate, ruleObject);
      if (weekState && expectedDays.indexOf(DAYINDEX[tempDate.getDay()]) > -1) {
        excludeDateHandler(data, tempDate.getTime());
      }
      if (expectedCount && data.length + ruleObject.recExceptionCount >= expectedCount) {
        break;
      }
      tempDate.setDate(tempDate.getDate() + interval * 7);
    }
    insertDataCollection(weekCollection, weekState, startDate, endDate, data, ruleObject);
    weekCollection = [];
  }
}
function monthlyType(startDate, endDate, data, ruleObject) {
  if (!ruleObject.month.length && !ruleObject.day.length && !ruleObject.monthDay.length) {
    ruleObject.monthDay.push(startDate.getDate());
    if (ruleObject.freq === "YEARLY") {
      ruleObject.month.push(startDate.getMonth() + 1);
    }
  } else if (ruleObject.month.length > 0 && !ruleObject.day.length && !ruleObject.monthDay.length) {
    ruleObject.monthDay.push(startDate.getDate());
  }
  var ruleType = validateMonthlyRuleType(ruleObject);
  switch (ruleType) {
    case "day":
      switch (ruleObject.freq) {
        case "MONTHLY":
          monthlyDayTypeProcessforMonthFreq(startDate, endDate, data, ruleObject);
          break;
        case "YEARLY":
          monthlyDayTypeProcess(startDate, endDate, data, ruleObject);
          break;
      }
      break;
    case "both":
    case "date":
      switch (ruleObject.freq) {
        case "MONTHLY":
          monthlyDateTypeProcessforMonthFreq(startDate, endDate, data, ruleObject);
          break;
        case "YEARLY":
          monthlyDateTypeProcess(startDate, endDate, data, ruleObject);
          break;
      }
      break;
  }
}
function yearlyType(startDate, endDate, data, ruleObject) {
  var typeValue = checkYearlyType(ruleObject);
  switch (typeValue) {
    case "MONTH":
      monthlyType(startDate, endDate, data, ruleObject);
      break;
    case "WEEKNO":
      processWeekNo(startDate, endDate, data, ruleObject);
      break;
    case "YEARDAY":
      processYearDay(startDate, endDate, data, ruleObject);
      break;
  }
}
function processWeekNo(startDate, endDate, data, ruleObject) {
  var stDate = calendarUtil.getYearLastDate(startDate, 0);
  var tempDate;
  var expectedCount = getDateCount(startDate, ruleObject);
  var state;
  var startDay;
  var firstWeekSpan;
  var weekNos = ruleObject.weekNo;
  var weekNo;
  var maxDate;
  var minDate;
  var weekCollection = [];
  var expectedDays = ruleObject.day;
  while (compareDates(stDate, endDate)) {
    startDay = dayIndex.indexOf(DAYINDEX[stDate.getDay()]);
    firstWeekSpan = 6 - startDay + 1;
    for (var index = 0; index < weekNos.length; index++) {
      weekNo = weekNos[parseInt(index.toString(), 10)];
      weekNo = weekNo > 0 ? weekNo : 53 + weekNo + 1;
      maxDate = weekNo === 1 ? firstWeekSpan : firstWeekSpan + (weekNo - 1) * 7;
      minDate = weekNo === 1 ? firstWeekSpan - 7 : firstWeekSpan + (weekNo - 2) * 7;
      while (minDate < maxDate) {
        tempDate = new Date(stDate.getTime() + MS_PER_DAY * minDate);
        if (expectedDays.length === 0 || expectedDays.indexOf(DAYINDEX[tempDate.getDay()]) > -1) {
          if (isNullOrUndefined(ruleObject.setPosition)) {
            insertDateCollection(state, startDate, endDate, data, ruleObject, tempDate.getTime());
          } else {
            weekCollection.push([tempDate.getTime()]);
          }
        }
        minDate++;
      }
    }
    if (!isNullOrUndefined(ruleObject.setPosition)) {
      insertDatasIntoExistingCollection(weekCollection, state, startDate, endDate, data, ruleObject);
    }
    if (expectedCount && data.length + ruleObject.recExceptionCount >= expectedCount) {
      return;
    }
    stDate = calendarUtil.getYearLastDate(tempDate, ruleObject.interval);
    weekCollection = [];
  }
}
function processYearDay(startDate, endDate, data, ruleObject) {
  var stDate = calendarUtil.getYearLastDate(startDate, 0);
  var tempDate;
  var expectedCount = getDateCount(startDate, ruleObject);
  var state;
  var dateCollection = [];
  var date;
  var expectedDays = ruleObject.day;
  while (compareDates(stDate, endDate)) {
    for (var index = 0; index < ruleObject.yearDay.length; index++) {
      date = ruleObject.yearDay[parseInt(index.toString(), 10)];
      tempDate = new Date(stDate.getTime());
      if ((date === calendarUtil.getLeapYearDaysCount() || date === -calendarUtil.getLeapYearDaysCount()) && !calendarUtil.isLeapYear(calendarUtil.getFullYear(tempDate), 1)) {
        tempDate.setDate(tempDate.getDate() + 1);
        continue;
      }
      tempDate.setDate(tempDate.getDate() + (date < 0 ? calendarUtil.getYearDaysCount(tempDate, 1) + 1 + date : date));
      if (expectedDays.length === 0 || expectedDays.indexOf(DAYINDEX[tempDate.getDay()]) > -1) {
        if (ruleObject.setPosition == null) {
          insertDateCollection(state, startDate, endDate, data, ruleObject, tempDate.getTime());
        } else {
          dateCollection.push([tempDate.getTime()]);
        }
      }
    }
    if (!isNullOrUndefined(ruleObject.setPosition)) {
      insertDatasIntoExistingCollection(dateCollection, state, startDate, endDate, data, ruleObject);
    }
    if (expectedCount && data.length + ruleObject.recExceptionCount >= expectedCount) {
      return;
    }
    stDate = calendarUtil.getYearLastDate(tempDate, ruleObject.interval);
    dateCollection = [];
  }
}
function checkYearlyType(ruleObject) {
  if (ruleObject.yearDay.length) {
    return "YEARDAY";
  } else if (ruleObject.weekNo.length) {
    return "WEEKNO";
  }
  return "MONTH";
}
function initializeRecRuleVariables(startDate, ruleObject) {
  var ruleData = {
    monthCollection: [],
    index: 0,
    tempDate: new Date(startDate.getTime()),
    mainDate: new Date(startDate.getTime()),
    expectedCount: getDateCount(startDate, ruleObject),
    monthInit: 0,
    dateCollection: []
  };
  if (ruleObject.month.length) {
    calendarUtil.setMonth(ruleData.tempDate, ruleObject.month[0], ruleData.tempDate.getDate());
  }
  return ruleData;
}
function monthlyDateTypeProcess(startDate, endDate, data, ruleObject) {
  if (ruleObject.month.length) {
    monthlyDateTypeProcessforMonthFreq(startDate, endDate, data, ruleObject);
    return;
  }
  var ruleData = initializeRecRuleVariables(startDate, ruleObject);
  var currentMonthDate;
  ruleData.tempDate = ruleData.mainDate = calendarUtil.getMonthStartDate(ruleData.tempDate);
  while (compareDates(ruleData.tempDate, endDate)) {
    currentMonthDate = new Date(ruleData.tempDate.getTime());
    while (calendarUtil.isSameYear(currentMonthDate, ruleData.tempDate) && (ruleData.expectedCount && data.length + ruleObject.recExceptionCount <= ruleData.expectedCount)) {
      if (ruleObject.month.length === 0 || ruleObject.month.length > 0 && !calendarUtil.checkMonth(ruleData.tempDate, ruleObject.month)) {
        processDateCollectionForByMonthDay(ruleObject, ruleData, endDate, false);
        ruleData.beginDate = new Date(ruleData.tempDate.getTime());
        ruleData.monthInit = setNextValidDate(ruleData.tempDate, ruleObject, ruleData.monthInit, ruleData.beginDate);
      } else {
        calendarUtil.setValidDate(ruleData.tempDate, 1, 1);
        ruleData.tempDate = getStartDateForWeek(ruleData.tempDate, ruleObject.day);
        break;
      }
    }
    ruleData.tempDate.setFullYear(currentMonthDate.getFullYear(), currentMonthDate.getMonth(), currentMonthDate.getDate());
    insertDataCollection(ruleData.dateCollection, ruleData.state, startDate, endDate, data, ruleObject);
    if (calendarUtil.isLastMonth(ruleData.tempDate)) {
      calendarUtil.setValidDate(ruleData.tempDate, 1, 1);
      ruleData.tempDate = getStartDateForWeek(ruleData.tempDate, ruleObject.day);
    }
    if (ruleData.expectedCount && data.length + ruleObject.recExceptionCount >= ruleData.expectedCount) {
      return;
    }
    ruleData.tempDate.setFullYear(ruleData.tempDate.getFullYear() + ruleObject.interval - 1);
    ruleData.tempDate = getStartDateForWeek(ruleData.tempDate, ruleObject.day);
    ruleData.monthInit = setNextValidDate(ruleData.tempDate, ruleObject, ruleData.monthInit, ruleData.beginDate);
    ruleData.dateCollection = [];
  }
}
function monthlyDateTypeProcessforMonthFreq(startDate, endDate, data, ruleObject) {
  var ruleData = initializeRecRuleVariables(startDate, ruleObject);
  ruleData.tempDate = ruleData.mainDate = calendarUtil.getMonthStartDate(ruleData.tempDate);
  if ((ruleObject.freq === "MONTHLY" && ruleObject.interval === 12 || ruleObject.freq === "YEARLY") && calendarUtil.getMonthDaysCount(startDate) < ruleObject.monthDay[0]) {
    return;
  }
  while (compareDates(ruleData.tempDate, endDate)) {
    ruleData.beginDate = new Date(ruleData.tempDate.getTime());
    processDateCollectionForByMonthDay(ruleObject, ruleData, endDate, true, startDate, data);
    if (!isNullOrUndefined(ruleObject.setPosition)) {
      insertDatasIntoExistingCollection(ruleData.dateCollection, ruleData.state, startDate, endDate, data, ruleObject);
    }
    if (ruleData.expectedCount && data.length + ruleObject.recExceptionCount >= ruleData.expectedCount) {
      return;
    }
    ruleData.monthInit = setNextValidDate(ruleData.tempDate, ruleObject, ruleData.monthInit, ruleData.beginDate);
    ruleData.dateCollection = [];
  }
}
function processDateCollectionForByMonthDay(ruleObject, recRuleVariables, endDate, isByMonth, startDate, data) {
  for (var index = 0; index < ruleObject.monthDay.length; index++) {
    recRuleVariables.date = ruleObject.monthDay[parseInt(index.toString(), 10)];
    recRuleVariables.tempDate = calendarUtil.getMonthStartDate(recRuleVariables.tempDate);
    var maxDate = calendarUtil.getMonthDaysCount(recRuleVariables.tempDate);
    recRuleVariables.date = recRuleVariables.date > 0 ? recRuleVariables.date : maxDate + recRuleVariables.date + 1;
    if (validateProperDate(recRuleVariables.tempDate, recRuleVariables.date, recRuleVariables.mainDate) && recRuleVariables.date > 0) {
      calendarUtil.setDate(recRuleVariables.tempDate, recRuleVariables.date);
      if (endDate && recRuleVariables.tempDate > endDate) {
        return;
      }
      if (ruleObject.day.length === 0 || ruleObject.day.indexOf(DAYINDEX[recRuleVariables.tempDate.getDay()]) > -1) {
        if (isByMonth && isNullOrUndefined(ruleObject.setPosition) && (recRuleVariables.expectedCount && data.length + ruleObject.recExceptionCount < recRuleVariables.expectedCount)) {
          insertDateCollection(recRuleVariables.state, startDate, endDate, data, ruleObject, recRuleVariables.tempDate.getTime());
        } else {
          recRuleVariables.dateCollection.push([recRuleVariables.tempDate.getTime()]);
        }
      }
    }
  }
}
function setNextValidDate(tempDate, ruleObject, monthInit, beginDate, interval) {
  if (beginDate === void 0) {
    beginDate = null;
  }
  var monthData = beginDate ? beginDate.getMonth() : 0;
  var startDate = calendarUtil.getMonthStartDate(tempDate);
  interval = isNullOrUndefined(interval) ? ruleObject.interval : interval;
  tempDate.setFullYear(startDate.getFullYear());
  tempDate.setMonth(startDate.getMonth());
  tempDate.setDate(startDate.getDate());
  if (ruleObject.month.length) {
    monthInit++;
    monthInit = monthInit % ruleObject.month.length;
    calendarUtil.setMonth(tempDate, ruleObject.month[parseInt(monthInit.toString(), 10)], 1);
    if (monthInit === 0) {
      calendarUtil.addYears(tempDate, interval, ruleObject.month[0]);
    }
  } else {
    if (beginDate && beginDate.getFullYear() < tempDate.getFullYear()) {
      monthData = tempDate.getMonth() - 1;
    }
    calendarUtil.setValidDate(tempDate, interval, 1, monthData, beginDate);
  }
  return monthInit;
}
function getMonthCollection(startDate, endDate, data, ruleObject) {
  var expectedDays = ruleObject.day;
  var tempDate = new Date(startDate.getTime());
  tempDate = calendarUtil.getMonthStartDate(tempDate);
  var monthCollection = [];
  var dateCollection = [];
  var dates = [];
  var index;
  var state;
  var expectedCount = getDateCount(startDate, ruleObject);
  var monthInit = 0;
  var beginDate;
  if (ruleObject.month.length) {
    calendarUtil.setMonth(tempDate, ruleObject.month[0], 1);
  }
  tempDate = getStartDateForWeek(tempDate, ruleObject.day);
  while (compareDates(tempDate, endDate) && (expectedCount && data.length + ruleObject.recExceptionCount < expectedCount)) {
    var currentMonthDate = new Date(tempDate.getTime());
    var isHavingNumber = expectedDays.map(function(item) {
      return HASNUMBER.test(item);
    });
    if (isHavingNumber.indexOf(true) > -1) {
      for (var j = 0; j <= expectedDays.length - 1; j++) {
        var expectedDaysArray = expectedDays[parseInt(j.toString(), 10)].match(SPLITNUMBERANDSTRING);
        var position = parseInt(expectedDaysArray[0], 10);
        tempDate = new Date(tempDate.getTime());
        tempDate = calendarUtil.getMonthStartDate(tempDate);
        tempDate = getStartDateForWeek(tempDate, expectedDays);
        currentMonthDate.setFullYear(tempDate.getFullYear(), tempDate.getMonth(), tempDate.getDate());
        while (calendarUtil.isSameYear(currentMonthDate, tempDate) && calendarUtil.isSameMonth(currentMonthDate, tempDate)) {
          if (expectedDaysArray[expectedDaysArray.length - 1] === DAYINDEX[currentMonthDate.getDay()]) {
            monthCollection.push([currentMonthDate.getTime()]);
          }
          currentMonthDate.setDate(currentMonthDate.getDate() + 1);
        }
        currentMonthDate.setDate(currentMonthDate.getDate() - 1);
        if (expectedDaysArray[0].indexOf("-") > -1) {
          index = monthCollection.length - -1 * position;
        } else {
          index = position - 1;
        }
        index = isNaN(index) ? 0 : index;
        if (monthCollection.length > 0) {
          if (isNullOrUndefined(ruleObject.setPosition)) {
            insertDatasIntoExistingCollection(monthCollection, state, startDate, endDate, data, ruleObject, index);
          } else {
            dateCollection = [filterDateCollectionByIndex(monthCollection, index, dates)];
          }
        }
        if (expectedCount && data.length + ruleObject.recExceptionCount >= expectedCount) {
          return;
        }
        monthCollection = [];
      }
      if (!isNullOrUndefined(ruleObject.setPosition)) {
        insertDateCollectionBasedonBySetPos(dateCollection, state, startDate, endDate, data, ruleObject);
        dates = [];
      }
      monthInit = setNextValidDate(tempDate, ruleObject, monthInit, beginDate);
      tempDate = getStartDateForWeek(tempDate, ruleObject.day);
      monthCollection = [];
    } else {
      var weekCollection = [];
      var dayCycleData = processWeekDays(expectedDays);
      currentMonthDate.setFullYear(tempDate.getFullYear(), tempDate.getMonth(), tempDate.getDate());
      var initialDate = new Date(tempDate.getTime());
      beginDate = new Date(tempDate.getTime());
      while (calendarUtil.isSameMonth(initialDate, tempDate)) {
        weekCollection.push(tempDate.getTime());
        if (expectedDays.indexOf(DAYINDEX[tempDate.getDay()]) > -1) {
          monthCollection.push(weekCollection);
          weekCollection = [];
        }
        tempDate.setDate(tempDate.getDate() + dayCycleData[DAYINDEX[tempDate.getDay()]]);
      }
      index = ruleObject.setPosition < 1 ? monthCollection.length + ruleObject.setPosition : ruleObject.setPosition - 1;
      if (isNullOrUndefined(ruleObject.setPosition)) {
        index = 0;
        var datas = [];
        for (var week = 0; week < monthCollection.length; week++) {
          for (var row = 0; row < monthCollection[parseInt(week.toString(), 10)].length; row++) {
            datas.push(monthCollection[parseInt(week.toString(), 10)][parseInt(row.toString(), 10)]);
          }
        }
        monthCollection = [datas];
      }
      if (monthCollection.length > 0) {
        insertDatasIntoExistingCollection(monthCollection, state, startDate, endDate, data, ruleObject, index);
      }
      if (expectedCount && data.length + ruleObject.recExceptionCount >= expectedCount) {
        return;
      }
      monthInit = setNextValidDate(tempDate, ruleObject, monthInit, beginDate);
      tempDate = getStartDateForWeek(tempDate, ruleObject.day);
      monthCollection = [];
    }
  }
}
function monthlyDayTypeProcessforMonthFreq(startDate, endDate, data, ruleObject) {
  var expectedDays = ruleObject.day;
  if (expectedDays.length > 1) {
    getMonthCollection(startDate, endDate, data, ruleObject);
    return;
  }
  var tempDate = new Date(startDate.getTime());
  var expectedCount = getDateCount(startDate, ruleObject);
  var monthCollection = [];
  var beginDate;
  var monthInit = 0;
  tempDate = calendarUtil.getMonthStartDate(tempDate);
  if (ruleObject.month.length) {
    calendarUtil.setMonth(tempDate, ruleObject.month[0], 1);
  }
  tempDate = getStartDateForWeek(tempDate, ruleObject.day);
  while (compareDates(tempDate, endDate) && (expectedCount && data.length + ruleObject.recExceptionCount < expectedCount)) {
    beginDate = new Date(tempDate.getTime());
    var currentMonthDate = new Date(tempDate.getTime());
    while (calendarUtil.isSameMonth(tempDate, currentMonthDate)) {
      monthCollection.push([currentMonthDate.getTime()]);
      currentMonthDate.setDate(currentMonthDate.getDate() + 7);
    }
    insertDateCollectionBasedonIndex(monthCollection, startDate, endDate, data, ruleObject);
    monthInit = setNextValidDate(tempDate, ruleObject, monthInit, beginDate);
    tempDate = getStartDateForWeek(tempDate, ruleObject.day);
    monthCollection = [];
  }
}
function monthlyDayTypeProcess(startDate, endDate, data, ruleObject) {
  var expectedDays = ruleObject.day;
  var isHavingNumber = expectedDays.map(function(item) {
    return HASNUMBER.test(item);
  });
  if (expectedDays.length > 1 && isHavingNumber.indexOf(true) > -1) {
    processDateCollectionforByDayWithInteger(startDate, endDate, data, ruleObject);
    return;
  } else if (ruleObject.month.length && expectedDays.length === 1 && isHavingNumber.indexOf(true) > -1) {
    monthlyDayTypeProcessforMonthFreq(startDate, endDate, data, ruleObject);
    return;
  }
  var tempDate = new Date(startDate.getTime());
  var currentMonthDate;
  var expectedCount = getDateCount(startDate, ruleObject);
  var interval = ruleObject.interval;
  var monthCollection = [];
  if (ruleObject.month.length) {
    calendarUtil.setMonth(tempDate, ruleObject.month[0], tempDate.getDate());
  }
  if (isNullOrUndefined(ruleObject.setPosition) && ruleObject.month.length === 0 && ruleObject.weekNo.length === 0) {
    tempDate.setFullYear(startDate.getFullYear(), 0, 1);
  }
  tempDate = calendarUtil.getMonthStartDate(tempDate);
  tempDate = getStartDateForWeek(tempDate, ruleObject.day);
  while (compareDates(tempDate, endDate)) {
    currentMonthDate = new Date(tempDate.getTime());
    while (calendarUtil.isSameYear(currentMonthDate, tempDate) && (expectedCount && data.length + ruleObject.recExceptionCount <= expectedCount)) {
      currentMonthDate = new Date(tempDate.getTime());
      while (calendarUtil.isSameYear(currentMonthDate, tempDate)) {
        if (ruleObject.month.length === 0 || ruleObject.month.length > 0 && !calendarUtil.checkMonth(tempDate, ruleObject.month)) {
          if (expectedDays.length > 1) {
            if (calendarUtil.compareMonth(currentMonthDate, tempDate)) {
              calendarUtil.setValidDate(tempDate, 1, 1);
              tempDate = getStartDateForWeek(tempDate, ruleObject.day);
              break;
            }
            if (expectedDays.indexOf(DAYINDEX[currentMonthDate.getDay()]) > -1) {
              monthCollection.push([currentMonthDate.getTime()]);
            }
            currentMonthDate.setDate(currentMonthDate.getDate() + 1);
          } else {
            if (currentMonthDate.getFullYear() > tempDate.getFullYear()) {
              calendarUtil.setValidDate(tempDate, 1, 1);
              tempDate = getStartDateForWeek(tempDate, ruleObject.day);
              break;
            }
            var newstr = getDayString(expectedDays[0]);
            if (DAYINDEX[currentMonthDate.getDay()] === newstr && new Date(currentMonthDate.getFullYear(), currentMonthDate.getMonth(), 0) > new Date(startDate.getFullYear())) {
              monthCollection.push([currentMonthDate.getTime()]);
            }
            currentMonthDate.setDate(currentMonthDate.getDate() + 7);
          }
        } else {
          calendarUtil.setValidDate(tempDate, 1, 1);
          tempDate = getStartDateForWeek(tempDate, ruleObject.day);
          break;
        }
      }
    }
    tempDate.setFullYear(currentMonthDate.getFullYear(), currentMonthDate.getMonth(), currentMonthDate.getDate());
    insertDateCollectionBasedonIndex(monthCollection, startDate, endDate, data, ruleObject);
    if (calendarUtil.isLastMonth(tempDate)) {
      calendarUtil.setValidDate(tempDate, 1, 1);
      tempDate = getStartDateForWeek(tempDate, ruleObject.day);
    }
    tempDate.setFullYear(tempDate.getFullYear() + interval - 1);
    if (expectedCount && data.length + ruleObject.recExceptionCount >= expectedCount) {
      return;
    }
    tempDate = getStartDateForWeek(tempDate, ruleObject.day);
    monthCollection = [];
  }
}
function processDateCollectionforByDayWithInteger(startDate, endDate, data, ruleObject) {
  var expectedDays = ruleObject.day;
  var expectedCount = getDateCount(startDate, ruleObject);
  var tempDate = new Date(startDate.getTime());
  var interval = ruleObject.interval;
  var monthCollection = [];
  var dateCollection = [];
  var index;
  var state;
  var monthInit = 0;
  var currentMonthDate;
  var currentDate;
  var beginDate;
  tempDate = calendarUtil.getMonthStartDate(tempDate);
  var datas = [];
  if (ruleObject.month.length) {
    calendarUtil.setMonth(tempDate, ruleObject.month[0], 1);
  }
  tempDate = getStartDateForWeek(tempDate, ruleObject.day);
  while (compareDates(tempDate, endDate)) {
    currentMonthDate = new Date(tempDate.getTime());
    for (var i = 0; i <= ruleObject.month.length; i++) {
      for (var j = 0; j <= expectedDays.length - 1; j++) {
        tempDate = calendarUtil.getMonthStartDate(tempDate);
        tempDate = getStartDateForWeek(tempDate, ruleObject.day);
        monthCollection = [];
        while (calendarUtil.isSameYear(currentMonthDate, tempDate) && (expectedCount && data.length + ruleObject.recExceptionCount <= expectedCount)) {
          while (calendarUtil.isSameYear(currentMonthDate, tempDate)) {
            currentMonthDate = new Date(tempDate.getTime());
            if (ruleObject.month.length === 0 || ruleObject.month.length > 0 && ruleObject.month[parseInt(i.toString(), 10)] === calendarUtil.getMonth(currentMonthDate)) {
              var expectedDaysArray = expectedDays[parseInt(j.toString(), 10)].match(SPLITNUMBERANDSTRING);
              var position = parseInt(expectedDaysArray[0], 10);
              currentDate = new Date(tempDate.getTime());
              while (calendarUtil.isSameYear(currentDate, tempDate) && calendarUtil.isSameMonth(currentDate, tempDate)) {
                if (expectedDaysArray[expectedDaysArray.length - 1] === DAYINDEX[currentDate.getDay()]) {
                  monthCollection.push([currentDate.getTime()]);
                }
                currentDate.setDate(currentDate.getDate() + 1);
              }
              currentDate.setDate(currentDate.getDate() - 1);
              if (expectedDaysArray[0].indexOf("-") > -1) {
                index = monthCollection.length - -1 * position;
              } else {
                index = position - 1;
              }
              index = isNaN(index) ? 0 : index;
            }
            monthInit = setNextValidDate(tempDate, ruleObject, monthInit, beginDate, 1);
            tempDate = getStartDateForWeek(tempDate, ruleObject.day);
          }
        }
        tempDate = j === 0 && currentDate ? new Date(currentDate.getTime()) : new Date(currentMonthDate.getTime());
        if (monthCollection.length > 0) {
          if (isNullOrUndefined(ruleObject.setPosition)) {
            insertDatasIntoExistingCollection(monthCollection, state, startDate, endDate, data, ruleObject, index);
          } else {
            dateCollection = [filterDateCollectionByIndex(monthCollection, index, datas)];
          }
        }
        if (expectedCount && data.length + ruleObject.recExceptionCount >= expectedCount) {
          return;
        }
      }
    }
    if (!isNullOrUndefined(ruleObject.setPosition)) {
      insertDateCollectionBasedonBySetPos(dateCollection, state, startDate, endDate, data, ruleObject);
      datas = [];
    }
    if (calendarUtil.isLastMonth(tempDate)) {
      calendarUtil.setValidDate(tempDate, 1, 1);
      tempDate.setFullYear(tempDate.getFullYear() + interval - 1);
    } else {
      tempDate.setFullYear(tempDate.getFullYear() + interval);
    }
    tempDate = getStartDateForWeek(tempDate, ruleObject.day);
    if (ruleObject.month.length) {
      calendarUtil.setMonth(tempDate, ruleObject.month[0], tempDate.getDate());
    }
  }
}
function getRecurrenceCollection(monthCollection, expectedDays) {
  var index;
  var recurrenceCollectionObject = { monthCollection: [], index: 0 };
  if (expectedDays.length === 1) {
    var expectedDaysArrays = expectedDays[0].match(SPLITNUMBERANDSTRING);
    var arrPosition = void 0;
    if (expectedDaysArrays.length > 1) {
      arrPosition = parseInt(expectedDaysArrays[0], 10);
      index = arrPosition < 1 ? monthCollection.length + arrPosition : arrPosition - 1;
    } else {
      index = 0;
      monthCollection = getDateCollectionforBySetPosNull(monthCollection);
    }
  } else {
    index = 0;
    monthCollection = getDateCollectionforBySetPosNull(monthCollection);
  }
  recurrenceCollectionObject.monthCollection = monthCollection;
  recurrenceCollectionObject.index = index;
  return recurrenceCollectionObject;
}
function insertDataCollection(dateCollection, state, startDate, endDate, data, ruleObject) {
  var index = ruleObject.setPosition < 1 ? dateCollection.length + ruleObject.setPosition : ruleObject.setPosition - 1;
  if (isNullOrUndefined(ruleObject.setPosition)) {
    index = 0;
    dateCollection = getDateCollectionforBySetPosNull(dateCollection);
  }
  if (dateCollection.length > 0) {
    insertDatasIntoExistingCollection(dateCollection, state, startDate, endDate, data, ruleObject, index);
  }
}
function getDateCollectionforBySetPosNull(monthCollection) {
  var datas = [];
  for (var week = 0; week < monthCollection.length; week++) {
    for (var row = 0; row < monthCollection[parseInt(week.toString(), 10)].length; row++) {
      datas.push(new Date(monthCollection[parseInt(week.toString(), 10)][parseInt(row.toString(), 10)]).getTime());
    }
  }
  monthCollection = datas.length > 0 ? [datas] : [];
  return monthCollection;
}
function insertDateCollectionBasedonIndex(monthCollection, startDate, endDate, data, ruleObject) {
  var expectedDays = ruleObject.day;
  var state;
  var datas = [];
  var dateCollection = [];
  var recurrenceCollections = getRecurrenceCollection(monthCollection, expectedDays);
  monthCollection = recurrenceCollections.monthCollection;
  var index = recurrenceCollections.index;
  if (ruleObject.setPosition != null) {
    dateCollection = [filterDateCollectionByIndex(monthCollection, index, datas)];
    insertDateCollectionBasedonBySetPos(dateCollection, state, startDate, endDate, data, ruleObject);
  } else {
    if (monthCollection.length > 0) {
      insertDatasIntoExistingCollection(monthCollection, state, startDate, endDate, data, ruleObject, index);
    }
  }
  datas = [];
}
function filterDateCollectionByIndex(monthCollection, index, datas) {
  for (var week = 0; week < monthCollection[parseInt(index.toString(), 10)].length; week++) {
    datas.push(monthCollection[parseInt(index.toString(), 10)][parseInt(week.toString(), 10)]);
  }
  return datas;
}
function insertDateCollection(state, startDate, endDate, data, ruleObject, dayData) {
  var expectedCount = getDateCount(startDate, ruleObject);
  var chDate = new Date(dayData);
  state = validateRules(chDate, ruleObject);
  if (chDate >= startDate && compareDates(chDate, endDate) && state && expectedCount && data.length + ruleObject.recExceptionCount < expectedCount) {
    excludeDateHandler(data, dayData);
  }
}
function weekCount(year, startDayOfWeek, monthCollection, week, ruleObject) {
  var firstDayOfWeek = startDayOfWeek || 0;
  var firstOfMonth = new Date(year, ruleObject.month[0] - 1, 1);
  var lastOfMonth = new Date(year, ruleObject.month[0], 0);
  var numberOfDaysInMonth = lastOfMonth.getDate();
  var firstWeekDay = (firstOfMonth.getDay() - firstDayOfWeek + 7) % 7;
  var used = firstWeekDay + numberOfDaysInMonth;
  var count = Math.ceil(used / 7) - 1;
  var dayData = monthCollection[parseInt(week.toString(), 10)][parseInt(count.toString(), 10)];
  var chDate = new Date(dayData);
  var state = validateRules(chDate, ruleObject);
  return state ? count : count - 1;
}
function insertDateCollectionBasedonBySetPos(monthCollection, state, startDate, endDate, data, ruleObject) {
  if (monthCollection.length > 0) {
    for (var week = 0; week < monthCollection.length; week++) {
      monthCollection[parseInt(week.toString(), 10)].sort();
      var expectedDays = ruleObject.day;
      var isHavingNumber = expectedDays.map(function(item) {
        return HASNUMBER.test(item);
      });
      var weekIndex = ruleObject.freq === "YEARLY" && ruleObject.validRules.indexOf("BYMONTH") > -1 && !(isHavingNumber.indexOf(true) > -1) ? weekCount(new Date(monthCollection[0][0]).getFullYear(), 0, monthCollection, week, ruleObject) : monthCollection[parseInt(week.toString(), 10)].length + ruleObject.setPosition;
      var index = ruleObject.setPosition < 1 ? weekIndex : ruleObject.setPosition - 1;
      var dayData = monthCollection[parseInt(week.toString(), 10)][parseInt(index.toString(), 10)];
      insertDateCollection(state, startDate, endDate, data, ruleObject, dayData);
    }
  }
}
function insertDatasIntoExistingCollection(monthCollection, state, startDate, endDate, data, ruleObject, index) {
  if (monthCollection.length > 0) {
    index = !isNullOrUndefined(index) ? index : ruleObject.setPosition < 1 ? monthCollection.length + ruleObject.setPosition : ruleObject.setPosition - 1;
    monthCollection[parseInt(index.toString(), 10)].sort();
    for (var week = 0; week < monthCollection[parseInt(index.toString(), 10)].length; week++) {
      var dayData = monthCollection[parseInt(index.toString(), 10)][parseInt(week.toString(), 10)];
      insertDateCollection(state, startDate, endDate, data, ruleObject, dayData);
    }
  }
}
function compareDates(startDate, endDate) {
  return endDate ? startDate <= endDate : true;
}
function getDayString(expectedDays) {
  var newstr = expectedDays.replace(REMOVENUMBERINSTRING, "");
  return newstr;
}
function checkDayIndex(day, expectedDays) {
  var sortedExpectedDays = [];
  expectedDays.forEach(function(element2) {
    var expectedDaysNumberSplit = element2.match(SPLITNUMBERANDSTRING);
    if (expectedDaysNumberSplit.length === 2) {
      sortedExpectedDays.push(expectedDaysNumberSplit[1]);
    } else {
      sortedExpectedDays.push(expectedDaysNumberSplit[0]);
    }
  });
  return sortedExpectedDays.indexOf(DAYINDEX[parseInt(day.toString(), 10)]) === -1;
}
function getStartDateForWeek(startDate, expectedDays) {
  var tempDate = new Date(startDate.getTime());
  var newstr;
  if (expectedDays.length > 0) {
    var expectedDaysArr = [];
    for (var i = 0; i <= expectedDays.length - 1; i++) {
      newstr = getDayString(expectedDays[parseInt(i.toString(), 10)]);
      expectedDaysArr.push(newstr);
    }
    if (expectedDaysArr.indexOf(DAYINDEX[tempDate.getDay()]) === -1) {
      do {
        tempDate.setDate(tempDate.getDate() + 1);
      } while (expectedDaysArr.indexOf(DAYINDEX[tempDate.getDay()]) === -1);
    }
  }
  return tempDate;
}
function extractObjectFromRule(rules) {
  var ruleObject = {
    freq: null,
    interval: 1,
    count: null,
    until: null,
    day: [],
    wkst: null,
    month: [],
    weekNo: [],
    monthDay: [],
    yearDay: [],
    setPosition: null,
    validRules: []
  };
  var rulesList = rules.split(";");
  var splitData = [];
  var temp;
  rulesList.forEach(function(data) {
    splitData = data.split("=");
    switch (splitData[0]) {
      case "UNTIL":
        temp = splitData[1];
        ruleObject.until = getDateFromRecurrenceDateString(temp);
        break;
      case "BYDAY":
        ruleObject.day = splitData[1].split(",");
        ruleObject.validRules.push(splitData[0]);
        break;
      case "BYMONTHDAY":
        ruleObject.monthDay = splitData[1].split(",").map(Number);
        ruleObject.validRules.push(splitData[0]);
        break;
      case "BYMONTH":
        ruleObject.month = splitData[1].split(",").map(Number);
        ruleObject.validRules.push(splitData[0]);
        break;
      case "BYYEARDAY":
        ruleObject.yearDay = splitData[1].split(",").map(Number);
        ruleObject.validRules.push(splitData[0]);
        break;
      case "BYWEEKNO":
        ruleObject.weekNo = splitData[1].split(",").map(Number);
        ruleObject.validRules.push(splitData[0]);
        break;
      case "INTERVAL":
        ruleObject.interval = parseInt(splitData[1], 10);
        break;
      case "COUNT":
        ruleObject.count = parseInt(splitData[1], 10);
        break;
      case "BYSETPOS":
        ruleObject.setPosition = parseInt(splitData[1], 10) > 4 ? -1 : parseInt(splitData[1], 10);
        break;
      case "FREQ":
        ruleObject.freq = splitData[1];
        break;
      case "WKST":
        ruleObject.wkst = splitData[1];
        break;
    }
  });
  if (ruleObject.freq === "MONTHLY" && ruleObject.monthDay.length === 0) {
    var index = ruleObject.validRules.indexOf("BYDAY");
    ruleObject.validRules.splice(index, 1);
  }
  return ruleObject;
}
function validateProperDate(tempDate, data, startDate) {
  var maxDate = calendarUtil.getMonthDaysCount(tempDate);
  return data <= maxDate && tempDate >= startDate;
}
function processWeekDays(expectedDays) {
  var dayCycle = {};
  expectedDays.forEach(function(element2, index) {
    if (index === expectedDays.length - 1) {
      var startIndex = dayIndex.indexOf(element2);
      var temp = startIndex;
      while (temp % 7 !== dayIndex.indexOf(expectedDays[0])) {
        temp++;
      }
      dayCycle["" + element2] = temp - startIndex;
    } else {
      dayCycle["" + element2] = dayIndex.indexOf(expectedDays[index + 1]) - dayIndex.indexOf(element2);
    }
  });
  return dayCycle;
}
function checkDate(tempDate, expectedDate) {
  var temp = expectedDate.slice(0);
  var data;
  var maxDate = calendarUtil.getMonthDaysCount(tempDate);
  data = temp.shift();
  while (data) {
    if (data < 0) {
      data = data + maxDate + 1;
    }
    if (data === tempDate.getDate()) {
      return false;
    }
    data = temp.shift();
  }
  return true;
}
function checkYear(tempDate, expectedyearDay) {
  var temp = expectedyearDay.slice(0);
  var data;
  var yearDay = getYearDay(tempDate);
  data = temp.shift();
  while (data) {
    if (data < 0) {
      data = data + calendarUtil.getYearDaysCount(tempDate, 0) + 1;
    }
    if (data === yearDay) {
      return false;
    }
    data = temp.shift();
  }
  return true;
}
function getYearDay(currentDate) {
  if (!startDateCollection[calendarUtil.getFullYear(currentDate)]) {
    startDateCollection[calendarUtil.getFullYear(currentDate)] = calendarUtil.getYearLastDate(currentDate, 0);
  }
  var tempDate = startDateCollection[calendarUtil.getFullYear(currentDate)];
  var diff = currentDate.getTime() - tempDate.getTime();
  return Math.ceil(diff / MS_PER_DAY);
}
function validateMonthlyRuleType(ruleObject) {
  if (ruleObject.monthDay.length && !ruleObject.day.length) {
    return "date";
  } else if (!ruleObject.monthDay.length && ruleObject.day.length) {
    return "day";
  }
  return "both";
}
function rotate(days) {
  var data = days.shift();
  days.push(data);
}
function setFirstDayOfWeek(day) {
  while (dayIndex[0] !== day) {
    rotate(dayIndex);
  }
}
function validateRules(tempDate, ruleObject) {
  var state = true;
  var expectedDays = ruleObject.day;
  var expectedMonth = ruleObject.month;
  var expectedDate = calendarUtil.getExpectedDays(tempDate, ruleObject.monthDay);
  var expectedyearDay = ruleObject.yearDay;
  ruleObject.validRules.forEach(function(rule) {
    switch (rule) {
      case "BYDAY":
        if (checkDayIndex(tempDate.getDay(), expectedDays)) {
          state = false;
        }
        break;
      case "BYMONTH":
        if (calendarUtil.checkMonth(tempDate, expectedMonth)) {
          state = false;
        }
        break;
      case "BYMONTHDAY":
        if (checkDate(tempDate, expectedDate)) {
          state = false;
        }
        break;
      case "BYYEARDAY":
        if (checkYear(tempDate, expectedyearDay)) {
          state = false;
        }
        break;
    }
  });
  return state;
}
function getCalendarUtil(calendarMode) {
  if (calendarMode === "Islamic") {
    return new Islamic();
  }
  return new Gregorian();
}
var startDateCollection = {};
var tempExcludeDate;
var dayIndex = ["SU", "MO", "TU", "WE", "TH", "FR", "SA"];
var maxOccurrence;
var tempViewDate;
var calendarUtil;
var DAYINDEX = ["SU", "MO", "TU", "WE", "TH", "FR", "SA"];
var MAXOCCURRENCE = 43;
var WEEKPOS = ["first", "second", "third", "fourth", "last"];
var TIMES = "summaryTimes";
var ON$1 = "summaryOn";
var EVERY = "every";
var UNTIL$1 = "summaryUntil";
var DAYS = "summaryDay";
var WEEKS = "summaryWeek";
var MONTHS = "summaryMonth";
var YEARS = "summaryYear";
var DAYINDEXOBJECT = {
  SU: "sun",
  MO: "mon",
  TU: "tue",
  WE: "wed",
  TH: "thu",
  FR: "fri",
  SA: "sat"
};
var HASNUMBER = /\d/;
var REMOVENUMBERINSTRING = /[^A-Z]+/;
var SPLITNUMBERANDSTRING = /[a-z]+|[^a-z]+/gi;
function getRecurrenceStringFromDate(date) {
  return [
    date.getUTCFullYear(),
    roundDateValues(date.getUTCMonth() + 1),
    roundDateValues(date.getUTCDate()),
    "T",
    roundDateValues(date.getUTCHours()),
    roundDateValues(date.getUTCMinutes()),
    roundDateValues(date.getUTCSeconds()),
    "Z"
  ].join("");
}
function roundDateValues(date) {
  return ("0" + date).slice(-2);
}
var EventBase = (
  /** @class */
  function() {
    function EventBase2(parent) {
      this.slots = [];
      this.isDoubleTapped = false;
      this.parent = parent;
    }
    EventBase2.prototype.processData = function(events, timeZonePropChanged, oldTimezone) {
      var _this = this;
      var start = this.parent.activeView.startDate();
      var end = this.parent.activeView.endDate();
      var fields = this.parent.eventFields;
      var processed = [];
      var temp = 1;
      var generateID = false;
      var resourceCollection = this.parent.resourceBase ? this.parent.resourceBase.resourceCollection : [];
      if (events.length > 0 && isNullOrUndefined(events[0][fields.id])) {
        generateID = true;
      }
      var _loop_1 = function(event_12) {
        if (generateID) {
          event_12[fields.id] = temp++;
        }
        event_12 = this_1.updateEventDateTime(event_12);
        if (timeZonePropChanged) {
          this_1.processTimezoneChange(event_12, oldTimezone);
        } else if (!this_1.parent.isPrinting && !this_1.parent.uiStateValues.isPreventTimezone) {
          event_12 = this_1.processTimezone(event_12);
        }
        for (var level = 0; level < resourceCollection.length; level++) {
          if (event_12[resourceCollection[parseInt(level.toString(), 10)].field] === null || event_12[resourceCollection[parseInt(level.toString(), 10)].field] === 0) {
            event_12[resourceCollection[parseInt(level.toString(), 10)].field] = void 0;
          }
        }
        if (!isNullOrUndefined(event_12[fields.recurrenceRule]) && event_12[fields.recurrenceRule] === "") {
          event_12[fields.recurrenceRule] = null;
        }
        if (!isNullOrUndefined(event_12[fields.recurrenceRule]) && isNullOrUndefined(event_12[fields.recurrenceID]) && !(this_1.parent.crudModule && this_1.parent.crudModule.crudObj.isCrudAction)) {
          processed = processed.concat(this_1.generateOccurrence(event_12, null, oldTimezone, true));
        } else {
          if (this_1.parent.crudModule && this_1.parent.crudModule.crudObj.isCrudAction) {
            if (!isNullOrUndefined(event_12[fields.recurrenceRule]) && isNullOrUndefined(event_12[fields.recurrenceID])) {
              var recurrenceEvent = this_1.generateOccurrence(event_12, null, oldTimezone, true);
              var _loop_2 = function(occurrence2) {
                var app2 = this_1.parent.eventsProcessed.filter(function(data) {
                  return data[fields.startTime].getTime() - occurrence2[fields.startTime].getTime() === 0 && data[fields.id] === occurrence2[fields.id];
                });
                occurrence2.Guid = app2.length > 0 ? app2[0].Guid : this_1.generateGuid();
                processed.push(occurrence2);
              };
              for (var _i2 = 0, recurrenceEvent_1 = recurrenceEvent; _i2 < recurrenceEvent_1.length; _i2++) {
                var occurrence = recurrenceEvent_1[_i2];
                _loop_2(occurrence);
              }
            } else {
              var app = this_1.parent.eventsProcessed.filter(function(data) {
                return data[_this.parent.eventFields.id] === event_12[_this.parent.eventFields.id];
              });
              event_12.Guid = app.length > 0 ? app[0].Guid : this_1.generateGuid();
              processed.push(event_12);
            }
          } else {
            event_12.Guid = this_1.generateGuid();
            processed.push(event_12);
          }
        }
      };
      var this_1 = this;
      for (var _i = 0, events_1 = events; _i < events_1.length; _i++) {
        var event_1 = events_1[_i];
        _loop_1(event_1);
      }
      this.parent.eventsProcessed = [];
      var eventData = processed.filter(function(data) {
        return !data[_this.parent.eventFields.isBlock];
      });
      this.parent.eventsProcessed = this.filterEvents(start, end, eventData);
      var blockData = processed.filter(function(data) {
        return data[_this.parent.eventFields.isBlock];
      });
      for (var _a = 0, blockData_1 = blockData; _a < blockData_1.length; _a++) {
        var eventObj = blockData_1[_a];
        if (eventObj[fields.isAllDay]) {
          var isDifferentDate = resetTime(new Date(eventObj[fields.startTime].getTime())) < resetTime(new Date(eventObj[fields.endTime].getTime()));
          if (!isDifferentDate) {
            eventObj[fields.startTime] = resetTime(eventObj[fields.startTime]);
            eventObj[fields.endTime] = addDays(resetTime(eventObj[fields.endTime]), 1);
          }
        }
      }
      this.parent.blockProcessed = blockData;
      return eventData;
    };
    EventBase2.prototype.updateEventDateTime = function(eventData) {
      if (typeof eventData[this.parent.eventFields.startTime] === "string") {
        eventData[this.parent.eventFields.startTime] = getDateFromString(eventData[this.parent.eventFields.startTime]);
      }
      if (typeof eventData[this.parent.eventFields.endTime] === "string") {
        eventData[this.parent.eventFields.endTime] = getDateFromString(eventData[this.parent.eventFields.endTime]);
      }
      return eventData;
    };
    EventBase2.prototype.getProcessedEvents = function(eventCollection) {
      if (eventCollection === void 0) {
        eventCollection = this.parent.eventsData;
      }
      var processed = [];
      for (var _i = 0, eventCollection_1 = eventCollection; _i < eventCollection_1.length; _i++) {
        var event_2 = eventCollection_1[_i];
        if (!isNullOrUndefined(event_2[this.parent.eventFields.recurrenceRule]) && isNullOrUndefined(event_2[this.parent.eventFields.recurrenceID])) {
          processed = processed.concat(this.generateOccurrence(event_2));
        } else {
          processed.push(event_2);
        }
      }
      return processed;
    };
    EventBase2.prototype.timezonePropertyChange = function(oldTimezone) {
      var data = this.parent.eventsData.concat(this.parent.blockData);
      var processed = this.processData(data, true, oldTimezone);
      this.parent.notify(dataReady, { processedData: processed });
    };
    EventBase2.prototype.timezoneConvert = function(eventData) {
      var fields = this.parent.eventFields;
      eventData[fields.startTimezone] = eventData[fields.startTimezone] || eventData[fields.endTimezone];
      eventData[fields.endTimezone] = eventData[fields.endTimezone] || eventData[fields.startTimezone];
      if (this.parent.timezone) {
        var startTz = eventData[fields.startTimezone];
        var endTz = eventData[fields.endTimezone];
        eventData[fields.startTime] = this.parent.tzModule.convert(eventData[fields.startTime], this.parent.timezone, startTz);
        eventData[fields.endTime] = this.parent.tzModule.convert(eventData[fields.endTime], this.parent.timezone, endTz);
      }
    };
    EventBase2.prototype.processTimezoneChange = function(event, oldTimezone) {
      var fields = this.parent.eventFields;
      if (event[fields.isAllDay]) {
        return;
      }
      if (oldTimezone && this.parent.timezone) {
        event[fields.startTime] = this.parent.tzModule.convert(event[fields.startTime], oldTimezone, this.parent.timezone);
        event[fields.endTime] = this.parent.tzModule.convert(event[fields.endTime], oldTimezone, this.parent.timezone);
      } else if (!oldTimezone && this.parent.timezone) {
        event[fields.startTime] = this.parent.tzModule.add(event[fields.startTime], this.parent.timezone);
        event[fields.endTime] = this.parent.tzModule.add(event[fields.endTime], this.parent.timezone);
      } else if (oldTimezone && !this.parent.timezone) {
        event[fields.startTime] = this.parent.tzModule.remove(event[fields.startTime], oldTimezone);
        event[fields.endTime] = this.parent.tzModule.remove(event[fields.endTime], oldTimezone);
      }
    };
    EventBase2.prototype.processTimezone = function(event, isReverse) {
      if (isReverse === void 0) {
        isReverse = false;
      }
      var fields = this.parent.eventFields;
      if (event[fields.startTimezone] || event[fields.endTimezone]) {
        var startTimezone = event[fields.startTimezone] || event[fields.endTimezone];
        var endTimezone = event[fields.endTimezone] || event[fields.startTimezone];
        if (isReverse) {
          if (this.parent.timezone) {
            event[fields.startTime] = this.parent.tzModule.convert(event[fields.startTime], startTimezone, this.parent.timezone);
            event[fields.endTime] = this.parent.tzModule.convert(event[fields.endTime], endTimezone, this.parent.timezone);
            event[fields.startTime] = this.parent.tzModule.remove(event[fields.startTime], this.parent.timezone);
            event[fields.endTime] = this.parent.tzModule.remove(event[fields.endTime], this.parent.timezone);
          } else {
            event[fields.startTime] = this.parent.tzModule.remove(event[fields.startTime], startTimezone);
            event[fields.endTime] = this.parent.tzModule.remove(event[fields.endTime], endTimezone);
          }
        } else {
          event[fields.startTime] = this.parent.tzModule.add(event[fields.startTime], startTimezone);
          event[fields.endTime] = this.parent.tzModule.add(event[fields.endTime], endTimezone);
          if (this.parent.timezone) {
            event[fields.startTime] = this.parent.tzModule.convert(event[fields.startTime], startTimezone, this.parent.timezone);
            event[fields.endTime] = this.parent.tzModule.convert(event[fields.endTime], endTimezone, this.parent.timezone);
          }
        }
      } else if (this.parent.timezone) {
        if (isReverse) {
          event[fields.startTime] = this.parent.tzModule.remove(event[fields.startTime], this.parent.timezone);
          event[fields.endTime] = this.parent.tzModule.remove(event[fields.endTime], this.parent.timezone);
        } else {
          event[fields.startTime] = this.parent.tzModule.add(event[fields.startTime], this.parent.timezone);
          event[fields.endTime] = this.parent.tzModule.add(event[fields.endTime], this.parent.timezone);
        }
      }
      return event;
    };
    EventBase2.prototype.filterBlockEvents = function(eventObj) {
      var fields = this.parent.eventFields;
      var eStart = eventObj[fields.startTime];
      var eEnd = eventObj[fields.endTime];
      var resourceData;
      if (this.parent.activeViewOptions.group.resources.length > 0) {
        var data = this.getGroupIndexFromEvent(eventObj);
        resourceData = this.parent.resourceBase.lastResourceLevel[parseInt(data.toString(), 10)];
      }
      var blockEvents = extend([], this.parent.blockProcessed, null, true);
      for (var _i = 0, blockEvents_1 = blockEvents; _i < blockEvents_1.length; _i++) {
        var eventObj_1 = blockEvents_1[_i];
        if (eventObj_1[fields.isAllDay]) {
          var isDifferentTime = eventObj_1[fields.endTime].getTime() > resetTime(new Date(eventObj_1[fields.endTime].getTime())).getTime();
          if (isDifferentTime) {
            eventObj_1[fields.startTime] = resetTime(eventObj_1[fields.startTime]);
            eventObj_1[fields.endTime] = addDays(resetTime(eventObj_1[fields.endTime]), 1);
          }
        }
      }
      return this.filterEvents(eStart, eEnd, blockEvents, resourceData);
    };
    EventBase2.prototype.filterEvents = function(startDate, endDate, appointments, resourceTdData) {
      if (appointments === void 0) {
        appointments = this.parent.eventsProcessed;
      }
      var predicate = this.parent.dataModule.getStartEndQuery(startDate, endDate);
      var filter2 = new DataManager({ json: appointments }).executeLocal(new Query().where(predicate));
      if (resourceTdData) {
        filter2 = this.filterEventsByResource(resourceTdData, filter2);
      }
      return this.sortByTime(filter2);
    };
    EventBase2.prototype.filterEventsByRange = function(eventCollection, startDate, endDate) {
      var _this = this;
      var filteredEvents = [];
      if (startDate && endDate) {
        filteredEvents = this.filterEvents(startDate, endDate, eventCollection);
      } else if (startDate && !endDate) {
        filteredEvents = eventCollection.filter(function(e) {
          return e[_this.parent.eventFields.startTime] >= startDate;
        });
      } else if (!startDate && endDate) {
        filteredEvents = eventCollection.filter(function(e) {
          return e[_this.parent.eventFields.endTime] <= endDate;
        });
      } else {
        filteredEvents = eventCollection;
      }
      return this.sortByTime(filteredEvents);
    };
    EventBase2.prototype.filterEventsByResource = function(resourceTdData, appointments) {
      if (appointments === void 0) {
        appointments = this.parent.eventsProcessed;
      }
      var predicate = {};
      var resourceCollection = this.parent.resourceBase.resourceCollection;
      for (var level = 0; level < resourceCollection.length; level++) {
        predicate[resourceCollection[parseInt(level.toString(), 10)].field] = resourceTdData.groupOrder[parseInt(level.toString(), 10)];
      }
      var keys2 = Object.keys(predicate);
      var filteredCollection = appointments.filter(function(eventObj) {
        return keys2.every(function(key) {
          if (eventObj["" + key] instanceof Array) {
            return eventObj["" + key].indexOf(predicate["" + key]) > -1;
          } else {
            return eventObj["" + key] === predicate["" + key];
          }
        });
      });
      return filteredCollection;
    };
    EventBase2.prototype.sortByTime = function(appointmentsCollection) {
      if (this.parent.eventSettings.sortComparer && (typeof this.parent.eventSettings.sortComparer === "function" || typeof this.parent.eventSettings.sortComparer === "string")) {
        appointmentsCollection = this.customSorting(appointmentsCollection);
      } else {
        var fieldMappings_1 = this.parent.eventFields;
        appointmentsCollection.sort(function(a, b) {
          var d1 = a[fieldMappings_1.startTime];
          var d2 = b[fieldMappings_1.startTime];
          return d1.getTime() - d2.getTime();
        });
      }
      return appointmentsCollection;
    };
    EventBase2.prototype.sortByDateTime = function(appointments) {
      if (this.parent.eventSettings.sortComparer && (typeof this.parent.eventSettings.sortComparer === "function" || typeof this.parent.eventSettings.sortComparer === "string")) {
        appointments = this.customSorting(appointments);
      } else {
        var fieldMapping_1 = this.parent.eventFields;
        appointments.sort(function(object1, object2) {
          var d3 = object1[fieldMapping_1.startTime];
          var d4 = object2[fieldMapping_1.startTime];
          var d5 = object1[fieldMapping_1.endTime];
          var d6 = object2[fieldMapping_1.endTime];
          var d1 = d5.getTime() - d3.getTime();
          var d2 = d6.getTime() - d4.getTime();
          return d3.getTime() - d4.getTime() || d2 - d1;
        });
      }
      return appointments;
    };
    EventBase2.prototype.customSorting = function(appointments) {
      if (typeof this.parent.eventSettings.sortComparer === "function") {
        return this.parent.eventSettings.sortComparer.call(this.parent, appointments);
      } else if (typeof this.parent.eventSettings.sortComparer === "string") {
        var splits = this.parent.eventSettings.sortComparer.split(".");
        var sortFn = void 0;
        if (!isNullOrUndefined(window)) {
          sortFn = window[splits[splits.length - 1]];
        }
        if (sortFn) {
          return sortFn(appointments);
        }
      }
      return appointments;
    };
    EventBase2.prototype.getSmallestMissingNumber = function(array) {
      var large = Math.max.apply(Math, array);
      for (var i = 0; i < large; i++) {
        if (array.indexOf(i) === -1) {
          return i;
        }
      }
      return large + 1;
    };
    EventBase2.prototype.splitEventByDay = function(event) {
      var eventFields = this.parent.eventFields;
      var data = [];
      var eventStartTime = event[eventFields.startTime];
      var eventEndTime = event[eventFields.endTime];
      var isDifferentDate = resetTime(new Date(eventStartTime.getTime())) < resetTime(new Date(eventEndTime.getTime()));
      if (isDifferentDate) {
        var start = new Date(eventStartTime.getTime());
        var end = addDays(resetTime(new Date(eventStartTime.getTime())), 1);
        var endDate = eventEndTime.getHours() === 0 && eventEndTime.getMinutes() === 0 ? eventEndTime : addDays(eventEndTime, 1);
        var index = 1;
        var eventLength = getDaysCount(eventStartTime.getTime(), endDate.getTime());
        while (end <= eventEndTime && start.getTime() !== end.getTime()) {
          var app = extend({}, event);
          app[eventFields.startTime] = start;
          app[eventFields.endTime] = end;
          app.data = { index, count: eventLength };
          app.Guid = this.generateGuid();
          app.isSpanned = true;
          data.push(app);
          start = end;
          if (resetTime(new Date(start.getTime())).getTime() === resetTime(new Date(eventEndTime.getTime())).getTime() && !(end.getTime() === eventEndTime.getTime())) {
            end = new Date(start.getTime());
            end = new Date(end.setHours(eventEndTime.getHours(), eventEndTime.getMinutes(), eventEndTime.getSeconds()));
          } else {
            end = addDays(resetTime(new Date(start.getTime())), 1);
          }
          index++;
        }
      } else {
        data.push(event);
      }
      return data;
    };
    EventBase2.prototype.splitEvent = function(event, dateRender) {
      var fields = this.parent.eventFields;
      var start = resetTime(event[fields.startTime]).getTime();
      var end = resetTime(event[fields.endTime]).getTime();
      if (getDateInMs(event[fields.endTime]) <= 0) {
        var temp = addDays(resetTime(event[fields.endTime]), -1).getTime();
        end = start > temp ? start : temp;
      }
      var orgStart = start;
      var orgEnd = end;
      var ranges = [];
      if (start !== end) {
        if (start < dateRender[0].getTime()) {
          start = dateRender[0].getTime();
        }
        if (end > dateRender[dateRender.length - 1].getTime()) {
          end = dateRender[dateRender.length - 1].getTime();
        }
        var cStart = start;
        for (var level = 0; level < this.slots.length; level++) {
          var slot = this.slots[parseInt(level.toString(), 10)];
          if (this.parent.currentView === "WorkWeek" || this.parent.currentView === "TimelineWorkWeek" || this.parent.activeViewOptions.group.byDate || this.parent.activeViewOptions.showWeekend) {
            var slotDates = [];
            for (var _i = 0, slot_1 = slot; _i < slot_1.length; _i++) {
              var s = slot_1[_i];
              slotDates.push(new Date(s));
            }
            var renderedDates = this.getRenderedDates(slotDates);
            if (!isNullOrUndefined(renderedDates) && renderedDates.length > 0) {
              slot = [];
              for (var _a = 0, renderedDates_1 = renderedDates; _a < renderedDates_1.length; _a++) {
                var date = renderedDates_1[_a];
                slot.push(date.getTime());
              }
            }
          }
          if (typeof slot === "number") {
            var temp = slot;
            slot = [];
            slot.push(temp);
          }
          var firstSlot = slot[0];
          cStart = cStart <= firstSlot && end >= firstSlot ? firstSlot : cStart;
          if (cStart > end || firstSlot > end) {
            break;
          }
          if (!this.parent.activeViewOptions.group.byDate && this.parent.activeViewOptions.showWeekend && this.parent.currentView !== "WorkWeek" && this.parent.currentView !== "TimelineWorkWeek") {
            var startIndex = slot.indexOf(cStart);
            if (startIndex !== -1) {
              var endIndex = slot.indexOf(end);
              var hasBreak = endIndex !== -1;
              endIndex = hasBreak ? endIndex : slot.length - 1;
              var count = endIndex - startIndex + 1;
              var isLeft = slot[parseInt(startIndex.toString(), 10)] !== orgStart;
              var isRight = slot[parseInt(endIndex.toString(), 10)] !== orgEnd;
              ranges.push(this.cloneEventObject(event, slot[parseInt(startIndex.toString(), 10)], slot[parseInt(endIndex.toString(), 10)], count, isLeft, isRight));
              if (hasBreak) {
                break;
              }
            }
          } else {
            if (this.dateInRange(cStart, slot[0], slot[slot.length - 1])) {
              var availSlot = [];
              for (var i = 0; i < slot.length; i++) {
                if (this.dateInRange(slot[parseInt(i.toString(), 10)], orgStart, orgEnd)) {
                  availSlot.push(slot[parseInt(i.toString(), 10)]);
                }
              }
              if (availSlot.length > 0) {
                if (!this.parent.activeViewOptions.group.byDate) {
                  var isLeft = availSlot[0] !== orgStart;
                  var isRight = availSlot[availSlot.length - 1] !== orgEnd;
                  ranges.push(this.cloneEventObject(event, availSlot[0], availSlot[availSlot.length - 1], availSlot.length, isLeft, isRight));
                } else {
                  for (var _b = 0, availSlot_1 = availSlot; _b < availSlot_1.length; _b++) {
                    var slot_2 = availSlot_1[_b];
                    ranges.push(this.cloneEventObject(event, slot_2, slot_2, 1, slot_2 !== orgStart, slot_2 !== orgEnd));
                  }
                }
              }
            }
          }
        }
      } else {
        ranges.push(this.cloneEventObject(event, start, end, 1, false, false));
      }
      return ranges;
    };
    EventBase2.prototype.cloneEventObject = function(event, start, end, count, isLeft, isRight) {
      var fields = this.parent.eventFields;
      var e = extend({}, event, null, true);
      var data = { count, isLeft, isRight };
      data[fields.startTime] = event[fields.startTime];
      data[fields.endTime] = event[fields.endTime];
      e.data = data;
      e[fields.startTime] = new Date(start);
      e[fields.endTime] = new Date(end);
      return e;
    };
    EventBase2.prototype.dateInRange = function(date, start, end) {
      return start <= date && date <= end;
    };
    EventBase2.prototype.getSelectedEventElements = function(target) {
      this.removeSelectedAppointmentClass();
      if (this.parent.selectedElements.length <= 0) {
        this.parent.selectedElements.push(target);
      } else {
        var isAlreadySelected = this.parent.selectedElements.filter(function(element3) {
          return element3.getAttribute("data-guid") === target.getAttribute("data-guid");
        });
        if (isAlreadySelected.length <= 0) {
          var elementSelector = 'div[data-guid="' + target.getAttribute("data-guid") + '"]';
          var focusElements = [].slice.call(this.parent.element.querySelectorAll(elementSelector));
          for (var _i = 0, focusElements_1 = focusElements; _i < focusElements_1.length; _i++) {
            var element2 = focusElements_1[_i];
            this.parent.selectedElements.push(element2);
          }
        } else {
          var selectedElements = this.parent.selectedElements.filter(function(element3) {
            return element3.getAttribute("data-guid") !== target.getAttribute("data-guid");
          });
          this.parent.selectedElements = selectedElements;
        }
      }
      if (target && this.parent.selectedElements.length > 0) {
        this.addSelectedAppointments(this.parent.selectedElements, false);
      }
      return this.parent.selectedElements;
    };
    EventBase2.prototype.getSelectedEvents = function() {
      var _this = this;
      var eventSelect = [];
      var elementSelect = [];
      var selectAppointments = [].slice.call(this.parent.element.querySelectorAll("." + APPOINTMENT_BORDER));
      selectAppointments.filter(function(element2) {
        var isAlreadyAdded = eventSelect.filter(function(event) {
          return event.Guid === element2.getAttribute("data-guid");
        });
        if (isAlreadyAdded.length === 0) {
          eventSelect.push(_this.getEventByGuid(element2.getAttribute("data-guid")));
        }
        elementSelect.push(element2);
      });
      return {
        event: eventSelect.length > 1 ? eventSelect : eventSelect[0],
        element: elementSelect.length > 1 ? elementSelect : elementSelect[0]
      };
    };
    EventBase2.prototype.removeSelectedAppointmentClass = function() {
      var selectedAppointments = this.getSelectedAppointments();
      removeClass(selectedAppointments, APPOINTMENT_BORDER);
      if (this.parent.currentView === "Agenda" || this.parent.currentView === "MonthAgenda") {
        removeClass(selectedAppointments, AGENDA_SELECTED_CELL);
      }
    };
    EventBase2.prototype.addSelectedAppointments = function(cells, preventFocus) {
      if (this.parent.currentView !== "MonthAgenda") {
        this.parent.removeSelectedClass();
      }
      addClass(cells, APPOINTMENT_BORDER);
      if (cells.length > 0 && !preventFocus) {
        cells[cells.length - 1].focus();
      }
    };
    EventBase2.prototype.getSelectedAppointments = function() {
      return [].slice.call(this.parent.element.querySelectorAll("." + APPOINTMENT_BORDER + ",." + APPOINTMENT_CLASS + ":focus"));
    };
    EventBase2.prototype.focusElement = function(isFocused) {
      if (this.parent.eventWindow.dialogObject && this.parent.eventWindow.dialogObject.visible) {
        return;
      }
      var activeEle = document.activeElement;
      var selectedCell = this.parent.getSelectedCells();
      if (selectedCell.length > 0 && (activeEle && (this.parent.element.contains(activeEle) || selectedCell.indexOf(activeEle) !== -1) || isFocused)) {
        if (this.parent.keyboardInteractionModule) {
          var target = !isNullOrUndefined(this.parent.activeCellsData) && this.parent.activeCellsData.element || selectedCell[selectedCell.length - 1];
          this.parent.keyboardInteractionModule.selectCells(target instanceof Array, target);
        }
        return;
      }
      var selectedAppointments = this.getSelectedAppointments();
      if (selectedAppointments.length > 0) {
        if (this.parent.activeEventData && this.parent.activeEventData.element && selectedAppointments.indexOf(this.parent.activeEventData.element) > -1) {
          this.parent.activeEventData.element.focus();
          return;
        }
        selectedAppointments[selectedAppointments.length - 1].focus();
        return;
      }
    };
    EventBase2.prototype.selectWorkCellByTime = function(eventsData) {
      var target;
      if (this.parent.currentView === "Agenda" || this.parent.currentView === "MonthAgenda") {
        return target;
      }
      if (eventsData.length > 0) {
        var selectedObject = eventsData[eventsData.length - 1];
        var eventStartTime = selectedObject[this.parent.eventFields.startTime];
        var nearestTime = (/* @__PURE__ */ new Date(+eventStartTime)).setMinutes(0, 0, 0);
        var isAllDay = this.isAllDayAppointment(selectedObject);
        if (this.parent.currentView === "Month" || isAllDay) {
          nearestTime = (/* @__PURE__ */ new Date(+eventStartTime)).setHours(0, 0, 0, 0);
        }
        var targetArea = void 0;
        if (isAllDay && ["Day", "Week", "WorkWeek"].indexOf(this.parent.currentView) !== -1) {
          targetArea = this.parent.getAllDayRow();
        } else {
          targetArea = this.parent.getContentTable();
        }
        var queryString2 = '[data-date="' + new Date(nearestTime).getTime() + '"]';
        if (this.parent.activeViewOptions.group.resources.length > 0) {
          queryString2 += '[data-group-index="' + this.getGroupIndexFromEvent(selectedObject) + '"]';
        }
        target = targetArea.querySelector(queryString2);
        if (target) {
          this.parent.activeCellsData = this.parent.getCellDetails(target);
          if (this.parent.keyboardInteractionModule) {
            this.parent.keyboardInteractionModule.selectCells(false, target);
          }
          return target;
        }
      }
      return target;
    };
    EventBase2.prototype.getGroupIndexFromEvent = function(eventData) {
      var levelIndex;
      var resource;
      var levelName;
      var idField;
      for (var i = this.parent.resourceBase.resourceCollection.length - 1; i >= 0; i--) {
        var resourceData = eventData[this.parent.resourceBase.resourceCollection[parseInt(i.toString(), 10)].field];
        if (!isNullOrUndefined(resourceData)) {
          resource = this.parent.resourceBase.resourceCollection[parseInt(i.toString(), 10)];
          levelIndex = i;
          levelName = resource.name;
          idField = resource.field;
          break;
        }
      }
      if (isNullOrUndefined(levelName) && isNullOrUndefined(levelIndex)) {
        levelName = this.parent.resourceCollection.slice(-1)[0].name;
        levelIndex = this.parent.resourceCollection.length - 1;
        idField = this.parent.resourceCollection.slice(-1)[0].field;
        resource = this.parent.resourceCollection.filter(function(e, index) {
          if (e.name === levelName) {
            levelIndex = index;
            return e;
          }
          return null;
        })[0];
      }
      var id = eventData["" + idField] instanceof Array ? eventData["" + idField][0] : eventData["" + idField];
      if (levelIndex > 0) {
        var parentField = this.parent.resourceCollection[levelIndex - 1].field;
        return this.parent.resourceBase.getIndexFromResourceId(id, levelName, resource, eventData, parentField);
      } else {
        return this.parent.resourceBase.getIndexFromResourceId(id, levelName, resource);
      }
    };
    EventBase2.prototype.isAllDayAppointment = function(event) {
      var fieldMapping = this.parent.eventFields;
      var isAllDay = event[fieldMapping.isAllDay];
      var isFullDay = (getUniversalTime(event[fieldMapping.endTime]) - getUniversalTime(event[fieldMapping.startTime])) / MS_PER_DAY >= 1;
      return isAllDay || this.parent.eventSettings.spannedEventPlacement !== "TimeSlot" && isFullDay ? true : false;
    };
    EventBase2.prototype.addEventListener = function() {
      this.parent.on(documentClick, this.appointmentBorderRemove, this);
    };
    EventBase2.prototype.removeEventListener = function() {
      this.parent.off(documentClick, this.appointmentBorderRemove);
    };
    EventBase2.prototype.appointmentBorderRemove = function(event) {
      var element2 = event.event.target;
      if (closest(element2, "." + APPOINTMENT_CLASS)) {
        if (this.parent.currentView !== "MonthAgenda") {
          this.parent.removeSelectedClass();
        }
      } else if (!closest(element2, "." + POPUP_OPEN)) {
        this.removeSelectedAppointmentClass();
        this.parent.selectedElements = [];
      }
    };
    EventBase2.prototype.wireAppointmentEvents = function(element2, event, isPreventCrud) {
      if (isPreventCrud === void 0) {
        isPreventCrud = false;
      }
      var isReadOnly = !isNullOrUndefined(event) ? event[this.parent.eventFields.isReadonly] : false;
      EventHandler.add(element2, "click", this.eventClick, this);
      if (!this.parent.isAdaptive && !this.parent.activeViewOptions.readonly && !isReadOnly) {
        EventHandler.add(element2, "touchstart", this.eventTouchClick, this);
        EventHandler.add(element2, "dblclick", this.eventDoubleClick, this);
      }
      if (!this.parent.activeViewOptions.readonly && !isReadOnly && !isPreventCrud) {
        if (this.parent.resizeModule) {
          this.parent.resizeModule.wireResizeEvent(element2);
        }
        if (this.parent.dragAndDropModule) {
          this.parent.dragAndDropModule.wireDragEvent(element2);
        }
      }
    };
    EventBase2.prototype.eventTouchClick = function(e) {
      var _this = this;
      setTimeout(function() {
        return _this.isDoubleTapped = false;
      }, 250);
      e.preventDefault();
      if (this.isDoubleTapped) {
        this.eventDoubleClick(e);
      } else if (!this.isDoubleTapped) {
        this.isDoubleTapped = true;
        this.eventClick(e);
      }
    };
    EventBase2.prototype.renderResizeHandler = function(element2, spanEvent, isReadOnly) {
      if (!this.parent.resizeModule || !this.parent.allowResizing || this.parent.activeViewOptions.readonly || isReadOnly) {
        return;
      }
      for (var _i = 0, _a = Object.keys(spanEvent); _i < _a.length; _i++) {
        var resizeEdge = _a[_i];
        var resizeHandler = createElement("div", { className: EVENT_RESIZE_CLASS });
        switch (resizeEdge) {
          case "isLeft":
            if (!spanEvent.isLeft) {
              resizeHandler.appendChild(createElement("div", { className: "e-left-right-resize" }));
              addClass([resizeHandler], this.parent.enableRtl ? RIGHT_RESIZE_HANDLER : LEFT_RESIZE_HANDLER);
              prepend([resizeHandler], element2);
            }
            break;
          case "isRight":
            if (!spanEvent.isRight) {
              resizeHandler.appendChild(createElement("div", { className: "e-left-right-resize" }));
              addClass([resizeHandler], this.parent.enableRtl ? LEFT_RESIZE_HANDLER : RIGHT_RESIZE_HANDLER);
              append2([resizeHandler], element2);
            }
            break;
          case "isTop":
            if (!spanEvent.isTop) {
              resizeHandler.appendChild(createElement("div", { className: "e-top-bottom-resize" }));
              addClass([resizeHandler], TOP_RESIZE_HANDLER);
              prepend([resizeHandler], element2);
            }
            break;
          case "isBottom":
            if (!spanEvent.isBottom) {
              resizeHandler.appendChild(createElement("div", { className: "e-top-bottom-resize" }));
              addClass([resizeHandler], BOTTOM_RESIZE_HANDLER);
              append2([resizeHandler], element2);
            }
            break;
        }
      }
    };
    EventBase2.prototype.eventClick = function(eventData) {
      var _this = this;
      var target = eventData.target;
      if (target.classList.contains(DRAG_CLONE_CLASS) || target.classList.contains(RESIZE_CLONE_CLASS) || target.classList.contains(INLINE_SUBJECT_CLASS)) {
        return;
      }
      if ((eventData.ctrlKey || eventData.metaKey) && eventData.which === 1 && this.parent.keyboardInteractionModule) {
        this.parent.quickPopup.quickPopup.hide();
        this.parent.selectedElements = [].slice.call(this.parent.element.querySelectorAll("." + APPOINTMENT_BORDER));
        var target_1 = closest(eventData.target, "." + APPOINTMENT_CLASS);
        this.getSelectedEventElements(target_1);
        this.activeEventData(eventData, false);
        var selectArgs = {
          data: this.parent.activeEventData.event,
          element: this.parent.activeEventData.element,
          event: eventData,
          requestType: "eventSelect"
        };
        this.parent.trigger(select, selectArgs);
        var args = extend(this.parent.activeEventData, { cancel: false, originalEvent: eventData });
        this.parent.trigger(eventClick, args);
      } else {
        this.removeSelectedAppointmentClass();
        this.activeEventData(eventData, true);
        var selectEventArgs = {
          data: this.parent.activeEventData.event,
          element: this.parent.activeEventData.element,
          event: eventData,
          requestType: "eventSelect"
        };
        this.parent.trigger(select, selectEventArgs);
        var args = extend(this.parent.activeEventData, { cancel: false, originalEvent: eventData });
        this.parent.trigger(eventClick, args, function(eventClickArgs) {
          if (eventClickArgs.cancel) {
            _this.removeSelectedAppointmentClass();
            _this.parent.selectedElements = [];
            if (_this.parent.quickPopup) {
              _this.parent.quickPopup.quickPopupHide();
            }
          } else {
            if (_this.parent.currentView === "Agenda" || _this.parent.currentView === "MonthAgenda") {
              addClass([_this.parent.activeEventData.element], AGENDA_SELECTED_CELL);
            }
            if (_this.parent.allowInline) {
              var inlineArgs = {
                data: eventClickArgs.event,
                element: eventClickArgs.element,
                type: "Event"
              };
              _this.parent.notify(inlineClick, inlineArgs);
            } else {
              _this.parent.notify(eventClick, eventClickArgs);
            }
          }
        });
      }
    };
    EventBase2.prototype.eventDoubleClick = function(e) {
      if (this.parent.quickPopup) {
        this.parent.quickPopup.quickPopupHide(true);
      }
      if (e.type === "touchstart") {
        this.activeEventData(e, true);
      }
      this.removeSelectedAppointmentClass();
      this.parent.selectedElements = [];
      if (this.parent.activeEventData.element.classList.contains(INLINE_APPOINTMENT_CLASS) || this.parent.activeEventData.element.querySelector("." + INLINE_SUBJECT_CLASS)) {
        return;
      }
      if (!isNullOrUndefined(this.parent.activeEventData.event) && isNullOrUndefined(this.parent.activeEventData.event[this.parent.eventFields.recurrenceID])) {
        this.parent.eventWindow.openEditor(this.parent.activeEventData.event, "Save");
      } else {
        this.parent.currentAction = "EditOccurrence";
        this.parent.quickPopup.openRecurrenceAlert();
      }
    };
    EventBase2.prototype.getEventByGuid = function(guid) {
      return this.parent.eventsProcessed.filter(function(data) {
        return data.Guid === guid;
      })[0];
    };
    EventBase2.prototype.getEventById = function(id) {
      var _this = this;
      return this.parent.eventsData.filter(function(data) {
        return data[_this.parent.eventFields.id] === id;
      })[0];
    };
    EventBase2.prototype.generateGuid = function() {
      return "xyxxxxyx-xxxy-yxxx-xyxx-xxyxxxxyyxxx".replace(/[xy]/g, function(c) {
        var r = Math.random() * 16 | 0;
        var v = c === "x" ? r : r & 3 | 8;
        return v.toString(16);
      });
    };
    EventBase2.prototype.getEventIDType = function() {
      if (this.parent.eventsData.length !== 0) {
        return typeof this.parent.eventsData[0][this.parent.eventFields.id];
      }
      if (this.parent.blockData.length !== 0) {
        return typeof this.parent.blockData[0][this.parent.eventFields.id];
      }
      return "string";
    };
    EventBase2.prototype.getEventMaxID = function(resourceId) {
      var _this = this;
      if (this.parent.eventsData.length < 1 && this.parent.blockData.length < 1) {
        return 1;
      }
      var eventId;
      var idType = this.getEventIDType();
      if (idType === "string") {
        eventId = this.generateGuid();
      }
      if (idType === "number") {
        var datas = this.parent.eventsData.concat(this.parent.blockData);
        var appIds = datas.map(function(event) {
          return event[_this.parent.eventFields.id];
        });
        var maxId = appIds.reduce(function(a, b) {
          return Math.max(a, b);
        });
        maxId = isNullOrUndefined(resourceId) ? maxId : maxId + resourceId;
        eventId = maxId + 1;
      }
      return eventId;
    };
    EventBase2.prototype.activeEventData = function(eventData, isMultiple) {
      var _this = this;
      var target = closest(eventData.target, "." + APPOINTMENT_CLASS);
      var guid = target.getAttribute("data-guid");
      if (isMultiple) {
        this.addSelectedAppointments([].slice.call(this.parent.element.querySelectorAll('div[data-guid="' + guid + '"]')), true);
        target.focus();
      }
      var eventObject = this.getEventByGuid(guid);
      if (eventObject && eventObject.isSpanned) {
        eventObject = this.parent.eventsData.filter(function(obj) {
          return obj[_this.parent.eventFields.id] === eventObject[_this.parent.eventFields.id];
        })[0];
      }
      this.parent.activeEventData = { event: eventObject, element: target };
    };
    EventBase2.prototype.generateOccurrence = function(event, viewDate, oldTimezone, isMaxCount) {
      var startDate = event[this.parent.eventFields.startTime];
      var endDate = event[this.parent.eventFields.endTime];
      var eventRule = event[this.parent.eventFields.recurrenceRule];
      var timeZoneDiff = endDate.getTimezoneOffset() - startDate.getTimezoneOffset();
      var duration = endDate.getTime() - startDate.getTime() - timeZoneDiff * 6e4;
      viewDate = new Date((viewDate || this.parent.activeView.startDate()).getTime() - duration);
      var exception = event[this.parent.eventFields.recurrenceException];
      var maxCount;
      if (this.parent.currentView !== "Agenda" && isMaxCount) {
        maxCount = getDateCount$1(viewDate, this.parent.activeView.endDate()) + 1;
      }
      var newTimezone = this.parent.timezone || this.parent.tzModule.getLocalTimezoneName();
      var firstDay = this.parent.activeViewOptions.firstDayOfWeek;
      var calendarMode = this.parent.calendarMode;
      var dates = generate(startDate, eventRule, exception, firstDay, maxCount, viewDate, calendarMode, oldTimezone, newTimezone);
      if (this.parent.currentView === "Agenda" && eventRule.indexOf("COUNT") === -1 && eventRule.indexOf("UNTIL") === -1) {
        if (isNullOrUndefined(event.generatedDates)) {
          event.generatedDates = { start: new Date(dates[0]), end: new Date(dates[dates.length - 1]) };
        } else {
          if (dates[0] < event.generatedDates.start.getTime()) {
            event.generatedDates.start = new Date(dates[0]);
          }
          if (dates[dates.length - 1] > event.generatedDates.end.getTime()) {
            event.generatedDates.end = new Date(dates[dates.length - 1]);
          }
        }
      }
      var occurrenceCollection = [];
      for (var _i = 0, dates_1 = dates; _i < dates_1.length; _i++) {
        var date = dates_1[_i];
        var clonedObject = extend({}, event, null, true);
        date = this.getDSTAdjustedTime(date, clonedObject);
        clonedObject[this.parent.eventFields.startTime] = new Date(date);
        clonedObject[this.parent.eventFields.endTime] = new Date(new Date(date).setMilliseconds(duration));
        clonedObject[this.parent.eventFields.recurrenceID] = clonedObject[this.parent.eventFields.id];
        delete clonedObject[this.parent.eventFields.recurrenceException];
        delete clonedObject[this.parent.eventFields.followingID];
        clonedObject.Guid = this.generateGuid();
        occurrenceCollection.push(clonedObject);
      }
      return occurrenceCollection;
    };
    EventBase2.prototype.getDSTAdjustedTime = function(date, event) {
      var occurDate = date;
      if (this.parent.timezone && (event[this.parent.eventFields.startTimezone] || event[this.parent.eventFields.endTimezone])) {
        var eventOffset = this.getDSTDiff(event[this.parent.eventFields.startTime], new Date(date), event[this.parent.eventFields.startTimezone]);
        var schOffset = this.getDSTDiff(event[this.parent.eventFields.startTime], new Date(date), this.parent.timezone);
        occurDate = new Date(date).getTime() - (eventOffset - schOffset) * 6e4;
      }
      return occurDate;
    };
    EventBase2.prototype.getDSTDiff = function(startDate, occurDate, timezone) {
      var startOffset = this.parent.tzModule.offset(new Date(startDate), timezone);
      var occurOffset = this.parent.tzModule.offset(new Date(occurDate), timezone);
      return startOffset - occurOffset;
    };
    EventBase2.prototype.getParentEvent = function(eventObj, isParent) {
      if (isParent === void 0) {
        isParent = false;
      }
      var parentEvent;
      do {
        eventObj = this.getFollowingEvent(eventObj);
        if (eventObj) {
          parentEvent = extend({}, eventObj, null, true);
        }
      } while (eventObj && isParent);
      if (isParent && parentEvent) {
        var collection = this.getEventCollections(parentEvent);
        var followObj = collection.follow.slice(-1)[0];
        if (collection.occurrence.length > 0 && !parentEvent[this.parent.eventFields.recurrenceException]) {
          followObj = collection.occurrence.slice(-1)[0];
        }
        if (followObj) {
          parentEvent[this.parent.eventFields.recurrenceRule] = followObj[this.parent.eventFields.recurrenceRule];
        }
      }
      return parentEvent;
    };
    EventBase2.prototype.getEventCollections = function(parentObj, childObj) {
      var followingCollection = [];
      var occurrenceCollection = [];
      var followingEvent = parentObj;
      do {
        followingEvent = this.getFollowingEvent(followingEvent, true);
        if (followingEvent) {
          followingCollection.push(followingEvent);
        }
        occurrenceCollection = occurrenceCollection.concat(this.getOccurrenceEvent(followingEvent || parentObj));
      } while (followingEvent);
      var collections = {};
      if (childObj) {
        var fields_1 = this.parent.eventFields;
        collections = {
          follow: followingCollection.filter(function(eventData) {
            return eventData[fields_1.startTime] >= childObj[fields_1.startTime];
          }),
          occurrence: occurrenceCollection.filter(function(eventData) {
            return eventData[fields_1.startTime] >= childObj[fields_1.startTime];
          })
        };
      } else {
        collections = { follow: followingCollection, occurrence: occurrenceCollection };
      }
      return collections;
    };
    EventBase2.prototype.getFollowingEvent = function(parentObj, isReverse) {
      var fields = this.parent.eventFields;
      var fieldValue;
      if (isReverse) {
        fieldValue = parentObj[fields.id];
      } else {
        fieldValue = parentObj[fields.recurrenceID] || parentObj[fields.followingID];
      }
      var parentApp = this.parent.eventsData.filter(function(data) {
        return data[isReverse ? fields.followingID : fields.id] === fieldValue;
      });
      return parentApp.shift();
    };
    EventBase2.prototype.isFollowingEvent = function(parentObj, childObj) {
      var parentStart = parentObj[this.parent.eventFields.startTime];
      var childStart = childObj[this.parent.eventFields.startTime];
      return parentStart.getHours() === childStart.getHours() && parentStart.getMinutes() === childStart.getMinutes() && parentStart.getSeconds() === childStart.getSeconds();
    };
    EventBase2.prototype.getOccurrenceEvent = function(eventObj, isGuid, isFollowing) {
      if (isGuid === void 0) {
        isGuid = false;
      }
      if (isFollowing === void 0) {
        isFollowing = false;
      }
      var idField = isGuid ? "Guid" : isFollowing ? this.parent.eventFields.followingID : this.parent.eventFields.recurrenceID;
      var fieldKey = isGuid ? "Guid" : this.parent.eventFields.id;
      var dataSource = isGuid ? this.parent.eventsProcessed : this.parent.eventsData;
      return dataSource.filter(function(data) {
        return data["" + idField] === eventObj["" + fieldKey];
      });
    };
    EventBase2.prototype.getOccurrencesByID = function(id) {
      var fields = this.parent.eventFields;
      var occurrenceCollection = [];
      var parentObject = this.parent.eventsData.filter(function(obj) {
        return obj[fields.id] === id;
      });
      for (var _i = 0, parentObject_1 = parentObject; _i < parentObject_1.length; _i++) {
        var event_3 = parentObject_1[_i];
        if (!isNullOrUndefined(event_3[fields.recurrenceRule])) {
          occurrenceCollection = occurrenceCollection.concat(this.generateOccurrence(event_3));
        }
      }
      return occurrenceCollection;
    };
    EventBase2.prototype.getOccurrencesByRange = function(startTime, endTime) {
      var fields = this.parent.eventFields;
      var occurrenceCollection = [];
      for (var _i = 0, _a = this.parent.eventsData; _i < _a.length; _i++) {
        var event_4 = _a[_i];
        if (!isNullOrUndefined(event_4[fields.recurrenceRule])) {
          occurrenceCollection = occurrenceCollection.concat(this.generateOccurrence(event_4));
        }
      }
      var filter2 = occurrenceCollection.filter(function(obj) {
        return obj[fields.startTime] >= startTime && obj[fields.endTime] <= endTime && !isNullOrUndefined(obj[fields.recurrenceID]);
      });
      return filter2;
    };
    EventBase2.prototype.getDeletedOccurrences = function(recurrenceData) {
      var fields = this.parent.eventFields;
      var parentObject;
      var deletedOccurrences = [];
      if (typeof recurrenceData === "string" || typeof recurrenceData === "number") {
        parentObject = this.parent.eventsData.filter(function(obj) {
          return obj[fields.id] === recurrenceData;
        })[0];
      } else {
        parentObject = extend({}, recurrenceData, null, true);
      }
      if (parentObject[fields.recurrenceException]) {
        var exDateString_1 = parentObject[fields.recurrenceException].split(",");
        var _loop_3 = function(i2, len2) {
          var edited = this_2.parent.eventsData.filter(function(eventObj) {
            return eventObj[fields.recurrenceID] === parentObject[fields.id] && eventObj[fields.recurrenceException] === exDateString_1[parseInt(i2.toString(), 10)];
          });
          if (edited.length === 0) {
            var exDate = getDateFromRecurrenceDateString(exDateString_1[parseInt(i2.toString(), 10)]);
            var childObject = extend({}, recurrenceData, null, true);
            childObject[fields.recurrenceID] = parentObject[fields.id];
            delete childObject[fields.followingID];
            childObject[fields.recurrenceException] = exDateString_1[parseInt(i2.toString(), 10)];
            var startDate = new Date(exDate.getTime());
            var time = parentObject[fields.endTime].getTime() - parentObject[fields.startTime].getTime();
            var endDate = new Date(startDate.getTime());
            endDate.setMilliseconds(time);
            childObject[fields.startTime] = new Date(startDate.getTime());
            childObject[fields.endTime] = new Date(endDate.getTime());
            deletedOccurrences.push(childObject);
          }
        };
        var this_2 = this;
        for (var i = 0, len = exDateString_1.length; i < len; i++) {
          _loop_3(i, len);
        }
      }
      return deletedOccurrences;
    };
    EventBase2.prototype.applyResourceColor = function(element2, data, type, index, alpha) {
      if (!this.parent.resourceBase) {
        return;
      }
      var alphaColor = function(color2, alpha2) {
        color2 = color2.replace("#", "");
        var r = parseInt(color2.substring(0, color2.length / 3), 16);
        var g = parseInt(color2.substring(color2.length / 3, 2 * color2.length / 3), 16);
        var b = parseInt(color2.substring(2 * color2.length / 3, 3 * color2.length / 3), 16);
        return "rgba(" + r + ", " + g + ", " + b + ", " + alpha2 + ")";
      };
      var color = this.parent.resourceBase.getResourceColor(data, index);
      if (color) {
        element2.style[type] = !isNullOrUndefined(alpha) ? alphaColor(color, alpha) : color;
      }
    };
    EventBase2.prototype.createBlockAppointmentElement = function(record, resIndex, isResourceEventTemplate) {
      var eventSubject = record[this.parent.eventFields.subject] || this.parent.eventSettings.fields.subject.default;
      var appointmentWrapper = createElement("div", {
        className: BLOCK_APPOINTMENT_CLASS,
        attrs: {
          "data-id": "Appointment_" + record[this.parent.eventFields.id],
          "aria-disabled": "true"
        }
      });
      var templateElement;
      if (!isNullOrUndefined(this.parent.activeViewOptions.eventTemplate)) {
        var scheduleId = this.parent.element.id + "_";
        var viewName = this.parent.activeViewOptions.eventTemplateName;
        var templateId = scheduleId + viewName + "eventTemplate";
        var templateName = "eventTemplate" + (isResourceEventTemplate && this.parent.currentView.indexOf("Year") === -1 ? "_" + resIndex : "");
        templateElement = this.parent.getAppointmentTemplate()(record, this.parent, templateName, templateId, false);
      } else {
        var appointmentSubject = createElement("div", { className: SUBJECT_CLASS });
        this.parent.sanitize(eventSubject, appointmentSubject);
        templateElement = [appointmentSubject];
      }
      append2(templateElement, appointmentWrapper);
      this.setWrapperAttributes(appointmentWrapper, resIndex);
      return appointmentWrapper;
    };
    EventBase2.prototype.setWrapperAttributes = function(appointmentWrapper, resIndex) {
      if (!isNullOrUndefined(this.cssClass)) {
        addClass([appointmentWrapper], this.cssClass);
      }
      if (this.parent.activeViewOptions.group.resources.length > 0) {
        appointmentWrapper.setAttribute("data-group-index", resIndex.toString());
      }
    };
    EventBase2.prototype.getReadonlyAttribute = function(event) {
      return (event[this.parent.eventFields.isReadonly] || this.parent.readonly).toString();
    };
    EventBase2.prototype.isBlockRange = function(eventData) {
      var eventCollection = eventData instanceof Array ? eventData : [eventData];
      var isBlockAlert = false;
      var fields = this.parent.eventFields;
      for (var _i = 0, _a = eventCollection; _i < _a.length; _i++) {
        var event_5 = _a[_i];
        var dataCol = [];
        if (!isNullOrUndefined(event_5[fields.recurrenceRule]) && (isNullOrUndefined(event_5[fields.recurrenceID]) || event_5[fields.id] === event_5[fields.recurrenceID])) {
          dataCol = this.generateOccurrence(event_5);
        } else {
          dataCol.push(event_5);
        }
        for (var _b = 0, dataCol_1 = dataCol; _b < dataCol_1.length; _b++) {
          var data = dataCol_1[_b];
          var filterBlockEvents = this.filterBlockEvents(data);
          if (filterBlockEvents.length > 0) {
            isBlockAlert = true;
            break;
          }
        }
      }
      this.parent.uiStateValues.isBlock = isBlockAlert;
      return isBlockAlert;
    };
    EventBase2.prototype.getFilterEventsList = function(dataSource, query) {
      return new DataManager(dataSource).executeLocal(new Query().where(query));
    };
    EventBase2.prototype.getSeriesEvents = function(parentEvent, startTime) {
      var fields = this.parent.eventFields;
      startTime = isNullOrUndefined(startTime) ? parentEvent[fields.startTime] : startTime;
      var deleteFutureEditEvents;
      var futureEvents;
      var deleteFutureEditEventList = [];
      var delId = parentEvent[fields.id];
      var followingId = parentEvent[fields.followingID];
      var deleteFutureEvent;
      var startTimeQuery = this.parent.currentAction === "EditSeries" ? "greaterthan" : "greaterthanorequal";
      do {
        deleteFutureEvent = new Predicate(fields.followingID, "equal", delId).and(new Predicate(fields.startTime, startTimeQuery, startTime));
        futureEvents = this.getFilterEventsList(this.parent.eventsData, deleteFutureEvent);
        deleteFutureEditEvents = futureEvents.slice(-1)[0];
        if (!isNullOrUndefined(deleteFutureEditEvents) && deleteFutureEditEvents[fields.id] !== followingId) {
          deleteFutureEditEventList.push(deleteFutureEditEvents);
          delId = deleteFutureEditEvents[fields.id];
          followingId = deleteFutureEditEvents[fields.followingID];
        } else {
          followingId = null;
        }
      } while (futureEvents.length === 1 && !isNullOrUndefined(deleteFutureEditEvents[fields.followingID]));
      return deleteFutureEditEventList;
    };
    EventBase2.prototype.getEditedOccurrences = function(deleteFutureEditEventList, startTime) {
      var fields = this.parent.eventFields;
      var deleteRecurrenceEventList = [];
      var delEditedEvents;
      for (var _i = 0, deleteFutureEditEventList_1 = deleteFutureEditEventList; _i < deleteFutureEditEventList_1.length; _i++) {
        var event_6 = deleteFutureEditEventList_1[_i];
        var delEventQuery = new Predicate(fields.recurrenceID, "equal", event_6[fields.id]).or(new Predicate(fields.recurrenceID, "equal", event_6[fields.followingID]).and(new Predicate(fields.recurrenceID, "notequal", void 0)).and(new Predicate(fields.recurrenceID, "notequal", null)));
        if (this.parent.currentAction === "EditFollowingEvents" || this.parent.currentAction === "DeleteFollowingEvents") {
          delEventQuery = delEventQuery.and(new Predicate(fields.startTime, "greaterthanorequal", startTime));
        }
        delEditedEvents = this.getFilterEventsList(this.parent.eventsData, delEventQuery);
        deleteRecurrenceEventList = deleteRecurrenceEventList.concat(delEditedEvents);
      }
      return deleteRecurrenceEventList;
    };
    EventBase2.prototype.getRenderedDates = function(dateRender) {
      var firstDate = 0;
      var lastDate = dateRender.length;
      var filteredDates;
      if (dateRender[0] < this.parent.minDate && dateRender[dateRender.length - 1] > this.parent.maxDate) {
        for (var i = 0; i < dateRender.length; i++) {
          if (resetTime(dateRender[parseInt(i.toString(), 10)]).getTime() === resetTime(new Date(this.parent.minDate)).getTime()) {
            firstDate = i;
          }
          if (resetTime(dateRender[parseInt(i.toString(), 10)]).getTime() === resetTime(new Date(this.parent.maxDate)).getTime()) {
            lastDate = i;
          }
        }
        filteredDates = dateRender.filter(function(date) {
          return date >= dateRender[parseInt(firstDate.toString(), 10)] && date <= dateRender[parseInt(lastDate.toString(), 10)];
        });
      }
      return filteredDates;
    };
    EventBase2.prototype.isValidEvent = function(eventObj, start, end, schedule) {
      var isHourRange = end.getTime() > schedule.startHour.getTime() && start.getTime() < schedule.endHour.getTime();
      var isSameRange = schedule.startHour.getTime() <= start.getTime() && eventObj[this.parent.eventFields.startTime].getTime() >= schedule.startHour.getTime() && eventObj[this.parent.eventFields.endTime].getTime() < schedule.endHour.getTime() && start.getTime() === end.getTime();
      return isHourRange || isSameRange;
    };
    EventBase2.prototype.allDayExpandScroll = function(dateHeader) {
      var indentHeight = 0;
      var headerRows = [].slice.call(this.parent.element.querySelectorAll("." + HEADER_ROW_CLASS));
      headerRows.forEach(function(element2) {
        var tdEle = [].slice.call(element2.children);
        tdEle.forEach(function(ele) {
          ele.style.top = indentHeight + "px";
        });
        indentHeight += element2.offsetHeight;
      });
      indentHeight = dateHeader.offsetHeight - indentHeight;
      this.parent.element.querySelector("." + ALLDAY_CELLS_CLASS).style.height = indentHeight / 12 + "em";
      if (this.parent.uiStateValues.expand) {
        addClass([dateHeader], ALLDAY_APPOINTMENT_SCROLL);
      } else {
        removeClass([dateHeader], ALLDAY_APPOINTMENT_SCROLL);
      }
    };
    EventBase2.prototype.updateEventMinimumDuration = function(startEndHours, startTime, endTime) {
      if (startTime.getTime() < endTime.getTime()) {
        var eventDuration = (getUniversalTime(endTime) - getUniversalTime(startTime)) / MS_PER_MINUTE;
        if (eventDuration < this.parent.eventSettings.minimumEventDuration) {
          var tempEnd = new Date(startTime);
          tempEnd.setMinutes(tempEnd.getMinutes() + this.parent.eventSettings.minimumEventDuration);
          endTime = tempEnd;
          if (endTime.getTime() > startEndHours.endHour.getTime()) {
            var tempStart = new Date(startEndHours.endHour.getTime());
            tempStart.setMinutes(tempStart.getMinutes() - this.parent.eventSettings.minimumEventDuration);
            startTime = tempStart;
            endTime = startEndHours.endHour;
          }
        }
      }
      return { startDate: startTime, endDate: endTime };
    };
    EventBase2.prototype.createEventWrapper = function(type, index) {
      if (type === void 0) {
        type = "";
      }
      if (index === void 0) {
        index = 0;
      }
      var tr = createElement("tr");
      var levels = this.parent.activeView.colLevels.slice(-1)[0];
      for (var i = 0, len = levels.length; i < len; i++) {
        var col = levels[parseInt(i.toString(), 10)];
        var appointmentWrap = createElement("td", {
          className: type === "allDay" ? ALLDAY_APPOINTMENT_WRAPPER_CLASS : type === "timeIndicator" ? TIMELINE_WRAPPER_CLASS : DAY_WRAPPER_CLASS,
          attrs: { "data-date": col.date.getTime().toString() }
        });
        if (!isNullOrUndefined(col.groupIndex)) {
          appointmentWrap.setAttribute("data-group-index", col.groupIndex.toString());
        }
        if (type === "") {
          var innerWrapper = createElement("div", {
            id: APPOINTMENT_WRAPPER_CLASS + "-" + index.toString(),
            className: APPOINTMENT_WRAPPER_CLASS
          });
          appointmentWrap.appendChild(innerWrapper);
        }
        tr.appendChild(appointmentWrap);
        index = index + 1;
      }
      return tr;
    };
    EventBase2.prototype.getPageCoordinates = function(e) {
      if (isNullOrUndefined(e)) {
        return e;
      }
      var eventArgs = e.event;
      return eventArgs && eventArgs.changedTouches ? eventArgs.changedTouches[0] : e.changedTouches ? e.changedTouches[0] : eventArgs || e;
    };
    EventBase2.prototype.renderSpannedIcon = function(element2, spanEvent) {
      var iconElement = createElement("div", { className: EVENT_INDICATOR_CLASS + " " + ICON });
      if (spanEvent.isLeft) {
        var iconLeft = iconElement.cloneNode();
        addClass([iconLeft], EVENT_ICON_LEFT_CLASS);
        prepend([iconLeft], element2);
      }
      if (spanEvent.isRight) {
        var iconRight = iconElement.cloneNode();
        addClass([iconRight], EVENT_ICON_RIGHT_CLASS);
        append2([iconRight], element2);
      }
      if (spanEvent.isTop) {
        var iconTop = iconElement.cloneNode();
        addClass([iconTop], EVENT_ICON_UP_CLASS);
        prepend([iconTop], element2);
      }
      if (spanEvent.isBottom) {
        var iconBottom = iconElement.cloneNode();
        addClass([iconBottom], EVENT_ICON_DOWN_CLASS);
        append2([iconBottom], element2);
      }
    };
    EventBase2.prototype.unWireEvents = function() {
      var appElements = [].slice.call(this.parent.element.querySelectorAll("." + APPOINTMENT_CLASS));
      for (var _i = 0, appElements_1 = appElements; _i < appElements_1.length; _i++) {
        var element2 = appElements_1[_i];
        EventHandler.clearEvents(element2);
      }
    };
    EventBase2.prototype.destroy = function() {
      this.unWireEvents();
      this.parent = null;
    };
    return EventBase2;
  }()
);
var __extends$k = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var VerticalEvent = (
  /** @class */
  function(_super) {
    __extends$k(VerticalEvent2, _super);
    function VerticalEvent2(parent) {
      var _this = _super.call(this, parent) || this;
      _this.dateRender = [];
      _this.renderedEvents = [];
      _this.renderedAllDayEvents = [];
      _this.overlapEvents = [];
      _this.moreEvents = [];
      _this.overlapList = [];
      _this.allDayEvents = [];
      _this.slotCount = _this.parent.activeViewOptions.timeScale.slotCount;
      _this.interval = _this.parent.activeViewOptions.timeScale.interval;
      _this.allDayLevel = 0;
      _this.startHour = _this.parent.activeView.getStartHour();
      _this.endHour = _this.parent.activeView.getEndHour();
      _this.element = _this.parent.activeView.getPanel();
      _this.fields = _this.parent.eventFields;
      _this.animation = new Animation$1({ progress: _this.animationUiUpdate.bind(_this) });
      _this.addEventListener();
      return _this;
    }
    VerticalEvent2.prototype.renderAppointments = function() {
      if (isNullOrUndefined(this.parent)) {
        return;
      }
      if (this.parent.dragAndDropModule) {
        this.parent.dragAndDropModule.setDragArea();
      }
      this.isResourceEventTemplate = this.parent.isSpecificResourceEvents();
      var wrapperElements = [].slice.call(this.parent.element.querySelectorAll("." + BLOCK_APPOINTMENT_CLASS + ",." + APPOINTMENT_CLASS + ",." + ROW_COUNT_WRAPPER_CLASS));
      var isDragging = this.parent.crudModule && this.parent.crudModule.crudObj.isCrudAction ? true : false;
      for (var _i = 0, wrapperElements_1 = wrapperElements; _i < wrapperElements_1.length; _i++) {
        var wrapper = wrapperElements_1[_i];
        if (isDragging && !(wrapper.classList.contains(ALLDAY_APPOINTMENT_CLASS) || wrapper.classList.contains(ROW_COUNT_WRAPPER_CLASS))) {
          var groupIndex = parseInt(wrapper.getAttribute("data-group-index"), 10);
          for (var j = 0, len = this.parent.crudModule.crudObj.sourceEvent.length; j < len; j++) {
            if (groupIndex === this.parent.crudModule.crudObj.sourceEvent[parseInt(j.toString(), 10)].groupIndex || groupIndex === this.parent.crudModule.crudObj.targetEvent[parseInt(j.toString(), 10)].groupIndex) {
              remove(wrapper);
            }
          }
        } else {
          remove(wrapper);
        }
      }
      if (!this.element.querySelector("." + WORK_CELLS_CLASS)) {
        return;
      }
      if (this.parent.virtualScrollModule) {
        this.parent.virtualScrollModule.updateFocusedWorkCell();
      }
      this.allDayElement = [].slice.call(this.element.querySelectorAll("." + ALLDAY_CELLS_CLASS));
      this.setAllDayRowHeight(0);
      if (this.parent.eventsProcessed.length === 0 && this.parent.blockProcessed.length === 0) {
        return;
      }
      var expandCollapse = this.element.querySelector("." + ALLDAY_APPOINTMENT_SECTION_CLASS);
      EventHandler.remove(expandCollapse, "click", this.rowExpandCollapse);
      EventHandler.add(expandCollapse, "click", this.rowExpandCollapse, this);
      this.renderedEvents = [];
      this.renderedAllDayEvents = [];
      this.initializeValues();
      this.processBlockEvents();
      this.renderEvents("normalEvents");
      if (this.allDayEvents.length > 0) {
        this.allDayEvents = this.allDayEvents.filter(function(item, index, arr) {
          return index === arr.map(function(item2) {
            return item2.Guid;
          }).indexOf(item.Guid);
        });
        removeClass(this.allDayElement, ALLDAY_ROW_ANIMATE_CLASS);
        this.slots.push(this.parent.activeView.renderDates.map(function(date) {
          return +date;
        }));
        this.renderEvents("allDayEvents");
      }
      this.parent.notify(contentReady, {});
      addClass(this.allDayElement, ALLDAY_ROW_ANIMATE_CLASS);
      if (isDragging) {
        this.parent.crudModule.crudObj.isCrudAction = false;
      }
      this.parent.renderTemplates();
    };
    VerticalEvent2.prototype.initializeValues = function() {
      this.resources = this.parent.activeViewOptions.group.resources.length > 0 ? this.parent.uiStateValues.isGroupAdaptive ? [this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]] : this.parent.resourceBase.lastResourceLevel : [];
      if (this.resources.length > 0 && this.parent.activeViewOptions.allowVirtualScrolling && this.parent.virtualScrollModule) {
        this.resources = this.parent.resourceBase.renderedResources;
      }
      this.cellHeight = parseFloat(this.parent.element.querySelector(".e-content-wrap tbody tr").getBoundingClientRect().height.toFixed(2));
      this.dateRender[0] = this.parent.activeView.renderDates;
      if (this.parent.activeViewOptions.group.resources.length > 0) {
        for (var i = 0, len = this.resources.length; i < len; i++) {
          this.dateRender[parseInt(i.toString(), 10)] = this.resources[parseInt(i.toString(), 10)].renderDates;
        }
      }
    };
    VerticalEvent2.prototype.getHeight = function(start, end) {
      var appHeight = (getUniversalTime(end) - getUniversalTime(start)) / MS_PER_MINUTE * (this.cellHeight * this.slotCount) / this.interval;
      appHeight = appHeight <= 0 ? this.cellHeight : appHeight;
      return appHeight;
    };
    VerticalEvent2.prototype.appendEvent = function(eventObj, appointmentElement, index, appLeft) {
      var appointmentWrap = this.element.querySelector("." + APPOINTMENT_WRAPPER_CLASS + '[id="' + APPOINTMENT_WRAPPER_CLASS + "-" + index + '"]');
      if (this.parent.enableRtl) {
        setStyleAttribute(appointmentElement, { "right": appLeft });
      } else {
        setStyleAttribute(appointmentElement, { "left": appLeft });
      }
      var eventType = appointmentElement.classList.contains(BLOCK_APPOINTMENT_CLASS) ? "blockEvent" : "event";
      var args = {
        data: extend({}, eventObj, null, true),
        element: appointmentElement,
        cancel: false,
        type: eventType
      };
      this.parent.trigger(eventRendered, args, function(eventArgs) {
        if (!eventArgs.cancel) {
          appointmentWrap.appendChild(appointmentElement);
        }
      });
    };
    VerticalEvent2.prototype.processBlockEvents = function() {
      var resources = this.getResourceList();
      var dateCount = this.getStartCount();
      for (var _i = 0, resources_1 = resources; _i < resources_1.length; _i++) {
        var resource = resources_1[_i];
        var renderDates = this.dateRender[parseInt(resource.toString(), 10)];
        for (var day = 0, length_1 = renderDates.length; day < length_1; day++) {
          var startDate = new Date(renderDates[parseInt(day.toString(), 10)].getTime());
          var endDate = addDays(renderDates[parseInt(day.toString(), 10)], 1);
          var filterEvents = this.filterEvents(startDate, endDate, this.parent.blockProcessed, this.resources[parseInt(resource.toString(), 10)]);
          for (var _a = 0, filterEvents_1 = filterEvents; _a < filterEvents_1.length; _a++) {
            var event_1 = filterEvents_1[_a];
            if (this.parent.resourceBase) {
              this.setValues(event_1, resource);
            }
            this.renderBlockEvents(event_1, day, resource, dateCount);
            this.cssClass = null;
            this.groupOrder = null;
          }
          dateCount += 1;
        }
      }
    };
    VerticalEvent2.prototype.renderBlockEvents = function(eventObj, dayIndex2, resource, dayCount) {
      var spannedData = this.isSpannedEvent(eventObj, dayIndex2, resource);
      var eStart = spannedData[this.fields.startTime];
      var eEnd = spannedData[this.fields.endTime];
      var currentDate = resetTime(new Date(this.dateRender[parseInt(resource.toString(), 10)][parseInt(dayIndex2.toString(), 10)].getTime()));
      var schedule = getStartEndHours(currentDate, this.startHour, this.endHour);
      if (eStart <= eEnd && this.isValidEvent(eventObj, eStart, eEnd, schedule) && this.isWorkDayAvailable(resource, eStart)) {
        var blockTop = void 0;
        var blockHeight = void 0;
        if (spannedData[this.fields.isAllDay]) {
          var contentWrap = this.parent.element.querySelector("." + CONTENT_WRAP_CLASS + " table");
          blockHeight = formatUnit(contentWrap.offsetHeight);
          blockTop = formatUnit(0);
        } else {
          blockHeight = formatUnit(this.getHeight(eStart, eEnd));
          blockTop = formatUnit(this.getTopValue(eStart, dayIndex2, resource));
        }
        var appointmentElement = this.createBlockAppointmentElement(eventObj, resource, this.isResourceEventTemplate);
        setStyleAttribute(appointmentElement, { "width": "100%", "height": blockHeight, "top": blockTop });
        var index = this.getDayIndex(dayIndex2, resource, dayCount);
        this.appendEvent(eventObj, appointmentElement, index, "0px");
      }
    };
    VerticalEvent2.prototype.renderEvents = function(eventType) {
      removeClass(this.allDayElement, ALLDAY_ROW_ANIMATE_CLASS);
      var eventCollection = eventType === "allDayEvents" ? this.sortByDateTime(this.allDayEvents) : void 0;
      var resources = this.getResourceList();
      var dateCount = this.getStartCount();
      var isRender;
      var _loop_1 = function(resource2) {
        isRender = true;
        if (this_1.parent.crudModule && this_1.parent.crudModule.crudObj.isCrudAction && eventType !== "allDayEvents" && !this_1.parent.uiStateValues.isGroupAdaptive) {
          if (this_1.parent.crudModule.crudObj.sourceEvent.filter(function(data) {
            return data.groupIndex === resource2;
          }).length === 0 && this_1.parent.crudModule.crudObj.targetEvent.filter(function(data) {
            return data.groupIndex === resource2;
          }).length === 0) {
            isRender = false;
          }
        }
        this_1.slots = [];
        var renderDates = this_1.dateRender[parseInt(resource2.toString(), 10)];
        var renderedDate = this_1.getRenderedDates(renderDates) || renderDates;
        this_1.slots.push(renderDates.map(function(date) {
          return +date;
        }));
        for (var day = 0, length_2 = renderDates.length; day < length_2 && renderDates[parseInt(day.toString(), 10)] <= renderedDate[renderedDate.length - 1]; day++) {
          this_1.renderedEvents = [];
          var startDate = new Date(renderDates[parseInt(day.toString(), 10)].getTime());
          var endDate = addDays(renderDates[parseInt(day.toString(), 10)], 1);
          var filterEvents = this_1.filterEvents(startDate, endDate, eventCollection, this_1.resources[parseInt(resource2.toString(), 10)]);
          if (isRender) {
            for (var _i2 = 0, filterEvents_2 = filterEvents; _i2 < filterEvents_2.length; _i2++) {
              var event_2 = filterEvents_2[_i2];
              if (this_1.parent.resourceBase) {
                this_1.setValues(event_2, resource2);
              }
              if (eventType === "allDayEvents") {
                this_1.renderAllDayEvents(event_2, day, resource2, dateCount);
              } else {
                if (this_1.isAllDayAppointment(event_2)) {
                  this_1.allDayEvents.push(extend({}, event_2, null, true));
                } else {
                  if (this_1.parent.eventSettings.enableMaxHeight) {
                    if (this_1.getOverlapIndex(event_2, day, false, resource2) > 0) {
                      continue;
                    }
                  }
                  this_1.renderNormalEvents(event_2, day, resource2, dateCount);
                }
              }
              this_1.cssClass = null;
              this_1.groupOrder = null;
            }
          } else {
            for (var _a = 0, filterEvents_3 = filterEvents; _a < filterEvents_3.length; _a++) {
              var event_3 = filterEvents_3[_a];
              if (this_1.isAllDayAppointment(event_3)) {
                this_1.allDayEvents.push(extend({}, event_3, null, true));
              }
            }
          }
          dateCount += 1;
        }
      };
      var this_1 = this;
      for (var _i = 0, resources_2 = resources; _i < resources_2.length; _i++) {
        var resource = resources_2[_i];
        _loop_1(resource);
      }
    };
    VerticalEvent2.prototype.getStartCount = function() {
      return this.parent.virtualScrollModule && this.parent.activeViewOptions.allowVirtualScrolling && this.parent.timeScale.enable ? parseInt(this.element.querySelector("." + APPOINTMENT_WRAPPER_CLASS).getAttribute("id").split("-").slice(-1)[0], 10) : 0;
    };
    VerticalEvent2.prototype.getDayIndex = function(dayIndex2, resource, dayCount) {
      var _this = this;
      if (!this.parent.activeViewOptions.group.byDate) {
        return dayCount;
      }
      if (this.parent.activeViewOptions.group.byDate && !this.parent.activeViewOptions.group.hideNonWorkingDays) {
        var renderedIndex = this.parent.resourceBase.lastResourceLevel[0].renderDates.indexOf(this.dateRender[parseInt(resource.toString(), 10)][parseInt(dayIndex2.toString(), 10)]);
        return this.resources.length * renderedIndex + resource;
      }
      var dateIndex = 0;
      var firstColumn = this.parent.activeView.colLevels[0];
      var currentDate = this.dateRender[parseInt(resource.toString(), 10)][parseInt(dayIndex2.toString(), 10)].getTime();
      var currentResources = [];
      for (var i = 0; i < firstColumn.length; i++) {
        currentResources = this.parent.resourceBase.resourceDateTree[parseInt(i.toString(), 10)];
        if (currentDate === firstColumn[parseInt(i.toString(), 10)].date.getTime()) {
          break;
        }
        dateIndex = dateIndex + firstColumn[parseInt(i.toString(), 10)].colSpan;
      }
      var resIndex = currentResources.findIndex(function(x) {
        return x.groupOrder.toString() === _this.resources[parseInt(resource.toString(), 10)].groupOrder.toString();
      });
      if (resIndex < 0) {
        return dateIndex;
      }
      return dateIndex + resIndex;
    };
    VerticalEvent2.prototype.setValues = function(event, resourceIndex) {
      if (this.parent.activeViewOptions.group.resources.length > 0) {
        this.cssClass = this.resources[parseInt(resourceIndex.toString(), 10)].cssClass;
        this.groupOrder = this.resources[parseInt(resourceIndex.toString(), 10)].groupOrder;
      } else {
        this.cssClass = this.parent.resourceBase.getCssClass(event);
      }
    };
    VerticalEvent2.prototype.getResourceList = function() {
      var resources = Array.apply(null, {
        length: this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive ? this.resources.length : 1
      }).map(function(value, index) {
        return index;
      });
      return resources;
    };
    VerticalEvent2.prototype.createAppointmentElement = function(record, isAllDay, data, resource) {
      var fieldMapping = this.parent.eventFields;
      var recordSubject = record[fieldMapping.subject] || this.parent.eventSettings.fields.subject.default || this.parent.localeObj.getConstant("addTitle");
      var appointmentWrapper = createElement("div", {
        className: APPOINTMENT_CLASS,
        attrs: {
          "data-id": "Appointment_" + record[fieldMapping.id],
          "data-guid": record.Guid,
          "role": "button",
          "tabindex": "0",
          "aria-disabled": this.parent.eventBase.getReadonlyAttribute(record),
          "aria-label": this.parent.getAnnouncementString(record)
        }
      });
      if (record[this.fields.isReadonly]) {
        addClass([appointmentWrapper], "e-read-only");
      }
      var appointmentDetails = createElement("div", { className: APPOINTMENT_DETAILS });
      appointmentWrapper.appendChild(appointmentDetails);
      if (this.parent.activeViewOptions.group.resources.length > 0) {
        var resourceIndex = this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex : resource;
        appointmentWrapper.setAttribute("data-group-index", resourceIndex.toString());
      }
      var templateElement;
      var eventData = data;
      if (!isNullOrUndefined(this.parent.activeViewOptions.eventTemplate)) {
        var elementId = this.parent.element.id + "_";
        var viewName = this.parent.activeViewOptions.eventTemplateName;
        var templateId = elementId + viewName + "eventTemplate";
        var resIndex = this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex : resource;
        var templateName = "eventTemplate" + (this.isResourceEventTemplate ? "_" + resIndex : "");
        templateElement = this.parent.getAppointmentTemplate()(record, this.parent, templateName, templateId, false);
      } else {
        var appointmentSubject = createElement("div", { className: SUBJECT_CLASS });
        this.parent.sanitize(recordSubject, appointmentSubject);
        if (isAllDay) {
          if (record[fieldMapping.isAllDay]) {
            templateElement = [appointmentSubject];
          } else {
            templateElement = [];
            var appointmentStartTime = createElement("div", {
              className: APPOINTMENT_TIME + (this.parent.isAdaptive ? " " + DISABLE_CLASS : ""),
              innerHTML: this.parent.getTimeString(record[fieldMapping.startTime])
            });
            var appointmentEndTime = createElement("div", {
              className: APPOINTMENT_TIME + (this.parent.isAdaptive ? " " + DISABLE_CLASS : ""),
              innerHTML: this.parent.getTimeString(record[fieldMapping.endTime])
            });
            addClass([appointmentSubject], "e-text-center");
            if (!eventData.isLeft) {
              templateElement.push(appointmentStartTime);
            }
            templateElement.push(appointmentSubject);
            if (!eventData.isRight) {
              templateElement.push(appointmentEndTime);
            }
          }
        } else {
          var timeStr = this.parent.getTimeString(record[fieldMapping.startTime]) + " - " + this.parent.getTimeString(record[fieldMapping.endTime]);
          var appointmentTime = createElement("div", {
            className: APPOINTMENT_TIME + (this.parent.isAdaptive ? " " + DISABLE_CLASS : ""),
            innerHTML: timeStr
          });
          var appointmentLocation = createElement("div", { className: LOCATION_CLASS });
          this.parent.sanitize(record[fieldMapping.location] || this.parent.eventSettings.fields.location.default || "", appointmentLocation);
          templateElement = [appointmentSubject, appointmentTime, appointmentLocation];
        }
      }
      append2(templateElement, appointmentDetails);
      if (!this.parent.isAdaptive && (!isNullOrUndefined(record[fieldMapping.recurrenceRule]) || !isNullOrUndefined(record[fieldMapping.recurrenceID]))) {
        var iconClass = record[fieldMapping.id] === record[fieldMapping.recurrenceID] ? EVENT_RECURRENCE_ICON_CLASS : EVENT_RECURRENCE_EDIT_ICON_CLASS;
        var recurrenceIcon = createElement("div", { className: ICON + " " + iconClass });
        if (isAllDay) {
          appointmentDetails.appendChild(recurrenceIcon);
        } else {
          appointmentWrapper.appendChild(recurrenceIcon);
        }
      }
      this.parent.eventBase.renderSpannedIcon(isAllDay ? appointmentDetails : appointmentWrapper, eventData);
      if (!isNullOrUndefined(this.cssClass)) {
        addClass([appointmentWrapper], this.cssClass);
      }
      this.applyResourceColor(appointmentWrapper, record, "backgroundColor", this.groupOrder);
      this.renderResizeHandler(appointmentWrapper, eventData, record[this.fields.isReadonly]);
      return appointmentWrapper;
    };
    VerticalEvent2.prototype.createMoreIndicator = function(allDayRow, count, currentDay) {
      var index = currentDay + count;
      var countWrapper = allDayRow[parseInt(index.toString(), 10)];
      if (countWrapper.childElementCount <= 0) {
        var innerCountWrap = createElement("div", {
          className: ROW_COUNT_WRAPPER_CLASS,
          id: ROW_COUNT_WRAPPER_CLASS + "-" + index.toString()
        });
        var moreIndicatorElement = createElement("div", {
          className: MORE_INDICATOR_CLASS,
          attrs: { "tabindex": "0", "data-index": index.toString(), "data-count": "1" },
          innerHTML: "+1&nbsp;" + (this.parent.isAdaptive ? "" : this.parent.localeObj.getConstant("more"))
        });
        innerCountWrap.appendChild(moreIndicatorElement);
        countWrapper.appendChild(innerCountWrap);
        EventHandler.add(moreIndicatorElement, "click", this.rowExpandCollapse, this);
      } else {
        var countCell = countWrapper.querySelector("." + MORE_INDICATOR_CLASS);
        var moreCount = parseInt(countCell.getAttribute("data-count"), 10) + 1;
        countCell.setAttribute("data-count", moreCount.toString());
        countCell.innerHTML = "+" + this.parent.globalize.formatNumber(moreCount) + "&nbsp;" + (this.parent.isAdaptive ? "" : this.parent.localeObj.getConstant("more"));
      }
    };
    VerticalEvent2.prototype.isSpannedEvent = function(record, day, resource) {
      var currentDate = resetTime(this.dateRender[parseInt(resource.toString(), 10)][parseInt(day.toString(), 10)]);
      var renderedDate = this.getRenderedDates(this.dateRender[parseInt(resource.toString(), 10)]) || [currentDate];
      var currentDay = renderedDate.filter(function(date) {
        return date.getDay() === day;
      });
      if (currentDay.length === 0) {
        currentDate = resetTime(renderedDate[0]);
      }
      var field = this.parent.eventFields;
      var schedule = getStartEndHours(currentDate, this.startHour, this.endHour);
      var event = extend({}, record, null, true);
      event.isSpanned = { isBottom: false, isTop: false };
      if (record[field.startTime].getTime() < schedule.startHour.getTime()) {
        event[field.startTime] = schedule.startHour;
        event.isSpanned.isTop = true;
      }
      if (record[field.endTime].getTime() > schedule.endHour.getTime()) {
        event[field.endTime] = schedule.endHour;
        event.isSpanned.isBottom = true;
      }
      var eventDates = this.updateEventMinimumDuration(schedule, event[field.startTime], event[field.endTime]);
      event[field.startTime] = eventDates.startDate;
      event[field.endTime] = eventDates.endDate;
      return event;
    };
    VerticalEvent2.prototype.isWorkDayAvailable = function(resource, start) {
      if (this.parent.activeViewOptions.group.hideNonWorkingDays && this.resources.length > 0) {
        var workDays = this.resources[parseInt(resource.toString(), 10)].resourceData[this.resources[parseInt(resource.toString(), 10)].resource.workDaysField] || this.parent.activeViewOptions.workDays;
        return workDays && workDays.indexOf(start.getDay()) >= 0;
      }
      return true;
    };
    VerticalEvent2.prototype.renderAllDayEvents = function(eventObj, dayIndex2, resource, dayCount, inline) {
      var _this = this;
      var currentDates = this.getRenderedDates(this.dateRender[parseInt(resource.toString(), 10)]) || this.dateRender[parseInt(resource.toString(), 10)];
      if (this.parent.activeViewOptions.group.byDate) {
        this.slots[0] = [this.dateRender[parseInt(resource.toString(), 10)][parseInt(dayIndex2.toString(), 10)].getTime()];
        currentDates = [this.dateRender[parseInt(resource.toString(), 10)][parseInt(dayIndex2.toString(), 10)]];
      }
      var record = this.splitEvent(eventObj, currentDates)[0];
      var allDayRowCell = this.element.querySelector("." + ALLDAY_CELLS_CLASS + ":first-child");
      var cellTop = allDayRowCell.offsetTop;
      var eStart = new Date(record[this.parent.eventFields.startTime].getTime());
      var eEnd = new Date(record[this.parent.eventFields.endTime].getTime());
      var appWidth = 0;
      var topValue = 1;
      var isDateRange = currentDates[0].getTime() <= eStart.getTime() && addDays(currentDates.slice(-1)[0], 1).getTime() >= eStart.getTime();
      if (eStart <= eEnd && isDateRange && this.isWorkDayAvailable(resource, eStart)) {
        var isAlreadyRendered = [];
        if (this.renderedAllDayEvents[parseInt(resource.toString(), 10)]) {
          isAlreadyRendered = this.renderedAllDayEvents[parseInt(resource.toString(), 10)].filter(function(event) {
            return event.Guid === eventObj.Guid;
          });
          if (this.parent.activeViewOptions.group.byDate) {
            isAlreadyRendered = isAlreadyRendered.filter(function(event) {
              return event[_this.parent.eventFields.startTime] >= currentDates[parseInt(dayIndex2.toString(), 10)] && event[_this.parent.eventFields.endTime] <= addDays(/* @__PURE__ */ new Date(+currentDates[parseInt(dayIndex2.toString(), 10)]), 1);
            });
          }
        }
        if (isAlreadyRendered.length === 0) {
          var allDayDifference_1 = record.data.count;
          var allDayIndex_1 = this.getOverlapIndex(record, dayIndex2, true, resource);
          record.Index = allDayIndex_1;
          this.allDayLevel = this.allDayLevel < allDayIndex_1 ? allDayIndex_1 : this.allDayLevel;
          var widthAdjustment = record.data.isRight ? 0 : this.parent.currentView === "Day" ? 4 : 7;
          if (allDayDifference_1 >= 0) {
            appWidth = allDayDifference_1 * 100 - widthAdjustment;
          }
          if (isNullOrUndefined(this.renderedAllDayEvents[parseInt(resource.toString(), 10)])) {
            this.renderedAllDayEvents[parseInt(resource.toString(), 10)] = [];
          }
          this.renderedAllDayEvents[parseInt(resource.toString(), 10)].push(extend({}, record, null, true));
          var allDayRow_1 = [].slice.call(this.element.querySelector("." + ALLDAY_ROW_CLASS).children);
          var wIndex_1 = this.getDayIndex(dayIndex2, resource, dayCount);
          var eventWrapper_1 = this.element.querySelector("." + ALLDAY_APPOINTMENT_WRAPPER_CLASS + ":nth-child(" + (wIndex_1 + 1) + ")");
          var appointmentElement_1;
          if (inline) {
            appointmentElement_1 = this.parent.inlineModule.createInlineAppointmentElement(eventObj);
          } else {
            appointmentElement_1 = this.createAppointmentElement(eventObj, true, record.data, resource);
          }
          addClass([appointmentElement_1], ALLDAY_APPOINTMENT_CLASS);
          var eventData = extend({}, record.data, null, true);
          eventObj.data = eventData;
          var args = { data: eventObj, element: appointmentElement_1, cancel: false };
          this.parent.trigger(eventRendered, args, function(eventArgs) {
            if (!eventArgs.cancel) {
              eventWrapper_1.appendChild(appointmentElement_1);
              var appHeight = appointmentElement_1.offsetHeight;
              topValue += (allDayIndex_1 === 0 ? cellTop : cellTop + allDayIndex_1 * appHeight) + 1;
              setStyleAttribute(appointmentElement_1, { "width": appWidth + "%", "top": formatUnit(topValue) });
              if (allDayIndex_1 > 1) {
                _this.moreEvents.push(appointmentElement_1);
                for (var count = 0, length_3 = allDayDifference_1; count < length_3; count++) {
                  _this.createMoreIndicator(allDayRow_1, count, wIndex_1);
                }
              }
              allDayRowCell.setAttribute("data-count", _this.allDayLevel.toString());
              var allDayRowHeight = (!_this.parent.uiStateValues.expand && _this.allDayLevel > 2 ? 3 * appHeight : (_this.allDayLevel + 1) * appHeight) + 4;
              _this.setAllDayRowHeight(allDayRowHeight);
              _this.addOrRemoveClass();
              _this.wireAppointmentEvents(appointmentElement_1, eventObj);
            }
          });
        }
      }
    };
    VerticalEvent2.prototype.renderNormalEvents = function(eventObj, dayIndex2, resource, dayCount, inline) {
      var record = this.isSpannedEvent(eventObj, dayIndex2, resource);
      var eStart = record[this.fields.startTime];
      var eEnd = record[this.fields.endTime];
      var appWidth = "0%";
      var appLeft = "0%";
      var topValue = 0;
      var currentDate = resetTime(new Date(this.dateRender[parseInt(resource.toString(), 10)][parseInt(dayIndex2.toString(), 10)].getTime()));
      var schedule = getStartEndHours(currentDate, this.startHour, this.endHour);
      var isValidEvent = this.isValidEvent(eventObj, eStart, eEnd, schedule);
      if (eStart.getTime() < this.parent.minDate.getTime() || eEnd.getTime() > this.parent.maxDate.getTime()) {
        return;
      }
      if (eStart <= eEnd && isValidEvent && this.isWorkDayAvailable(resource, eStart)) {
        var appHeight = this.getHeight(eStart, eEnd);
        if (eStart.getTime() > schedule.startHour.getTime()) {
          topValue = this.getTopValue(eStart, dayIndex2, resource);
        }
        var appIndex = this.getOverlapIndex(record, dayIndex2, false, resource);
        record.Index = appIndex;
        this.overlapList.push(record);
        if (this.overlapList.length > 1) {
          if (isNullOrUndefined(this.overlapEvents[parseInt(appIndex.toString(), 10)])) {
            this.overlapEvents[parseInt(appIndex.toString(), 10)] = [];
          }
          this.overlapEvents[parseInt(appIndex.toString(), 10)].push(record);
        } else {
          this.overlapEvents = [];
          this.overlapEvents.push([record]);
        }
        appWidth = this.getEventWidth();
        var argsData = {
          index: appIndex,
          left: appLeft,
          width: appWidth,
          day: dayCount,
          dayIndex: dayIndex2,
          record,
          resource
        };
        var tempData = this.adjustOverlapElements(argsData);
        appWidth = tempData.appWidth;
        if (isNullOrUndefined(this.renderedEvents[parseInt(resource.toString(), 10)])) {
          this.renderedEvents[parseInt(resource.toString(), 10)] = [];
        }
        this.renderedEvents[parseInt(resource.toString(), 10)].push(extend({}, record, null, true));
        var appointmentElement = void 0;
        if (inline) {
          appointmentElement = this.parent.inlineModule.createInlineAppointmentElement(eventObj);
        } else {
          appointmentElement = this.createAppointmentElement(eventObj, false, record.isSpanned, resource);
        }
        setStyleAttribute(appointmentElement, {
          "width": this.parent.eventSettings.enableMaxHeight ? "100%" : tempData.appWidth,
          "height": appHeight + "px",
          "top": topValue + "px"
        });
        var iconHeight = appointmentElement.querySelectorAll("." + EVENT_INDICATOR_CLASS).length * 15;
        var maxHeight2 = appHeight - 40 - iconHeight;
        var subjectElement = appointmentElement.querySelector("." + SUBJECT_CLASS);
        if (!this.parent.isAdaptive && subjectElement) {
          subjectElement.style.maxHeight = formatUnit(maxHeight2);
        }
        var index = this.getDayIndex(dayIndex2, resource, dayCount);
        var eventData = {};
        eventData[this.fields.startTime] = eventObj[this.fields.startTime];
        eventData[this.fields.endTime] = eventObj[this.fields.endTime];
        record.data = eventData;
        this.appendEvent(record, appointmentElement, index, tempData.appLeft);
        this.wireAppointmentEvents(appointmentElement, eventObj);
      }
    };
    VerticalEvent2.prototype.getEventWidth = function() {
      var width = this.parent.currentView === "Day" ? 97 : 94;
      var tempWidth = (width - this.overlapEvents.length) / this.overlapEvents.length;
      return (tempWidth < 0 ? 0 : tempWidth) + "%";
    };
    VerticalEvent2.prototype.getEventLeft = function(appWidth, index) {
      var tempLeft = (parseFloat(appWidth) + 1) * index;
      return (tempLeft > 99 ? 99 : tempLeft) + "%";
    };
    VerticalEvent2.prototype.getTopValue = function(date, day, resource) {
      var startEndHours = getStartEndHours(resetTime(this.dateRender[parseInt(resource.toString(), 10)][parseInt(day.toString(), 10)]), this.startHour, this.endHour);
      var startHour = startEndHours.startHour;
      var diffInMinutes = (date.getHours() - startHour.getHours()) * 60 + (date.getMinutes() - startHour.getMinutes());
      return this.parent.activeViewOptions.timeScale.enable ? diffInMinutes * this.cellHeight * this.slotCount / this.interval : 0;
    };
    VerticalEvent2.prototype.getOverlapIndex = function(record, day, isAllDay, resource) {
      var _this = this;
      var fieldMapping = this.parent.eventFields;
      var eventsList = [];
      var appIndex = -1;
      this.overlapEvents = [];
      if (isAllDay) {
        if (!isNullOrUndefined(this.renderedAllDayEvents[parseInt(resource.toString(), 10)])) {
          var date_1 = resetTime(new Date(this.dateRender[parseInt(resource.toString(), 10)][parseInt(day.toString(), 10)].getTime()));
          eventsList = this.renderedAllDayEvents[parseInt(resource.toString(), 10)].filter(function(app) {
            return resetTime(app[fieldMapping.startTime]).getTime() <= date_1.getTime() && resetTime(app[fieldMapping.endTime]).getTime() >= date_1.getTime();
          });
          if (this.parent.activeViewOptions.group.resources.length > 0) {
            eventsList = this.filterEventsByResource(this.resources[parseInt(resource.toString(), 10)], eventsList);
          }
        }
      } else {
        var appointmentList_1 = !isNullOrUndefined(this.renderedEvents[parseInt(resource.toString(), 10)]) ? this.renderedEvents[parseInt(resource.toString(), 10)] : [];
        var appointment_1 = [];
        var recordStart_1 = record[fieldMapping.startTime];
        var recordEnd_1 = record[fieldMapping.endTime];
        this.overlapList = appointmentList_1.filter(function(data) {
          return data[fieldMapping.endTime] > recordStart_1 && data[fieldMapping.startTime] <= recordEnd_1 || data[fieldMapping.startTime] >= recordEnd_1 && data[fieldMapping.endTime] <= recordStart_1 || data[fieldMapping.endTime].getTime() === data[fieldMapping.startTime].getTime() && data[fieldMapping.startTime].getTime() === recordStart_1.getTime() && data[fieldMapping.endTime] < recordEnd_1;
        });
        if (this.parent.activeViewOptions.group.resources.length > 0) {
          this.overlapList = this.filterEventsByResource(this.resources[parseInt(resource.toString(), 10)], this.overlapList);
        }
        this.overlapList.forEach(function(obj) {
          var filterList = appointmentList_1.filter(function(data) {
            return data[fieldMapping.endTime] > obj[fieldMapping.startTime] && data[fieldMapping.startTime] <= obj[fieldMapping.endTime];
          });
          if (_this.parent.activeViewOptions.group.resources.length > 0) {
            filterList = _this.filterEventsByResource(_this.resources[parseInt(resource.toString(), 10)], filterList);
          }
          var collection = filterList.filter(function(val) {
            return _this.overlapList.indexOf(val) === -1;
          });
          if (collection.length > 0) {
            appointment_1 = appointment_1.concat(collection);
          }
        });
        for (var i = 0; i < appointment_1.length - 1; i++) {
          for (var j = i + 1; j < appointment_1.length; j++) {
            if (appointment_1[parseInt(i.toString(), 10)][fieldMapping.id] === appointment_1[parseInt(j.toString(), 10)][fieldMapping.id]) {
              appointment_1.splice(j, 1);
              j--;
            }
          }
        }
        this.overlapList = this.overlapList.concat(appointment_1);
        eventsList = this.overlapList;
        for (var _i = 0, eventsList_1 = eventsList; _i < eventsList_1.length; _i++) {
          var event_4 = eventsList_1[_i];
          var record_1 = event_4;
          var index = record_1.Index;
          if (isNullOrUndefined(this.overlapEvents[parseInt(index.toString(), 10)])) {
            this.overlapEvents[parseInt(index.toString(), 10)] = [event_4];
          } else {
            this.overlapEvents[parseInt(index.toString(), 10)].push(event_4);
          }
        }
      }
      if (!isAllDay) {
        eventsList = eventsList.filter(function(obj) {
          return obj[fieldMapping.startTime] === record[fieldMapping.startTime] && obj[fieldMapping.endTime] > record[fieldMapping.endTime] || obj[fieldMapping.endTime] > record[fieldMapping.startTime] && obj[fieldMapping.startTime] < record[fieldMapping.endTime] || obj[fieldMapping.endTime] === record[fieldMapping.startTime] && obj[fieldMapping.startTime] === record[fieldMapping.endTime] || (obj[fieldMapping.startTime].getTime() === record[fieldMapping.startTime].getTime() && obj[fieldMapping.endTime].getTime() === record[fieldMapping.endTime].getTime() || (obj[fieldMapping.startTime].getTime() === record[fieldMapping.startTime].getTime() && obj[fieldMapping.endTime].getTime() < record[fieldMapping.endTime].getTime() || obj[fieldMapping.endTime].getTime() > record[fieldMapping.endTime].getTime()));
        });
      }
      if (eventsList.length > 0) {
        var appLevel = eventsList.map(function(obj) {
          return obj.Index;
        });
        appIndex = appLevel.length > 0 ? this.getSmallestMissingNumber(appLevel) : 0;
      }
      return appIndex === -1 ? 0 : appIndex;
    };
    VerticalEvent2.prototype.adjustOverlapElements = function(args) {
      var data = { appWidth: args.width, appLeft: args.left };
      for (var i = 0, length1 = this.overlapEvents.length; i < length1; i++) {
        if (!isNullOrUndefined(this.overlapEvents[parseInt(i.toString(), 10)])) {
          for (var j = 0, length2 = this.overlapEvents[parseInt(i.toString(), 10)].length; j < length2; j++) {
            var dayCount = this.getDayIndex(args.dayIndex, args.resource, args.day);
            var element2 = this.element.querySelector("#e-appointment-wrapper-" + dayCount);
            if (element2 && element2.childElementCount > 0) {
              var eleGuid = this.overlapEvents[parseInt(i.toString(), 10)][parseInt(j.toString(), 10)].Guid;
              if (element2.querySelectorAll('div[data-guid="' + eleGuid + '"]').length > 0 && eleGuid !== args.record.Guid) {
                var apps = element2.querySelector('div[data-guid="' + eleGuid + '"]');
                if (parseFloat(args.width) <= parseFloat(apps.style.width)) {
                  if (this.parent.enableRtl) {
                    apps.style.right = this.getEventLeft(args.width, i);
                  } else {
                    apps.style.left = this.getEventLeft(args.width, i);
                  }
                  apps.style.width = parseFloat(args.width) + "%";
                  data.appWidth = apps.style.width;
                } else {
                  data.appWidth = apps.style.width;
                }
              } else {
                var appWidth = args.width;
                if (isNullOrUndefined(this.overlapEvents[i - 1])) {
                  appWidth = this.getEventWidth();
                }
                data.appWidth = appWidth;
                data.appLeft = this.getEventLeft(appWidth, args.index);
              }
            }
          }
        }
      }
      return data;
    };
    VerticalEvent2.prototype.setAllDayRowHeight = function(height) {
      var dateHeader = this.parent.element.querySelector("." + DATE_HEADER_WRAP_CLASS);
      if (this.parent.height === "auto" || !this.parent.enableAllDayScroll) {
        addClass([dateHeader], ALLDAY_APPOINTMENT_AUTO);
      }
      var allDayRow = this.parent.element.querySelector("." + ALLDAY_ROW_CLASS);
      allDayRow.style.height = "";
      if (this.parent.uiStateValues.expand && this.parent.height !== "auto" && this.parent.enableAllDayScroll) {
        allDayRow.style.height = height / 12 + "em";
        this.parent.eventBase.allDayExpandScroll(dateHeader);
      } else {
        dateHeader.scrollTop = 0;
        for (var _i = 0, _a = this.allDayElement; _i < _a.length; _i++) {
          var element2 = _a[_i];
          element2.style.height = height / 12 + "em";
        }
        removeClass([dateHeader], ALLDAY_APPOINTMENT_SCROLL);
      }
      this.animation.animate(this.allDayElement[0]);
    };
    VerticalEvent2.prototype.addOrRemoveClass = function() {
      var _this = this;
      this.moreEvents.filter(function(element2) {
        if (!_this.parent.uiStateValues.expand && _this.allDayLevel > 2) {
          addClass([element2], EVENT_COUNT_CLASS);
          element2.setAttribute("tabindex", "-1");
        } else {
          removeClass([element2], EVENT_COUNT_CLASS);
          element2.setAttribute("tabindex", "0");
        }
      });
      var moreEventCount = this.element.querySelector("." + ALLDAY_APPOINTMENT_SECTION_CLASS);
      if (this.parent.uiStateValues.expand) {
        removeClass([moreEventCount], APPOINTMENT_ROW_EXPAND_CLASS);
        addClass([moreEventCount], APPOINTMENT_ROW_COLLAPSE_CLASS);
      } else {
        removeClass([moreEventCount], APPOINTMENT_ROW_COLLAPSE_CLASS);
        addClass([moreEventCount], APPOINTMENT_ROW_EXPAND_CLASS);
      }
      if (this.allDayLevel > 2) {
        removeClass([moreEventCount], DISABLE_CLASS);
      } else {
        addClass([moreEventCount], DISABLE_CLASS);
      }
      var countCell = [].slice.call(this.element.querySelectorAll("." + ROW_COUNT_WRAPPER_CLASS));
      countCell.forEach(function(element2) {
        if (!_this.parent.uiStateValues.expand && _this.allDayLevel > 2) {
          removeClass([element2], DISABLE_CLASS);
        } else {
          addClass([element2], DISABLE_CLASS);
        }
      });
    };
    VerticalEvent2.prototype.getEventHeight = function() {
      var eventElement = createElement("div", { className: APPOINTMENT_CLASS, styles: "visibility:hidden" });
      var eventWrapper = this.element.querySelector("." + ALLDAY_APPOINTMENT_WRAPPER_CLASS + ":first-child");
      eventWrapper.appendChild(eventElement);
      var height = eventElement.offsetHeight;
      remove(eventElement);
      return height;
    };
    VerticalEvent2.prototype.rowExpandCollapse = function() {
      var target = this.element.querySelector("." + ALLDAY_APPOINTMENT_SECTION_CLASS);
      this.parent.uiStateValues.expand = target.classList.contains(APPOINTMENT_ROW_EXPAND_CLASS);
      var rowHeight;
      if (this.parent.uiStateValues.expand) {
        target.setAttribute("title", this.parent.localeObj.getConstant("collapseAllDaySection"));
        target.setAttribute("aria-label", "Collapse section");
        rowHeight = (this.allDayLevel + 1) * this.getEventHeight() + 4;
      } else {
        target.setAttribute("title", this.parent.localeObj.getConstant("expandAllDaySection"));
        target.setAttribute("aria-label", "Expand section");
        rowHeight = 3 * this.getEventHeight() + 4;
      }
      this.setAllDayRowHeight(rowHeight);
      this.addOrRemoveClass();
      this.animation.animate(target);
    };
    VerticalEvent2.prototype.animationUiUpdate = function() {
      this.parent.notify(contentReady, {});
    };
    VerticalEvent2.prototype.destroy = function() {
      if (!this.parent || this.parent && this.parent.isDestroyed) {
        return;
      }
      this.removeEventListener();
      this.allDayElement = null;
      this.renderedAllDayEvents = null;
      this.renderedEvents = null;
      this.slotCount = null;
      this.interval = null;
      this.startHour = null;
      this.endHour = null;
      this.element = null;
      this.fields = null;
      this.animation = null;
      _super.prototype.destroy.call(this);
    };
    return VerticalEvent2;
  }(EventBase)
);
var __extends$j = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var EVENT_GAP$2 = 0;
var MonthEvent = (
  /** @class */
  function(_super) {
    __extends$j(MonthEvent2, _super);
    function MonthEvent2(parent) {
      var _this = _super.call(this, parent) || this;
      _this.renderedEvents = [];
      _this.monthHeaderHeight = 0;
      _this.moreIndicatorHeight = 19;
      _this.renderType = "day";
      _this.element = _this.parent.activeView.getPanel();
      _this.fields = _this.parent.eventFields;
      _this.maxHeight = _this.parent.eventSettings.enableMaxHeight && !_this.parent.eventSettings.enableIndicator && !_this.parent.rowAutoHeight;
      _this.withIndicator = _this.parent.eventSettings.enableMaxHeight && _this.parent.eventSettings.enableIndicator && !_this.parent.rowAutoHeight;
      _this.maxOrIndicator = _this.maxHeight || _this.withIndicator;
      _this.moreIndicatorHeight = _this.parent.rowAutoHeight && _this.parent.eventSettings.ignoreWhitespace ? 0 : _this.moreIndicatorHeight;
      _this.addEventListener();
      return _this;
    }
    MonthEvent2.prototype.removeEventWrapper = function(appElement) {
      if (appElement.length > 0) {
        appElement = this.parent.currentView === "Month" || !this.parent.activeView.isTimelineView() && !this.parent.activeViewOptions.timeScale.enable ? appElement : [appElement[0]];
        for (var _i = 0, appElement_1 = appElement; _i < appElement_1.length; _i++) {
          var wrap = appElement_1[_i];
          if (wrap.parentElement && wrap.parentElement.parentNode) {
            remove(wrap.parentElement);
          }
        }
      }
    };
    MonthEvent2.prototype.renderAppointments = function() {
      if (this.parent.dragAndDropModule) {
        this.parent.dragAndDropModule.setDragArea();
      }
      this.isResourceEventTemplate = this.parent.isSpecificResourceEvents();
      var conWrap = this.parent.element.querySelector("." + CONTENT_WRAP_CLASS);
      if (this.parent.rowAutoHeight) {
        this.parent.uiStateValues.top = conWrap.scrollTop;
        this.parent.uiStateValues.left = conWrap.scrollLeft;
      }
      var appointmentWrapper = [].slice.call(this.element.querySelectorAll("." + APPOINTMENT_WRAPPER_CLASS));
      if (this.parent.crudModule && this.parent.crudModule.crudObj.isCrudAction) {
        for (var i = 0, len = this.parent.crudModule.crudObj.sourceEvent.length; i < len; i++) {
          var appElement = [].slice.call(this.element.querySelectorAll('.e-appointment-wrapper [data-group-index="' + this.parent.crudModule.crudObj.sourceEvent[parseInt(i.toString(), 10)].groupIndex + '"]'));
          this.removeEventWrapper(appElement);
          if (this.parent.crudModule.crudObj.targetEvent[parseInt(i.toString(), 10)] && this.parent.crudModule.crudObj.sourceEvent[parseInt(i.toString(), 10)].groupIndex !== this.parent.crudModule.crudObj.targetEvent[parseInt(i.toString(), 10)].groupIndex) {
            var ele = [].slice.call(this.element.querySelectorAll('.e-appointment-wrapper [data-group-index="' + this.parent.crudModule.crudObj.targetEvent[parseInt(i.toString(), 10)].groupIndex + '"]'));
            this.removeEventWrapper(ele);
          }
        }
      } else {
        for (var _i = 0, appointmentWrapper_1 = appointmentWrapper; _i < appointmentWrapper_1.length; _i++) {
          var wrap = appointmentWrapper_1[_i];
          remove(wrap);
        }
      }
      this.removeHeightProperty(CONTENT_TABLE_CLASS);
      if (!this.element.querySelector("." + WORK_CELLS_CLASS)) {
        return;
      }
      if (this.parent.currentView === "Month") {
        var wrapper = createElement("div", { className: APPOINTMENT_WRAPPER_CLASS });
        var cellTd = this.parent.element.querySelector("." + WORK_CELLS_CLASS);
        cellTd.appendChild(wrapper);
        this.monthHeaderHeight = wrapper.offsetTop - cellTd.offsetTop;
        cellTd.removeChild(wrapper);
      }
      this.eventHeight = getElementHeightFromClass(this.element, APPOINTMENT_CLASS);
      var scrollTop = conWrap.scrollTop;
      if (this.parent.rowAutoHeight && this.parent.virtualScrollModule && !this.parent.virtualScrollModule.isHorizontalScroll && !isNullOrUndefined(this.parent.currentAction)) {
        conWrap.scrollTop = conWrap.scrollTop - 1;
      }
      if (this.parent.activeViewOptions.group.resources.length > 0) {
        this.renderResourceEvents();
        if (this.parent.virtualScrollModule) {
          this.parent.virtualScrollModule.updateFocusedWorkCell();
        }
      } else {
        this.renderEventsHandler(this.parent.activeView.renderDates, this.parent.activeViewOptions.workDays);
      }
      if (this.parent.rowAutoHeight) {
        this.updateBlockElements();
        var data = {
          cssProperties: this.parent.getCssProperties(),
          module: this.parent.getModuleName(),
          isPreventScrollUpdate: true,
          scrollPosition: { left: this.parent.uiStateValues.left, top: this.parent.uiStateValues.top }
        };
        if (this.parent.virtualScrollModule && !this.parent.virtualScrollModule.isHorizontalScroll) {
          if (this.parent.currentAction) {
            conWrap.scrollTop = scrollTop;
            this.parent.currentAction = null;
          } else {
            this.parent.virtualScrollModule.updateVirtualScrollHeight();
          }
        }
        if (!this.parent.enablePersistence) {
          this.parent.notify(contentReady, {});
        }
        this.parent.notify(scrollUiUpdate, data);
        if (this.parent.currentView === "Month" && this.parent.showWeekNumber) {
          var totalCells_1 = [].slice.call(this.parent.element.querySelectorAll(".e-content-wrap table tr td:first-child"));
          var weekNumberCells = [].slice.call(this.parent.element.querySelectorAll("." + WEEK_NUMBER_CLASS));
          weekNumberCells.forEach(function(cell, i2) {
            var height = totalCells_1[parseInt(i2.toString(), 10)].offsetHeight;
            setStyleAttribute(cell, { "height": height + "px" });
          });
          this.parent.element.querySelector("." + WEEK_NUMBER_WRAPPER_CLASS).scrollTop = this.parent.element.querySelector("." + CONTENT_WRAP_CLASS).scrollTop;
        }
      }
      this.parent.renderTemplates();
    };
    MonthEvent2.prototype.renderEventsHandler = function(dateRender, workDays, resData) {
      this.renderedEvents = [];
      var eventsList;
      var blockList;
      var resIndex = 0;
      if (resData) {
        resIndex = resData.groupIndex;
        this.cssClass = resData.cssClass;
        this.groupOrder = resData.groupOrder;
        eventsList = this.parent.eventBase.filterEventsByResource(resData, this.parent.eventsProcessed);
        blockList = this.parent.eventBase.filterEventsByResource(resData, this.parent.blockProcessed);
        this.workCells = [].slice.call(this.element.querySelectorAll("." + WORK_CELLS_CLASS + '[data-group-index="' + resIndex + '"]'));
      } else {
        eventsList = this.parent.eventsProcessed;
        blockList = this.parent.blockProcessed;
        this.workCells = [].slice.call(this.element.querySelectorAll("." + WORK_CELLS_CLASS));
      }
      this.sortByDateTime(eventsList);
      this.sortByDateTime(blockList);
      if (this.parent.currentView === "Month" && this.parent.rowAutoHeight && this.parent.activeViewOptions.group.resources.length === 0) {
        var totalCells = [].slice.call(this.parent.element.querySelectorAll(".e-content-wrap table tr td:first-child"));
        var height_1 = this.parent.element.querySelector("." + CONTENT_TABLE_CLASS).clientHeight / totalCells.length;
        totalCells.forEach(function(cell) {
          setStyleAttribute(cell, { "height": height_1 + "px" });
        });
      }
      var cellDetail = this.workCells[this.parent.activeView.isTimelineView() ? 0 : this.workCells.length - 1].getBoundingClientRect();
      this.cellWidth = cellDetail.width;
      this.cellHeight = cellDetail.height;
      this.dateRender = dateRender;
      var filteredDates = this.getRenderedDates(dateRender);
      this.getSlotDates(workDays || this.parent.activeViewOptions.workDays);
      this.processBlockEvents(blockList, resIndex, resData);
      var events = [];
      for (var _i = 0, eventsList_1 = eventsList; _i < eventsList_1.length; _i++) {
        var event_1 = eventsList_1[_i];
        if (this.parent.resourceBase && !resData) {
          this.cssClass = this.parent.resourceBase.getCssClass(event_1);
        }
        events = events.concat(this.splitEvent(event_1, filteredDates || this.dateRender));
      }
      for (var level = 0; level < this.slots.length; level++) {
        this.renderedEvents = [];
        var slot = this.slots[parseInt(level.toString(), 10)];
        var endDate = addDays(new Date(slot[slot.length - 1]), 1);
        var spannedEvents = this.filterEvents(new Date(slot[0]), endDate, events);
        for (var _a = 0, spannedEvents_1 = spannedEvents; _a < spannedEvents_1.length; _a++) {
          var event_2 = spannedEvents_1[_a];
          if (this.maxHeight) {
            var sDate = this.parent.currentView === "Month" ? event_2[this.fields.startTime] : this.getStartTime(event_2, event_2.data);
            if (this.getIndex(sDate) > 0) {
              continue;
            }
          }
          this.updateIndicatorIcon(event_2);
          this.renderEvents(event_2, resIndex, eventsList);
        }
      }
      this.cssClass = null;
      this.groupOrder = null;
    };
    MonthEvent2.prototype.processBlockEvents = function(blockEvents, resIndex, resData) {
      for (var _i = 0, blockEvents_1 = blockEvents; _i < blockEvents_1.length; _i++) {
        var event_3 = blockEvents_1[_i];
        if (this.parent.resourceBase && !resData) {
          this.cssClass = this.parent.resourceBase.getCssClass(event_3);
        }
        var blockSpannedList = [];
        if (this.renderType === "day" && !event_3[this.fields.isAllDay]) {
          var temp = extend({}, event_3, null, true);
          var isSameDate = this.isSameDate(temp[this.fields.startTime], temp[this.fields.endTime]);
          temp.isBlockIcon = isSameDate;
          if (!isSameDate && getDateInMs(temp[this.fields.startTime]) > 0) {
            var e = extend({}, event_3, null, true);
            e[this.fields.endTime] = addDays(resetTime(/* @__PURE__ */ new Date(event_3[this.fields.startTime] + "")), 1);
            e.isBlockIcon = true;
            temp[this.fields.startTime] = e[this.fields.endTime];
            blockSpannedList.push(e);
          }
          isSameDate = this.isSameDate(temp[this.fields.startTime], temp[this.fields.endTime]);
          if (!isSameDate && getDateInMs(temp[this.fields.endTime]) > 0) {
            var e = extend({}, event_3, null, true);
            e[this.fields.startTime] = resetTime(/* @__PURE__ */ new Date(event_3[this.fields.endTime] + ""));
            e.isBlockIcon = true;
            blockSpannedList.push(e);
            temp[this.fields.endTime] = e[this.fields.startTime];
          }
          blockSpannedList.push(temp);
        } else {
          blockSpannedList.push(event_3);
        }
        for (var _a = 0, blockSpannedList_1 = blockSpannedList; _a < blockSpannedList_1.length; _a++) {
          var blockEvent = blockSpannedList_1[_a];
          var spannedEvents = this.splitEvent(blockEvent, this.dateRender);
          for (var _b = 0, spannedEvents_2 = spannedEvents; _b < spannedEvents_2.length; _b++) {
            var event_4 = spannedEvents_2[_b];
            this.renderBlockEvents(event_4, resIndex, !!blockEvent.isBlockIcon);
          }
        }
      }
    };
    MonthEvent2.prototype.isSameDate = function(start, end) {
      return (/* @__PURE__ */ new Date(+start)).setHours(0, 0, 0, 0) === (/* @__PURE__ */ new Date(+end)).setHours(0, 0, 0, 0);
    };
    MonthEvent2.prototype.renderBlockEvents = function(event, resIndex, isIcon) {
      var eventData = event.data;
      var startTime = this.getStartTime(event, eventData);
      var endTime = this.getEndTime(event, eventData);
      var day = this.parent.getIndexOfDate(this.dateRender, resetTime(new Date(startTime.getTime())));
      if (day < 0 || startTime > endTime) {
        return;
      }
      var cellTd = this.getCellTd(day);
      var position = this.getPosition(startTime, endTime, event[this.fields.isAllDay], day);
      if (!isIcon) {
        var diffInDays = eventData.count;
        var appWidth = this.getEventWidth(startTime, endTime, event[this.fields.isAllDay], diffInDays);
        appWidth = appWidth <= 0 ? this.cellWidth : appWidth;
        var appLeft = this.parent.enableRtl ? 0 : position;
        var appRight = this.parent.enableRtl ? position : 0;
        var appHeight = this.cellHeight - this.monthHeaderHeight;
        var appTop = this.getRowTop(resIndex);
        var blockElement = this.createBlockAppointmentElement(event, resIndex, this.isResourceEventTemplate);
        setStyleAttribute(blockElement, {
          "width": appWidth + "px",
          "height": appHeight + "px",
          "left": appLeft + "px",
          "right": appRight + "px",
          "top": appTop + "px"
        });
        this.renderEventElement(event, blockElement, cellTd);
      } else {
        this.renderBlockIndicator(cellTd, position, resIndex);
      }
    };
    MonthEvent2.prototype.renderBlockIndicator = function(cellTd, position, resIndex) {
      var blockIndicator = createElement("div", { className: "e-icons " + BLOCK_INDICATOR_CLASS });
      if (isNullOrUndefined(cellTd.querySelector("." + BLOCK_INDICATOR_CLASS))) {
        cellTd.appendChild(blockIndicator);
      }
    };
    MonthEvent2.prototype.getStartTime = function(event, eventData) {
      return event[this.fields.startTime];
    };
    MonthEvent2.prototype.getEndTime = function(event, eventData) {
      return event[this.fields.endTime];
    };
    MonthEvent2.prototype.getCellTd = function(day) {
      return this.workCells[parseInt(day.toString(), 10)];
    };
    MonthEvent2.prototype.getEventWidth = function(startDate, endDate, isAllDay, count) {
      return count * this.cellWidth - 1;
    };
    MonthEvent2.prototype.getPosition = function(startTime, endTime, isAllDay, day) {
      return 0;
    };
    MonthEvent2.prototype.getRowTop = function(resIndex) {
      return 0;
    };
    MonthEvent2.prototype.updateIndicatorIcon = function(event) {
      if (this.parent.currentView.indexOf("Timeline") === -1 || this.parent.currentView === "TimelineMonth" || event[this.fields.isAllDay]) {
        return;
      }
      var cloneData = event.data;
      var start = this.parent.activeView.getStartHour();
      var end = this.parent.activeView.getEndHour();
      var startHour = getStartEndHours(event[this.fields.startTime], start, end);
      var endHour = getStartEndHours(event[this.fields.endTime], start, end);
      var actualStartTime = cloneData[this.fields.startTime];
      var actualEndTime = cloneData[this.fields.endTime];
      cloneData.isLeft = cloneData.isLeft || actualStartTime.getTime() < startHour.startHour.getTime();
      cloneData.isRight = cloneData.isRight || actualEndTime.getTime() > endHour.endHour.getTime();
      if (resetTime(actualStartTime).getTime() !== resetTime(actualEndTime).getTime()) {
        var actualStartHour = startHour.startHour;
        var actualEndHour = endHour.endHour;
        var startTime = new Date(resetTime(actualStartTime));
        startTime.setHours(actualEndHour.getHours(), actualEndHour.getMinutes(), actualEndHour.getSeconds());
        cloneData.isLeft = cloneData.isLeft || actualStartTime.getTime() >= (actualStartHour.getDate() === startHour.endHour.getDate() ? startTime.getTime() : addDays(startTime, 1).getTime());
        if (actualEndTime.getTime() !== resetTime(actualEndTime).getTime()) {
          var endTime = new Date(resetTime(actualEndTime));
          cloneData.isRight = cloneData.isRight || actualEndTime.getTime() <= endTime.setHours(actualStartHour.getHours(), actualStartHour.getMinutes(), actualStartHour.getSeconds());
        }
      }
    };
    MonthEvent2.prototype.renderResourceEvents = function() {
      var resources = this.parent.uiStateValues.isGroupAdaptive ? [this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]] : this.parent.resourceBase.renderedResources;
      if (this.parent.crudModule && this.parent.crudModule.crudObj.isCrudAction) {
        for (var i = 0, len = this.parent.crudModule.crudObj.sourceEvent.length; i < len; i++) {
          var sourceRes = this.parent.crudModule.crudObj.sourceEvent[parseInt(i.toString(), 10)];
          this.renderEventsHandler(sourceRes.renderDates, sourceRes.workDays, sourceRes);
          if (this.parent.crudModule.crudObj.sourceEvent[parseInt(i.toString(), 10)].groupIndex !== this.parent.crudModule.crudObj.targetEvent[parseInt(i.toString(), 10)].groupIndex) {
            var target = this.parent.crudModule.crudObj.targetEvent[parseInt(i.toString(), 10)];
            this.renderEventsHandler(target.renderDates, target.workDays, target);
          }
        }
        this.parent.crudModule.crudObj.isCrudAction = false;
      } else {
        for (var _i = 0, resources_1 = resources; _i < resources_1.length; _i++) {
          var slotData = resources_1[_i];
          this.renderEventsHandler(slotData.renderDates, slotData.workDays, slotData);
        }
      }
    };
    MonthEvent2.prototype.getSlotDates = function(workDays) {
      this.slots = [];
      var dates = this.dateRender.map(function(date) {
        return +date;
      });
      var noOfDays = !this.parent.activeViewOptions.showWeekend || this.parent.activeViewOptions.group.byDate && this.parent.activeViewOptions.group.hideNonWorkingDays ? workDays.length : WEEK_LENGTH;
      while (dates.length > 0) {
        this.slots.push(dates.splice(0, noOfDays));
      }
    };
    MonthEvent2.prototype.createAppointmentElement = function(record, resIndex, isCloneElement) {
      if (isCloneElement === void 0) {
        isCloneElement = false;
      }
      var eventSubject = record[this.fields.subject] || this.parent.eventSettings.fields.subject.default || this.parent.localeObj.getConstant("addTitle");
      var newRecord = extend({}, record, record.data, true);
      var attrs = {
        "data-id": "Appointment_" + record[this.fields.id],
        "role": "button",
        "tabindex": "0",
        "aria-disabled": this.parent.eventBase.getReadonlyAttribute(record),
        "aria-label": this.parent.getAnnouncementString(newRecord, eventSubject)
      };
      if (!isCloneElement) {
        attrs["data-guid"] = record.Guid;
      }
      if (this.parent.activeViewOptions.group.resources.length > 0) {
        attrs["data-group-index"] = resIndex.toString();
      }
      var appointmentWrapper = createElement("div", { className: APPOINTMENT_CLASS, attrs });
      if (!isNullOrUndefined(this.cssClass)) {
        addClass([appointmentWrapper], this.cssClass);
      }
      if (record[this.fields.isReadonly]) {
        addClass([appointmentWrapper], "e-read-only");
      }
      var appointmentDetails = createElement("div", { className: APPOINTMENT_DETAILS });
      appointmentWrapper.appendChild(appointmentDetails);
      var templateElement;
      var eventData = record.data;
      var eventObj = this.getEventData(record);
      if (!isNullOrUndefined(this.parent.activeViewOptions.eventTemplate)) {
        var scheduleId = this.parent.element.id + "_";
        var viewName = this.parent.activeViewOptions.eventTemplateName;
        var templateId = scheduleId + viewName + "eventTemplate";
        var eventTemplate = "eventTemplate" + (this.isResourceEventTemplate ? "_" + resIndex : "");
        templateElement = this.parent.getAppointmentTemplate()(eventObj, this.parent, eventTemplate, templateId, false);
      } else {
        var eventLocation = record[this.fields.location] || this.parent.eventSettings.fields.location.default || "";
        var appointmentSubject = createElement("div", { className: SUBJECT_CLASS });
        this.parent.sanitize(eventSubject + (eventLocation ? "; " + eventLocation : ""), appointmentSubject);
        var appointmentStartTime = createElement("div", {
          className: APPOINTMENT_TIME + (this.parent.isAdaptive ? " " + DISABLE_CLASS : ""),
          innerHTML: this.parent.getTimeString(eventData[this.fields.startTime])
        });
        var appointmentEndTime = createElement("div", {
          className: APPOINTMENT_TIME + (this.parent.isAdaptive ? " " + DISABLE_CLASS : ""),
          innerHTML: this.parent.getTimeString(eventData[this.fields.endTime])
        });
        if (this.parent.currentView === "Month") {
          if (record[this.fields.isAllDay]) {
            templateElement = [appointmentSubject];
            addClass([appointmentSubject], "e-text-center");
          } else if (eventData.count <= 1 && !eventData.isLeft && !eventData.isRight) {
            templateElement = [appointmentStartTime, appointmentSubject];
          } else {
            templateElement = [];
            addClass([appointmentSubject], "e-text-center");
            if (!eventData.isLeft) {
              templateElement.push(appointmentStartTime);
            }
            templateElement.push(appointmentSubject);
            if (!eventData.isRight) {
              templateElement.push(appointmentEndTime);
            }
          }
        } else {
          var innerElement = void 0;
          if (record[this.fields.isAllDay]) {
            var allDayString = createElement("div", {
              className: APPOINTMENT_TIME,
              innerHTML: this.parent.localeObj.getConstant("allDay")
            });
            innerElement = [appointmentSubject, allDayString];
          } else {
            var timeString = this.parent.getTimeString(eventData[this.fields.startTime]) + " - " + this.parent.getTimeString(eventData[this.fields.endTime]);
            var appTime = createElement("div", {
              className: APPOINTMENT_TIME + (this.parent.isAdaptive ? " " + DISABLE_CLASS : ""),
              innerHTML: timeString
            });
            var appLocation = createElement("div", { className: LOCATION_CLASS });
            this.parent.sanitize(eventLocation, appLocation);
            innerElement = [appointmentSubject, appTime, appLocation];
          }
          var wrap = createElement("div", { className: "e-inner-wrap" });
          append2(innerElement, wrap);
          templateElement = [wrap];
        }
      }
      append2(templateElement, appointmentDetails);
      this.appendEventIcons(record, appointmentDetails);
      this.renderResizeHandler(appointmentWrapper, record.data, record[this.fields.isReadonly]);
      return appointmentWrapper;
    };
    MonthEvent2.prototype.appendEventIcons = function(record, appointmentDetails) {
      var eventData = record.data;
      if (!isNullOrUndefined(record[this.fields.recurrenceRule]) || !isNullOrUndefined(record[this.fields.recurrenceID])) {
        var iconClass = record[this.fields.id] === record[this.fields.recurrenceID] ? EVENT_RECURRENCE_ICON_CLASS : EVENT_RECURRENCE_EDIT_ICON_CLASS;
        appointmentDetails.appendChild(createElement("div", {
          className: ICON + " " + iconClass + (this.parent.isAdaptive ? " " + DISABLE_CLASS : "")
        }));
      }
      if (eventData.isLeft) {
        var iconLeft = createElement("div", {
          className: EVENT_INDICATOR_CLASS + " " + ICON + " " + EVENT_ICON_LEFT_CLASS
        });
        prepend([iconLeft], appointmentDetails);
      }
      if (eventData.isRight) {
        var iconRight = createElement("div", {
          className: EVENT_INDICATOR_CLASS + " " + ICON + " " + EVENT_ICON_RIGHT_CLASS
        });
        append2([iconRight], appointmentDetails);
      }
    };
    MonthEvent2.prototype.renderEvents = function(event, resIndex, eventsList) {
      var startTime = event[this.fields.startTime];
      var endTime = event[this.fields.endTime];
      var day = this.parent.getIndexOfDate(this.dateRender, resetTime(startTime));
      if (day < 0 || startTime.getTime() < this.parent.minDate.getTime() || endTime.getTime() > this.parent.maxDate.getTime()) {
        return;
      }
      var overlapCount = this.getIndex(startTime);
      event.Index = overlapCount;
      var diffInDays = event.data.count;
      if (startTime.getTime() <= endTime.getTime()) {
        var appWidth = diffInDays * this.cellWidth - 5;
        var cellTd = this.workCells[parseInt(day.toString(), 10)];
        var appTop = overlapCount * (this.eventHeight + EVENT_GAP$2);
        var height = this.monthHeaderHeight + (overlapCount + 1) * (this.eventHeight + EVENT_GAP$2) + this.moreIndicatorHeight;
        var enableAppRender = this.maxOrIndicator ? overlapCount < 1 ? true : false : this.cellHeight > height;
        if (this.parent.rowAutoHeight || enableAppRender) {
          this.renderedEvents.push(extend({}, event, null, true));
          var appointmentElement = void 0;
          if (this.inlineValue) {
            appointmentElement = this.parent.inlineModule.createInlineAppointmentElement();
          } else {
            appointmentElement = this.createAppointmentElement(event, resIndex);
          }
          this.applyResourceColor(appointmentElement, event, "backgroundColor", this.groupOrder);
          this.wireAppointmentEvents(appointmentElement, event);
          setStyleAttribute(appointmentElement, { "width": appWidth + "px", "top": appTop + "px" });
          this.renderEventElement(event, appointmentElement, cellTd);
          if (this.parent.rowAutoHeight) {
            var firstChild = cellTd.parentElement.firstElementChild;
            this.updateCellHeight(firstChild, height);
          }
        } else {
          for (var i = 0; i < diffInDays; i++) {
            if (this.workCells[day + i]) {
              var indicator = this.workCells[day + i].querySelector("." + MORE_INDICATOR_CLASS);
              if (indicator) {
                var count = parseInt(indicator.getAttribute("data-count"), 10) + 1;
                indicator.setAttribute("data-count", count.toString());
                indicator.innerHTML = this.getMoreIndicatorText(count);
              } else {
                var startDate = new Date(this.dateRender[day + i].getTime());
                var endDate = addDays(this.dateRender[day + i], 1);
                var groupIndex = this.workCells[day + i].getAttribute("data-group-index");
                var moreIndicatorElement = this.getMoreIndicatorElement(1, startDate, endDate);
                if (!isNullOrUndefined(groupIndex)) {
                  moreIndicatorElement.setAttribute("data-group-index", groupIndex);
                }
                moreIndicatorElement.style.top = this.cellHeight - this.monthHeaderHeight - this.moreIndicatorHeight + "px";
                moreIndicatorElement.style.width = this.cellWidth - 2 + "px";
                this.renderElement(this.workCells[day + i], moreIndicatorElement);
                EventHandler.add(moreIndicatorElement, "click", this.moreIndicatorClick, this);
              }
            }
          }
        }
      }
    };
    MonthEvent2.prototype.updateCellHeight = function(cell, height) {
      if (height > cell.offsetHeight) {
        setStyleAttribute(cell, { "height": height + "px" });
      }
    };
    MonthEvent2.prototype.updateBlockElements = function() {
      var blockElement = [].slice.call(this.element.querySelectorAll("." + BLOCK_APPOINTMENT_CLASS));
      for (var _i = 0, blockElement_1 = blockElement; _i < blockElement_1.length; _i++) {
        var element2 = blockElement_1[_i];
        var target = closest(element2, "tr");
        this.monthHeaderHeight = element2.offsetParent.offsetTop - target.offsetTop;
        element2.style.height = target.offsetHeight - 1 - this.monthHeaderHeight + "px";
        var firstChild = target.firstElementChild;
        var width = Math.round(element2.offsetWidth / firstChild.offsetWidth);
        element2.style.width = firstChild.offsetWidth * width + "px";
      }
    };
    MonthEvent2.prototype.getFilteredEvents = function(startDate, endDate, groupIndex, eventsList) {
      var filteredEvents;
      if (isNullOrUndefined(groupIndex)) {
        filteredEvents = this.filterEvents(startDate, endDate);
      } else {
        var data = this.parent.resourceBase.lastResourceLevel[parseInt(groupIndex, 10)];
        filteredEvents = this.filterEvents(startDate, endDate, isNullOrUndefined(eventsList) ? void 0 : eventsList, data);
      }
      return filteredEvents;
    };
    MonthEvent2.prototype.getOverlapEvents = function(date, appointments) {
      var appointmentsList = [];
      var dateTime = resetTime(date).getTime();
      for (var _i = 0, appointments_1 = appointments; _i < appointments_1.length; _i++) {
        var app = appointments_1[_i];
        if (resetTime(app[this.fields.startTime]).getTime() <= dateTime && resetTime(app[this.fields.endTime]).getTime() >= dateTime) {
          appointmentsList.push(app);
        }
      }
      return appointmentsList;
    };
    MonthEvent2.prototype.getIndex = function(date) {
      var appIndex = -1;
      var appointments = this.renderedEvents;
      if (appointments.length > 0) {
        var appointmentsList = this.getOverlapEvents(date, appointments);
        var appLevel = appointmentsList.map(function(obj) {
          return obj.Index;
        });
        appIndex = appLevel.length > 0 ? this.getSmallestMissingNumber(appLevel) : 0;
      }
      return appIndex === -1 ? 0 : appIndex;
    };
    MonthEvent2.prototype.moreIndicatorClick = function(event) {
      var _this = this;
      var target = closest(event.target, "." + MORE_INDICATOR_CLASS);
      var startDate = new Date(parseInt(target.getAttribute("data-start-date"), 10));
      var endDate = new Date(parseInt(target.getAttribute("data-end-date"), 10));
      var groupIndex = target.getAttribute("data-group-index");
      var moreArgs = {
        cancel: false,
        event,
        element: target,
        isPopupOpen: true,
        startTime: startDate,
        endTime: endDate,
        viewName: this.parent.getNavigateView()
      };
      if (groupIndex) {
        moreArgs.groupIndex = parseInt(groupIndex, 10);
      }
      this.parent.trigger(moreEventsClick, moreArgs, function(clickArgs) {
        if (!clickArgs.cancel) {
          if (clickArgs.isPopupOpen) {
            var filteredEvents = _this.getFilteredEvents(startDate, endDate, groupIndex);
            var moreArgs_1 = { date: startDate, event: filteredEvents, element: event.target };
            _this.parent.quickPopup.moreEventClick(moreArgs_1, endDate, groupIndex);
          } else {
            _this.parent.setProperties({ selectedDate: startDate }, true);
            _this.parent.changeView(clickArgs.viewName, event);
          }
        }
      });
    };
    MonthEvent2.prototype.renderEventElement = function(event, appointmentElement, cellTd) {
      var _this = this;
      var eventType = appointmentElement.classList.contains(BLOCK_APPOINTMENT_CLASS) ? "blockEvent" : "event";
      var isAppointment = appointmentElement.classList.contains(APPOINTMENT_CLASS);
      var eventObj = this.getEventData(event);
      var args = { data: eventObj, element: appointmentElement, cancel: false, type: eventType };
      this.parent.trigger(eventRendered, args, function(eventArgs) {
        if (eventArgs.cancel) {
          _this.renderedEvents.pop();
        } else {
          _this.renderElement(cellTd, appointmentElement, isAppointment);
        }
      });
    };
    MonthEvent2.prototype.getEventData = function(event) {
      var eventObj = extend({}, event, null, true);
      eventObj[this.fields.startTime] = event.data[this.fields.startTime];
      eventObj[this.fields.endTime] = event.data[this.fields.endTime];
      return eventObj;
    };
    MonthEvent2.prototype.renderElement = function(cellTd, element2, isAppointment) {
      if (isAppointment === void 0) {
        isAppointment = false;
      }
      if (this.maxOrIndicator && isAppointment) {
        this.setMaxEventHeight(element2, cellTd);
      }
      var wrapperEle = cellTd.querySelector("." + APPOINTMENT_WRAPPER_CLASS);
      if (wrapperEle) {
        wrapperEle.appendChild(element2);
      } else {
        var wrapper = createElement("div", { className: APPOINTMENT_WRAPPER_CLASS });
        wrapper.appendChild(element2);
        cellTd.appendChild(wrapper);
      }
    };
    MonthEvent2.prototype.getMoreIndicatorElement = function(count, startDate, endDate) {
      var moreIndicatorElement = createElement("div", {
        className: MORE_INDICATOR_CLASS,
        innerHTML: this.getMoreIndicatorText(count),
        attrs: {
          "tabindex": "0",
          "data-count": count.toString(),
          "data-start-date": startDate.getTime().toString(),
          "data-end-date": endDate.getTime().toString()
        }
      });
      return moreIndicatorElement;
    };
    MonthEvent2.prototype.getMoreIndicatorText = function(count) {
      return "+" + this.parent.globalize.formatNumber(count) + "&nbsp;" + (this.parent.isAdaptive ? "" : this.parent.localeObj.getConstant("more"));
    };
    MonthEvent2.prototype.removeHeightProperty = function(selector) {
      var rows = [].slice.call(this.element.querySelectorAll("." + selector + " tbody tr"));
      for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {
        var row = rows_1[_i];
        row.firstElementChild.style.height = "";
      }
    };
    MonthEvent2.prototype.setMaxEventHeight = function(event, cell) {
      var headerHeight = getOuterHeight(cell.querySelector("." + DATE_HEADER_CLASS));
      var height = cell.offsetHeight - headerHeight - (this.maxHeight ? 0 : this.moreIndicatorHeight);
      setStyleAttribute(event, { "height": height + "px", "align-items": "center" });
    };
    MonthEvent2.prototype.destroy = function() {
      this.element = null;
      this.fields = null;
      this.maxHeight = null;
      this.withIndicator = null;
      this.maxOrIndicator = null;
      this.moreIndicatorHeight = null;
      this.removeEventListener();
      _super.prototype.destroy.call(this);
    };
    return MonthEvent2;
  }(EventBase)
);
var __extends$i = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var EVENT_GAP$1 = 2;
var BLOCK_INDICATOR_WIDTH = 22;
var BLOCK_INDICATOR_HEIGHT = 18;
var TimelineEvent = (
  /** @class */
  function(_super) {
    __extends$i(TimelineEvent2, _super);
    function TimelineEvent2(parent, type) {
      var _this = _super.call(this, parent) || this;
      _this.startHour = _this.parent.activeView.getStartHour();
      _this.endHour = _this.parent.activeView.getEndHour();
      _this.slotCount = _this.parent.activeViewOptions.timeScale.slotCount;
      _this.interval = _this.parent.activeViewOptions.timeScale.interval;
      _this.day = 0;
      _this.rowIndex = 0;
      _this.cellTops = [];
      _this.renderType = type;
      _this.eventContainers = [].slice.call(_this.element.querySelectorAll("." + APPOINTMENT_CONTAINER_CLASS));
      var tr = [].slice.call(_this.element.querySelectorAll("." + CONTENT_TABLE_CLASS + " tbody tr"));
      _this.dayLength = tr.length === 0 ? 0 : tr[0].children.length;
      _this.content = _this.parent.element.querySelector("." + CONTENT_TABLE_CLASS);
      return _this;
    }
    TimelineEvent2.prototype.getSlotDates = function() {
      this.slots = [];
      this.slots.push(this.parent.activeView.renderDates.map(function(date) {
        return +date;
      }));
      if (this.parent.activeViewOptions.headerRows.length > 0 && this.parent.activeViewOptions.headerRows.slice(-1)[0].option !== "Hour") {
        this.renderType = "day";
        this.cellWidth = this.content.offsetWidth / this.dateRender.length;
        this.slotsPerDay = 1;
      } else {
        this.slotsPerDay = this.dayLength / this.dateRender.length;
      }
    };
    TimelineEvent2.prototype.getOverlapEvents = function(date, appointments) {
      var appointmentsList = [];
      if (this.renderType === "day") {
        for (var _i = 0, appointments_1 = appointments; _i < appointments_1.length; _i++) {
          var app = appointments_1[_i];
          if (resetTime(app[this.fields.startTime]).getTime() <= resetTime(new Date(date.getTime())).getTime() && resetTime(app[this.fields.endTime]).getTime() >= resetTime(new Date(date.getTime())).getTime()) {
            appointmentsList.push(app);
          }
        }
      } else {
        for (var _a = 0, appointments_2 = appointments; _a < appointments_2.length; _a++) {
          var app = appointments_2[_a];
          var eventData = app.data;
          if (eventData.trimStartTime.getTime() <= date.getTime() && eventData.trimEndTime.getTime() > date.getTime()) {
            appointmentsList.push(app);
          }
        }
      }
      return appointmentsList;
    };
    TimelineEvent2.prototype.getSortComparerIndex = function(startDate, endDate) {
      var appIndex = -1;
      var appointments = this.renderedEvents;
      if (appointments.length > 0) {
        var appointmentsList = this.getOverlapSortComparerEvents(startDate, endDate, appointments);
        var appLevel = appointmentsList.map(function(obj) {
          return obj.Index;
        });
        appIndex = appLevel.length > 0 ? this.getSmallestMissingNumber(appLevel) : 0;
      }
      return appIndex === -1 ? 0 : appIndex;
    };
    TimelineEvent2.prototype.getOverlapSortComparerEvents = function(startDate, endDate, appointmentsCollection) {
      var appointments = [];
      for (var _i = 0, appointmentsCollection_1 = appointmentsCollection; _i < appointmentsCollection_1.length; _i++) {
        var app = appointmentsCollection_1[_i];
        if (this.renderType === "day") {
          if (resetTime(app[this.fields.startTime]).getTime() <= resetTime(new Date(startDate.getTime())).getTime() && resetTime(app[this.fields.endTime]).getTime() >= resetTime(new Date(startDate.getTime())).getTime()) {
            appointments.push(app);
          }
        } else {
          var eventData = app.data;
          if (eventData.trimStartTime.getTime() <= startDate.getTime() && startDate.getTime() < eventData.trimEndTime.getTime() || startDate.getTime() <= eventData.trimStartTime.getTime() && eventData.trimStartTime.getTime() < endDate.getTime()) {
            appointments.push(app);
          }
        }
      }
      return appointments;
    };
    TimelineEvent2.prototype.renderResourceEvents = function() {
      this.removeHeightProperty(RESOURCE_COLUMN_TABLE_CLASS);
      var resources = this.parent.uiStateValues.isGroupAdaptive ? [this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]] : this.parent.resourceBase.renderedResources;
      if (this.parent.crudModule && this.parent.crudModule.crudObj.isCrudAction) {
        for (var i = 0, len = this.parent.crudModule.crudObj.sourceEvent.length; i < len; i++) {
          var source = this.parent.crudModule.crudObj.sourceEvent[parseInt(i.toString(), 10)];
          this.rowIndex = source.groupIndex;
          this.renderEventsHandler(this.parent.activeView.renderDates, this.parent.activeViewOptions.workDays, source);
          if (this.parent.crudModule.crudObj.targetEvent[parseInt(i.toString(), 10)] && this.parent.crudModule.crudObj.sourceEvent[parseInt(i.toString(), 10)].groupIndex !== this.parent.crudModule.crudObj.targetEvent[parseInt(i.toString(), 10)].groupIndex) {
            var target = this.parent.crudModule.crudObj.targetEvent[parseInt(i.toString(), 10)];
            this.rowIndex = target.groupIndex;
            this.renderEventsHandler(this.parent.activeView.renderDates, this.parent.activeViewOptions.workDays, target);
          }
        }
        this.parent.crudModule.crudObj.isCrudAction = false;
      } else {
        for (var i = 0; i < resources.length; i++) {
          this.rowIndex = i;
          this.renderEventsHandler(this.parent.activeView.renderDates, this.parent.activeViewOptions.workDays, resources[parseInt(i.toString(), 10)]);
        }
      }
    };
    TimelineEvent2.prototype.renderEvents = function(event, resIndex, appointmentsList) {
      var startTime = event[this.fields.startTime];
      var endTime = event[this.fields.endTime];
      if (startTime.getTime() < this.parent.minDate.getTime() || endTime.getTime() > this.parent.maxDate.getTime()) {
        return;
      }
      var eventData = event.data;
      startTime = this.getStartTime(event, eventData);
      endTime = this.getEndTime(event, eventData);
      var startEndHours = getStartEndHours(event[this.fields.startTime], this.startHour, this.endHour);
      var eventDates = this.updateEventMinimumDuration(startEndHours, startTime, endTime);
      startTime = eventDates.startDate;
      endTime = eventDates.endDate;
      this.day = this.parent.getIndexOfDate(this.dateRender, resetTime(new Date(startTime.getTime())));
      if (this.day < 0) {
        return;
      }
      var cellTd = this.getCellTd();
      var overlapCount = isNullOrUndefined(this.parent.eventSettings.sortComparer) ? this.getIndex(startTime) : this.getSortComparerIndex(startTime, endTime);
      event.Index = overlapCount;
      var appHeight = this.eventHeight;
      var diffInDays = eventData.count;
      var eventObj = extend({}, event, null, true);
      eventObj[this.fields.startTime] = eventData[this.fields.startTime];
      eventObj[this.fields.endTime] = eventData[this.fields.endTime];
      var currentDate = resetTime(new Date(this.dateRender[this.day].getTime()));
      var schedule = getStartEndHours(currentDate, this.startHour, this.endHour);
      var isValidEvent = true;
      if (this.isDayProcess() || eventObj[this.fields.isAllDay]) {
        isValidEvent = true;
      } else {
        isValidEvent = this.isValidEvent(eventObj, startTime, endTime, schedule);
      }
      if (startTime <= endTime && isValidEvent) {
        var appWidth = this.getEventWidth(startTime, endTime, event[this.fields.isAllDay], diffInDays);
        appWidth = this.renderType === "day" ? appWidth - 2 : appWidth;
        var appLeft = 0;
        var appRight = 0;
        var position = this.getPosition(startTime, endTime, event[this.fields.isAllDay], this.day);
        appWidth = appWidth <= 0 ? this.cellWidth : appWidth;
        this.renderedEvents.push(extend({}, event, null, true));
        if (isNullOrUndefined(this.cellTops[parseInt(resIndex.toString(), 10)])) {
          this.cellTops[parseInt(resIndex.toString(), 10)] = this.getRowTop(resIndex);
        }
        var top_1 = this.cellTops[parseInt(resIndex.toString(), 10)];
        var appTop = top_1 + (this.maxHeight ? 0 : EVENT_GAP$1) + overlapCount * (appHeight + EVENT_GAP$1);
        appLeft = this.parent.enableRtl ? 0 : position;
        appRight = this.parent.enableRtl ? position : 0;
        var height = (overlapCount + 1) * (appHeight + EVENT_GAP$1) + this.moreIndicatorHeight;
        var renderApp = this.maxOrIndicator ? overlapCount < 1 ? true : false : this.cellHeight > height;
        if (this.parent.rowAutoHeight || renderApp) {
          var appointmentElement = void 0;
          if (isNullOrUndefined(this.inlineValue)) {
            appointmentElement = this.createAppointmentElement(event, resIndex);
          } else {
            appointmentElement = this.parent.inlineModule.createInlineAppointmentElement();
          }
          this.applyResourceColor(appointmentElement, event, "backgroundColor", this.groupOrder);
          setStyleAttribute(appointmentElement, {
            "width": appWidth + "px",
            "left": appLeft + "px",
            "right": appRight + "px",
            "top": appTop + "px"
          });
          this.wireAppointmentEvents(appointmentElement, event);
          this.renderEventElement(event, appointmentElement, cellTd);
          if (this.parent.rowAutoHeight) {
            var firstChild = this.getFirstChild(resIndex);
            this.updateCellHeight(firstChild, height);
          }
        } else {
          for (var i = 0; i < diffInDays; i++) {
            var moreIndicator = cellTd.querySelector("." + MORE_INDICATOR_CLASS);
            var appPos = this.parent.enableRtl ? appRight : appLeft;
            appPos = Math.floor(appPos / this.cellWidth) * this.cellWidth;
            var interval = this.interval / this.slotCount;
            var startDate = this.parent.activeViewOptions.option === "TimelineMonth" || this.renderType === "day" || i !== 0 ? new Date(this.dateRender[this.day + i].getTime()) : new Date(startTime);
            var endDate = addDays(this.dateRender[this.day + i], 1);
            if (this.parent.activeViewOptions.option === "TimelineMonth" || this.renderType === "day") {
              var position_1 = this.getPosition(startDate, endDate, event[this.fields.isAllDay], this.day + i);
              this.renderTimelineMoreIndicator(startTime, startDate, endDate, appHeight, interval, resIndex, appointmentsList, top_1, appLeft, appRight, cellTd, moreIndicator, appPos, position_1);
            } else {
              var slotCount = (getUniversalTime(endTime) - getUniversalTime(startTime)) / MS_PER_MINUTE * this.slotCount / this.interval;
              for (var k = 0; k < slotCount; k++) {
                startDate = k === 0 ? new Date(startDate.getTime()) : new Date(startDate.getTime() + 6e4 * interval);
                endDate = new Date(startDate.getTime() + 6e4 * interval);
                if (endDate.getTime() > endTime.getTime()) {
                  break;
                }
                var position_2 = this.getPosition(startDate, endDate, false, this.day + i);
                if (appPos > position_2) {
                  break;
                }
                appPos = position_2;
                this.renderTimelineMoreIndicator(startTime, startDate, endDate, appHeight, interval, resIndex, appointmentsList, top_1, appLeft, appRight, cellTd, moreIndicator, appPos, position_2);
              }
            }
          }
        }
      }
      this.parent.renderTemplates();
    };
    TimelineEvent2.prototype.renderTimelineMoreIndicator = function(startTime, startDate, endDate, appHeight, interval, resIndex, appointmentsList, top, appLeft, appRight, cellTd, moreIndicator, appPos, position) {
      appLeft = this.parent.enableRtl ? appRight = position : position;
      appPos = this.parent.enableRtl ? appRight : appLeft;
      appPos = Math.round(appPos / this.cellWidth) * this.cellWidth;
      if (cellTd && isNullOrUndefined(moreIndicator) || !this.isAlreadyAvail(appPos, cellTd)) {
        var startDateTime = this.parent.activeViewOptions.option === "TimelineMonth" || this.renderType === "day" ? /* @__PURE__ */ new Date(+startTime) : startDate;
        var slotStartTime = new Date(startDateTime.setMinutes(Math.floor(startDateTime.getMinutes() / interval) * interval));
        var slotEndTime = new Date(slotStartTime.getTime() + 6e4 * interval);
        var groupIndex = void 0;
        if (this.parent.activeViewOptions.group.resources.length > 0 && !isNullOrUndefined(resIndex)) {
          groupIndex = resIndex.toString();
        }
        var filterEvents = this.getFilterEvents(startDate, endDate, slotStartTime, slotEndTime, groupIndex, appointmentsList);
        var appArea = this.cellHeight - this.moreIndicatorHeight;
        appHeight = this.withIndicator ? appArea - EVENT_GAP$1 : appHeight;
        var renderedAppCount = Math.floor(appArea / (appHeight + EVENT_GAP$1));
        var count = filterEvents.length - renderedAppCount <= 0 ? 1 : filterEvents.length - renderedAppCount;
        var moreIndicatorElement = void 0;
        if (this.renderType === "day") {
          moreIndicatorElement = this.getMoreIndicatorElement(count, startDate, endDate);
        } else {
          moreIndicatorElement = this.getMoreIndicatorElement(count, slotStartTime, slotEndTime);
        }
        if (!isNullOrUndefined(groupIndex)) {
          moreIndicatorElement.setAttribute("data-group-index", groupIndex);
        }
        moreIndicatorElement.style.top = top + appArea + "px";
        moreIndicatorElement.style.width = this.cellWidth + "px";
        moreIndicatorElement.style.left = appLeft / this.cellWidth * this.cellWidth + "px";
        moreIndicatorElement.style.right = appRight / this.cellWidth * this.cellWidth + "px";
        this.renderElement(cellTd, moreIndicatorElement);
        EventHandler.add(moreIndicatorElement, "click", this.moreIndicatorClick, this);
      }
    };
    TimelineEvent2.prototype.updateCellHeight = function(cell, height) {
      var cellHeight = cell.style.height === "" ? this.cellHeight : parseInt(cell.style.height, 10);
      if (height > cellHeight) {
        setStyleAttribute(cell, { "height": height + "px" });
        if (this.parent.activeViewOptions.group.resources.length > 0) {
          var resourceCell = this.parent.element.querySelector("." + RESOURCE_COLUMN_TABLE_CLASS + ' tbody td[data-group-index="' + cell.getAttribute("data-group-index") + '"]');
          if (resourceCell) {
            setStyleAttribute(resourceCell, { "height": height + "px" });
          }
        }
        var monthHeader = this.parent.element.querySelector(".e-month-header-wrapper table tr:nth-child(" + (cell.parentElement.rowIndex + 1) + ") td");
        if (monthHeader) {
          setStyleAttribute(monthHeader, { "height": height + "px" });
        }
      }
    };
    TimelineEvent2.prototype.getFirstChild = function(index) {
      var query = "." + CONTENT_TABLE_CLASS + " tbody td";
      var groupIndex = "";
      if (this.parent.activeViewOptions.group.resources.length > 0) {
        groupIndex = '[data-group-index="' + index.toString() + '"]';
      }
      var td = this.parent.element.querySelector(query + groupIndex);
      return td;
    };
    TimelineEvent2.prototype.updateBlockElements = function() {
      var blockElement = [].slice.call(this.element.querySelectorAll("." + BLOCK_APPOINTMENT_CLASS));
      for (var _i = 0, blockElement_1 = blockElement; _i < blockElement_1.length; _i++) {
        var element2 = blockElement_1[_i];
        var resIndex = parseInt(element2.getAttribute("data-group-index"), 10);
        var firstChild = this.getFirstChild(resIndex);
        element2.style.height = firstChild.offsetHeight + "px";
        var width = Math.round(element2.offsetWidth / firstChild.offsetWidth);
        element2.style.width = firstChild.offsetWidth * width + "px";
      }
      var blockIndicator = [].slice.call(this.element.querySelectorAll("." + BLOCK_INDICATOR_CLASS));
      for (var _a = 0, blockIndicator_1 = blockIndicator; _a < blockIndicator_1.length; _a++) {
        var element2 = blockIndicator_1[_a];
        var resIndex = parseInt(element2.getAttribute("data-group-index"), 10);
        element2.style.top = this.getRowTop(resIndex) + this.getFirstChild(resIndex).offsetHeight - BLOCK_INDICATOR_HEIGHT + "px";
      }
    };
    TimelineEvent2.prototype.getStartTime = function(event, eventData) {
      var startTime = event[this.fields.startTime];
      var schedule = getStartEndHours(startTime, this.startHour, this.endHour);
      if (this.isDayProcess()) {
        startTime = event[this.fields.startTime];
      } else {
        if (schedule.startHour.getTime() >= eventData[this.fields.startTime]) {
          startTime = schedule.startHour;
        } else if (schedule.endHour.getTime() <= eventData[this.fields.startTime]) {
          startTime = this.getNextDay(schedule.startHour, eventData);
        } else {
          startTime = eventData[this.fields.startTime];
        }
      }
      eventData.trimStartTime = event[this.fields.isAllDay] ? schedule.startHour : eventData[this.fields.startTime];
      return startTime;
    };
    TimelineEvent2.prototype.getNextDay = function(startTime, eventData) {
      var startDate;
      for (var i = 1; i <= this.dateRender.length; i++) {
        startDate = addDays(startTime, i);
        if (this.parent.getIndexOfDate(this.dateRender, resetTime(new Date(startTime.getTime()))) !== -1) {
          eventData.count = eventData.count - 1;
          return startDate;
        }
      }
      return startDate;
    };
    TimelineEvent2.prototype.getEndTime = function(event, eventData) {
      var endTime = event[this.fields.endTime];
      var schedule = getStartEndHours(endTime, this.startHour, this.endHour);
      if (this.isDayProcess()) {
        endTime = eventData[this.fields.endTime];
      } else {
        endTime = eventData[this.fields.endTime];
        if (schedule.endHour.getTime() <= eventData[this.fields.endTime] || event[this.fields.isAllDay]) {
          endTime = schedule.endHour;
        }
        if (schedule.startHour.getTime() >= eventData[this.fields.endTime].getTime() && !event[this.fields.isAllDay]) {
          endTime = this.getPreviousDay(schedule.startHour, schedule.endHour, eventData);
        }
      }
      eventData.trimEndTime = event[this.fields.isAllDay] ? schedule.endHour : eventData[this.fields.endTime];
      return endTime;
    };
    TimelineEvent2.prototype.getPreviousDay = function(startTime, endTime, eventData) {
      for (var i = 1; i <= this.dateRender.length; i++) {
        var endDate = addDays(endTime, -i);
        if (this.parent.getIndexOfDate(this.dateRender, resetTime(new Date(startTime.getTime()))) !== -1) {
          endDate = resetTime(new Date(endDate.getTime()));
          endDate.setHours(endTime.getHours(), endTime.getMinutes(), endTime.getSeconds());
          var count = eventData.count;
          var actualEndTime = eventData[this.fields.endTime];
          eventData.count = actualEndTime.getHours() !== 0 || actualEndTime.getMinutes() !== 0 ? count - 1 : count;
          return endDate;
        }
      }
      return eventData[this.fields.endTime];
    };
    TimelineEvent2.prototype.getEventWidth = function(startDate, endDate, isAllDay, count) {
      if (this.renderType === "day" || isAllDay) {
        return count * this.slotsPerDay * this.cellWidth;
      }
      if (this.isSameDay(startDate, endDate)) {
        return this.getSameDayEventsWidth(startDate, endDate);
      } else {
        return this.getSpannedEventsWidth(startDate, endDate, count);
      }
    };
    TimelineEvent2.prototype.getSameDayEventsWidth = function(startDate, endDate) {
      return (getUniversalTime(endDate) - getUniversalTime(startDate)) / MS_PER_MINUTE * (this.cellWidth * this.slotCount) / this.interval;
    };
    TimelineEvent2.prototype.getSpannedEventsWidth = function(startDate, endDate, diffInDays) {
      var width = diffInDays * this.slotsPerDay * this.cellWidth;
      var endWidth;
      var start = getStartEndHours(resetTime(new Date(startDate.getTime())), this.startHour, this.endHour);
      var startWidth = this.getSameDayEventsWidth(start.startHour, startDate);
      if (this.parent.getIndexOfDate(this.dateRender, resetTime(new Date(endDate.getTime()))) === -1) {
        endWidth = 0;
      } else {
        var end = getStartEndHours(resetTime(new Date(endDate.getTime())), this.startHour, this.endHour);
        endWidth = this.getSameDayEventsWidth(endDate, end.endHour);
        endWidth = this.slotsPerDay * this.cellWidth === endWidth ? 0 : endWidth;
      }
      var spannedWidth = startWidth + endWidth;
      return width > spannedWidth ? width - spannedWidth : width - startWidth;
    };
    TimelineEvent2.prototype.isSameDay = function(startTime, endTime) {
      var startDay = this.parent.getIndexOfDate(this.dateRender, resetTime(new Date(startTime.getTime())));
      var endDay = this.parent.getIndexOfDate(this.dateRender, resetTime(new Date(endTime.getTime())));
      return startDay === endDay;
    };
    TimelineEvent2.prototype.getAppointmentLeft = function(schedule, startTime, day) {
      var slotTd = this.isSameDay(startTime, schedule.startHour) ? (getUniversalTime(startTime) - getUniversalTime(schedule.startHour)) / (MS_PER_MINUTE * this.interval) * this.slotCount : 0;
      if (day === 0) {
        return slotTd;
      } else {
        var daySlot = Math.round((getUniversalTime(schedule.endHour) - getUniversalTime(schedule.startHour)) / MS_PER_MINUTE / this.interval * this.slotCount);
        return daySlot * day + slotTd;
      }
    };
    TimelineEvent2.prototype.getPosition = function(startTime, endTime, isAllDay, day) {
      if (this.renderType === "day" || isAllDay) {
        return day * this.slotsPerDay * this.cellWidth;
      }
      var currentDate = resetTime(new Date(this.dateRender[parseInt(day.toString(), 10)].getTime()));
      var schedule = getStartEndHours(currentDate, this.startHour, this.endHour);
      var cellIndex;
      if (schedule.endHour.getTime() <= endTime.getTime() && schedule.startHour.getTime() >= startTime.getTime()) {
        cellIndex = this.getAppointmentLeft(schedule, schedule.startHour, day);
      } else if (schedule.endHour.getTime() <= endTime.getTime()) {
        cellIndex = this.getAppointmentLeft(schedule, startTime, day);
      } else if (schedule.startHour.getTime() >= startTime.getTime()) {
        cellIndex = this.getAppointmentLeft(schedule, schedule.startHour, day);
      } else {
        cellIndex = this.getAppointmentLeft(schedule, startTime, day);
      }
      return cellIndex * this.cellWidth;
    };
    TimelineEvent2.prototype.getFilterEvents = function(startDate, endDate, startTime, endTime, gIndex, eventsList) {
      if (this.renderType === "day") {
        return this.getFilteredEvents(startDate, endDate, gIndex, eventsList);
      } else {
        return this.getFilteredEvents(startTime, endTime, gIndex, eventsList);
      }
    };
    TimelineEvent2.prototype.isAlreadyAvail = function(appPos, cellTd) {
      var moreIndicator = [].slice.call(cellTd.querySelectorAll("." + MORE_INDICATOR_CLASS));
      for (var i = 0; i < moreIndicator.length; i++) {
        var indicatorPos = void 0;
        if (moreIndicator) {
          indicatorPos = this.parent.enableRtl ? moreIndicator[parseInt(i.toString(), 10)].style.right : moreIndicator[parseInt(i.toString(), 10)].style.left;
        }
        if (parseInt(indicatorPos, 10) === Math.floor(appPos)) {
          return true;
        }
      }
      return false;
    };
    TimelineEvent2.prototype.getRowTop = function(resIndex) {
      if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {
        return this.parent.element.querySelector("." + CONTENT_WRAP_CLASS + ' tbody td[data-group-index="' + resIndex.toString() + '"]').offsetTop;
      }
      return 0;
    };
    TimelineEvent2.prototype.getCellTd = function() {
      var wrapIndex = this.parent.uiStateValues.isGroupAdaptive ? 0 : this.rowIndex;
      return this.eventContainers[parseInt(wrapIndex.toString(), 10)];
    };
    TimelineEvent2.prototype.renderBlockIndicator = function(cellTd, position, resIndex) {
      if (this.parent.headerRows.length > 0 && (this.parent.headerRows[this.parent.headerRows.length - 1].option !== "Hour" || this.parent.headerRows[this.parent.headerRows.length - 1].option !== "Date")) {
        return;
      }
      position = Math.floor(position / this.cellWidth) * this.cellWidth + this.cellWidth - BLOCK_INDICATOR_WIDTH;
      if (!this.isAlreadyAvail(position, cellTd)) {
        var blockIndicator = createElement("div", { className: "e-icons " + BLOCK_INDICATOR_CLASS });
        if (this.parent.activeViewOptions.group.resources.length > 0) {
          blockIndicator.setAttribute("data-group-index", resIndex.toString());
        }
        if (this.parent.enableRtl) {
          blockIndicator.style.right = position + "px";
        } else {
          blockIndicator.style.left = position + "px";
        }
        blockIndicator.style.top = this.getRowTop(resIndex) + this.cellHeight - BLOCK_INDICATOR_HEIGHT + "px";
        this.renderElement(cellTd, blockIndicator);
      }
    };
    TimelineEvent2.prototype.setMaxEventHeight = function(event, cell) {
      setStyleAttribute(event, {
        "height": this.cellHeight - (this.maxHeight ? 0 : EVENT_GAP$1) - (this.maxHeight ? 0 : this.moreIndicatorHeight) + "px"
      });
    };
    TimelineEvent2.prototype.isDayProcess = function() {
      if (this.parent.currentView === "TimelineMonth" || !this.parent.activeViewOptions.timeScale.enable || this.parent.activeViewOptions.headerRows.length > 0 && this.parent.activeViewOptions.headerRows.slice(-1)[0].option !== "Hour") {
        return true;
      }
      return false;
    };
    TimelineEvent2.prototype.destroy = function() {
      this.renderType = null;
      this.eventContainers = null;
      this.dayLength = null;
      this.content = null;
      _super.prototype.destroy.call(this);
      this.parent = null;
    };
    return TimelineEvent2;
  }(MonthEvent)
);
var InlineEdit = (
  /** @class */
  function() {
    function InlineEdit2(parent) {
      this.parent = parent;
      this.parent.on(inlineClick, this.inlineEdit, this);
    }
    InlineEdit2.prototype.inlineEdit = function(args) {
      if (this.parent.quickPopup) {
        this.parent.quickPopup.quickPopupHide();
      }
      if (args.type === "Cell") {
        var moreWrapper = this.parent.element.querySelector("." + MORE_POPUP_WRAPPER_CLASS);
        if (moreWrapper && moreWrapper.classList.contains(POPUP_OPEN)) {
          this.parent.quickPopup.morePopup.hide();
        }
        this.removeInlineAppointmentElement();
        this.cellEdit(args);
      } else {
        if (this.parent.element.querySelector("." + INLINE_SUBJECT_CLASS) !== args.element.querySelector("." + INLINE_SUBJECT_CLASS)) {
          this.removeInlineAppointmentElement();
        }
        this.eventEdit(args);
      }
    };
    InlineEdit2.prototype.cellEdit = function(args) {
      var saveObj = this.generateEventData();
      var cellIndex = args.element.cellIndex;
      var count = this.getEventDaysCount(saveObj);
      if (count > 1) {
        count = Math.round(count);
        count--;
        cellIndex = cellIndex - count;
      }
      var start = resetTime(/* @__PURE__ */ new Date("" + saveObj[this.parent.eventFields.startTime])).getTime();
      var end = resetTime(/* @__PURE__ */ new Date("" + saveObj[this.parent.eventFields.endTime])).getTime();
      var resIndex = args.groupIndex || 0;
      var isVertical = this.parent.currentView === "Day" || this.parent.currentView === "Week" || this.parent.currentView === "WorkWeek";
      if (this.parent.activeViewOptions.timeScale.enable && isVertical) {
        var dayIndex2 = saveObj[this.parent.eventFields.startTime].getDay();
        this.createVerticalViewInline(saveObj, dayIndex2, resIndex, cellIndex);
      } else if (this.parent.currentView === "Month" || !this.parent.activeViewOptions.timeScale.enable && isVertical) {
        this.createMonthViewInline(saveObj, resIndex, start, end);
      } else {
        this.createTimelineViewInline(saveObj, start, end, resIndex);
      }
      var inlineSubject = this.parent.element.querySelector("." + INLINE_SUBJECT_CLASS);
      if (inlineSubject) {
        inlineSubject.focus();
      }
    };
    InlineEdit2.prototype.eventEdit = function(args) {
      var inlineSubject = args.element.querySelector("." + INLINE_SUBJECT_CLASS);
      var subject;
      if (inlineSubject) {
        subject = inlineSubject.value;
      } else {
        var subEle = args.element.querySelector("." + SUBJECT_CLASS);
        if (!isNullOrUndefined(subEle)) {
          addClass([subEle], DISABLE_CLASS);
          subject = subEle.innerText;
        } else {
          subject = args.data[this.parent.eventFields.subject];
        }
        inlineSubject = createElement("input", { className: INLINE_SUBJECT_CLASS, attrs: { value: subject } });
        if (closest(args.element, "." + MORE_POPUP_WRAPPER_CLASS)) {
          args.element.insertBefore(inlineSubject, subEle);
        } else if (["Agenda", "MonthAgenda"].indexOf(this.parent.currentView) > -1) {
          var subjectWrap = args.element.querySelector("." + SUBJECT_WRAP);
          if (isNullOrUndefined(subjectWrap)) {
            subjectWrap = createElement("div", { className: SUBJECT_WRAP });
            args.element.prepend(subjectWrap);
          }
          subjectWrap.insertBefore(inlineSubject, subjectWrap.firstChild);
        } else {
          args.element.querySelector(".e-appointment-details").prepend(inlineSubject);
        }
        inlineSubject.focus();
      }
      inlineSubject.setSelectionRange(subject.length, subject.length);
    };
    InlineEdit2.prototype.createVerticalViewInline = function(saveObj, dayIndex2, resIndex, daysCount) {
      var _a;
      var count = this.getEventDaysCount(saveObj);
      var verticalEvent = new VerticalEvent(this.parent);
      verticalEvent.initializeValues();
      var index = verticalEvent.dateRender[parseInt(resIndex.toString(), 10)].map(function(date) {
        return date.getDay();
      }).indexOf(dayIndex2);
      if (count >= 1) {
        verticalEvent.allDayElement = [].slice.call(this.parent.element.querySelectorAll("." + ALLDAY_CELLS_CLASS));
        (_a = verticalEvent.slots).push.apply(_a, this.parent.activeView.renderDates.map(function(date) {
          return +date;
        }));
        var allDayElements = [].slice.call(this.parent.element.querySelectorAll("." + ALLDAY_APPOINTMENT_CLASS));
        var allDayLevel = 0;
        if (allDayElements.length > 0) {
          allDayLevel = Math.floor(this.parent.element.querySelector("." + ALLDAY_ROW_CLASS).getBoundingClientRect().height / allDayElements[0].offsetHeight) - 1;
        }
        verticalEvent.allDayLevel = allDayLevel;
        verticalEvent.renderAllDayEvents(saveObj, index, resIndex, daysCount, this.parent.allowInline);
      } else {
        verticalEvent.renderNormalEvents(saveObj, index, resIndex, daysCount, this.parent.allowInline);
      }
    };
    InlineEdit2.prototype.createMonthViewInline = function(saveObj, index, start, end) {
      var count = this.getEventDaysCount(saveObj);
      var saveObject = this.parent.eventBase.cloneEventObject(saveObj, start, end, count, false, false);
      var monthEvent = new MonthEvent(this.parent);
      monthEvent.dateRender = this.parent.activeView.renderDates;
      monthEvent.inlineValue = this.parent.allowInline;
      var renderDates = this.parent.activeView.renderDates;
      var workDays = this.parent.activeViewOptions.workDays;
      var monthCellSelector = "." + WORK_CELLS_CLASS;
      if (this.parent.activeViewOptions.group.resources.length > 0) {
        monthCellSelector += '[data-group-index="' + index + '"]';
        var resourceData = this.parent.resourceBase.lastResourceLevel[parseInt(index.toString(), 10)];
        renderDates = resourceData.renderDates;
        workDays = resourceData.workDays;
      }
      monthEvent.dateRender = renderDates;
      monthEvent.workCells = [].slice.call(this.parent.element.querySelectorAll(monthCellSelector));
      monthEvent.cellWidth = monthEvent.workCells[0].offsetWidth;
      monthEvent.cellHeight = monthEvent.workCells[0].offsetHeight;
      monthEvent.eventHeight = getElementHeightFromClass(this.parent.monthModule.element || monthEvent.element, APPOINTMENT_CLASS);
      monthEvent.getSlotDates(workDays);
      var filteredDates = monthEvent.getRenderedDates(renderDates);
      var spannedEvents = monthEvent.splitEvent(saveObject, filteredDates || renderDates);
      for (var _i = 0, spannedEvents_1 = spannedEvents; _i < spannedEvents_1.length; _i++) {
        var eventData = spannedEvents_1[_i];
        monthEvent.renderEvents(eventData, index);
      }
      var inlineSubject = this.parent.element.querySelector("." + INLINE_SUBJECT_CLASS);
      inlineSubject.focus();
    };
    InlineEdit2.prototype.createTimelineViewInline = function(saveObj, start, end, resIndex) {
      var count = this.getEventDaysCount(saveObj);
      var saveObject = this.parent.eventBase.cloneEventObject(saveObj, start, end, count, false, false);
      var timelineView = new TimelineEvent(this.parent, this.parent.activeViewOptions.timeScale.enable ? "hour" : "day");
      timelineView.dateRender = this.parent.activeView.renderDates;
      timelineView.eventContainers = [].slice.call(this.parent.element.querySelectorAll("." + APPOINTMENT_CONTAINER_CLASS));
      var workCell = this.parent.element.querySelector("." + WORK_CELLS_CLASS);
      timelineView.inlineValue = this.parent.allowInline;
      timelineView.cellWidth = workCell.offsetWidth;
      timelineView.cellHeight = workCell.offsetHeight;
      var dayLength = this.parent.element.querySelectorAll("." + CONTENT_TABLE_CLASS + " tbody tr").length === 0 ? 0 : this.parent.element.querySelectorAll("." + CONTENT_TABLE_CLASS + " tbody tr")[0].children.length;
      timelineView.slotsPerDay = dayLength / timelineView.dateRender.length;
      timelineView.eventHeight = getElementHeightFromClass(timelineView.element, APPOINTMENT_CLASS);
      timelineView.renderEvents(saveObject, resIndex);
    };
    InlineEdit2.prototype.getEventDaysCount = function(saveObj) {
      var startDate = saveObj[this.parent.eventFields.startTime];
      var endDate = saveObj[this.parent.eventFields.endTime];
      var daysCount = Math.abs(endDate.getTime() - startDate.getTime()) / MS_PER_DAY;
      return daysCount;
    };
    InlineEdit2.prototype.generateEventData = function(target) {
      var inlineElement = this.parent.element.querySelector("." + INLINE_SUBJECT_CLASS);
      var subject = inlineElement ? inlineElement.value : target ? target.innerHTML : "";
      var saveObj = {};
      saveObj[this.parent.eventFields.id] = this.parent.eventBase.getEventMaxID();
      saveObj[this.parent.eventFields.subject] = subject;
      saveObj[this.parent.eventFields.startTime] = this.parent.activeCellsData.startTime;
      saveObj[this.parent.eventFields.endTime] = this.parent.activeCellsData.endTime;
      saveObj[this.parent.eventFields.isAllDay] = this.parent.activeCellsData.isAllDay;
      this.parent.eventWindow.setDefaultValueToObject(saveObj);
      if (this.parent.resourceBase) {
        this.parent.resourceBase.setResourceValues(saveObj, this.parent.activeCellsData.groupIndex);
      }
      return saveObj;
    };
    InlineEdit2.prototype.documentClick = function() {
      var target = this.parent.element.querySelector("." + INLINE_SUBJECT_CLASS);
      if (target && target.value !== "") {
        this.inlineCrudActions(target);
      } else {
        this.removeInlineAppointmentElement();
      }
    };
    InlineEdit2.prototype.inlineCrudActions = function(target) {
      if (closest(target, "." + INLINE_APPOINTMENT_CLASS)) {
        var saveObj = this.generateEventData(target);
        this.parent.addEvent(saveObj);
      } else {
        var eventTarget = closest(target, "." + APPOINTMENT_CLASS);
        var eventDetails = this.parent.getEventDetails(eventTarget);
        eventDetails[this.parent.eventFields.subject] = target.value;
        var currentAction = void 0;
        if (eventDetails[this.parent.eventFields.id] === eventDetails[this.parent.eventFields.recurrenceID]) {
          currentAction = "EditOccurrence";
          eventDetails[this.parent.eventFields.id] = this.parent.eventBase.getEventMaxID();
        }
        this.parent.saveEvent(eventDetails, currentAction);
      }
      this.removeInlineAppointmentElement();
    };
    InlineEdit2.prototype.createInlineAppointmentElement = function(inlineData) {
      var inlineAppointmentElement = createElement("div", {
        className: APPOINTMENT_CLASS + " " + INLINE_APPOINTMENT_CLASS
      });
      var inlineDetails = createElement("div", { className: APPOINTMENT_DETAILS });
      inlineAppointmentElement.appendChild(inlineDetails);
      var inline = createElement("input", { className: INLINE_SUBJECT_CLASS });
      inlineDetails.appendChild(inline);
      if (inlineData) {
        this.parent.eventBase.applyResourceColor(inlineAppointmentElement, inlineData, "backgroundColor");
      }
      return inlineAppointmentElement;
    };
    InlineEdit2.prototype.removeInlineAppointmentElement = function() {
      var inlineAppointment = [].slice.call(this.parent.element.querySelectorAll("." + INLINE_APPOINTMENT_CLASS));
      if (inlineAppointment.length > 0) {
        inlineAppointment.forEach(function(node) {
          return remove(node);
        });
      }
      var inlineSubject = this.parent.element.querySelector("." + INLINE_SUBJECT_CLASS);
      if (inlineSubject) {
        var appointmentSubject = closest(inlineSubject, "." + APPOINTMENT_CLASS);
        var subject = appointmentSubject.querySelector("." + SUBJECT_CLASS);
        if (!isNullOrUndefined(subject)) {
          removeClass([subject], DISABLE_CLASS);
        }
        remove(inlineSubject);
      }
    };
    InlineEdit2.prototype.destroy = function() {
      this.parent.off(inlineClick, this.inlineEdit);
    };
    return InlineEdit2;
  }()
);
var FieldValidator = (
  /** @class */
  function() {
    function FieldValidator2() {
    }
    FieldValidator2.prototype.renderFormValidator = function(form, rules, element2, locale) {
      var _this = this;
      this.element = element2;
      this.formObj = new FormValidator(form, {
        locale,
        customPlacement: function(inputElement, error) {
          _this.errorPlacement(inputElement, error);
        },
        rules,
        validationComplete: function(args) {
          _this.validationComplete(args);
        },
        focusout: function(args) {
          _this.focusOut(args);
        }
      });
    };
    FieldValidator2.prototype.focusOut = function(args) {
      var target = args.relatedTarget;
      if (target && (target.classList.contains("e-dlg-closeicon-btn") || target.classList.contains("e-close") || target.classList.contains(ALLDAY_CELLS_CLASS) || target.classList.contains(HEADER_CELLS_CLASS) || target.classList.contains(QUICK_POPUP_EVENT_DETAILS_CLASS) || target.classList.contains(WORK_CELLS_CLASS) || target.classList.contains(EVENT_WINDOW_CANCEL_BUTTON_CLASS))) {
        this.ignoreError = true;
      } else {
        this.ignoreError = false;
      }
    };
    FieldValidator2.prototype.validationComplete = function(args) {
      var elem = this.element.querySelector("#" + args.inputName + "_Error");
      if (elem) {
        elem.style.display = args.status === "failure" ? "" : "none";
      }
    };
    FieldValidator2.prototype.errorPlacement = function(inputElement, error) {
      var id = error.getAttribute("for");
      var elem = this.element.querySelector("#" + id + "_Error");
      if (!elem && !this.ignoreError) {
        this.createTooltip(inputElement, error, id, "");
      }
      if (!isNullOrUndefined(elem)) {
        elem.querySelector(".e-error").innerHTML = error.innerHTML;
      }
    };
    FieldValidator2.prototype.createTooltip = function(element2, error, name, display) {
      var dlgContent;
      var client;
      var inputClient = element2.getBoundingClientRect();
      if (this.element.classList.contains(POPUP_WRAPPER_CLASS)) {
        dlgContent = this.element;
        client = this.element.getBoundingClientRect();
      } else {
        dlgContent = this.element.querySelector(".e-schedule-dialog .e-dlg-content");
        client = dlgContent.getBoundingClientRect();
      }
      var div = createElement("div", {
        className: "e-tooltip-wrap e-popup " + ERROR_VALIDATION_CLASS,
        id: name + "_Error",
        styles: "display:" + display + ";top:" + (inputClient.bottom - client.top + dlgContent.scrollTop + 9) + "px;left:" + (inputClient.left - client.left + dlgContent.scrollLeft + inputClient.width / 2) + "px;"
      });
      var content = createElement("div", { className: "e-tip-content" });
      content.appendChild(error);
      var arrow = createElement("div", { className: "e-arrow-tip e-tip-top" });
      arrow.appendChild(createElement("div", { className: "e-arrow-tip-outer e-tip-top" }));
      arrow.appendChild(createElement("div", { className: "e-arrow-tip-inner e-tip-top" }));
      div.appendChild(content);
      div.appendChild(arrow);
      dlgContent.appendChild(div);
      div.style.left = parseInt(div.style.left, 10) - div.offsetWidth / 2 + "px";
    };
    FieldValidator2.prototype.destroyToolTip = function() {
      if (this.element) {
        var elements = [].slice.call(this.element.querySelectorAll("." + ERROR_VALIDATION_CLASS));
        for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {
          var elem = elements_1[_i];
          remove(elem);
        }
      }
      if (this.formObj && this.formObj.element) {
        this.formObj.reset();
      }
    };
    FieldValidator2.prototype.destroy = function() {
      if (this.formObj && this.formObj.element && !this.formObj.isDestroyed) {
        this.formObj.destroy();
      }
      this.formObj = null;
      this.element = null;
    };
    return FieldValidator2;
  }()
);
var EVENT_FIELD$1 = "e-field";
var QuickPopups = (
  /** @class */
  function() {
    function QuickPopups2(parent) {
      this.isMultipleEventSelect = false;
      this.isCrudAction = false;
      this.parent = parent;
      this.l10n = this.parent.localeObj;
      this.fieldValidator = new FieldValidator();
      this.render();
      this.addEventListener();
    }
    QuickPopups2.prototype.render = function() {
      this.renderQuickPopup();
      this.renderMorePopup();
      this.renderQuickDialog();
    };
    QuickPopups2.prototype.renderQuickPopup = function() {
      var quickPopupWrapper = createElement("div", { className: POPUP_WRAPPER_CLASS + " e-popup-close" });
      if (this.parent.isAdaptive) {
        document.body.appendChild(quickPopupWrapper);
        addClass([quickPopupWrapper], DEVICE_CLASS);
      } else {
        this.parent.element.appendChild(quickPopupWrapper);
      }
      this.quickPopup = new Popup(quickPopupWrapper, {
        targetType: this.parent.isAdaptive ? "container" : "relative",
        enableRtl: this.parent.enableRtl,
        open: this.quickPopupOpen.bind(this),
        close: this.quickPopupClose.bind(this),
        hideAnimation: this.parent.isAdaptive ? { name: "ZoomOut" } : { name: "FadeOut", duration: 150 },
        showAnimation: this.parent.isAdaptive ? { name: "ZoomIn" } : { name: "FadeIn", duration: 150 },
        collision: this.parent.isAdaptive ? { X: "fit", Y: "fit" } : this.parent.enableRtl ? { X: "flip", Y: "fit" } : { X: "none", Y: "fit" },
        position: this.parent.isAdaptive || this.parent.enableRtl ? { X: "left", Y: "top" } : { X: "right", Y: "top" },
        viewPortElement: this.parent.isAdaptive ? document.body : this.parent.element,
        zIndex: this.parent.isAdaptive ? 1004 : 3
      });
    };
    QuickPopups2.prototype.renderMorePopup = function() {
      var moreEventPopup = '<div class="' + MORE_EVENT_POPUP_CLASS + '"><div class="' + MORE_EVENT_HEADER_CLASS + '">' + ('<div class="' + MORE_EVENT_CLOSE_CLASS + '" title="' + this.l10n.getConstant("close") + '" tabindex="0"></div>') + ('<div class="' + MORE_EVENT_DATE_HEADER_CLASS + '"><div class="' + MORE_EVENT_HEADER_DAY_CLASS + '"></div>') + ('<div class="' + MORE_EVENT_HEADER_DATE_CLASS + " " + NAVIGATE_CLASS + '" tabindex="0"></div></div></div></div>');
      var moreEventWrapper = createElement("div", {
        className: MORE_POPUP_WRAPPER_CLASS + " e-popup-close",
        innerHTML: moreEventPopup
      });
      if (this.parent.isAdaptive) {
        document.body.appendChild(moreEventWrapper);
        addClass([moreEventWrapper], DEVICE_CLASS);
      } else {
        this.parent.element.appendChild(moreEventWrapper);
      }
      this.morePopup = new Popup(moreEventWrapper, {
        targetType: this.parent.isAdaptive ? "container" : "relative",
        enableRtl: this.parent.enableRtl,
        hideAnimation: { name: "ZoomOut", duration: 300 },
        showAnimation: { name: "ZoomIn", duration: 300 },
        open: this.morePopupOpen.bind(this),
        close: this.morePopupClose.bind(this),
        collision: this.parent.isAdaptive ? { X: "fit", Y: "fit" } : this.parent.enableRtl ? { X: "flip", Y: "fit" } : { X: "flip", Y: "flip" },
        viewPortElement: this.parent.isAdaptive ? document.body : this.parent.element,
        zIndex: this.parent.isAdaptive ? 1002 : 2
      });
      var closeButton = this.morePopup.element.querySelector("." + MORE_EVENT_CLOSE_CLASS);
      this.renderButton("e-round", ICON + " " + CLOSE_ICON_CLASS, false, closeButton, this.closeClick);
      EventHandler.add(this.morePopup.element.querySelector("." + MORE_EVENT_HEADER_DATE_CLASS), "click", this.navigationClick, this);
    };
    QuickPopups2.prototype.renderQuickDialog = function() {
      var buttonModel = [
        { buttonModel: { cssClass: "e-quick-alertok e-flat", isPrimary: true }, click: this.dialogButtonClick.bind(this) },
        { buttonModel: { cssClass: "e-quick-alertcancel e-flat", isPrimary: false }, click: this.dialogButtonClick.bind(this) },
        {
          buttonModel: { cssClass: "e-quick-dialog-cancel e-disable e-flat", isPrimary: false },
          click: this.dialogButtonClick.bind(this)
        }
      ];
      if (this.parent.eventSettings.editFollowingEvents) {
        var followingSeriesButton = {
          buttonModel: { cssClass: "e-quick-alertfollowing e-flat", isPrimary: false },
          click: this.dialogButtonClick.bind(this)
        };
        buttonModel.splice(1, 0, followingSeriesButton);
      }
      this.quickDialog = new Dialog({
        animationSettings: { effect: "Zoom" },
        buttons: buttonModel,
        cssClass: QUICK_DIALOG_CLASS,
        closeOnEscape: true,
        enableRtl: this.parent.enableRtl,
        enableHtmlSanitizer: this.parent.enableHtmlSanitizer,
        beforeClose: this.beforeQuickDialogClose.bind(this),
        isModal: true,
        position: { X: "center", Y: "center" },
        showCloseIcon: true,
        target: document.body,
        visible: false,
        width: "auto"
      });
      var dialogElement = createElement("div", { id: this.parent.element.id + "QuickDialog" });
      this.parent.element.appendChild(dialogElement);
      this.quickDialog.appendTo(dialogElement);
      var okButton = this.quickDialog.element.querySelector("." + QUICK_DIALOG_ALERT_OK);
      if (okButton) {
        okButton.setAttribute("aria-label", this.l10n.getConstant("occurrence"));
        okButton.setAttribute("aria-label", okButton.innerHTML);
      }
      var cancelButton = this.quickDialog.element.querySelector("." + QUICK_DIALOG_ALERT_CANCEL);
      if (cancelButton) {
        cancelButton.setAttribute("aria-label", this.l10n.getConstant("series"));
        cancelButton.setAttribute("aria-label", cancelButton.innerHTML);
      }
      if (this.quickDialog.element.querySelector(".e-dlg-closeicon-btn")) {
        this.quickDialog.element.querySelector(".e-dlg-closeicon-btn").setAttribute("title", this.l10n.getConstant("close"));
      }
    };
    QuickPopups2.prototype.renderButton = function(className, iconName, isDisabled, element2, clickEvent) {
      var buttonObj = new Button({
        cssClass: className,
        disabled: isDisabled,
        enableRtl: this.parent.enableRtl,
        enableHtmlSanitizer: this.parent.enableHtmlSanitizer,
        iconCss: iconName
      });
      buttonObj.appendTo(element2);
      EventHandler.add(element2, "click", clickEvent, this);
      removeClass([element2], ICON);
    };
    QuickPopups2.prototype.quickDialogClass = function(action) {
      var classList2 = [
        QUICK_DIALOG_OCCURRENCE_CLASS,
        QUICK_DIALOG_SERIES_CLASS,
        QUICK_DIALOG_DELETE_CLASS,
        QUICK_DIALOG_CANCEL_CLASS,
        QUICK_DIALOG_ALERT_BTN_CLASS,
        DISABLE_CLASS
      ];
      var okButton = this.quickDialog.element.querySelector("." + QUICK_DIALOG_ALERT_OK);
      var cancelButton = this.quickDialog.element.querySelector("." + QUICK_DIALOG_ALERT_CANCEL);
      var followingEventButton = this.quickDialog.element.querySelector("." + QUICK_DIALOG_ALERT_FOLLOWING);
      removeClass([okButton, cancelButton], classList2);
      addClass([this.quickDialog.element.querySelector("." + QUICK_DIALOG_CANCEL_CLASS)], DISABLE_CLASS);
      if (this.parent.eventSettings.editFollowingEvents) {
        addClass([followingEventButton], DISABLE_CLASS);
        removeClass([this.quickDialog.element], FOLLOWING_EVENTS_DIALOG);
      }
      switch (action) {
        case "Recurrence":
          addClass([okButton], QUICK_DIALOG_OCCURRENCE_CLASS);
          addClass([cancelButton], QUICK_DIALOG_SERIES_CLASS);
          if (this.parent.eventSettings.editFollowingEvents) {
            removeClass([followingEventButton], DISABLE_CLASS);
            addClass([this.quickDialog.element], FOLLOWING_EVENTS_DIALOG);
            addClass([followingEventButton], QUICK_DIALOG_FOLLOWING_EVENTS_CLASS);
          }
          break;
        case "Delete":
          addClass([okButton], QUICK_DIALOG_DELETE_CLASS);
          addClass([cancelButton], QUICK_DIALOG_CANCEL_CLASS);
          break;
        case "Alert":
          addClass([okButton], [QUICK_DIALOG_ALERT_OK, QUICK_DIALOG_ALERT_BTN_CLASS]);
          addClass([cancelButton], [QUICK_DIALOG_ALERT_CANCEL, DISABLE_CLASS]);
          break;
      }
    };
    QuickPopups2.prototype.applyFormValidation = function() {
      var form = this.quickPopup.element.querySelector("." + FORM_CLASS);
      var rules = {};
      rules[this.parent.eventSettings.fields.subject.name] = this.parent.eventSettings.fields.subject.validation;
      this.fieldValidator.renderFormValidator(form, rules, this.quickPopup.element, this.parent.locale);
    };
    QuickPopups2.prototype.openRecurrenceAlert = function() {
      var editDeleteOnly = this.quickDialog.element.querySelector("." + QUICK_DIALOG_ALERT_OK);
      if (editDeleteOnly) {
        editDeleteOnly.innerHTML = this.l10n.getConstant(this.parent.currentAction === "Delete" ? "deleteEvent" : "editEvent");
        editDeleteOnly.setAttribute("aria-label", editDeleteOnly.innerHTML);
      }
      var editFollowingEventsOnly = this.quickDialog.element.querySelector("." + QUICK_DIALOG_ALERT_FOLLOWING);
      if (editFollowingEventsOnly) {
        editFollowingEventsOnly.innerHTML = this.l10n.getConstant("editFollowingEvent");
        editFollowingEventsOnly.setAttribute("aria-label", editFollowingEventsOnly.innerHTML);
      }
      var editDeleteSeries = this.quickDialog.element.querySelector("." + QUICK_DIALOG_ALERT_CANCEL);
      if (editDeleteSeries) {
        editDeleteSeries.innerHTML = this.l10n.getConstant(this.parent.currentAction === "Delete" ? "deleteSeries" : "editSeries");
        editDeleteSeries.setAttribute("aria-label", editDeleteSeries.innerHTML);
      }
      this.quickDialog.content = this.l10n.getConstant("editContent");
      this.quickDialog.header = this.l10n.getConstant(this.parent.currentAction === "Delete" ? "deleteTitle" : "editTitle");
      this.quickDialogClass("Recurrence");
      var activeEvent = this.parent.activeEventData.event;
      if (this.parent.eventSettings.editFollowingEvents && this.parent.currentAction === "EditOccurrence" && !isNullOrUndefined(activeEvent[this.parent.eventFields.recurrenceID]) && activeEvent[this.parent.eventFields.recurrenceID] !== activeEvent[this.parent.eventFields.id]) {
        var followingEventButton = this.quickDialog.element.querySelector("." + QUICK_DIALOG_ALERT_FOLLOWING);
        addClass([followingEventButton], DISABLE_CLASS);
      }
      this.showQuickDialog("RecurrenceAlert");
    };
    QuickPopups2.prototype.openRecurrenceValidationAlert = function(type) {
      this.quickDialogClass("Alert");
      var okButton = this.quickDialog.element.querySelector("." + QUICK_DIALOG_ALERT_OK);
      okButton.innerHTML = this.l10n.getConstant("ok");
      okButton.setAttribute("aria-label", okButton.innerHTML);
      var cancelButton = this.quickDialog.element.querySelector("." + QUICK_DIALOG_ALERT_CANCEL);
      cancelButton.innerHTML = this.l10n.getConstant("cancel");
      cancelButton.setAttribute("aria-label", cancelButton.innerHTML);
      this.quickDialog.header = this.l10n.getConstant("alert");
      var dialogCancel;
      switch (type) {
        case "wrongPattern":
          addClass([cancelButton], DISABLE_CLASS);
          this.quickDialog.content = this.l10n.getConstant("wrongPattern");
          break;
        case "createError":
          addClass([cancelButton], DISABLE_CLASS);
          this.quickDialog.content = this.l10n.getConstant("createError");
          break;
        case "sameDayAlert":
          addClass([cancelButton], DISABLE_CLASS);
          this.quickDialog.content = this.l10n.getConstant("sameDayAlert");
          break;
        case "seriesChangeAlert":
          dialogCancel = this.quickDialog.element.querySelector("." + QUICK_DIALOG_CANCEL_CLASS);
          removeClass([cancelButton, dialogCancel], DISABLE_CLASS);
          this.quickDialog.content = this.l10n.getConstant("seriesChangeAlert");
          okButton.innerHTML = this.l10n.getConstant("yes");
          cancelButton.innerHTML = this.l10n.getConstant("no");
          dialogCancel.innerHTML = this.l10n.getConstant("cancel");
          break;
        case "occurrenceAlert":
          addClass([cancelButton], DISABLE_CLASS);
          this.quickDialog.content = this.l10n.getConstant("occurenceAlert");
          break;
      }
      if (!this.parent.enableRecurrenceValidation && type === "wrongPattern" || this.parent.enableRecurrenceValidation) {
        this.showQuickDialog("RecurrenceValidationAlert");
      }
    };
    QuickPopups2.prototype.openDeleteAlert = function() {
      if (this.parent.activeViewOptions.readonly) {
        return;
      }
      var okButton = this.quickDialog.element.querySelector("." + QUICK_DIALOG_ALERT_OK);
      if (okButton) {
        okButton.innerHTML = this.l10n.getConstant("delete");
        okButton.setAttribute("aria-label", okButton.innerHTML);
      }
      var cancelButton = this.quickDialog.element.querySelector("." + QUICK_DIALOG_ALERT_CANCEL);
      if (cancelButton) {
        cancelButton.innerHTML = this.l10n.getConstant("cancel");
        cancelButton.setAttribute("aria-label", cancelButton.innerHTML);
      }
      this.quickDialog.content = this.parent.activeEventData.event.length > 1 ? this.l10n.getConstant("deleteMultipleContent") : this.l10n.getConstant("deleteContent");
      this.quickDialog.header = this.parent.activeEventData.event.length > 1 ? this.l10n.getConstant("deleteMultipleEvent") : this.l10n.getConstant("deleteEvent");
      this.quickDialogClass("Delete");
      this.showQuickDialog("DeleteAlert");
    };
    QuickPopups2.prototype.openValidationError = function(type, eventData) {
      this.quickDialog.header = this.l10n.getConstant("alert");
      this.quickDialog.content = this.l10n.getConstant(type);
      var okButton = this.quickDialog.element.querySelector("." + QUICK_DIALOG_ALERT_OK);
      if (okButton) {
        okButton.innerHTML = this.l10n.getConstant("ok");
        okButton.setAttribute("aria-label", okButton.innerHTML);
      }
      var cancelButton = this.quickDialog.element.querySelector("." + QUICK_DIALOG_ALERT_CANCEL);
      if (cancelButton) {
        cancelButton.innerHTML = this.l10n.getConstant("cancel");
        okButton.setAttribute("aria-label", cancelButton.innerHTML);
      }
      this.quickDialogClass("Alert");
      this.showQuickDialog("ValidationAlert", eventData);
    };
    QuickPopups2.prototype.showQuickDialog = function(popupType, eventData) {
      var _this = this;
      this.quickDialog.dataBind();
      var eventProp = {
        type: popupType,
        cancel: false,
        element: this.quickDialog.element,
        data: extend({}, eventData || this.parent.activeEventData.event, null, true)
      };
      this.parent.trigger(popupOpen, eventProp, function(popupArgs) {
        if (!popupArgs.cancel) {
          _this.quickDialog.show();
        }
      });
    };
    QuickPopups2.prototype.createMoreEventList = function(eventCollection, groupOrder, groupIndex) {
      var _this = this;
      var fields = this.parent.eventFields;
      var moreEventContentEle = createElement("div", { className: MORE_EVENT_CONTENT_CLASS });
      var moreEventWrapperEle = createElement("div", { className: MORE_EVENT_WRAPPER_CLASS });
      if (eventCollection.length === 0) {
        moreEventWrapperEle = createElement("div", {
          className: MORE_EVENT_CONTENT_CLASS,
          innerHTML: this.l10n.getConstant("emptyContainer")
        });
      } else {
        var _loop_1 = function(eventData2) {
          var eventText = eventData2[fields.subject] || this_1.parent.eventSettings.fields.subject.default || this_1.parent.localeObj.getConstant("addTitle");
          var appointmentElement = createElement("div", {
            className: APPOINTMENT_CLASS,
            attrs: {
              "data-id": "" + eventData2[fields.id],
              "data-guid": eventData2.Guid,
              "role": "button",
              "tabindex": "0",
              "aria-disabled": this_1.parent.eventBase.getReadonlyAttribute(eventData2),
              "aria-label": this_1.parent.getAnnouncementString(eventData2)
            }
          });
          var templateElement = void 0;
          if (!isNullOrUndefined(this_1.parent.activeViewOptions.eventTemplate)) {
            var tempId = this_1.parent.element.id + "_" + this_1.parent.activeViewOptions.eventTemplateName + "eventTemplate";
            templateElement = this_1.parent.getAppointmentTemplate()(eventData2, this_1.parent, "eventTemplate", tempId, false);
            append2(templateElement, appointmentElement);
          } else {
            appointmentElement.appendChild(createElement("div", { className: SUBJECT_CLASS }));
            this_1.parent.sanitize(eventText, appointmentElement.firstElementChild);
          }
          if (!isNullOrUndefined(groupIndex)) {
            appointmentElement.setAttribute("data-group-index", groupIndex);
          }
          if (!isNullOrUndefined(eventData2[fields.recurrenceRule])) {
            var iconClass = eventData2[fields.id] === eventData2[fields.recurrenceID] ? EVENT_RECURRENCE_ICON_CLASS : EVENT_RECURRENCE_EDIT_ICON_CLASS;
            appointmentElement.appendChild(createElement("div", { className: ICON + " " + iconClass }));
          }
          var args = {
            data: extend({}, eventData2, null, true),
            element: appointmentElement,
            cancel: false
          };
          this_1.parent.trigger(eventRendered, args, function(eventArgs) {
            if (!eventArgs.cancel) {
              moreEventWrapperEle.appendChild(appointmentElement);
              var isPreventCrud = _this.parent.isAdaptive || _this.parent.currentView === "Year";
              _this.parent.eventBase.wireAppointmentEvents(appointmentElement, eventData2, isPreventCrud);
              _this.parent.eventBase.applyResourceColor(appointmentElement, eventData2, "backgroundColor", groupOrder);
            }
          });
        };
        var this_1 = this;
        for (var _i = 0, eventCollection_1 = eventCollection; _i < eventCollection_1.length; _i++) {
          var eventData = eventCollection_1[_i];
          _loop_1(eventData);
        }
      }
      moreEventContentEle.appendChild(moreEventWrapperEle);
      return moreEventContentEle;
    };
    QuickPopups2.prototype.tapHoldEventPopup = function(e) {
      var target = closest(e.target, "." + APPOINTMENT_CLASS);
      this.isMultipleEventSelect = false;
      this.parent.selectedElements = [];
      this.isMultipleEventSelect = true;
      this.parent.eventBase.getSelectedEventElements(target);
      this.parent.activeEventData = this.parent.eventBase.getSelectedEvents();
      var guid = target.getAttribute("data-guid");
      var eventObj = this.parent.eventBase.getEventByGuid(guid);
      if (isNullOrUndefined(eventObj)) {
        return;
      }
      var eventTitle = eventObj[this.parent.eventFields.subject] || this.l10n.getConstant("noTitle");
      var eventTemplate = '<div class="' + MULTIPLE_EVENT_POPUP_CLASS + '"><div class="' + POPUP_HEADER_CLASS + '">' + ('<button class="' + CLOSE_CLASS + '" title="' + this.l10n.getConstant("close") + '"></button>') + ('<div class="' + SUBJECT_CLASS + '">' + eventTitle + "</div>") + ('<button class="' + EDIT_CLASS + '" title="' + this.l10n.getConstant("edit") + '"></button>') + ('<button class="' + DELETE_CLASS + '" title="' + this.l10n.getConstant("delete") + '"></button></div></div>');
      this.quickPopup.element.innerHTML = eventTemplate;
      var closeIcon = this.quickPopup.element.querySelector("." + CLOSE_CLASS);
      this.renderButton("e-flat e-round e-small", ICON + " " + CLOSE_ICON_CLASS, false, closeIcon, this.closeClick);
      var readonly2 = this.parent.activeViewOptions.readonly || eventObj[this.parent.eventFields.isReadonly];
      var editAction = !this.parent.eventSettings.allowEditing || readonly2;
      var deleteAction = !this.parent.eventSettings.allowDeleting || readonly2;
      var editIcon = this.quickPopup.element.querySelector("." + EDIT_CLASS);
      if (editIcon) {
        this.renderButton("e-flat e-round e-small", ICON + " " + EDIT_ICON_CLASS, editAction, editIcon, this.editClick);
      }
      var deleteIcon = this.quickPopup.element.querySelector("." + DELETE_CLASS);
      if (deleteIcon) {
        this.renderButton("e-flat e-round e-small", ICON + " " + DELETE_ICON_CLASS, deleteAction, deleteIcon, this.deleteClick);
      }
      this.beforeQuickPopupOpen(target, this.parent.eventBase.getPageCoordinates(e));
    };
    QuickPopups2.prototype.isCellBlocked = function(args) {
      var tempObj = {};
      tempObj[this.parent.eventFields.startTime] = this.parent.activeCellsData.startTime;
      tempObj[this.parent.eventFields.endTime] = this.parent.activeCellsData.endTime;
      tempObj[this.parent.eventFields.isAllDay] = this.parent.activeCellsData.isAllDay;
      if (this.parent.activeViewOptions.group.resources.length > 0) {
        var targetCell = args.element instanceof Array ? args.element[0] : args.element;
        var groupIndex = parseInt(targetCell.getAttribute("data-group-index"), 10);
        this.parent.resourceBase.setResourceValues(tempObj, isNaN(groupIndex) ? null : groupIndex);
      }
      return this.parent.eventBase.isBlockRange(tempObj);
    };
    QuickPopups2.prototype.cellClick = function(args) {
      var date = new Date(args.startTime.getTime());
      if (!this.parent.showQuickInfo || !this.parent.eventSettings.allowAdding || this.parent.currentView === "MonthAgenda" || this.isCellBlocked(args) || !this.parent.isMinMaxDate(new Date(date.setHours(0, 0, 0, 0)))) {
        this.quickPopupHide();
        return;
      }
      var targetEle = !isNullOrUndefined(args.event) ? args.event.target : args.element;
      if (this.parent.isAdaptive) {
        this.quickPopupHide();
        var newEventClone = this.parent.element.querySelector("." + NEW_EVENT_CLASS);
        if (isNullOrUndefined(newEventClone)) {
          newEventClone = createElement("div", {
            className: NEW_EVENT_CLASS,
            innerHTML: '<div class="e-title">+ ' + this.l10n.getConstant("newEvent") + "</div>"
          });
        }
        var targetCell = closest(targetEle, "." + WORK_CELLS_CLASS + ",." + ALLDAY_CELLS_CLASS);
        if (targetCell) {
          targetCell.appendChild(newEventClone);
        }
        return;
      }
      var target = closest(targetEle, "." + WORK_CELLS_CLASS + ",." + ALLDAY_CELLS_CLASS + ",." + HEADER_CELLS_CLASS);
      if (isNullOrUndefined(target) || targetEle.classList.contains(MORE_INDICATOR_CLASS)) {
        return;
      }
      var isSameTarget = this.quickPopup.relateTo === target;
      if (isSameTarget && this.quickPopup.element.classList.contains(POPUP_OPEN)) {
        var subjectElement_1 = this.quickPopup.element.querySelector("." + SUBJECT_CLASS);
        if (subjectElement_1) {
          subjectElement_1.focus();
        }
        return;
      } else if (this.quickPopup.element) {
        this.destroyPopupButtons("quickPopup");
      }
      var temp = {};
      temp[this.parent.eventFields.startTime] = this.parent.activeCellsData.startTime;
      temp[this.parent.eventFields.endTime] = this.parent.activeCellsData.endTime;
      temp[this.parent.eventFields.isAllDay] = this.parent.activeCellsData.isAllDay;
      var quickCellPopup = createElement("div", { className: CELL_POPUP_CLASS });
      quickCellPopup.appendChild(this.getPopupHeader("Cell", temp));
      quickCellPopup.appendChild(this.getPopupContent("Cell", args, temp));
      quickCellPopup.appendChild(this.getPopupFooter("Cell", temp));
      var subjectElement = quickCellPopup.querySelector("." + SUBJECT_CLASS);
      if (subjectElement) {
        Input.createInput({ element: subjectElement, properties: { placeholder: this.l10n.getConstant("addTitle") } });
      }
      if (!isNullOrUndefined(this.parent.eventSettings.fields.subject.default)) {
        subjectElement.value = this.parent.eventSettings.fields.subject.default;
      }
      var closeIcon = quickCellPopup.querySelector("." + CLOSE_CLASS);
      if (closeIcon) {
        this.renderButton("e-flat e-round e-small", ICON + " " + CLOSE_ICON_CLASS, false, closeIcon, this.popupClose);
      }
      var moreButton = quickCellPopup.querySelector("." + QUICK_POPUP_EVENT_DETAILS_CLASS);
      if (moreButton) {
        this.renderButton("e-flat", "", false, moreButton, this.detailsClick);
      }
      var saveButton = quickCellPopup.querySelector("." + EVENT_CREATE_CLASS);
      if (saveButton) {
        this.renderButton("e-flat e-primary", "", this.parent.activeViewOptions.readonly, saveButton, this.saveClick);
      }
      if (this.morePopup) {
        this.morePopup.hide();
      }
      this.quickPopup.content = quickCellPopup;
      this.quickPopup.relateTo = target;
      this.quickPopup.dataBind();
      this.beforeQuickPopupOpen(target, this.parent.eventBase.getPageCoordinates(args.event));
    };
    QuickPopups2.prototype.isSameEventClick = function(events) {
      var isSameTarget = this.quickPopup.relateTo === closest(events.element, "." + APPOINTMENT_CLASS);
      if (isSameTarget && this.quickPopup.element.classList.contains(POPUP_OPEN)) {
        var editIcon = this.quickPopup.element.querySelector("." + EDIT_CLASS);
        if (editIcon) {
          editIcon.focus();
        }
        if (!this.parent.isAdaptive) {
          var editButton = this.quickPopup.element.querySelector("." + EDIT_EVENT_CLASS);
          if (editButton) {
            editButton.focus();
          }
        }
        return true;
      }
      return false;
    };
    QuickPopups2.prototype.isQuickTemplate = function(type) {
      return this.parent.quickInfoTemplates.templateType === "Both" || this.parent.quickInfoTemplates.templateType === type;
    };
    QuickPopups2.prototype.eventClick = function(events) {
      if (this.parent.eventTooltip) {
        this.parent.eventTooltip.close();
      }
      if (!this.parent.showQuickInfo) {
        return;
      }
      if (this.parent.isAdaptive && this.isMultipleEventSelect) {
        this.updateTapHoldEventPopup(closest(events.element, "." + APPOINTMENT_CLASS));
      } else {
        var isSameTarget = this.isSameEventClick(events);
        this.parent.selectedElements = [];
        if (isSameTarget) {
          return;
        } else if (this.quickPopup.element) {
          this.destroyPopupButtons("quickPopup");
        }
        var eventData = events.event;
        var quickEventPopup = createElement("div", { className: EVENT_POPUP_CLASS });
        quickEventPopup.appendChild(this.getPopupHeader("Event", eventData));
        quickEventPopup.appendChild(this.getPopupContent("Event", events, eventData));
        quickEventPopup.appendChild(this.getPopupFooter("Event", eventData));
        var readonly2 = this.parent.activeViewOptions.readonly || eventData[this.parent.eventFields.isReadonly];
        var editAction = !this.parent.eventSettings.allowEditing || readonly2;
        var deleteAction = !this.parent.eventSettings.allowDeleting || readonly2;
        var editIcon = quickEventPopup.querySelector("." + EDIT_CLASS);
        var buttonClass = "e-flat e-round e-small";
        if (editIcon) {
          this.renderButton(buttonClass, ICON + " " + EDIT_ICON_CLASS, editAction, editIcon, this.editClick);
        }
        var deleteIcon = quickEventPopup.querySelector("." + DELETE_CLASS);
        if (deleteIcon) {
          this.renderButton(buttonClass, ICON + " " + DELETE_ICON_CLASS, deleteAction, deleteIcon, this.deleteClick);
        }
        var closeIcon = quickEventPopup.querySelector("." + CLOSE_CLASS);
        if (closeIcon) {
          this.renderButton(buttonClass, ICON + " " + CLOSE_ICON_CLASS, false, closeIcon, this.popupClose);
        }
        var editButton = quickEventPopup.querySelector("." + EDIT_EVENT_CLASS);
        if (editButton) {
          this.renderButton("e-flat e-primary", "", editAction, editButton, this.editClick);
        }
        var deleteButton = quickEventPopup.querySelector("." + DELETE_EVENT_CLASS);
        if (deleteButton) {
          this.renderButton("e-flat", "", deleteAction, deleteButton, this.deleteClick);
        }
        if (this.morePopup && !closest(events.element, "." + MORE_EVENT_WRAPPER_CLASS)) {
          this.morePopup.hide();
        }
        this.quickPopup.content = quickEventPopup;
        this.quickPopup.relateTo = this.parent.isAdaptive ? document.body : closest(events.element, "." + APPOINTMENT_CLASS);
        this.quickPopup.dataBind();
        this.beforeQuickPopupOpen(events.element, this.parent.eventBase.getPageCoordinates(events.originalEvent));
      }
    };
    QuickPopups2.prototype.getPopupHeader = function(headerType, headerData) {
      var headerTemplate = createElement("div", { className: POPUP_HEADER_CLASS });
      if (this.isQuickTemplate(headerType) && this.parent.quickInfoTemplates.header) {
        var headerArgs = extend({}, headerData, { elementType: headerType.toLowerCase() }, true);
        var templateId = this.parent.element.id;
        var headerTemp = [].slice.call(this.parent.getQuickInfoTemplatesHeader()(headerArgs, this.parent, "header", templateId + "_headerTemplate", false));
        append2([].slice.call(headerTemp), headerTemplate);
      } else {
        var header = void 0;
        var args = void 0;
        switch (headerType) {
          case "Cell":
            header = '<div class="' + POPUP_HEADER_ICON_WRAPPER + '"><button class="' + CLOSE_CLASS + '" title=' + ('"' + this.l10n.getConstant("close") + '"></button></div>');
            break;
          case "Event":
            args = this.getFormattedString(headerData);
            header = '<div class="' + POPUP_HEADER_ICON_WRAPPER + '">' + ('<button class="' + (EDIT_CLASS + " " + ICON) + '" title="' + this.l10n.getConstant("edit") + '"></button>') + ('<button class="' + (DELETE_CLASS + " " + ICON) + '" title="' + this.l10n.getConstant("delete") + '"></button>') + ('<button class="' + CLOSE_CLASS + '" title="' + this.l10n.getConstant("close") + '"></button></div>') + ('<div class="' + SUBJECT_WRAP + '"><div class="' + SUBJECT_CLASS + " " + TEXT_ELLIPSIS + '" ') + ('title="' + (args.eventSubject ? args.eventSubject.replaceAll('"', "'") : args.eventSubject) + '"></div></div >');
            break;
        }
        var templateWrapper = createElement("div", { innerHTML: header });
        if (headerType === "Event") {
          var subjectText = templateWrapper.querySelector("." + SUBJECT_CLASS);
          this.parent.sanitize(args.eventSubject, subjectText);
        }
        append2([].slice.call(templateWrapper.childNodes), headerTemplate);
      }
      return headerTemplate;
    };
    QuickPopups2.prototype.getPopupContent = function(type, args, data) {
      var contentTemplate = createElement("div", { className: POPUP_CONTENT_CLASS });
      if (this.isQuickTemplate(type) && this.parent.quickInfoTemplates.content) {
        var contentArgs = extend({}, data, { elementType: type.toLowerCase() }, true);
        var templateId = this.parent.element.id;
        var contentTemp = [].slice.call(this.parent.getQuickInfoTemplatesContent()(contentArgs, this.parent, "content", templateId + "_contentTemplate", false));
        append2([].slice.call(contentTemp), contentTemplate);
      } else {
        var content = void 0;
        var cellDetails = void 0;
        var argsData = void 0;
        var resourceText = this.getResourceText(args, type.toLowerCase());
        switch (type) {
          case "Cell":
            cellDetails = this.getFormattedString(data);
            content = '<table class="' + POPUP_TABLE_CLASS + '"><tbody><tr><td><form class="' + FORM_CLASS + '" onsubmit=' + ('"return false;"><input class="' + SUBJECT_CLASS + " " + EVENT_FIELD$1 + '" type="text" name=') + ('"' + this.parent.eventFields.subject + '" /></form></td></tr><tr><td><div class="' + DATE_TIME_CLASS + '">') + ('<div class="' + DATE_TIME_ICON_CLASS + " " + ICON + '"></div><div class="' + DATE_TIME_DETAILS_CLASS + " ") + (TEXT_ELLIPSIS + '">' + cellDetails.details + "</div></div>") + ((this.parent.activeViewOptions.group.resources.length > 0 ? '<div class="' + RESOURCE_CLASS + '">' + ('<div class="' + RESOURCE_ICON_CLASS + " " + ICON + ' "></div><div class="' + RESOURCE_DETAILS_CLASS + " ") + (TEXT_ELLIPSIS + '"></div></div>') : "") + "</td></tr></tbody></table>");
            break;
          case "Event":
            argsData = this.getFormattedString(data);
            content = '<div class="' + DATE_TIME_CLASS + '"><div class="' + DATE_TIME_ICON_CLASS + " " + ICON + '"></div><div class="' + DATE_TIME_WRAPPER_CLASS + " " + TEXT_ELLIPSIS + '"><div class="' + DATE_TIME_DETAILS_CLASS + " " + TEXT_ELLIPSIS + '">' + argsData.details + "</div>";
            if (data[this.parent.eventFields.recurrenceRule]) {
              content += '<div class="' + RECURRENCE_SUMMARY_CLASS + " " + TEXT_ELLIPSIS + '">' + this.getRecurrenceSummary(data) + "</div>";
            }
            content += "</div></div>";
            if (data[this.parent.eventFields.location]) {
              content += '<div class="' + LOCATION_CLASS + '"><div class="' + LOCATION_ICON_CLASS + " " + ICON + '"></div><div class="' + LOCATION_DETAILS_CLASS + " " + TEXT_ELLIPSIS + '"></div></div>';
            }
            if (data[this.parent.eventFields.startTimezone] || data[this.parent.eventFields.endTimezone]) {
              content += '<div class="' + TIME_ZONE_CLASS + '"><div class="' + TIME_ZONE_ICON_CLASS + " " + ICON + '"></div><div class="' + TIME_ZONE_DETAILS_CLASS + " " + TEXT_ELLIPSIS + '">' + this.getTimezone(data) + "</div></div>";
            }
            if (data[this.parent.eventFields.description]) {
              content += '<div class="' + DESCRIPTION_CLASS + '"><div class="' + DESCRIPTION_ICON_CLASS + " " + ICON + '"></div><div class="' + DESCRIPTION_DETAILS_CLASS + " " + TEXT_ELLIPSIS + '"></div></div>';
            }
            if (this.parent.resourceCollection.length > 0) {
              content += '<div class="' + RESOURCE_CLASS + '"><div class="' + RESOURCE_ICON_CLASS + " " + ICON + '"></div><div class="' + RESOURCE_DETAILS_CLASS + " " + TEXT_ELLIPSIS + '"></div></div>';
            }
            break;
        }
        var templateWrapper = createElement("div", { innerHTML: content });
        if (data[this.parent.eventFields.location]) {
          var locationDetails = templateWrapper.querySelector("." + LOCATION_DETAILS_CLASS);
          if (!isNullOrUndefined(locationDetails)) {
            this.parent.sanitize(data[this.parent.eventFields.location], locationDetails);
          }
        }
        if (data[this.parent.eventFields.description]) {
          var descriptionDetails = templateWrapper.querySelector("." + DESCRIPTION_DETAILS_CLASS);
          if (!isNullOrUndefined(descriptionDetails)) {
            this.parent.sanitize(data[this.parent.eventFields.description], descriptionDetails);
          }
        }
        if (resourceText) {
          var resourceDetails = templateWrapper.querySelector("." + RESOURCE_DETAILS_CLASS);
          if (!isNullOrUndefined(resourceDetails)) {
            this.parent.sanitize(resourceText, resourceDetails);
          }
        }
        append2([].slice.call(templateWrapper.childNodes), contentTemplate);
      }
      return contentTemplate;
    };
    QuickPopups2.prototype.getPopupFooter = function(footerType, footerData) {
      var footerTemplate = createElement("div", { className: POPUP_FOOTER_CLASS });
      if (this.isQuickTemplate(footerType) && this.parent.quickInfoTemplates.footer) {
        var footerArgs = extend({}, footerData, { elementType: footerType.toLowerCase() }, true);
        var templateId = this.parent.element.id;
        var footerTemp = [].slice.call(this.parent.getQuickInfoTemplatesFooter()(footerArgs, this.parent, "footer", templateId + "_footerTemplate", false));
        append2([].slice.call(footerTemp), footerTemplate);
      } else {
        var footer = void 0;
        switch (footerType) {
          case "Cell":
            footer = '<button class="' + (QUICK_POPUP_EVENT_DETAILS_CLASS + " " + TEXT_ELLIPSIS) + '" title=' + ('"' + this.l10n.getConstant("moreDetails") + '">' + this.l10n.getConstant("moreDetails") + "</button>") + ('<button class="' + EVENT_CREATE_CLASS + " " + TEXT_ELLIPSIS + '" title="' + this.l10n.getConstant("save") + '">') + (this.l10n.getConstant("save") + "</button>");
            break;
          case "Event":
            footer = this.parent.isAdaptive ? "" : '<button class="' + EDIT_EVENT_CLASS + " " + (TEXT_ELLIPSIS + '" title="' + this.l10n.getConstant("edit") + '">' + this.l10n.getConstant("edit") + "</button>") + ('<button class="' + DELETE_EVENT_CLASS + " " + TEXT_ELLIPSIS + '" title="' + this.l10n.getConstant("delete") + '">') + (this.l10n.getConstant("delete") + "</button>");
            break;
        }
        var templateWrapper = createElement("div", { innerHTML: footer });
        append2([].slice.call(templateWrapper.childNodes), footerTemplate);
      }
      return footerTemplate;
    };
    QuickPopups2.prototype.getResourceText = function(args, type) {
      if (this.parent.resourceCollection.length === 0) {
        return null;
      }
      var resourceValue = "";
      if (this.parent.activeViewOptions.group.resources.length === 0) {
        var resourceCollection_1 = this.parent.resourceBase.resourceCollection.slice(-1)[0];
        var resourceData = resourceCollection_1.dataSource;
        if (type === "event") {
          var eventData = args.event;
          var _loop_2 = function(data2) {
            var resourceId = eventData[resourceCollection_1.field];
            if (resourceId instanceof Array) {
              if (resourceId.indexOf(data2[resourceCollection_1.idField]) > -1) {
                var id_1 = resourceId[resourceId.indexOf(data2[resourceCollection_1.idField])];
                var resource = resourceData.filter(function(e) {
                  return e[resourceCollection_1.idField] === id_1;
                })[0];
                resourceValue += resourceValue === "" ? resource[resourceCollection_1.textField] : ", " + resource[resourceCollection_1.textField];
              }
            } else if (data2[resourceCollection_1.idField] === resourceId) {
              resourceValue = data2[resourceCollection_1.textField].toString();
            }
          };
          for (var _i = 0, resourceData_1 = resourceData; _i < resourceData_1.length; _i++) {
            var data = resourceData_1[_i];
            _loop_2(data);
          }
        } else {
          resourceValue = resourceData[0][resourceCollection_1.textField].toString();
        }
      } else {
        if (type === "event") {
          var eventData = args.event;
          var resourceData = void 0;
          var lastResource_1;
          for (var i = this.parent.resourceBase.resourceCollection.length - 1; i >= 0; i--) {
            resourceData = eventData[this.parent.resourceBase.resourceCollection[parseInt(i.toString(), 10)].field];
            if (!isNullOrUndefined(resourceData)) {
              lastResource_1 = this.parent.resourceBase.resourceCollection[parseInt(i.toString(), 10)];
              break;
            }
          }
          if (!Array.isArray(resourceData)) {
            resourceData = [resourceData];
          }
          var resNames_1 = [];
          var lastResourceData_1 = lastResource_1.dataSource;
          resourceData.forEach(function(value) {
            var text;
            var i2 = findIndexInData(lastResourceData_1, lastResource_1.idField, value);
            if (i2 > -1) {
              text = lastResourceData_1[parseInt(i2.toString(), 10)][lastResource_1.textField];
            }
            if (text) {
              resNames_1.push(text);
            }
          });
          resourceValue = resNames_1.join(", ");
        } else {
          var argsData = args;
          var groupIndex = !isNullOrUndefined(argsData.groupIndex) ? argsData.groupIndex : 0;
          var resourceDetails = this.parent.resourceBase.lastResourceLevel[parseInt(groupIndex.toString(), 10)];
          resourceValue = resourceDetails.resourceData[resourceDetails.resource.textField];
        }
      }
      return resourceValue;
    };
    QuickPopups2.prototype.getFormattedString = function(eventData) {
      var fields = this.parent.eventFields;
      var eventSubject = eventData[fields.subject] || this.l10n.getConstant("noTitle");
      var startDate = eventData[fields.startTime];
      var endDate = eventData[fields.endTime];
      var startDateDetails = this.getDateFormat(startDate, "long");
      var endDateDetails = eventData[fields.isAllDay] && endDate.getHours() === 0 && endDate.getMinutes() === 0 ? this.getDateFormat(addDays(new Date(endDate.getTime()), -1), "long") : this.getDateFormat(endDate, "long");
      var startTimeDetail = this.parent.getTimeString(startDate);
      var endTimeDetail = this.parent.getTimeString(endDate);
      var details = "";
      var spanLength = endDate.getDate() !== startDate.getDate() && (endDate.getTime() - startDate.getTime()) / (60 * 60 * 1e3) < 24 ? 1 : 0;
      if (eventData[fields.isAllDay]) {
        details = startDateDetails + " (" + this.l10n.getConstant("allDay") + ")";
        if ((getUniversalTime(endDate) - getUniversalTime(startDate)) / MS_PER_DAY > 1) {
          details += "&nbsp;-&nbsp;" + endDateDetails + " (" + this.l10n.getConstant("allDay") + ")";
        }
      } else if ((getUniversalTime(endDate) - getUniversalTime(startDate)) / MS_PER_DAY >= 1 || spanLength > 0) {
        details = startDateDetails + " (" + startTimeDetail + ")&nbsp;-&nbsp;" + endDateDetails + " (" + endTimeDetail + ")";
      } else {
        details = startDateDetails + " (" + (startTimeDetail + "&nbsp;-&nbsp;" + endTimeDetail) + ")";
      }
      return { eventSubject, details };
    };
    QuickPopups2.prototype.moreEventClick = function(data, endDate, groupIndex) {
      var _this = this;
      this.quickPopupHide(true);
      var moreEventContentEle = this.morePopup.element.querySelector("." + MORE_EVENT_CONTENT_CLASS);
      if (moreEventContentEle) {
        remove(moreEventContentEle);
      }
      var selectedDate = data.date.getTime().toString();
      var target = closest(data.element, "." + MORE_INDICATOR_CLASS + ",." + WORK_CELLS_CLASS);
      var day = this.parent.globalize.formatDate(data.date, { format: "E", calendar: this.parent.getCalendarMode() });
      this.morePopup.element.querySelector("." + MORE_EVENT_HEADER_DAY_CLASS).innerHTML = capitalizeFirstWord(day, "single");
      var dateElement = this.morePopup.element.querySelector("." + MORE_EVENT_HEADER_DATE_CLASS);
      dateElement.innerHTML = this.getDateFormat(data.date, "d");
      dateElement.setAttribute("data-date", selectedDate);
      dateElement.setAttribute("data-end-date", endDate.getTime().toString());
      var groupOrder;
      if (!isNullOrUndefined(groupIndex)) {
        dateElement.setAttribute("data-group-index", groupIndex);
        groupOrder = this.parent.resourceBase.lastResourceLevel[parseInt(groupIndex, 10)].groupOrder;
      }
      var moreEventElements = this.createMoreEventList(data.event, groupOrder, groupIndex);
      this.morePopup.element.querySelector("." + MORE_EVENT_POPUP_CLASS).appendChild(moreEventElements);
      removeClass(this.morePopup.element.querySelector("." + MORE_EVENT_DATE_HEADER_CLASS).childNodes, CURRENTDATE_CLASS);
      if (resetTime(data.date).getTime() === resetTime(this.parent.getCurrentTime()).getTime()) {
        addClass(this.morePopup.element.querySelector("." + MORE_EVENT_DATE_HEADER_CLASS).childNodes, CURRENTDATE_CLASS);
      }
      if (!this.parent.isAdaptive) {
        if (this.parent.currentView.indexOf("Timeline") !== -1) {
          var gIndex = target.getAttribute("data-group-index");
          var startDate = new Date(parseInt(target.getAttribute("data-start-date"), 10));
          startDate.setHours(startDate.getHours(), startDate.getMinutes(), 0);
          var tdDate = startDate.getTime().toString();
          if (isNullOrUndefined(gIndex)) {
            this.morePopup.relateTo = this.parent.element.querySelector("." + CONTENT_WRAP_CLASS + ' tbody tr td[data-date="' + tdDate + '"]');
          } else {
            this.morePopup.relateTo = this.parent.element.querySelector("." + CONTENT_WRAP_CLASS + ' tbody tr td[data-group-index="' + gIndex + '"][data-date="' + tdDate + '"]');
            if (isNullOrUndefined(this.morePopup.relateTo)) {
              var workCells = [].slice.call(this.parent.element.querySelectorAll("." + CONTENT_WRAP_CLASS + ' tbody tr td[data-group-index="' + gIndex + '"]'));
              for (var i = 0; i < workCells.length; i++) {
                var date = workCells[parseInt(i.toString(), 10)].getAttribute("data-date");
                if (date < tdDate) {
                  this.morePopup.relateTo = workCells[parseInt(i.toString(), 10)];
                }
              }
            }
          }
        } else {
          this.morePopup.relateTo = closest(target, "." + WORK_CELLS_CLASS);
        }
      }
      this.parent.renderTemplates(function() {
        var eventProp = {
          type: "EventContainer",
          cancel: false,
          element: _this.morePopup.element,
          data
        };
        _this.parent.trigger(popupOpen, eventProp, function(popupArgs) {
          if (!popupArgs.cancel) {
            _this.morePopup.show();
          }
        });
      });
    };
    QuickPopups2.prototype.saveClick = function(event) {
      this.applyFormValidation();
      this.dialogEvent = event;
      this.isCrudAction = true;
      this.quickPopupHide();
    };
    QuickPopups2.prototype.detailsClick = function(event) {
      var subjectEle = this.quickPopup.element.querySelector("." + SUBJECT_CLASS);
      if (subjectEle && subjectEle.value !== "") {
        extend(this.parent.activeCellsData, { subject: subjectEle.value });
      }
      this.dialogEvent = event;
      this.isCrudAction = false;
      this.fieldValidator.destroyToolTip();
      this.quickPopupHide();
      this.parent.eventWindow.openEditor(this.parent.activeCellsData, "Add");
    };
    QuickPopups2.prototype.editClick = function(event) {
      this.dialogEvent = event;
      this.quickPopupHide(true);
      var data = this.parent.activeEventData.event;
      this.parent.currentAction = "EditSeries";
      if (!isNullOrUndefined(data[this.parent.eventFields.recurrenceRule])) {
        this.parent.currentAction = "EditOccurrence";
        this.openRecurrenceAlert();
      } else {
        this.parent.eventWindow.openEditor(data, this.parent.currentAction);
      }
    };
    QuickPopups2.prototype.deleteClick = function(event) {
      this.dialogEvent = event;
      this.quickPopupHide(true);
      this.parent.currentAction = "Delete";
      if (this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule]) {
        this.openRecurrenceAlert();
      } else {
        this.openDeleteAlert();
      }
    };
    QuickPopups2.prototype.updateMoreEventContent = function() {
      if (this.morePopup.element.classList.contains("e-popup-close")) {
        return;
      }
      var moreEventContentEle = this.morePopup.element.querySelector("." + MORE_EVENT_CONTENT_CLASS);
      if (moreEventContentEle) {
        remove(moreEventContentEle);
      }
      var dateElement = this.morePopup.element.querySelector("." + MORE_EVENT_HEADER_DATE_CLASS);
      var startDate = new Date(parseInt(dateElement.getAttribute("data-date"), 10));
      var endDate = new Date(parseInt(dateElement.getAttribute("data-end-date"), 10));
      var groupIndex = dateElement.getAttribute("data-group-index");
      var data;
      var groupOrder;
      if (!isNullOrUndefined(groupIndex)) {
        data = this.parent.resourceBase.lastResourceLevel[parseInt(groupIndex, 10)];
        groupOrder = data.groupOrder;
      }
      var events = this.parent.eventBase.filterEvents(startDate, endDate, this.parent.eventsProcessed, data);
      var moreElement = this.createMoreEventList(events, groupOrder, groupIndex);
      this.morePopup.element.querySelector("." + MORE_EVENT_POPUP_CLASS).appendChild(moreElement);
    };
    QuickPopups2.prototype.closeClick = function(event) {
      this.dialogEvent = event;
      if (this.parent.currentView === "Year" && this.parent.activeCellsData && this.parent.activeCellsData.element) {
        this.parent.selectCell(this.parent.activeCellsData.element);
      }
      this.quickPopupHide();
      this.morePopup.hide();
    };
    QuickPopups2.prototype.dialogButtonClick = function(event) {
      this.dialogEvent = event;
      this.quickDialog.hide();
      var target = event.target;
      var cancelBtn = this.quickDialog.element.querySelector("." + QUICK_DIALOG_ALERT_CANCEL);
      var eventData = this.parent.activeEventData.event;
      if (target.classList.contains(QUICK_DIALOG_OCCURRENCE_CLASS)) {
        this.parent.currentAction = this.parent.currentAction === "Delete" ? "DeleteOccurrence" : "EditOccurrence";
        switch (this.parent.currentAction) {
          case "EditOccurrence":
            this.parent.eventWindow.openEditor(eventData, this.parent.currentAction);
            break;
          case "DeleteOccurrence":
            this.parent.crudModule.deleteEvent(eventData, this.parent.currentAction);
            break;
        }
      } else if (target.classList.contains(QUICK_DIALOG_FOLLOWING_EVENTS_CLASS)) {
        this.parent.currentAction = this.parent.currentAction === "Delete" ? "DeleteFollowingEvents" : "EditFollowingEvents";
        switch (this.parent.currentAction) {
          case "EditFollowingEvents":
            this.parent.eventWindow.openEditor(eventData, this.parent.currentAction);
            break;
          case "DeleteFollowingEvents":
            this.parent.crudModule.deleteEvent(eventData, this.parent.currentAction);
            break;
        }
      } else if (target.classList.contains(QUICK_DIALOG_SERIES_CLASS)) {
        this.parent.currentAction = this.parent.currentAction === "Delete" ? "DeleteSeries" : "EditSeries";
        switch (this.parent.currentAction) {
          case "EditSeries":
            this.parent.eventWindow.openEditor(this.parent.eventBase.getParentEvent(eventData, true), this.parent.currentAction);
            break;
          case "DeleteSeries":
            this.parent.crudModule.deleteEvent(eventData, this.parent.currentAction);
            break;
        }
      } else if (target.classList.contains(QUICK_DIALOG_DELETE_CLASS)) {
        this.parent.crudModule.deleteEvent(eventData, this.parent.currentAction);
      } else if (!cancelBtn.classList.contains(DISABLE_CLASS) && (target.classList.contains(QUICK_DIALOG_ALERT_OK) || target.classList.contains(QUICK_DIALOG_ALERT_CANCEL) && !cancelBtn.classList.contains(QUICK_DIALOG_CANCEL_CLASS))) {
        this.parent.uiStateValues.isIgnoreOccurrence = target.classList.contains(QUICK_DIALOG_ALERT_CANCEL);
        this.parent.eventWindow.eventSave(event, this.l10n.getConstant("ok"));
      }
    };
    QuickPopups2.prototype.updateTapHoldEventPopup = function(target) {
      var selectedElements = this.parent.eventBase.getSelectedEventElements(target);
      this.parent.activeEventData = this.parent.eventBase.getSelectedEvents();
      if (selectedElements.length > 0) {
        var eventObj = this.parent.eventBase.getEventByGuid(selectedElements[0].getAttribute("data-guid"));
        var titleContent = selectedElements.length === 1 ? eventObj[this.parent.eventFields.subject] || this.l10n.getConstant("noTitle") : "(" + selectedElements.length + ")&nbsp;" + this.l10n.getConstant("selectedItems");
        this.quickPopup.element.querySelector("." + SUBJECT_CLASS).innerHTML = titleContent;
        if (selectedElements.length > 1) {
          addClass([this.quickPopup.element.querySelector("." + EDIT_ICON_CLASS)], HIDDEN_CLASS);
        } else {
          removeClass([this.quickPopup.element.querySelector("." + EDIT_ICON_CLASS)], HIDDEN_CLASS);
        }
      } else {
        this.parent.selectedElements = [];
        this.quickPopupHide();
      }
    };
    QuickPopups2.prototype.getTimezone = function(event) {
      var zoneDetails = "";
      zoneDetails += event[this.parent.eventFields.startTimezone] || "";
      zoneDetails += zoneDetails === "" ? "" : " - ";
      zoneDetails += event[this.parent.eventFields.endTimezone] || "";
      return zoneDetails;
    };
    QuickPopups2.prototype.getRecurrenceSummary = function(event) {
      var recurrenceEditor = this.parent.eventWindow.getRecurrenceEditorInstance();
      if (recurrenceEditor) {
        var ruleSummary = recurrenceEditor.getRuleSummary(event[this.parent.eventFields.recurrenceRule]);
        return ruleSummary.charAt(0).toUpperCase() + ruleSummary.slice(1);
      }
      return "";
    };
    QuickPopups2.prototype.getDateFormat = function(date, skeletonString) {
      return capitalizeFirstWord(this.parent.globalize.formatDate(date, { skeleton: skeletonString, calendar: this.parent.getCalendarMode() }), "single");
    };
    QuickPopups2.prototype.getDataFromTarget = function(target) {
      if (target.classList.contains(APPOINTMENT_CLASS)) {
        return this.parent.activeEventData.event;
      }
      var eventObj = {
        startTime: this.parent.activeCellsData.startTime,
        endTime: this.parent.activeCellsData.endTime,
        isAllDay: this.parent.activeCellsData.isAllDay,
        groupIndex: this.parent.activeCellsData.groupIndex
      };
      var cellsData = this.parent.activeCellsData;
      this.parent.eventWindow.convertToEventData(cellsData, eventObj);
      return eventObj;
    };
    QuickPopups2.prototype.beforeQuickDialogClose = function(e) {
      var _this = this;
      var args = {
        event: e.event || this.dialogEvent,
        type: isNullOrUndefined(this.parent.activeEventData.event) ? "ValidationAlert" : !isNullOrUndefined(this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule]) ? "RecurrenceAlert" : "DeleteAlert",
        cancel: false,
        data: this.parent.activeEventData.event,
        element: this.quickDialog.element
      };
      this.parent.trigger(popupClose, args, function(popupCloseArgs) {
        if (!popupCloseArgs.cancel) {
          _this.parent.eventBase.focusElement(true);
        }
      });
    };
    QuickPopups2.prototype.beforeQuickPopupOpen = function(target, originalEvent) {
      var _this = this;
      this.parent.renderTemplates(function() {
        var isEventPopup = _this.quickPopup.element.querySelector("." + EVENT_POPUP_CLASS);
        var popupType = _this.parent.isAdaptive ? isEventPopup ? "ViewEventInfo" : "EditEventInfo" : "QuickInfo";
        var eventProp = {
          type: popupType,
          cancel: false,
          data: extend({}, _this.getDataFromTarget(target), null, true),
          target,
          element: _this.quickPopup.element
        };
        _this.parent.trigger(popupOpen, eventProp, function(popupArgs) {
          if (popupArgs.cancel) {
            _this.quickPopupHide();
            _this.destroyPopupButtons("quickPopup");
            if (popupArgs.element.classList.contains(POPUP_OPEN)) {
              _this.quickPopupClose();
            }
            removeChildren(_this.quickPopup.element);
            _this.isMultipleEventSelect = false;
          } else {
            var display = _this.quickPopup.element.style.display;
            _this.quickPopup.element.style.display = "block";
            if (_this.parent.isAdaptive) {
              _this.quickPopup.element.removeAttribute("style");
              _this.quickPopup.element.style.display = "block";
              _this.quickPopup.element.style.height = formatUnit(popupType === "EditEventInfo" ? 65 : window.innerHeight);
            } else {
              var isVirtualScroll = _this.parent.virtualScrollModule && _this.parent.virtualScrollModule.isHorizontalScroll && !isNullOrUndefined(closest(target, "." + CONTENT_TABLE_CLASS));
              var conTable = _this.parent.element.querySelector("." + CONTENT_WRAP_CLASS + " table");
              _this.quickPopup.offsetX = isVirtualScroll && !_this.parent.enableRtl ? getTranslateX(conTable) + 10 : 10;
              _this.quickPopup.offsetY = _this.parent.virtualScrollModule && !_this.parent.virtualScrollModule.isHorizontalScroll ? _this.quickPopup.offsetY : 0;
              _this.quickPopup.collision = { X: _this.parent.enableRtl ? "flip" : "none", Y: "fit" };
              _this.quickPopup.position = { X: _this.parent.enableRtl ? "left" : "right", Y: _this.parent.enableRtl ? "bottom" : "top" };
              _this.quickPopup.dataBind();
              _this.quickPopup.refreshPosition(null, true);
              var collide = isCollide(_this.quickPopup.element, _this.parent.element);
              if (collide.indexOf(_this.parent.enableRtl ? "left" : "right") > -1) {
                _this.quickPopup.offsetX = -target.offsetWidth - 10 - _this.quickPopup.element.offsetWidth;
                if (isVirtualScroll && !_this.parent.enableRtl) {
                  _this.quickPopup.offsetX = getTranslateX(conTable) + _this.quickPopup.offsetX;
                }
                _this.quickPopup.dataBind();
                _this.quickPopup.refreshPosition(null, true);
                var leftCollide = isCollide(_this.quickPopup.element, _this.parent.element);
                if (leftCollide.indexOf("left") > -1) {
                  _this.quickPopup.position = { X: "center", Y: "center" };
                  _this.quickPopup.collision = { X: "fit", Y: "fit" };
                  _this.quickPopup.offsetX = -(_this.quickPopup.element.offsetWidth / 2);
                  _this.quickPopup.dataBind();
                }
              }
              if (_this.parent.virtualScrollModule && !_this.parent.virtualScrollModule.isHorizontalScroll && (collide.indexOf("top") > -1 || collide.indexOf("bottom") > -1)) {
                var translateY = getTranslateY(conTable);
                _this.quickPopup.offsetY = translateY;
                _this.quickPopup.dataBind();
                _this.quickPopup.refreshPosition(null, true);
              }
              if (_this.quickPopup.position.X === "center" && _this.quickPopup.position.Y === "center" && !isNullOrUndefined(originalEvent) && originalEvent.clientX && originalEvent.clientY) {
                var clientX = originalEvent.clientX;
                var clientY = originalEvent.clientY;
                var targetRect = target.getBoundingClientRect();
                var offsetY = originalEvent.offsetY || Math.ceil(clientY - targetRect.y);
                var previousOffset = _this.quickPopup.offsetY;
                var collision = isCollide(_this.quickPopup.element, target);
                var popupRect2 = _this.quickPopup.element.getBoundingClientRect();
                var targetEle = document.elementFromPoint(clientX, clientY);
                if (collision.indexOf("top") > -1 || collision.indexOf("bottom") > -1 || closest(targetEle, "." + POPUP_WRAPPER_CLASS)) {
                  if (popupRect2.top <= clientY && clientY <= popupRect2.top + popupRect2.height) {
                    _this.quickPopup.offsetY = previousOffset - popupRect2.height - 10;
                    _this.quickPopup.dataBind();
                    collision = isCollide(_this.quickPopup.element, _this.parent.element);
                    if (collision.indexOf("top") > -1) {
                      _this.quickPopup.offsetY = previousOffset + offsetY + 10;
                      _this.quickPopup.dataBind();
                    }
                  } else if (isCollide(_this.quickPopup.element, _this.parent.element).indexOf("bottom") > -1) {
                    _this.quickPopup.offsetY = previousOffset - offsetY - Math.ceil(popupRect2.height) - 10;
                    _this.quickPopup.dataBind();
                  }
                }
              }
            }
            if (isEventPopup) {
              _this.applyEventColor();
            }
            _this.quickPopup.element.style.display = display;
            _this.quickPopup.dataBind();
            _this.quickPopup.show();
          }
        });
      });
    };
    QuickPopups2.prototype.applyEventColor = function() {
      var colorField = "";
      if (this.parent.currentView === "Agenda" || this.parent.currentView === "MonthAgenda") {
        colorField = this.parent.enableRtl ? "border-right-color" : "border-left-color";
      } else {
        colorField = "background-color";
      }
      var color = this.parent.activeEventData.element.style[colorField];
      if (color === "") {
        return;
      }
      var colorEle = this.quickPopup.element.querySelector("." + POPUP_HEADER_CLASS);
      var footerEle = this.quickPopup.element.querySelector("." + POPUP_FOOTER_CLASS);
      if (footerEle && footerEle.offsetParent) {
        colorEle = this.quickPopup.element.querySelector("." + SUBJECT_CLASS);
        if (colorEle) {
          colorEle.style.borderLeftColor = color;
          color = "rgba(" + color.match(/\d+/g).join() + ",0.3)";
        }
      }
      if (colorEle) {
        colorEle.style.backgroundColor = color;
      }
    };
    QuickPopups2.prototype.quickPopupOpen = function() {
      if (this.parent.isAdaptive) {
        this.quickPopup.element.style.top = "0px";
        return;
      }
      if (this.quickPopup.element.querySelector("." + CELL_POPUP_CLASS)) {
        var subjectElement = this.quickPopup.element.querySelector("." + SUBJECT_CLASS);
        if (subjectElement) {
          subjectElement.focus();
        }
      } else {
        var editElement = this.quickPopup.element.querySelector("." + EDIT_EVENT_CLASS);
        if (editElement) {
          editElement.focus();
        }
        var editIcon = this.quickPopup.element.querySelector("." + EDIT_CLASS);
        if (editIcon) {
          editIcon.focus();
        }
      }
    };
    QuickPopups2.prototype.quickPopupClose = function() {
      this.parent.eventBase.focusElement();
      this.quickPopup.relateTo = "." + WORK_CELLS_CLASS;
      this.fieldValidator.destroyToolTip();
      if (this.quickPopup.element.querySelectorAll(".e-formvalidator").length) {
        this.fieldValidator.destroy();
      }
      this.destroyPopupButtons("quickPopup");
      removeChildren(this.quickPopup.element);
    };
    QuickPopups2.prototype.morePopupOpen = function() {
      if (this.parent.isAdaptive) {
        this.morePopup.element.style.top = "0px";
        this.morePopup.element.style.left = "0px";
        this.morePopup.element.style.height = formatUnit(window.innerHeight);
        return;
      }
      this.morePopup.element.querySelector("." + MORE_EVENT_HEADER_DATE_CLASS).focus();
      this.morePopup.refreshPosition();
    };
    QuickPopups2.prototype.morePopupClose = function() {
      var moreWrapper = this.parent.element.querySelector("." + MORE_EVENT_WRAPPER_CLASS);
      if (moreWrapper) {
        remove(moreWrapper);
      }
    };
    QuickPopups2.prototype.popupClose = function(event) {
      this.dialogEvent = event;
      this.isCrudAction = false;
      this.quickPopupHide(true);
    };
    QuickPopups2.prototype.quickPopupHide = function(hideAnimation) {
      var _this = this;
      if (!this.quickPopup.element.classList.contains(POPUP_OPEN)) {
        return;
      }
      var isCellPopup = this.quickPopup.element.querySelector("." + CELL_POPUP_CLASS);
      var popupData;
      if (isCellPopup) {
        var formvalidator = this.quickPopup.element.querySelector(".e-formvalidator");
        if (this.isCrudAction && formvalidator && !formvalidator.ej2_instances[0].validate()) {
          return;
        }
        var fields = this.parent.eventFields;
        var saveObj = this.parent.eventWindow.getObjectFromFormData(POPUP_WRAPPER_CLASS);
        this.parent.eventWindow.setDefaultValueToObject(saveObj);
        saveObj[fields.id] = this.parent.eventBase.getEventMaxID();
        saveObj[fields.startTime] = this.parent.activeCellsData.startTime;
        saveObj[fields.endTime] = this.parent.activeCellsData.endTime;
        saveObj[fields.isAllDay] = this.parent.activeCellsData.isAllDay;
        if (this.parent.resourceBase) {
          this.parent.resourceBase.setResourceValues(saveObj);
        }
        popupData = saveObj;
      } else {
        popupData = this.parent.activeEventData.event;
      }
      var isEventPopup = this.quickPopup.element.querySelector("." + EVENT_POPUP_CLASS);
      var args = {
        event: this.dialogEvent,
        type: this.parent.isAdaptive ? isEventPopup ? "ViewEventInfo" : "EditEventInfo" : "QuickInfo",
        cancel: false,
        data: popupData,
        element: this.quickPopup.element,
        target: isCellPopup ? this.parent.activeCellsData.element : this.parent.activeEventData.element
      };
      this.parent.trigger(popupClose, args, function(popupCloseArgs) {
        if (!popupCloseArgs.cancel) {
          if (_this.quickPopup.element.classList.contains("e-popup-open")) {
            if (isCellPopup && _this.isCrudAction) {
              _this.parent.currentAction = "Add";
              _this.parent.crudModule.addEvent(popupCloseArgs.data);
            }
            if (hideAnimation) {
              var animation = _this.quickPopup.hideAnimation;
              _this.quickPopup.hideAnimation = null;
              _this.quickPopup.hide();
              _this.quickPopup.hideAnimation = animation;
            } else {
              _this.quickPopup.hide();
            }
            _this.isMultipleEventSelect = false;
            _this.isCrudAction = false;
          }
        }
      });
    };
    QuickPopups2.prototype.navigationClick = function(e) {
      var navigateEle = closest(e.target, "." + NAVIGATE_CLASS);
      if (!isNullOrUndefined(navigateEle)) {
        var date = this.parent.getDateFromElement(e.currentTarget);
        if (!isNullOrUndefined(date)) {
          this.closeClick(e);
          this.parent.setProperties({ selectedDate: date }, true);
          this.parent.changeView(this.parent.getNavigateView(), e);
        }
      }
    };
    QuickPopups2.prototype.documentClick = function(e) {
      var target = e.event.target;
      var classNames2 = "." + POPUP_WRAPPER_CLASS + ",." + HEADER_CELLS_CLASS + ",." + ALLDAY_CELLS_CLASS + ",." + WORK_CELLS_CLASS + ",." + APPOINTMENT_CLASS + ",.e-popup";
      var popupWrap = this.parent.element.querySelector("." + POPUP_WRAPPER_CLASS);
      if (popupWrap && popupWrap.childElementCount > 0 && !closest(target, classNames2) || !closest(target, classNames2)) {
        this.quickPopupHide();
        this.parent.removeNewEventElement();
      }
      var tar = this.parent.element.querySelector("." + INLINE_SUBJECT_CLASS);
      if (tar && tar !== target && this.parent.allowInline) {
        this.parent.inlineModule.documentClick();
      }
      if (closest(target, "." + APPOINTMENT_CLASS + ",." + HEADER_CELLS_CLASS)) {
        this.parent.removeNewEventElement();
      }
      if (!closest(target, "." + MORE_POPUP_WRAPPER_CLASS) && (target.classList && !target.classList.contains(MORE_INDICATOR_CLASS)) && !closest(target, "." + POPUP_OPEN) && !closest(target, "." + WORK_CELLS_CLASS)) {
        this.morePopup.hide();
      }
    };
    QuickPopups2.prototype.onClosePopup = function(event) {
      if (!isNullOrUndefined(event)) {
        this.dialogEvent = event;
      }
      this.quickPopupHide();
      this.parent.eventBase.focusElement();
    };
    QuickPopups2.prototype.addEventListener = function() {
      this.parent.on(cellClick, this.cellClick, this);
      this.parent.on(eventClick, this.eventClick, this);
      this.parent.on(documentClick, this.documentClick, this);
      this.parent.on(dataReady, this.updateMoreEventContent, this);
    };
    QuickPopups2.prototype.removeEventListener = function() {
      this.parent.off(cellClick, this.cellClick);
      this.parent.off(eventClick, this.eventClick);
      this.parent.off(documentClick, this.documentClick);
      this.parent.off(dataReady, this.updateMoreEventContent);
    };
    QuickPopups2.prototype.destroyPopupButtons = function(popupName) {
      var popup = popupName === "quickPopup" ? this.quickPopup : this.morePopup;
      var buttonCollections = [].slice.call(popup.element.querySelectorAll(".e-control.e-btn"));
      for (var _i = 0, buttonCollections_1 = buttonCollections; _i < buttonCollections_1.length; _i++) {
        var button = buttonCollections_1[_i];
        var instance = button.ej2_instances[0];
        if (instance) {
          instance.destroy();
        }
      }
    };
    QuickPopups2.prototype.refreshQuickDialog = function() {
      this.destroyQuickDialog();
      this.renderQuickDialog();
    };
    QuickPopups2.prototype.refreshQuickPopup = function() {
      this.destroyQuickPopup();
      this.renderQuickPopup();
    };
    QuickPopups2.prototype.refreshMorePopup = function() {
      this.destroyMorePopup();
      this.renderMorePopup();
    };
    QuickPopups2.prototype.destroyQuickDialog = function() {
      if (this.quickDialog.element) {
        this.quickDialog.destroy();
        remove(this.quickDialog.element);
        this.quickDialog = null;
      }
    };
    QuickPopups2.prototype.destroyQuickPopup = function() {
      if (this.quickPopup.element) {
        this.destroyPopupButtons("quickPopup");
        this.quickPopup.destroy();
        remove(this.quickPopup.element);
        this.quickPopup = null;
      }
    };
    QuickPopups2.prototype.destroyMorePopup = function() {
      if (this.morePopup.element) {
        this.destroyPopupButtons("morePopup");
        this.morePopup.destroy();
        remove(this.morePopup.element);
        this.morePopup = null;
      }
    };
    QuickPopups2.prototype.destroy = function() {
      if (this.quickPopup.element.querySelectorAll(".e-formvalidator").length) {
        this.fieldValidator.destroy();
      }
      this.removeEventListener();
      this.destroyQuickPopup();
      this.destroyMorePopup();
      this.destroyQuickDialog();
      this.dialogEvent = null;
      this.parent = null;
      this.l10n = null;
      this.isCrudAction = null;
      this.fieldValidator = null;
      this.isMultipleEventSelect = null;
    };
    return QuickPopups2;
  }()
);
var EventTooltip = (
  /** @class */
  function() {
    function EventTooltip2(parent) {
      this.parent = parent;
      this.tooltipObj = new Tooltip({
        animation: { close: { effect: "FadeOut" } },
        content: "No title",
        position: "BottomRight",
        offsetY: 10,
        mouseTrail: this.parent.isAdaptive ? false : true,
        showTipPointer: false,
        cssClass: this.parent.cssClass + " " + EVENT_TOOLTIP_ROOT_CLASS,
        target: this.getTargets(),
        beforeRender: this.onBeforeRender.bind(this),
        beforeClose: this.onBeforeClose.bind(this),
        enableRtl: this.parent.enableRtl,
        enableHtmlSanitizer: this.parent.enableHtmlSanitizer
      });
      this.tooltipObj.appendTo(this.parent.element);
    }
    EventTooltip2.prototype.getTargets = function() {
      var targets = [];
      if (this.parent.activeViewOptions.group.headerTooltipTemplate) {
        targets.push("." + RESOURCE_CELLS_CLASS);
      }
      if (this.parent.eventSettings.enableTooltip) {
        targets.push("." + APPOINTMENT_CLASS);
      }
      return targets.join(",");
    };
    EventTooltip2.prototype.onBeforeRender = function(args) {
      if (!isNullOrUndefined(args.target.getAttribute("data-tooltip-id"))) {
        return;
      }
      if (args.target.classList.contains(RESOURCE_CELLS_CLASS) && this.parent.activeViewOptions.group.resources.length > 0) {
        var resCollection = void 0;
        if (this.parent.activeView.isTimelineView()) {
          var index = parseInt(args.target.getAttribute("data-group-index"), 10);
          resCollection = this.parent.resourceBase.lastResourceLevel[parseInt(index.toString(), 10)];
        } else {
          var rowIndex = args.target.parentNode.sectionRowIndex;
          var cellIndex = args.target.cellIndex;
          resCollection = this.parent.activeView.getColumnLevels()[parseInt(rowIndex.toString(), 10)][parseInt(cellIndex.toString(), 10)];
        }
        var data = {
          resource: resCollection.resource,
          resourceData: resCollection.resourceData
        };
        var contentContainer = createElement("div");
        var templateId = this.parent.element.id + "_headerTooltipTemplate";
        var tooltipTemplate = [].slice.call(this.parent.getHeaderTooltipTemplate()(data, this.parent, "headerTooltipTemplate", templateId, false));
        append2(tooltipTemplate, contentContainer);
        this.setContent(contentContainer);
        this.parent.renderTemplates();
        return;
      }
      var record = this.parent.eventBase.getEventByGuid(args.target.getAttribute("data-guid"));
      if (isNullOrUndefined(record)) {
        return;
      }
      if (!isNullOrUndefined(this.parent.eventSettings.tooltipTemplate)) {
        var contentContainer = createElement("div");
        var templateId = this.parent.element.id + "_tooltipTemplate";
        var tooltipTemplate = [].slice.call(this.parent.getEventTooltipTemplate()(record, this.parent, "tooltipTemplate", templateId, false));
        append2(tooltipTemplate, contentContainer);
        this.setContent(contentContainer);
      } else {
        var globalize = this.parent.globalize;
        var fields = this.parent.eventFields;
        var eventStart = /* @__PURE__ */ new Date("" + record[fields.startTime]);
        var eventEnd = /* @__PURE__ */ new Date("" + record[fields.endTime]);
        eventEnd = eventEnd.getHours() === 0 && eventEnd.getMinutes() === 0 ? new Date(eventEnd.setMilliseconds(-1e3)) : eventEnd;
        var startDate = resetTime(/* @__PURE__ */ new Date("" + eventStart));
        var endDate = resetTime(/* @__PURE__ */ new Date("" + eventEnd));
        var tooltipSubject = record[fields.subject] || this.parent.eventSettings.fields.subject.default || this.parent.localeObj.getConstant("addTitle");
        var tooltipLocation = !isNullOrUndefined(record[fields.location]) ? record[fields.location] : "";
        var startMonthDate = "";
        var startMonthYearDate = "";
        var endMonthYearDate = "";
        startMonthDate = globalize.formatDate(eventStart, {
          type: "date",
          skeleton: "MMMd",
          calendar: this.parent.getCalendarMode()
        });
        startMonthYearDate = globalize.formatDate(eventStart, {
          type: "date",
          skeleton: "medium",
          calendar: this.parent.getCalendarMode()
        });
        endMonthYearDate = globalize.formatDate(eventEnd, {
          type: "date",
          skeleton: "medium",
          calendar: this.parent.getCalendarMode()
        });
        startMonthDate = capitalizeFirstWord(startMonthDate, "single");
        startMonthYearDate = capitalizeFirstWord(startMonthYearDate, "single");
        endMonthYearDate = capitalizeFirstWord(endMonthYearDate, "single");
        var startTime = this.parent.getTimeString(eventStart);
        var endTime = this.parent.getTimeString(eventEnd);
        var tooltipDetails = void 0;
        if (startDate.getTime() === endDate.getTime()) {
          tooltipDetails = globalize.formatDate(eventStart, {
            type: "date",
            skeleton: "long",
            calendar: this.parent.getCalendarMode()
          });
          tooltipDetails = capitalizeFirstWord(tooltipDetails, "single");
        } else {
          tooltipDetails = startDate.getFullYear() === endDate.getFullYear() ? startMonthDate + " - " + endMonthYearDate : startMonthYearDate + " - " + endMonthYearDate;
        }
        var tooltipTime = record[fields.isAllDay] ? this.parent.localeObj.getConstant("allDay") : startTime + " - " + endTime;
        var content = '<div><div class="e-subject">' + tooltipSubject + '</div><div class="e-location">' + tooltipLocation + '</div><div class="e-details">' + tooltipDetails + '</div><div class="e-all-day">' + tooltipTime + "</div></div>";
        this.setContent(content);
      }
      this.parent.renderTemplates();
    };
    EventTooltip2.prototype.onBeforeClose = function() {
      this.parent.resetTemplates(["tooltipTemplate", "headerTooltipTemplate"]);
    };
    EventTooltip2.prototype.setContent = function(content) {
      this.tooltipObj.setProperties({ content }, true);
    };
    EventTooltip2.prototype.close = function() {
      this.tooltipObj.close();
    };
    EventTooltip2.prototype.destroy = function() {
      this.tooltipObj.destroy();
      addClass([this.parent.element], "e-control");
      this.tooltipObj = null;
      this.parent = null;
    };
    return EventTooltip2;
  }()
);
var __extends$h = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$a = globalThis && globalThis.__decorate || function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i = decorators.length - 1; i >= 0; i--)
      if (d = decorators[i])
        r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var HEADER = "e-editor";
var INPUTWARAPPER = "e-input-wrapper";
var INPUTWARAPPERSIDE = "e-input-wrapper-side";
var REPEATELEMENT = "e-repeat-element";
var REPEATINTERVAL = "e-repeat-interval";
var INTERVALCLASS = "e-interval";
var DAYWRAPPER = "e-days";
var WEEKWRAPPER = "e-non-week";
var WEEKPOSITION = "e-week-position";
var DAYPOSITION = "e-day-position";
var YEAREXPANDERWRAPPER = "e-year-expander";
var YEAREXPANDERELEMENT = "e-year-expander-element";
var MONETHEXPANDERWRAPPER = "e-month-expander";
var MONETHEXPANDWRAPPER = "e-month-expand-wrapper";
var MONTHEXPANDERELEMENT = "e-month-expander-element";
var MONTHEXPANDERCHECKBOXWRAPPER = "e-month-expander-checkbox-wrapper";
var FORMLEFT = "e-form-left";
var FORMRIGHT = "e-form-right";
var MONTHDAYWRAPPER = "e-month-day";
var MONTHEXPANNDERELEM = "e-month-expander-wrapper";
var MONTHPOS = "e-month-pos";
var MONTHWEEK = "e-month-week";
var ENDON = "e-end-on";
var MONTHEXPANDERLABEL = "e-month-expander-label";
var WEEKEXPANDERLABEL = "e-week-expander-label";
var ENDONLABEL = "e-end-on-label";
var ENDONLEFT = "e-end-on-left";
var MONTHDAYELEMENT = "e-monthday-element";
var ENDONELEMENT = "e-end-on-element";
var ENDONDATE = "e-end-on-date";
var UNTILDATE = "e-until-date";
var ENDONCOUNTWRAPPER = "e-end-on-count";
var ENDONCOUNT = "e-recurrence-count";
var HIDEWRAPPER = "e-hide-recurrence-element";
var RTLCLASS = "e-rtl";
var PRIMARY = "e-primary";
var ACTIVE = "e-active";
var RECURRENCETABLE = "e-recurrence-table";
var REPEATCONTENT = "e-repeat-content";
var REPEATCONTENTWRAPPER = "e-repeat-content-wrapper";
var NONE = "none";
var DAILY = "daily";
var WEEKLY = "weekly";
var MONTHLY = "monthly";
var YEARLY = "yearly";
var NEVER = "never";
var UNTIL = "until";
var COUNT = "count";
var TEXTFIELD = "text";
var VALUEFIELD = "value";
var LAST = "last";
var REPEAT = "repeat";
var REPEATEVERY = "repeatEvery";
var ON = "on";
var END = "end";
var RADIOLABEL = "onDay";
var RULEUNTIL = "UNTIL";
var RULEBYDAY = "BYDAY";
var RULEBYMONTHDAY = "BYMONTHDAY";
var RULEBYMONTH = "BYMONTH";
var RULEINTERVAL = "INTERVAL";
var RULECOUNT = "COUNT";
var RULESETPOS = "BYSETPOS";
var RULEFREQ = "FREQ";
var RULEDAILY = "DAILY";
var RULEWEEKLY = "WEEKLY";
var RULEMONTHLY = "MONTHLY";
var RULEYEARLY = "YEARLY";
var RULESUNDAY = "SU";
var RULEMONDAY = "MO";
var RULETUESDAY = "TU";
var RULEWEDNESDAY = "WE";
var RULETHURSDAY = "TH";
var RULEFRIDAY = "FR";
var RULESATURDAY = "SA";
var KEYSUNDAY = "sun";
var KEYMONDAY = "mon";
var KEYTUESDAY = "tue";
var KEYWEDNESDAY = "wed";
var KEYTHURSDAY = "thu";
var KEYFRIDAY = "fri";
var KEYSATURDAY = "sat";
var EQUAL = "=";
var SEMICOLON = ";";
var COMMA = ",";
var FIRST = "first";
var SECOND = "second";
var THIRD = "third";
var FOURTH = "fourth";
var contentType = {
  none: "",
  daily: "days",
  weekly: "weeks",
  monthly: "months",
  yearly: "years"
};
var valueData = {
  "sun": RULESUNDAY,
  "mon": RULEMONDAY,
  "tue": RULETUESDAY,
  "wed": RULEWEDNESDAY,
  "thu": RULETHURSDAY,
  "fri": RULEFRIDAY,
  "sat": RULESATURDAY
};
var neverClassList = [DAYWRAPPER, WEEKWRAPPER, ENDON, INTERVALCLASS, YEAREXPANDERWRAPPER, MONETHEXPANDERWRAPPER];
var weekClassList = [WEEKWRAPPER];
var monthClassList = [DAYWRAPPER, YEAREXPANDERWRAPPER];
var yearClassList = [DAYWRAPPER];
var dailyClassList = [DAYWRAPPER, WEEKWRAPPER, YEAREXPANDERWRAPPER, MONETHEXPANDERWRAPPER];
var noEndClassList = [ENDONDATE, ENDONCOUNTWRAPPER];
var endOnCountClassList = [ENDONDATE];
var endOnDateClassList = [ENDONCOUNTWRAPPER];
var RecurrenceEditor = (
  /** @class */
  function(_super) {
    __extends$h(RecurrenceEditor2, _super);
    function RecurrenceEditor2(options, element2) {
      var _this = _super.call(this, options, element2) || this;
      _this.defaultLocale = {
        none: "None",
        daily: "Daily",
        weekly: "Weekly",
        monthly: "Monthly",
        month: "Month",
        yearly: "Yearly",
        never: "Never",
        until: "Until",
        count: "Count",
        first: "First",
        second: "Second",
        third: "Third",
        fourth: "Fourth",
        last: "Last",
        repeat: "Repeat",
        repeatEvery: "Repeat every",
        on: "Repeat On",
        end: "End",
        onDay: "Day",
        days: "Day(s)",
        weeks: "Week(s)",
        months: "Month(s)",
        years: "Year(s)",
        every: "every",
        summaryTimes: "time(s)",
        summaryOn: "on",
        summaryUntil: "until",
        summaryRepeat: "Repeats",
        summaryDay: "day(s)",
        summaryWeek: "week(s)",
        summaryMonth: "month(s)",
        summaryYear: "year(s)",
        monthWeek: "Month Week",
        monthPosition: "Month Position",
        monthExpander: "Month Expander",
        yearExpander: "Year Expander",
        repeatInterval: "Repeat Interval"
      };
      _this.renderStatus = false;
      _this.dayButtons = [];
      _this.monthButtons = [];
      return _this;
    }
    RecurrenceEditor2.prototype.startState = function(freq, endOn, startDate) {
      this.showFormElement();
      this.updateForm(freq);
      this.freshOnEndForm();
      this.updateEndOnForm(endOn);
      this.selectMonthDay(startDate);
      this.updateUntilDate(startDate);
      this.onMonthDay.setProperties({ checked: true });
    };
    RecurrenceEditor2.prototype.preRender = function() {
      this.localeObj = new L10n(this.getModuleName(), this.defaultLocale, this.locale);
      this.calendarUtil = getCalendarUtil(this.calendarMode);
    };
    RecurrenceEditor2.prototype.applyCustomClass = function(cssClass2) {
      if (cssClass2) {
        addClass([this.element], cssClass2.split(" "));
      }
    };
    RecurrenceEditor2.prototype.initialize = function() {
      addClass([this.element], "e-" + this.getModuleName());
      this.renderComponent();
      if (!isNullOrUndefined(this.value) && this.value !== "") {
        this.setRecurrenceRule(this.value);
      } else {
        if (!isNullOrUndefined(this.repeatType.value)) {
          this.startState(this.repeatType.value.toString().toUpperCase(), NEVER, this.startDate);
          this.updateForm(this.repeatType.value.toString());
        }
        if (this.selectedType > 0) {
          this.setProperties({ value: this.getRecurrenceRule() }, false);
        }
      }
      this.applyCustomClass(this.cssClass);
    };
    RecurrenceEditor2.prototype.triggerChangeEvent = function() {
      var _this = this;
      if (this.renderStatus) {
        var value = this.getRecurrenceRule();
        this.trigger("change", { value }, function(args) {
          return _this.setProperties({ value: args.value }, false);
        });
      }
    };
    RecurrenceEditor2.prototype.resetDayButton = function() {
      var elements = [].slice.call(this.element.querySelectorAll("." + DAYWRAPPER + " button"));
      elements.forEach(function(element2) {
        return removeClass([element2], [ACTIVE, PRIMARY]);
      });
    };
    RecurrenceEditor2.prototype.daySelection = function(dayIndex2) {
      this.resetDayButton();
      var days = [0, 1, 2, 3, 4, 5, 6];
      this.rotateArray(days, this.firstDayOfWeek);
      var element2 = this.element.querySelector("." + DAYWRAPPER + ' button[data-index="' + days.indexOf(dayIndex2) + '"]');
      if (element2) {
        addClass([element2], [ACTIVE, PRIMARY]);
      }
    };
    RecurrenceEditor2.prototype.rtlClass = function(status) {
      if (status) {
        addClass([this.element], RTLCLASS);
      } else {
        removeClass([this.element], RTLCLASS);
      }
    };
    RecurrenceEditor2.prototype.updateUntilDate = function(date) {
      var tempDate = new Date(date.getTime());
      tempDate.setDate(tempDate.getDate() + 60);
      this.untilDateObj.setProperties({ value: tempDate });
    };
    RecurrenceEditor2.prototype.selectMonthDay = function(date) {
      var weekday = [KEYSUNDAY, KEYMONDAY, KEYTUESDAY, KEYWEDNESDAY, KEYTHURSDAY, KEYFRIDAY, KEYSATURDAY];
      this.monthDate.setProperties({ value: this.calendarUtil.getDate(date) });
      this.monthWeekDays.setProperties({ value: valueData[weekday[date.getDay()]] });
      this.monthValue.setProperties({ value: "" + this.calendarUtil.getMonth(date) });
      this.monthWeekPos.setProperties({ value: this.getDayPosition(date) });
      this.daySelection(date.getDay());
    };
    RecurrenceEditor2.prototype.updateForm = function(state) {
      var _this = this;
      this.repeatType.setProperties({ value: state });
      var end = this.element.querySelector("." + ENDON);
      if (state === DAILY) {
        classList(end, [FORMLEFT], [FORMRIGHT]);
      } else {
        classList(end, [FORMRIGHT], [FORMLEFT]);
      }
      switch (state) {
        case NONE:
          neverClassList.forEach(function(className) {
            return addClass([_this.element.querySelector("." + className)], HIDEWRAPPER);
          });
          break;
        case WEEKLY:
          weekClassList.forEach(function(className) {
            return addClass([_this.element.querySelector("." + className)], HIDEWRAPPER);
          });
          break;
        case MONTHLY:
          monthClassList.forEach(function(className) {
            return addClass([_this.element.querySelector("." + className)], HIDEWRAPPER);
          });
          break;
        case YEARLY:
          yearClassList.forEach(function(className) {
            return addClass([_this.element.querySelector("." + className)], HIDEWRAPPER);
          });
          break;
        case DAILY:
          dailyClassList.forEach(function(className) {
            return addClass([_this.element.querySelector("." + className)], HIDEWRAPPER);
          });
          break;
      }
    };
    RecurrenceEditor2.prototype.updateEndOnForm = function(state) {
      var _this = this;
      this.endType.setProperties({ value: state });
      switch (state) {
        case NEVER:
          noEndClassList.forEach(function(className) {
            return addClass([_this.element.querySelector("." + className)], HIDEWRAPPER);
          });
          break;
        case UNTIL:
          endOnDateClassList.forEach(function(className) {
            return addClass([_this.element.querySelector("." + className)], HIDEWRAPPER);
          });
          break;
        case COUNT:
          endOnCountClassList.forEach(function(className) {
            return addClass([_this.element.querySelector("." + className)], HIDEWRAPPER);
          });
          break;
      }
    };
    RecurrenceEditor2.prototype.freshOnEndForm = function() {
      var _this = this;
      noEndClassList.forEach(function(className) {
        var element2 = _this.element.querySelector("." + className);
        if (element2) {
          removeClass([element2], HIDEWRAPPER);
        }
      });
    };
    RecurrenceEditor2.prototype.showFormElement = function() {
      var _this = this;
      neverClassList.forEach(function(className) {
        var hideElement = _this.element.querySelector("." + className);
        if (hideElement) {
          removeClass([hideElement], HIDEWRAPPER);
        }
      });
    };
    RecurrenceEditor2.prototype.renderDropdowns = function() {
      var _this = this;
      var self2 = this;
      this.repeatType = new DropDownList({
        //set the data to dataSource property
        dataSource: this.getRepeatData(),
        floatLabelType: "Always",
        enableRtl: this.enableRtl,
        index: this.selectedType,
        fields: {
          text: TEXTFIELD,
          value: VALUEFIELD
        },
        placeholder: this.localeObj.getConstant(REPEAT),
        htmlAttributes: { "title": this.localeObj.getConstant(REPEAT), role: "option" },
        change: function(args) {
          self2.setProperties({ selectedType: _this.frequencies.indexOf(args.value) }, false);
          self2.element.querySelector("." + REPEATCONTENT).innerHTML = self2.localeObj.getConstant(contentType[args.value]);
          self2.showFormElement();
          self2.updateForm(args.value);
          self2.resetFormValues();
          self2.triggerChangeEvent();
        }
      });
      this.repeatType.appendTo(this.element.querySelector("." + REPEATELEMENT));
      this.endType = new DropDownList({
        dataSource: this.getEndData(),
        popupWidth: this.getPopupWidth(),
        enableRtl: this.enableRtl,
        index: 1,
        fields: {
          text: TEXTFIELD,
          value: VALUEFIELD
        },
        htmlAttributes: { role: "option" },
        change: function(args) {
          self2.freshOnEndForm();
          self2.updateEndOnForm(args.value);
          self2.resetFormValues();
          self2.triggerChangeEvent();
        }
      });
      this.endType.appendTo(this.element.querySelector("." + ENDONELEMENT));
      var renderDropDownList = function(dropDownData) {
        return new DropDownList({
          dataSource: dropDownData,
          popupWidth: _this.getPopupWidth(),
          enableRtl: _this.enableRtl,
          fields: {
            text: TEXTFIELD,
            value: VALUEFIELD
          },
          htmlAttributes: { role: "option" },
          index: 1,
          // eslint-disable-next-line @typescript-eslint/no-unused-vars
          change: function(args) {
            self2.onWeekDay.setProperties({ checked: true });
            self2.resetFormValues();
            self2.triggerChangeEvent();
          }
        });
      };
      this.monthWeekPos = renderDropDownList(this.getMonthPosData());
      this.monthWeekPos.appendTo(this.element.querySelector("." + MONTHPOS));
      this.monthWeekDays = renderDropDownList(this.getDayData("wide"));
      this.monthWeekDays.appendTo(this.element.querySelector("." + MONTHWEEK));
      this.monthValue = new DropDownList({
        dataSource: this.getMonthData(),
        fields: {
          text: TEXTFIELD,
          value: VALUEFIELD
        },
        htmlAttributes: { role: "option" },
        enableRtl: this.enableRtl,
        index: 7,
        // eslint-disable-next-line @typescript-eslint/no-unused-vars
        change: function(args) {
          self2.resetFormValues();
          self2.triggerChangeEvent();
        }
      });
      this.monthValue.appendTo(this.element.querySelector("." + YEAREXPANDERELEMENT));
    };
    RecurrenceEditor2.prototype.setDefaultValue = function() {
      var formelement = [].slice.call(this.element.querySelectorAll(".e-control .e-numerictextbox"));
      for (var _i = 0, formelement_1 = formelement; _i < formelement_1.length; _i++) {
        var element2 = formelement_1[_i];
        var instance = element2.ej2_instances[0];
        if (instance.element.classList.contains(REPEATINTERVAL)) {
          instance.value = 1;
          instance.dataBind();
        } else if (instance.element.classList.contains(ENDONCOUNT)) {
          instance.value = 10;
          instance.dataBind();
        }
      }
    };
    RecurrenceEditor2.prototype.resetFormValues = function() {
      var recurreneElement = [].slice.call(this.element.querySelectorAll('.e-control [type="text"]'));
      for (var _i = 0, recurreneElement_1 = recurreneElement; _i < recurreneElement_1.length; _i++) {
        var element2 = recurreneElement_1[_i];
        var instance = void 0;
        if (element2.classList.contains("e-datepicker")) {
          instance = element2.ej2_instances[0];
          if (instance.value) {
            instance.value = instance.value;
            instance.dataBind();
          } else {
            this.updateUntilDate(this.startDate);
          }
        } else if (element2.classList.contains("e-dropdownlist")) {
          instance = element2.ej2_instances[0];
          instance.index = instance.index || 0;
          instance.dataBind();
        } else if (element2.classList.contains("e-numerictextbox")) {
          instance = element2.ej2_instances[0];
          var value = void 0;
          if (instance.element.classList.contains(REPEATINTERVAL)) {
            value = 1;
          } else if (instance.element.classList.contains(ENDONCOUNT)) {
            value = 10;
          } else {
            value = this.startDate.getDate();
          }
          instance.value = instance.value || value;
          instance.dataBind();
        }
      }
    };
    RecurrenceEditor2.prototype.getPopupWidth = function() {
      return Browser.isDevice ? "100%" : "auto";
    };
    RecurrenceEditor2.prototype.renderDatePickers = function() {
      var self2 = this;
      this.untilDateObj = new DatePicker({
        firstDayOfWeek: this.firstDayOfWeek,
        enableRtl: this.enableRtl,
        locale: this.locale,
        min: this.minDate,
        max: this.maxDate,
        format: isNullOrUndefined(this.dateFormat) ? this.getFormat("dateFormats") : this.dateFormat,
        change: function(args) {
          if (args.value) {
            self2.triggerChangeEvent();
          }
        }
      });
      this.untilDateObj.appendTo(this.element.querySelector("." + UNTILDATE));
    };
    RecurrenceEditor2.prototype.getFormat = function(formatType) {
      var format;
      if (this.locale === "en" || this.locale === "en-US") {
        format = getValue(formatType + ".short", getDefaultDateObject(this.getCalendarMode()));
      } else {
        format = getValue("main." + this.locale + ".dates.calendars." + this.getCalendarMode() + "." + formatType + ".short", cldrData);
      }
      return format;
    };
    RecurrenceEditor2.prototype.dayButtonRender = function() {
      var _this = this;
      var btns = [].slice.call(this.element.querySelectorAll("." + DAYWRAPPER + " button"));
      var self2 = this;
      for (var _i = 0, btns_1 = btns; _i < btns_1.length; _i++) {
        var btn = btns_1[_i];
        var button = new Button({ isToggle: true, enableRtl: this.enableRtl }, btn);
        this.dayButtons.push(button);
        EventHandler.add(btn, "click", function(args) {
          var btns2 = [].slice.call(_this.element.querySelectorAll("." + DAYWRAPPER + " button." + PRIMARY));
          var element2 = args.target;
          if (!element2.classList.contains(PRIMARY)) {
            addClass([element2], PRIMARY);
            self2.triggerChangeEvent();
          } else if (btns2.length > 1) {
            removeClass([element2], PRIMARY);
            self2.triggerChangeEvent();
          }
        });
      }
    };
    RecurrenceEditor2.prototype.radioButtonRender = function() {
      var self2 = this;
      this.onMonthDay = new RadioButton({
        label: this.localeObj.getConstant(RADIOLABEL),
        enableRtl: this.enableRtl,
        name: "monthType",
        value: "day",
        change: function() {
          self2.resetFormValues();
          self2.triggerChangeEvent();
        }
      });
      this.onMonthDay.appendTo(this.element.querySelector("." + MONTHEXPANDERELEMENT));
      this.monthButtons.push(this.onMonthDay);
      this.onWeekDay = new RadioButton({
        label: this.localeObj.getConstant("monthExpander"),
        cssClass: "e-month-type",
        name: "monthType",
        enableRtl: this.enableRtl,
        value: "daypos",
        change: function() {
          self2.resetFormValues();
          self2.triggerChangeEvent();
        }
      });
      this.onWeekDay.appendTo(this.element.querySelector("." + MONTHEXPANNDERELEM));
      this.monthButtons.push(this.onWeekDay);
    };
    RecurrenceEditor2.prototype.numericTextboxRender = function() {
      var self2 = this;
      this.recurrenceCount = new NumericTextBox({
        value: 10,
        format: "#",
        enableRtl: this.enableRtl,
        min: 1,
        max: 999,
        change: function() {
          self2.triggerChangeEvent();
        }
      });
      this.recurrenceCount.appendTo(this.element.querySelector("." + ENDONCOUNT));
      this.monthDate = new NumericTextBox({
        value: 1,
        format: "#",
        enableRtl: this.enableRtl,
        min: 1,
        max: 31,
        change: function() {
          self2.onMonthDay.setProperties({ checked: true });
          self2.triggerChangeEvent();
        }
      });
      this.monthDate.appendTo(this.element.querySelector("." + MONTHDAYWRAPPER));
      this.repeatInterval = new NumericTextBox({
        value: 1,
        format: "#",
        min: 1,
        max: 999,
        enableRtl: this.enableRtl,
        floatLabelType: "Always",
        placeholder: this.localeObj.getConstant(REPEATEVERY),
        change: function() {
          self2.triggerChangeEvent();
        }
      });
      this.repeatInterval.appendTo(this.element.querySelector("." + REPEATINTERVAL));
    };
    RecurrenceEditor2.prototype.renderComponent = function() {
      this.setTemplate();
      this.renderDropdowns();
      this.renderDatePickers();
      this.dayButtonRender();
      this.radioButtonRender();
      this.numericTextboxRender();
    };
    RecurrenceEditor2.prototype.rotateArray = function(data, count) {
      var temp;
      for (var index = 0; index < count; index++) {
        temp = data.shift();
        data.push(temp);
      }
    };
    RecurrenceEditor2.prototype.getEndData = function() {
      var endData = [NEVER, UNTIL, COUNT];
      var self2 = this;
      var dataSource = [];
      endData.forEach(function(data) {
        dataSource.push({ text: self2.localeObj.getConstant(data), value: data });
      });
      return dataSource;
    };
    RecurrenceEditor2.prototype.getDayPosition = function(date) {
      var temp = new Date(date.getTime());
      var endDate = new Date(date.getTime());
      var day = date.getDay();
      var positionCollection = [];
      temp = this.calendarUtil.getMonthStartDate(temp);
      endDate = this.calendarUtil.getMonthEndDate(endDate);
      while (temp < endDate) {
        if (temp.getDay() === day) {
          positionCollection.push(temp.getTime());
        }
        temp.setDate(temp.getDate() + 1);
      }
      if (positionCollection.indexOf(date.getTime()) === positionCollection.length - 1) {
        return -1;
      }
      return positionCollection.indexOf(date.getTime()) + 1;
    };
    RecurrenceEditor2.prototype.getRepeatData = function() {
      var data = [];
      var self2 = this;
      this.frequencies.forEach(function(element2) {
        var textValue = element2 === NONE ? NEVER : element2;
        data.push({ text: self2.localeObj.getConstant(textValue), value: element2 });
      });
      return data;
    };
    RecurrenceEditor2.prototype.getMonthPosData = function() {
      var monthpos = [FIRST, SECOND, THIRD, FOURTH, LAST];
      var monthposValue = {
        first: 1,
        second: 2,
        third: 3,
        fourth: 4,
        last: -1
      };
      var self2 = this;
      var dataSource = [];
      monthpos.forEach(function(data) {
        dataSource.push({ text: self2.localeObj.getConstant(data), value: monthposValue["" + data] });
      });
      return dataSource;
    };
    RecurrenceEditor2.prototype.getDayData = function(format) {
      var weekday = [KEYSUNDAY, KEYMONDAY, KEYTUESDAY, KEYWEDNESDAY, KEYTHURSDAY, KEYFRIDAY, KEYSATURDAY];
      var dayData = [];
      var cldrObj;
      this.rotateArray(weekday, this.firstDayOfWeek);
      if (this.locale === "en" || this.locale === "en-US") {
        var nameSpaceString = "days.stand-alone.";
        cldrObj = getValue(nameSpaceString + format, getDefaultDateObject(this.getCalendarMode()));
      } else {
        var nameSpaceString = "main." + this.locale + ".dates.calendars." + this.getCalendarMode() + ".days.stand-alone." + format;
        cldrObj = getValue(nameSpaceString, cldrData);
      }
      for (var _i = 0, weekday_1 = weekday; _i < weekday_1.length; _i++) {
        var obj = weekday_1[_i];
        var day = getValue(obj, cldrObj);
        dayData.push({ text: format === "narrow" ? day : capitalizeFirstWord(day, "single"), value: valueData["" + obj] });
      }
      return dayData;
    };
    RecurrenceEditor2.prototype.getMonthData = function() {
      var monthData = [];
      var cldrObj;
      if (this.locale === "en" || this.locale === "en-US") {
        var nameSpaceString = "months.stand-alone.wide";
        cldrObj = getValue(nameSpaceString, getDefaultDateObject(this.getCalendarMode()));
      } else {
        var nameSpaceString = "main." + this.locale + ".dates.calendars." + this.getCalendarMode() + ".months.stand-alone.wide";
        cldrObj = getValue(nameSpaceString, cldrData);
      }
      for (var _i = 0, _a = Object.keys(cldrObj); _i < _a.length; _i++) {
        var obj = _a[_i];
        monthData.push({
          text: capitalizeFirstWord(getValue(obj, cldrObj), "single"),
          value: obj
        });
      }
      return monthData;
    };
    RecurrenceEditor2.prototype.setTemplate = function() {
      var dayData = this.getDayData("narrow");
      var fullDay = this.getDayData("wide");
      this.element.innerHTML = '<div class="' + HEADER + '"><div class="' + INPUTWARAPPER + " " + FORMLEFT + '"><input type="text" tabindex="0" class="' + REPEATELEMENT + '"label="' + REPEATELEMENT.substr(2) + '" /></div><div class="' + INPUTWARAPPER + " " + INTERVALCLASS + " " + FORMRIGHT + '"><table  class="' + RECURRENCETABLE + " " + REPEATCONTENTWRAPPER + '"><tr><td><input type="text" tabindex="0" id="' + this.element.id + "_" + REPEATINTERVAL + '" class="' + REPEATINTERVAL + '"title="' + this.localeObj.getConstant("repeatEvery") + '" /></td><td><span class="' + REPEATCONTENT + '"></span></td></tr></table></div><div class="' + INPUTWARAPPERSIDE + " " + DAYWRAPPER + " " + FORMLEFT + '"><div class=' + WEEKEXPANDERLABEL + ">" + this.localeObj.getConstant(ON) + '</div><button type="button" class="e-round" data-index="0" title="' + fullDay[0].text + '">' + dayData[0].text + '</button><button type="button" class="e-round" data-index="1" title="' + fullDay[1].text + '">' + dayData[1].text + '</button><button type="button" class="e-round" data-index="2" title="' + fullDay[2].text + '">' + dayData[2].text + '</button><button type="button" class="e-round" data-index="3" title="' + fullDay[3].text + '">' + dayData[3].text + '</button><button type="button" class="e-round" data-index="4" title="' + fullDay[4].text + '">' + dayData[4].text + '</button><button type="button" class="e-round" data-index="5" title="' + fullDay[5].text + '">' + dayData[5].text + '</button><button type="button" class="e-round" data-index="6" title="' + fullDay[6].text + '">' + dayData[6].text + '</button></div><div class="' + INPUTWARAPPERSIDE + " " + WEEKWRAPPER + " " + FORMLEFT + '"><div class=' + MONTHEXPANDERLABEL + ">" + this.localeObj.getConstant(ON) + '</div><div class="' + YEAREXPANDERWRAPPER + '"><input class="' + YEAREXPANDERELEMENT + '" type="text" tabindex="0" title="' + this.localeObj.getConstant("yearExpander") + '"/></div><div class="' + MONETHEXPANDERWRAPPER + '"><table class="' + RECURRENCETABLE + " " + MONETHEXPANDWRAPPER + '"><tr><td><div class="' + INPUTWARAPPER + " " + MONTHEXPANDERCHECKBOXWRAPPER + '"><input class="' + MONTHEXPANDERELEMENT + '"title="' + this.localeObj.getConstant("monthExpander") + '" type="radio"></div></td><td colspan="2"><div class="' + INPUTWARAPPER + " " + MONTHDAYELEMENT + '"><input type="text" tabindex="0" id="' + this.element.id + "_" + MONTHDAYWRAPPER + '" class="' + MONTHDAYWRAPPER + '"title="' + this.localeObj.getConstant("on") + '" /></div></td></tr><tr><td><div class="' + INPUTWARAPPER + " " + MONTHEXPANDERCHECKBOXWRAPPER + '" style="min-width: 30px;margin-bottom:18px;"><input class="' + MONTHEXPANNDERELEM + '"title="' + this.localeObj.getConstant("monthExpander") + '" type="radio"></div></td><td><div class="' + INPUTWARAPPER + " " + WEEKPOSITION + '" ><input type="text" tabindex="0" class="' + MONTHPOS + '"title="' + this.localeObj.getConstant("monthPosition") + '" /></div></td><td><div class="' + INPUTWARAPPER + " " + DAYPOSITION + '"><input type="text" tabindex="0" class="' + MONTHWEEK + '"title="' + this.localeObj.getConstant("monthWeek") + '" /></div></td></tr></table></div></div><div class="' + INPUTWARAPPERSIDE + " " + ENDON + " " + FORMRIGHT + '"><div class=' + ENDONLABEL + ">" + this.localeObj.getConstant(END) + '</div><div class="' + INPUTWARAPPER + " " + ENDONLEFT + '"><input type="text" tabindex="0" class="' + ENDONELEMENT + '"title="' + this.localeObj.getConstant(END) + '" /></div><div class="' + INPUTWARAPPER + " " + ENDONDATE + '" ><input type="text" tabindex="0" class="' + UNTILDATE + '"title="' + this.localeObj.getConstant(UNTIL) + '" /></div><div class="' + INPUTWARAPPER + " " + ENDONCOUNTWRAPPER + '"><input type="text" tabindex="0" id="' + this.element.id + "_" + ENDONCOUNT + '" class="' + ENDONCOUNT + '"title="' + this.localeObj.getConstant(COUNT) + '" /></div></div></div></div>';
    };
    RecurrenceEditor2.prototype.getSelectedDaysData = function() {
      var ruleData = RULEBYDAY + EQUAL;
      var elements = [].slice.call(this.element.querySelectorAll("." + DAYWRAPPER + " button." + PRIMARY));
      var weekday = [RULESUNDAY, RULEMONDAY, RULETUESDAY, RULEWEDNESDAY, RULETHURSDAY, RULEFRIDAY, RULESATURDAY];
      this.rotateArray(weekday, this.firstDayOfWeek);
      for (var index = 0; index < elements.length; index++) {
        ruleData += weekday[parseInt(elements[parseInt(index.toString(), 10)].getAttribute("data-index"), 10)] + (index === elements.length - 1 ? "" : COMMA);
      }
      return ruleData + SEMICOLON;
    };
    RecurrenceEditor2.prototype.getSelectedMonthData = function() {
      var ruleData;
      if (this.onWeekDay.checked) {
        ruleData = RULEBYDAY + EQUAL + this.monthWeekDays.value + SEMICOLON + RULESETPOS + EQUAL + this.monthWeekPos.value + SEMICOLON;
      } else {
        ruleData = RULEBYMONTHDAY + EQUAL + this.monthDate.value + SEMICOLON;
      }
      return ruleData;
    };
    RecurrenceEditor2.prototype.getIntervalData = function() {
      return RULEINTERVAL + EQUAL + this.repeatInterval.value + SEMICOLON;
    };
    RecurrenceEditor2.prototype.getEndOnCount = function() {
      return RULECOUNT + EQUAL + this.recurrenceCount.value + SEMICOLON;
    };
    RecurrenceEditor2.prototype.getYearMonthRuleData = function() {
      return RULEBYMONTH + EQUAL + this.monthValue.value + SEMICOLON;
    };
    RecurrenceEditor2.prototype.updateWeekButton = function(keys2) {
      var weekday = [RULESUNDAY, RULEMONDAY, RULETUESDAY, RULEWEDNESDAY, RULETHURSDAY, RULEFRIDAY, RULESATURDAY];
      this.rotateArray(weekday, this.firstDayOfWeek);
      for (var _i = 0, _a = this.dayButtons; _i < _a.length; _i++) {
        var obj = _a[_i];
        var index = parseInt(obj.element.getAttribute("data-index"), 10);
        if (keys2.indexOf(weekday[parseInt(index.toString(), 10)]) !== -1) {
          obj.setProperties({ isPrimary: true });
        } else {
          obj.setProperties({ isPrimary: false });
        }
      }
    };
    RecurrenceEditor2.prototype.updateMonthUI = function() {
      if (this.ruleObject.monthDay.length) {
        this.monthDate.setProperties({ value: this.ruleObject.monthDay[0] });
        this.onMonthDay.setProperties({ checked: true });
      } else {
        this.onWeekDay.setProperties({ checked: true });
        this.monthWeekPos.setProperties({ value: this.ruleObject.setPosition });
        for (var _i = 0, _a = Object.keys(valueData); _i < _a.length; _i++) {
          var key = _a[_i];
          if (valueData["" + key] === this.ruleObject.day[0]) {
            this.monthWeekDays.setProperties({ value: this.ruleObject.day[0] });
            break;
          }
        }
      }
    };
    RecurrenceEditor2.prototype.updateUI = function(repeat, state) {
      this.repeatInterval.setProperties({ value: this.ruleObject.interval });
      switch (state) {
        case UNTIL:
          this.untilDateObj.setProperties({ value: this.ruleObject.until });
          break;
        case COUNT:
          this.recurrenceCount.setProperties({ value: this.ruleObject.count });
          break;
      }
      switch (repeat) {
        case WEEKLY:
          this.updateWeekButton(this.ruleObject.day);
          break;
        case YEARLY:
          this.monthValue.setProperties({ index: this.ruleObject.month[0] - 1 });
          this.updateMonthUI();
          break;
        case MONTHLY:
          this.updateMonthUI();
          break;
      }
    };
    RecurrenceEditor2.prototype.getUntilData = function() {
      if (!this.untilDateObj.value) {
        return "";
      }
      var tempStr = getRecurrenceStringFromDate(this.untilDateObj.value);
      return RULEUNTIL + EQUAL + tempStr + SEMICOLON;
    };
    RecurrenceEditor2.prototype.destroyComponents = function() {
      if (!this.recurrenceCount.isDestroyed) {
        this.recurrenceCount.destroy();
        this.recurrenceCount = null;
      }
      if (!this.monthDate.isDestroyed) {
        this.monthDate.destroy();
        this.monthDate = null;
      }
      if (!this.repeatInterval.isDestroyed) {
        this.repeatInterval.destroy();
        this.repeatInterval = null;
      }
      if (!this.untilDateObj.isDestroyed) {
        this.untilDateObj.destroy();
        this.untilDateObj = null;
      }
      if (!this.repeatType.isDestroyed) {
        this.repeatType.destroy();
        this.repeatType = null;
      }
      if (!this.endType.isDestroyed) {
        this.endType.destroy();
        this.endType = null;
      }
      if (!this.monthWeekPos.isDestroyed) {
        this.monthWeekPos.destroy();
        this.monthWeekPos = null;
      }
      if (!this.monthWeekDays.isDestroyed) {
        this.monthWeekDays.destroy();
        this.monthWeekDays = null;
      }
      if (!this.monthValue.isDestroyed) {
        this.monthValue.destroy();
        this.monthValue = null;
      }
      if (!this.onMonthDay.isDestroyed) {
        this.onMonthDay.destroy();
        this.onMonthDay = null;
      }
      if (!this.onWeekDay.isDestroyed) {
        this.onWeekDay.destroy();
        this.onWeekDay = null;
      }
      this.dayButtons.forEach(function(element2) {
        if (!element2.isDestroyed) {
          element2.destroy();
        }
      });
      this.dayButtons = [];
      this.monthButtons.forEach(function(element2) {
        if (!element2.isDestroyed) {
          element2.destroy();
        }
      });
      this.monthButtons = [];
    };
    RecurrenceEditor2.prototype.resetFields = function() {
      this.startState(NONE, NEVER, this.startDate);
      this.setDefaultValue();
    };
    RecurrenceEditor2.prototype.updateRuleUntilDate = function(startDate) {
      if (this.untilDateObj.value && startDate) {
        var untilDate = this.untilDateObj.value;
        var newUntilDate = new Date(untilDate.getFullYear(), untilDate.getMonth(), untilDate.getDate(), startDate.getHours(), startDate.getMinutes(), startDate.getMilliseconds());
        this.untilDateObj.setProperties({ value: newUntilDate });
      }
    };
    RecurrenceEditor2.prototype.getCalendarMode = function() {
      return this.calendarMode.toLowerCase();
    };
    RecurrenceEditor2.prototype.getRuleSummary = function(rule) {
      if (rule === void 0) {
        rule = this.getRecurrenceRule();
      }
      return generateSummary(rule, this.localeObj, this.locale, this.calendarMode);
    };
    RecurrenceEditor2.prototype.getRecurrenceDates = function(startDate, rule, excludeDate, maximumCount, viewDate) {
      viewDate = isNullOrUndefined(viewDate) ? this.startDate : viewDate;
      return generate(startDate, rule, excludeDate, this.firstDayOfWeek, maximumCount, viewDate, this.calendarMode);
    };
    RecurrenceEditor2.prototype.getRecurrenceRule = function() {
      var ruleData = RULEFREQ + EQUAL;
      switch (this.repeatType.value) {
        case DAILY:
          ruleData += RULEDAILY + SEMICOLON;
          break;
        case WEEKLY:
          ruleData += RULEWEEKLY + SEMICOLON + this.getSelectedDaysData();
          break;
        case MONTHLY:
          ruleData += RULEMONTHLY + SEMICOLON + this.getSelectedMonthData();
          break;
        case YEARLY:
          ruleData += RULEYEARLY + SEMICOLON + this.getSelectedMonthData() + this.getYearMonthRuleData();
          break;
        case NONE:
          return "";
      }
      ruleData += this.getIntervalData();
      switch (this.endType.value) {
        case UNTIL:
          ruleData += this.getUntilData();
          break;
        case COUNT:
          ruleData += this.getEndOnCount();
          break;
      }
      return ruleData;
    };
    RecurrenceEditor2.prototype.setRecurrenceRule = function(rule, startDate) {
      if (startDate === void 0) {
        startDate = this.startDate;
      }
      if (!rule) {
        this.repeatType.setProperties({ value: NONE });
        return;
      }
      this.renderStatus = false;
      this.ruleObject = extractObjectFromRule(rule);
      var endon = this.ruleObject.count ? COUNT : this.ruleObject.until ? UNTIL : NEVER;
      switch (this.ruleObject.freq) {
        case RULEDAILY:
          this.startState(DAILY, endon, startDate);
          this.updateUI(DAILY, endon);
          break;
        case RULEWEEKLY:
          this.startState(WEEKLY, endon, startDate);
          this.updateUI(WEEKLY, endon);
          break;
        case RULEMONTHLY:
          this.startState(MONTHLY, endon, startDate);
          this.updateUI(MONTHLY, endon);
          break;
        case RULEYEARLY:
          this.startState(YEARLY, endon, startDate);
          this.updateUI(YEARLY, endon);
          break;
      }
      this.renderStatus = true;
      this.triggerChangeEvent();
    };
    RecurrenceEditor2.prototype.detachInputs = function() {
      var inputElements = [].slice.call(this.element.querySelectorAll("input"));
      for (var _i = 0, inputElements_1 = inputElements; _i < inputElements_1.length; _i++) {
        var element2 = inputElements_1[_i];
        detach(element2);
      }
    };
    RecurrenceEditor2.prototype.destroy = function() {
      if (!this.isDestroyed) {
        this.destroyComponents();
        _super.prototype.destroy.call(this);
        var removeClasses = ["e-" + this.getModuleName()];
        if (this.cssClass) {
          removeClasses = removeClasses.concat(this.cssClass.split(" "));
        }
        removeClass([this.element], removeClasses);
        this.detachInputs();
        while (this.element.firstElementChild) {
          this.element.removeChild(this.element.firstElementChild);
        }
      }
    };
    RecurrenceEditor2.prototype.getModuleName = function() {
      return "recurrenceeditor";
    };
    RecurrenceEditor2.prototype.getPersistData = function() {
      return this.addOnPersist([]);
    };
    RecurrenceEditor2.prototype.render = function() {
      this.initialize();
      this.rtlClass(this.enableRtl);
      this.renderStatus = true;
      this.renderComplete();
    };
    RecurrenceEditor2.prototype.onPropertyChanged = function(newProp, oldProp) {
      for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {
        var prop = _a[_i];
        switch (prop) {
          case "startDate":
            this.selectMonthDay(newProp.startDate);
            this.updateUntilDate(newProp.startDate);
            this.endType.setProperties({ index: 0 });
            break;
          case "enableRtl":
            this.rtlClass(newProp.enableRtl);
            break;
          case "cssClass":
            if (oldProp.cssClass) {
              removeClass([this.element], oldProp.cssClass.split(" "));
            }
            if (newProp.cssClass) {
              addClass([this.element], newProp.cssClass.split(" "));
            }
            break;
          case "selectedType":
            this.repeatType.setProperties({ index: this.selectedType });
            break;
          case "minDate":
            this.untilDateObj.setProperties({ minDate: this.minDate });
            break;
          case "maxDate":
            this.untilDateObj.setProperties({ maxDate: this.maxDate });
            break;
          case "value":
            if (this.getRecurrenceRule() !== this.value) {
              this.setRecurrenceRule(this.value);
            }
            break;
          case "calendarMode":
            this.calendarMode = newProp.calendarMode;
            this.calendarUtil = getCalendarUtil(newProp.calendarMode);
            break;
          case "locale":
          case "frequencies":
          case "firstDayOfWeek":
            this.refresh();
            break;
          case "dateFormat":
            this.untilDateObj.setProperties({ format: newProp.dateFormat });
            break;
        }
      }
    };
    __decorate$a([
      Property(["none", "daily", "weekly", "monthly", "yearly"])
    ], RecurrenceEditor2.prototype, "frequencies", void 0);
    __decorate$a([
      Property(0)
    ], RecurrenceEditor2.prototype, "firstDayOfWeek", void 0);
    __decorate$a([
      Property(/* @__PURE__ */ new Date())
    ], RecurrenceEditor2.prototype, "startDate", void 0);
    __decorate$a([
      Property()
    ], RecurrenceEditor2.prototype, "dateFormat", void 0);
    __decorate$a([
      Property("Gregorian")
    ], RecurrenceEditor2.prototype, "calendarMode", void 0);
    __decorate$a([
      Property()
    ], RecurrenceEditor2.prototype, "cssClass", void 0);
    __decorate$a([
      Property()
    ], RecurrenceEditor2.prototype, "value", void 0);
    __decorate$a([
      Property(new Date(1900, 0, 1))
    ], RecurrenceEditor2.prototype, "minDate", void 0);
    __decorate$a([
      Property(new Date(2099, 11, 31))
    ], RecurrenceEditor2.prototype, "maxDate", void 0);
    __decorate$a([
      Property(0)
    ], RecurrenceEditor2.prototype, "selectedType", void 0);
    __decorate$a([
      Event$1()
    ], RecurrenceEditor2.prototype, "change", void 0);
    RecurrenceEditor2 = __decorate$a([
      NotifyPropertyChanges
    ], RecurrenceEditor2);
    return RecurrenceEditor2;
  }(Component)
);
var EVENT_FIELD = "e-field";
var REPEAT_CONTAINER_CLASS = "e-recurrence-container";
var REPEAT_BUTTON_ICON_CLASS = "e-recurrence-edit";
var REPEAT_BUTTON_CLASS = "e-recurrence-edit-button";
var REPEAT_DIALOG_CLASS = "e-recurrence-dialog";
var HIDE_STYLE_CLASS = "e-hide";
var EventWindow = (
  /** @class */
  function() {
    function EventWindow2(parent) {
      this.parent = parent;
      this.l10n = this.parent.localeObj;
      this.fields = this.parent.eventFields;
      this.eventWindowTime = { startTime: /* @__PURE__ */ new Date(), endTime: /* @__PURE__ */ new Date() };
      this.renderEventWindow();
    }
    EventWindow2.prototype.renderEventWindow = function() {
      this.element = createElement("div", { id: this.parent.element.id + "_dialog_wrapper" });
      this.parent.element.appendChild(this.element);
      var dialogModel = {
        animationSettings: { effect: "Zoom" },
        content: this.getEventWindowContent(),
        cssClass: EVENT_WINDOW_DIALOG_CLASS,
        enableRtl: this.parent.enableRtl,
        enableHtmlSanitizer: this.parent.enableHtmlSanitizer,
        height: this.parent.isAdaptive ? "100%" : "auto",
        minHeight: "300px",
        isModal: true,
        showCloseIcon: this.parent.isAdaptive ? false : true,
        target: document.body,
        visible: false,
        width: "500px",
        beforeOpen: this.onBeforeOpen.bind(this),
        beforeClose: this.onBeforeClose.bind(this)
      };
      if (this.parent.isAdaptive) {
        dialogModel.cssClass = EVENT_WINDOW_DIALOG_CLASS + " " + DEVICE_CLASS;
        dialogModel.header = '<div class="e-title-header"><div class="e-back-icon e-icons"></div><div class="e-title-text">' + this.l10n.getConstant("newEvent") + '</div><div class="e-save-icon e-icons"></div></div>';
      } else {
        dialogModel.buttons = [{
          buttonModel: {
            content: this.l10n.getConstant("deleteButton"),
            cssClass: DELETE_EVENT_CLASS,
            disabled: !this.parent.eventSettings.allowDeleting || this.parent.readonly
          },
          click: this.eventDelete.bind(this)
        }, {
          buttonModel: {
            content: this.l10n.getConstant("saveButton"),
            cssClass: "e-primary " + EVENT_WINDOW_SAVE_BUTTON_CLASS,
            isPrimary: true,
            disabled: !this.parent.eventSettings.allowAdding || this.parent.readonly
          },
          click: this.eventSave.bind(this)
        }, {
          buttonModel: { cssClass: EVENT_WINDOW_CANCEL_BUTTON_CLASS, content: this.l10n.getConstant("cancelButton") },
          click: this.dialogClose.bind(this)
        }];
        dialogModel.header = '<div class="e-title-text">' + this.l10n.getConstant("newEvent") + "</div>";
      }
      this.dialogObject = new Dialog(dialogModel, this.element);
      if (this.dialogObject.element.querySelector(".e-dlg-closeicon-btn")) {
        this.dialogObject.element.querySelector(".e-dlg-closeicon-btn").setAttribute("title", this.l10n.getConstant("close"));
      }
      addClass([this.element.parentElement], EVENT_WINDOW_DIALOG_CLASS + "-container");
      if (this.parent.isAdaptive) {
        EventHandler.add(this.element.querySelector("." + EVENT_WINDOW_BACK_ICON_CLASS), "click", this.dialogClose, this);
        EventHandler.add(this.element.querySelector("." + EVENT_WINDOW_SAVE_ICON_CLASS), "click", this.eventSave, this);
      }
      EventHandler.add(this.dialogObject.element, "keydown", this.preventEventSave, this);
      this.applyFormValidation();
    };
    EventWindow2.prototype.refresh = function() {
      this.destroy(true);
      this.renderEventWindow();
    };
    EventWindow2.prototype.refreshRecurrenceEditor = function() {
      if (this.recurrenceEditor) {
        var recurrenceEditor = this.recurrenceEditor.element;
        this.recurrenceEditor.destroy();
        this.createRecurrenceEditor(recurrenceEditor);
      }
    };
    EventWindow2.prototype.setRecurrenceEditor = function(recurrenceEditor) {
      if (this.parent.editorTemplate) {
        this.recurrenceEditor = recurrenceEditor;
      }
    };
    EventWindow2.prototype.openEditor = function(data, type, isEventData, repeatType) {
      this.parent.currentAction = type;
      this.parent.removeNewEventElement();
      if (this.parent.quickPopup) {
        this.parent.quickPopup.quickPopupHide(true);
      }
      this.parent.inlineModule.removeInlineAppointmentElement();
      if (type === "Add") {
        var eventObj = {};
        this.cellClickAction = !isEventData;
        this.parent.activeCellsData = data;
        var event_1 = data;
        if (this.cellClickAction) {
          this.convertToEventData(event_1, eventObj);
        } else {
          this.parent.activeCellsData = {
            startTime: event_1.startTime || event_1[this.fields.startTime],
            endTime: event_1.endTime || event_1[this.fields.endTime],
            isAllDay: event_1.isAllDay || event_1[this.fields.isAllDay],
            element: event_1.element,
            groupIndex: event_1.groupIndex
          };
          eventObj = event_1;
        }
        data = eventObj;
      }
      if (!isNullOrUndefined(this.parent.editorTemplate)) {
        this.renderFormElements(this.element.querySelector(".e-schedule-form"), data);
      }
      if (!this.parent.isAdaptive && isNullOrUndefined(this.parent.editorTemplate)) {
        removeClass([this.dialogObject.element.querySelector(".e-recurrenceeditor")], DISABLE_CLASS);
      }
      if (this.recurrenceEditor) {
        this.recurrenceEditor.firstDayOfWeek = this.parent.activeViewOptions.firstDayOfWeek;
      }
      switch (type) {
        case "Add":
          this.onCellDetailsUpdate(data, repeatType);
          break;
        case "Save":
        case "EditOccurrence":
        case "EditSeries":
        case "EditFollowingEvents":
          if (type === "EditOccurrence" && !this.parent.isAdaptive && isNullOrUndefined(this.parent.editorTemplate)) {
            addClass([this.dialogObject.element.querySelector(".e-recurrenceeditor")], DISABLE_CLASS);
          }
          this.cellClickAction = false;
          this.onEventDetailsUpdate(data);
          break;
      }
    };
    EventWindow2.prototype.setDialogContent = function() {
      this.dialogObject.content = this.getEventWindowContent();
      this.dialogObject.dataBind();
      this.applyFormValidation();
    };
    EventWindow2.prototype.preventEventSave = function(e) {
      if (this.parent && !this.parent.allowKeyboardInteraction && e.code === "Enter") {
        this.isEnterKey = true;
      }
    };
    EventWindow2.prototype.onBeforeOpen = function(args) {
      var _this = this;
      var eventProp = {
        type: "Editor",
        data: this.eventData,
        cancel: false,
        element: this.element,
        target: this.cellClickAction ? this.parent.activeCellsData.element : this.parent.activeEventData.element
      };
      if (this.cellClickAction) {
        eventProp.duration = this.getSlotDuration();
      }
      var saveObj = this.getInstance(EVENT_WINDOW_SAVE_BUTTON_CLASS);
      if (saveObj) {
        saveObj.disabled = !(this.cellClickAction ? this.parent.eventSettings.allowAdding : this.parent.eventSettings.allowEditing);
        saveObj.dataBind();
      }
      var deleteObj = this.getInstance(DELETE_EVENT_CLASS);
      if (deleteObj) {
        deleteObj.disabled = !this.parent.eventSettings.allowDeleting;
        deleteObj.dataBind();
      }
      var callBackPromise = new Deferred$1();
      this.parent.trigger(popupOpen, eventProp, function(popupArgs) {
        args.cancel = popupArgs.cancel;
        _this.duration = _this.cellClickAction ? popupArgs.duration : null;
        _this.refreshDateTimePicker(_this.duration);
        if (_this.cellClickAction && popupArgs.duration !== _this.getSlotDuration() && isNullOrUndefined(_this.parent.editorTemplate)) {
          var startObj = _this.getInstance(EVENT_WINDOW_START_CLASS);
          var endObj = _this.getInstance(EVENT_WINDOW_END_CLASS);
          endObj.value = new Date(startObj.value.getTime() + MS_PER_MINUTE * popupArgs.duration);
          endObj.dataBind();
        }
        if (_this.parent.editorTemplate && _this.element.querySelector(".e-recurrenceeditor") && !_this.recurrenceEditor) {
          _this.recurrenceEditor = _this.getInstance("e-recurrenceeditor");
        }
        callBackPromise.resolve(args);
      });
      return callBackPromise;
    };
    EventWindow2.prototype.onBeforeClose = function(args) {
      var _this = this;
      if (args.isInteracted) {
        this.isCrudAction = false;
      }
      var eventProp = {
        type: "Editor",
        event: args.event || this.dialogEvent,
        data: this.eventCrudData,
        cancel: false,
        element: this.element,
        target: this.cellClickAction ? this.parent.activeCellsData.element : this.parent.activeEventData.element
      };
      var callBackPromise = new Deferred$1();
      this.parent.trigger(popupClose, eventProp, function(popupArgs) {
        args.cancel = popupArgs.cancel;
        if (!popupArgs.cancel) {
          if (_this.isCrudAction) {
            args.cancel = _this.processCrudActions(popupArgs.data);
            _this.isCrudAction = args.cancel;
          }
          if (!_this.isCrudAction) {
            _this.resetForm();
            _this.parent.eventBase.focusElement(true);
            _this.eventCrudData = null;
          }
        }
        callBackPromise.resolve(args);
      });
      return callBackPromise;
    };
    EventWindow2.prototype.getEventWindowContent = function() {
      var container = createElement("div", { className: FORM_CONTAINER_CLASS });
      var form = createElement("form", {
        id: this.parent.element.id + "EditForm",
        className: FORM_CLASS,
        attrs: { onsubmit: "return false;" }
      });
      this.renderFormElements(form);
      container.appendChild(form);
      return container;
    };
    EventWindow2.prototype.renderFormElements = function(form, args) {
      var _this = this;
      if (!isNullOrUndefined(this.parent.editorTemplate)) {
        if (args) {
          if (this.fieldValidator) {
            this.fieldValidator.destroy();
            this.fieldValidator = null;
          }
          if (this.recurrenceEditor) {
            this.recurrenceEditor.destroy();
            this.recurrenceEditor = null;
          }
          this.destroyComponents();
          var formElements = [].slice.call(form.children);
          for (var _i = 0, formElements_1 = formElements; _i < formElements_1.length; _i++) {
            var element2 = formElements_1[_i];
            remove(element2);
          }
          this.parent.resetTemplates(["editorTemplate"]);
        }
        var templateId = this.parent.element.id + "_editorTemplate";
        var tempEle = [].slice.call(this.parent.getEditorTemplate()(args || {}, this.parent, "editorTemplate", templateId, false));
        append2(tempEle, form);
        this.parent.renderTemplates(function() {
          if (_this.element) {
            _this.applyFormValidation();
          }
        });
      } else {
        form.appendChild(this.getDefaultEventWindowContent());
      }
    };
    EventWindow2.prototype.getDefaultEventWindowContent = function() {
      var parentDiv = this.createDivElement(EVENT_WINDOW_DIALOG_PARENT_CLASS);
      var titleLocationDiv = this.createDivElement(EVENT_WINDOW_TITLE_LOCATION_DIV_CLASS);
      parentDiv.appendChild(titleLocationDiv);
      titleLocationDiv.appendChild(this.renderTextBox(SUBJECT_CLASS));
      titleLocationDiv.querySelector("." + SUBJECT_CLASS).setAttribute("title", this.parent.editorTitles.subject);
      titleLocationDiv.appendChild(this.renderTextBox(LOCATION_CLASS));
      titleLocationDiv.querySelector("." + LOCATION_CLASS).setAttribute("title", this.parent.editorTitles.location);
      var startEndDateTimeDiv = this.createDivElement(EVENT_WINDOW_START_END_DIV_CLASS);
      parentDiv.appendChild(startEndDateTimeDiv);
      startEndDateTimeDiv.appendChild(this.renderDateTimePicker(EVENT_WINDOW_START_CLASS, this.onTimeChange.bind(this)));
      startEndDateTimeDiv.querySelector("." + EVENT_WINDOW_START_CLASS).setAttribute("title", this.parent.editorTitles.startTime);
      startEndDateTimeDiv.appendChild(this.renderDateTimePicker(EVENT_WINDOW_END_CLASS));
      startEndDateTimeDiv.querySelector("." + EVENT_WINDOW_END_CLASS).setAttribute("title", this.parent.editorTitles.endTime);
      var allDayTimezoneDiv = this.createDivElement(EVENT_WINDOW_ALLDAY_TZ_DIV_CLASS);
      parentDiv.appendChild(allDayTimezoneDiv);
      allDayTimezoneDiv.appendChild(this.renderCheckBox(EVENT_WINDOW_ALL_DAY_CLASS));
      allDayTimezoneDiv.appendChild(this.renderCheckBox(TIME_ZONE_CLASS));
      var timezoneParentDiv = this.createDivElement(EVENT_WINDOW_TIME_ZONE_DIV_CLASS);
      parentDiv.appendChild(timezoneParentDiv);
      timezoneParentDiv.appendChild(this.renderDropDown(EVENT_WINDOW_START_TZ_CLASS));
      timezoneParentDiv.appendChild(this.renderDropDown(EVENT_WINDOW_END_TZ_CLASS));
      var repeatParentDiv = this.createDivElement(EVENT_WINDOW_REPEAT_DIV_CLASS);
      parentDiv.appendChild(repeatParentDiv);
      var repeatDiv = this.renderCheckBox(EVENT_WINDOW_REPEAT_CLASS);
      var repeatEditContainer = createElement("span", { className: REPEAT_CONTAINER_CLASS });
      var button = createElement("button", {
        className: REPEAT_BUTTON_CLASS,
        attrs: { type: "button", "title": this.l10n.getConstant("editRecurrence") }
      });
      this.buttonObj = new Button({ iconCss: REPEAT_BUTTON_ICON_CLASS + " e-icons", cssClass: "e-medium " + this.parent.cssClass });
      repeatEditContainer.appendChild(button);
      this.buttonObj.appendTo(button);
      repeatDiv.appendChild(repeatEditContainer);
      repeatParentDiv.appendChild(repeatDiv);
      if (this.parent.isAdaptive) {
        EventHandler.add(button, "click", this.loadRecurrenceEditor, this);
      } else {
        this.createRecurrenceEditor(parentDiv);
      }
      if (this.parent.resourceCollection.length > 0) {
        var resourceParentDiv = this.createDivElement(EVENT_WINDOW_RESOURCES_DIV_CLASS);
        for (var _i = 0, _a = this.parent.resourceBase.resourceCollection; _i < _a.length; _i++) {
          var resource = _a[_i];
          resourceParentDiv.appendChild(this.renderResourceDetails(resource));
        }
        parentDiv.appendChild(resourceParentDiv);
      }
      var description = this.createDivElement(DESCRIPTION_CLASS + "-row");
      description.appendChild(this.renderTextBox(DESCRIPTION_CLASS));
      description.querySelector("." + DESCRIPTION_CLASS).setAttribute("title", this.parent.editorTitles.description);
      parentDiv.appendChild(description);
      var submit = createElement("button", { attrs: { type: "hidden", title: "submit", style: "display:none" } });
      parentDiv.appendChild(submit);
      return parentDiv;
    };
    EventWindow2.prototype.createRecurrenceEditor = function(parentDiv) {
      var recurrenceEditor = createElement("div", { id: this.parent.element.id + "_recurrence_editor" });
      parentDiv.appendChild(recurrenceEditor);
      this.recurrenceEditor = this.renderRecurrenceEditor();
      this.recurrenceEditor.appendTo(recurrenceEditor);
      this.updateMinMaxDateToEditor();
    };
    EventWindow2.prototype.createDivElement = function(className) {
      return createElement("div", { className });
    };
    EventWindow2.prototype.createInputElement = function(className, fieldName, type) {
      return createElement(type || "input", {
        className,
        attrs: {
          type: "text",
          name: fieldName,
          value: "",
          id: fieldName,
          title: this.l10n.getConstant(fieldName.charAt(0).toLowerCase() + fieldName.slice(1)) === "" ? fieldName : this.l10n.getConstant(fieldName.charAt(0).toLowerCase() + fieldName.slice(1))
        }
      });
    };
    EventWindow2.prototype.getSlotDuration = function() {
      return this.parent.activeViewOptions.timeScale.interval / this.parent.activeViewOptions.timeScale.slotCount;
    };
    EventWindow2.prototype.renderDateTimePicker = function(value, changeEvent) {
      var dateTimeDiv = this.createDivElement(value + "-container");
      var fieldName = this.getFieldName(value);
      var dateTimeInput = this.createInputElement(value + " " + EVENT_FIELD, fieldName);
      dateTimeDiv.appendChild(dateTimeInput);
      var dateTimePicker = new DateTimePicker({
        change: changeEvent,
        firstDayOfWeek: this.parent.activeViewOptions.firstDayOfWeek,
        calendarMode: this.parent.calendarMode,
        min: this.parent.minDate,
        max: new Date((/* @__PURE__ */ new Date(+this.parent.maxDate)).setHours(23, 59, 59)),
        cssClass: this.parent.cssClass,
        enableRtl: this.parent.enableRtl,
        locale: this.parent.locale,
        floatLabelType: "Always",
        timeFormat: this.parent.activeViewOptions.timeFormat,
        format: (isNullOrUndefined(this.parent.dateFormat) ? this.getFormat("dateFormats") : this.parent.dateFormat) + " " + this.parent.activeViewOptions.timeFormat,
        placeholder: this.getFieldLabel(value),
        step: this.getSlotDuration(),
        width: "100%"
      });
      dateTimePicker.appendTo(dateTimeInput);
      return dateTimeDiv;
    };
    EventWindow2.prototype.refreshDateTimePicker = function(duration) {
      var elementSelector = "." + EVENT_WINDOW_START_CLASS + ",." + EVENT_WINDOW_END_CLASS;
      var startEndElement = [].slice.call(this.element.querySelectorAll(elementSelector));
      for (var _i = 0, startEndElement_1 = startEndElement; _i < startEndElement_1.length; _i++) {
        var element2 = startEndElement_1[_i];
        var instance = element2.ej2_instances[0];
        instance.firstDayOfWeek = this.parent.activeViewOptions.firstDayOfWeek;
        instance.timeFormat = this.parent.activeViewOptions.timeFormat;
        instance.step = duration || this.getSlotDuration();
        instance.dataBind();
      }
    };
    EventWindow2.prototype.onTimeChange = function() {
      var startObj = this.getInstance(EVENT_WINDOW_START_CLASS);
      if (startObj.element.parentElement.classList.contains("e-input-focus")) {
        var endObj = this.getInstance(EVENT_WINDOW_END_CLASS);
        var duration = 0;
        if (this.cellClickAction) {
          duration = MS_PER_MINUTE * this.duration;
          this.eventWindowTime.startTime = startObj.value;
        } else {
          duration = this.eventData[this.fields.endTime].getTime() - this.eventData[this.fields.startTime].getTime();
        }
        var endDate = isNullOrUndefined(startObj.value) ? null : new Date(startObj.value.getTime() + duration);
        if (this.cellClickAction) {
          this.eventWindowTime.endTime = endDate;
        }
        endObj.value = endDate;
        endObj.dataBind();
      }
      if (this.recurrenceEditor) {
        this.recurrenceEditor.updateRuleUntilDate(this.eventWindowTime.startTime);
      }
    };
    EventWindow2.prototype.renderResourceDetails = function(resourceData) {
      var fieldName = resourceData.field;
      var value = "e-" + fieldName;
      var labelValue = resourceData.title;
      var resourceDiv = this.createDivElement(value + "-container e-resources");
      var resourceInput = this.createInputElement(value + " " + EVENT_FIELD, fieldName);
      resourceDiv.appendChild(resourceInput);
      var resourceTemplate = '<div class="e-resource-template"><div class="e-resource-color" style="background-color:${' + resourceData.colorField + '}"></div><div class="e-resource-text">${' + resourceData.textField + "}</div></div>";
      if (resourceData.allowMultiple) {
        var listObj = new MultiSelect({
          enableRtl: this.parent.enableRtl,
          enableHtmlSanitizer: this.parent.enableHtmlSanitizer,
          cssClass: this.parent.cssClass || "",
          dataSource: resourceData.dataSource,
          change: this.onMultiselectResourceChange.bind(this),
          itemTemplate: resourceTemplate,
          fields: {
            text: resourceData.textField,
            value: resourceData.idField
          },
          htmlAttributes: { "title": labelValue, "name": fieldName },
          floatLabelType: "Always",
          placeholder: labelValue,
          popupHeight: "230px",
          popupWidth: "447px",
          mode: "Box"
        });
        listObj.appendTo(resourceInput);
      } else {
        var dropDownList = new DropDownList({
          cssClass: this.parent.cssClass || "",
          change: this.onDropdownResourceChange.bind(this),
          dataSource: resourceData.dataSource,
          enableRtl: this.parent.enableRtl,
          fields: {
            text: resourceData.textField,
            value: resourceData.idField
          },
          htmlAttributes: { "title": labelValue, "name": fieldName },
          floatLabelType: "Always",
          placeholder: labelValue,
          popupHeight: "230px",
          popupWidth: "447px",
          itemTemplate: resourceTemplate
        });
        dropDownList.appendTo(resourceInput);
      }
      return resourceDiv;
    };
    EventWindow2.prototype.renderDropDown = function(value) {
      var _this = this;
      var fieldName = this.getFieldName(value);
      var timezoneDiv = this.createDivElement(value + "-container");
      var timezoneInput = this.createInputElement(value + " " + EVENT_FIELD, fieldName);
      timezoneDiv.appendChild(timezoneInput);
      var dropDownList = new DropDownList({
        allowFiltering: true,
        change: this.onTimezoneChange.bind(this),
        cssClass: this.parent.cssClass || "",
        dataSource: this.parent.timezoneDataSource,
        enableRtl: this.parent.enableRtl,
        fields: { text: "Text", value: "Value" },
        filterBarPlaceholder: this.parent.localeObj.getConstant("searchTimezone"),
        noRecordsTemplate: this.parent.localeObj.getConstant("noRecords"),
        filtering: function(e) {
          var query = new Query();
          query = e.text !== "" ? query.where("Text", "contains", e.text, true) : query;
          e.updateData(_this.parent.timezoneDataSource, query);
        },
        htmlAttributes: { "title": this.getFieldLabel(value), "name": fieldName, role: "option" },
        floatLabelType: "Always",
        placeholder: this.getFieldLabel(value),
        popupHeight: "230px"
      });
      dropDownList.appendTo(timezoneInput);
      return timezoneDiv;
    };
    EventWindow2.prototype.onMultiselectResourceChange = function(args) {
      if (!args.value || !this.parent.activeViewOptions.group.byGroupID || this.parent.resourceCollection.length <= 1) {
        return;
      }
      var resourceCollection = this.parent.resourceBase.resourceCollection;
      var fieldName = args.element.getAttribute("name") || this.getColumnName(args.element);
      for (var i = 0; i < resourceCollection.length; i++) {
        if (resourceCollection[parseInt(i.toString(), 10)].field === fieldName && i < resourceCollection.length - 1) {
          var resObject = this.createInstance(i);
          var datasource = [];
          var _loop_1 = function(j2) {
            var resourceModel = resourceCollection[i + 1];
            var filter2 = resourceModel.dataSource.filter(function(data) {
              return data[resourceModel.groupIDField] === args.value[parseInt(j2.toString(), 10)];
            })[0];
            var groupId = !isNullOrUndefined(filter2) ? filter2[resourceCollection[i + 1].groupIDField] : null;
            var filterRes = this_1.filterDatasource(i, groupId);
            datasource = datasource.concat(filterRes);
          };
          var this_1 = this;
          for (var j = 0; j < args.value.length; j++) {
            _loop_1(j);
          }
          resObject.dataSource = datasource;
          resObject.dataBind();
        }
      }
    };
    EventWindow2.prototype.createInstance = function(index) {
      var resourceData = this.parent.resourceBase.resourceCollection[index + 1];
      var resObject = this.element.querySelector(".e-" + resourceData.field).ej2_instances[0];
      resObject.clear();
      return resObject;
    };
    EventWindow2.prototype.onDropdownResourceChange = function(args) {
      if (!args.value || this.parent.resourceCollection.length <= 1 || !this.parent.activeViewOptions.group.byGroupID) {
        return;
      }
      var fieldName = args.element.getAttribute("name") || this.getColumnName(args.element);
      var resourceCollection = this.parent.resourceBase.resourceCollection;
      for (var i = 0; i < resourceCollection.length; i++) {
        if (i < resourceCollection.length - 1 && resourceCollection[parseInt(i.toString(), 10)].field === fieldName) {
          var resObj = this.createInstance(i);
          var groupId = args.itemData[resourceCollection[parseInt(i.toString(), 10)].idField];
          resObj.dataSource = this.filterDatasource(i, groupId);
          resObj.dataBind();
          var resValue = resObj.dataSource.length > 0 ? resObj.dataSource[0][resourceCollection[i + 1].idField] : null;
          resObj.value = resourceCollection[i + 1].allowMultiple ? [resValue] : resValue;
          resObj.dataBind();
        }
      }
    };
    EventWindow2.prototype.filterDatasource = function(index, groupId) {
      var resourceData = this.parent.resourceBase.resourceCollection[index + 1];
      return resourceData.dataSource.filter(function(data) {
        return data[resourceData.groupIDField] === groupId;
      });
    };
    EventWindow2.prototype.onTimezoneChange = function(args) {
      var fieldName = args.element.getAttribute("name") || this.getColumnName(args.element);
      if (fieldName === this.parent.eventFields.startTimezone) {
        var startTimezoneObj = this.getInstance(EVENT_WINDOW_START_TZ_CLASS);
        var endTimezoneObj = this.getInstance(EVENT_WINDOW_END_TZ_CLASS);
        endTimezoneObj.value = startTimezoneObj.value;
        endTimezoneObj.dataBind();
      }
    };
    EventWindow2.prototype.renderCheckBox = function(value) {
      var checkBoxDiv = this.createDivElement(value + "-container");
      var fieldName = this.getFieldName(value);
      var checkBoxInput = this.createInputElement(value + " " + EVENT_FIELD, fieldName);
      checkBoxDiv.appendChild(checkBoxInput);
      var checkBox = new CheckBox({
        change: this.onChange.bind(this),
        cssClass: value + " " + this.parent.cssClass,
        enableRtl: this.parent.enableRtl,
        enableHtmlSanitizer: this.parent.enableHtmlSanitizer,
        label: this.getFieldLabel(value)
      });
      checkBox.appendTo(checkBoxInput);
      checkBoxInput.setAttribute("name", fieldName);
      if (fieldName === "Repeat") {
        this.repeatStatus = checkBox;
      }
      return checkBoxDiv;
    };
    EventWindow2.prototype.renderTextBox = function(value) {
      var textBoxDiv = this.createDivElement(value + "-container");
      var fieldName = this.getFieldName(value);
      var elementType = value === DESCRIPTION_CLASS ? "textarea" : "input";
      var textBoxInput = this.createInputElement(value + " " + EVENT_FIELD, fieldName, elementType);
      textBoxDiv.appendChild(textBoxInput);
      Input.createInput({
        element: textBoxInput,
        floatLabelType: "Always",
        properties: {
          enableRtl: this.parent.enableRtl,
          placeholder: this.getFieldLabel(value)
        }
      });
      return textBoxDiv;
    };
    EventWindow2.prototype.getFieldName = function(name) {
      var fieldName = "";
      switch (name) {
        case SUBJECT_CLASS:
          fieldName = this.fields.subject;
          break;
        case LOCATION_CLASS:
          fieldName = this.fields.location;
          break;
        case EVENT_WINDOW_START_CLASS:
          fieldName = this.fields.startTime;
          break;
        case EVENT_WINDOW_END_CLASS:
          fieldName = this.fields.endTime;
          break;
        case DESCRIPTION_CLASS:
          fieldName = this.fields.description;
          break;
        case EVENT_WINDOW_ALL_DAY_CLASS:
          fieldName = this.fields.isAllDay;
          break;
        case EVENT_WINDOW_START_TZ_CLASS:
          fieldName = this.fields.startTimezone;
          break;
        case EVENT_WINDOW_END_TZ_CLASS:
          fieldName = this.fields.endTimezone;
          break;
        case TIME_ZONE_CLASS:
          fieldName = "Timezone";
          break;
        case EVENT_WINDOW_REPEAT_CLASS:
          fieldName = "Repeat";
          break;
      }
      return fieldName;
    };
    EventWindow2.prototype.getFieldLabel = function(fieldName) {
      var labelText = "";
      switch (fieldName) {
        case SUBJECT_CLASS:
          labelText = this.parent.editorTitles.subject;
          break;
        case LOCATION_CLASS:
          labelText = this.parent.editorTitles.location;
          break;
        case DESCRIPTION_CLASS:
          labelText = this.parent.editorTitles.description;
          break;
        case EVENT_WINDOW_START_CLASS:
          labelText = this.parent.editorTitles.startTime;
          break;
        case EVENT_WINDOW_END_CLASS:
          labelText = this.parent.editorTitles.endTime;
          break;
        case EVENT_WINDOW_START_TZ_CLASS:
          labelText = this.parent.editorTitles.startTimezone;
          break;
        case EVENT_WINDOW_END_TZ_CLASS:
          labelText = this.parent.editorTitles.endTimezone;
          break;
        case EVENT_WINDOW_REPEAT_CLASS:
          labelText = this.parent.editorTitles.recurrenceRule;
          break;
        case EVENT_WINDOW_ALL_DAY_CLASS:
          labelText = this.parent.editorTitles.isAllDay;
          break;
        case TIME_ZONE_CLASS:
          labelText = this.l10n.getConstant("timezone");
          break;
      }
      return labelText;
    };
    EventWindow2.prototype.onChange = function(args) {
      var targetSelector = "." + EVENT_WINDOW_ALL_DAY_CLASS + ",." + TIME_ZONE_CLASS + ",." + EVENT_WINDOW_REPEAT_CLASS;
      var target = closest(args.event.target, targetSelector);
      if (target.classList.contains(EVENT_WINDOW_ALL_DAY_CLASS)) {
        this.onAllDayChange(args.checked);
      } else if (target.classList.contains(TIME_ZONE_CLASS)) {
        this.timezoneChangeStyle(args.checked);
      } else if (target.classList.contains(EVENT_WINDOW_REPEAT_CLASS)) {
        this.onRepeatChange(args.checked);
      }
    };
    EventWindow2.prototype.renderRepeatDialog = function() {
      var element2 = createElement("div");
      this.repeatDialogObject = new Dialog({
        header: this.l10n.getConstant("recurrence"),
        visible: false,
        content: '<div class="e-rec-editor"></div>',
        closeOnEscape: true,
        width: "90%",
        buttons: [
          {
            click: this.repeatSaveDialog.bind(this),
            buttonModel: { content: this.l10n.getConstant("save"), cssClass: "e-save", isPrimary: true }
          },
          { click: this.repeatCancelDialog.bind(this), buttonModel: { cssClass: "e-cancel", content: this.l10n.getConstant("cancel") } }
        ],
        target: this.element,
        animationSettings: { effect: "Zoom" },
        enableRtl: this.parent.enableRtl,
        enableHtmlSanitizer: this.parent.enableHtmlSanitizer,
        isModal: true,
        cssClass: REPEAT_DIALOG_CLASS,
        open: this.repeatOpenDialog.bind(this)
      });
      this.element.appendChild(element2);
      this.repeatDialogObject.appendTo(element2);
      this.createRecurrenceEditor(this.repeatDialogObject.element.querySelector(".e-rec-editor"));
    };
    EventWindow2.prototype.loadRecurrenceEditor = function() {
      this.repeatDialogObject.show();
      if (this.recurrenceEditor && this.repeatRule) {
        this.recurrenceEditor.setRecurrenceRule(this.repeatRule);
      }
    };
    EventWindow2.prototype.onRepeatChange = function(state) {
      if (state) {
        if (!this.repeatDialogObject) {
          this.renderRepeatDialog();
        }
        this.recurrenceEditor.setProperties({ startDate: this.repeatStartDate, selectedType: 0 });
        this.loadRecurrenceEditor();
      } else {
        if (this.repeatDialogObject) {
          this.repeatDialogObject.hide();
        }
        this.repeatRule = "";
        if (this.recurrenceEditor) {
          this.recurrenceEditor.setRecurrenceRule(this.repeatRule);
          this.updateRepeatLabel(this.repeatRule);
        }
        var element2 = this.element.querySelector("." + REPEAT_CONTAINER_CLASS);
        addClass([element2], HIDE_STYLE_CLASS);
      }
    };
    EventWindow2.prototype.repeatSaveDialog = function() {
      this.repeatRule = this.recurrenceEditor.getRecurrenceRule();
      var element2 = this.element.querySelector("." + REPEAT_CONTAINER_CLASS);
      if (this.recurrenceEditor.getRecurrenceRule()) {
        removeClass([element2], HIDE_STYLE_CLASS);
      } else {
        addClass([element2], HIDE_STYLE_CLASS);
        this.repeatStatus.setProperties({ checked: false });
      }
      this.updateRepeatLabel(this.repeatRule);
      this.closeRepeatDialog();
    };
    EventWindow2.prototype.closeRepeatDialog = function() {
      this.repeatDialogObject.hide();
    };
    EventWindow2.prototype.repeatCancelDialog = function() {
      this.closeRepeatDialog();
      if (this.recurrenceEditor) {
        this.recurrenceEditor.setRecurrenceRule(this.repeatTempRule);
      }
      if (!this.repeatTempRule) {
        this.repeatStatus.setProperties({ checked: false });
      }
    };
    EventWindow2.prototype.repeatOpenDialog = function() {
      this.repeatTempRule = this.recurrenceEditor.getRecurrenceRule();
    };
    EventWindow2.prototype.onCellDetailsUpdate = function(eventObj, repeatType) {
      if (!this.parent.eventSettings.allowAdding) {
        return;
      }
      if (this.parent.isAdaptive && repeatType && !this.repeatDialogObject) {
        this.renderRepeatDialog();
      }
      this.element.querySelector("." + FORM_CLASS).removeAttribute("data-id");
      this.element.querySelector("." + EVENT_WINDOW_TITLE_TEXT_CLASS).innerHTML = this.l10n.getConstant("newEvent");
      eventObj.Timezone = false;
      this.repeatStartDate = eventObj[this.fields.startTime];
      this.repeatRule = "";
      if (!isNullOrUndefined(this.parent.eventSettings.fields.subject.default)) {
        eventObj[this.fields.subject] = this.parent.eventSettings.fields.subject.default;
      }
      if (!isNullOrUndefined(this.parent.eventSettings.fields.location.default)) {
        eventObj[this.fields.location] = this.parent.eventSettings.fields.location.default;
      }
      if (!isNullOrUndefined(this.parent.eventSettings.fields.description.default)) {
        eventObj[this.fields.description] = this.parent.eventSettings.fields.description.default;
      }
      this.showDetails(eventObj);
      if (eventObj[this.fields.recurrenceRule] && this.recurrenceEditor) {
        this.recurrenceEditor.setRecurrenceRule(eventObj[this.fields.recurrenceRule], eventObj[this.fields.startTime]);
        this.repeatRule = eventObj[this.fields.recurrenceRule];
      }
      var deleteButton = this.element.querySelector("." + DELETE_EVENT_CLASS);
      if (deleteButton) {
        addClass([deleteButton], DISABLE_CLASS);
      }
      if (this.recurrenceEditor) {
        this.recurrenceEditor.setProperties({
          startDate: eventObj[this.fields.startTime],
          selectedType: !isNullOrUndefined(repeatType) ? repeatType : !isNullOrUndefined(eventObj[this.fields.recurrenceRule]) ? this.recurrenceEditor.selectedType : 0
        });
        this.repeatRule = this.recurrenceEditor.value;
      }
      if (this.parent.isAdaptive && isNullOrUndefined(this.parent.editorTemplate)) {
        var element2 = this.element.querySelector("." + REPEAT_CONTAINER_CLASS);
        if (eventObj[this.fields.recurrenceRule] || repeatType) {
          removeClass([element2], HIDE_STYLE_CLASS);
          this.repeatStatus.setProperties({ checked: true });
        } else {
          addClass([element2], HIDE_STYLE_CLASS);
          this.repeatStatus.setProperties({ checked: false });
        }
        this.updateRepeatLabel(this.repeatRule);
      } else {
        var saveButton = this.element.querySelector("." + EVENT_WINDOW_SAVE_BUTTON_CLASS);
        this.disableButton(saveButton, false);
      }
      this.dialogObject.show();
    };
    EventWindow2.prototype.convertToEventData = function(cellsData, eventObj) {
      if (cellsData.subject) {
        eventObj[this.fields.subject] = cellsData.subject;
      }
      eventObj[this.fields.startTime] = cellsData.startTime;
      eventObj[this.fields.endTime] = cellsData.endTime;
      eventObj[this.fields.isAllDay] = cellsData.isAllDay;
      if (cellsData.RecurrenceRule) {
        eventObj[this.fields.recurrenceRule] = cellsData.RecurrenceRule;
      }
      if (this.parent.resourceCollection.length > 0 || this.parent.activeViewOptions.group.resources.length > 0) {
        this.parent.resourceBase.setResourceValues(eventObj);
      }
    };
    EventWindow2.prototype.applyFormValidation = function() {
      var form = this.element.querySelector("." + FORM_CLASS);
      if (!form) {
        return;
      }
      var getValidationRule = function(rules2) {
        return rules2 && Object.keys(rules2).length > 0 ? rules2 : void 0;
      };
      var rules = {};
      var subjectRule = getValidationRule(this.parent.eventSettings.fields.subject.validation);
      if (!isNullOrUndefined(subjectRule)) {
        rules[this.parent.eventSettings.fields.subject.name] = subjectRule;
      }
      var locationRule = getValidationRule(this.parent.eventSettings.fields.location.validation);
      if (!isNullOrUndefined(locationRule)) {
        rules[this.parent.eventSettings.fields.location.name] = locationRule;
      }
      var startTimeRule = getValidationRule(this.parent.eventSettings.fields.startTime.validation);
      if (!isNullOrUndefined(startTimeRule)) {
        rules[this.parent.eventSettings.fields.startTime.name] = startTimeRule;
      }
      var endTimeRule = getValidationRule(this.parent.eventSettings.fields.endTime.validation);
      if (!isNullOrUndefined(endTimeRule)) {
        rules[this.parent.eventSettings.fields.endTime.name] = endTimeRule;
      }
      var descriptionRule = getValidationRule(this.parent.eventSettings.fields.description.validation);
      if (!isNullOrUndefined(descriptionRule)) {
        rules[this.parent.eventSettings.fields.description.name] = descriptionRule;
      }
      this.fieldValidator = new FieldValidator();
      this.fieldValidator.renderFormValidator(form, rules, this.element, this.parent.locale);
    };
    EventWindow2.prototype.showDetails = function(eventData) {
      var eventObj = extend({}, eventData, null, true);
      if ((!this.cellClickAction || this.cellClickAction && !isNullOrUndefined(this.parent.editorTemplate)) && eventObj[this.fields.endTime].getHours() === 0 && eventObj[this.fields.endTime].getMinutes() === 0) {
        this.trimAllDay(eventObj);
      }
      this.eventData = eventObj;
      var formElements = this.getFormElements(EVENT_WINDOW_DIALOG_CLASS);
      var keyNames2 = Object.keys(eventObj);
      for (var _i = 0, formElements_2 = formElements; _i < formElements_2.length; _i++) {
        var curElement = formElements_2[_i];
        var columnName = curElement.name || this.getColumnName(curElement);
        if (!isNullOrUndefined(columnName) && columnName !== "") {
          if (keyNames2.indexOf(columnName) !== -1) {
            this.setValueToElement(curElement, eventObj["" + columnName]);
          } else {
            this.setDefaultValueToElement(curElement);
          }
        }
      }
      if (isNullOrUndefined(this.parent.editorTemplate)) {
        this.onAllDayChange(eventObj[this.fields.isAllDay]);
        var timezoneObj = this.getInstance(TIME_ZONE_CLASS + "." + EVENT_FIELD);
        if (!(isNullOrUndefined(eventObj[this.fields.startTimezone]) && isNullOrUndefined(eventObj[this.fields.endTimezone]))) {
          timezoneObj.checked = true;
          timezoneObj.dataBind();
        }
        this.timezoneChangeStyle(timezoneObj.checked);
        delete eventObj.Timezone;
      }
    };
    EventWindow2.prototype.getColumnName = function(element2) {
      var attrName = element2.getAttribute("data-name") || "";
      if (attrName === "") {
        var isDropDowns = false;
        var fieldSelector = "";
        if (element2.classList.contains("e-dropdownlist")) {
          fieldSelector = "e-ddl";
          isDropDowns = true;
        } else if (element2.classList.contains("e-multiselect")) {
          fieldSelector = "e-multiselect";
          isDropDowns = true;
        } else if (element2.classList.contains("e-datetimepicker")) {
          fieldSelector = "e-datetimepicker";
        } else if (element2.classList.contains("e-datepicker")) {
          fieldSelector = "e-datepicker";
        } else if (element2.classList.contains("e-checkbox")) {
          fieldSelector = "e-checkbox";
        }
        var classSelector = isDropDowns ? "." + fieldSelector + ":not(.e-control)" : "." + fieldSelector;
        var control = closest(element2, classSelector) || element2.querySelector("." + fieldSelector);
        if (control) {
          var attrEle = control.querySelector("[name]");
          if (attrEle) {
            attrName = attrEle.name;
          }
        }
      }
      return attrName;
    };
    EventWindow2.prototype.onAllDayChange = function(allDayStatus) {
      var startObj = this.getInstance(EVENT_WINDOW_START_CLASS);
      var endObj = this.getInstance(EVENT_WINDOW_END_CLASS);
      var timezoneDiv = this.element.querySelector(".e-time-zone-container");
      var format;
      if (allDayStatus) {
        format = isNullOrUndefined(this.parent.dateFormat) ? this.getFormat("dateFormats") : this.parent.dateFormat;
        addClass(this.element.querySelectorAll(".e-time-icon"), EVENT_WINDOW_ICON_DISABLE_CLASS);
        addClass([timezoneDiv], DISABLE_CLASS);
        if (this.element.querySelector("." + EVENT_WINDOW_TIME_ZONE_DIV_CLASS)) {
          removeClass([this.element.querySelector("." + EVENT_WINDOW_TIME_ZONE_DIV_CLASS)], ENABLE_CLASS);
        }
        startObj.format = endObj.format = format;
      } else {
        format = isNullOrUndefined(this.parent.dateFormat) ? this.getFormat("dateFormats") + " " + this.parent.activeViewOptions.timeFormat : this.parent.dateFormat + " " + this.parent.activeViewOptions.timeFormat;
        removeClass(this.element.querySelectorAll(".e-time-icon"), EVENT_WINDOW_ICON_DISABLE_CLASS);
        removeClass([timezoneDiv], DISABLE_CLASS);
        if (this.element.querySelector(".e-checkbox-wrapper .e-time-zone").checked) {
          addClass([this.element.querySelector("." + EVENT_WINDOW_TIME_ZONE_DIV_CLASS)], ENABLE_CLASS);
        }
        startObj.format = endObj.format = format;
      }
      if (this.cellClickAction) {
        this.updateDateTime(allDayStatus, startObj, endObj);
      }
      startObj.dataBind();
      endObj.dataBind();
      if (!isNullOrUndefined(this.recurrenceEditor)) {
        this.recurrenceEditor.updateRuleUntilDate(startObj.value);
      }
    };
    EventWindow2.prototype.updateDateTime = function(allDayStatus, startObj, endObj) {
      var startDate;
      var endDate;
      if (allDayStatus) {
        startDate = resetTime(new Date(this.eventWindowTime.startTime.getTime()));
        if (this.parent.activeCellsData.isAllDay) {
          var temp = addDays(new Date(this.eventWindowTime.endTime.getTime()), -1).getTime();
          endDate = +this.eventWindowTime.startTime > temp ? this.eventWindowTime.endTime : new Date(temp);
        } else {
          endDate = resetTime(new Date(this.eventWindowTime.endTime.getTime()));
        }
      } else {
        var start = this.parent.activeCellsData.startTime;
        startDate = new Date(this.eventWindowTime.startTime.getTime());
        startDate.setHours(start.getHours(), start.getMinutes(), start.getSeconds());
        if (this.parent.activeCellsData.isAllDay) {
          var startHour = this.parent.getStartEndTime(this.parent.workHours.start);
          startDate.setHours(startHour.getHours(), startHour.getMinutes(), startHour.getSeconds());
          endDate = new Date(startDate.getTime());
          endDate.setMilliseconds(MS_PER_MINUTE * this.getSlotDuration());
        } else {
          endDate = new Date(startDate.getTime());
          endDate.setMilliseconds(this.parent.activeCellsData.endTime.getTime() - this.parent.activeCellsData.startTime.getTime());
        }
      }
      this.eventWindowTime = { startTime: new Date(startDate.getTime()), endTime: new Date(endDate.getTime()) };
      startObj.value = startDate;
      endObj.value = endDate;
      startObj.dataBind();
      endObj.dataBind();
    };
    EventWindow2.prototype.getFormat = function(formatType) {
      var format;
      if (this.parent.locale === "en" || this.parent.locale === "en-US") {
        format = getValue(formatType + ".short", getDefaultDateObject(this.parent.getCalendarMode()));
      } else {
        format = getValue("main." + this.parent.locale + ".dates.calendars." + this.parent.getCalendarMode() + "." + formatType + ".short", cldrData);
      }
      return format;
    };
    EventWindow2.prototype.onEventDetailsUpdate = function(eventObj) {
      if (!this.parent.eventSettings.allowEditing) {
        return;
      }
      if (!this.parent.isAdaptive) {
        removeClass([this.element.querySelector("." + DELETE_EVENT_CLASS)], DISABLE_CLASS);
      }
      this.element.querySelector("." + EVENT_WINDOW_TITLE_TEXT_CLASS).innerHTML = this.l10n.getConstant("editEvent");
      this.element.querySelector("." + FORM_CLASS).setAttribute("data-id", eventObj[this.fields.id].toString());
      if (isNullOrUndefined(this.parent.editorTemplate)) {
        eventObj = extend({}, eventObj, null, true);
        var timezoneObj = this.getInstance(TIME_ZONE_CLASS + "." + EVENT_FIELD);
        var timezoneValue = void 0;
        if (eventObj[this.fields.startTimezone] || eventObj[this.fields.endTimezone]) {
          timezoneValue = true;
          this.parent.eventBase.timezoneConvert(eventObj);
        } else {
          timezoneValue = false;
        }
        eventObj.Timezone = timezoneValue;
        timezoneObj.checked = timezoneValue;
        timezoneObj.dataBind();
      }
      this.showDetails(eventObj);
      if (eventObj[this.fields.recurrenceRule] && this.recurrenceEditor) {
        this.recurrenceEditor.setRecurrenceRule(eventObj[this.fields.recurrenceRule], eventObj[this.fields.startTime]);
      } else if (!this.parent.isAdaptive && this.recurrenceEditor) {
        this.recurrenceEditor.setProperties({ startDate: eventObj[this.fields.startTime] });
        this.recurrenceEditor.setRecurrenceRule("");
      }
      this.repeatStartDate = eventObj[this.fields.startTime];
      this.repeatRule = "";
      if (eventObj[this.fields.recurrenceRule]) {
        if (this.recurrenceEditor) {
          this.recurrenceEditor.setRecurrenceRule(eventObj[this.fields.recurrenceRule], eventObj[this.fields.startTime]);
        }
        this.repeatRule = eventObj[this.fields.recurrenceRule];
      }
      if (this.parent.isAdaptive && isNullOrUndefined(this.parent.editorTemplate)) {
        var element2 = this.element.querySelector("." + REPEAT_CONTAINER_CLASS);
        if (eventObj[this.fields.recurrenceRule]) {
          removeClass([element2], HIDE_STYLE_CLASS);
          this.repeatStatus.setProperties({ checked: true });
        } else {
          addClass([element2], HIDE_STYLE_CLASS);
          this.repeatStatus.setProperties({ checked: false });
        }
        this.updateRepeatLabel(this.repeatRule);
      }
      var isDisable = this.parent.readonly || eventObj[this.fields.isReadonly];
      if (!this.parent.isAdaptive) {
        var saveButton = this.element.querySelector("." + EVENT_WINDOW_SAVE_BUTTON_CLASS);
        var deleteButton = this.element.querySelector("." + DELETE_EVENT_CLASS);
        this.disableButton(saveButton, isDisable);
        this.disableButton(deleteButton, isDisable);
      } else {
        var saveIcon = this.element.querySelector("." + EVENT_WINDOW_SAVE_ICON_CLASS);
        if (saveIcon) {
          if (isDisable) {
            addClass([saveIcon], ICON_DISABLE_CLASS);
          } else {
            removeClass([saveIcon], ICON_DISABLE_CLASS);
          }
        }
      }
      this.dialogObject.show();
    };
    EventWindow2.prototype.disableButton = function(element2, value) {
      if (element2) {
        element2.ej2_instances[0].disabled = value;
      }
    };
    EventWindow2.prototype.renderRecurrenceEditor = function() {
      return new RecurrenceEditor({
        calendarMode: this.parent.calendarMode,
        cssClass: this.parent.cssClass,
        dateFormat: this.parent.dateFormat,
        enableRtl: this.parent.enableRtl,
        firstDayOfWeek: this.parent.activeViewOptions.firstDayOfWeek,
        locale: this.parent.locale
      });
    };
    EventWindow2.prototype.updateMinMaxDateToEditor = function() {
      var startDate = this.element.querySelector(".e-start");
      var endDate = this.element.querySelector(".e-end");
      if (startDate && endDate) {
        var startObj = startDate.ej2_instances[0];
        var endObj = endDate.ej2_instances[0];
        startObj.min = this.parent.minDate;
        startObj.max = this.parent.maxDate;
        endObj.min = this.parent.minDate;
        endObj.max = this.parent.maxDate;
        startObj.dataBind();
        endObj.dataBind();
      }
      if (this.recurrenceEditor) {
        var untilDate = this.recurrenceEditor.element.querySelector(".e-until-date");
        if (untilDate) {
          var untilObj = untilDate.ej2_instances[0];
          untilObj.min = this.parent.minDate;
          untilObj.max = this.parent.maxDate;
          untilObj.dataBind();
        }
      }
    };
    EventWindow2.prototype.updateRepeatLabel = function(repeatRule) {
      if (this.parent.isAdaptive && !this.repeatDialogObject) {
        this.renderRepeatDialog();
      }
      var data = repeatRule ? this.l10n.getConstant("repeats") + " " + this.recurrenceEditor.getRuleSummary(repeatRule) : this.l10n.getConstant("repeat");
      this.repeatStatus.setProperties({ label: data });
    };
    EventWindow2.prototype.dialogClose = function(event) {
      if (this.isEnterKey) {
        this.isEnterKey = false;
        return;
      }
      this.dialogEvent = event;
      this.isCrudAction = false;
      this.parent.activeEventData = { event: void 0, element: void 0 };
      this.parent.currentAction = null;
      this.dialogObject.hide();
    };
    EventWindow2.prototype.resetForm = function() {
      this.fieldValidator.destroyToolTip();
      this.resetFormFields();
      if (!this.parent.isAdaptive && this.recurrenceEditor && !this.recurrenceEditor.isDestroyed) {
        this.recurrenceEditor.resetFields();
      }
    };
    EventWindow2.prototype.timezoneChangeStyle = function(value) {
      var timezoneDiv = this.element.querySelector("." + EVENT_WINDOW_TIME_ZONE_DIV_CLASS);
      var localTimezoneName = this.parent.tzModule.getLocalTimezoneName();
      if (value) {
        addClass([timezoneDiv], ENABLE_CLASS);
        var startTimezoneObj = this.getInstance(EVENT_WINDOW_START_TZ_CLASS);
        var endTimezoneObj = this.getInstance(EVENT_WINDOW_END_TZ_CLASS);
        var timezone = startTimezoneObj.dataSource;
        if (!startTimezoneObj.value || !this.parent.timezone) {
          var found = timezone.some(function(tz) {
            return tz.Value === localTimezoneName;
          });
          if (!found) {
            timezone.push({ Value: localTimezoneName, Text: localTimezoneName });
            startTimezoneObj.dataSource = timezone;
            endTimezoneObj.dataSource = timezone;
            startTimezoneObj.dataBind();
            endTimezoneObj.dataBind();
          }
        }
        startTimezoneObj.value = startTimezoneObj.value || this.parent.timezone || localTimezoneName;
        endTimezoneObj.value = endTimezoneObj.value || this.parent.timezone || localTimezoneName;
        startTimezoneObj.dataBind();
        endTimezoneObj.dataBind();
      } else {
        removeClass([timezoneDiv], ENABLE_CLASS);
      }
    };
    EventWindow2.prototype.resetFormFields = function() {
      var formElement = this.getFormElements(EVENT_WINDOW_DIALOG_CLASS);
      for (var _i = 0, formElement_1 = formElement; _i < formElement_1.length; _i++) {
        var currentElement = formElement_1[_i];
        var columnName = currentElement.name || this.getColumnName(currentElement);
        if (!isNullOrUndefined(columnName) && columnName !== "") {
          this.setDefaultValueToElement(currentElement);
        }
      }
    };
    EventWindow2.prototype.eventSave = function(event, alert2) {
      if (this.isEnterKey) {
        this.isEnterKey = false;
        return;
      }
      var formElement = this.element.querySelector("." + FORM_CLASS);
      if (formElement && formElement.classList.contains("e-formvalidator") && !formElement.ej2_instances[0].validate()) {
        return;
      }
      var dataCollection = this.getEventDataFromEditor();
      if (this.processEventValidation(dataCollection.tempData, alert2)) {
        return;
      }
      this.eventCrudData = dataCollection.eventData;
      this.dialogEvent = event;
      this.isCrudAction = true;
      this.dialogObject.hide();
    };
    EventWindow2.prototype.getEventDataFromEditor = function() {
      var eventObj = extend({}, this.getObjectFromFormData(EVENT_WINDOW_DIALOG_CLASS));
      if (!eventObj.Timezone) {
        eventObj[this.fields.startTimezone] = null;
        eventObj[this.fields.endTimezone] = null;
      }
      delete eventObj.Timezone;
      delete eventObj.Repeat;
      this.setDefaultValueToObject(eventObj);
      eventObj[this.fields.recurrenceRule] = this.recurrenceEditor ? this.recurrenceEditor.getRecurrenceRule() || null : void 0;
      var tempObj = extend({}, eventObj, null, true);
      if (eventObj[this.fields.isAllDay]) {
        eventObj[this.fields.startTime] = isNullOrUndefined(eventObj[this.fields.startTime]) ? null : resetTime(new Date(eventObj[this.fields.startTime].getTime()));
        eventObj[this.fields.endTime] = isNullOrUndefined(eventObj[this.fields.endTime]) ? null : addDays(resetTime(new Date(eventObj[this.fields.endTime].getTime())), 1);
      }
      return { eventData: eventObj, tempData: tempObj };
    };
    EventWindow2.prototype.processEventValidation = function(eventObj, alert2) {
      var alertType;
      if (isNullOrUndefined(this.parent.editorTemplate)) {
        if (!eventObj[this.fields.startTime] || !eventObj[this.fields.endTime]) {
          this.parent.quickPopup.openValidationError("invalidDateError");
          return true;
        }
        if (eventObj[this.fields.startTime] > eventObj[this.fields.endTime]) {
          this.parent.quickPopup.openValidationError("startEndError");
          return true;
        }
      }
      if (this.recurrenceEditor && this.recurrenceEditor.value && this.recurrenceEditor.value !== "") {
        if (this.parent.currentAction !== "EditOccurrence") {
          alertType = this.recurrenceValidation(eventObj[this.fields.startTime], eventObj[this.fields.endTime], alert2);
        }
        var isShowAlert = true;
        if (alertType === "seriesChangeAlert" && this.parent.uiStateValues.isIgnoreOccurrence) {
          isShowAlert = false;
        }
        if (!isNullOrUndefined(alertType) && isShowAlert && (!this.parent.enableRecurrenceValidation && alertType === "wrongPattern" || this.parent.enableRecurrenceValidation)) {
          this.parent.quickPopup.openRecurrenceValidationAlert(alertType);
          return true;
        }
      }
      return false;
    };
    EventWindow2.prototype.processCrudActions = function(eventObj) {
      var _this = this;
      this.parent.uiStateValues.isBlock = false;
      var resourceData = this.getResourceData(eventObj);
      var isResourceEventExpand = (this.parent.activeViewOptions.group.resources.length > 0 || this.parent.resourceCollection.length > 0) && !this.parent.activeViewOptions.group.allowGroupEdit && !isNullOrUndefined(resourceData);
      var eventId = this.getEventIdFromForm();
      if (!isNullOrUndefined(eventId)) {
        var eveId_1 = this.parent.eventBase.getEventIDType() === "string" ? eventId : parseInt(eventId, 10);
        var editedData = this.parent.eventsData.filter(function(data) {
          return data[_this.fields.id] === eveId_1;
        })[0];
        if (isNullOrUndefined(editedData)) {
          editedData = this.parent.blockData.filter(function(data) {
            return data[_this.fields.id] === eveId_1;
          })[0];
        }
        eventObj = extend({}, editedData, eventObj);
        if (eventObj[this.fields.isReadonly]) {
          return false;
        }
        var currentAction = void 0;
        if (!isNullOrUndefined(editedData[this.fields.recurrenceRule])) {
          currentAction = this.parent.currentAction;
          eventObj.Guid = this.parent.activeEventData.event.Guid;
          if (this.parent.currentAction === "EditOccurrence") {
            if (!eventObj[this.fields.recurrenceID]) {
              eventObj[this.fields.id] = this.parent.eventBase.getEventMaxID();
              eventObj.Guid = this.parent.activeEventData.event.Guid;
            } else {
              eveId_1 = eventObj[this.fields.recurrenceID];
              currentAction = null;
            }
            if (this.parent.enableRecurrenceValidation && this.editOccurrenceValidation(eveId_1, eventObj)) {
              return true;
            }
          }
          if (this.parent.currentAction === "EditSeries" || eventObj[this.fields.id] !== editedData[this.fields.id]) {
            eventObj[this.fields.recurrenceID] = editedData[this.fields.id];
          } else if (this.parent.currentAction === "EditFollowingEvents") {
            eventObj[this.fields.id] = this.parent.eventBase.getEventMaxID();
            eventObj[this.fields.followingID] = editedData[this.fields.id];
          }
        }
        if (isResourceEventExpand) {
          this.resourceSaveEvent(eventObj, "Save", currentAction);
        } else {
          this.parent.saveEvent(eventObj, currentAction);
        }
      } else {
        this.parent.currentAction = "Add";
        if (isResourceEventExpand) {
          this.resourceSaveEvent(eventObj, this.parent.currentAction);
        } else {
          eventObj[this.fields.id] = this.parent.eventBase.getEventMaxID();
          this.parent.addEvent(eventObj);
        }
      }
      return this.parent.uiStateValues.isBlock;
    };
    EventWindow2.prototype.getResourceData = function(eventObj) {
      var resourceData = null;
      if (!isNullOrUndefined(this.parent.resourceBase) && !isNullOrUndefined(this.parent.resourceBase.resourceCollection) && this.parent.resourceBase.resourceCollection.length > 0) {
        var lastResourceData = this.parent.resourceBase.resourceCollection.slice(-1)[0];
        resourceData = eventObj[lastResourceData.field];
      }
      return resourceData;
    };
    EventWindow2.prototype.getObjectFromFormData = function(className) {
      var formElement = this.getFormElements(className);
      var eventObj = {};
      for (var _i = 0, formElement_2 = formElement; _i < formElement_2.length; _i++) {
        var currentElement = formElement_2[_i];
        var columnName = currentElement.name || this.getColumnName(currentElement);
        if (!isNullOrUndefined(columnName) && columnName !== "") {
          eventObj["" + columnName] = this.getValueFromElement(currentElement);
        }
      }
      return eventObj;
    };
    EventWindow2.prototype.setDefaultValueToObject = function(eventObj) {
      if (!isNullOrUndefined(eventObj[this.fields.subject])) {
        eventObj[this.fields.subject] = eventObj[this.fields.subject] || this.parent.eventSettings.fields.subject.default || this.l10n.getConstant("addTitle");
      }
      if (!isNullOrUndefined(eventObj[this.fields.location])) {
        eventObj[this.fields.location] = eventObj[this.fields.location] || this.parent.eventSettings.fields.location.default;
      }
      if (!isNullOrUndefined(eventObj[this.fields.description])) {
        eventObj[this.fields.description] = eventObj[this.fields.description] || this.parent.eventSettings.fields.description.default;
      }
    };
    EventWindow2.prototype.recurrenceValidation = function(startDate, endDate, alert2) {
      var alertMessage;
      var recEditor = this.recurrenceEditor;
      var interval = this.getInstance("e-repeat-interval.e-numerictextbox").value;
      if (alert2 !== this.l10n.getConstant("ok")) {
        var activeEvent = this.parent.activeEventData.event;
        var excludedEvents = [];
        if ((this.parent.currentAction === "EditSeries" || this.parent.currentAction === "EditFollowingEvents") && !isNullOrUndefined(activeEvent)) {
          var eventStartTime = activeEvent[this.parent.eventFields.startTime];
          var seriesEvents = this.parent.eventBase.getSeriesEvents(this.eventData, eventStartTime);
          if (seriesEvents.length > 0) {
            excludedEvents = this.parent.eventBase.getEditedOccurrences(seriesEvents, eventStartTime);
          } else {
            var event_2 = this.parent.eventBase.getEventById(activeEvent[this.parent.eventFields.id]);
            excludedEvents = this.parent.eventBase.getEditedOccurrences([event_2], eventStartTime);
          }
          if (this.parent.currentAction === "EditSeries" && !isNullOrUndefined(this.eventData[this.parent.eventFields.recurrenceException])) {
            excludedEvents.push(this.eventData);
          }
        }
        if (excludedEvents.length > 0) {
          alertMessage = "seriesChangeAlert";
        }
        if (this.getInstance("e-end-on-left .e-ddl .e-dropdownlist").value === "until" && this.getInstance("e-end-on-date .e-datepicker").value < startDate) {
          alertMessage = "wrongPattern";
        }
        if (isNullOrUndefined(alertMessage)) {
          var types = recEditor.value.split(";")[1].split("=")[1].split(",");
          var obj = { "SU": 0, "MO": 1, "TU": 2, "WE": 3, "TH": 4, "FR": 5, "SA": 6 };
          var temp = [];
          var tempDiff = [];
          var tempValue = void 0;
          switch (recEditor.value.split(";")[0].split("=")[1]) {
            case "DAILY":
              if ((endDate.getTime() - startDate.getTime()) / (1e3 * 3600) > interval * 24) {
                alertMessage = "createError";
              }
              break;
            case "WEEKLY":
              types = recEditor.value.split(";")[1].split("=")[1].split(",");
              for (var index = 0; index < types.length * (interval + 1); index++) {
                temp[parseInt(index.toString(), 10)] = types.length > index ? obj[types[parseInt(index.toString(), 10)]] : temp[index - types.length] + 7 * interval;
              }
              tempValue = temp.sort(function(a, b) {
                return a - b;
              });
              for (var index = 1; index < tempValue.length; index++) {
                tempDiff.push(tempValue[parseInt(index.toString(), 10)] - tempValue[index - 1]);
              }
              if ((endDate.getTime() - startDate.getTime()) / (1e3 * 3600) >= Math.min.apply(Math, tempDiff) * 24 || isNullOrUndefined(interval)) {
                alertMessage = "createError";
              }
              break;
            case "MONTHLY":
              if (endDate.getTime() >= (/* @__PURE__ */ new Date(+startDate)).setMonth(startDate.getMonth() + interval)) {
                alertMessage = "createError";
              }
              break;
            case "YEARLY":
              if (endDate.getTime() >= (/* @__PURE__ */ new Date(+startDate)).setFullYear(startDate.getFullYear() + interval)) {
                alertMessage = "createError";
              }
              break;
          }
        }
      } else {
        if (endDate.getTime() >= (/* @__PURE__ */ new Date(+startDate)).setMonth(startDate.getMonth() + interval)) {
          alertMessage = "createError";
        }
        if (isNullOrUndefined(alertMessage)) {
          this.parent.quickPopup.quickDialog.hide();
        }
      }
      if (isNullOrUndefined(interval)) {
        alertMessage = "createError";
      }
      return alertMessage;
    };
    EventWindow2.prototype.getRecurrenceIndex = function(recColl, event) {
      var recIndex;
      for (var index = 0; index < recColl.length; index++) {
        if (event[this.fields.startTime].valueOf() === recColl[parseInt(index.toString(), 10)][this.fields.startTime].valueOf()) {
          recIndex = index;
          break;
        }
      }
      return recIndex;
    };
    EventWindow2.prototype.trimAllDay = function(data) {
      if (data[this.fields.isAllDay]) {
        var temp = addDays(/* @__PURE__ */ new Date(+data[this.fields.endTime]), -1).getTime();
        data[this.fields.endTime] = +data[this.fields.startTime] > temp ? data[this.fields.endTime] : new Date(temp);
      }
    };
    EventWindow2.prototype.editOccurrenceValidation = function(eventId, currentData, editData) {
      var _this = this;
      if (editData === void 0) {
        editData = this.eventData;
      }
      var recurColl = this.parent.getOccurrencesByID(eventId);
      var excludedDatas = this.parent.eventsData.filter(function(data2) {
        return data2[_this.fields.recurrenceID] === eventId;
      });
      excludedDatas.map(function(data2) {
        return recurColl.push(extend({}, data2));
      });
      currentData = extend({}, currentData);
      this.trimAllDay(currentData);
      for (var _i = 0, recurColl_1 = recurColl; _i < recurColl_1.length; _i++) {
        var data = recurColl_1[_i];
        this.trimAllDay(data);
      }
      this.parent.eventBase.sortByTime(recurColl);
      var index = this.getRecurrenceIndex(recurColl, editData);
      if (isNullOrUndefined(index)) {
        return false;
      }
      var currentStartTime = /* @__PURE__ */ new Date(+currentData[this.fields.startTime]);
      var currentEndTime = /* @__PURE__ */ new Date(+currentData[this.fields.endTime]);
      var nextStartTime;
      var nextEndTime;
      if (index !== recurColl.length - 1) {
        nextStartTime = /* @__PURE__ */ new Date(+recurColl[index + 1][this.fields.startTime]);
        nextEndTime = /* @__PURE__ */ new Date(+recurColl[index + 1][this.fields.endTime]);
      }
      var lastEndTime = /* @__PURE__ */ new Date(+recurColl[recurColl.length - 1][this.fields.endTime]);
      if (index === 0) {
        if (!isNullOrUndefined(recurColl[index + 1])) {
          if (!(nextStartTime.getTime() >= currentEndTime.getTime()) && resetTime(lastEndTime).getTime() >= resetTime(currentStartTime).getTime() || resetTime(lastEndTime).getTime() < resetTime(currentStartTime).getTime()) {
            this.parent.quickPopup.openRecurrenceValidationAlert("occurrenceAlert");
            return true;
          } else if (!(resetTime(currentStartTime).getTime() < resetTime(nextStartTime).getTime())) {
            this.parent.quickPopup.openRecurrenceValidationAlert("sameDayAlert");
            return true;
          }
        }
        return false;
      } else {
        var previousStartTime = /* @__PURE__ */ new Date(+recurColl[index - 1][this.fields.startTime]);
        var previousEndTime = /* @__PURE__ */ new Date(+recurColl[index - 1][this.fields.endTime]);
        if (index === recurColl.length - 1) {
          if (resetTime(/* @__PURE__ */ new Date(+recurColl[recurColl.length - 1 - index][this.fields.startTime])).getTime() > resetTime(currentStartTime).getTime()) {
            this.parent.quickPopup.openRecurrenceValidationAlert("occurrenceAlert");
            return true;
          } else if (!(previousEndTime.getTime() <= currentStartTime.getTime() && resetTime(currentStartTime).getTime() > resetTime(previousStartTime).getTime())) {
            this.parent.quickPopup.openRecurrenceValidationAlert("sameDayAlert");
            return true;
          }
        } else if (!((resetTime(previousStartTime).getTime() < resetTime(currentStartTime).getTime() || resetTime(/* @__PURE__ */ new Date(+recurColl[0][this.fields.startTime])).getTime() > resetTime(currentStartTime).getTime()) && (resetTime(nextStartTime).getTime() > resetTime(currentStartTime).getTime() || lastEndTime.getTime() < currentStartTime.getTime()))) {
          this.parent.quickPopup.openRecurrenceValidationAlert("sameDayAlert");
          return true;
        } else if (!(previousEndTime.getTime() <= currentStartTime.getTime() && nextStartTime.getTime() > currentEndTime.getTime()) || resetTime(nextEndTime).getTime() < resetTime(currentStartTime).getTime() || resetTime(previousStartTime).getTime() > resetTime(currentEndTime).getTime() || !(resetTime(currentStartTime).getTime() < resetTime(nextStartTime).getTime())) {
          this.parent.quickPopup.openRecurrenceValidationAlert("occurrenceAlert");
          return true;
        }
      }
      return false;
    };
    EventWindow2.prototype.resourceSaveEvent = function(eventObj, action, currentAction) {
      var _this = this;
      var lastResourceData = this.parent.resourceBase.resourceCollection.slice(-1)[0];
      var resourceData = eventObj[lastResourceData.field];
      resourceData = resourceData instanceof Array ? resourceData.reverse() : [resourceData].reverse();
      var lastLevel = this.parent.resourceBase.lastResourceLevel;
      var eventList = [];
      var _loop_2 = function(i2) {
        var events = extend({}, eventObj, null, true);
        events[this_2.fields.id] = this_2.parent.eventBase.getEventMaxID();
        var temp = [];
        var addValues = function() {
          if (action === "Save" && i2 === resourceData.length - 1) {
            if (temp.length > 0) {
              temp[0][_this.fields.id] = eventObj[_this.fields.id];
              for (var k2 = 1; k2 < temp.length; k2++) {
                temp[parseInt(k2.toString(), 10)][_this.fields.id] = _this.parent.eventBase.getEventMaxID(i2);
                eventList.push(temp[parseInt(k2.toString(), 10)]);
                _this.parent.saveEvent(temp[0], currentAction);
              }
            } else {
              events[_this.fields.id] = eventObj[_this.fields.id];
              _this.parent.saveEvent(events, currentAction);
            }
          } else {
            if (temp.length > 0) {
              for (var j = 0; j < temp.length; j++) {
                temp[parseInt(j.toString(), 10)][_this.fields.id] = _this.parent.eventBase.getEventMaxID(j);
                eventList.push(temp[parseInt(j.toString(), 10)]);
              }
            } else {
              events[_this.fields.id] = _this.parent.eventBase.getEventMaxID(i2);
              eventList.push(events);
            }
          }
        };
        if (this_2.parent.activeViewOptions.group.byGroupID && !isNullOrUndefined(lastLevel)) {
          var lastResource = lastResourceData.dataSource;
          var resCol = this_2.parent.resourceCollection;
          var index = void 0;
          if (resCol.length > 1) {
            index = findIndexInData(lastResource, lastResourceData.idField, resourceData[parseInt(i2.toString(), 10)], events, resCol);
          } else {
            index = findIndexInData(lastResource, lastResourceData.idField, resourceData[parseInt(i2.toString(), 10)]);
          }
          if (index < 0) {
            return { value: void 0 };
          }
          var groupId_1 = lastResource[parseInt(index.toString(), 10)][lastResourceData.groupIDField];
          var filter2 = lastLevel.filter(function(obj) {
            return obj.resourceData[lastResourceData.idField] === resourceData[parseInt(i2.toString(), 10)];
          }).filter(function(obj) {
            return obj.resourceData[lastResourceData.groupIDField] === groupId_1;
          })[0];
          var groupOrder = filter2.groupOrder;
          for (var index_1 = 0; index_1 < this_2.parent.resourceBase.resourceCollection.length; index_1++) {
            var field = this_2.parent.resourceBase.resourceCollection[parseInt(index_1.toString(), 10)].field;
            events["" + field] = groupOrder[parseInt(index_1.toString(), 10)] instanceof Array ? groupOrder[parseInt(index_1.toString(), 10)][0] : groupOrder[parseInt(index_1.toString(), 10)];
          }
          addValues();
        } else {
          for (var index = 0; index < this_2.parent.resourceBase.resourceCollection.length - 1; index++) {
            var field = this_2.parent.resourceBase.resourceCollection[parseInt(index.toString(), 10)].field;
            if (events["" + field] instanceof Array && events["" + field].length > 1) {
              for (var k = 0; k < events["" + field].length; k++) {
                var event_3 = extend({}, events, null, true);
                event_3["" + field] = eventObj["" + field][parseInt(k.toString(), 10)];
                event_3[lastResourceData.field] = resourceData[parseInt(i2.toString(), 10)];
                temp.push(event_3);
              }
            } else {
              if (temp.length === 0) {
                events["" + field] = eventObj["" + field] instanceof Array ? eventObj["" + field][0] : eventObj["" + field];
                events[lastResourceData.field] = resourceData[parseInt(i2.toString(), 10)];
              } else {
                for (var l = 0; l < temp.length; l++) {
                  temp[parseInt(l.toString(), 10)]["" + field] = eventObj["" + field] instanceof Array ? eventObj["" + field][0] : eventObj["" + field];
                }
              }
            }
          }
          events[lastResourceData.field] = resourceData[parseInt(i2.toString(), 10)];
          addValues();
        }
      };
      var this_2 = this;
      for (var i = 0; i < resourceData.length; i++) {
        var state_1 = _loop_2(i);
        if (typeof state_1 === "object")
          return state_1.value;
      }
      if (eventList.length > 0) {
        for (var _i = 0, eventList_1 = eventList; _i < eventList_1.length; _i++) {
          var event_4 = eventList_1[_i];
          event_4[this.fields.recurrenceException] = null;
          event_4[this.fields.recurrenceID] = null;
        }
        this.parent.addEvent(eventList);
      }
    };
    EventWindow2.prototype.getEventIdFromForm = function() {
      return this.element.querySelector("." + FORM_CLASS).getAttribute("data-id");
    };
    EventWindow2.prototype.getFormElements = function(className) {
      var elements = [];
      if (className === EVENT_WINDOW_DIALOG_CLASS) {
        elements = [].slice.call(this.element.querySelectorAll("." + EVENT_FIELD));
      } else {
        elements = [].slice.call(this.parent.element.querySelectorAll("." + className + " ." + EVENT_FIELD));
      }
      return elements;
    };
    EventWindow2.prototype.getValueFromElement = function(element2) {
      var value;
      if (element2.classList.contains("e-datepicker")) {
        value = element2.ej2_instances[0].value;
      } else if (element2.classList.contains("e-datetimepicker")) {
        value = element2.ej2_instances[0].value;
      } else if (element2.classList.contains("e-dropdownlist")) {
        value = element2.ej2_instances[0].value;
      } else if (element2.classList.contains("e-multiselect")) {
        value = element2.ej2_instances[0].value;
      } else if (element2.classList.contains("e-checkbox")) {
        value = element2.ej2_instances[0].checked;
      } else {
        if (element2.type === "checkbox") {
          value = element2.checked;
        } else {
          value = this.parent.enableHtmlSanitizer ? SanitizeHtmlHelper.sanitize(element2.value) : element2.value;
        }
      }
      return value;
    };
    EventWindow2.prototype.setValueToElement = function(element2, value) {
      if (element2.classList.contains("e-datepicker")) {
        var instance = element2.ej2_instances[0];
        instance.value = value;
        instance.dataBind();
      } else if (element2.classList.contains("e-datetimepicker")) {
        var instance = element2.ej2_instances[0];
        if (instance.element.classList.contains(EVENT_WINDOW_START_CLASS)) {
          this.eventWindowTime.startTime = /* @__PURE__ */ new Date("" + value);
        } else {
          this.eventWindowTime.endTime = /* @__PURE__ */ new Date("" + value);
        }
        instance.value = value;
        instance.dataBind();
      } else if (element2.classList.contains("e-dropdownlist")) {
        var instance = element2.ej2_instances[0];
        instance.value = value;
        instance.dataBind();
      } else if (element2.classList.contains("e-multiselect")) {
        var instance = element2.ej2_instances[0];
        instance.value = [];
        instance.value = value instanceof Array ? value : [value];
        instance.dataBind();
      } else if (element2.classList.contains("e-checkbox")) {
        var instance = element2.ej2_instances[0];
        instance.checked = value;
        instance.dataBind();
      } else {
        if (element2.type !== "checkbox") {
          element2.value = value || "";
        } else {
          element2.checked = value;
        }
      }
    };
    EventWindow2.prototype.setDefaultValueToElement = function(element2) {
      if (element2.classList.contains("e-datepicker")) {
        var instance = element2.ej2_instances[0];
        instance.value = this.parent.getCurrentTime();
        instance.dataBind();
      } else if (element2.classList.contains("e-datetimepicker")) {
        var instance = element2.ej2_instances[0];
        var dateValue = this.parent.getCurrentTime();
        this.eventWindowTime = { startTime: dateValue, endTime: dateValue };
        instance.value = dateValue;
        instance.dataBind();
      } else if (element2.classList.contains("e-dropdownlist")) {
        var instance = element2.ej2_instances[0];
        instance.value = null;
        instance.dataBind();
      } else if (element2.classList.contains("e-multiselect")) {
        var instance = element2.ej2_instances[0];
        instance.value = [];
        instance.dataBind();
      } else if (element2.classList.contains("e-checkbox")) {
        var instance = element2.ej2_instances[0];
        instance.checked = false;
        instance.dataBind();
      } else {
        if (element2.type === "checkbox") {
          element2.checked = false;
        } else {
          element2.value = "";
        }
      }
    };
    EventWindow2.prototype.getInstance = function(className) {
      var element2 = this.element.querySelector("." + className);
      return element2 ? element2.ej2_instances[0] : null;
    };
    EventWindow2.prototype.eventDelete = function(event) {
      if (this.isEnterKey) {
        this.isEnterKey = false;
        return;
      }
      switch (this.parent.currentAction) {
        case "EditOccurrence":
          if (!isNullOrUndefined(this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule])) {
            this.parent.currentAction = "DeleteOccurrence";
          } else {
            this.parent.currentAction = "Delete";
          }
          break;
        case "EditSeries":
          this.parent.currentAction = "DeleteSeries";
          break;
        case "Save":
          this.parent.currentAction = "Delete";
          break;
        case "EditFollowingEvents":
          if (!isNullOrUndefined(this.parent.activeEventData.event[this.parent.eventFields.recurrenceRule])) {
            this.parent.currentAction = "DeleteFollowingEvents";
          }
          break;
      }
      this.dialogEvent = event;
      this.isCrudAction = false;
      this.dialogObject.hide();
      this.parent.quickPopup.openDeleteAlert();
    };
    EventWindow2.prototype.getRecurrenceEditorInstance = function() {
      if (this.parent.isAdaptive && !this.repeatDialogObject) {
        this.renderRepeatDialog();
      }
      return this.recurrenceEditor;
    };
    EventWindow2.prototype.destroyComponents = function() {
      var formElements = this.getFormElements(EVENT_WINDOW_DIALOG_CLASS);
      for (var _i = 0, formElements_3 = formElements; _i < formElements_3.length; _i++) {
        var element2 = formElements_3[_i];
        var instance = void 0;
        if (element2.classList.contains("e-datetimepicker")) {
          instance = element2.ej2_instances;
        } else if (element2.classList.contains("e-datepicker")) {
          instance = element2.ej2_instances;
        } else if (element2.classList.contains("e-checkbox")) {
          instance = element2.ej2_instances;
        } else if (element2.classList.contains("e-dropdownlist")) {
          instance = element2.ej2_instances;
        } else if (element2.classList.contains("e-multiselect")) {
          instance = element2.ej2_instances;
        } else if (element2.classList.contains("e-numerictextbox")) {
          instance = element2.ej2_instances;
        }
        if (instance && instance[0]) {
          instance[0].destroy();
        }
      }
      if (this.buttonObj) {
        this.buttonObj.destroy();
      }
    };
    EventWindow2.prototype.detachComponents = function() {
      var formElements = this.getFormElements(EVENT_WINDOW_DIALOG_CLASS);
      for (var _i = 0, formElements_4 = formElements; _i < formElements_4.length; _i++) {
        var element2 = formElements_4[_i];
        detach(element2);
      }
    };
    EventWindow2.prototype.destroy = function(isIgnore) {
      if (this.parent && !this.parent.isDestroyed) {
        this.parent.resetTemplates(["editorTemplate"]);
      }
      this.destroyComponents();
      if (this.recurrenceEditor) {
        this.recurrenceEditor.destroy();
        detach(this.recurrenceEditor.element);
        this.recurrenceEditor = null;
      }
      if (this.fieldValidator) {
        this.fieldValidator.destroy();
        this.fieldValidator = null;
      }
      if (this.repeatDialogObject) {
        this.repeatDialogObject.destroy();
        this.repeatDialogObject = null;
      }
      this.detachComponents();
      if (this.dialogObject) {
        if (this.dialogObject.element) {
          var form = this.dialogObject.element.querySelector("form");
          removeChildren(form);
          detach(form);
          EventHandler.remove(this.dialogObject.element, "keydown", this.preventEventSave);
        }
        this.dialogObject.destroy();
        this.dialogObject = null;
      }
      if (this.element) {
        remove(this.element);
        this.element = null;
      }
      if (!isIgnore) {
        this.l10n = null;
        this.parent = null;
        this.fields = null;
        this.buttonObj = null;
        this.repeatStatus = null;
        this.eventWindowTime = null;
        this.dialogEvent = null;
      }
    };
    return EventWindow2;
  }()
);
var VirtualScroll = (
  /** @class */
  function() {
    function VirtualScroll2(parent) {
      this.translateY = 0;
      this.itemSize = 60;
      this.bufferCount = 3;
      this.renderedLength = 0;
      this.averageRowHeight = 0;
      this.startIndex = 0;
      this.parent = parent;
      this.addEventListener();
    }
    VirtualScroll2.prototype.addEventListener = function() {
      if (!this.parent || this.parent && this.parent.isDestroyed) {
        return;
      }
      this.parent.on(virtualScroll, this.virtualScrolling, this);
    };
    VirtualScroll2.prototype.removeEventListener = function() {
      if (!this.parent || this.parent && this.parent.isDestroyed) {
        return;
      }
      this.parent.off(virtualScroll, this.virtualScrolling);
    };
    VirtualScroll2.prototype.getRenderedCount = function() {
      this.setItemSize();
      var containerSize = this.isHorizontalScroll ? this.parent.element.clientWidth : this.parent.element.clientHeight;
      this.renderedLength = Math.ceil(containerSize / this.itemSize) + this.bufferCount;
      return this.renderedLength;
    };
    VirtualScroll2.prototype.renderVirtualTrack = function(contentWrap) {
      var wrap = createElement("div", { className: VIRTUAL_TRACK_CLASS });
      if (this.isHorizontalScroll) {
        var colCount = this.parent.activeView.colLevels[this.parent.activeView.colLevels.length - 1].length;
        wrap.style.width = colCount * this.itemSize + "px";
      } else {
        wrap.style.height = this.parent.resourceBase.expandedResources.length * this.itemSize + "px";
      }
      contentWrap.appendChild(wrap);
    };
    VirtualScroll2.prototype.updateVirtualScrollHeight = function() {
      var virtual = this.parent.element.querySelector("." + VIRTUAL_TRACK_CLASS);
      var lastResourceIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;
      var lastRenderIndex = this.parent.resourceBase.renderedResources[this.parent.resourceBase.renderedResources.length - 1].groupIndex;
      if (lastRenderIndex !== lastResourceIndex) {
        var conTable = this.parent.element.querySelector("." + CONTENT_TABLE_CLASS);
        this.renderedLength = conTable.querySelector("tbody").children.length;
        virtual.style.height = conTable.offsetHeight + (this.parent.resourceBase.expandedResources.length - this.renderedLength) * conTable.offsetHeight / this.renderedLength + "px";
      } else {
        virtual.style.height = "";
      }
      this.averageRowHeight = virtual.offsetHeight / this.parent.resourceBase.expandedResources.length;
    };
    VirtualScroll2.prototype.updateVirtualTrackHeight = function(wrap) {
      var resourceCount = this.parent.resourceBase.renderedResources.length;
      if (resourceCount !== this.getRenderedCount()) {
        wrap.style.height = this.parent.element.querySelector(".e-content-wrap").clientHeight + "px";
        var resWrap = this.parent.element.querySelector("." + RESOURCE_COLUMN_WRAP_CLASS);
        var conWrap = this.parent.element.querySelector("." + CONTENT_WRAP_CLASS);
        var eventWrap = this.parent.element.querySelector("." + EVENT_TABLE_CLASS);
        this.translateY = 0;
        this.setTranslate(resWrap, conWrap, eventWrap);
      } else {
        var lastRenderIndex = this.parent.resourceBase.renderedResources[resourceCount - 1].groupIndex;
        var lastCollIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;
        var renderedResCount = resourceCount + (lastCollIndex - lastRenderIndex);
        renderedResCount = renderedResCount > this.parent.resourceBase.expandedResources.length ? this.parent.resourceBase.expandedResources.length : renderedResCount;
        wrap.style.height = renderedResCount * this.itemSize + "px";
      }
    };
    VirtualScroll2.prototype.setItemSize = function() {
      if (this.isHorizontalScroll) {
        this.itemSize = getElementWidthFromClass(this.parent.activeView.element, WORK_CELLS_CLASS) || this.itemSize;
      } else {
        this.itemSize = getElementHeightFromClass(this.parent.activeView.element, WORK_CELLS_CLASS) || this.itemSize;
      }
    };
    VirtualScroll2.prototype.renderEvents = function() {
      this.setTabIndex();
      if (this.parent.crudModule) {
        this.parent.crudModule.refreshProcessedData(true);
      }
      if (this.parent.currentView !== "Month") {
        this.parent.notify(contentReady, {});
      }
      this.parent.hideSpinner();
    };
    VirtualScroll2.prototype.virtualScrolling = function() {
      var _this = this;
      if (this.parent.quickPopup) {
        this.parent.quickPopup.quickPopupHide();
        this.parent.quickPopup.morePopup.hide();
      }
      var conWrap = this.parent.element.querySelector("." + CONTENT_WRAP_CLASS);
      if (this.isHorizontalScroll) {
        this.horizontalScrolling(conWrap);
      } else {
        var resWrap = this.parent.element.querySelector("." + RESOURCE_COLUMN_WRAP_CLASS);
        var eventWrap = this.parent.element.querySelector("." + EVENT_TABLE_CLASS);
        var timeIndicator = this.parent.element.querySelector("." + CURRENT_TIMELINE_CLASS);
        var conTable = this.parent.element.querySelector("." + CONTENT_TABLE_CLASS);
        addClass([conWrap], "e-transition");
        this.renderedLength = resWrap.querySelector("tbody").children.length;
        var firstTDIndex = parseInt(resWrap.querySelector("tbody td").getAttribute("data-group-index"), 10);
        var scrollHeight = this.parent.rowAutoHeight ? conTable.offsetHeight - conWrap.offsetHeight : this.bufferCount * this.itemSize;
        var resCollection = [];
        if (conWrap.scrollTop - this.translateY < 0) {
          resCollection = this.upScroll(conWrap, firstTDIndex);
        } else if (conWrap.scrollTop - this.translateY > scrollHeight) {
          resCollection = this.downScroll(conWrap, firstTDIndex);
        }
        if (!isNullOrUndefined(resCollection) && resCollection.length > 0) {
          this.parent.showSpinner();
          var selectedEle = this.parent.getSelectedCells();
          this.focusedEle = selectedEle[selectedEle.length - 1] || this.focusedEle;
          this.updateContent(resWrap, conWrap, eventWrap, resCollection);
          this.setTranslate(resWrap, conWrap, eventWrap, timeIndicator);
          if (this.parent.dragAndDropModule && this.parent.dragAndDropModule.actionObj.action === "drag") {
            this.parent.dragAndDropModule.navigationWrapper();
          }
          window.clearTimeout(this.timeValue);
          this.timeValue = window.setTimeout(function() {
            _this.renderEvents();
          }, 250);
        }
      }
    };
    VirtualScroll2.prototype.horizontalScrolling = function(conWrap) {
      var _this = this;
      var resCollection = [];
      var scrollWidth = this.bufferCount * this.itemSize;
      if (Math.abs(conWrap.scrollLeft) - Math.abs(this.translateY) < 0) {
        resCollection = this.leftScroll(conWrap);
      } else if (Math.abs(conWrap.scrollLeft) - Math.abs(this.translateY) > scrollWidth) {
        resCollection = this.rightScroll(conWrap);
      }
      if (!isNullOrUndefined(resCollection) && resCollection.length > 0) {
        if (this.parent.resourceBase.expandedResources.length !== resCollection.length || this.parent.resourceBase.expandedResources[0] !== resCollection[0] || this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1] !== resCollection[resCollection.length - 1]) {
          this.parent.showSpinner();
          var colLevels = this.parent.activeView.colLevels.slice(0);
          this.updateHorizontalContent(conWrap, resCollection);
          setStyleAttribute(conWrap.querySelector("table"), { transform: "translateX(" + this.translateY + "px)" });
          this.parent.activeView.colLevels = colLevels;
          if (this.parent.dragAndDropModule && this.parent.dragAndDropModule.actionObj.action === "drag") {
            this.parent.dragAndDropModule.navigationWrapper();
          }
        }
        window.clearTimeout(this.timeValue);
        this.timeValue = window.setTimeout(function() {
          _this.renderEvents();
        }, 250);
      }
    };
    VirtualScroll2.prototype.upScroll = function(conWrap, firstTDIndex) {
      var index = 0;
      index = ~~(conWrap.scrollTop / this.itemSize) + Math.ceil(conWrap.clientHeight / this.itemSize) - this.renderedLength;
      if (this.parent.rowAutoHeight) {
        index = index > firstTDIndex ? firstTDIndex - this.bufferCount : index;
      }
      index = index > 0 ? index : 0;
      var prevSetCollection = this.getBufferCollection(index, index + this.renderedLength);
      this.parent.resourceBase.renderedResources = prevSetCollection;
      if (firstTDIndex === 0) {
        this.translateY = conWrap.scrollTop;
      } else {
        var height = this.parent.rowAutoHeight ? this.averageRowHeight : this.itemSize;
        height = height > 0 ? height : this.itemSize;
        this.translateY = conWrap.scrollTop - this.bufferCount * height > 0 ? conWrap.scrollTop - this.bufferCount * height : 0;
      }
      return prevSetCollection;
    };
    VirtualScroll2.prototype.downScroll = function(conWrap, firstTDIndex) {
      var lastResource = this.parent.resourceBase.renderedResources[this.parent.resourceBase.renderedResources.length - 1].groupIndex;
      var lastResourceIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;
      if (lastResource === lastResourceIndex) {
        return null;
      }
      var nextSetResIndex = 0;
      nextSetResIndex = ~~(conWrap.scrollTop / this.itemSize);
      if (this.parent.rowAutoHeight) {
        nextSetResIndex = ~~((conWrap.scrollTop - this.translateY) / this.averageRowHeight) + firstTDIndex;
        nextSetResIndex = nextSetResIndex > firstTDIndex + this.bufferCount ? nextSetResIndex : firstTDIndex + this.bufferCount;
      }
      var lastIndex = nextSetResIndex + this.renderedLength;
      lastIndex = lastIndex > this.parent.resourceBase.expandedResources.length ? nextSetResIndex + (this.parent.resourceBase.expandedResources.length - nextSetResIndex) : lastIndex;
      var nextSetCollection = this.getBufferCollection(lastIndex - this.renderedLength, lastIndex);
      this.translateY = conWrap.scrollTop;
      return nextSetCollection;
    };
    VirtualScroll2.prototype.leftScroll = function(conWrap) {
      var index = 0;
      index = ~~(Math.abs(conWrap.scrollLeft) / this.itemSize) + Math.ceil(conWrap.clientWidth / this.itemSize) - this.renderedLength;
      index = index > 0 ? index : 0;
      return this.getCollection(index, index + this.renderedLength);
    };
    VirtualScroll2.prototype.rightScroll = function(conWrap) {
      var lastLevel = this.parent.activeView.colLevels[this.parent.activeView.colLevels.length - 1];
      var nextSetIndex = 0;
      nextSetIndex = ~~(Math.abs(conWrap.scrollLeft) / this.itemSize);
      var lastIndex = nextSetIndex + this.renderedLength;
      lastIndex = lastIndex > lastLevel.length - 1 ? lastLevel.length - 1 : lastIndex;
      return this.getCollection(lastIndex - this.renderedLength, lastIndex);
    };
    VirtualScroll2.prototype.getCollection = function(startIndex, endIndex) {
      this.translateY = startIndex * this.itemSize;
      var lastLevel = this.getResCollection(startIndex, endIndex);
      if (this.parent.enableRtl) {
        this.translateY = -this.translateY;
      }
      return lastLevel;
    };
    VirtualScroll2.prototype.getResCollection = function(startIndex, endIndex) {
      var lastLevel = this.parent.activeView.colLevels[this.parent.activeView.colLevels.length - 1];
      var resCollection = [];
      var index = { startIndex: 0, endIndex: 0 };
      if (this.parent.activeViewOptions.group.byDate) {
        if (lastLevel[parseInt(startIndex.toString(), 10)].date.getTime() === this.parent.resourceBase.expandedResources[0].date.getTime() && lastLevel[parseInt(endIndex.toString(), 10)].date.getTime() === this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].date.getTime()) {
          return this.parent.resourceBase.expandedResources;
        }
        resCollection = this.getByDateCollection(lastLevel[parseInt(startIndex.toString(), 10)], lastLevel[parseInt(endIndex.toString(), 10)], index);
        this.setRenderedDates(resCollection);
      } else {
        if (lastLevel[parseInt(startIndex.toString(), 10)].groupIndex === this.parent.resourceBase.expandedResources[0].groupIndex && lastLevel[parseInt(endIndex.toString(), 10)].groupIndex === this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex) {
          return this.parent.resourceBase.expandedResources;
        }
        resCollection = this.getByIdCollection(lastLevel[parseInt(startIndex.toString(), 10)], lastLevel[parseInt(endIndex.toString(), 10)], index);
      }
      if (this.parent.currentView !== "Month") {
        this.startIndex = index.startIndex;
        resCollection = lastLevel.slice(index.startIndex, index.endIndex);
      }
      this.translateY = index.startIndex * this.itemSize;
      return resCollection;
    };
    VirtualScroll2.prototype.getByDateCollection = function(firstItem, lastItem, index) {
      var resCollection = this.parent.activeView.colLevels[0].filter(function(data) {
        return firstItem.date.getTime() <= data.date.getTime() && data.date.getTime() <= lastItem.date.getTime();
      });
      this.setStartEndIndex(this.parent.activeView.colLevels[0], resCollection[0], resCollection[resCollection.length - 1], index);
      return resCollection;
    };
    VirtualScroll2.prototype.getByIdCollection = function(firstItem, lastItem, index) {
      var resCollection = this.parent.resourceBase.lastResourceLevel.filter(function(data) {
        return firstItem.groupIndex <= data.groupIndex && data.groupIndex <= lastItem.groupIndex;
      });
      this.parent.resourceBase.renderedResources = resCollection;
      this.setStartEndIndex(this.parent.resourceBase.lastResourceLevel, resCollection[0], resCollection[resCollection.length - 1], index);
      return resCollection;
    };
    VirtualScroll2.prototype.setStartEndIndex = function(data, firstItem, lastItem, colIndex) {
      var index = 0;
      data.filter(function(data2) {
        if (firstItem === data2) {
          colIndex.startIndex = index;
        } else if (lastItem === data2) {
          colIndex.endIndex = index + data2.colSpan;
        }
        index += data2.colSpan;
      });
      if (firstItem === lastItem) {
        colIndex.endIndex = colIndex.startIndex + lastItem.colSpan;
      }
    };
    VirtualScroll2.prototype.updateContent = function(resWrap, conWrap, eventWrap, resCollection) {
      var renderedLength = resWrap.querySelector("tbody").children.length;
      if (document.activeElement && document.activeElement.classList.contains(RESOURCE_CELLS_CLASS)) {
        this.isResourceCell = true;
        this.parent.element.focus();
      }
      for (var i = 0; i < renderedLength; i++) {
        remove(resWrap.querySelector("tbody tr"));
        remove(conWrap.querySelector("tbody tr"));
        remove(eventWrap.querySelector("div"));
      }
      this.parent.resourceBase.renderedResources = resCollection;
      var resourceRows = this.parent.resourceBase.getContentRows(resCollection, true);
      var contentRows = this.parent.activeView.getContentRows();
      var eventRows = this.parent.activeView.getEventRows(resCollection.length);
      append2(resourceRows, resWrap.querySelector("tbody"));
      append2(contentRows, conWrap.querySelector("tbody"));
      append2(eventRows, eventWrap);
    };
    VirtualScroll2.prototype.updateHorizontalContent = function(conWrap, resCollection) {
      this.parent.resourceBase.expandedResources = resCollection;
      var selectedEle = this.parent.getSelectedCells();
      this.focusedEle = selectedEle[selectedEle.length - 1] || this.focusedEle;
      var renderedLength = conWrap.querySelectorAll("tbody tr").length;
      for (var i = 0; i < renderedLength; i++) {
        remove(conWrap.querySelector("tbody tr"));
      }
      if (this.parent.currentView === "Month") {
        if (this.parent.activeViewOptions.group.byDate) {
          this.parent.activeView.colLevels[0] = resCollection;
        } else {
          this.parent.activeView.colLevels[this.parent.activeView.colLevels.length - 2] = resCollection;
        }
        var contentRows = this.parent.activeView.getContentRows();
        append2(contentRows, conWrap.querySelector("tbody"));
      } else {
        var col = [].slice.call(conWrap.querySelector("colgroup").children);
        for (var i = 0; i < col.length; i++) {
          remove(col[parseInt(i.toString(), 10)]);
        }
        this.parent.activeView.colLevels[this.parent.activeView.colLevels.length - 1] = resCollection;
        var contentRows = this.parent.activeView.getContentRows();
        var table = conWrap.querySelector("table");
        var thead = conWrap.querySelector("thead");
        var colGroupEle_1 = conWrap.querySelector("colgroup");
        resCollection.forEach(function() {
          colGroupEle_1.appendChild(createElement("col"));
        });
        thead.appendChild(this.parent.eventBase.createEventWrapper("", this.startIndex > 0 ? this.startIndex : 0));
        if (this.parent.activeViewOptions.timeScale.enable) {
          thead.appendChild(this.parent.eventBase.createEventWrapper("timeIndicator"));
        }
        prepend([thead], table);
        append2(contentRows, conWrap.querySelector("tbody"));
      }
    };
    VirtualScroll2.prototype.getBufferCollection = function(startIndex, endIndex) {
      return this.parent.resourceBase.expandedResources.slice(startIndex, endIndex);
    };
    VirtualScroll2.prototype.setTranslate = function(resWrap, conWrap, eventWrap, timeIndicator) {
      setStyleAttribute(resWrap.querySelector("table"), { transform: "translateY(" + this.translateY + "px)" });
      setStyleAttribute(conWrap.querySelector("table"), { transform: "translateY(" + this.translateY + "px)" });
      setStyleAttribute(eventWrap, { transform: "translateY(" + this.translateY + "px)" });
      if (!isNullOrUndefined(timeIndicator)) {
        setStyleAttribute(timeIndicator, { transform: "translateY(" + this.translateY + "px)" });
      }
    };
    VirtualScroll2.prototype.updateFocusedWorkCell = function() {
      if (this.focusedEle) {
        var date = parseInt(this.focusedEle.getAttribute("data-date"), 10);
        var groupIndex = parseInt(this.focusedEle.getAttribute("data-group-index"), 10);
        var ele = this.parent.element.querySelector("." + WORK_CELLS_CLASS + '[data-date="' + date + '"][data-group-index="' + groupIndex + '"]');
        if (ele) {
          this.parent.addSelectedClass([ele], ele, true);
        }
        this.focusedEle = null;
      }
    };
    VirtualScroll2.prototype.setRenderedDates = function(resCollection) {
      if (this.parent.currentView !== "Month") {
        var dateCol_1 = resCollection.map(function(x) {
          return x.date;
        });
        this.parent.resourceBase.renderedResources.forEach(function(x) {
          return x.renderDates = dateCol_1;
        });
      } else {
        var dateCol_2 = resCollection.map(function(x) {
          return x.date.getDay();
        });
        var renderDates_1 = this.parent.activeView.renderDates.filter(function(x) {
          return dateCol_2.indexOf(x.getDay()) >= 0;
        });
        this.parent.resourceBase.renderedResources.forEach(function(x) {
          return x.renderDates = renderDates_1;
        });
      }
    };
    VirtualScroll2.prototype.setTabIndex = function() {
      var resColWrap = this.parent.element.querySelector("." + RESOURCE_COLUMN_WRAP_CLASS);
      var resCells = [].slice.call(this.parent.element.querySelectorAll("." + RESOURCE_CELLS_CLASS));
      if (resCells && resColWrap) {
        resCells.forEach(function(element2) {
          if (element2.getBoundingClientRect().top >= resColWrap.getBoundingClientRect().top) {
            element2.setAttribute("tabindex", "0");
          }
        });
      }
      var focusResCell = this.parent.element.querySelector("." + RESOURCE_CELLS_CLASS + '[tabindex="0"]');
      if (this.isResourceCell && focusResCell) {
        focusResCell.focus();
        this.isResourceCell = false;
      }
    };
    VirtualScroll2.prototype.destroy = function() {
      this.removeEventListener();
      this.focusedEle = null;
    };
    return VirtualScroll2;
  }()
);
var Render = (
  /** @class */
  function() {
    function Render2(parent) {
      this.parent = parent;
    }
    Render2.prototype.render = function(viewName, isDataRefresh) {
      if (isDataRefresh === void 0) {
        isDataRefresh = true;
      }
      this.initializeLayout(viewName);
      if (this.parent.activeView && isDataRefresh) {
        this.parent.crudModule.refreshDataManager();
      }
    };
    Render2.prototype.initializeLayout = function(viewName) {
      if (this.parent.activeView) {
        var templates = [
          "cellTemplate",
          "eventTemplate",
          "tooltipTemplate",
          "majorSlotTemplate",
          "minorSlotTemplate",
          "headerTooltipTemplate",
          "dateHeaderTemplate",
          "dayHeaderTemplate",
          "monthHeaderTemplate",
          "headerIndentTemplate",
          "resourceHeaderTemplate",
          "cellHeaderTemplate",
          "dateRangeTemplate"
        ];
        this.parent.resetTemplates(templates);
        this.parent.activeView.removeEventListener();
        this.parent.activeView.destroy();
      }
      switch (viewName) {
        case "Day":
          this.parent.activeView = this.parent.dayModule;
          break;
        case "Week":
          this.parent.activeView = this.parent.weekModule;
          break;
        case "WorkWeek":
          this.parent.activeView = this.parent.workWeekModule;
          break;
        case "Month":
          this.parent.activeView = this.parent.monthModule;
          break;
        case "Year":
          this.parent.activeView = this.parent.yearModule;
          break;
        case "Agenda":
          this.parent.activeView = this.parent.agendaModule;
          break;
        case "MonthAgenda":
          this.parent.activeView = this.parent.monthAgendaModule;
          break;
        case "TimelineDay":
          this.parent.activeView = this.parent.timelineViewsModule;
          this.parent.activeView.viewClass = "e-timeline-day-view";
          break;
        case "TimelineWorkWeek":
          this.parent.activeView = this.parent.timelineViewsModule;
          this.parent.activeView.viewClass = "e-timeline-work-week-view";
          break;
        case "TimelineWeek":
          this.parent.activeView = this.parent.timelineViewsModule;
          this.parent.activeView.viewClass = "e-timeline-week-view";
          break;
        case "TimelineMonth":
          this.parent.activeView = this.parent.timelineMonthModule;
          break;
        case "TimelineYear":
          this.parent.activeView = this.parent.timelineYearModule;
          break;
      }
      if (isNullOrUndefined(this.parent.activeView)) {
        var firstView = this.parent.viewCollections[0].option;
        if (firstView) {
          this.parent.setProperties({ currentView: firstView }, true);
          if (this.parent.headerModule) {
            this.parent.headerModule.updateActiveView();
            this.parent.headerModule.setCalendarView();
          }
          return this.initializeLayout(firstView);
        }
        throw Error("Inject required modules");
      }
      this.parent.activeView.viewIndex = this.parent.viewIndex;
      this.updateLabelText(viewName);
      this.parent.activeView.addEventListener();
      this.parent.activeView.getRenderDates();
      this.parent.uiStateValues.isGroupAdaptive = this.parent.activeViewOptions.group.resources.length > 0 && (this.parent.enableAdaptiveUI && !this.parent.isAdaptive || this.parent.isAdaptive && this.parent.activeViewOptions.group.enableCompactView);
      if (this.parent.virtualScrollModule) {
        this.parent.virtualScrollModule.destroy();
        this.parent.virtualScrollModule = null;
      }
      if ((["Agenda", "Year"].indexOf(this.parent.currentView) === -1 || this.parent.currentView === "TimelineYear" && this.parent.activeViewOptions.orientation === "Vertical") && this.parent.activeViewOptions.allowVirtualScrolling && this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {
        this.parent.virtualScrollModule = new VirtualScroll(this.parent);
        if (this.parent.activeView.isTimelineView()) {
          this.parent.uiStateValues.top = 0;
        } else {
          this.parent.virtualScrollModule.isHorizontalScroll = true;
          this.parent.uiStateValues.left = 0;
        }
      }
      this.updateHeader();
      this.parent.currentTimezoneDate = this.parent.getCurrentTime();
      this.parent.activeView.renderLayout(CURRENT_PANEL_CLASS);
      this.parent.renderTemplates();
      if (this.parent.eventTooltip) {
        this.parent.eventTooltip.destroy();
        this.parent.eventTooltip = null;
      }
      if (this.parent.eventSettings.enableTooltip || this.parent.activeViewOptions.group.resources.length > 0 && this.parent.activeViewOptions.group.headerTooltipTemplate) {
        this.parent.eventTooltip = new EventTooltip(this.parent);
      }
    };
    Render2.prototype.updateHeader = function() {
      if (this.parent.headerModule) {
        this.parent.headerModule.setDayOfWeek(this.parent.activeViewOptions.firstDayOfWeek);
        if (this.parent.activeViewOptions.readonly) {
          addClass([this.parent.element], READ_ONLY);
        } else if (this.parent.element.classList.contains(READ_ONLY)) {
          removeClass([this.parent.element], READ_ONLY);
        }
        this.parent.headerModule.updateDateRange();
        this.parent.headerModule.updateHeaderItems("remove");
      }
    };
    Render2.prototype.updateLabelText = function(view) {
      var content = this.parent.activeView.getLabelText(view);
      this.parent.element.setAttribute("role", "main");
      this.parent.element.setAttribute("aria-label", content);
    };
    return Render2;
  }()
);
var __extends$g = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$9 = globalThis && globalThis.__decorate || function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i = decorators.length - 1; i >= 0; i--)
      if (d = decorators[i])
        r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var WorkHours = (
  /** @class */
  function(_super) {
    __extends$g(WorkHours2, _super);
    function WorkHours2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$9([
      Property(true)
    ], WorkHours2.prototype, "highlight", void 0);
    __decorate$9([
      Property("09:00")
    ], WorkHours2.prototype, "start", void 0);
    __decorate$9([
      Property("18:00")
    ], WorkHours2.prototype, "end", void 0);
    return WorkHours2;
  }(ChildProperty)
);
var __extends$f = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$8 = globalThis && globalThis.__decorate || function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i = decorators.length - 1; i >= 0; i--)
      if (d = decorators[i])
        r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var TimeScale = (
  /** @class */
  function(_super) {
    __extends$f(TimeScale2, _super);
    function TimeScale2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$8([
      Property(true)
    ], TimeScale2.prototype, "enable", void 0);
    __decorate$8([
      Property(60)
    ], TimeScale2.prototype, "interval", void 0);
    __decorate$8([
      Property(2)
    ], TimeScale2.prototype, "slotCount", void 0);
    __decorate$8([
      Property()
    ], TimeScale2.prototype, "minorSlotTemplate", void 0);
    __decorate$8([
      Property()
    ], TimeScale2.prototype, "majorSlotTemplate", void 0);
    return TimeScale2;
  }(ChildProperty)
);
var __extends$e = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$7 = globalThis && globalThis.__decorate || function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i = decorators.length - 1; i >= 0; i--)
      if (d = decorators[i])
        r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var QuickInfoTemplates = (
  /** @class */
  function(_super) {
    __extends$e(QuickInfoTemplates2, _super);
    function QuickInfoTemplates2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$7([
      Property("Both")
    ], QuickInfoTemplates2.prototype, "templateType", void 0);
    __decorate$7([
      Property()
    ], QuickInfoTemplates2.prototype, "header", void 0);
    __decorate$7([
      Property()
    ], QuickInfoTemplates2.prototype, "content", void 0);
    __decorate$7([
      Property()
    ], QuickInfoTemplates2.prototype, "footer", void 0);
    return QuickInfoTemplates2;
  }(ChildProperty)
);
var __extends$d = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$6 = globalThis && globalThis.__decorate || function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i = decorators.length - 1; i >= 0; i--)
      if (d = decorators[i])
        r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var HeaderRows = (
  /** @class */
  function(_super) {
    __extends$d(HeaderRows2, _super);
    function HeaderRows2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$6([
      Property()
    ], HeaderRows2.prototype, "option", void 0);
    __decorate$6([
      Property()
    ], HeaderRows2.prototype, "template", void 0);
    return HeaderRows2;
  }(ChildProperty)
);
var Crud = (
  /** @class */
  function() {
    function Crud2(parent) {
      this.parent = parent;
      this.crudObj = { sourceEvent: null, targetEvent: null, isCrudAction: false };
    }
    Crud2.prototype.getQuery = function() {
      var start = this.parent.activeView.startDate();
      var end = this.parent.activeView.endDate();
      return this.parent.dataModule.generateQuery(start, end);
    };
    Crud2.prototype.getTable = function() {
      if (this.parent.eventSettings.query) {
        var query = this.parent.eventSettings.query.clone();
        return query.fromTable;
      }
      return null;
    };
    Crud2.prototype.refreshDataManager = function() {
      var _this = this;
      if (!this.parent.activeView) {
        return;
      }
      var start = this.parent.activeView.startDate();
      var end = this.parent.activeView.endDate();
      var dataManager = this.parent.dataModule.getData(this.parent.dataModule.generateQuery(start, end));
      dataManager.then(function(e) {
        return _this.dataManagerSuccess(e);
      }).catch(function(e) {
        return _this.dataManagerFailure(e);
      });
    };
    Crud2.prototype.dataManagerSuccess = function(e) {
      var _this = this;
      if (!this.parent || this.parent && this.parent.isDestroyed) {
        return;
      }
      this.parent.trigger(dataBinding, e, function(args) {
        var resultData = extend([], args.result, null, true);
        _this.parent.eventsData = resultData.filter(function(data) {
          return !data[_this.parent.eventFields.isBlock];
        });
        _this.parent.blockData = resultData.filter(function(data) {
          return data[_this.parent.eventFields.isBlock];
        });
        _this.refreshProcessedData();
        if (_this.parent.dragAndDropModule && _this.parent.dragAndDropModule.actionObj.action === "drag") {
          _this.parent.dragAndDropModule.navigationWrapper();
        }
        _this.parent.trigger(dataBound, null, function() {
          _this.parent.hideSpinner();
          if (_this.parent.isPrinting) {
            _this.parent.notify(print, {});
          }
        });
      });
    };
    Crud2.prototype.dataManagerFailure = function(e) {
      var _this = this;
      if (!this.parent || this.parent && this.parent.isDestroyed) {
        return;
      }
      this.parent.trigger(actionFailure, { error: e }, function() {
        return _this.parent.hideSpinner();
      });
    };
    Crud2.prototype.refreshProcessedData = function(isVirtualScrollAction) {
      if (isVirtualScrollAction === void 0) {
        isVirtualScrollAction = false;
      }
      if (this.parent.dragAndDropModule) {
        this.parent.dragAndDropModule.actionObj.action = "";
        removeClass([this.parent.element], "e-event-action");
      }
      if (this.parent.activeViewOptions && this.parent.activeViewOptions.eventTemplate) {
        var templateNames = ["eventTemplate"];
        if (this.crudObj.isCrudAction && ["Agenda", "MonthAgenda", "Year", "TimelineYear"].indexOf(this.parent.currentView) === -1) {
          templateNames = [];
          for (var i = 0, len = this.crudObj.sourceEvent.length; i < len; i++) {
            templateNames.push("eventTemplate_" + this.crudObj.sourceEvent[parseInt(i.toString(), 10)].groupIndex);
            if (this.crudObj.targetEvent[parseInt(i.toString(), 10)] && this.crudObj.sourceEvent[parseInt(i.toString(), 10)].groupIndex !== this.crudObj.targetEvent[parseInt(i.toString(), 10)].groupIndex) {
              templateNames.push("eventTemplate_" + this.crudObj.targetEvent[parseInt(i.toString(), 10)].groupIndex);
            }
          }
        }
        if (templateNames.length > 0) {
          this.parent.resetTemplates(templateNames);
        }
      }
      if (isVirtualScrollAction) {
        this.parent.notify(dataReady, { processedData: this.parent.eventsProcessed });
        return;
      }
      var eventsData = this.parent.eventsData || [];
      var blockData = this.parent.blockData || [];
      var data = eventsData.concat(blockData);
      this.parent.notify(dataReady, { processedData: this.parent.eventBase ? this.parent.eventBase.processData(data) : [] });
    };
    Crud2.prototype.refreshData = function(args) {
      var _this = this;
      var actionArgs = {
        requestType: args.requestType,
        cancel: false,
        data: args.data,
        addedRecords: args.editParams.addedRecords,
        changedRecords: args.editParams.changedRecords,
        deletedRecords: args.editParams.deletedRecords
      };
      if (this.parent.dragAndDropModule && this.parent.dragAndDropModule.actionObj && this.parent.dragAndDropModule.actionObj.element) {
        this.parent.dragAndDropModule.actionObj.element.style.display = "none";
      }
      if (this.parent.resizeModule && this.parent.resizeModule.actionObj && this.parent.resizeModule.actionObj.element) {
        this.parent.resizeModule.actionObj.element.style.display = "none";
      }
      if (this.parent.isSpecificResourceEvents()) {
        if (args.requestType === "eventCreated" || args.requestType === "eventRemoved") {
          this.crudObj.isCrudAction = true;
          this.crudObj.sourceEvent = [];
          var crudData = args.data instanceof Array ? args.data.length === 0 && args.requestType === "eventRemoved" ? args.editParams.deletedRecords : args.data : (typeof args.data === "string" || typeof args.data === "number") && args.requestType === "eventRemoved" ? args.editParams.deletedRecords : [args.data];
          var _loop_1 = function(data2) {
            this_1.crudObj.isCrudAction = !(args.requestType === "eventRemoved" && !isNullOrUndefined(data2.parent));
            var groupIndex = this_1.parent.eventBase.getGroupIndexFromEvent(data2);
            if (groupIndex > -1 && this_1.parent.crudModule.crudObj.sourceEvent.filter(function(tdData) {
              return tdData.groupIndex === groupIndex;
            }).length === 0 && this_1.crudObj.isCrudAction) {
              this_1.crudObj.sourceEvent.push(this_1.parent.resourceBase.lastResourceLevel[parseInt(groupIndex.toString(), 10)]);
            }
          };
          var this_1 = this;
          for (var _i = 0, crudData_1 = crudData; _i < crudData_1.length; _i++) {
            var data = crudData_1[_i];
            _loop_1(data);
          }
          this.crudObj.targetEvent = this.crudObj.sourceEvent;
        }
      }
      if (this.parent.dataModule.dataManager.dataSource.offline) {
        this.parent.trigger(actionComplete, actionArgs, function(offlineArgs) {
          if (!offlineArgs.cancel) {
            _this.refreshDataManager();
          }
        });
      } else {
        args.promise.then(function() {
          if (!_this.parent || _this.parent && _this.parent.isDestroyed) {
            return;
          }
          _this.parent.trigger(actionComplete, actionArgs, function(onlineArgs) {
            if (!onlineArgs.cancel) {
              _this.refreshDataManager();
            }
          });
        }).catch(function(e) {
          if (!_this.parent || _this.parent && _this.parent.isDestroyed) {
            return;
          }
          _this.parent.trigger(actionFailure, { error: e });
        });
      }
    };
    Crud2.prototype.addEvent = function(eventData) {
      var _this = this;
      if (this.parent.eventSettings.allowAdding && !this.parent.activeViewOptions.readonly) {
        if (!this.isBlockEvent(eventData) && this.parent.eventBase.isBlockRange(eventData)) {
          this.parent.quickPopup.openValidationError("blockAlert", eventData);
          return;
        }
        var addEvents = eventData instanceof Array ? eventData : [eventData];
        if (addEvents.length === 0) {
          return;
        }
        var args = {
          requestType: "eventCreate",
          cancel: false,
          data: addEvents,
          addedRecords: addEvents,
          changedRecords: [],
          deletedRecords: []
        };
        this.parent.trigger(actionBegin, args, function(addArgs) {
          if (!addArgs.cancel) {
            var fields = _this.parent.eventFields;
            var editParams = { addedRecords: [], changedRecords: [], deletedRecords: [] };
            var promise = void 0;
            if (addArgs.addedRecords instanceof Array) {
              for (var _i = 0, _a = addArgs.addedRecords; _i < _a.length; _i++) {
                var event_1 = _a[_i];
                event_1 = _this.parent.eventBase.updateEventDateTime(event_1);
                var eventData_1 = extend({}, _this.parent.eventBase.processTimezone(event_1, true), null, true);
                editParams.addedRecords.push(eventData_1);
              }
              promise = _this.parent.dataModule.dataManager.saveChanges(editParams, fields.id, _this.getTable(), _this.getQuery());
            } else {
              var event_2 = _this.parent.eventBase.processTimezone(addArgs.addedRecords, true);
              editParams.addedRecords.push(event_2);
              promise = _this.parent.dataModule.dataManager.insert(event_2, _this.getTable(), _this.getQuery());
            }
            var crudArgs = {
              requestType: "eventCreated",
              cancel: false,
              data: addArgs.addedRecords,
              promise,
              editParams
            };
            _this.refreshData(crudArgs);
          }
        });
      }
    };
    Crud2.prototype.saveEvent = function(eventData, action) {
      var _this = this;
      if (this.parent.eventSettings.allowEditing && !this.parent.activeViewOptions.readonly) {
        if (this.parent.currentAction !== "EditFollowingEvents" && !this.isBlockEvent(eventData) && this.parent.eventBase.isBlockRange(eventData)) {
          this.parent.quickPopup.openValidationError("blockAlert", eventData);
          this.parent.crudModule.crudObj.isCrudAction = false;
          return;
        }
        var updateEvents = eventData instanceof Array ? eventData : [eventData];
        if (updateEvents.length === 0) {
          return;
        }
        this.parent.currentAction = action;
        if (action) {
          switch (action) {
            case "Save":
              this.processSave(eventData);
              break;
            case "EditOccurrence":
              this.processOccurrences(eventData, action);
              break;
            case "EditFollowingEvents":
              this.processFollowSeries(eventData, action);
              break;
            case "EditSeries":
              this.processEntireSeries(eventData, action);
              break;
          }
        } else {
          var args = {
            requestType: "eventChange",
            cancel: false,
            data: eventData,
            addedRecords: [],
            changedRecords: updateEvents,
            deletedRecords: []
          };
          this.parent.trigger(actionBegin, args, function(saveArgs) {
            if (!saveArgs.cancel) {
              var promise = void 0;
              var fields = _this.parent.eventFields;
              var editParams = { addedRecords: [], changedRecords: [], deletedRecords: [] };
              if (saveArgs.changedRecords instanceof Array) {
                for (var _i = 0, _a = saveArgs.changedRecords; _i < _a.length; _i++) {
                  var event_3 = _a[_i];
                  event_3 = _this.parent.eventBase.updateEventDateTime(event_3);
                  var eventData_2 = extend({}, _this.parent.eventBase.processTimezone(event_3, true), null, true);
                  editParams.changedRecords.push(eventData_2);
                }
                promise = _this.parent.dataModule.dataManager.saveChanges(editParams, fields.id, _this.getTable(), _this.getQuery());
              } else {
                var event_4 = _this.parent.eventBase.processTimezone(saveArgs.changedRecords, true);
                editParams.changedRecords.push(event_4);
                promise = _this.parent.dataModule.dataManager.update(fields.id, event_4, _this.getTable(), _this.getQuery());
              }
              var crudArgs = {
                requestType: "eventChanged",
                cancel: false,
                data: saveArgs.changedRecords,
                promise,
                editParams
              };
              _this.refreshData(crudArgs);
            }
          });
        }
      }
    };
    Crud2.prototype.deleteEvent = function(eventData, action) {
      var _this = this;
      if (this.parent.eventSettings.allowDeleting && !this.parent.activeViewOptions.readonly) {
        this.parent.currentAction = action;
        var deleteEvents = [];
        if (typeof eventData === "string" || typeof eventData === "number") {
          deleteEvents = this.parent.eventsData.filter(function(eventObj) {
            return eventObj[_this.parent.eventFields.id] === eventData;
          });
        } else {
          deleteEvents = eventData instanceof Array ? eventData : [eventData];
        }
        if (deleteEvents.length === 0) {
          return;
        }
        if (action) {
          switch (action) {
            case "Delete":
              this.processDelete(deleteEvents);
              break;
            case "DeleteOccurrence":
              this.processOccurrences(deleteEvents, action);
              break;
            case "DeleteFollowingEvents":
              this.processFollowSeries(deleteEvents, action);
              break;
            case "DeleteSeries":
              this.processEntireSeries(deleteEvents, action);
              break;
          }
        } else {
          var args = {
            requestType: "eventRemove",
            cancel: false,
            data: eventData,
            addedRecords: [],
            changedRecords: [],
            deletedRecords: deleteEvents
          };
          this.parent.trigger(actionBegin, args, function(deleteArgs) {
            if (!deleteArgs.cancel) {
              var promise = void 0;
              var fields = _this.parent.eventFields;
              var editParams = { addedRecords: [], changedRecords: [], deletedRecords: [] };
              if (deleteArgs.deletedRecords.length > 1) {
                editParams.deletedRecords = editParams.deletedRecords.concat(deleteArgs.deletedRecords);
                promise = _this.parent.dataModule.dataManager.saveChanges(editParams, fields.id, _this.getTable(), _this.getQuery());
              } else {
                editParams.deletedRecords.push(deleteArgs.deletedRecords[0]);
                promise = _this.parent.dataModule.dataManager.remove(fields.id, deleteArgs.deletedRecords[0], _this.getTable(), _this.getQuery());
              }
              _this.parent.eventBase.selectWorkCellByTime(deleteArgs.deletedRecords);
              var crudArgs = {
                requestType: "eventRemoved",
                cancel: false,
                data: deleteArgs.deletedRecords,
                promise,
                editParams
              };
              _this.refreshData(crudArgs);
            }
          });
        }
      }
    };
    Crud2.prototype.processOccurrences = function(eventData, action) {
      var _this = this;
      var occurrenceData = [];
      var isDeletedRecords = false;
      if (eventData instanceof Array) {
        for (var _i = 0, eventData_3 = eventData; _i < eventData_3.length; _i++) {
          var event_5 = eventData_3[_i];
          occurrenceData.push({ occurrence: event_5, parent: this.getParentEvent(event_5) });
        }
      } else {
        occurrenceData = { occurrence: eventData, parent: this.getParentEvent(eventData) };
      }
      var updateEvents = eventData instanceof Array ? eventData : [eventData];
      var args = {
        requestType: action === "EditOccurrence" ? "eventChange" : "eventRemove",
        cancel: false,
        addedRecords: [],
        changedRecords: updateEvents,
        deletedRecords: []
      };
      args.data = occurrenceData;
      this.parent.trigger(actionBegin, args, function(occurrenceArgs) {
        if (!occurrenceArgs.cancel) {
          var fields = _this.parent.eventFields;
          var editParams = { addedRecords: [], changedRecords: [], deletedRecords: [] };
          var occurrenceEvents = occurrenceData instanceof Array ? occurrenceData : [occurrenceData];
          var _loop_2 = function(a2, count2) {
            var childEvent = occurrenceArgs.changedRecords[parseInt(a2.toString(), 10)];
            var parentEvent = occurrenceEvents[parseInt(a2.toString(), 10)].parent;
            var parentException = parentEvent[fields.recurrenceException];
            var editedData = void 0;
            var exceptionDate = void 0;
            switch (action) {
              case "EditOccurrence":
                editedData = _this.parent.eventsProcessed.filter(function(event) {
                  return event.Guid === childEvent.Guid;
                })[0];
                exceptionDate = _this.excludeDateCheck(editedData[fields.startTime], parentException);
                if (exceptionDate !== parentEvent[fields.recurrenceException]) {
                  parentEvent[fields.recurrenceException] = exceptionDate;
                  childEvent[fields.recurrenceException] = getRecurrenceStringFromDate(editedData[fields.startTime]);
                  childEvent[fields.recurrenceID] = parentEvent[fields.id];
                  childEvent[fields.followingID] = null;
                  editParams.changedRecords.push(_this.parent.eventBase.processTimezone(parentEvent, true));
                  editParams.addedRecords.push(_this.parent.eventBase.processTimezone(childEvent, true));
                } else {
                  editParams.changedRecords.push(_this.parent.eventBase.processTimezone(childEvent, true));
                }
                break;
              case "DeleteOccurrence":
                if (!childEvent[fields.recurrenceException]) {
                  parentEvent[fields.recurrenceException] = _this.excludeDateCheck(childEvent[fields.startTime], parentException);
                  editParams.changedRecords.push(_this.parent.eventBase.processTimezone(parentEvent, true));
                }
                if (childEvent[fields.id] !== parentEvent[fields.id]) {
                  editParams.deletedRecords.push(childEvent);
                  isDeletedRecords = true;
                }
                break;
            }
          };
          for (var a = 0, count = occurrenceArgs.changedRecords.length; a < count; a++) {
            _loop_2(a, count);
          }
          var promise = _this.parent.dataModule.dataManager.saveChanges(editParams, fields.id, _this.getTable(), _this.getQuery());
          _this.parent.eventBase.selectWorkCellByTime(occurrenceArgs.changedRecords);
          var crudArgs = {
            requestType: action === "EditOccurrence" ? "eventChanged" : "eventRemoved",
            cancel: false,
            data: isDeletedRecords ? occurrenceArgs.deletedRecords : occurrenceArgs.changedRecords,
            promise,
            editParams
          };
          _this.refreshData(crudArgs);
        }
      });
    };
    Crud2.prototype.processFollowSeries = function(eventData, action) {
      var _this = this;
      var followData = [];
      if (eventData instanceof Array) {
        for (var _i = 0, eventData_4 = eventData; _i < eventData_4.length; _i++) {
          var event_6 = eventData_4[_i];
          followData.push({ occurrence: event_6, parent: this.getParentEvent(event_6) });
        }
      } else {
        followData = { occurrence: eventData, parent: this.getParentEvent(eventData) };
      }
      var updateFollowEvents = eventData instanceof Array ? eventData : [eventData];
      var args = {
        requestType: action === "EditFollowingEvents" ? "eventChange" : "eventRemove",
        cancel: false,
        addedRecords: [],
        changedRecords: updateFollowEvents,
        deletedRecords: []
      };
      args.data = followData;
      this.parent.trigger(actionBegin, args, function(followArgs) {
        if (!followArgs.cancel) {
          var fields_1 = _this.parent.eventFields;
          var editParams = { addedRecords: [], changedRecords: [], deletedRecords: [] };
          var followEvents = followData instanceof Array ? followData : [followData];
          var _loop_3 = function(a2, count2) {
            var childEvent = followArgs.changedRecords[parseInt(a2.toString(), 10)];
            var parentEvent = followEvents[parseInt(a2.toString(), 10)].parent;
            var followData_1 = _this.parent.eventBase.getEventCollections(parentEvent, childEvent);
            var isSpanned = void 0;
            switch (action) {
              case "EditFollowingEvents":
                _this.processRecurrenceRule(parentEvent, childEvent);
                isSpanned = !_this.parent.eventBase.isFollowingEvent(parentEvent, childEvent);
                childEvent[fields_1.followingID] = isSpanned ? null : parentEvent[fields_1.id];
                childEvent[fields_1.recurrenceID] = null;
                editParams.addedRecords.push(_this.parent.eventBase.processTimezone(childEvent, true));
                editParams.changedRecords.push(_this.parent.eventBase.processTimezone(parentEvent, true));
                if (!_this.parent.uiStateValues.isIgnoreOccurrence) {
                  childEvent[fields_1.recurrenceException] = null;
                  if (followData_1.occurrence.length > 0) {
                    var rule = followData_1.occurrence.slice(-1)[0][fields_1.recurrenceRule];
                    if (rule.indexOf("COUNT") === -1) {
                      childEvent[fields_1.recurrenceRule] = rule;
                    }
                  }
                  if (followData_1.follow.length > 0) {
                    childEvent[fields_1.recurrenceRule] = followData_1.follow.slice(-1)[0][fields_1.recurrenceRule];
                    editParams.deletedRecords = editParams.deletedRecords.concat(followData_1.follow);
                  }
                  if (isSpanned) {
                    followData_1.occurrence = followData_1.occurrence.filter(function(eventObj) {
                      return eventObj[fields_1.recurrenceID] === childEvent[fields_1.id];
                    });
                  }
                  editParams.deletedRecords = editParams.deletedRecords.concat(followData_1.occurrence);
                }
                break;
              case "DeleteFollowingEvents":
                _this.processRecurrenceRule(parentEvent, childEvent[fields_1.startTime]);
                editParams.changedRecords.push(_this.parent.eventBase.processTimezone(parentEvent, true));
                editParams.deletedRecords = editParams.deletedRecords.concat(followData_1.occurrence).concat(followData_1.follow);
                break;
            }
          };
          for (var a = 0, count = followArgs.changedRecords.length; a < count; a++) {
            _loop_3(a, count);
          }
          var promise = _this.parent.dataModule.dataManager.saveChanges(editParams, fields_1.id, _this.getTable(), _this.getQuery());
          _this.parent.eventBase.selectWorkCellByTime(followArgs.changedRecords);
          var crudArgs = {
            requestType: action === "EditFollowingEvents" ? "eventChanged" : "eventRemoved",
            cancel: false,
            data: followArgs.changedRecords,
            promise,
            editParams
          };
          _this.refreshData(crudArgs);
        }
      });
    };
    Crud2.prototype.processEntireSeries = function(eventData, action) {
      var _this = this;
      var seriesData = [];
      var isDeletedRecords = false;
      if (eventData instanceof Array) {
        for (var _i = 0, eventData_5 = eventData; _i < eventData_5.length; _i++) {
          var event_7 = eventData_5[_i];
          seriesData.push(this.getParentEvent(event_7, true));
        }
      } else {
        seriesData = this.getParentEvent(eventData, true);
      }
      var updateSeriesEvents = eventData instanceof Array ? eventData : [eventData];
      var args = {
        requestType: action === "EditSeries" ? "eventChange" : "eventRemove",
        cancel: false,
        addedRecords: [],
        changedRecords: updateSeriesEvents,
        deletedRecords: []
      };
      args.data = seriesData;
      this.parent.trigger(actionBegin, args, function(seriesArgs) {
        if (!seriesArgs.cancel) {
          var fields_2 = _this.parent.eventFields;
          var editParams = { addedRecords: [], changedRecords: [], deletedRecords: [] };
          var seriesEvents = seriesData instanceof Array ? seriesData : [seriesData];
          var _loop_4 = function(a2, count2) {
            var childEvent = seriesArgs.changedRecords[parseInt(a2.toString(), 10)];
            var parentEvent = seriesEvents[parseInt(a2.toString(), 10)];
            var eventCollections = _this.parent.eventBase.getEventCollections(parentEvent);
            var deletedEvents = eventCollections.follow.concat(eventCollections.occurrence);
            switch (action) {
              case "EditSeries":
                childEvent[fields_2.id] = parentEvent[fields_2.id];
                childEvent[fields_2.recurrenceID] = null;
                childEvent[fields_2.followingID] = null;
                if (_this.parent.uiStateValues.isIgnoreOccurrence && childEvent[fields_2.recurrenceException]) {
                  var originalParent = _this.parent.eventsData.filter(function(eventObj) {
                    return eventObj[fields_2.id] === childEvent[fields_2.id];
                  });
                  if (originalParent.length > 0) {
                    childEvent[fields_2.recurrenceRule] = originalParent[0][fields_2.recurrenceRule];
                  }
                } else {
                  childEvent[fields_2.recurrenceException] = null;
                  editParams.deletedRecords = editParams.deletedRecords.concat(deletedEvents);
                }
                editParams.changedRecords.push(_this.parent.eventBase.processTimezone(childEvent, true));
                _this.parent.uiStateValues.isIgnoreOccurrence = false;
                break;
              case "DeleteSeries":
                editParams.deletedRecords = editParams.deletedRecords.concat(deletedEvents.concat(parentEvent));
                isDeletedRecords = true;
                break;
            }
          };
          for (var a = 0, count = seriesArgs.changedRecords.length; a < count; a++) {
            _loop_4(a, count);
          }
          var promise = _this.parent.dataModule.dataManager.saveChanges(editParams, fields_2.id, _this.getTable(), _this.getQuery());
          _this.parent.eventBase.selectWorkCellByTime(seriesArgs.changedRecords);
          var crudArgs = {
            requestType: action === "EditSeries" ? "eventChanged" : "eventRemoved",
            cancel: false,
            data: isDeletedRecords ? seriesArgs.deletedRecords : seriesArgs.changedRecords,
            promise,
            editParams
          };
          _this.refreshData(crudArgs);
        }
      });
    };
    Crud2.prototype.processDelete = function(eventData) {
      var _this = this;
      var deleteData = [];
      for (var _i = 0, eventData_6 = eventData; _i < eventData_6.length; _i++) {
        var eventObj = eventData_6[_i];
        if (eventObj[this.parent.eventFields.recurrenceRule]) {
          deleteData.push({ occurrence: eventObj, parent: this.getParentEvent(eventObj) });
        } else {
          deleteData.push(eventObj);
        }
      }
      var args = {
        requestType: "eventRemove",
        cancel: false,
        addedRecords: [],
        changedRecords: [],
        deletedRecords: eventData
      };
      args.data = deleteData;
      this.parent.trigger(actionBegin, args, function(deleteArgs) {
        if (!deleteArgs.cancel) {
          var fields_3 = _this.parent.eventFields;
          var editParams = { addedRecords: [], changedRecords: [], deletedRecords: [] };
          var _loop_5 = function(a2, count2) {
            var isDelete = isNullOrUndefined(deleteArgs.deletedRecords[parseInt(a2.toString(), 10)][_this.parent.eventFields.recurrenceRule]);
            if (!isDelete) {
              var parentEvent_1 = deleteData[parseInt(a2.toString(), 10)].parent;
              var isEdited = editParams.changedRecords.filter(function(obj) {
                return obj[fields_3.id] === parentEvent_1[fields_3.id];
              });
              var editedDate = deleteArgs.deletedRecords[parseInt(a2.toString(), 10)][fields_3.startTime];
              if (isEdited.length > 0) {
                var editedData = isEdited[0];
                editedData[fields_3.recurrenceException] = _this.excludeDateCheck(editedDate, editedData[fields_3.recurrenceException]);
              } else {
                parentEvent_1[fields_3.recurrenceException] = _this.excludeDateCheck(editedDate, parentEvent_1[fields_3.recurrenceException]);
              }
              if (isEdited.length === 0) {
                editParams.changedRecords.push(_this.parent.eventBase.processTimezone(parentEvent_1, true));
              }
              isDelete = deleteArgs.deletedRecords[parseInt(a2.toString(), 10)][fields_3.id] !== parentEvent_1[fields_3.id];
            }
            if (isDelete) {
              editParams.deletedRecords.push(deleteArgs.deletedRecords[parseInt(a2.toString(), 10)]);
            }
          };
          for (var a = 0, count = deleteArgs.deletedRecords.length; a < count; a++) {
            _loop_5(a, count);
          }
          var promise = _this.parent.dataModule.dataManager.saveChanges(editParams, fields_3.id, _this.getTable(), _this.getQuery());
          var crudArgs = {
            requestType: "eventRemoved",
            cancel: false,
            data: deleteArgs.deletedRecords,
            promise,
            editParams
          };
          _this.refreshData(crudArgs);
        }
      });
    };
    Crud2.prototype.processSave = function(data) {
      var _this = this;
      var eventData = data instanceof Array ? data : [data];
      var editData = [];
      for (var _i = 0, eventData_7 = eventData; _i < eventData_7.length; _i++) {
        var eventObj = eventData_7[_i];
        if (eventObj[this.parent.eventFields.recurrenceRule]) {
          editData.push({ occurrence: eventObj, parent: this.getParentEvent(eventObj) });
        } else {
          editData.push(eventObj);
        }
      }
      var args = { requestType: "eventChange", cancel: false, addedRecords: [], changedRecords: eventData, deletedRecords: [] };
      args.data = editData;
      this.parent.trigger(actionBegin, args, function(editArgs) {
        if (!editArgs.cancel) {
          var fields = _this.parent.eventFields;
          var editParams = { addedRecords: [], changedRecords: [], deletedRecords: [] };
          for (var _i2 = 0, _a = editArgs.changedRecords; _i2 < _a.length; _i2++) {
            var record = _a[_i2];
            if (!isNullOrUndefined(record[fields.recurrenceRule]) && isNullOrUndefined(record[fields.recurrenceException])) {
              var exceptionString = getRecurrenceStringFromDate(record[fields.startTime]);
              var parentEle = _this.getParentEvent(record);
              parentEle[fields.recurrenceException] = isNullOrUndefined(parentEle[fields.recurrenceException]) ? exceptionString : parentEle[fields.recurrenceException].concat("," + exceptionString);
              record[fields.id] = _this.parent.getEventMaxID();
              record[fields.recurrenceException] = exceptionString;
              editParams.addedRecords.push(_this.parent.eventBase.processTimezone(record, true));
              editParams.changedRecords.push(_this.parent.eventBase.processTimezone(parentEle, true));
            } else {
              editParams.changedRecords.push(_this.parent.eventBase.processTimezone(record, true));
            }
          }
          var promise = _this.parent.dataModule.dataManager.saveChanges(editParams, fields.id, _this.getTable(), _this.getQuery());
          var crudArgs = { requestType: "eventChanged", cancel: false, data: editArgs.changedRecords, promise, editParams };
          _this.refreshData(crudArgs);
        }
      });
    };
    Crud2.prototype.getParentEvent = function(event, isParent) {
      if (isParent === void 0) {
        isParent = false;
      }
      var parentEvent = this.parent.eventBase.getParentEvent(event, isParent) || event;
      if (parentEvent[this.parent.eventFields.startTimezone] || parentEvent[this.parent.eventFields.endTimezone]) {
        this.parent.eventBase.timezoneConvert(parentEvent);
      }
      return parentEvent;
    };
    Crud2.prototype.excludeDateCheck = function(eventStartTime, exceptionDateList) {
      var exDate = getRecurrenceStringFromDate(eventStartTime);
      if (!isNullOrUndefined(exceptionDateList)) {
        if (exceptionDateList.indexOf(exDate) === -1) {
          exceptionDateList = !isNullOrUndefined(exceptionDateList) ? exceptionDateList + "," + exDate : exDate;
        }
      } else {
        exceptionDateList = exDate;
      }
      return exceptionDateList;
    };
    Crud2.prototype.processRecurrenceRule = function(parentEvent, followEvent) {
      var fields = this.parent.eventFields;
      var recurrenceRule = parentEvent[fields.recurrenceRule];
      var endDate;
      if (followEvent instanceof Date) {
        endDate = /* @__PURE__ */ new Date(+followEvent);
      } else {
        endDate = /* @__PURE__ */ new Date(+followEvent[fields.startTime]);
        var newRecurrenceRule = followEvent[fields.recurrenceRule];
        if (newRecurrenceRule) {
          var startDate = parentEvent[fields.startTime];
          var ruleException = this.parent.currentAction === "DeleteFollowingEvents" ? followEvent[fields.recurrenceException] : null;
          var dateCollection = generate(startDate, newRecurrenceRule, ruleException, this.parent.activeViewOptions.firstDayOfWeek);
          var untilDate = new Date(dateCollection.slice(-1)[0]);
          untilDate.setHours(endDate.getHours(), endDate.getMinutes(), endDate.getSeconds());
          endDate.setHours(startDate.getHours(), startDate.getMinutes(), startDate.getSeconds());
          followEvent[fields.recurrenceRule] = this.getUpdatedRecurrenceRule(newRecurrenceRule, /* @__PURE__ */ new Date(+untilDate), false);
        }
      }
      parentEvent[fields.recurrenceRule] = this.getUpdatedRecurrenceRule(recurrenceRule, addDays(new Date(endDate.getTime()), -1), true);
    };
    Crud2.prototype.getUpdatedRecurrenceRule = function(recurrenceRule, untilDate, isParent) {
      var splitRule = recurrenceRule.split(";");
      var updatedRule = "";
      for (var _i = 0, splitRule_1 = splitRule; _i < splitRule_1.length; _i++) {
        var rule = splitRule_1[_i];
        if (rule !== "") {
          var ruleKey = rule.split("=")[0];
          var ruleValue = rule.split("=")[1];
          if (ruleKey === "COUNT" || ruleKey === "UNTIL") {
            ruleValue = getRecurrenceStringFromDate(untilDate);
            rule = rule.replace(rule, "UNTIL=" + ruleValue);
          }
          updatedRule += rule + ";";
        }
      }
      if (isParent && updatedRule.indexOf("UNTIL") === -1) {
        updatedRule += "UNTIL=" + getRecurrenceStringFromDate(untilDate);
      }
      return updatedRule;
    };
    Crud2.prototype.isBlockEvent = function(eventData) {
      var eventCollection = eventData instanceof Array ? eventData : [eventData];
      var value = false;
      for (var _i = 0, eventCollection_1 = eventCollection; _i < eventCollection_1.length; _i++) {
        var event_8 = eventCollection_1[_i];
        value = event_8[this.parent.eventFields.isBlock] || false;
      }
      return value;
    };
    Crud2.prototype.destroy = function() {
      this.crudObj = null;
      this.parent = null;
    };
    return Crud2;
  }()
);
var WorkCellInteraction = (
  /** @class */
  function() {
    function WorkCellInteraction2(parent) {
      this.parent = parent;
      EventHandler.add(this.parent.element, "mouseover", this.onHover, this);
    }
    WorkCellInteraction2.prototype.cellMouseDown = function(e) {
      if (this.isPreventAction(e)) {
        return;
      }
      this.parent.notify(cellMouseDown, { event: e });
    };
    WorkCellInteraction2.prototype.cellClick = function(e) {
      var _this = this;
      if (this.isPreventAction(e)) {
        return;
      }
      var queryStr = "." + WORK_CELLS_CLASS + ",." + ALLDAY_CELLS_CLASS + ",." + HEADER_CELLS_CLASS;
      var target = closest(e.target, queryStr);
      if (isNullOrUndefined(target)) {
        return;
      }
      if (!isNullOrUndefined(closest(e.target, "." + NEW_EVENT_CLASS))) {
        this.parent.eventWindow.openEditor(this.parent.activeCellsData, "Add");
        return;
      }
      var navigateEle = closest(e.target, "." + NAVIGATE_CLASS);
      var navigateView = this.parent.getNavigateView();
      var sameView = this.parent.currentView === navigateView;
      if (isNullOrUndefined(navigateEle) || sameView || isNullOrUndefined(this.parent.viewOptions[navigateView.charAt(0).toLowerCase() + navigateView.slice(1)])) {
        if (this.parent.activeViewOptions.readonly && this.parent.currentView !== "MonthAgenda") {
          if (this.parent.quickPopup) {
            this.parent.quickPopup.quickPopupHide();
          }
          return;
        }
        if (this.parent.isAdaptive && (e.target.classList.contains(MORE_INDICATOR_CLASS) || closest(e.target, "." + MORE_INDICATOR_CLASS))) {
          return;
        }
        var isWorkCell_1 = target.classList.contains(WORK_CELLS_CLASS) || target.classList.contains(ALLDAY_CELLS_CLASS);
        if (isWorkCell_1 && e.shiftKey && e.which === 1 && this.parent.keyboardInteractionModule) {
          this.parent.keyboardInteractionModule.onMouseSelection(e);
          return;
        }
        this.parent.activeCellsData = this.parent.getCellDetails(target);
        var args = extend(this.parent.activeCellsData, { cancel: false, event: e, name: "cellClick" });
        this.parent.trigger(cellClick, args, function(clickArgs) {
          if (!clickArgs.cancel) {
            if (isWorkCell_1) {
              _this.parent.selectCell(target);
            }
            if (_this.parent.allowInline) {
              var inlineArgs = {
                element: clickArgs.element,
                groupIndex: clickArgs.groupIndex,
                type: "Cell"
              };
              _this.parent.notify(inlineClick, inlineArgs);
            } else {
              _this.parent.notify(cellClick, clickArgs);
            }
          } else {
            if (_this.parent.quickPopup) {
              _this.parent.quickPopup.quickPopupHide();
            }
          }
        });
      } else {
        var date = this.parent.getDateFromElement(target);
        if (!isNullOrUndefined(date) && !this.parent.isAdaptive && this.parent.isMinMaxDate(date)) {
          this.parent.setProperties({ selectedDate: date }, true);
          this.parent.changeView(this.parent.getNavigateView(), e);
        }
      }
    };
    WorkCellInteraction2.prototype.cellDblClick = function(e) {
      var _this = this;
      var queryStr = "." + WORK_CELLS_CLASS + ",." + ALLDAY_CELLS_CLASS + ",." + HEADER_CELLS_CLASS;
      var target = closest(e.target, queryStr);
      if (this.parent.activeViewOptions.readonly || this.isPreventAction(e) || isNullOrUndefined(target)) {
        return;
      }
      var args = extend(this.parent.activeCellsData, { cancel: false, event: e, name: "cellDoubleClick" });
      this.parent.trigger(cellDoubleClick, args, function(clickArgs) {
        var date = new Date(clickArgs.startTime.getTime());
        if (!_this.parent.isMinMaxDate(new Date(date.setHours(0, 0, 0, 0)))) {
          return;
        }
        if (!clickArgs.cancel) {
          _this.parent.eventWindow.openEditor(_this.parent.activeCellsData, "Add");
        }
      });
    };
    WorkCellInteraction2.prototype.onHover = function(e) {
      var targetSelector = "." + WORK_CELLS_CLASS + ",." + TIME_SLOT_CLASS + ",." + ALLDAY_CELLS_CLASS + ",." + HEADER_CELLS_CLASS + ",." + RESOURCE_CELLS_CLASS + ",." + APPOINTMENT_CLASS + ",." + WEEK_NUMBER_CLASS + ",." + MONTH_HEADER_CLASS;
      var hoverTarget = closest(e.target, targetSelector);
      if (hoverTarget) {
        var hoverArgs = { element: hoverTarget, event: e };
        this.parent.trigger(hover, hoverArgs);
      }
    };
    WorkCellInteraction2.prototype.isPreventAction = function(e) {
      if (closest(e.target, "." + NAVIGATE_CLASS)) {
        return false;
      }
      if (closest(e.target, "." + APPOINTMENT_WRAPPER_CLASS) && !closest(e.target, "." + MORE_INDICATOR_CLASS)) {
        return true;
      }
      var target = closest(e.target, "." + APPOINTMENT_CLASS + ",." + RESOURCE_GROUP_CELLS_CLASS);
      if (!isNullOrUndefined(target)) {
        return true;
      }
      target = closest(e.target, "." + HEADER_CELLS_CLASS);
      if (this.parent.activeView.isTimelineView() && !isNullOrUndefined(target)) {
        return true;
      }
      return false;
    };
    WorkCellInteraction2.prototype.destroy = function() {
      EventHandler.remove(this.parent.element, "mouseover", this.onHover);
    };
    return WorkCellInteraction2;
  }()
);
var __extends$c = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$5 = globalThis && globalThis.__decorate || function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i = decorators.length - 1; i >= 0; i--)
      if (d = decorators[i])
        r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var FieldOptions = (
  /** @class */
  function(_super) {
    __extends$c(FieldOptions2, _super);
    function FieldOptions2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$5([
      Property()
    ], FieldOptions2.prototype, "name", void 0);
    __decorate$5([
      Property()
    ], FieldOptions2.prototype, "default", void 0);
    __decorate$5([
      Property()
    ], FieldOptions2.prototype, "title", void 0);
    __decorate$5([
      Property({})
    ], FieldOptions2.prototype, "validation", void 0);
    return FieldOptions2;
  }(ChildProperty)
);
var __extends$b = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$4 = globalThis && globalThis.__decorate || function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i = decorators.length - 1; i >= 0; i--)
      if (d = decorators[i])
        r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var Field = (
  /** @class */
  function(_super) {
    __extends$b(Field2, _super);
    function Field2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$4([
      Property("Id")
    ], Field2.prototype, "id", void 0);
    __decorate$4([
      Property("IsBlock")
    ], Field2.prototype, "isBlock", void 0);
    __decorate$4([
      Complex({ name: "Subject" }, FieldOptions)
    ], Field2.prototype, "subject", void 0);
    __decorate$4([
      Complex({ name: "StartTime" }, FieldOptions)
    ], Field2.prototype, "startTime", void 0);
    __decorate$4([
      Complex({ name: "EndTime" }, FieldOptions)
    ], Field2.prototype, "endTime", void 0);
    __decorate$4([
      Complex({ name: "StartTimezone" }, FieldOptions)
    ], Field2.prototype, "startTimezone", void 0);
    __decorate$4([
      Complex({ name: "EndTimezone" }, FieldOptions)
    ], Field2.prototype, "endTimezone", void 0);
    __decorate$4([
      Complex({ name: "Location" }, FieldOptions)
    ], Field2.prototype, "location", void 0);
    __decorate$4([
      Complex({ name: "Description" }, FieldOptions)
    ], Field2.prototype, "description", void 0);
    __decorate$4([
      Complex({ name: "IsAllDay" }, FieldOptions)
    ], Field2.prototype, "isAllDay", void 0);
    __decorate$4([
      Complex({ name: "RecurrenceID" }, FieldOptions)
    ], Field2.prototype, "recurrenceID", void 0);
    __decorate$4([
      Complex({ name: "RecurrenceRule" }, FieldOptions)
    ], Field2.prototype, "recurrenceRule", void 0);
    __decorate$4([
      Complex({ name: "RecurrenceException" }, FieldOptions)
    ], Field2.prototype, "recurrenceException", void 0);
    __decorate$4([
      Property("IsReadonly")
    ], Field2.prototype, "isReadonly", void 0);
    __decorate$4([
      Property("FollowingID")
    ], Field2.prototype, "followingID", void 0);
    return Field2;
  }(ChildProperty)
);
var __extends$a = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$3 = globalThis && globalThis.__decorate || function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i = decorators.length - 1; i >= 0; i--)
      if (d = decorators[i])
        r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var EventSettings = (
  /** @class */
  function(_super) {
    __extends$a(EventSettings2, _super);
    function EventSettings2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$3([
      Property()
    ], EventSettings2.prototype, "template", void 0);
    __decorate$3([
      Property([])
    ], EventSettings2.prototype, "dataSource", void 0);
    __decorate$3([
      Property()
    ], EventSettings2.prototype, "query", void 0);
    __decorate$3([
      Complex({}, Field)
    ], EventSettings2.prototype, "fields", void 0);
    __decorate$3([
      Property(false)
    ], EventSettings2.prototype, "enableTooltip", void 0);
    __decorate$3([
      Property("AllDayRow")
    ], EventSettings2.prototype, "spannedEventPlacement", void 0);
    __decorate$3([
      Property(1)
    ], EventSettings2.prototype, "minimumEventDuration", void 0);
    __decorate$3([
      Property()
    ], EventSettings2.prototype, "tooltipTemplate", void 0);
    __decorate$3([
      Property()
    ], EventSettings2.prototype, "resourceColorField", void 0);
    __decorate$3([
      Property(false)
    ], EventSettings2.prototype, "editFollowingEvents", void 0);
    __decorate$3([
      Property(true)
    ], EventSettings2.prototype, "allowAdding", void 0);
    __decorate$3([
      Property(true)
    ], EventSettings2.prototype, "allowEditing", void 0);
    __decorate$3([
      Property(true)
    ], EventSettings2.prototype, "allowDeleting", void 0);
    __decorate$3([
      Property(false)
    ], EventSettings2.prototype, "enableMaxHeight", void 0);
    __decorate$3([
      Property(false)
    ], EventSettings2.prototype, "enableIndicator", void 0);
    __decorate$3([
      Property(false)
    ], EventSettings2.prototype, "ignoreWhitespace", void 0);
    __decorate$3([
      Property()
    ], EventSettings2.prototype, "sortComparer", void 0);
    __decorate$3([
      Property()
    ], EventSettings2.prototype, "includeFiltersInQuery", void 0);
    return EventSettings2;
  }(ChildProperty)
);
var __extends$9 = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$2 = globalThis && globalThis.__decorate || function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i = decorators.length - 1; i >= 0; i--)
      if (d = decorators[i])
        r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var Group = (
  /** @class */
  function(_super) {
    __extends$9(Group2, _super);
    function Group2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$2([
      Property(false)
    ], Group2.prototype, "byDate", void 0);
    __decorate$2([
      Property(true)
    ], Group2.prototype, "byGroupID", void 0);
    __decorate$2([
      Property(false)
    ], Group2.prototype, "allowGroupEdit", void 0);
    __decorate$2([
      Property([])
    ], Group2.prototype, "resources", void 0);
    __decorate$2([
      Property(true)
    ], Group2.prototype, "enableCompactView", void 0);
    __decorate$2([
      Property()
    ], Group2.prototype, "headerTooltipTemplate", void 0);
    __decorate$2([
      Property(false)
    ], Group2.prototype, "hideNonWorkingDays", void 0);
    return Group2;
  }(ChildProperty)
);
var __extends$8 = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate$1 = globalThis && globalThis.__decorate || function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i = decorators.length - 1; i >= 0; i--)
      if (d = decorators[i])
        r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var Resources = (
  /** @class */
  function(_super) {
    __extends$8(Resources2, _super);
    function Resources2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    __decorate$1([
      Property()
    ], Resources2.prototype, "field", void 0);
    __decorate$1([
      Property()
    ], Resources2.prototype, "title", void 0);
    __decorate$1([
      Property()
    ], Resources2.prototype, "name", void 0);
    __decorate$1([
      Property(false)
    ], Resources2.prototype, "allowMultiple", void 0);
    __decorate$1([
      Property([])
    ], Resources2.prototype, "dataSource", void 0);
    __decorate$1([
      Property()
    ], Resources2.prototype, "query", void 0);
    __decorate$1([
      Property("Id")
    ], Resources2.prototype, "idField", void 0);
    __decorate$1([
      Property("Text")
    ], Resources2.prototype, "textField", void 0);
    __decorate$1([
      Property("Expanded")
    ], Resources2.prototype, "expandedField", void 0);
    __decorate$1([
      Property("GroupID")
    ], Resources2.prototype, "groupIDField", void 0);
    __decorate$1([
      Property("Color")
    ], Resources2.prototype, "colorField", void 0);
    __decorate$1([
      Property("StartHour")
    ], Resources2.prototype, "startHourField", void 0);
    __decorate$1([
      Property("EndHour")
    ], Resources2.prototype, "endHourField", void 0);
    __decorate$1([
      Property("WorkDays")
    ], Resources2.prototype, "workDaysField", void 0);
    __decorate$1([
      Property("CssClass")
    ], Resources2.prototype, "cssClassField", void 0);
    return Resources2;
  }(ChildProperty)
);
var ResourceBase = (
  /** @class */
  function() {
    function ResourceBase2(parent) {
      this.resourceCollection = [];
      this.leftPixel = 25;
      this.resourceDateTree = [];
      this.parent = parent;
    }
    ResourceBase2.prototype.renderResourceHeaderIndent = function(tr) {
      var resColTd = createElement("td", { className: RESOURCE_LEFT_TD_CLASS });
      var resColDiv = createElement("div", { className: RESOURCE_TEXT_CLASS });
      if (this.parent.activeViewOptions.headerIndentTemplate) {
        var data = { className: [resColTd.className], type: "emptyCells" };
        this.parent.renderHeaderIndentTemplate(data, resColTd);
      } else {
        resColTd.appendChild(resColDiv);
      }
      var args = { elementType: "emptyCells", element: resColTd };
      this.parent.trigger(renderCell, args);
      tr.appendChild(resColTd);
    };
    ResourceBase2.prototype.hideResourceRows = function(tBody) {
      if (this.resourceCollection.length <= 1 || this.parent.virtualScrollModule) {
        return;
      }
      var trCount = this.lastResourceLevel.length;
      for (var i = 0; i < trCount; i++) {
        var resData = this.lastResourceLevel[parseInt(i.toString(), 10)].resourceData;
        var res = this.lastResourceLevel[parseInt(i.toString(), 10)].resource;
        if (resData.ClassName === RESOURCE_PARENT_CLASS && !resData[res.expandedField] && !isNullOrUndefined(resData[res.expandedField])) {
          var trCollection = [].slice.call(tBody.children);
          var slicedCollection = trCollection.slice(i + 1, i + (parseInt(resData.Count, 10) + 1));
          addClass(slicedCollection, HIDDEN_CLASS);
        }
      }
    };
    ResourceBase2.prototype.createResourceColumn = function() {
      var resColl = this.resourceCollection;
      var resDiv = createElement("div", { className: RESOURCE_COLUMN_WRAP_CLASS });
      var tbl = this.parent.activeView.createTableLayout(RESOURCE_COLUMN_TABLE_CLASS);
      if (!this.parent.uiStateValues.isGroupAdaptive && this.parent.rowAutoHeight && this.parent.activeView.isTimelineView() && this.parent.activeViewOptions.group.resources.length > 0) {
        addClass([tbl], AUTO_HEIGHT);
      }
      var tBody = tbl.querySelector("tbody");
      var resData = this.generateTreeData(true);
      this.countCalculation(resColl.slice(0, -2), resColl.slice(0, -1));
      this.renderedResources = this.lastResourceLevel;
      if (this.parent.virtualScrollModule) {
        var resourceCount = this.parent.virtualScrollModule.getRenderedCount();
        this.setExpandedResources();
        resData = this.expandedResources.slice(0, resourceCount);
        this.renderedResources = resData;
      }
      append2(this.getContentRows(resData), tBody);
      this.hideResourceRows(tBody);
      tbl.appendChild(tBody);
      resDiv.appendChild(tbl);
      return resDiv;
    };
    ResourceBase2.prototype.setRenderedResources = function() {
      var resColl = this.resourceCollection;
      this.generateTreeData(true);
      this.countCalculation(resColl.slice(0, -2), resColl.slice(0, -1));
      this.renderedResources = this.lastResourceLevel;
    };
    ResourceBase2.prototype.setExpandedResources = function() {
      var resources = [];
      for (var i = 0; i < this.lastResourceLevel.length; i++) {
        var resource = this.lastResourceLevel[parseInt(i.toString(), 10)].resourceData;
        var count = resource.Count;
        resources.push(this.lastResourceLevel[parseInt(i.toString(), 10)]);
        var isExpanded = resource[this.lastResourceLevel[parseInt(i.toString(), 10)].resource.expandedField];
        if (!isNullOrUndefined(isExpanded) && !isExpanded && count > 0) {
          i = i + count;
        }
      }
      this.expandedResources = resources;
    };
    ResourceBase2.prototype.getContentRows = function(resData, isVirtualScroll) {
      var resRows = [];
      var left;
      var rIndex;
      var resColl = this.resourceCollection;
      var tr = createElement("tr");
      var td = createElement("td", { attrs: { tabindex: isVirtualScroll ? "-1" : "0" } });
      for (var i = 0; i < resData.length; i++) {
        var ntd = td.cloneNode();
        rIndex = findIndexInData(resColl, "name", resData[parseInt(i.toString(), 10)].resource.name);
        if (rIndex === resColl.length - 1) {
          extend(resData[parseInt(i.toString(), 10)].resourceData, { ClassName: RESOURCE_CHILD_CLASS });
          this.renderedResources[parseInt(i.toString(), 10)].className = [RESOURCE_CHILD_CLASS];
        } else {
          extend(resData[parseInt(i.toString(), 10)].resourceData, { ClassName: RESOURCE_PARENT_CLASS });
          this.renderedResources[parseInt(i.toString(), 10)].className = [RESOURCE_PARENT_CLASS];
        }
        left = rIndex * this.leftPixel + "px";
        if (resData[parseInt(i.toString(), 10)].resourceData.ClassName === RESOURCE_PARENT_CLASS && !isNullOrUndefined(resData[parseInt(i.toString(), 10)].resourceData.Count) && resData[parseInt(i.toString(), 10)].resourceData.Count > 0) {
          var iconClass = void 0;
          if (resData[parseInt(i.toString(), 10)].resourceData[resColl[parseInt(rIndex.toString(), 10)].expandedField] || isNullOrUndefined(resData[parseInt(i.toString(), 10)].resourceData[resColl[parseInt(rIndex.toString(), 10)].expandedField])) {
            iconClass = RESOURCE_COLLAPSE_CLASS;
          } else {
            iconClass = RESOURCE_EXPAND_CLASS;
          }
          var iconDiv = createElement("div");
          addClass([iconDiv], [RESOURCE_TREE_ICON_CLASS, iconClass]);
          this.setMargin(iconDiv, left);
          ntd.appendChild(iconDiv);
          if (this.resourceCollection.length > 1) {
            EventHandler.add(iconDiv, "click", this.onTreeIconClick, this);
          }
        }
        this.parent.activeView.setResourceHeaderContent(ntd, resData[parseInt(i.toString(), 10)], RESOURCE_TEXT_CLASS);
        ntd.setAttribute("data-group-index", resData[parseInt(i.toString(), 10)].groupIndex.toString());
        ntd.setAttribute("aria-label", resData[parseInt(i.toString(), 10)].resourceData[resData[parseInt(i.toString(), 10)].resource.textField] + " resource");
        if (!this.parent.activeViewOptions.resourceHeaderTemplate) {
          this.setMargin(ntd.querySelector("." + RESOURCE_TEXT_CLASS), left);
        }
        var classCollection = [RESOURCE_CELLS_CLASS, resData[parseInt(i.toString(), 10)].resourceData.ClassName];
        addClass([ntd], classCollection);
        var args = { elementType: "resourceHeader", element: ntd, groupIndex: resData[parseInt(i.toString(), 10)].groupIndex };
        this.parent.trigger(renderCell, args);
        var ntr = tr.cloneNode();
        ntr.appendChild(ntd);
        resRows.push(ntr);
      }
      return resRows;
    };
    ResourceBase2.prototype.setMargin = function(element2, value) {
      if (!this.parent.enableRtl) {
        element2.style.marginLeft = value;
      } else {
        element2.style.marginRight = value;
      }
    };
    ResourceBase2.prototype.countCalculation = function(parentCollection, wholeCollection) {
      var collection;
      for (var y = 0; y < parentCollection.length; y++) {
        var data = parentCollection[parentCollection.length - (y + 1)].dataSource;
        for (var x = 0; x < data.length; x++) {
          var totalCount = 0;
          if (this.parent.activeViewOptions.group.byGroupID) {
            var query = new Query().where(wholeCollection[wholeCollection.length - 1].groupIDField, "equal", data[parseInt(x.toString(), 10)][parentCollection[parentCollection.length - (y + 1)].idField]);
            collection = new DataManager(wholeCollection[wholeCollection.length - 1].dataSource).executeLocal(query);
          } else {
            collection = wholeCollection[wholeCollection.length - 1].dataSource;
          }
          for (var z = 0; z < collection.length; z++) {
            totalCount = totalCount + parseInt(collection[parseInt(z.toString(), 10)].Count, 10);
          }
          totalCount = totalCount + parseInt(data[parseInt(x.toString(), 10)].Count, 10);
          extend(data[parseInt(x.toString(), 10)], { Count: totalCount });
        }
        wholeCollection = wholeCollection.slice(0, -1);
      }
    };
    ResourceBase2.prototype.onTreeIconClick = function(e) {
      var _this = this;
      if (this.parent.eventTooltip) {
        this.parent.eventTooltip.close();
      }
      var target = e.target;
      var hide;
      var trElement = closest(target, "." + RESOURCE_PARENT_CLASS).parentElement;
      var index = parseInt(trElement.children[0].getAttribute("data-group-index"), 10);
      var args = {
        cancel: false,
        event: e,
        groupIndex: index,
        requestType: !target.classList.contains(RESOURCE_COLLAPSE_CLASS) ? "resourceExpand" : "resourceCollapse"
      };
      this.parent.trigger(actionBegin, args, function(actionArgs) {
        if (!actionArgs.cancel) {
          if (target.classList.contains(RESOURCE_COLLAPSE_CLASS)) {
            classList(target, [RESOURCE_EXPAND_CLASS], [RESOURCE_COLLAPSE_CLASS]);
            hide = true;
          } else {
            classList(target, [RESOURCE_COLLAPSE_CLASS], [RESOURCE_EXPAND_CLASS]);
            hide = false;
          }
          var eventElements = [].slice.call(_this.parent.element.querySelectorAll("." + APPOINTMENT_CLASS + ",." + MORE_INDICATOR_CLASS));
          for (var _i = 0, eventElements_1 = eventElements; _i < eventElements_1.length; _i++) {
            var element2 = eventElements_1[_i];
            remove(element2);
          }
          if (_this.parent.virtualScrollModule) {
            _this.updateVirtualContent(index, hide, e, target);
          } else {
            _this.updateContent(index, hide);
          }
          var data = { cssProperties: _this.parent.getCssProperties(), module: "scroll" };
          _this.parent.notify(scrollUiUpdate, data);
          args = {
            cancel: false,
            event: e,
            groupIndex: index,
            requestType: target.classList.contains(RESOURCE_COLLAPSE_CLASS) ? "resourceExpanded" : "resourceCollapsed"
          };
          _this.parent.refreshEvents(false);
          _this.parent.trigger(actionComplete, args);
        }
      });
    };
    ResourceBase2.prototype.updateContent = function(index, hide) {
      var rowCollection = [];
      var workCellCollection = [];
      var headerRowCollection = [];
      var pNode;
      var clickedRes = this.lastResourceLevel[parseInt(index.toString(), 10)].resourceData;
      var resRows = [].slice.call(this.parent.element.querySelectorAll("." + RESOURCE_COLUMN_WRAP_CLASS + " tr"));
      var contentRows = [].slice.call(this.parent.element.querySelectorAll("." + CONTENT_WRAP_CLASS + " tbody tr"));
      var eventRows = [].slice.call(this.parent.element.querySelectorAll("." + CONTENT_WRAP_CLASS + " ." + APPOINTMENT_CONTAINER_CLASS));
      for (var j = 0; j < clickedRes.Count; j++) {
        rowCollection.push(resRows[index + j + 1]);
        workCellCollection.push(contentRows[index + j + 1]);
        headerRowCollection.push(eventRows[index + j + 1]);
      }
      var clonedCollection = this.lastResourceLevel;
      for (var i = 0; i < rowCollection.length; i++) {
        var expanded = true;
        pNode = rowCollection[parseInt(i.toString(), 10)].children[0].classList.contains(RESOURCE_PARENT_CLASS);
        clonedCollection[parseInt(index.toString(), 10)].resourceData[clonedCollection[parseInt(index.toString(), 10)].resource.expandedField] = !hide;
        if (hide) {
          if (pNode) {
            var trElem = rowCollection[parseInt(i.toString(), 10)].querySelector("." + RESOURCE_TREE_ICON_CLASS);
            if (trElem) {
              classList(trElem, [RESOURCE_EXPAND_CLASS], [RESOURCE_COLLAPSE_CLASS]);
            }
          }
          if (!rowCollection[parseInt(i.toString(), 10)].classList.contains(HIDDEN_CLASS)) {
            addClass([rowCollection[parseInt(i.toString(), 10)], workCellCollection[parseInt(i.toString(), 10)], headerRowCollection[parseInt(i.toString(), 10)]], HIDDEN_CLASS);
          }
        } else {
          if (pNode) {
            var rowIndex = rowCollection[parseInt(i.toString(), 10)].rowIndex;
            if (!clonedCollection[parseInt(rowIndex.toString(), 10)].resourceData[clonedCollection[parseInt(rowIndex.toString(), 10)].resource.expandedField] && !isNullOrUndefined(clonedCollection[parseInt(rowIndex.toString(), 10)].resourceData[clonedCollection[parseInt(rowIndex.toString(), 10)].resource.expandedField])) {
              rowCollection.splice(i + 1, parseInt(clonedCollection[parseInt(rowIndex.toString(), 10)].resourceData.Count, 10));
              workCellCollection.splice(i + 1, parseInt(clonedCollection[parseInt(rowIndex.toString(), 10)].resourceData.Count, 10));
              headerRowCollection.splice(i + 1, parseInt(clonedCollection[parseInt(rowIndex.toString(), 10)].resourceData.Count, 10));
              expanded = false;
            }
            if (expanded) {
              var trElem = rowCollection[parseInt(i.toString(), 10)].querySelector("." + RESOURCE_TREE_ICON_CLASS);
              if (trElem) {
                classList(trElem, [RESOURCE_COLLAPSE_CLASS], [RESOURCE_EXPAND_CLASS]);
              }
            }
          }
          if (rowCollection[parseInt(i.toString(), 10)].classList.contains(HIDDEN_CLASS)) {
            removeClass([rowCollection[parseInt(i.toString(), 10)], workCellCollection[parseInt(i.toString(), 10)], headerRowCollection[parseInt(i.toString(), 10)]], HIDDEN_CLASS);
          }
        }
      }
    };
    ResourceBase2.prototype.updateVirtualContent = function(index, expand, e, target) {
      this.lastResourceLevel[parseInt(index.toString(), 10)].resourceData[this.lastResourceLevel[parseInt(index.toString(), 10)].resource.expandedField] = !expand;
      this.setExpandedResources();
      var resourceCount = this.parent.virtualScrollModule.getRenderedCount();
      var startIndex = this.expandedResources.indexOf(this.renderedResources[0]);
      this.renderedResources = this.expandedResources.slice(startIndex, startIndex + resourceCount);
      if (this.renderedResources.length < resourceCount) {
        var sIndex = this.expandedResources.length - resourceCount;
        sIndex = sIndex > 0 ? sIndex : 0;
        this.renderedResources = this.expandedResources.slice(sIndex, this.expandedResources.length);
      }
      var virtualTrack = this.parent.element.querySelector("." + VIRTUAL_TRACK_CLASS);
      this.parent.virtualScrollModule.updateVirtualTrackHeight(virtualTrack);
      var resTable = this.parent.element.querySelector("." + RESOURCE_COLUMN_WRAP_CLASS + " table");
      var contentTable = this.parent.element.querySelector("." + CONTENT_WRAP_CLASS + " table");
      var eventTable = this.parent.element.querySelector("." + EVENT_TABLE_CLASS);
      this.parent.virtualScrollModule.updateContent(resTable, contentTable, eventTable, this.renderedResources);
      var timeIndicator = this.parent.element.querySelector("." + CURRENT_TIMELINE_CLASS);
      if (!isNullOrUndefined(timeIndicator)) {
        timeIndicator.style.height = this.parent.element.querySelector("." + CONTENT_TABLE_CLASS).offsetHeight + "px";
      }
    };
    ResourceBase2.prototype.renderResourceHeader = function() {
      var resourceWrapper = createElement("div", { className: RESOURCE_TOOLBAR_CONTAINER });
      resourceWrapper.innerHTML = '<div class="' + RESOURCE_HEADER_TOOLBAR + '"><div class="' + RESOURCE_MENU + '"><div class="e-icons ' + RESOURCE_MENU_ICON + '"></div></div><div class="' + RESOURCE_LEVEL_TITLE + '"></div></div>';
      if (this.parent.currentView === "MonthAgenda") {
        var target = this.parent.activeView.getPanel().querySelector("." + CONTENT_WRAP_CLASS);
        target.insertBefore(resourceWrapper, target.querySelector("." + WRAPPER_CONTAINER_CLASS));
      } else {
        this.parent.element.insertBefore(resourceWrapper, this.parent.element.querySelector("." + TABLE_CONTAINER_CLASS));
      }
      this.renderResourceHeaderText();
      EventHandler.add(resourceWrapper.querySelector("." + RESOURCE_MENU_ICON), "click", this.menuClick, this);
    };
    ResourceBase2.prototype.renderResourceTree = function() {
      this.popupOverlay = createElement("div", { className: RESOURCE_TREE_POPUP_OVERLAY });
      var treeWrapper = createElement("div", { className: RESOURCE_TREE_POPUP + " e-popup-close" });
      if (this.parent.currentView === "MonthAgenda") {
        var target = this.parent.activeView.getPanel().querySelector("." + WRAPPER_CONTAINER_CLASS);
        target.insertBefore(treeWrapper, target.children[0]);
        target.appendChild(this.popupOverlay);
      } else {
        this.parent.element.querySelector("." + TABLE_CONTAINER_CLASS).appendChild(treeWrapper);
        this.parent.element.querySelector("." + TABLE_CONTAINER_CLASS).appendChild(this.popupOverlay);
      }
      var resourceTree = createElement("div", { className: RESOURCE_TREE });
      treeWrapper.appendChild(resourceTree);
      this.treeViewObj = new TreeView({
        cssClass: this.parent.cssClass,
        enableRtl: this.parent.enableRtl,
        enableHtmlSanitizer: this.parent.enableHtmlSanitizer,
        fields: {
          dataSource: [].slice.call(this.generateTreeData()),
          id: "resourceId",
          text: "resourceName",
          child: "resourceChild"
        },
        nodeTemplate: this.parent.resourceHeaderTemplate,
        nodeClicked: this.resourceClick.bind(this),
        created: this.resourceTreeCreated.bind(this)
      });
      this.treeViewObj.appendTo(resourceTree);
      this.treeViewObj.expandAll();
      this.treePopup = new Popup(treeWrapper, {
        targetType: "relative",
        actionOnScroll: "none",
        content: this.treeViewObj.element,
        relateTo: this.parent.element.querySelector("." + TABLE_CONTAINER_CLASS),
        enableRtl: this.parent.enableRtl,
        hideAnimation: { name: "SlideLeftOut", duration: 500 },
        showAnimation: { name: "SlideLeftIn", duration: 500 },
        viewPortElement: this.parent.element.querySelector("." + (this.parent.currentView === "MonthAgenda" ? WRAPPER_CONTAINER_CLASS : TABLE_CONTAINER_CLASS))
      });
      this.parent.on(documentClick, this.documentClick, this);
    };
    ResourceBase2.prototype.resourceTreeCreated = function() {
      if (this.parent.activeViewOptions.resourceHeaderTemplate && this.parent.portals && this.treeViewObj.portals) {
        this.parent.portals = this.parent.portals.concat(this.treeViewObj.portals);
        this.parent.renderTemplates();
      }
    };
    ResourceBase2.prototype.generateTreeData = function(isTimeLine) {
      var _this = this;
      var treeCollection = [];
      var resTreeColl = [];
      var groupIndex = 0;
      var _loop_1 = function(i2, len2) {
        var treeHandler = function(treeLevel, index, levelId) {
          var resource = _this.resourceCollection[parseInt(index.toString(), 10)];
          var treeArgs;
          var resObj;
          if (!isTimeLine) {
            treeArgs = {
              resourceId: levelId,
              resourceName: treeLevel.resourceData[resource.textField],
              resource: treeLevel.resource,
              resourceData: treeLevel.resourceData
            };
          } else {
            resObj = {
              type: "resourceHeader",
              resource: treeLevel.resource,
              resourceData: treeLevel.resourceData,
              groupIndex,
              groupOrder: treeLevel.groupOrder
            };
            resTreeColl.push(resObj);
            groupIndex++;
          }
          if (treeLevel.child.length > 0 && !isTimeLine) {
            treeArgs.resourceChild = [];
          }
          var count = 1;
          for (var _i = 0, _a = treeLevel.child; _i < _a.length; _i++) {
            var tree = _a[_i];
            if (!isTimeLine) {
              treeArgs.resourceChild.push(treeHandler(tree, index + 1, levelId + "-" + count));
            } else {
              treeHandler(tree, index + 1, levelId + "-" + count);
            }
            count += 1;
          }
          if (isTimeLine) {
            extend(resObj.resourceData, { Count: count - 1 });
          }
          return treeArgs;
        };
        if (!isTimeLine) {
          treeCollection.push(treeHandler(this_1.resourceTreeLevel[parseInt(i2.toString(), 10)], 0, (i2 + 1).toString()));
        } else {
          treeHandler(this_1.resourceTreeLevel[parseInt(i2.toString(), 10)], 0, (i2 + 1).toString());
        }
      };
      var this_1 = this;
      for (var i = 0, len = this.resourceTreeLevel.length; i < len; i++) {
        _loop_1(i);
      }
      if (isTimeLine) {
        this.lastResourceLevel = resTreeColl;
        return resTreeColl;
      } else {
        return treeCollection;
      }
    };
    ResourceBase2.prototype.renderResourceHeaderText = function() {
      var resource = this.lastResourceLevel[this.parent.uiStateValues.groupIndex];
      var headerCollection = [];
      var _loop_2 = function(i2, len2) {
        var resourceLevel = this_2.resourceCollection[parseInt(i2.toString(), 10)];
        var resourceText = resourceLevel.dataSource.filter(function(resData) {
          return resData[resourceLevel.idField] === resource.groupOrder[parseInt(i2.toString(), 10)];
        });
        var resourceName = createElement("div", { className: RESOURCE_NAME });
        this_2.parent.sanitize(resourceText[0][resourceLevel.textField], resourceName);
        headerCollection.push(resourceName);
        var levelIcon = createElement("div", { className: "e-icons e-icon-next" });
        headerCollection.push(levelIcon);
      };
      var this_2 = this;
      for (var i = 0, len = resource.groupOrder.length; i < len; i++) {
        _loop_2(i);
      }
      headerCollection.pop();
      var target = this.parent.currentView === "MonthAgenda" ? this.parent.activeView.getPanel() : this.parent.element;
      var headerWrapper = target.querySelector("." + RESOURCE_LEVEL_TITLE);
      removeChildren(headerWrapper);
      for (var _i = 0, headerCollection_1 = headerCollection; _i < headerCollection_1.length; _i++) {
        var header = headerCollection_1[_i];
        headerWrapper.appendChild(header);
      }
      if (this.lastResourceLevel.length === 1) {
        addClass([this.parent.element.querySelector("." + RESOURCE_MENU)], DISABLE_CLASS);
      }
    };
    ResourceBase2.prototype.menuClick = function(event) {
      if (this.parent.element.querySelector("." + RESOURCE_TREE_POPUP).classList.contains(POPUP_OPEN)) {
        this.treePopup.hide();
        removeClass([this.popupOverlay], ENABLE_CLASS);
      } else {
        var treeNodes = [].slice.call(this.treeViewObj.element.querySelectorAll(".e-list-item:not(.e-has-child)"));
        removeClass(treeNodes, "e-active");
        addClass([treeNodes[this.parent.uiStateValues.groupIndex]], "e-active");
        this.treePopup.show();
        addClass([this.popupOverlay], ENABLE_CLASS);
      }
    };
    ResourceBase2.prototype.selectResourceByIndex = function(groupIndex) {
      if (this.lastResourceLevel && groupIndex > -1 && groupIndex < this.lastResourceLevel.length) {
        this.triggerEvents(groupIndex);
      }
    };
    ResourceBase2.prototype.resourceClick = function(event) {
      if (!event.node.classList.contains("e-has-child")) {
        this.treePopup.hide();
        removeClass([this.popupOverlay], ENABLE_CLASS);
        var treeNodes = [].slice.call(this.treeViewObj.element.querySelectorAll(".e-list-item:not(.e-has-child)"));
        var groupIndex = treeNodes.indexOf(event.node);
        this.triggerEvents(groupIndex, event);
        event.event.preventDefault();
      }
    };
    ResourceBase2.prototype.triggerEvents = function(groupIndex, event) {
      var _this = this;
      var args = { cancel: false, event: event ? event.event : null, groupIndex, requestType: "resourceChange" };
      this.parent.trigger(actionBegin, args, function(actionArgs) {
        if (!actionArgs.cancel) {
          _this.parent.uiStateValues.groupIndex = actionArgs.groupIndex;
          _this.parent.renderModule.render(_this.parent.currentView);
          args = {
            cancel: false,
            event: event ? event.event : null,
            groupIndex: _this.parent.uiStateValues.groupIndex,
            requestType: "resourceChanged"
          };
          _this.parent.trigger(actionComplete, args);
        }
      });
    };
    ResourceBase2.prototype.documentClick = function(args) {
      if (closest(args.event.target, "." + RESOURCE_TREE_POPUP)) {
        return;
      }
      var treeWrapper = this.parent.element.querySelector("." + RESOURCE_TREE_POPUP);
      if (treeWrapper && treeWrapper.classList.contains(POPUP_OPEN)) {
        this.treePopup.hide();
        removeClass([this.popupOverlay], ENABLE_CLASS);
      }
    };
    ResourceBase2.prototype.bindResourcesData = function(isSetModel) {
      var _this = this;
      this.parent.showSpinner();
      var promises = [];
      for (var _i = 0, _a = this.parent.resources; _i < _a.length; _i++) {
        var resource = _a[_i];
        var dataModule = new Data(this.parent, resource.dataSource, resource.query);
        promises.push(dataModule.getData(dataModule.generateQuery()));
      }
      Promise.all(promises).then(function(e) {
        return _this.dataManagerSuccess(e, isSetModel);
      }).catch(function(e) {
        return _this.parent.crudModule.dataManagerFailure(e);
      });
    };
    ResourceBase2.prototype.dataManagerSuccess = function(e, isSetModel) {
      if (!this.parent || this.parent && this.parent.isDestroyed) {
        return;
      }
      this.parent.resourceCollection = [];
      for (var i = 0, length_1 = e.length; i < length_1; i++) {
        var resource = this.parent.resources[parseInt(i.toString(), 10)];
        var resourceObj = this.getResourceModel(resource, e[parseInt(i.toString(), 10)].result);
        this.parent.resourceCollection.push(resourceObj);
      }
      this.refreshLayout(isSetModel);
    };
    ResourceBase2.prototype.getResourceModel = function(resource, resourceData) {
      var resourceObj = {
        field: resource.field,
        title: resource.title,
        name: resource.name,
        allowMultiple: resource.allowMultiple,
        dataSource: resourceData || resource.dataSource,
        idField: resource.idField,
        textField: resource.textField,
        groupIDField: resource.groupIDField,
        colorField: resource.colorField,
        startHourField: resource.startHourField,
        endHourField: resource.endHourField,
        workDaysField: resource.workDaysField,
        expandedField: resource.expandedField,
        cssClassField: resource.cssClassField
      };
      return resourceObj;
    };
    ResourceBase2.prototype.refreshLayout = function(isSetModel) {
      if (isNullOrUndefined(this.parent.uiStateValues.groupIndex) || !this.parent.enablePersistence) {
        this.parent.uiStateValues.groupIndex = 0;
      }
      this.parent.renderElements(isSetModel);
    };
    ResourceBase2.prototype.setResourceCollection = function() {
      var requiredResources = [];
      this.resourceCollection = [];
      this.colorIndex = null;
      if (this.parent.activeViewOptions.group.resources.length > 0) {
        for (var _i = 0, _a = this.parent.activeViewOptions.group.resources; _i < _a.length; _i++) {
          var resource = _a[_i];
          var index_1 = findIndexInData(this.parent.resourceCollection, "name", resource);
          if (index_1 >= 0) {
            requiredResources.push(this.parent.resourceCollection[parseInt(index_1.toString(), 10)]);
          }
        }
      } else if (this.parent.resourceCollection.length > 0) {
        requiredResources = this.parent.resourceCollection;
      }
      var index = 0;
      for (var _b = 0, requiredResources_1 = requiredResources; _b < requiredResources_1.length; _b++) {
        var resource = requiredResources_1[_b];
        var resources = this.getResourceModel(resource);
        if (resource.name === this.parent.eventSettings.resourceColorField) {
          this.colorIndex = index;
        }
        index++;
        this.resourceCollection.push(resources);
      }
      if (isNullOrUndefined(this.colorIndex)) {
        this.colorIndex = this.resourceCollection.length - 1;
      }
    };
    ResourceBase2.prototype.generateResourceLevels = function(innerDates, isTimeLine) {
      var _this = this;
      var resources = this.resourceCollection;
      var resTreeGroup = [];
      var lastColumnDates = [];
      var group = function(resources2, index, prevResource, prevResourceData, prevOrder) {
        var resTree = [];
        var resource = resources2[0];
        if (resource) {
          var data = void 0;
          if (prevResourceData && _this.parent.activeViewOptions.group.byGroupID) {
            var id_1 = prevResourceData[prevResource.idField];
            data = resource.dataSource.filter(function(e) {
              return e[resource.groupIDField] === id_1;
            });
          } else {
            data = resource.dataSource;
          }
          for (var i = 0; i < data.length; i++) {
            var groupOrder = [];
            if (prevOrder && prevOrder.length > 0) {
              groupOrder = groupOrder.concat(prevOrder);
            }
            groupOrder.push(data[parseInt(i.toString(), 10)][resource.idField]);
            var items = group(resources2.slice(1), index + 1, resource, data[parseInt(i.toString(), 10)], groupOrder);
            if (index === 0 && items.length === 0 && _this.resourceCollection.length > 1) {
              continue;
            }
            var dateCol = [];
            var renderDates = _this.parent.activeView.renderDates;
            var resWorkDays = void 0;
            if (!_this.parent.activeViewOptions.group.byDate && index + 1 === _this.resourceCollection.length) {
              var workDays = data[parseInt(i.toString(), 10)][resource.workDaysField];
              var resStartHour = data[parseInt(i.toString(), 10)][resource.startHourField];
              var resEndHour = data[parseInt(i.toString(), 10)][resource.endHourField];
              if (workDays && workDays.length > 0) {
                renderDates = _this.parent.activeView.getRenderDates(workDays);
                resWorkDays = workDays;
                dateCol = _this.parent.activeView.getDateSlots(renderDates, workDays);
              } else {
                resWorkDays = _this.parent.activeViewOptions.workDays;
                dateCol = innerDates;
              }
              var dateSlots = _this.generateCustomHours(dateCol, resStartHour, resEndHour, groupOrder);
              lastColumnDates = lastColumnDates.concat(dateSlots);
            }
            var resCssClass = data[parseInt(i.toString(), 10)][resource.cssClassField];
            var slotData = {
              type: "resourceHeader",
              className: ["e-resource-cells"],
              resourceLevelIndex: index,
              groupOrder,
              resource,
              resourceData: data[parseInt(i.toString(), 10)],
              colSpan: _this.parent.activeViewOptions.group.byDate ? 1 : dateCol.length,
              renderDates,
              workDays: resWorkDays,
              cssClass: resCssClass,
              child: items
            };
            resTree.push(slotData);
          }
          if (!resTreeGroup[parseInt(index.toString(), 10)]) {
            resTreeGroup[parseInt(index.toString(), 10)] = [];
          }
          if (resTree.length > 0) {
            resTreeGroup[parseInt(index.toString(), 10)].push(resTree);
          }
          return resTree;
        }
        return [];
      };
      this.resourceTreeLevel = group(resources, 0);
      return isTimeLine ? [] : this.generateHeaderLevels(resTreeGroup, lastColumnDates, innerDates);
    };
    ResourceBase2.prototype.generateCustomHours = function(renderDates, startHour, endHour, groupOrder) {
      var dateSlots = extend([], renderDates, null, true);
      for (var _i = 0, dateSlots_1 = dateSlots; _i < dateSlots_1.length; _i++) {
        var dateSlot = dateSlots_1[_i];
        if (startHour) {
          dateSlot.startHour = this.parent.getStartEndTime(startHour);
        }
        if (endHour) {
          dateSlot.endHour = this.parent.getStartEndTime(endHour);
        }
        if (groupOrder) {
          dateSlot.groupOrder = groupOrder;
        }
      }
      return dateSlots;
    };
    ResourceBase2.prototype.generateHeaderLevels = function(resTreeGroup, lastColumnDates, headerDates) {
      var headerLevels = [];
      for (var i = resTreeGroup.length - 1; i >= 0; i--) {
        var temp = 0;
        for (var _i = 0, _a = resTreeGroup[parseInt(i.toString(), 10)]; _i < _a.length; _i++) {
          var currentLevelChilds = _a[_i];
          for (var _b = 0, currentLevelChilds_1 = currentLevelChilds; _b < currentLevelChilds_1.length; _b++) {
            var currentLevelChild = currentLevelChilds_1[_b];
            if (resTreeGroup[i + 1] && resTreeGroup[i + 1].length > 0) {
              var nextLevelChilds = resTreeGroup[parseInt((i + 1).toString(), 10)][parseInt(temp.toString(), 10)];
              if (!nextLevelChilds) {
                continue;
              }
              var colSpan = 0;
              for (var _c = 0, nextLevelChilds_1 = nextLevelChilds; _c < nextLevelChilds_1.length; _c++) {
                var nextLevelChild = nextLevelChilds_1[_c];
                if (!this.parent.activeViewOptions.group.byGroupID || this.parent.activeViewOptions.group.byGroupID && nextLevelChild.resourceData[nextLevelChild.resource.groupIDField] === currentLevelChild.resourceData[currentLevelChild.resource.idField]) {
                  colSpan += nextLevelChild.colSpan;
                }
              }
              currentLevelChild.colSpan = colSpan;
            }
            currentLevelChild.groupIndex = temp;
            temp++;
            headerLevels[currentLevelChild.resourceLevelIndex] = headerLevels[currentLevelChild.resourceLevelIndex] || [];
            headerLevels[currentLevelChild.resourceLevelIndex].push(currentLevelChild);
          }
        }
      }
      this.lastResourceLevel = headerLevels.slice(-1)[0] || [];
      if (!this.parent.activeViewOptions.group.byDate) {
        var index = 0;
        for (var _d = 0, _e = this.lastResourceLevel; _d < _e.length; _d++) {
          var lastLevelResource = _e[_d];
          for (var i = 0; i < lastLevelResource.colSpan; i++) {
            lastColumnDates[parseInt(index.toString(), 10)].groupIndex = lastLevelResource.groupIndex;
            index++;
          }
        }
        headerLevels.push(lastColumnDates);
        return headerLevels;
      }
      var dateHeaderLevels = [];
      var levels = extend([], headerLevels, null, true);
      var datesColumn = [];
      if (this.parent.activeViewOptions.group.hideNonWorkingDays) {
        var renderDates_1 = [];
        var dateIndex = 0;
        var _loop_3 = function(headerDate2) {
          this_3.resourceDateTree[parseInt(dateIndex.toString(), 10)] = [];
          var currentDateLevels = [];
          var _loop_4 = function(j2) {
            var workDays = this_3.lastResourceLevel[parseInt(j2.toString(), 10)].resourceData[this_3.lastResourceLevel[parseInt(j2.toString(), 10)].resource.workDaysField];
            if (!workDays) {
              workDays = this_3.parent.activeViewOptions.workDays;
            }
            if (workDays.indexOf(headerDate2.date.getDay()) !== -1) {
              var resTd_1 = extend({}, this_3.lastResourceLevel[parseInt(j2.toString(), 10)], null, true);
              resTd_1.date = headerDate2.date;
              this_3.lastResourceLevel[parseInt(j2.toString(), 10)].workDays = workDays;
              resTd_1.startHour = this_3.parent.getStartEndTime(resTd_1.resourceData[resTd_1.resource.startHourField]) || headerDate2.startHour;
              resTd_1.endHour = this_3.parent.getStartEndTime(resTd_1.resourceData[resTd_1.resource.endHourField]) || headerDate2.endHour;
              this_3.resourceDateTree[parseInt(dateIndex.toString(), 10)].push(resTd_1);
              var _loop_5 = function(k3) {
                if (!currentDateLevels[parseInt(k3.toString(), 10)]) {
                  currentDateLevels[parseInt(k3.toString(), 10)] = [];
                }
                if (k3 === resTd_1.groupOrder.length - 1) {
                  if (!renderDates_1[parseInt(j2.toString(), 10)]) {
                    renderDates_1[parseInt(j2.toString(), 10)] = [];
                  }
                  var filterDates = resTd_1.renderDates.filter(function(x) {
                    return x.getDay() === headerDate2.date.getDay();
                  });
                  renderDates_1[parseInt(j2.toString(), 10)] = renderDates_1[parseInt(j2.toString(), 10)].concat(filterDates);
                  currentDateLevels[parseInt(k3.toString(), 10)].push(resTd_1);
                  return "continue";
                }
                var currentLevel = levels[parseInt(k3.toString(), 10)];
                var filteredResource = currentLevel.filter(function(data) {
                  return data.resourceData[data.resource.idField] === resTd_1.groupOrder[parseInt(k3.toString(), 10)];
                });
                if (filteredResource && filteredResource.length > 0) {
                  var existedResource = currentDateLevels[parseInt(k3.toString(), 10)].filter(function(data) {
                    return data.resourceData[data.resource.idField] === resTd_1.groupOrder[parseInt(k3.toString(), 10)];
                  });
                  if (existedResource && existedResource.length > 0) {
                    existedResource[0].colSpan += 1;
                  } else {
                    var filteredTd = extend({}, filteredResource[0], null, true);
                    filteredTd.colSpan = 1;
                    currentDateLevels[parseInt(k3.toString(), 10)].push(filteredTd);
                  }
                }
              };
              for (var k2 = 0; k2 < resTd_1.groupOrder.length; k2++) {
                _loop_5(k2);
              }
            }
          };
          for (var j = 0; j < this_3.lastResourceLevel.length; j++) {
            _loop_4(j);
          }
          if (currentDateLevels.length > 0) {
            for (var l = 0; l < levels.length; l++) {
              if (!dateHeaderLevels[parseInt(l.toString(), 10)]) {
                dateHeaderLevels[parseInt(l.toString(), 10)] = [];
              }
              dateHeaderLevels[parseInt(l.toString(), 10)] = dateHeaderLevels[parseInt(l.toString(), 10)].concat(currentDateLevels[parseInt(l.toString(), 10)]);
            }
            headerDate2.colSpan = currentDateLevels[currentDateLevels.length - 1].length;
            datesColumn.push(headerDate2);
          }
          dateIndex++;
        };
        var this_3 = this;
        for (var _f = 0, headerDates_1 = headerDates; _f < headerDates_1.length; _f++) {
          var headerDate = headerDates_1[_f];
          _loop_3(headerDate);
        }
        this.resourceDateTree = this.resourceDateTree.filter(function(data) {
          return data.length > 0;
        });
        this.lastResourceLevel.forEach(function(x, index2) {
          if (renderDates_1[parseInt(index2.toString(), 10)]) {
            x.renderDates = renderDates_1[parseInt(index2.toString(), 10)].sort(function(a, b) {
              return a.getTime() - b.getTime();
            });
          }
        });
        dateHeaderLevels.unshift(datesColumn);
        return dateHeaderLevels;
      }
      var dateColSpan = 0;
      for (var _g = 0, _h = levels[0]; _g < _h.length; _g++) {
        var firstRowTd = _h[_g];
        dateColSpan += firstRowTd.colSpan;
      }
      for (var _j = 0, headerDates_2 = headerDates; _j < headerDates_2.length; _j++) {
        var headerDate = headerDates_2[_j];
        headerDate.colSpan = dateColSpan;
        datesColumn.push(headerDate);
        var resGroup = extend([], levels, null, true);
        for (var k = 0, length_2 = resGroup.length; k < length_2; k++) {
          if (k === resGroup.length - 1) {
            for (var _k = 0, _l = resGroup[parseInt(k.toString(), 10)]; _k < _l.length; _k++) {
              var resTd = _l[_k];
              resTd.date = headerDate.date;
              resTd.workDays = headerDate.workDays;
              resTd.startHour = this.parent.getStartEndTime(resTd.resourceData[resTd.resource.startHourField]) || headerDate.startHour;
              resTd.endHour = this.parent.getStartEndTime(resTd.resourceData[resTd.resource.endHourField]) || headerDate.endHour;
            }
          }
          if (!dateHeaderLevels[parseInt(k.toString(), 10)]) {
            dateHeaderLevels[parseInt(k.toString(), 10)] = [];
          }
          dateHeaderLevels[parseInt(k.toString(), 10)] = dateHeaderLevels[parseInt(k.toString(), 10)].concat(resGroup[parseInt(k.toString(), 10)]);
        }
      }
      dateHeaderLevels.unshift(datesColumn);
      return dateHeaderLevels;
    };
    ResourceBase2.prototype.setResourceValues = function(eventObj, groupIndex) {
      var _this = this;
      var setValues = function(index2, field, value) {
        if (_this.resourceCollection[parseInt(index2.toString(), 10)].allowMultiple && _this.parent.activeViewOptions.group.allowGroupEdit) {
          eventObj["" + field] = [value];
        } else {
          eventObj["" + field] = value;
        }
      };
      if (groupIndex === void 0) {
        groupIndex = this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex : this.parent.activeCellsData.groupIndex;
      }
      if (this.parent.activeViewOptions.group.resources.length > 0 && !isNullOrUndefined(groupIndex)) {
        var groupOrder = this.lastResourceLevel[parseInt(groupIndex.toString(), 10)].groupOrder;
        for (var index = 0; index < this.resourceCollection.length; index++) {
          setValues(index, this.resourceCollection[parseInt(index.toString(), 10)].field, groupOrder[parseInt(index.toString(), 10)]);
        }
      } else if (this.parent.resourceCollection.length > 0) {
        for (var index = 0; index < this.resourceCollection.length; index++) {
          var data = this.resourceCollection[parseInt(index.toString(), 10)].dataSource[0];
          if (data) {
            setValues(index, this.resourceCollection[parseInt(index.toString(), 10)].field, data[this.resourceCollection[parseInt(index.toString(), 10)].idField]);
          }
        }
      }
    };
    ResourceBase2.prototype.getResourceColor = function(eventObj, groupOrder) {
      var colorFieldIndex = !isNullOrUndefined(groupOrder) && this.colorIndex > groupOrder.length - 1 ? groupOrder.length - 1 : this.colorIndex;
      var resource = this.resourceCollection[parseInt(colorFieldIndex.toString(), 10)];
      if (isNullOrUndefined(groupOrder) && this.parent.activeViewOptions.group.allowGroupEdit && resource.allowMultiple) {
        return void 0;
      }
      var id = isNullOrUndefined(groupOrder) ? eventObj[resource.field] : groupOrder[parseInt(colorFieldIndex.toString(), 10)];
      var data = this.filterData(resource.dataSource, resource.idField, id);
      if (data.length > 0) {
        return data[0][resource.colorField];
      }
      return void 0;
    };
    ResourceBase2.prototype.getCssClass = function(eventObj) {
      var resource = this.resourceCollection.slice(-1)[0];
      if (this.parent.activeViewOptions.group.allowGroupEdit && resource.allowMultiple) {
        return void 0;
      }
      var data = this.filterData(resource.dataSource, resource.idField, eventObj[resource.field]);
      if (data.length > 0) {
        return data[0][resource.cssClassField];
      }
      return void 0;
    };
    ResourceBase2.prototype.getResourceRenderDates = function() {
      var resourceDates = [].concat.apply([], this.lastResourceLevel.map(function(e) {
        return e.renderDates;
      }));
      var removeDuplicateDates = function(dateColl) {
        return dateColl.filter(function(date, index, dates) {
          return dates.map(function(dateObj) {
            return dateObj.getTime();
          }).indexOf(date.getTime()) === index;
        });
      };
      var renderDates = removeDuplicateDates(resourceDates);
      renderDates.sort(function(a, b) {
        return a.getTime() - b.getTime();
      });
      return renderDates;
    };
    ResourceBase2.prototype.filterData = function(dataSource, field, value) {
      return dataSource.filter(function(data) {
        return data["" + field] === value;
      });
    };
    ResourceBase2.prototype.getResourceData = function(eventObj, index, groupEditIndex) {
      if (this.parent.activeViewOptions.group.allowGroupEdit) {
        var resourceObj = {};
        for (var _i = 0, groupEditIndex_1 = groupEditIndex; _i < groupEditIndex_1.length; _i++) {
          var groupIndex = groupEditIndex_1[_i];
          var resourceLevel = this.lastResourceLevel[parseInt(groupIndex.toString(), 10)].groupOrder;
          for (var level = 0, length_3 = resourceLevel.length; level < length_3; level++) {
            var fieldName = this.resourceCollection[parseInt(level.toString(), 10)].field;
            if (isNullOrUndefined(resourceObj["" + fieldName])) {
              resourceObj["" + fieldName] = [];
            }
            resourceObj["" + fieldName].push(resourceLevel[parseInt(level.toString(), 10)]);
          }
        }
        eventObj = extend(eventObj, resourceObj);
      } else {
        for (var level = 0, length_4 = this.resourceCollection.length; level < length_4; level++) {
          if (this.lastResourceLevel[parseInt(index.toString(), 10)]) {
            eventObj[this.resourceCollection[parseInt(level.toString(), 10)].field] = this.lastResourceLevel[parseInt(index.toString(), 10)].groupOrder[parseInt(level.toString(), 10)];
          }
        }
      }
    };
    ResourceBase2.prototype.addResource = function(resources, name, index) {
      var resourceCollection = resources instanceof Array ? resources : [resources];
      var _loop_6 = function(resource2) {
        if (resource2.name === name) {
          resourceCollection.forEach(function(addObj, i) {
            return new DataManager({ json: resource2.dataSource }).insert(addObj, null, null, index + i);
          });
          return "break";
        }
      };
      for (var _i = 0, _a = this.parent.resourceCollection; _i < _a.length; _i++) {
        var resource = _a[_i];
        var state_1 = _loop_6(resource);
        if (state_1 === "break")
          break;
      }
      this.refreshLayout(true);
    };
    ResourceBase2.prototype.removeResource = function(resourceId, name) {
      var resourceCollection = resourceId instanceof Array ? resourceId : [resourceId];
      var _loop_7 = function(resource2) {
        if (resource2.name === name) {
          resourceCollection.forEach(function(removeObj) {
            return new DataManager({ json: resource2.dataSource }).remove(resource2.idField, removeObj);
          });
          return "break";
        }
      };
      for (var _i = 0, _a = this.parent.resourceCollection; _i < _a.length; _i++) {
        var resource = _a[_i];
        var state_2 = _loop_7(resource);
        if (state_2 === "break")
          break;
      }
      this.refreshLayout(true);
    };
    ResourceBase2.prototype.getIndexFromResourceId = function(id, name, resourceData, event, parentField) {
      name = name || this.parent.resourceCollection.slice(-1)[0].name;
      if (isNullOrUndefined(resourceData)) {
        resourceData = this.resourceCollection.filter(function(e) {
          return e.name === name;
        })[0];
        if (isNullOrUndefined(resourceData)) {
          return null;
        }
      }
      var resource = resourceData.dataSource.filter(function(e) {
        if (event && e[resourceData.idField] === id) {
          if (e[resourceData.groupIDField] === event["" + parentField]) {
            return e[resourceData.idField] === id;
          }
          return null;
        } else {
          return e[resourceData.idField] === id;
        }
      })[0];
      return this.lastResourceLevel.map(function(e) {
        return e.resourceData;
      }).indexOf(resource);
    };
    ResourceBase2.prototype.resourceExpand = function(id, name, hide) {
      var resource = this.parent.resourceCollection.filter(function(e) {
        if (e.name === name) {
          return e;
        }
        return null;
      })[0];
      var index = 0;
      var resourceData = resource.dataSource.filter(function(e) {
        return e[resource.idField] === id;
      })[0];
      if (!this.parent.activeViewOptions.group.byGroupID) {
        index = this.getIndexFromResourceId(id, name, resource);
      } else {
        index = this.lastResourceLevel.map(function(e) {
          return e.resourceData;
        }).indexOf(resourceData);
      }
      var target = this.parent.element.querySelector("." + RESOURCE_COLUMN_WRAP_CLASS + " " + ('[data-group-index="' + index + '"]') + " ." + RESOURCE_TREE_ICON_CLASS);
      if (target) {
        if (target.classList.contains(RESOURCE_EXPAND_CLASS) && !hide) {
          target.click();
        } else if (target.classList.contains(RESOURCE_COLLAPSE_CLASS) && hide) {
          target.click();
        }
      }
    };
    ResourceBase2.prototype.resourceScroll = function(id, name) {
      if (this.parent.isAdaptive || ["Agenda", "MonthAgenda"].indexOf(this.parent.currentView) > -1) {
        return;
      }
      var levelName = name || this.parent.resourceCollection.slice(-1)[0].name;
      var levelIndex = this.parent.resourceCollection.length - 1;
      var resource = this.parent.resourceCollection.filter(function(e, index2) {
        if (e.name === levelName) {
          levelIndex = index2;
          return e;
        }
        return null;
      })[0];
      var scrollElement = this.parent.element.querySelector("." + CONTENT_WRAP_CLASS);
      var index = 0;
      if (this.parent.activeView.isTimelineView()) {
        if (!this.parent.activeViewOptions.group.byGroupID) {
          index = this.getIndexFromResourceId(id, levelName, resource);
        } else {
          var resourceData = resource.dataSource.filter(function(e) {
            return e[resource.idField] === id;
          })[0];
          index = this.lastResourceLevel.map(function(e) {
            return e.resourceData;
          }).indexOf(resourceData);
        }
        if (this.parent.virtualScrollModule) {
          var virtual = this.parent.element.querySelector("." + VIRTUAL_TRACK_CLASS);
          var averageRowHeight = Math.round(virtual.offsetHeight / this.expandedResources.length);
          if (this.parent.rowAutoHeight) {
            scrollElement.scrollTop = 0;
            this.parent.virtualScrollModule.virtualScrolling();
          }
          scrollElement.scrollTop = index * averageRowHeight - (this.parent.virtualScrollModule.bufferCount - 1) * averageRowHeight;
          this.parent.virtualScrollModule.virtualScrolling();
          if (this.parent.rowAutoHeight) {
            var td = this.parent.element.querySelector("." + WORK_CELLS_CLASS + '[data-group-index="' + index + '"]');
            if (td && !td.parentElement.classList.contains(HIDDEN_CLASS)) {
              scrollElement.scrollTop = scrollElement.scrollTop < td.offsetTop ? td.offsetTop : scrollElement.scrollTop + td.offsetTop;
            }
          } else {
            scrollElement.scrollTop = index * averageRowHeight;
          }
        } else {
          var td = this.parent.element.querySelector("." + WORK_CELLS_CLASS + '[data-group-index="' + index + '"]');
          if (td && !td.parentElement.classList.contains(HIDDEN_CLASS)) {
            scrollElement.scrollTop = td.offsetTop;
          }
        }
      } else {
        if (!this.parent.activeViewOptions.group.byGroupID) {
          index = this.getIndexFromResourceId(id, levelName, resource);
        } else {
          if (levelName === this.parent.resourceCollection.slice(-1)[0].name) {
            index = this.lastResourceLevel.map(function(e) {
              return e.resourceData[resource.idField];
            }).indexOf(id);
          } else {
            index = resource.dataSource.map(function(e) {
              return e[resource.idField];
            }).indexOf(id);
          }
        }
        var offsetTarget = this.parent.element.querySelector("." + HEADER_ROW_CLASS + ":nth-child(" + (levelIndex + 1) + ")");
        var offset = [].slice.call(offsetTarget.children).map(function(node) {
          return node.offsetLeft;
        });
        scrollElement.scrollLeft = offset[parseInt(index.toString(), 10)];
      }
    };
    ResourceBase2.prototype.destroy = function() {
      this.parent.off(documentClick, this.documentClick);
      if (this.treeViewObj) {
        if (this.treeViewObj.portals && this.treeViewObj.portals.length > 0) {
          var treeViewTemplates = this.treeViewObj.portals.map(function(x) {
            return x.propName;
          });
          if (treeViewTemplates.length > 0) {
            this.parent.resetTemplates(treeViewTemplates);
          }
        }
        this.treeViewObj.destroy();
        this.treeViewObj = null;
      }
      if (this.treePopup) {
        this.treePopup.destroy();
        this.treePopup = null;
        remove(this.parent.element.querySelector("." + RESOURCE_TREE_POPUP));
        remove(this.parent.element.querySelector("." + RESOURCE_TREE_POPUP_OVERLAY));
      }
      var resToolBarEle = this.parent.element.querySelector("." + RESOURCE_TOOLBAR_CONTAINER);
      if (resToolBarEle) {
        remove(resToolBarEle);
      }
    };
    return ResourceBase2;
  }()
);
var __extends$7 = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var __decorate = globalThis && globalThis.__decorate || function(decorators, target, key, desc) {
  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function")
    r = Reflect.decorate(decorators, target, key, desc);
  else
    for (var i = decorators.length - 1; i >= 0; i--)
      if (d = decorators[i])
        r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var Schedule = (
  /** @class */
  function(_super) {
    __extends$7(Schedule2, _super);
    function Schedule2(options, element2) {
      return _super.call(this, options, element2) || this;
    }
    Schedule2.prototype.render = function() {
      var addClasses = [];
      var removeClasses = [];
      addClasses.push(ROOT);
      if (this.enableRtl) {
        addClasses.push(RTL);
      } else {
        removeClasses.push(RTL);
      }
      if (this.isAdaptive) {
        addClasses.push(DEVICE_CLASS);
      } else {
        removeClasses.push(DEVICE_CLASS);
      }
      if (this.allowMultiDrag) {
        addClasses.push(MULTI_DRAG);
      } else {
        removeClasses.push(MULTI_DRAG);
      }
      if (this.cssClass) {
        var cssClass2 = this.cssClass.split(" ");
        for (var _i = 0, cssClass_1 = cssClass2; _i < cssClass_1.length; _i++) {
          var cls_1 = cssClass_1[_i];
          addClasses.push(cls_1);
        }
      }
      classList(this.element, addClasses, removeClasses);
      this.validateDate();
      createSpinner({ target: this.element });
      this.scrollModule = new Scroll(this);
      this.scrollModule.setWidth();
      this.scrollModule.setHeight();
      this.renderModule = new Render(this);
      this.eventBase = new EventBase(this);
      this.workCellAction = new WorkCellInteraction(this);
      if (this.allowKeyboardInteraction) {
        this.keyboardInteractionModule = new KeyboardInteraction(this);
      }
      this.inlineModule = new InlineEdit(this);
      this.initializeDataModule();
      this.renderTableContainer();
      this.activeViewOptions = this.getActiveViewOptions();
      this.initializeResources();
      this.wireEvents();
    };
    Schedule2.prototype.renderTableContainer = function() {
      if (!this.element.querySelector("." + TABLE_CONTAINER_CLASS)) {
        this.element.appendChild(this.createElement("div", { className: TABLE_CONTAINER_CLASS }));
      }
    };
    Schedule2.prototype.renderTemplates = function(callback) {
      if (this.isReact) {
        this.renderReactTemplates(callback);
      } else if (callback) {
        callback();
      }
    };
    Schedule2.prototype.resetTemplates = function(templates) {
      if (this.isAngular || this.isReact) {
        this.clearTemplate(templates);
      }
    };
    Schedule2.prototype.sanitize = function(value, element2) {
      if (this.enableHtmlSanitizer) {
        element2.innerText = SanitizeHtmlHelper.sanitize(value);
      } else {
        element2.innerHTML = value;
      }
    };
    Schedule2.prototype.initializeResources = function(isSetModel) {
      if (isSetModel === void 0) {
        isSetModel = false;
      }
      if (this.resources.length > 0) {
        this.resourceBase = new ResourceBase(this);
        this.resourceBase.bindResourcesData(isSetModel);
      } else {
        this.resourceBase = null;
        this.resourceCollection = [];
        this.renderElements(isSetModel);
      }
    };
    Schedule2.prototype.renderElements = function(isLayoutOnly) {
      if (isLayoutOnly) {
        this.initializeView(this.currentView);
        this.eventWindow.refresh();
        return;
      }
      this.destroyHeaderModule();
      if (this.showHeaderBar) {
        this.headerModule = new HeaderRenderer(this);
      }
      this.renderTableContainer();
      if (Browser.isDevice || Browser.isTouch) {
        this.scheduleTouchModule = new ScheduleTouch(this);
      }
      this.initializeView(this.currentView);
      this.destroyPopups();
      if (!this.isPrinting) {
        this.initializePopups();
      }
    };
    Schedule2.prototype.validateDate = function(selectedDate) {
      if (selectedDate === void 0) {
        selectedDate = this.selectedDate;
      }
      var date = selectedDate instanceof Date ? new Date(selectedDate.getTime()) : new Date(selectedDate);
      var minDate = this.minDate instanceof Date ? new Date(this.minDate.getTime()) : new Date(this.minDate);
      var maxDate = this.maxDate instanceof Date ? new Date(this.maxDate.getTime()) : new Date(this.maxDate);
      if (minDate <= maxDate) {
        if (date < minDate) {
          date = minDate;
        }
        if (date > maxDate) {
          date = maxDate;
        }
        this.setProperties({ selectedDate: /* @__PURE__ */ new Date("" + date), minDate: /* @__PURE__ */ new Date("" + minDate), maxDate: /* @__PURE__ */ new Date("" + maxDate) }, true);
        if (this.eventWindow) {
          this.eventWindow.updateMinMaxDateToEditor();
        }
      } else {
        throw Error("minDate should be equal or less than maxDate");
      }
    };
    Schedule2.prototype.getViewIndex = function(viewName) {
      for (var item = 0; item < this.viewCollections.length; item++) {
        var checkIndex = this.viewCollections[parseInt(item.toString(), 10)].option;
        if (checkIndex === viewName) {
          return item;
        }
      }
      return -1;
    };
    Schedule2.prototype.setViewOptions = function(isModuleLoad) {
      if (isModuleLoad === void 0) {
        isModuleLoad = false;
      }
      this.viewOptions = {};
      this.viewCollections = [];
      var viewName;
      var selectedView;
      var prevIndex = this.viewIndex;
      var count = 0;
      this.viewIndex = -1;
      for (var _i = 0, _a = this.views; _i < _a.length; _i++) {
        var view = _a[_i];
        var isOptions = typeof view === "string" ? false : true;
        if (typeof view === "string") {
          viewName = view;
          if (this.currentView === viewName) {
            selectedView = viewName;
            this.viewIndex = count;
          }
        } else {
          viewName = view.option;
          if (view.isSelected) {
            selectedView = viewName;
            this.viewIndex = count;
          }
        }
        var obj = extend({ option: viewName }, isOptions ? view : {});
        var fieldViewName = viewName.charAt(0).toLowerCase() + viewName.slice(1);
        obj.cellHeaderTemplateName = obj.cellHeaderTemplate ? obj.option : "";
        obj.dateHeaderTemplateName = obj.dateHeaderTemplate ? obj.option : "";
        obj.dateRangeTemplateName = obj.dateRangeTemplate ? obj.option : "";
        obj.cellTemplateName = obj.cellTemplate ? obj.option : "";
        obj.dayHeaderTemplateName = obj.dayHeaderTemplate ? obj.option : "";
        obj.monthHeaderTemplateName = obj.monthHeaderTemplate ? obj.option : "";
        obj.resourceHeaderTemplateName = obj.resourceHeaderTemplate ? obj.option : "";
        obj.headerIndentTemplateName = obj.headerIndentTemplate ? obj.option : "";
        obj.eventTemplateName = obj.eventTemplate ? obj.option : "";
        if (!isNullOrUndefined(obj.firstDayOfWeek) && obj.firstDayOfWeek === 0) {
          delete obj.firstDayOfWeek;
        }
        if (!isNullOrUndefined(obj.interval) && obj.interval === 1) {
          delete obj.interval;
        }
        this.viewCollections.push(obj);
        if (isNullOrUndefined(this.viewOptions["" + fieldViewName])) {
          this.viewOptions["" + fieldViewName] = [obj];
        } else {
          this.viewOptions["" + fieldViewName].push(obj);
        }
        count++;
      }
      if (!isModuleLoad && selectedView) {
        this.setProperties({ currentView: selectedView }, true);
      }
      if (this.viewIndex === -1) {
        var currentIndex = this.getViewIndex(this.currentView);
        this.viewIndex = typeof this.views[0] !== "string" && (!isNullOrUndefined(prevIndex) && prevIndex !== -1) ? prevIndex : currentIndex === -1 ? 0 : currentIndex;
      }
    };
    Schedule2.prototype.getActiveViewOptions = function() {
      var timeScale = {
        enable: this.timeScale.enable,
        interval: this.timeScale.interval,
        slotCount: this.timeScale.slotCount,
        majorSlotTemplate: this.timeScale.majorSlotTemplate,
        minorSlotTemplate: this.timeScale.minorSlotTemplate
      };
      var isYearView = this.viewCollections[this.viewIndex].option.indexOf("Year") > -1;
      var group = {
        byDate: isYearView ? false : this.group.byDate,
        byGroupID: this.group.byGroupID,
        allowGroupEdit: this.group.allowGroupEdit,
        resources: this.group.resources,
        headerTooltipTemplate: this.group.headerTooltipTemplate,
        enableCompactView: this.group.enableCompactView,
        hideNonWorkingDays: ["Day", "Week", "WorkWeek", "Month"].indexOf(this.currentView) > -1 ? this.group.hideNonWorkingDays : false
      };
      var workDays = this.viewCollections[this.viewIndex].workDays ? [] : this.workDays;
      var scheduleOptions = {
        dateFormat: this.dateFormat,
        endHour: this.endHour,
        isSelected: false,
        option: null,
        readonly: this.readonly,
        startHour: this.startHour,
        allowVirtualScrolling: false,
        cellHeaderTemplate: this.cellHeaderTemplate,
        dayHeaderTemplate: this.dayHeaderTemplate,
        monthHeaderTemplate: this.monthHeaderTemplate,
        cellTemplate: this.cellTemplate,
        eventTemplate: this.eventSettings.template,
        dateHeaderTemplate: this.dateHeaderTemplate,
        dateRangeTemplate: this.dateRangeTemplate,
        resourceHeaderTemplate: this.resourceHeaderTemplate,
        headerIndentTemplate: this.headerIndentTemplate,
        firstMonthOfYear: this.firstMonthOfYear,
        firstDayOfWeek: this.firstDayOfWeek,
        workDays,
        monthsCount: this.monthsCount,
        showWeekend: this.showWeekend,
        showWeekNumber: this.showWeekNumber,
        displayName: null,
        interval: 1,
        timeScale,
        timeFormat: this.internalTimeFormat,
        group,
        headerRows: this.headerRows,
        orientation: "Horizontal",
        numberOfWeeks: 0,
        displayDate: null
      };
      var viewOptions = this.viewCollections[this.viewIndex];
      var viewsData = extend(scheduleOptions, viewOptions, void 0, true);
      if (this.firstDayOfWeek !== 0 && viewOptions.firstDayOfWeek && this.firstDayOfWeek !== viewOptions.firstDayOfWeek) {
        viewsData.firstDayOfWeek = this.firstDayOfWeek;
      }
      if (viewsData.displayDate) {
        viewsData.displayDate = viewsData.displayDate instanceof Date ? new Date(viewsData.displayDate.getTime()) : new Date(viewsData.displayDate);
      }
      return viewsData;
    };
    Schedule2.prototype.initializeDataModule = function() {
      this.eventFields = {
        id: this.eventSettings.fields.id,
        isBlock: this.eventSettings.fields.isBlock,
        subject: this.eventSettings.fields.subject.name,
        startTime: this.eventSettings.fields.startTime.name,
        endTime: this.eventSettings.fields.endTime.name,
        startTimezone: this.eventSettings.fields.startTimezone.name,
        endTimezone: this.eventSettings.fields.endTimezone.name,
        location: this.eventSettings.fields.location.name,
        description: this.eventSettings.fields.description.name,
        isAllDay: this.eventSettings.fields.isAllDay.name,
        recurrenceID: this.eventSettings.fields.recurrenceID.name,
        recurrenceRule: this.eventSettings.fields.recurrenceRule.name,
        recurrenceException: this.eventSettings.fields.recurrenceException.name,
        isReadonly: this.eventSettings.fields.isReadonly,
        followingID: this.eventSettings.fields.followingID
      };
      this.setEditorTitles();
      this.dataModule = new Data(this, this.eventSettings.dataSource, this.eventSettings.query);
      this.crudModule = new Crud(this);
    };
    Schedule2.prototype.setEditorTitles = function() {
      this.editorTitles = {
        subject: this.eventSettings.fields.subject.title || this.localeObj.getConstant("title"),
        startTime: this.eventSettings.fields.startTime.title || this.localeObj.getConstant("start"),
        endTime: this.eventSettings.fields.endTime.title || this.localeObj.getConstant("end"),
        isAllDay: this.eventSettings.fields.isAllDay.title || this.localeObj.getConstant("allDay"),
        startTimezone: this.eventSettings.fields.startTimezone.title || this.localeObj.getConstant("startTimezone"),
        endTimezone: this.eventSettings.fields.endTimezone.title || this.localeObj.getConstant("endTimezone"),
        location: this.eventSettings.fields.location.title || this.localeObj.getConstant("location"),
        description: this.eventSettings.fields.description.title || this.localeObj.getConstant("description"),
        recurrenceRule: this.eventSettings.fields.recurrenceRule.title || this.localeObj.getConstant("repeat")
      };
    };
    Schedule2.prototype.initializeView = function(viewName) {
      this.showSpinner();
      this.activeViewOptions = this.getActiveViewOptions();
      if (this.resourceBase) {
        this.resourceBase.setResourceCollection();
      }
      this.initializeTemplates();
      this.renderModule.render(viewName);
    };
    Schedule2.prototype.initializeTemplates = function() {
      this.cellHeaderTemplateFn = this.templateParser(this.activeViewOptions.cellHeaderTemplate);
      this.dayHeaderTemplateFn = this.templateParser(this.activeViewOptions.dayHeaderTemplate);
      this.monthHeaderTemplateFn = this.templateParser(this.activeViewOptions.monthHeaderTemplate);
      this.cellTemplateFn = this.templateParser(this.activeViewOptions.cellTemplate);
      this.dateHeaderTemplateFn = this.templateParser(this.activeViewOptions.dateHeaderTemplate);
      this.dateRangeTemplateFn = this.templateParser(this.activeViewOptions.dateRangeTemplate);
      this.majorSlotTemplateFn = this.templateParser(this.activeViewOptions.timeScale.majorSlotTemplate);
      this.minorSlotTemplateFn = this.templateParser(this.activeViewOptions.timeScale.minorSlotTemplate);
      this.appointmentTemplateFn = this.templateParser(this.activeViewOptions.eventTemplate);
      this.resourceHeaderTemplateFn = this.templateParser(this.activeViewOptions.resourceHeaderTemplate);
      this.headerIndentTemplateFn = this.templateParser(this.activeViewOptions.headerIndentTemplate);
      this.headerTooltipTemplateFn = this.templateParser(this.activeViewOptions.group.headerTooltipTemplate);
      this.eventTooltipTemplateFn = this.templateParser(this.eventSettings.tooltipTemplate);
      this.editorTemplateFn = this.templateParser(this.editorTemplate);
      this.quickInfoTemplatesHeaderFn = this.templateParser(this.quickInfoTemplates.header);
      this.quickInfoTemplatesContentFn = this.templateParser(this.quickInfoTemplates.content);
      this.quickInfoTemplatesFooterFn = this.templateParser(this.quickInfoTemplates.footer);
    };
    Schedule2.prototype.initializePopups = function() {
      this.eventWindow = new EventWindow(this);
      this.quickPopup = new QuickPopups(this);
    };
    Schedule2.prototype.getDayNames = function(type) {
      var culShortNames = [];
      var cldrObj;
      var nameSpace = "";
      if (this.locale === "en" || this.locale === "en-US") {
        nameSpace = "days.stand-alone.";
        cldrObj = getValue(nameSpace + type, getDefaultDateObject(this.getCalendarMode()));
      } else {
        nameSpace = "main." + this.locale + ".dates.calendars." + this.getCalendarMode() + ".days.format." + type;
        cldrObj = getValue(nameSpace, cldrData);
      }
      for (var _i = 0, _a = Object.keys(cldrObj); _i < _a.length; _i++) {
        var obj = _a[_i];
        culShortNames.push(getValue(obj, cldrObj));
      }
      return culShortNames;
    };
    Schedule2.prototype.setCldrTimeFormat = function() {
      if (!isNullOrUndefined(this.timeFormat)) {
        this.internalTimeFormat = this.timeFormat;
        return;
      }
      if (this.locale === "en" || this.locale === "en-US") {
        this.internalTimeFormat = getValue("timeFormats.short", getDefaultDateObject(this.getCalendarMode()));
      } else {
        this.internalTimeFormat = getValue("main." + this.locale + ".dates.calendars." + this.getCalendarMode() + ".timeFormats.short", cldrData);
      }
    };
    Schedule2.prototype.getCalendarMode = function() {
      return this.calendarMode.toLowerCase();
    };
    Schedule2.prototype.getTimeString = function(date) {
      var time = this.globalize.formatDate(date, {
        format: this.activeViewOptions.timeFormat,
        type: "time",
        calendar: this.getCalendarMode()
      });
      return time.toLocaleUpperCase();
    };
    Schedule2.prototype.getDateTime = function(date) {
      return date instanceof Date ? new Date(date.getTime()) : new Date(date);
    };
    Schedule2.prototype.setCalendarMode = function() {
      if (this.calendarMode === "Islamic") {
        this.calendarUtil = new Islamic();
      } else {
        this.calendarUtil = new Gregorian();
      }
    };
    Schedule2.prototype.changeView = function(view, event, muteOnChange, index) {
      var _this = this;
      if (isNullOrUndefined(index)) {
        index = this.getViewIndex(view);
      }
      if (!muteOnChange && index === this.viewIndex && this.currentView === view || index < 0) {
        return;
      }
      var previousView = this.activeViewOptions ? this.activeViewOptions.option : this.currentView;
      var args = { requestType: "viewNavigate", cancel: false, event };
      this.trigger(actionBegin, args, function(actionArgs) {
        if (!actionArgs.cancel) {
          var navArgs = {
            action: "view",
            cancel: false,
            currentDate: _this.selectedDate,
            previousView,
            currentView: view,
            viewIndex: index
          };
          _this.trigger(navigating, navArgs, function(navigationArgs) {
            if (!navigationArgs.cancel) {
              var isVertical = ["Day", "Week", "WorkWeek"].indexOf(view) > -1 && ["Day", "Week", "WorkWeek"].indexOf(previousView) < 0;
              _this.uiStateValues.isInitial = isVertical || view.indexOf("Timeline") > -1 || view.indexOf("Year") > -1;
              _this.uiStateValues.top = view.indexOf("Timeline") > -1 && previousView.indexOf("Timeline") < 0 ? 0 : _this.uiStateValues.top;
              _this.viewIndex = navigationArgs.viewIndex;
              _this.setProperties({ currentView: view }, true);
              if (_this.headerModule) {
                _this.headerModule.updateActiveView();
                _this.headerModule.setCalendarDate(_this.selectedDate);
                _this.headerModule.setCalendarView();
              }
              _this.initializeView(_this.currentView);
              _this.animateLayout();
              args = { requestType: "viewNavigate", cancel: false, event };
              _this.trigger(actionComplete, args);
            } else {
              _this.currentView = previousView;
            }
          });
        } else {
          _this.currentView = previousView;
        }
      });
    };
    Schedule2.prototype.changeDate = function(selectedDate, event) {
      var _this = this;
      var args = { requestType: "dateNavigate", cancel: false, event };
      this.trigger(actionBegin, args, function(actionArgs) {
        if (!actionArgs.cancel) {
          var navArgs = {
            action: "date",
            cancel: false,
            previousDate: _this.selectedDate,
            currentDate: selectedDate
          };
          _this.trigger(navigating, navArgs, function(navigationArgs) {
            if (!navigationArgs.cancel) {
              _this.uiStateValues.isInitial = _this.activeView.isTimelineView() && _this.currentView !== "TimelineYear";
              _this.validateDate(navigationArgs.currentDate);
              if (_this.headerModule) {
                _this.headerModule.setCalendarDate(navigationArgs.currentDate);
              }
              if (_this.currentView === "MonthAgenda" && _this.monthAgendaModule) {
                _this.monthAgendaModule.monthAgendaDate = /* @__PURE__ */ new Date("" + _this.selectedDate);
              }
              _this.initializeView(_this.currentView);
              _this.animateLayout();
              args = { requestType: "dateNavigate", cancel: false, event };
              _this.trigger(actionComplete, args);
            }
          });
        }
      });
    };
    Schedule2.prototype.isMinMaxDate = function(date) {
      if (date === void 0) {
        date = this.selectedDate;
      }
      return date.getTime() >= this.minDate.getTime() && date.getTime() <= this.maxDate.getTime();
    };
    Schedule2.prototype.isSelectedDate = function(date) {
      return date.setHours(0, 0, 0, 0) === (/* @__PURE__ */ new Date("" + this.selectedDate)).setHours(0, 0, 0, 0);
    };
    Schedule2.prototype.getCurrentTime = function(date) {
      if (date === void 0) {
        date = /* @__PURE__ */ new Date();
      }
      if (this.timezone) {
        return this.tzModule.convert(date, this.tzModule.getLocalTimezoneName(), this.timezone);
      }
      return date;
    };
    Schedule2.prototype.getNavigateView = function() {
      if (this.activeView.isTimelineView()) {
        return this.currentView === "TimelineMonth" || this.currentView === "TimelineYear" ? "TimelineDay" : "Agenda";
      }
      return "Day";
    };
    Schedule2.prototype.animateLayout = function() {
      if (!this.activeView.element) {
        return;
      }
      new Animation$1({ duration: 600, name: "FadeIn", timingFunction: "easeIn" }).animate(this.activeView.element);
    };
    Schedule2.prototype.requiredModules = function() {
      var modules = [];
      this.setViewOptions(true);
      for (var _i = 0, _a = Object.keys(this.viewOptions); _i < _a.length; _i++) {
        var view = _a[_i];
        view = view === "timelineDay" || view === "timelineWeek" || view === "timelineWorkWeek" ? "timelineViews" : view;
        modules.push({ member: view, args: [this] });
      }
      if (this.allowDragAndDrop) {
        modules.push({ member: "dragAndDrop", args: [this] });
      }
      if (this.allowResizing) {
        modules.push({ member: "resize", args: [this] });
      }
      modules.push({ member: "excelExport", args: [this] });
      modules.push({ member: "iCalendarExport", args: [this] });
      modules.push({ member: "iCalendarImport", args: [this] });
      modules.push({ member: "print", args: [this] });
      return modules;
    };
    Schedule2.prototype.preRender = function() {
      this.isAdaptive = Browser.isDevice || isIPadDevice();
      this.globalize = new Internationalization(this.locale);
      this.tzModule = new Timezone();
      if (this && isNullOrUndefined(this.uiStateValues) || !this.enablePersistence) {
        this.uiStateValues = {
          expand: false,
          isInitial: true,
          left: 0,
          top: 0,
          isGroupAdaptive: false,
          isIgnoreOccurrence: false,
          groupIndex: 0,
          action: false,
          isBlock: false,
          isCustomMonth: true,
          isPreventTimezone: false
        };
      }
      this.currentTimezoneDate = this.getCurrentTime();
      this.activeCellsData = { startTime: new Date(this.currentTimezoneDate), endTime: new Date(this.currentTimezoneDate), isAllDay: false };
      this.activeEventData = { event: void 0, element: void 0 };
      this.getDefaultLocale();
      this.localeObj = new L10n(this.getModuleName(), this.defaultLocale, this.locale);
      this.setCldrTimeFormat();
      this.setCalendarMode();
      this.eventsData = [];
      this.eventsProcessed = [];
      this.blockData = [];
      this.blockProcessed = [];
      this.resourceCollection = [];
      this.currentAction = null;
      this.selectedElements = [];
      this.setViewOptions();
    };
    Schedule2.prototype.getDefaultLocale = function() {
      this.defaultLocale = {
        day: "Day",
        week: "Week",
        workWeek: "Work Week",
        month: "Month",
        year: "Year",
        agenda: "Agenda",
        weekAgenda: "Week Agenda",
        workWeekAgenda: "Work Week Agenda",
        monthAgenda: "Month Agenda",
        today: "Today",
        noEvents: "No events",
        emptyContainer: "There are no events scheduled on this day.",
        allDay: "All day",
        start: "Start",
        end: "End",
        more: "more",
        close: "Close",
        cancel: "Cancel",
        noTitle: "(No Title)",
        delete: "Delete",
        deleteEvent: "Delete Event",
        deleteMultipleEvent: "Delete Multiple Events",
        selectedItems: "Items selected",
        deleteSeries: "Entire Series",
        edit: "Edit",
        editSeries: "Entire Series",
        editEvent: "Edit Event",
        createEvent: "Create",
        subject: "Subject",
        addTitle: "Add title",
        moreDetails: "More Details",
        save: "Save",
        editContent: "How would you like to change the appointment in the series?",
        deleteContent: "Are you sure you want to delete this event?",
        deleteMultipleContent: "Are you sure you want to delete the selected events?",
        newEvent: "New Event",
        title: "Title",
        location: "Location",
        description: "Description",
        timezone: "Timezone",
        startTimezone: "Start Timezone",
        endTimezone: "End Timezone",
        repeat: "Repeat",
        saveButton: "Save",
        cancelButton: "Cancel",
        deleteButton: "Delete",
        recurrence: "Recurrence",
        wrongPattern: "The recurrence pattern is not valid.",
        seriesChangeAlert: "Do you want to cancel the changes made to specific instances of this series and match it to the whole series again?",
        createError: "The duration of the event must be shorter than how frequently it occurs. Shorten the duration, or change the recurrence pattern in the recurrence event editor.",
        sameDayAlert: "Two occurrences of the same event cannot occur on the same day.",
        occurenceAlert: "Cannot reschedule an occurrence of the recurring appointment if it skips over a later occurrence of the same appointment.",
        editRecurrence: "Edit Recurrence",
        repeats: "Repeats",
        alert: "Alert",
        startEndError: "The selected end date occurs before the start date.",
        invalidDateError: "The entered date value is invalid.",
        blockAlert: "Events cannot be scheduled within the blocked time range.",
        ok: "Ok",
        yes: "Yes",
        no: "No",
        occurrence: "Occurrence",
        series: "Series",
        previous: "Previous",
        next: "Next",
        timelineDay: "Timeline Day",
        timelineWeek: "Timeline Week",
        timelineWorkWeek: "Timeline Work Week",
        timelineMonth: "Timeline Month",
        timelineYear: "Timeline Year",
        editFollowingEvent: "Following Events",
        deleteTitle: "Delete Event",
        editTitle: "Edit Event",
        beginFrom: "Begin From",
        endAt: "Ends At",
        expandAllDaySection: "Expand-all-day-section",
        collapseAllDaySection: "Collapse-all-day-section",
        searchTimezone: "Search Timezone",
        noRecords: "No records found"
      };
    };
    Schedule2.prototype.wireEvents = function() {
      EventHandler.add(window, "resize", this.onScheduleResize, this);
      EventHandler.add(window, "orientationchange", this.onScheduleResize, this);
      EventHandler.add(document, Browser.touchStartEvent, this.onDocumentClick, this);
    };
    Schedule2.prototype.removeSelectedClass = function() {
      var selectedCells = this.getSelectedCells();
      for (var _i = 0, selectedCells_1 = selectedCells; _i < selectedCells_1.length; _i++) {
        var cell = selectedCells_1[_i];
        if (this.currentView !== "Year") {
          cell.setAttribute("aria-selected", "false");
        }
        cell.removeAttribute("tabindex");
      }
      removeClass(selectedCells, SELECTED_CELL_CLASS);
      if (this.keyboardInteractionModule && this.keyboardInteractionModule.selectedCells.length > 0) {
        this.keyboardInteractionModule.selectedCells = [];
      }
    };
    Schedule2.prototype.addSelectedClass = function(cells, focusCell, isPreventScroll) {
      if (this.currentView !== "Year") {
        for (var _i = 0, cells_1 = cells; _i < cells_1.length; _i++) {
          var cell = cells_1[_i];
          cell.setAttribute("aria-selected", "true");
        }
      }
      addClass(cells, SELECTED_CELL_CLASS);
      if (focusCell) {
        focusCell.setAttribute("tabindex", "0");
        focusCell.focus({ preventScroll: isPreventScroll || false });
      }
    };
    Schedule2.prototype.selectCell = function(element2) {
      this.removeSelectedClass();
      this.addSelectedClass([element2], element2);
    };
    Schedule2.prototype.getAllDayRow = function() {
      return this.element.querySelector("." + ALLDAY_ROW_CLASS);
    };
    Schedule2.prototype.getContentTable = function() {
      return this.activeView.element.querySelector("." + CONTENT_TABLE_CLASS + " tbody");
    };
    Schedule2.prototype.getTableRows = function() {
      return [].slice.call(this.element.querySelectorAll("." + CONTENT_TABLE_CLASS + " tbody tr:not(." + HIDDEN_CLASS + ")"));
    };
    Schedule2.prototype.getWorkCellElements = function() {
      return [].slice.call(this.element.querySelectorAll("." + WORK_CELLS_CLASS));
    };
    Schedule2.prototype.getIndexOfDate = function(collection, date) {
      return collection.map(Number).indexOf(+date);
    };
    Schedule2.prototype.isAllDayCell = function(td) {
      if (["Month", "TimelineMonth", "TimelineYear", "MonthAgenda"].indexOf(this.currentView) > -1 || td.classList.contains(ALLDAY_CELLS_CLASS) || td.classList.contains(HEADER_CELLS_CLASS) || !this.activeViewOptions.timeScale.enable) {
        return true;
      }
      if (this.activeView.isTimelineView() && this.activeViewOptions.headerRows.length > 0 && this.activeViewOptions.headerRows.slice(-1)[0].option !== "Hour") {
        return true;
      }
      return false;
    };
    Schedule2.prototype.getDateFromElement = function(td) {
      var dateString;
      if (!isNullOrUndefined(td)) {
        dateString = td.getAttribute("data-date");
      }
      if (!isNullOrUndefined(dateString)) {
        var dateInMS = parseInt(dateString, 10);
        var date = new Date(dateInMS);
        return date;
      }
      return void 0;
    };
    Schedule2.prototype.getTargetElement = function(selector, left, top) {
      var element2 = document.elementFromPoint(left, top);
      var targetElement2;
      if (element2) {
        targetElement2 = element2.closest(selector);
      }
      return targetElement2 ? [targetElement2] : null;
    };
    Schedule2.prototype.getCellHeaderTemplate = function() {
      return this.cellHeaderTemplateFn;
    };
    Schedule2.prototype.getDayHeaderTemplate = function() {
      return this.dayHeaderTemplateFn;
    };
    Schedule2.prototype.getMonthHeaderTemplate = function() {
      return this.monthHeaderTemplateFn;
    };
    Schedule2.prototype.getCellTemplate = function() {
      return this.cellTemplateFn;
    };
    Schedule2.prototype.getDateHeaderTemplate = function() {
      return this.dateHeaderTemplateFn;
    };
    Schedule2.prototype.getDateRangeTemplate = function() {
      return this.dateRangeTemplateFn;
    };
    Schedule2.prototype.getMajorSlotTemplate = function() {
      return this.majorSlotTemplateFn;
    };
    Schedule2.prototype.getMinorSlotTemplate = function() {
      return this.minorSlotTemplateFn;
    };
    Schedule2.prototype.getAppointmentTemplate = function() {
      return this.appointmentTemplateFn;
    };
    Schedule2.prototype.getEventTooltipTemplate = function() {
      return this.eventTooltipTemplateFn;
    };
    Schedule2.prototype.getHeaderTooltipTemplate = function() {
      return this.headerTooltipTemplateFn;
    };
    Schedule2.prototype.getEditorTemplate = function() {
      return this.editorTemplateFn;
    };
    Schedule2.prototype.getQuickInfoTemplatesHeader = function() {
      return this.quickInfoTemplatesHeaderFn;
    };
    Schedule2.prototype.getQuickInfoTemplatesContent = function() {
      return this.quickInfoTemplatesContentFn;
    };
    Schedule2.prototype.getQuickInfoTemplatesFooter = function() {
      return this.quickInfoTemplatesFooterFn;
    };
    Schedule2.prototype.getResourceHeaderTemplate = function() {
      return this.resourceHeaderTemplateFn;
    };
    Schedule2.prototype.getHeaderIndentTemplate = function() {
      return this.headerIndentTemplateFn;
    };
    Schedule2.prototype.getCssProperties = function() {
      var cssProps = {
        border: this.enableRtl ? "borderLeftWidth" : "borderRightWidth",
        padding: this.enableRtl ? "paddingLeft" : "paddingRight",
        rtlBorder: this.enableRtl ? "borderRightWidth" : "borderLeftWidth",
        rtlPadding: this.enableRtl ? "paddingRight" : "paddingLeft"
      };
      return cssProps;
    };
    Schedule2.prototype.removeNewEventElement = function() {
      var eventClone = this.element.querySelector("." + NEW_EVENT_CLASS);
      if (!isNullOrUndefined(eventClone)) {
        remove(eventClone);
      }
    };
    Schedule2.prototype.getStartEndTime = function(startEndTime) {
      if (!isNullOrUndefined(startEndTime) && startEndTime !== "") {
        var startEndDate = resetTime(new Date(this.currentTimezoneDate) || this.getCurrentTime());
        var timeString = startEndTime.split(":");
        if (timeString.length === 2) {
          startEndDate.setHours(parseInt(timeString[0], 10), parseInt(timeString[1], 10), 0);
        }
        return startEndDate;
      }
      return null;
    };
    Schedule2.prototype.onDocumentClick = function(args) {
      this.notify(documentClick, { event: args });
    };
    Schedule2.prototype.onScheduleResize = function() {
      if (isNullOrUndefined(this.activeView) || (this.isAdaptive || isMobile()) && document.activeElement && document.activeElement.classList.contains(SUBJECT_CLASS)) {
        return;
      }
      if (this.activeViewOptions.timeScale.enable && this.activeView) {
        this.activeView.highlightCurrentTime();
      }
      if (this.quickPopup) {
        this.quickPopup.onClosePopup();
      }
      if (this.currentView === "Month" || this.currentView !== "Agenda" && this.currentView !== "MonthAgenda" && !this.activeViewOptions.timeScale.enable || this.activeView.isTimelineView()) {
        this.activeView.resetColWidth();
        this.notify(scrollUiUpdate, { cssProperties: this.getCssProperties(), isPreventScrollUpdate: true });
        this.refreshEvents(false);
      } else {
        this.notify(contentReady, {});
      }
    };
    Schedule2.prototype.templateParser = function(template) {
      if (template) {
        try {
          if (document.querySelectorAll(template).length) {
            return compile$1(document.querySelector(template).innerHTML.trim());
          } else {
            return compile$1(template);
          }
        } catch (error) {
          return compile$1(template);
        }
      }
      return void 0;
    };
    Schedule2.prototype.getSelectedCells = function() {
      return [].slice.call(this.element.querySelectorAll("." + SELECTED_CELL_CLASS));
    };
    Schedule2.prototype.getAnnouncementString = function(event, subject) {
      var resourceName;
      if (this.quickPopup && this.activeViewOptions.group.resources.length > 0) {
        var constantText = '"s event - ';
        resourceName = this.quickPopup.getResourceText({ event }, "event") + constantText;
      }
      var recordSubject = subject || (event[this.eventFields.subject] || this.eventSettings.fields.subject.default);
      var skeleton = "full";
      var startDateText = this.globalize.formatDate(event[this.eventFields.startTime], {
        type: "dateTime",
        skeleton,
        calendar: this.getCalendarMode()
      });
      var endDateText = this.globalize.formatDate(event[this.eventFields.endTime], {
        type: "dateTime",
        skeleton,
        calendar: this.getCalendarMode()
      });
      var announcementString = recordSubject + " " + this.localeObj.getConstant("beginFrom") + " " + startDateText + " " + this.localeObj.getConstant("endAt") + " " + endDateText;
      if (resourceName) {
        announcementString = resourceName + " " + announcementString;
      }
      return announcementString;
    };
    Schedule2.prototype.boundaryValidation = function(pageY, pageX) {
      var autoScrollDistance = 30;
      var scrollEdges = { left: false, right: false, top: false, bottom: false };
      var viewBoundaries = this.element.querySelector("." + CONTENT_WRAP_CLASS).getBoundingClientRect();
      if (pageY < viewBoundaries.top + autoScrollDistance + window.pageYOffset && pageY > viewBoundaries.top + window.pageYOffset) {
        scrollEdges.top = true;
      }
      if (pageY > viewBoundaries.bottom - autoScrollDistance + window.pageYOffset && pageY < viewBoundaries.bottom + window.pageYOffset) {
        scrollEdges.bottom = true;
      }
      if (pageX < viewBoundaries.left + autoScrollDistance + window.pageXOffset && pageX > viewBoundaries.left + window.pageXOffset) {
        scrollEdges.left = true;
      }
      if (pageX > viewBoundaries.right - autoScrollDistance + window.pageXOffset && pageX < viewBoundaries.right + window.pageXOffset) {
        scrollEdges.right = true;
      }
      return scrollEdges;
    };
    Schedule2.prototype.getWeekNumberContent = function(dates) {
      var weekNumber;
      if (this.weekRule === "FirstDay") {
        var weekNumberDate = getWeekLastDate(dates.slice(-1)[0], this.firstDayOfWeek);
        weekNumber = this.globalize.formatNumber(getWeekNumber(weekNumberDate));
      } else if (this.weekRule === "FirstFourDayWeek") {
        var weekFirstDate = getWeekFirstDate(dates.slice(-1)[0], this.firstDayOfWeek);
        var weekLastDate = getWeekLastDate(dates.slice(-1)[0], this.firstDayOfWeek);
        var weekMidDate = getWeekMiddleDate(weekFirstDate, weekLastDate);
        weekNumber = this.globalize.formatNumber(getWeekNumber(weekMidDate));
      } else if (this.weekRule === "FirstFullWeek") {
        var weekFirstDate = getWeekFirstDate(dates.slice(-1)[0], this.firstDayOfWeek);
        weekNumber = this.globalize.formatNumber(getWeekNumber(weekFirstDate));
      }
      return weekNumber;
    };
    Schedule2.prototype.renderHeaderIndentTemplate = function(data, td) {
      if (this.activeViewOptions.headerIndentTemplate) {
        var scheduleId = this.element.id + "_";
        var viewName = this.activeViewOptions.headerIndentTemplateName;
        var templateId = scheduleId + viewName + "headerIndentTemplate";
        var indentTemplate = [].slice.call(this.getHeaderIndentTemplate()(data, this, "headerIndentTemplate", templateId, false));
        append2(indentTemplate, td);
      }
    };
    Schedule2.prototype.isSpecificResourceEvents = function() {
      return this.activeViewOptions.group.resources.length > 0 && !this.activeViewOptions.group.allowGroupEdit && !this.rowAutoHeight && !this.virtualScrollModule && this.activeViewOptions.group.byGroupID;
    };
    Schedule2.prototype.unWireEvents = function() {
      EventHandler.remove(window, "resize", this.onScheduleResize);
      EventHandler.remove(window, "orientationchange", this.onScheduleResize);
      EventHandler.remove(document, Browser.touchStartEvent, this.onDocumentClick);
    };
    Schedule2.prototype.getModuleName = function() {
      return "schedule";
    };
    Schedule2.prototype.getPersistData = function() {
      return this.addOnPersist(["currentView", "selectedDate", "scrollTop", "scrollLeft"]);
    };
    Schedule2.prototype.onPropertyChanged = function(newProp, oldProp) {
      if (this.isReact && isNullOrUndefined(this.activeView)) {
        return;
      }
      var state = {
        isRefresh: false,
        isResource: false,
        isDate: false,
        isView: false,
        isLayout: false,
        isDataManager: false
      };
      for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {
        var prop = _a[_i];
        switch (prop) {
          case "views":
            this.setViewOptions();
            if (this.headerModule) {
              this.headerModule.updateItems();
            }
            state.isView = true;
            break;
          case "currentView":
            state.isView = true;
            break;
          case "minDate":
          case "maxDate":
          case "selectedDate":
            state.isDate = true;
            break;
          case "dateFormat":
            this.activeViewOptions = this.getActiveViewOptions();
            if (this.headerModule) {
              this.headerModule.updateDateRange();
            }
            break;
          case "showHeaderBar":
            this.destroyHeaderModule();
            if (newProp.showHeaderBar) {
              this.headerModule = new HeaderRenderer(this);
              this.headerModule.updateDateRange();
            }
            this.notify(scrollUiUpdate, { cssProperties: this.getCssProperties() });
            if (this.activeView.isTimelineView()) {
              this.refreshEvents(false);
            }
            break;
          case "workDays":
            if (JSON.stringify(oldProp.workDays) !== JSON.stringify(newProp.workDays)) {
              state.isLayout = true;
            }
            break;
          case "showWeekend":
          case "startHour":
          case "endHour":
          case "workHours":
          case "readonly":
          case "headerRows":
          case "showWeekNumber":
          case "rowAutoHeight":
            state.isLayout = true;
            break;
          case "locale":
          case "calendarMode":
            this.globalize = new Internationalization(this.locale);
            this.localeObj = new L10n(this.getModuleName(), this.defaultLocale, this.locale);
            this.setCldrTimeFormat();
            this.setCalendarMode();
            state.isRefresh = true;
            break;
          case "firstDayOfWeek":
            this.activeViewOptions.firstDayOfWeek = newProp.firstDayOfWeek;
            if (this.eventWindow) {
              this.eventWindow.refreshRecurrenceEditor();
            }
            state.isLayout = true;
            break;
          case "showTimeIndicator":
            if (this.activeViewOptions.timeScale.enable && this.activeView) {
              this.activeView.highlightCurrentTime();
            }
            break;
          case "cellHeaderTemplate":
            this.activeViewOptions.cellHeaderTemplate = newProp.cellHeaderTemplate;
            this.cellHeaderTemplateFn = this.templateParser(this.activeViewOptions.cellHeaderTemplate);
            state.isLayout = true;
            break;
          case "cellTemplate":
            this.activeViewOptions.cellTemplate = newProp.cellTemplate;
            this.cellTemplateFn = this.templateParser(this.activeViewOptions.cellTemplate);
            state.isLayout = true;
            break;
          case "dateHeaderTemplate":
            this.activeViewOptions.dateHeaderTemplate = newProp.dateHeaderTemplate;
            this.dateHeaderTemplateFn = this.templateParser(this.activeViewOptions.dateHeaderTemplate);
            state.isLayout = true;
            break;
          case "dateRangeTemplate":
            this.activeViewOptions.dateRangeTemplate = newProp.dateRangeTemplate;
            this.dateRangeTemplateFn = this.templateParser(this.activeViewOptions.dateRangeTemplate);
            if (this.headerModule) {
              this.headerModule.updateDateRange();
            }
            break;
          case "dayHeaderTemplate":
            this.activeViewOptions.dayHeaderTemplate = newProp.dayHeaderTemplate;
            this.dayHeaderTemplateFn = this.templateParser(this.activeViewOptions.dayHeaderTemplate);
            state.isLayout = true;
            break;
          case "monthHeaderTemplate":
            this.activeViewOptions.monthHeaderTemplate = newProp.monthHeaderTemplate;
            this.monthHeaderTemplateFn = this.templateParser(this.activeViewOptions.monthHeaderTemplate);
            state.isLayout = true;
            break;
          case "resourceHeaderTemplate":
            this.activeViewOptions.resourceHeaderTemplate = newProp.resourceHeaderTemplate;
            this.resourceHeaderTemplateFn = this.templateParser(this.activeViewOptions.resourceHeaderTemplate);
            state.isLayout = true;
            break;
          case "timezone":
            this.eventBase.timezonePropertyChange(oldProp.timezone);
            this.headerModule.setCalendarTimezone();
            break;
          case "enableRtl":
            this.setRtlClass();
            state.isRefresh = true;
            break;
          default:
            this.extendedPropertyChange(prop, newProp, oldProp, state);
            break;
        }
      }
      this.propertyChangeAction(state);
    };
    Schedule2.prototype.propertyChangeAction = function(state) {
      if (state.isRefresh) {
        this.refresh();
      } else if (state.isResource) {
        this.initializeResources(true);
      } else if (state.isView) {
        this.changeView(this.currentView, null, true);
      } else if (state.isDate) {
        this.changeDate(this.selectedDate);
      } else if (state.isLayout) {
        this.activeCellsData = null;
        this.initializeView(this.currentView);
      } else if (state.isDataManager && this.crudModule) {
        if (this.dragAndDropModule) {
          this.dragAndDropModule.actionObj.action = "";
          removeClass([this.element], EVENT_ACTION_CLASS);
        }
        this.crudModule.refreshDataManager();
      }
    };
    Schedule2.prototype.allDayRowScrollUpdate = function() {
      var dateHeader = this.element.querySelector("." + DATE_HEADER_WRAP_CLASS);
      var allDayRow = this.element.querySelector("." + ALLDAY_ROW_CLASS);
      if (this.height === "auto" || !this.enableAllDayScroll) {
        addClass([dateHeader], ALLDAY_APPOINTMENT_AUTO);
        if (dateHeader.classList.contains(ALLDAY_APPOINTMENT_SCROLL)) {
          removeClass([dateHeader], ALLDAY_APPOINTMENT_SCROLL);
        }
        if (this.uiStateValues.expand) {
          var allDayCells = [].slice.call(this.element.querySelectorAll("." + ALLDAY_CELLS_CLASS));
          allDayCells[0].style.height = allDayRow.style.height ? allDayRow.style.height : allDayCells[1].style.height;
        }
      } else {
        if (dateHeader.classList.contains(ALLDAY_APPOINTMENT_AUTO)) {
          removeClass([dateHeader], ALLDAY_APPOINTMENT_AUTO);
        }
        this.eventBase.allDayExpandScroll(dateHeader);
      }
      if (!this.uiStateValues.expand) {
        allDayRow.style.height = "";
      }
    };
    Schedule2.prototype.extendedPropertyChange = function(prop, newProp, oldProp, state) {
      switch (prop) {
        case "width":
        case "height":
        case "enableAllDayScroll":
          if (["Day", "Week", "WorkWeek"].indexOf(this.currentView) > -1) {
            this.allDayRowScrollUpdate();
          }
          this.notify(uiUpdate, { module: "scroll", properties: { width: newProp.width, height: newProp.height } });
          break;
        case "cssClass":
          if (oldProp.cssClass) {
            removeClass([this.element], oldProp.cssClass.split(" "));
          }
          if (newProp.cssClass) {
            addClass([this.element], newProp.cssClass.split(" "));
          }
          break;
        case "hideEmptyAgendaDays":
        case "agendaDaysCount":
          this.activeViewOptions = this.getActiveViewOptions();
          state.isView = true;
          break;
        case "eventSettings":
          this.onEventSettingsPropertyChanged(newProp.eventSettings, oldProp.eventSettings, state);
          break;
        case "allowKeyboardInteraction":
          if (this.keyboardInteractionModule) {
            this.keyboardInteractionModule.destroy();
            this.keyboardInteractionModule = null;
          }
          if (newProp.allowKeyboardInteraction) {
            this.keyboardInteractionModule = new KeyboardInteraction(this);
          }
          break;
        case "timezoneDataSource":
          if (this.eventWindow) {
            this.eventWindow.refresh();
          }
          break;
        case "editorTemplate":
          if (!isNullOrUndefined(this.editorTemplate)) {
            this.editorTemplateFn = this.templateParser(this.editorTemplate);
          }
          if (this.eventWindow) {
            this.eventWindow.setDialogContent();
          }
          break;
        case "quickInfoTemplates":
          if (this.quickInfoTemplates.header) {
            this.quickInfoTemplatesHeaderFn = this.templateParser(this.quickInfoTemplates.header);
          }
          if (this.quickInfoTemplates.content) {
            this.quickInfoTemplatesContentFn = this.templateParser(this.quickInfoTemplates.content);
          }
          if (this.quickInfoTemplates.footer) {
            this.quickInfoTemplatesFooterFn = this.templateParser(this.quickInfoTemplates.footer);
          }
          break;
        case "group":
          this.onGroupSettingsPropertyChanged(newProp.group, oldProp.group, state);
          break;
        case "resources":
          state.isResource = true;
          break;
        case "timeScale":
          this.activeViewOptions.timeScale.interval = newProp.timeScale.interval || this.activeViewOptions.timeScale.interval;
          this.activeViewOptions.timeScale.slotCount = newProp.timeScale.slotCount || this.activeViewOptions.timeScale.slotCount;
          if (this.eventWindow) {
            this.eventWindow.refreshDateTimePicker();
          }
          state.isLayout = true;
          break;
        case "allowDragAndDrop":
        case "allowResizing":
        case "eventDragArea":
          this.refreshEvents(false);
          break;
        case "weekRule":
          state.isLayout = true;
          break;
        case "firstMonthOfYear":
          this.activeViewOptions.firstMonthOfYear = newProp.firstMonthOfYear;
          this.viewIndex = this.activeView.viewIndex;
          state.isLayout = true;
          break;
        case "monthsCount":
          this.activeViewOptions.monthsCount = newProp.monthsCount;
          this.viewIndex = this.activeView.viewIndex;
          state.isLayout = true;
          break;
        case "timeFormat":
          this.internalTimeFormat = newProp.timeFormat || this.activeViewOptions.timeFormat;
          if (this.eventWindow) {
            this.eventWindow.refreshDateTimePicker();
          }
          state.isLayout = true;
          break;
        case "enableAdaptiveUI":
          if (this.showHeaderBar && this.headerModule) {
            this.destroyHeaderModule();
            this.headerModule = new HeaderRenderer(this);
            this.headerModule.updateDateRange();
          }
          state.isLayout = true;
          break;
        case "headerIndentTemplate":
          this.activeViewOptions.headerIndentTemplate = newProp.headerIndentTemplate;
          this.headerIndentTemplateFn = this.templateParser(this.activeViewOptions.headerIndentTemplate);
          state.isLayout = true;
          break;
      }
    };
    Schedule2.prototype.setRtlClass = function() {
      if (this.enableRtl) {
        addClass([this.element], "e-rtl");
      } else {
        removeClass([this.element], "e-rtl");
      }
    };
    Schedule2.prototype.onGroupSettingsPropertyChanged = function(newProp, oldProp, state) {
      for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {
        var prop = _a[_i];
        if (prop === "headerTooltipTemplate") {
          this.headerTooltipTemplateFn = this.templateParser(newProp.headerTooltipTemplate);
        } else {
          state.isLayout = true;
          if (this.eventWindow) {
            this.eventWindow.refresh();
          }
        }
      }
    };
    Schedule2.prototype.onEventSettingsPropertyChanged = function(newProp, oldProp, state) {
      for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {
        var prop = _a[_i];
        switch (prop) {
          case "dataSource":
          case "query":
          case "fields":
          case "includeFiltersInQuery":
            this.initializeDataModule();
            state.isDataManager = true;
            break;
          case "template":
            this.activeViewOptions.eventTemplate = newProp.template;
            this.appointmentTemplateFn = this.templateParser(this.activeViewOptions.eventTemplate);
            state.isDataManager = true;
            break;
          case "enableTooltip":
            if (this.eventTooltip) {
              this.eventTooltip.destroy();
              this.eventTooltip = null;
            }
            if (newProp.enableTooltip) {
              this.eventTooltip = new EventTooltip(this);
            }
            break;
          case "tooltipTemplate":
            this.eventTooltipTemplateFn = this.templateParser(this.eventSettings.tooltipTemplate);
            break;
          case "resourceColorField":
            if (this.resourceBase) {
              this.resourceBase.setResourceCollection();
            }
            state.isDataManager = true;
            break;
          case "editFollowingEvents":
            if (this.quickPopup) {
              this.quickPopup.refreshQuickDialog();
            }
            break;
          case "allowAdding":
          case "allowEditing":
          case "allowDeleting":
            if (this.showHeaderBar && this.headerModule) {
              this.headerModule.updateAddIcon();
            }
            if (this.eventWindow) {
              this.eventWindow.refresh();
            }
            break;
          case "spannedEventPlacement":
          case "minimumEventDuration":
          case "enableMaxHeight":
          case "enableIndicator":
            this.refreshEvents(false);
            break;
          case "ignoreWhitespace":
            state.isLayout = true;
            break;
        }
      }
    };
    Schedule2.prototype.destroyHeaderModule = function() {
      if (this.headerModule) {
        this.headerModule.destroy();
        this.headerModule = null;
      }
    };
    Schedule2.prototype.destroyPopups = function() {
      if (this.quickPopup) {
        this.quickPopup.destroy();
        this.quickPopup = null;
      }
      if (this.eventWindow) {
        this.eventWindow.destroy();
        this.eventWindow = null;
      }
    };
    Schedule2.prototype.showSpinner = function() {
      showSpinner(this.element);
    };
    Schedule2.prototype.hideSpinner = function() {
      hideSpinner(this.element);
    };
    Schedule2.prototype.setWorkHours = function(dates, start, end, groupIndex) {
      var cells = [];
      cells = this.getWorkHourCells(dates, start, end, groupIndex);
      addClass(cells, WORK_HOURS_CLASS);
    };
    Schedule2.prototype.resetWorkHours = function(dates, start, end, groupIndex) {
      if (dates === void 0) {
        dates = this.activeView.renderDates;
      }
      if (dates && start && end) {
        var cells = this.getWorkHourCells(dates, start, end, groupIndex);
        removeClass(cells, WORK_HOURS_CLASS);
      } else {
        var workHourCells = [].slice.call(this.element.querySelectorAll("." + WORK_HOURS_CLASS));
        removeClass(workHourCells, WORK_HOURS_CLASS);
      }
    };
    Schedule2.prototype.getWorkHourCells = function(dates, start, end, groupIndex) {
      if (["Agenda", "MonthAgenda", "Month", "TimelineMonth"].indexOf(this.currentView) > -1) {
        return [];
      }
      var startHour = this.getStartEndTime(start);
      var endHour = this.getStartEndTime(end);
      var tableEle = this.getContentTable();
      if (isNullOrUndefined(startHour) || isNullOrUndefined(endHour) || !tableEle) {
        return [];
      }
      startHour.setMilliseconds(0);
      endHour.setMilliseconds(0);
      var viewStartHour = this.activeView.getStartHour();
      if (startHour < viewStartHour) {
        startHour = viewStartHour;
      }
      var viewEndHour = this.activeView.getEndHour();
      if (endHour > viewEndHour) {
        endHour = viewEndHour;
      }
      var msMajorInterval = this.activeViewOptions.timeScale.interval * MS_PER_MINUTE;
      var msInterval = msMajorInterval / this.activeViewOptions.timeScale.slotCount;
      var startIndex = Math.round((startHour.getTime() - viewStartHour.getTime()) / msInterval);
      var endIndex = Math.ceil((endHour.getTime() - viewStartHour.getTime()) / msInterval);
      var tempStartIndex = startIndex;
      var tempEndIndex = endIndex;
      var cells = [];
      for (var _i = 0, dates_1 = dates; _i < dates_1.length; _i++) {
        var date = dates_1[_i];
        date = this.getDateTime(date);
        resetTime(date);
        var renderDates = this.activeView.renderDates;
        if (!isNullOrUndefined(groupIndex) && this.resourceBase && !this.activeView.isTimelineView()) {
          renderDates = this.resourceBase.lastResourceLevel[parseInt(groupIndex.toString(), 10)].renderDates;
        }
        var colIndex = this.getIndexOfDate(renderDates, date);
        if (colIndex >= 0) {
          if (this.activeView.isTimelineView()) {
            var slotsPerDay = Math.round((viewEndHour.getTime() - viewStartHour.getTime()) / msInterval);
            startIndex = tempStartIndex + colIndex * slotsPerDay;
            endIndex = tempEndIndex + colIndex * slotsPerDay;
          }
          for (var i = startIndex; i < endIndex; i++) {
            if (this.activeView.isTimelineView()) {
              var rowIndex = !isNullOrUndefined(groupIndex) ? groupIndex : 0;
              cells.push(tableEle.rows[parseInt(rowIndex.toString(), 10)].cells[parseInt(i.toString(), 10)]);
            } else {
              if (!isNullOrUndefined(groupIndex)) {
                var selector = "." + WORK_CELLS_CLASS + '[data-group-index="' + groupIndex + '"]';
                var tds = [].slice.call(tableEle.rows[parseInt(i.toString(), 10)].querySelectorAll(selector));
                cells.push(tds[parseInt(colIndex.toString(), 10)]);
              } else {
                cells.push(tableEle.rows[parseInt(i.toString(), 10)].cells[parseInt(colIndex.toString(), 10)]);
              }
            }
          }
        }
      }
      return cells;
    };
    Schedule2.prototype.getCellDetails = function(tdCol) {
      var td = tdCol instanceof Array ? tdCol : [tdCol];
      var firstTd = getElement(td[0]);
      var lastTd = getElement(td.slice(-1)[0]);
      var startTime = this.getDateFromElement(firstTd);
      var endTime = this.getDateFromElement(lastTd);
      if (isNullOrUndefined(startTime) || isNullOrUndefined(endTime)) {
        return void 0;
      }
      var endDateFromColSpan = this.activeView.isTimelineView() && !isNullOrUndefined(lastTd.getAttribute("colSpan")) && this.headerRows.length > 0;
      var duration = endDateFromColSpan ? parseInt(lastTd.getAttribute("colSpan"), 10) : 1;
      if (!this.activeViewOptions.timeScale.enable || endDateFromColSpan || lastTd.classList.contains(ALLDAY_CELLS_CLASS) || lastTd.classList.contains(HEADER_CELLS_CLASS)) {
        endTime = addDays(new Date(endTime.getTime()), duration);
      } else {
        endTime = this.activeView.getEndDateFromStartDate(endTime);
      }
      var data = {
        startTime,
        endTime,
        isAllDay: this.isAllDayCell(firstTd),
        element: tdCol
      };
      var groupIndex = firstTd.getAttribute("data-group-index");
      if (!isNullOrUndefined(groupIndex)) {
        data.groupIndex = parseInt(groupIndex, 10);
      }
      return data;
    };
    Schedule2.prototype.getSelectedElements = function() {
      if (this.keyboardInteractionModule && this.keyboardInteractionModule.selectedCells.length > 0) {
        return this.keyboardInteractionModule.selectedCells;
      }
      return this.getSelectedCells();
    };
    Schedule2.prototype.getResourceCollections = function() {
      return this.resourceCollection;
    };
    Schedule2.prototype.setResourceCollections = function(resourceCol) {
      this.setProperties({ resources: resourceCol }, false);
    };
    Schedule2.prototype.changeCurrentView = function(viewName, viewIndex) {
      var index = this.getViewIndex(viewName);
      var view = viewName.charAt(0).toLowerCase() + viewName.slice(1);
      var viewOptions = this.viewOptions["" + view];
      if (viewOptions) {
        index = this.viewCollections.indexOf(viewOptions[viewIndex || 0]);
      }
      if (index === -1 || index === this.viewIndex) {
        return;
      }
      this.changeView(viewName, null, null, index);
    };
    Schedule2.prototype.getCurrentViewIndex = function() {
      return this.viewIndex;
    };
    Schedule2.prototype.getResourcesByIndex = function(index) {
      if (this.resourceBase && this.resourceBase.lastResourceLevel) {
        if (index < 0 || index >= this.resourceBase.lastResourceLevel.length) {
          return void 0;
        }
        var data = this.resourceBase.lastResourceLevel[parseInt(index.toString(), 10)];
        var groupData = {};
        this.resourceBase.setResourceValues(groupData, index);
        return { resource: data.resource, resourceData: data.resourceData, groupData };
      }
      return void 0;
    };
    Schedule2.prototype.expandResource = function(resourceId, name) {
      if (this.activeView.isTimelineView() && this.resourceBase && this.resourceCollection.length > 1) {
        this.resourceBase.resourceExpand(resourceId, name, false);
      }
    };
    Schedule2.prototype.collapseResource = function(resourceId, name) {
      if (this.activeView.isTimelineView() && this.resourceBase && this.resourceCollection.length > 1) {
        this.resourceBase.resourceExpand(resourceId, name, true);
      }
    };
    Schedule2.prototype.scrollTo = function(hour, scrollDate) {
      if (this.activeView.scrollToDate && isNullOrUndefined(hour) && scrollDate) {
        this.activeView.scrollToDate(scrollDate);
      } else if (this.activeView.scrollToHour) {
        this.activeView.scrollToHour(hour, scrollDate);
      }
    };
    Schedule2.prototype.scrollToResource = function(resourceId, groupName) {
      if (this.resourceBase && this.resourceBase.lastResourceLevel) {
        this.resourceBase.resourceScroll(resourceId, groupName);
      }
    };
    Schedule2.prototype.exportToICalendar = function(fileName, customData) {
      if (this.iCalendarExportModule) {
        this.iCalendarExportModule.initializeCalendarExport(fileName, customData);
      } else {
        throw Error("Inject ICalendarExport module");
      }
    };
    Schedule2.prototype.importICalendar = function(fileContent) {
      if (this.iCalendarImportModule) {
        this.iCalendarImportModule.initializeCalendarImport(fileContent);
      } else {
        throw Error("Inject ICalendarImport module");
      }
    };
    Schedule2.prototype.addEvent = function(data) {
      this.crudModule.addEvent(data);
    };
    Schedule2.prototype.generateEventOccurrences = function(event, startDate) {
      return this.eventBase ? this.eventBase.generateOccurrence(event, startDate) : [];
    };
    Schedule2.prototype.exportToExcel = function(excelExportOptions) {
      if (this.excelExportModule) {
        this.excelExportModule.initializeExcelExport(excelExportOptions);
      } else {
        throw Error("Inject ExcelExport module");
      }
    };
    Schedule2.prototype.print = function(printOptions) {
      if (this.printModule) {
        this.printModule.print(printOptions);
      } else {
        throw Error("Inject Print module");
      }
    };
    Schedule2.prototype.saveEvent = function(data, currentAction) {
      this.crudModule.saveEvent(data, currentAction);
    };
    Schedule2.prototype.deleteEvent = function(id, currentAction) {
      this.crudModule.deleteEvent(id, currentAction);
    };
    Schedule2.prototype.getEvents = function(startDate, endDate, includeOccurrences) {
      var eventCollections = [];
      if (includeOccurrences) {
        eventCollections = this.eventBase.getProcessedEvents();
      } else {
        eventCollections = this.eventsData;
      }
      if (startDate) {
        startDate = this.getDateTime(startDate);
      }
      if (endDate) {
        endDate = this.getDateTime(endDate);
      }
      eventCollections = this.eventBase.filterEventsByRange(eventCollections, startDate, endDate);
      return eventCollections;
    };
    Schedule2.prototype.getBlockEvents = function(startDate, endDate, includeOccurrences) {
      var eventCollections = [];
      if (includeOccurrences) {
        eventCollections = this.eventBase.getProcessedEvents(this.blockData);
      } else {
        eventCollections = this.blockData;
      }
      if (startDate) {
        startDate = this.getDateTime(startDate);
      }
      if (endDate) {
        endDate = this.getDateTime(endDate);
      }
      eventCollections = this.eventBase.filterEventsByRange(eventCollections, startDate, endDate);
      return eventCollections;
    };
    Schedule2.prototype.getOccurrencesByID = function(eventID) {
      return this.eventBase.getOccurrencesByID(eventID);
    };
    Schedule2.prototype.getOccurrencesByRange = function(startTime, endTime) {
      startTime = this.getDateTime(startTime);
      endTime = this.getDateTime(endTime);
      return this.eventBase.getOccurrencesByRange(startTime, endTime);
    };
    Schedule2.prototype.getCurrentViewDates = function() {
      return this.activeView ? this.activeView.renderDates : [];
    };
    Schedule2.prototype.setRecurrenceEditor = function(recurrenceEditor) {
      this.eventWindow.setRecurrenceEditor(recurrenceEditor);
    };
    Schedule2.prototype.getEventMaxID = function() {
      return this.eventBase.getEventMaxID();
    };
    Schedule2.prototype.getDeletedOccurrences = function(recurrenceData) {
      return this.eventBase.getDeletedOccurrences(recurrenceData);
    };
    Schedule2.prototype.getCurrentViewEvents = function() {
      return this.eventsProcessed;
    };
    Schedule2.prototype.refreshEvents = function(isRemoteRefresh) {
      if (isRemoteRefresh === void 0) {
        isRemoteRefresh = true;
      }
      if (isRemoteRefresh) {
        if (this.dragAndDropModule) {
          this.dragAndDropModule.actionObj.action = "";
          removeClass([this.element], EVENT_ACTION_CLASS);
        }
        this.crudModule.refreshDataManager();
      } else {
        if (this.uiStateValues) {
          this.uiStateValues.isPreventTimezone = true;
        }
        if (this.crudModule) {
          this.crudModule.refreshProcessedData();
        }
        if (this.uiStateValues) {
          this.uiStateValues.isPreventTimezone = false;
        }
      }
    };
    Schedule2.prototype.refreshTemplates = function(templateName) {
      if (templateName) {
        this.resetTemplates([templateName]);
      } else {
        this.resetTemplates();
      }
      switch (templateName) {
        case "eventTemplate":
          this.appointmentTemplateFn = this.templateParser(this.activeViewOptions.eventTemplate);
          this.refreshEvents(false);
          break;
        case "dateHeaderTemplate":
          this.dateHeaderTemplateFn = this.templateParser(this.activeViewOptions.dateHeaderTemplate);
          this.activeView.refreshHeader();
          break;
        case "dateRangeTemplate":
          this.dateRangeTemplateFn = this.templateParser(this.activeViewOptions.dateRangeTemplate);
          if (this.headerModule) {
            this.headerModule.refresh();
          }
          break;
        case "resourceHeaderTemplate":
          this.resourceHeaderTemplateFn = this.templateParser(this.activeViewOptions.resourceHeaderTemplate);
          if (this.activeView.isTimelineView()) {
            this.activeView.refreshResourceHeader();
          } else {
            this.activeView.refreshHeader();
          }
          break;
        case "quickInfoTemplates":
          if (this.quickPopup) {
            this.quickPopup.destroy();
            this.quickPopup = null;
          }
          this.quickPopup = new QuickPopups(this);
          this.quickInfoTemplatesHeaderFn = this.templateParser(this.quickInfoTemplates.header);
          this.quickInfoTemplatesContentFn = this.templateParser(this.quickInfoTemplates.content);
          this.quickInfoTemplatesFooterFn = this.templateParser(this.quickInfoTemplates.footer);
          break;
        case "editorTemplate":
          if (this.eventWindow) {
            this.eventWindow.destroy();
            this.eventWindow = null;
          }
          this.eventWindow = new EventWindow(this);
          this.editorTemplateFn = this.templateParser(this.editorTemplate);
          break;
        case "tooltipTemplate":
        case "headerTooltipTemplate":
          if (this.eventTooltip) {
            this.eventTooltip.destroy();
            this.eventTooltip = null;
          }
          this.eventTooltip = new EventTooltip(this);
          this.eventTooltipTemplateFn = this.templateParser(this.eventSettings.tooltipTemplate);
          this.headerTooltipTemplateFn = this.templateParser(this.activeViewOptions.group.headerTooltipTemplate);
          break;
        default:
          this.initializeView(this.currentView);
          break;
      }
    };
    Schedule2.prototype.refreshLayout = function() {
      this.onScheduleResize();
      if (this.headerModule) {
        this.headerModule.refresh();
      }
      if (this.eventWindow) {
        this.eventWindow.refresh();
      }
    };
    Schedule2.prototype.getEventDetails = function(element2) {
      element2 = getElement(element2);
      var guid = element2.getAttribute("data-guid");
      if (guid) {
        return this.eventBase.getEventByGuid(guid);
      }
      return {};
    };
    Schedule2.prototype.isSlotAvailable = function(startTime, endTime, groupIndex) {
      var _this = this;
      var eventStart;
      var eventEnd;
      var eventObj = this.activeEventData.event;
      if (startTime instanceof Date || typeof startTime === "string") {
        eventStart = startTime;
        eventEnd = endTime;
      } else {
        eventObj = startTime;
        eventStart = startTime[this.eventFields.startTime];
        eventEnd = startTime[this.eventFields.endTime];
        if (this.resourceBase) {
          groupIndex = this.eventBase.getGroupIndexFromEvent(startTime);
        }
      }
      if (isNullOrUndefined(eventStart) || isNullOrUndefined(eventEnd)) {
        return true;
      }
      eventStart = this.getDateTime(eventStart);
      eventEnd = this.getDateTime(eventEnd);
      var eventCollection = this.eventBase.filterEvents(eventStart, eventEnd);
      if (!isNullOrUndefined(groupIndex) && this.resourceBase && this.resourceBase.lastResourceLevel.length > 0) {
        eventCollection = this.eventBase.filterEventsByResource(this.resourceBase.lastResourceLevel[parseInt(groupIndex.toString(), 10)], eventCollection);
      }
      if (eventObj) {
        if (eventObj.Guid) {
          eventCollection = eventCollection.filter(function(event) {
            return event.Guid !== eventObj.Guid;
          });
        } else {
          eventCollection = eventCollection.filter(function(event) {
            return event[_this.eventFields.id] !== eventObj[_this.eventFields.id];
          });
        }
      }
      return eventCollection.length > 0 ? false : true;
    };
    Schedule2.prototype.openEditor = function(data, action, isEventData, repeatType) {
      if (action === "Add" && !isEventData) {
        data.startTime = this.getDateTime(data.startTime);
        data.endTime = this.getDateTime(data.endTime);
        if (!isNullOrUndefined(data.element)) {
          data.element = getElement(data.element);
        }
      } else {
        data[this.eventFields.startTime] = this.getDateTime(data[this.eventFields.startTime]);
        data[this.eventFields.endTime] = this.getDateTime(data[this.eventFields.endTime]);
      }
      this.currentAction = action;
      if (action !== "Add") {
        this.activeEventData.event = data;
      }
      this.eventWindow.openEditor(data, action, isEventData, repeatType);
    };
    Schedule2.prototype.closeEditor = function() {
      if (this.eventWindow) {
        this.eventWindow.dialogClose();
      }
    };
    Schedule2.prototype.openQuickInfoPopup = function(data) {
      var _this = this;
      if (this.currentView === "Year" || isNullOrUndefined(data)) {
        return;
      }
      if (isNullOrUndefined(data[this.eventFields.id])) {
        if (this.currentView === "Agenda" || this.currentView === "MonthAgenda" || isNullOrUndefined(this.activeView)) {
          return;
        }
        var cellData = {
          startTime: this.activeCellsData.startTime = this.getDateTime(data[this.eventFields.startTime]),
          endTime: this.activeCellsData.endTime = this.getDateTime(data[this.eventFields.endTime]),
          isAllDay: this.activeCellsData.isAllDay = !isNullOrUndefined(data[this.eventFields.isAllDay]) ? data[this.eventFields.isAllDay] : false
        };
        var startTime = this.activeView.getAdjustedDate(new Date(cellData.startTime));
        if (startTime) {
          var query = "." + WORK_CELLS_CLASS + '[data-date="' + startTime.getTime() + '"]';
          if (this.activeViewOptions.group.resources.length > 0 && !this.uiStateValues.isGroupAdaptive && this.resourceBase && this.eventBase) {
            cellData.groupIndex = this.eventBase.getGroupIndexFromEvent(data);
            query = "." + WORK_CELLS_CLASS + '[data-date="' + startTime.getTime() + '"][data-group-index="' + cellData.groupIndex + '"]';
          }
          var workCell = this.element.querySelector(query);
          if (workCell) {
            workCell.focus();
            cellData.element = workCell;
            this.notify(cellClick, cellData);
          }
        }
      } else {
        var app = this.getCurrentViewEvents().filter(function(item) {
          return data[_this.eventFields.id] === item[_this.eventFields.id];
        });
        if (app.length <= 0) {
          return;
        }
        var selectEvent = app[0];
        if (data[this.eventFields.recurrenceRule]) {
          var occurence = app.filter(function(x) {
            return x[_this.eventFields.startTime].getTime() === data[_this.eventFields.startTime].getTime();
          });
          if (occurence.length > 0) {
            selectEvent = occurence[0];
          }
        }
        var element2 = this.element.querySelector('div[data-guid="' + selectEvent.Guid + '"]');
        if (element2) {
          this.eventBase.removeSelectedAppointmentClass();
          this.eventBase.addSelectedAppointments([element2], false);
          this.activeEventData = { event: selectEvent, element: element2 };
          if (this.currentView === "Agenda" || this.currentView === "MonthAgenda") {
            addClass([this.activeEventData.element], AGENDA_SELECTED_CELL);
          }
          this.notify(eventClick, this.activeEventData);
        }
      }
    };
    Schedule2.prototype.closeQuickInfoPopup = function() {
      if (this.quickPopup) {
        this.quickPopup.quickPopupHide(true);
      }
    };
    Schedule2.prototype.closeTooltip = function() {
      if (this.eventTooltip) {
        this.eventTooltip.close();
      }
    };
    Schedule2.prototype.selectResourceByIndex = function(groupIndex) {
      if (this.resourceBase && this.uiStateValues.isGroupAdaptive) {
        this.resourceBase.selectResourceByIndex(groupIndex);
      }
    };
    Schedule2.prototype.getIndexFromResourceId = function(id, name) {
      if (this.resourceBase) {
        return this.resourceBase.getIndexFromResourceId(id, name);
      }
      return null;
    };
    Schedule2.prototype.addResource = function(resources, name, index) {
      this.resourceBase.addResource(resources, name, index);
    };
    Schedule2.prototype.removeResource = function(resourceId, name) {
      this.resourceBase.removeResource(resourceId, name);
    };
    Schedule2.prototype.destroy = function() {
      if (this.eventTooltip) {
        this.eventTooltip.destroy();
        this.eventTooltip = null;
      }
      this.destroyPopups();
      this.hideSpinner();
      this.unWireEvents();
      this.destroyHeaderModule();
      if (this.eventBase) {
        this.eventBase.destroy();
        this.eventBase = null;
      }
      if (this.workCellAction) {
        this.workCellAction.destroy();
        this.workCellAction = null;
      }
      if (this.inlineModule) {
        this.inlineModule.destroy();
        this.inlineModule = null;
      }
      if (this.keyboardInteractionModule) {
        this.keyboardInteractionModule.destroy();
        this.keyboardInteractionModule = null;
      }
      if (this.scrollModule) {
        this.scrollModule.destroy();
        this.scrollModule = null;
      }
      if (this.printModule) {
        this.printModule.destroy();
      }
      if (this.activeView) {
        this.resetTemplates();
        this.activeView.removeEventListener();
        this.activeView.destroy();
        this.activeView = null;
      }
      if (this.scheduleTouchModule) {
        this.scheduleTouchModule.destroy();
        this.scheduleTouchModule = null;
      }
      if (this.crudModule) {
        this.crudModule.destroy();
        this.crudModule = null;
      }
      if (this.dataModule) {
        this.dataModule.destroy();
        this.dataModule = null;
      }
      _super.prototype.destroy.call(this);
      var modules = [
        "dayModule",
        "weekModule",
        "workWeekModule",
        "monthModule",
        "monthAgendaModule",
        "yearModule",
        "agendaModule",
        "timelineViewsModule",
        "timelineMonthModule",
        "timelineYearModule",
        "resizeModule",
        "dragAndDropModule",
        "excelExportModule",
        "printModule",
        "iCalendarExportModule",
        "iCalendarImportModule",
        "tzModule",
        "eventsData",
        "eventsProcessed",
        "blockData",
        "blockProcessed",
        "uiStateValues",
        "viewCollections",
        "viewOptions",
        "defaultLocale",
        "localeObj",
        "selectedElements",
        "resourceCollection",
        "editorTitles",
        "eventFields",
        "activeViewOptions",
        "activeEventData",
        "activeCellsData",
        "renderModule"
      ];
      for (var _i = 0, modules_1 = modules; _i < modules_1.length; _i++) {
        var module = modules_1[_i];
        this["" + module] = null;
      }
      removeChildren(this.element);
      var removeClasses = [ROOT, RTL, DEVICE_CLASS, MULTI_DRAG];
      if (this.cssClass) {
        removeClasses = removeClasses.concat(this.cssClass.split(" "));
      }
      removeClass([this.element], removeClasses);
    };
    __decorate([
      Property("auto")
    ], Schedule2.prototype, "width", void 0);
    __decorate([
      Property("auto")
    ], Schedule2.prototype, "height", void 0);
    __decorate([
      Property(true)
    ], Schedule2.prototype, "showHeaderBar", void 0);
    __decorate([
      Property(true)
    ], Schedule2.prototype, "showTimeIndicator", void 0);
    __decorate([
      Property(true)
    ], Schedule2.prototype, "allowSwiping", void 0);
    __decorate([
      Property("Week")
    ], Schedule2.prototype, "currentView", void 0);
    __decorate([
      Property(["Day", "Week", "WorkWeek", "Month", "Agenda"])
    ], Schedule2.prototype, "views", void 0);
    __decorate([
      Property(/* @__PURE__ */ new Date())
    ], Schedule2.prototype, "selectedDate", void 0);
    __decorate([
      Property(new Date(1900, 0, 1))
    ], Schedule2.prototype, "minDate", void 0);
    __decorate([
      Property(new Date(2099, 11, 31))
    ], Schedule2.prototype, "maxDate", void 0);
    __decorate([
      Property()
    ], Schedule2.prototype, "dateFormat", void 0);
    __decorate([
      Property("Gregorian")
    ], Schedule2.prototype, "calendarMode", void 0);
    __decorate([
      Property(true)
    ], Schedule2.prototype, "showWeekend", void 0);
    __decorate([
      Property(0)
    ], Schedule2.prototype, "firstDayOfWeek", void 0);
    __decorate([
      Property("FirstDay")
    ], Schedule2.prototype, "weekRule", void 0);
    __decorate([
      Property([1, 2, 3, 4, 5])
    ], Schedule2.prototype, "workDays", void 0);
    __decorate([
      Property(12)
    ], Schedule2.prototype, "monthsCount", void 0);
    __decorate([
      Property("00:00")
    ], Schedule2.prototype, "startHour", void 0);
    __decorate([
      Property("24:00")
    ], Schedule2.prototype, "endHour", void 0);
    __decorate([
      Property(null)
    ], Schedule2.prototype, "timeFormat", void 0);
    __decorate([
      Property(true)
    ], Schedule2.prototype, "enableHtmlSanitizer", void 0);
    __decorate([
      Property(false)
    ], Schedule2.prototype, "enableAllDayScroll", void 0);
    __decorate([
      Property(false)
    ], Schedule2.prototype, "enableAdaptiveUI", void 0);
    __decorate([
      Property(true)
    ], Schedule2.prototype, "allowResizing", void 0);
    __decorate([
      Complex({}, WorkHours)
    ], Schedule2.prototype, "workHours", void 0);
    __decorate([
      Complex({}, TimeScale)
    ], Schedule2.prototype, "timeScale", void 0);
    __decorate([
      Property(true)
    ], Schedule2.prototype, "allowKeyboardInteraction", void 0);
    __decorate([
      Property(true)
    ], Schedule2.prototype, "allowDragAndDrop", void 0);
    __decorate([
      Property()
    ], Schedule2.prototype, "dateHeaderTemplate", void 0);
    __decorate([
      Property()
    ], Schedule2.prototype, "dateRangeTemplate", void 0);
    __decorate([
      Property()
    ], Schedule2.prototype, "cellHeaderTemplate", void 0);
    __decorate([
      Property()
    ], Schedule2.prototype, "dayHeaderTemplate", void 0);
    __decorate([
      Property()
    ], Schedule2.prototype, "monthHeaderTemplate", void 0);
    __decorate([
      Property()
    ], Schedule2.prototype, "cellTemplate", void 0);
    __decorate([
      Property(false)
    ], Schedule2.prototype, "readonly", void 0);
    __decorate([
      Property(true)
    ], Schedule2.prototype, "showQuickInfo", void 0);
    __decorate([
      Property(false)
    ], Schedule2.prototype, "allowInline", void 0);
    __decorate([
      Property(true)
    ], Schedule2.prototype, "allowMultiCellSelection", void 0);
    __decorate([
      Property(true)
    ], Schedule2.prototype, "allowMultiRowSelection", void 0);
    __decorate([
      Property(false)
    ], Schedule2.prototype, "quickInfoOnSelectionEnd", void 0);
    __decorate([
      Property(false)
    ], Schedule2.prototype, "showWeekNumber", void 0);
    __decorate([
      Property(false)
    ], Schedule2.prototype, "rowAutoHeight", void 0);
    __decorate([
      Property(false)
    ], Schedule2.prototype, "allowMultiDrag", void 0);
    __decorate([
      Property(0)
    ], Schedule2.prototype, "firstMonthOfYear", void 0);
    __decorate([
      Property()
    ], Schedule2.prototype, "editorTemplate", void 0);
    __decorate([
      Complex({}, QuickInfoTemplates)
    ], Schedule2.prototype, "quickInfoTemplates", void 0);
    __decorate([
      Property(7)
    ], Schedule2.prototype, "agendaDaysCount", void 0);
    __decorate([
      Property(true)
    ], Schedule2.prototype, "hideEmptyAgendaDays", void 0);
    __decorate([
      Property(true)
    ], Schedule2.prototype, "enableRecurrenceValidation", void 0);
    __decorate([
      Property()
    ], Schedule2.prototype, "timezone", void 0);
    __decorate([
      Complex({}, EventSettings)
    ], Schedule2.prototype, "eventSettings", void 0);
    __decorate([
      Property(timezoneData)
    ], Schedule2.prototype, "timezoneDataSource", void 0);
    __decorate([
      Property()
    ], Schedule2.prototype, "resourceHeaderTemplate", void 0);
    __decorate([
      Property()
    ], Schedule2.prototype, "headerIndentTemplate", void 0);
    __decorate([
      Complex({}, Group)
    ], Schedule2.prototype, "group", void 0);
    __decorate([
      Collection([], Resources)
    ], Schedule2.prototype, "resources", void 0);
    __decorate([
      Collection([], HeaderRows)
    ], Schedule2.prototype, "headerRows", void 0);
    __decorate([
      Property()
    ], Schedule2.prototype, "cssClass", void 0);
    __decorate([
      Property()
    ], Schedule2.prototype, "eventDragArea", void 0);
    __decorate([
      Event$1()
    ], Schedule2.prototype, "created", void 0);
    __decorate([
      Event$1()
    ], Schedule2.prototype, "destroyed", void 0);
    __decorate([
      Event$1()
    ], Schedule2.prototype, "cellClick", void 0);
    __decorate([
      Event$1()
    ], Schedule2.prototype, "cellDoubleClick", void 0);
    __decorate([
      Event$1()
    ], Schedule2.prototype, "moreEventsClick", void 0);
    __decorate([
      Event$1()
    ], Schedule2.prototype, "hover", void 0);
    __decorate([
      Event$1()
    ], Schedule2.prototype, "select", void 0);
    __decorate([
      Event$1()
    ], Schedule2.prototype, "actionBegin", void 0);
    __decorate([
      Event$1()
    ], Schedule2.prototype, "actionComplete", void 0);
    __decorate([
      Event$1()
    ], Schedule2.prototype, "actionFailure", void 0);
    __decorate([
      Event$1()
    ], Schedule2.prototype, "navigating", void 0);
    __decorate([
      Event$1()
    ], Schedule2.prototype, "renderCell", void 0);
    __decorate([
      Event$1()
    ], Schedule2.prototype, "eventClick", void 0);
    __decorate([
      Event$1()
    ], Schedule2.prototype, "eventRendered", void 0);
    __decorate([
      Event$1()
    ], Schedule2.prototype, "dataBinding", void 0);
    __decorate([
      Event$1()
    ], Schedule2.prototype, "popupOpen", void 0);
    __decorate([
      Event$1()
    ], Schedule2.prototype, "popupClose", void 0);
    __decorate([
      Event$1()
    ], Schedule2.prototype, "dragStart", void 0);
    __decorate([
      Event$1()
    ], Schedule2.prototype, "drag", void 0);
    __decorate([
      Event$1()
    ], Schedule2.prototype, "dragStop", void 0);
    __decorate([
      Event$1()
    ], Schedule2.prototype, "resizeStart", void 0);
    __decorate([
      Event$1()
    ], Schedule2.prototype, "resizing", void 0);
    __decorate([
      Event$1()
    ], Schedule2.prototype, "resizeStop", void 0);
    __decorate([
      Event$1()
    ], Schedule2.prototype, "dataBound", void 0);
    Schedule2 = __decorate([
      NotifyPropertyChanges
    ], Schedule2);
    return Schedule2;
  }(Component)
);
var ActionBase = (
  /** @class */
  function() {
    function ActionBase2(parent) {
      this.daysVariation = 0;
      this.parent = parent;
      this.actionObj = {
        X: 0,
        Y: 0,
        groupIndex: 0,
        cellWidth: 0,
        cellHeight: 0,
        slotInterval: 0,
        interval: 0,
        actionIndex: 0,
        cloneElement: [],
        originalElement: [],
        action: null,
        isAllDay: null,
        excludeSelectors: null,
        index: 0,
        navigationInterval: null,
        scrollInterval: null
      };
      this.scrollArgs = { element: null, width: 0, height: 0 };
      this.resizeEdges = { left: false, right: false, top: false, bottom: false };
      this.scrollEdges = { left: false, right: false, top: false, bottom: false };
    }
    ActionBase2.prototype.getChangedData = function(multiData) {
      var _this = this;
      var eventObj = extend({}, this.actionObj.event, null, true);
      eventObj[this.parent.eventFields.startTime] = this.actionObj.start;
      eventObj[this.parent.eventFields.endTime] = this.actionObj.end;
      if (!isNullOrUndefined(this.actionObj.isAllDay)) {
        eventObj[this.parent.eventFields.isAllDay] = this.actionObj.isAllDay;
      }
      if (this.parent.activeViewOptions.group.resources.length > 0) {
        var originalElement = this.getOriginalElement(this.actionObj.element);
        if (originalElement) {
          var indexCol_1 = originalElement.map(function(element2) {
            return parseInt(element2.getAttribute("data-group-index"), 10);
          });
          if (indexCol_1.indexOf(this.actionObj.groupIndex) === -1 || !isNullOrUndefined(multiData) && multiData.length > 0) {
            var cloneIndex_1 = parseInt(this.actionObj.clone.getAttribute("data-group-index"), 10);
            indexCol_1 = indexCol_1.filter(function(index) {
              return index !== cloneIndex_1;
            });
            indexCol_1.push(this.actionObj.groupIndex);
            if (multiData && multiData.length > 0) {
              multiData.forEach(function(data) {
                _this.parent.resourceBase.getResourceData(data, _this.actionObj.groupIndex, indexCol_1);
              });
            } else {
              this.parent.resourceBase.getResourceData(eventObj, this.actionObj.groupIndex, indexCol_1);
            }
          }
        }
      }
      return eventObj;
    };
    ActionBase2.prototype.saveChangedData = function(eventArgs, isMultiSelect) {
      if (isMultiSelect === void 0) {
        isMultiSelect = false;
      }
      this.parent.activeEventData.event = this.actionObj.event;
      this.parent.currentAction = "Save";
      var currentAction;
      var eventsCollection = [eventArgs.data];
      if (isMultiSelect) {
        eventsCollection = eventArgs.selectedData;
      }
      for (var _i = 0, eventsCollection_1 = eventsCollection; _i < eventsCollection_1.length; _i++) {
        var eventObj = eventsCollection_1[_i];
        var isSameResource = this.parent.activeViewOptions.group.resources.length > 0 ? parseInt(this.actionObj.element.getAttribute("data-group-index"), 10) === this.actionObj.groupIndex : true;
        if (+eventObj[this.parent.eventFields.startTime] === +this.actionObj.event[this.parent.eventFields.startTime] && +eventObj[this.parent.eventFields.endTime] === +this.actionObj.event[this.parent.eventFields.endTime] && isSameResource) {
          this.parent.crudModule.crudObj.isCrudAction = false;
          return;
        }
        if (eventObj[this.parent.eventFields.recurrenceRule]) {
          var eveId = eventObj[this.parent.eventFields.recurrenceID] || eventObj[this.parent.eventFields.id];
          if (eventObj[this.parent.eventFields.id] === eventObj[this.parent.eventFields.recurrenceID]) {
            eventObj[this.parent.eventFields.id] = this.parent.eventBase.getEventMaxID();
            currentAction = "EditOccurrence";
          }
          if (this.parent.enableRecurrenceValidation && this.parent.eventWindow.editOccurrenceValidation(eveId, eventObj, this.actionObj.event)) {
            return;
          }
        } else {
          currentAction = null;
        }
        if (eventObj[this.parent.eventFields.startTimezone] || eventObj[this.parent.eventFields.endTimezone]) {
          this.parent.eventBase.timezoneConvert(eventObj);
        }
        this.parent.crudModule.saveEvent(eventObj, currentAction);
      }
    };
    ActionBase2.prototype.calculateIntervalTime = function(date) {
      var intervalTime = /* @__PURE__ */ new Date(+date);
      intervalTime.setMinutes(Math.floor(intervalTime.getMinutes() / this.actionObj.interval) * this.actionObj.interval);
      return intervalTime;
    };
    ActionBase2.prototype.getContentAreaDimension = function() {
      var viewElement = this.parent.element.querySelector("." + CONTENT_WRAP_CLASS);
      var trElement = [].slice.call(viewElement.querySelector("tr").children);
      if (!this.parent.activeView.isTimelineView() && this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.isAdaptive && !this.parent.enableAdaptiveUI && !this.parent.virtualScrollModule) {
        trElement = this.getResourceElements(trElement);
      }
      var leftOffset = trElement[0].getBoundingClientRect();
      var rightOffset = trElement.slice(-1)[0].getBoundingClientRect();
      var viewDimension = {
        bottom: viewElement.scrollHeight - 5,
        left: this.parent.enableRtl ? rightOffset.left : leftOffset.left,
        right: this.parent.enableRtl ? leftOffset.right : rightOffset.right,
        top: 0,
        leftOffset: this.parent.enableRtl ? rightOffset.right : leftOffset.right,
        rightOffset: this.parent.enableRtl ? leftOffset.left : rightOffset.left
      };
      return viewDimension;
    };
    ActionBase2.prototype.getIndex = function(index) {
      var contentElements = [].slice.call(this.parent.getContentTable().querySelector("tr").children);
      var indexes = { minIndex: 0, maxIndex: contentElements.length - 1 };
      if (this.actionObj.action === "resize" && this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive && !this.parent.activeView.isTimelineView()) {
        var groupElements = this.getResourceElements(contentElements);
        indexes.minIndex = groupElements[0].cellIndex;
        indexes.maxIndex = groupElements.slice(-1)[0].cellIndex;
      }
      if (index < indexes.minIndex) {
        index = indexes.minIndex;
      }
      if (index > indexes.maxIndex) {
        index = indexes.maxIndex;
      }
      return index;
    };
    ActionBase2.prototype.updateTimePosition = function(date, multiData) {
      var index = 0;
      for (var _i = 0, _a = this.actionObj.cloneElement; _i < _a.length; _i++) {
        var cloneElement = _a[_i];
        var timeElement = cloneElement.querySelector("." + APPOINTMENT_TIME);
        if (timeElement) {
          var startTime = this.actionObj.start;
          var endTime = this.actionObj.end;
          if (multiData && multiData.length > 0) {
            startTime = multiData[parseInt(index.toString(), 10)][this.parent.eventFields.startTime];
            endTime = multiData[parseInt(index.toString(), 10)][this.parent.eventFields.endTime];
          }
          timeElement.innerHTML = this.parent.getTimeString(startTime) + " - " + this.parent.getTimeString(endTime);
        }
        index++;
      }
      if (!this.parent.activeViewOptions.timeScale.enable || !this.parent.isAdaptive || this.parent.currentView === "Month" || this.parent.currentView === "TimelineMonth") {
        return;
      }
      var timeIndicator = this.parent.element.querySelector("." + CLONE_TIME_INDICATOR_CLASS);
      if (!timeIndicator) {
        timeIndicator = createElement("div", { className: CLONE_TIME_INDICATOR_CLASS });
        var wrapperClass = this.parent.activeView.isTimelineView() ? DATE_HEADER_WRAP_CLASS : TIME_CELLS_WRAP_CLASS;
        this.parent.element.querySelector("." + wrapperClass).appendChild(timeIndicator);
      }
      timeIndicator.innerHTML = this.parent.getTimeString(date);
      var offsetValue = 0;
      if (this.parent.activeView.isTimelineView()) {
        if (this.parent.enableRtl) {
          var rightValue = parseInt(this.actionObj.clone.style.right, 10);
          offsetValue = this.actionObj.action === "drag" || this.resizeEdges.left ? rightValue + this.actionObj.clone.offsetWidth : rightValue;
          timeIndicator.style.right = formatUnit(offsetValue);
        } else {
          var leftValue = parseInt(this.actionObj.clone.style.left, 10);
          offsetValue = this.actionObj.action === "drag" || this.resizeEdges.left ? leftValue : leftValue + this.actionObj.clone.offsetWidth;
          timeIndicator.style.left = formatUnit(offsetValue);
        }
      } else {
        offsetValue = this.actionObj.action === "drag" || this.resizeEdges.top ? this.actionObj.clone.offsetTop : this.actionObj.clone.offsetTop + this.actionObj.clone.offsetHeight;
        timeIndicator.style.top = formatUnit(offsetValue);
      }
    };
    ActionBase2.prototype.getResourceElements = function(table) {
      var _this = this;
      return table.filter(function(element2) {
        return parseInt(element2.getAttribute("data-group-index"), 10) === _this.actionObj.groupIndex;
      });
    };
    ActionBase2.prototype.getOriginalElement = function(element2) {
      var originalElement;
      var guid = element2.getAttribute("data-guid");
      var isMorePopup = element2.offsetParent && element2.offsetParent.classList.contains(MORE_EVENT_POPUP_CLASS);
      if (isMorePopup || this.parent.activeView.isTimelineView() || this.actionObj.action !== "resize" && this.parent.virtualScrollModule) {
        originalElement = [].slice.call(this.parent.element.querySelectorAll('[data-guid="' + guid + '"]'));
      } else {
        var tr = closest(element2, "tr");
        if (tr) {
          originalElement = [].slice.call(tr.querySelectorAll('[data-guid="' + guid + '"]'));
        }
      }
      return originalElement;
    };
    ActionBase2.prototype.createCloneElement = function(element2) {
      var cloneWrapper = createElement("div", { innerHTML: element2.outerHTML });
      var cloneElement = cloneWrapper.children[0];
      var cloneClassLists = [CLONE_ELEMENT_CLASS];
      cloneClassLists.push(this.actionObj.action === "drag" ? DRAG_CLONE_CLASS : RESIZE_CLONE_CLASS);
      if (this.parent.currentView === "Month" || this.parent.currentView === "TimelineMonth") {
        cloneClassLists.push(MONTH_CLONE_ELEMENT_CLASS);
      }
      addClass([cloneElement], cloneClassLists);
      addClass([element2], EVENT_ACTION_CLASS);
      if (!isNullOrUndefined(element2.parentElement)) {
        element2.parentElement.appendChild(cloneElement);
      }
      cloneElement.style.width = formatUnit(cloneElement.offsetWidth - 2);
      var dragElement = document.querySelector(this.parent.eventDragArea);
      if (this.parent.eventDragArea && this.actionObj.action === "drag" && dragElement) {
        dragElement.appendChild(cloneElement);
      }
      setStyleAttribute(cloneElement, { border: "0px" });
      return cloneElement;
    };
    ActionBase2.prototype.removeCloneElementClasses = function() {
      var elements = this.actionObj.originalElement;
      if (this.parent.currentView === "Month" || this.parent.currentView === "TimelineYear" || this.parent.currentView === "Day" || this.parent.currentView === "Week" || this.parent.currentView === "WorkWeek") {
        elements = [].slice.call(this.parent.element.querySelectorAll("." + EVENT_ACTION_CLASS));
      }
      removeClass(elements, EVENT_ACTION_CLASS);
    };
    ActionBase2.prototype.removeCloneElement = function() {
      this.actionObj.originalElement = [];
      var dynamicEle = [].slice.call(this.parent.element.querySelectorAll(".e-dynamic-clone"));
      for (var _i = 0, dynamicEle_1 = dynamicEle; _i < dynamicEle_1.length; _i++) {
        var cloneEle = dynamicEle_1[_i];
        remove(cloneEle);
      }
      for (var _a = 0, _b = this.actionObj.cloneElement; _a < _b.length; _a++) {
        var cloneElement = _b[_a];
        if (!isNullOrUndefined(cloneElement.parentNode)) {
          remove(cloneElement);
        }
      }
      this.actionObj.cloneElement = [];
      var timeIndicator = this.parent.element.querySelector("." + CLONE_TIME_INDICATOR_CLASS);
      if (timeIndicator) {
        remove(timeIndicator);
      }
    };
    ActionBase2.prototype.getCursorElement = function(e) {
      var pages = this.parent.eventBase.getPageCoordinates(e);
      return document.elementFromPoint(pages.clientX, pages.clientY);
    };
    ActionBase2.prototype.autoScroll = function() {
      var parent = this.parent.element.querySelector("." + CONTENT_WRAP_CLASS);
      var yIsScrollable = parent.offsetHeight <= parent.scrollHeight;
      var xIsScrollable = parent.offsetWidth <= parent.scrollWidth;
      var yInBounds = yIsScrollable && parent.scrollTop >= 0 && parent.scrollTop + parent.offsetHeight <= parent.scrollHeight;
      var xInBounds = xIsScrollable && parent.scrollLeft >= 0 && parent.scrollLeft + parent.offsetWidth <= parent.scrollWidth;
      if (this.actionObj.action === "resize" && this.scrollEdges.right && parent.scrollLeft + parent.offsetWidth > parent.scrollWidth) {
        var tdCollections = [].slice.call(this.parent.getContentTable().querySelector("tr").children).length - 1;
        var cellIndex = Math.ceil((this.actionObj.clone.offsetLeft + this.actionObj.clone.offsetWidth) / this.actionObj.cellWidth);
        xInBounds = cellIndex === tdCollections;
      }
      if (yInBounds && (this.scrollEdges.top || this.scrollEdges.bottom)) {
        parent.scrollTop += this.scrollEdges.top ? -this.actionObj.scroll.scrollBy : this.actionObj.scroll.scrollBy;
        if (this.actionObj.action === "resize") {
          if (parent.scrollHeight !== parent.offsetHeight + parent.scrollTop && parent.scrollTop > 0) {
            this.actionObj.Y += this.scrollEdges.top ? this.actionObj.scroll.scrollBy : -this.actionObj.scroll.scrollBy;
          }
        }
      }
      if (xInBounds && (this.scrollEdges.left || this.scrollEdges.right)) {
        parent.scrollLeft += this.scrollEdges.left ? -this.actionObj.scroll.scrollBy : this.actionObj.scroll.scrollBy;
        if (this.actionObj.action === "resize") {
          if (parent.scrollWidth !== parent.offsetWidth + parent.scrollLeft && parent.scrollLeft > 0) {
            this.actionObj.X += this.scrollEdges.left ? this.actionObj.scroll.scrollBy : -this.actionObj.scroll.scrollBy;
          }
        }
      }
    };
    ActionBase2.prototype.autoScrollValidation = function() {
      if (!this.actionObj.scroll.enable) {
        return false;
      }
      var res = this.parent.boundaryValidation(this.actionObj.pageY, this.actionObj.pageX);
      this.scrollEdges = res;
      return res.bottom || res.top || res.left || res.right;
    };
    ActionBase2.prototype.actionClass = function(type) {
      if (type === "addClass") {
        addClass([this.parent.element], EVENT_ACTION_CLASS);
      } else {
        removeClass([this.parent.element], EVENT_ACTION_CLASS);
      }
    };
    ActionBase2.prototype.updateScrollPosition = function(e) {
      var _this = this;
      this.scrollEventArgs = e;
      if (this.actionObj.scroll.enable && isNullOrUndefined(this.actionObj.scrollInterval)) {
        this.actionObj.scrollInterval = window.setInterval(function() {
          if (_this.autoScrollValidation() && !_this.actionObj.clone.classList.contains(ALLDAY_APPOINTMENT_CLASS)) {
            if (_this.parent.activeView.isTimelineView() && _this.parent.activeViewOptions.group.resources.length > 0 && _this.actionObj.groupIndex < 0) {
              return;
            }
            _this.autoScroll();
            if (_this.actionObj.action === "drag") {
              _this.parent.dragAndDropModule.updateDraggingDateTime(_this.scrollEventArgs);
            } else {
              _this.parent.resizeModule.updateResizingDirection(_this.scrollEventArgs);
            }
          }
        }, this.actionObj.scroll.timeDelay);
      }
    };
    ActionBase2.prototype.updateOriginalElement = function(cloneElement) {
      var query = '[data-id="' + cloneElement.getAttribute("data-id") + '"]';
      if (this.parent.activeViewOptions.group.resources.length > 0) {
        query = query.concat('[data-group-index = "' + cloneElement.getAttribute("data-group-index") + '"]');
      }
      var elements = [].slice.call(this.parent.element.querySelectorAll(query));
      addClass(elements, EVENT_ACTION_CLASS);
      var eventWrappers = [].slice.call(this.parent.element.querySelectorAll("." + CLONE_ELEMENT_CLASS));
      removeClass(eventWrappers, EVENT_ACTION_CLASS);
    };
    ActionBase2.prototype.getUpdatedEvent = function(startTime, endTime, eventObj) {
      var event = JSON.parse(JSON.stringify(eventObj));
      event[this.parent.eventFields.startTime] = startTime;
      event[this.parent.eventFields.endTime] = endTime;
      return event;
    };
    ActionBase2.prototype.dynamicYearlyEventsRendering = function(event, isResize) {
      if (isResize === void 0) {
        isResize = false;
      }
      var appWidth = this.actionObj.cellWidth - 7;
      if (isResize && (this.resizeEdges.left || this.resizeEdges.right)) {
        appWidth = this.actionObj.cellWidth * event.count;
      }
      if (!isResize && (this.parent.activeViewOptions.orientation === "Horizontal" && this.parent.activeViewOptions.group.resources.length === 0)) {
        var eventObj = this.yearEvent.isSpannedEvent(event, event[this.parent.eventFields.startTime]);
        if (eventObj[this.parent.eventFields.startTime].getTime() === eventObj[this.parent.eventFields.endTime].getTime()) {
          eventObj.isSpanned.count = 1;
        }
        appWidth = eventObj.isSpanned.count * this.actionObj.cellWidth;
      }
      if (!isResize && this.parent.activeViewOptions.orientation === "Vertical" && this.parent.activeViewOptions.group.resources.length !== 0) {
        var eventObj = this.yearEvent.isSpannedEvent(event, event[this.parent.eventFields.startTime]);
        appWidth = eventObj.isSpanned.count * this.actionObj.cellWidth;
      }
      var appointmentElement = this.createAppointmentElement(this.actionObj.groupIndex, event[this.parent.eventFields.subject]);
      appointmentElement.setAttribute("drag", "true");
      addClass([appointmentElement], CLONE_ELEMENT_CLASS);
      setStyleAttribute(appointmentElement, {
        "width": appWidth + "px",
        "border": "0px",
        "pointer-events": "none",
        "position": "absolute",
        "overflow": "hidden",
        "padding": "3px"
      });
      if (this.actionObj.clone.style.backgroundColor !== "") {
        setStyleAttribute(appointmentElement, { "backgroundColor": this.actionObj.clone.style.backgroundColor });
      }
      var date = resetTime(event[this.parent.eventFields.startTime]).getTime();
      var query = "." + WORK_CELLS_CLASS + '[data-date="' + date + '"]';
      if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {
        query = "." + WORK_CELLS_CLASS + '[data-date="' + date + '"][data-group-index="' + this.actionObj.groupIndex + '"]';
      }
      var cellTd = this.parent.element.querySelector(query);
      if (isNullOrUndefined(cellTd)) {
        return;
      }
      if (isResize) {
        var dateHeader = cellTd.querySelector("." + DATE_HEADER_CLASS);
        var appHeight = this.actionObj.cellHeight * event.count - (dateHeader ? dateHeader.offsetHeight : 0) - 7;
        if (this.resizeEdges.right || this.resizeEdges.left) {
          appHeight = parseInt(this.actionObj.clone.style.height, 10);
        }
        setStyleAttribute(appointmentElement, { "height": appHeight + "px" });
      }
      this.renderDynamicElement(cellTd, appointmentElement, true);
      this.actionObj.cloneElement.push(appointmentElement);
    };
    ActionBase2.prototype.renderDynamicElement = function(cellTd, element2, isAppointment) {
      if (cellTd.querySelector("." + APPOINTMENT_WRAPPER_CLASS)) {
        cellTd.querySelector("." + APPOINTMENT_WRAPPER_CLASS).appendChild(element2);
      } else {
        var wrapper = createElement("div", { className: APPOINTMENT_WRAPPER_CLASS });
        wrapper.appendChild(element2);
        cellTd.appendChild(wrapper);
      }
    };
    ActionBase2.prototype.createAppointmentElement = function(resIndex, innerText) {
      var appointmentWrapper = createElement("div", {
        className: APPOINTMENT_CLASS,
        innerHTML: innerText
      });
      if (this.parent.activeViewOptions.group.resources.length > 0) {
        appointmentWrapper.setAttribute("data-group-index", resIndex.toString());
      }
      return appointmentWrapper;
    };
    ActionBase2.prototype.dynamicEventsRendering = function(event) {
      var _this = this;
      var dateRender = this.parent.activeView.renderDates;
      var workCells = [].slice.call(this.parent.element.querySelectorAll("." + WORK_CELLS_CLASS));
      var workDays = this.parent.activeViewOptions.workDays;
      var groupOrder;
      if (this.parent.activeViewOptions.group.resources.length > 0) {
        var renderedResource = this.parent.virtualScrollModule && this.parent.virtualScrollModule.isHorizontalScroll ? this.parent.resourceBase.renderedResources : this.parent.resourceBase.lastResourceLevel;
        var resources = renderedResource.filter(function(res) {
          return res.groupIndex === _this.actionObj.groupIndex;
        });
        dateRender = resources[0].renderDates;
        var elementSelector = "." + WORK_CELLS_CLASS + '[data-group-index="' + this.actionObj.groupIndex + '"]';
        workCells = [].slice.call(this.parent.element.querySelectorAll(elementSelector));
        workDays = resources[0].workDays;
        groupOrder = resources[0].groupOrder;
      }
      this.monthEvent.dateRender = dateRender;
      this.monthEvent.getSlotDates(workDays);
      if (this.resizeEdges.left || this.resizeEdges.right) {
        var eventWrappers = [].slice.call(this.parent.element.querySelectorAll("." + CLONE_ELEMENT_CLASS));
        for (var _i = 0, eventWrappers_1 = eventWrappers; _i < eventWrappers_1.length; _i++) {
          var wrapper = eventWrappers_1[_i];
          remove(wrapper);
        }
      }
      var spannedEvents = this.monthEvent.splitEvent(event, dateRender);
      for (var _a = 0, spannedEvents_1 = spannedEvents; _a < spannedEvents_1.length; _a++) {
        var event_1 = spannedEvents_1[_a];
        var day = this.parent.getIndexOfDate(dateRender, resetTime(event_1[this.monthEvent.fields.startTime]));
        var diffInDays = event_1.data.count;
        var appWidth = diffInDays * this.actionObj.cellWidth - 7;
        var appointmentElement = this.monthEvent.createAppointmentElement(event_1, this.actionObj.groupIndex, true);
        appointmentElement.setAttribute("drag", "true");
        addClass([appointmentElement], CLONE_ELEMENT_CLASS);
        this.monthEvent.applyResourceColor(appointmentElement, event_1, "backgroundColor", groupOrder);
        setStyleAttribute(appointmentElement, { "width": appWidth + "px", "border": "0px", "pointer-events": "none" });
        var cellTd = workCells[parseInt(day.toString(), 10)];
        if (cellTd && isNullOrUndefined(this.parent.eventDragArea)) {
          this.monthEvent.renderElement(cellTd, appointmentElement, true);
          this.actionObj.cloneElement.push(appointmentElement);
        }
      }
    };
    ActionBase2.prototype.destroy = function() {
      if (!this.parent || this.parent && this.parent.isDestroyed) {
        return;
      }
      this.actionObj = {};
      this.scrollArgs = {};
      this.resizeEdges = { left: false, right: false, top: false, bottom: false };
      this.scrollEdges = { left: false, right: false, top: false, bottom: false };
    };
    return ActionBase2;
  }()
);
var __extends$6 = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var Resize = (
  /** @class */
  function(_super) {
    __extends$6(Resize2, _super);
    function Resize2() {
      return _super !== null && _super.apply(this, arguments) || this;
    }
    Resize2.prototype.wireResizeEvent = function(element2) {
      var resizeElement = [].slice.call(element2.querySelectorAll("." + EVENT_RESIZE_CLASS));
      for (var _i = 0, resizeElement_1 = resizeElement; _i < resizeElement_1.length; _i++) {
        var element_1 = resizeElement_1[_i];
        EventHandler.add(element_1, Browser.touchStartEvent, this.resizeStart, this);
      }
    };
    Resize2.prototype.resizeHelper = function() {
      if (this.parent.activeViewOptions.group.resources.length > 0 && this.parent.activeViewOptions.group.allowGroupEdit) {
        for (var i = 0, len = this.actionObj.originalElement.length; i < len; i++) {
          var cloneElement = this.createCloneElement(this.actionObj.originalElement[parseInt(i.toString(), 10)]);
          this.actionObj.cloneElement[parseInt(i.toString(), 10)] = cloneElement;
          if (this.actionObj.element === this.actionObj.originalElement[parseInt(i.toString(), 10)]) {
            this.actionObj.clone = cloneElement;
          }
        }
      } else {
        if (this.actionObj.element) {
          this.actionObj.clone = this.createCloneElement(this.actionObj.element);
        }
        this.actionObj.cloneElement = [this.actionObj.clone];
        this.actionObj.originalElement = [this.actionObj.element];
      }
    };
    Resize2.prototype.resizeStart = function(e) {
      var _this = this;
      this.actionObj.action = "resize";
      this.actionObj.slotInterval = this.parent.activeViewOptions.timeScale.interval / this.parent.activeViewOptions.timeScale.slotCount;
      this.actionObj.interval = this.actionObj.slotInterval;
      var resizeTarget = closest(e.target, "." + EVENT_RESIZE_CLASS);
      this.actionObj.element = closest(resizeTarget, "." + APPOINTMENT_CLASS);
      this.actionObj.event = this.parent.eventBase.getEventByGuid(this.actionObj.element.getAttribute("data-guid"));
      var eventObj = extend({}, this.actionObj.event, null, true);
      var resizeArgs = {
        cancel: false,
        data: eventObj,
        element: this.actionObj.element,
        event: e,
        interval: this.actionObj.interval,
        scroll: { enable: true, scrollBy: 30, timeDelay: 100 }
      };
      this.parent.trigger(resizeStart, resizeArgs, function(resizeEventArgs) {
        if (resizeEventArgs.cancel) {
          return;
        }
        _this.actionClass("addClass");
        _this.parent.uiStateValues.action = true;
        _this.resizeEdges = {
          left: resizeTarget.classList.contains(LEFT_RESIZE_HANDLER),
          right: resizeTarget.classList.contains(RIGHT_RESIZE_HANDLER),
          top: resizeTarget.classList.contains(TOP_RESIZE_HANDLER),
          bottom: resizeTarget.classList.contains(BOTTOM_RESIZE_HANDLER)
        };
        _this.actionObj.groupIndex = _this.parent.uiStateValues.isGroupAdaptive ? _this.parent.uiStateValues.groupIndex : 0;
        var workCell = _this.parent.element.querySelector("." + WORK_CELLS_CLASS).getBoundingClientRect();
        _this.actionObj.cellWidth = workCell.width;
        _this.actionObj.cellHeight = workCell.height;
        var hRows = _this.parent.activeViewOptions.headerRows.map(function(row) {
          return row.option;
        });
        if (_this.parent.activeView.isTimelineView() && hRows.length > 0 && ["Date", "Hour"].indexOf(hRows.slice(-1)[0]) < 0) {
          var tr = _this.parent.getContentTable().querySelector("tr");
          var noOfDays = 0;
          var tdCollections = [].slice.call(tr.children);
          for (var _i = 0, tdCollections_1 = tdCollections; _i < tdCollections_1.length; _i++) {
            var td = tdCollections_1[_i];
            noOfDays += parseInt(td.getAttribute("colspan"), 10);
          }
          var trRect = tr.getBoundingClientRect();
          _this.actionObj.cellWidth = trRect.width / noOfDays;
          _this.actionObj.cellHeight = trRect.height;
        }
        var pages = _this.parent.eventBase.getPageCoordinates(e);
        _this.actionObj.X = pages.pageX;
        _this.actionObj.Y = pages.pageY;
        _this.actionObj.groupIndex = parseInt(_this.actionObj.element.getAttribute("data-group-index") || "0", 10);
        _this.actionObj.interval = resizeEventArgs.interval;
        _this.actionObj.scroll = resizeEventArgs.scroll;
        _this.actionObj.start = new Date(eventObj[_this.parent.eventFields.startTime].getTime());
        _this.actionObj.end = new Date(eventObj[_this.parent.eventFields.endTime].getTime());
        _this.actionObj.originalElement = _this.getOriginalElement(_this.actionObj.element);
        if (_this.parent.currentView === "Month") {
          _this.daysVariation = -1;
          _this.monthEvent = new MonthEvent(_this.parent);
        }
        var viewElement = _this.parent.element.querySelector("." + CONTENT_WRAP_CLASS);
        _this.scrollArgs = { element: viewElement, width: viewElement.scrollWidth, height: viewElement.scrollHeight };
        EventHandler.add(document, Browser.touchMoveEvent, _this.resizing, _this);
        EventHandler.add(document, Browser.touchEndEvent, _this.resizeStop, _this);
      });
    };
    Resize2.prototype.resizing = function(e) {
      if (this.parent.quickPopup) {
        this.parent.quickPopup.quickPopupHide();
      }
      if (this.parent.element.querySelectorAll("." + RESIZE_CLONE_CLASS).length === 0) {
        this.resizeHelper();
      }
      if (!isNullOrUndefined(e.target) && e.target.classList.contains(DISABLE_DATES)) {
        return;
      }
      var pages = this.parent.eventBase.getPageCoordinates(e);
      if (this.parent.currentView === "Month" || this.parent.currentView === "TimelineYear") {
        var doc2 = document.documentElement;
        var left = (window.pageXOffset || doc2.scrollLeft) - (doc2.clientLeft || 0);
        var top_1 = (window.pageYOffset || doc2.scrollTop) - (doc2.clientTop || 0);
        this.actionObj.pageX = pages.pageX - left;
        this.actionObj.pageY = pages.pageY - top_1;
      } else {
        this.actionObj.pageX = pages.pageX;
        this.actionObj.pageY = pages.pageY;
      }
      this.updateScrollPosition(e);
      this.updateResizingDirection(e);
      var eventObj = extend({}, this.actionObj.event, null, true);
      var resizeArgs = {
        cancel: false,
        data: eventObj,
        element: this.actionObj.element,
        event: e,
        startTime: this.actionObj.start,
        endTime: this.actionObj.end
      };
      if (this.parent.group.resources.length > 0) {
        resizeArgs.groupIndex = this.actionObj.groupIndex;
      }
      this.parent.trigger(resizing, resizeArgs);
    };
    Resize2.prototype.updateResizingDirection = function(e) {
      if (this.parent.currentView === "Month" || this.parent.currentView === "TimelineYear") {
        this.monthResizing();
        return;
      }
      var resizeValidation = this.resizeValidation(e);
      if (this.resizeEdges.left) {
        if (resizeValidation) {
          var leftStyles = this.getLeftRightStyles(e, true);
          if (parseInt(leftStyles.width, 10) < 1) {
            return;
          }
          for (var _i = 0, _a = this.actionObj.cloneElement; _i < _a.length; _i++) {
            var cloneElement = _a[_i];
            setStyleAttribute(cloneElement, leftStyles);
            addClass([cloneElement], LEFT_RESIZE_HANDLER);
          }
        }
        this.horizontalResizing(!this.parent.enableRtl);
      }
      if (this.resizeEdges.right) {
        if (resizeValidation) {
          var rightStyles = this.getLeftRightStyles(e, false);
          if (parseInt(rightStyles.width, 10) < 1) {
            return;
          }
          for (var _b = 0, _c = this.actionObj.cloneElement; _b < _c.length; _b++) {
            var cloneElement = _c[_b];
            setStyleAttribute(cloneElement, rightStyles);
            addClass([cloneElement], RIGHT_RESIZE_HANDLER);
          }
        }
        this.horizontalResizing(this.parent.enableRtl);
      }
      if (this.resizeEdges.top) {
        if (resizeValidation) {
          var topStyles = this.getTopBottomStyles(e, true);
          if (parseInt(topStyles.height, 10) < 1) {
            return;
          }
          for (var _d = 0, _e = this.actionObj.cloneElement; _d < _e.length; _d++) {
            var cloneElement = _e[_d];
            setStyleAttribute(cloneElement, topStyles);
            addClass([cloneElement], TOP_RESIZE_HANDLER);
          }
        }
        this.verticalResizing(true);
      }
      if (this.resizeEdges.bottom) {
        if (resizeValidation) {
          var bottomStyles = this.getTopBottomStyles(e, false);
          if (parseInt(bottomStyles.height, 10) < 1) {
            return;
          }
          for (var _f = 0, _g = this.actionObj.cloneElement; _f < _g.length; _f++) {
            var cloneElement = _g[_f];
            setStyleAttribute(cloneElement, bottomStyles);
            addClass([cloneElement], BOTTOM_RESIZE_HANDLER);
          }
        }
        this.verticalResizing(false);
      }
    };
    Resize2.prototype.monthResizing = function() {
      this.removeCloneElement();
      if (isNullOrUndefined(this.actionObj.pageX) || isNullOrUndefined(this.actionObj.pageY)) {
        return;
      }
      var td = document.elementFromPoint(this.actionObj.pageX, this.actionObj.pageY);
      if (isNullOrUndefined(td)) {
        return;
      }
      var resizeTime = this.parent.getDateFromElement(td);
      var isSameCell = this.parent.activeViewOptions.group.resources.length > 0 ? parseInt(td.getAttribute("data-group-index"), 10) === this.actionObj.groupIndex : true;
      var startTime = new Date(this.actionObj.event[this.parent.eventFields.startTime].getTime());
      var endTime = new Date(this.actionObj.event[this.parent.eventFields.endTime].getTime());
      if (!this.parent.enableRtl && this.resizeEdges.left || this.parent.enableRtl && this.resizeEdges.right || this.resizeEdges.top) {
        startTime = resizeTime;
      } else if (!this.parent.enableRtl && this.resizeEdges.right || this.parent.enableRtl && this.resizeEdges.left || this.resizeEdges.bottom) {
        endTime = addDays(resizeTime, 1);
      }
      if (isSameCell && startTime < endTime) {
        this.actionObj.start = startTime;
        this.actionObj.end = endTime;
        var event_1 = this.getUpdatedEvent(this.actionObj.start, this.actionObj.end, this.actionObj.event);
        if (this.parent.currentView === "TimelineYear") {
          this.yearEventsRendering(event_1);
        } else {
          this.dynamicEventsRendering(event_1);
        }
        this.updateOriginalElement(this.actionObj.clone);
      }
    };
    Resize2.prototype.yearEventsRendering = function(event) {
      var eventWrappers = [].slice.call(this.parent.element.querySelectorAll("." + CLONE_ELEMENT_CLASS));
      for (var _i = 0, eventWrappers_1 = eventWrappers; _i < eventWrappers_1.length; _i++) {
        var wrapper = eventWrappers_1[_i];
        remove(wrapper);
      }
      var endDate = new Date(event[this.parent.eventFields.endTime]);
      var monthDiff = 0;
      if (this.parent.activeViewOptions.group.resources.length === 0) {
        monthDiff = this.getMonthDiff(event[this.parent.eventFields.startTime], addDays(endDate, -1));
      }
      for (var i = 0; i <= monthDiff; i++) {
        var eventObj = void 0;
        if (this.parent.activeViewOptions.group.resources.length === 0) {
          eventObj = this.getEventCount(event, this.actionObj.start.getMonth() + i);
        } else {
          eventObj = extend({}, event, null, true);
          endDate = this.resizeEdges.left || this.resizeEdges.right ? addDays(endDate, -1) : endDate;
          eventObj.count = this.getMonthDiff(event[this.parent.eventFields.startTime], endDate) + 1;
        }
        this.dynamicYearlyEventsRendering(eventObj, true);
      }
    };
    Resize2.prototype.getMonthDiff = function(startDate, endDate) {
      var months;
      months = (endDate.getFullYear() - startDate.getFullYear()) * 12;
      months -= startDate.getMonth();
      months += endDate.getMonth();
      return months <= 0 ? 0 : months;
    };
    Resize2.prototype.getEventCount = function(eventObj, month2) {
      var eventData = extend({}, eventObj, null, true);
      var eventStart = eventData[this.parent.eventFields.startTime];
      var eventEnd = eventData[this.parent.eventFields.endTime];
      var monthStart = new Date(this.parent.selectedDate.getFullYear(), month2, 1);
      var monthEnd = addDays(new Date(this.parent.selectedDate.getFullYear(), month2 + 1, 0), 1);
      var count = 1;
      if (eventStart.getTime() < monthStart.getTime()) {
        eventData[this.parent.eventFields.startTime] = monthStart;
      }
      if (eventEnd.getTime() > monthEnd.getTime()) {
        eventData[this.parent.eventFields.endTime] = monthEnd;
      }
      if (this.parent.activeViewOptions.group.resources.length === 0) {
        count = Math.ceil((eventData[this.parent.eventFields.endTime].getTime() - eventData[this.parent.eventFields.startTime].getTime()) / MS_PER_DAY);
      }
      eventData.count = count;
      return eventData;
    };
    Resize2.prototype.resizeStop = function(e) {
      var _this = this;
      EventHandler.remove(document, Browser.touchMoveEvent, this.resizing);
      EventHandler.remove(document, Browser.touchEndEvent, this.resizeStop);
      clearInterval(this.actionObj.scrollInterval);
      this.actionObj.scrollInterval = null;
      this.removeCloneElementClasses();
      this.removeCloneElement();
      this.actionClass("removeClass");
      this.parent.uiStateValues.action = false;
      var resizeArgs = { cancel: false, data: this.getChangedData(), element: this.actionObj.element, event: e };
      this.parent.trigger(resizeStop, resizeArgs, function(resizeEventArgs) {
        if (resizeEventArgs.cancel) {
          return;
        }
        if (_this.parent.isSpecificResourceEvents()) {
          _this.parent.crudModule.crudObj.sourceEvent = [_this.parent.resourceBase.lastResourceLevel[parseInt(resizeEventArgs.element.getAttribute("data-group-index"), 10)]];
          _this.parent.crudModule.crudObj.targetEvent = _this.parent.crudModule.crudObj.sourceEvent;
          _this.parent.crudModule.crudObj.isCrudAction = true;
        }
        _this.saveChangedData(resizeEventArgs);
      });
    };
    Resize2.prototype.verticalResizing = function(isTop) {
      var offsetValue = this.actionObj.clone.offsetTop;
      if (!isTop) {
        offsetValue += this.actionObj.clone.offsetHeight;
      }
      var minutes = offsetValue / this.actionObj.cellHeight * this.actionObj.slotInterval;
      var element2 = this.actionObj.clone.offsetParent;
      if (isNullOrUndefined(element2)) {
        return;
      }
      var resizeTime = resetTime(this.parent.getDateFromElement(element2));
      resizeTime.setHours(this.parent.activeView.getStartHour().getHours());
      resizeTime.setMinutes(minutes + this.parent.activeView.getStartHour().getMinutes());
      if (isTop) {
        this.actionObj.start = this.calculateIntervalTime(resizeTime);
      } else {
        this.actionObj.end = this.calculateIntervalTime(resizeTime);
      }
      this.updateTimePosition(resizeTime);
    };
    Resize2.prototype.horizontalResizing = function(isLeft) {
      var eventStart = new Date(this.actionObj.event[this.parent.eventFields.startTime].getTime());
      var eventEnd = new Date(this.actionObj.event[this.parent.eventFields.endTime].getTime());
      var resizeTime;
      var isDateHeader = false;
      var headerName = this.parent.currentView;
      var isTimeViews = ["TimelineDay", "TimelineWeek", "TimelineWorkWeek"].indexOf(this.parent.currentView) > -1;
      var isTimelineMonth = this.parent.currentView === "TimelineMonth";
      var isWithoutScale = isTimelineMonth || isTimeViews && !this.parent.activeViewOptions.timeScale.enable;
      if (this.parent.activeView.isTimelineView()) {
        var tr = this.parent.getContentTable().querySelector("tr");
        if (this.parent.activeViewOptions.headerRows.length > 0) {
          var rows = this.parent.activeViewOptions.headerRows.map(function(row) {
            return row.option;
          });
          headerName = rows.slice(-1)[0];
          if (isTimelineMonth && headerName === "Hour") {
            headerName = rows.slice(-2)[0] || "Month";
          }
        }
        resizeTime = isLeft ? eventStart : eventEnd;
        var cellIndex = 0;
        var tdCollections = [].slice.call(tr.children);
        var isLastCell = false;
        var pixelsPerMinute = this.actionObj.cellWidth / (this.parent.activeViewOptions.timeScale.interval / this.parent.activeViewOptions.timeScale.slotCount);
        var offset = parseFloat(this.parent.enableRtl ? this.actionObj.clone.style.right : this.actionObj.clone.style.left);
        offset = Math.round(offset / pixelsPerMinute) * pixelsPerMinute;
        if (["Year", "Month", "Week", "Date"].indexOf(headerName) !== -1) {
          var noOfDays = 0;
          for (var _i = 0, tdCollections_2 = tdCollections; _i < tdCollections_2.length; _i++) {
            var td = tdCollections_2[_i];
            noOfDays += parseInt(td.getAttribute("colspan"), 10);
          }
          var offsetValue = this.parent.enableRtl ? parseInt(this.actionObj.clone.style.right, 10) : parseInt(this.actionObj.clone.style.left, 10);
          offsetValue = Math.round(offsetValue / this.actionObj.cellWidth) * this.actionObj.cellWidth;
          if (!isLeft) {
            offsetValue += this.actionObj.clone.getBoundingClientRect().width - this.actionObj.cellWidth;
          }
          cellIndex = Math.floor(offsetValue / Math.floor(tr.getBoundingClientRect().width / noOfDays));
          isDateHeader = isTimeViews && headerName === "Date";
          cellIndex = isLeft ? cellIndex : isTimelineMonth ? cellIndex + 1 : cellIndex;
          isLastCell = cellIndex === tdCollections.length;
          cellIndex = cellIndex < 0 ? 0 : cellIndex >= noOfDays ? noOfDays - 1 : cellIndex;
        } else {
          var cellWidth = this.actionObj.cellWidth;
          cellIndex = isLeft ? Math.floor(offset / this.actionObj.cellWidth) : Math.ceil((offset + (this.actionObj.clone.getBoundingClientRect().width - cellWidth)) / this.actionObj.cellWidth);
          if (this.parent.enableRtl) {
            var cellOffsetWidth = 0;
            if (headerName === "TimelineMonth" || !this.parent.activeViewOptions.timeScale.enable && !isTimelineMonth) {
              cellOffsetWidth = this.actionObj.cellWidth;
            }
            var offsetWidth = Math.floor(offset / this.actionObj.cellWidth) * this.actionObj.cellWidth + (isLeft ? 0 : this.actionObj.clone.getBoundingClientRect().width - cellOffsetWidth);
            cellIndex = Math.floor(offsetWidth / this.actionObj.cellWidth);
          }
          isLastCell = cellIndex === tdCollections.length;
          cellIndex = this.getIndex(cellIndex);
        }
        var resizeDate = void 0;
        if (["Year", "Month", "Week", "Date"].indexOf(headerName) !== -1) {
          resizeDate = new Date(this.parent.activeView.renderDates[parseInt(cellIndex.toString(), 10)].getTime());
        } else {
          resizeDate = this.parent.getDateFromElement(tr.children[parseInt(cellIndex.toString(), 10)]);
        }
        if (["TimelineMonth", "Year", "Month", "Week", "Date"].indexOf(headerName) !== -1 || !this.parent.activeViewOptions.timeScale.enable) {
          resizeTime = new Date(resizeDate.setHours(resizeTime.getHours(), resizeTime.getMinutes(), resizeTime.getSeconds()));
        } else {
          if (!isLeft) {
            offset += this.actionObj.clone.getBoundingClientRect().width;
          }
          var spanMinutes = Math.ceil(this.actionObj.slotInterval / this.actionObj.cellWidth * (offset - Math.floor(offset / this.actionObj.cellWidth) * this.actionObj.cellWidth));
          spanMinutes = isLastCell || !isLeft && spanMinutes === 0 ? this.actionObj.slotInterval : spanMinutes;
          resizeTime = new Date(resizeDate.getTime());
          resizeTime.setMinutes(resizeTime.getMinutes() + spanMinutes);
          this.updateTimePosition(resizeTime);
        }
      } else {
        var cloneIndex = closest(this.actionObj.clone, "td").cellIndex;
        var originalWidth2 = Math.ceil((isLeft ? this.actionObj.element.getBoundingClientRect().width : 0) / this.actionObj.cellWidth) * this.actionObj.cellWidth;
        var noOfDays = Math.ceil((this.actionObj.clone.getBoundingClientRect().width - originalWidth2) / this.actionObj.cellWidth);
        var tr = closest(this.actionObj.clone, "tr");
        var dayIndex2 = isLeft ? cloneIndex - noOfDays : cloneIndex + noOfDays - 1;
        dayIndex2 = this.getIndex(dayIndex2);
        resizeTime = this.parent.getDateFromElement(tr.children[parseInt(dayIndex2.toString(), 10)]);
        if (isLeft) {
          resizeTime.setHours(eventStart.getHours(), eventStart.getMinutes(), eventStart.getSeconds());
        } else {
          resizeTime.setHours(eventEnd.getHours(), eventEnd.getMinutes(), eventEnd.getSeconds());
        }
      }
      var isNotHourSlot = ["TimelineMonth", "Year", "Month", "Week", "Date"].indexOf(headerName) !== -1 || !this.parent.activeViewOptions.timeScale.enable;
      if (isLeft) {
        if (eventEnd.getTime() - resizeTime.getTime() <= 0) {
          resizeTime = isWithoutScale ? resetTime(eventEnd) : eventStart;
        }
        this.actionObj.start = !isNotHourSlot ? this.calculateIntervalTime(resizeTime) : resizeTime;
      } else {
        var isTimeScaleViews = isTimeViews && this.parent.activeViewOptions.timeScale.enable;
        var resizeEnd2 = (!isTimeScaleViews || isDateHeader || isTimeViews && ["Week", "Month", "Year"].indexOf(headerName) > -1) && resizeTime.getHours() === 0 && resizeTime.getMinutes() === 0 ? addDays(resizeTime, 1) : resizeTime;
        if (isWithoutScale && resizeEnd2.getTime() - eventStart.getTime() <= 0) {
          resizeEnd2 = addDays(resetTime(eventStart), 1);
        }
        this.actionObj.end = !isNotHourSlot ? this.calculateIntervalTime(resizeEnd2) : resizeEnd2;
      }
    };
    Resize2.prototype.getTopBottomStyles = function(e, isTop) {
      var viewElement = this.parent.element.querySelector("." + CONTENT_WRAP_CLASS);
      var slotInterval = this.actionObj.cellHeight / this.actionObj.slotInterval * this.actionObj.interval;
      var clnHeight = isTop ? this.actionObj.element.offsetHeight + (this.actionObj.Y - this.actionObj.pageY) : this.actionObj.element.offsetHeight + (this.actionObj.pageY - this.actionObj.Y);
      var clnTop = isTop ? this.actionObj.element.offsetTop - (this.actionObj.Y - this.actionObj.pageY) : this.actionObj.clone.offsetTop;
      clnHeight = clnTop < 0 ? this.actionObj.clone.offsetHeight : this.actionObj.clone.offsetTop + this.actionObj.clone.offsetHeight > this.scrollArgs.height ? this.actionObj.clone.offsetHeight : clnHeight;
      clnTop = clnTop < 0 ? 0 : clnTop;
      clnTop = isTop ? Math.floor(clnTop / slotInterval) * slotInterval : clnTop;
      clnHeight = clnTop + clnHeight >= viewElement.scrollHeight ? viewElement.scrollHeight - clnTop : Math.ceil(clnHeight / slotInterval) * slotInterval;
      if (!isTop && this.actionObj.clone.offsetTop + clnHeight >= this.parent.getContentTable().offsetHeight) {
        clnHeight = this.parent.getContentTable().offsetHeight - this.actionObj.clone.offsetTop;
      }
      var styles = {
        height: formatUnit(clnHeight < this.actionObj.cellHeight ? Math.floor(clnHeight / slotInterval) * slotInterval : clnHeight),
        top: formatUnit(clnHeight < this.actionObj.cellHeight && isTop ? Math.ceil(clnTop / slotInterval) * slotInterval : clnTop),
        left: "0px",
        right: "0px",
        width: "100%"
      };
      return styles;
    };
    Resize2.prototype.getLeftRightStyles = function(e, isLeft) {
      var styles = {};
      var isTimelineView = this.parent.activeView.isTimelineView();
      var isTimeViews = ["TimelineDay", "TimelineWeek", "TimelineWorkWeek"].indexOf(this.parent.currentView) > -1 && this.parent.activeViewOptions.timeScale.enable;
      var slotInterval = this.actionObj.cellWidth / this.actionObj.slotInterval * this.actionObj.interval;
      var pageWidth = isLeft ? this.actionObj.X - this.actionObj.pageX : this.actionObj.pageX - this.actionObj.X;
      var targetWidth = isTimelineView ? this.actionObj.element.getBoundingClientRect().width / this.actionObj.cellWidth * this.actionObj.cellWidth : this.parent.currentView === "Month" ? this.actionObj.element.getBoundingClientRect().width : Math.ceil(this.actionObj.element.getBoundingClientRect().width / this.actionObj.cellWidth) * this.actionObj.cellWidth;
      var offsetWidth = targetWidth + Math.ceil(pageWidth / this.actionObj.cellWidth) * this.actionObj.cellWidth;
      var left = this.parent.enableRtl ? parseInt(this.actionObj.element.style.right, 10) : this.actionObj.clone.offsetLeft;
      if (isTimeViews) {
        offsetWidth = targetWidth + Math.ceil(pageWidth / slotInterval) * slotInterval;
        offsetWidth = Math.round((left + offsetWidth) / slotInterval) * slotInterval - left;
        this.actionObj.event[this.parent.eventFields.isAllDay] = false;
      }
      var width = !isLeft && offsetWidth + this.actionObj.clone.offsetLeft > this.scrollArgs.width ? this.actionObj.clone.getBoundingClientRect().width : offsetWidth < this.actionObj.cellWidth ? offsetWidth : offsetWidth;
      if (this.parent.enableRtl) {
        var rightValue = isTimelineView ? parseInt(this.actionObj.element.style.right, 10) : -(offsetWidth - this.actionObj.cellWidth);
        rightValue = isTimelineView ? rightValue : isLeft ? 0 : rightValue > 0 ? 0 : rightValue;
        if (isTimelineView && !isLeft) {
          rightValue = Math.ceil((this.actionObj.element.offsetLeft + (this.actionObj.element.getBoundingClientRect().width + (this.actionObj.pageX - this.actionObj.X))) / slotInterval) * slotInterval;
          rightValue = rightValue < 0 ? Math.abs(rightValue) : -rightValue;
        }
        rightValue = rightValue >= this.scrollArgs.width ? this.scrollArgs.width - this.actionObj.cellWidth : rightValue;
        styles.right = formatUnit(rightValue);
        width = width + rightValue > this.scrollArgs.width ? this.actionObj.clone.getBoundingClientRect().width : width;
      } else {
        var offsetLeft = isLeft ? this.actionObj.element.offsetLeft - (this.actionObj.X - this.actionObj.pageX) : this.parent.enableRtl ? this.actionObj.element.offsetLeft : 0;
        if (isTimelineView) {
          offsetLeft = isLeft ? offsetLeft : parseInt(this.actionObj.clone.style.left, 10);
          if (this.parent.enableRtl) {
            offsetLeft = !isLeft ? this.actionObj.pageX < this.actionObj.X - this.actionObj.clone.getBoundingClientRect().width ? parseInt(this.actionObj.clone.style.right, 10) : offsetLeft : offsetLeft;
          } else {
            offsetLeft = isLeft ? this.actionObj.pageX > this.actionObj.X + this.actionObj.clone.getBoundingClientRect().width && this.actionObj.clone.getBoundingClientRect().width === this.actionObj.cellWidth ? parseInt(this.actionObj.clone.style.left, 10) : offsetLeft : offsetLeft;
          }
        }
        var leftValue = offsetLeft;
        offsetLeft = isTimelineView ? isTimeViews ? isLeft ? Math.floor(offsetLeft / slotInterval) * slotInterval : offsetLeft : Math.floor(offsetLeft / this.actionObj.cellWidth) * this.actionObj.cellWidth : Math.ceil(Math.abs(offsetLeft) / this.actionObj.cellWidth) * this.actionObj.cellWidth;
        if (offsetLeft < 0) {
          offsetLeft = 0;
          width = this.actionObj.clone.getBoundingClientRect().width;
        }
        var cloneWidth = Math.ceil(this.actionObj.clone.getBoundingClientRect().width / this.actionObj.cellWidth) * this.actionObj.cellWidth;
        if (isLeft) {
          styles.left = formatUnit(isTimelineView ? offsetLeft : isLeft ? leftValue < 0 ? -offsetLeft : Math.ceil((targetWidth - cloneWidth) / this.actionObj.cellWidth) * this.actionObj.cellWidth : offsetLeft);
        }
      }
      styles.width = formatUnit(width);
      return styles;
    };
    Resize2.prototype.resizeValidation = function(e) {
      var pages = this.parent.eventBase.getPageCoordinates(e);
      var viewDimension = this.getContentAreaDimension();
      var isTimeScale = this.parent.activeView.isTimelineView() && this.parent.activeViewOptions.timeScale.enable;
      var cellWidth = this.actionObj.cellWidth;
      var resizeValidation = false;
      if (this.resizeEdges.left) {
        if (pages.pageX < viewDimension.leftOffset && pages.pageX >= viewDimension.left && isTimeScale) {
          cellWidth = 0;
        }
        resizeValidation = pages.pageX - cellWidth >= viewDimension.left;
      }
      if (this.resizeEdges.right) {
        if (pages.pageX > viewDimension.rightOffset && pages.pageX <= viewDimension.right && isTimeScale) {
          cellWidth = 0;
        }
        resizeValidation = pages.pageX + cellWidth <= viewDimension.right;
      }
      if (this.resizeEdges.top) {
        resizeValidation = this.actionObj.clone.offsetTop >= viewDimension.top;
      }
      if (this.resizeEdges.bottom) {
        resizeValidation = this.actionObj.clone.offsetTop + this.actionObj.clone.offsetHeight <= this.scrollArgs.height;
      }
      return resizeValidation;
    };
    Resize2.prototype.getModuleName = function() {
      return "resize";
    };
    return Resize2;
  }(ActionBase)
);
var __extends$5 = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var EVENT_GAP = 2;
var YearEvent = (
  /** @class */
  function(_super) {
    __extends$5(YearEvent2, _super);
    function YearEvent2(parent) {
      var _this = _super.call(this, parent, "day") || this;
      _this.isResource = false;
      return _this;
    }
    YearEvent2.prototype.renderAppointments = function() {
      if (this.parent.dragAndDropModule) {
        this.parent.dragAndDropModule.setDragArea();
      }
      this.fields = this.parent.eventFields;
      var elementSelector = this.parent.currentView === "Year" ? "." + APPOINTMENT_CLASS : "." + APPOINTMENT_WRAPPER_CLASS + ",." + MORE_INDICATOR_CLASS;
      var eventWrappers = [].slice.call(this.parent.element.querySelectorAll(elementSelector));
      for (var _i = 0, eventWrappers_1 = eventWrappers; _i < eventWrappers_1.length; _i++) {
        var wrapper = eventWrappers_1[_i];
        remove(wrapper);
      }
      this.renderedEvents = [];
      if (this.parent.currentView === "Year") {
        this.yearViewEvents();
      } else {
        this.removeCellHeight();
        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {
          this.isResource = true;
          this.timelineResourceEvents();
        } else {
          this.timelineYearViewEvents();
        }
      }
      this.parent.renderTemplates();
      this.parent.notify(contentReady, {});
    };
    YearEvent2.prototype.yearViewEvents = function() {
      var months = this.getMonths();
      for (var _i = 0, months_1 = months; _i < months_1.length; _i++) {
        var month2 = months_1[_i];
        var queryString2 = ".e-month-calendar:nth-child(" + (months.indexOf(month2) + 1) + ") td.e-work-cells";
        var workCells = [].slice.call(this.parent.element.querySelectorAll(queryString2));
        var monthDate = new Date(this.parent.selectedDate.getFullYear(), month2, 1);
        var monthStart = this.parent.calendarUtil.getMonthStartDate(new Date(monthDate.getTime()));
        var monthEnd = this.parent.calendarUtil.getMonthEndDate(new Date(monthDate.getTime()));
        var startDate = getWeekFirstDate(monthStart, this.parent.firstDayOfWeek);
        var endDate = addDays(getWeekLastDate(monthEnd, this.parent.firstDayOfWeek), 1);
        for (var index = 0; startDate.getTime() < endDate.getTime(); index++) {
          var start = resetTime(new Date(startDate.getTime()));
          var end = addDays(new Date(start.getTime()), 1);
          startDate = addDays(new Date(startDate.getTime()), 1);
          if (!this.parent.isMinMaxDate(start)) {
            continue;
          }
          var filterEvents = this.parent.eventBase.filterEvents(start, end);
          if (filterEvents.length > 0) {
            var workCell = workCells[parseInt(index.toString(), 10)];
            if (workCell) {
              workCell.appendChild(createElement("div", { className: APPOINTMENT_CLASS }));
            }
          }
        }
      }
    };
    YearEvent2.prototype.timelineYearViewEvents = function() {
      var _this = this;
      var workCell = this.parent.element.querySelector("." + WORK_CELLS_CLASS + ":not(." + OTHERMONTH_CLASS + ")");
      this.cellWidth = workCell.getBoundingClientRect().width;
      this.cellHeader = getOuterHeight(workCell.querySelector("." + DATE_HEADER_CLASS));
      var eventTable = this.parent.element.querySelector("." + EVENT_TABLE_CLASS);
      this.eventHeight = getElementHeightFromClass(eventTable, APPOINTMENT_CLASS);
      var wrapperCollection = [].slice.call(this.parent.element.querySelectorAll("." + APPOINTMENT_CONTAINER_CLASS));
      var months = this.getMonths();
      var groupIndex = this.parent.activeViewOptions.group.resources.length > 0 && this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex : void 0;
      for (var row = 0; row < months.length; row++) {
        var wrapper = wrapperCollection[parseInt(row.toString(), 10)];
        var td = row + 1;
        var eventWrapper = createElement("div", { className: APPOINTMENT_WRAPPER_CLASS });
        wrapper.appendChild(eventWrapper);
        var monthStart = new Date(this.parent.selectedDate.getFullYear(), months[parseInt(row.toString(), 10)], 1);
        var monthEnd = new Date(monthStart.getFullYear(), monthStart.getMonth() + 1, 0);
        var dayIndex2 = monthStart.getDay();
        var isSpannedCollection = [];
        if (this.parent.activeViewOptions.orientation === "Horizontal") {
          this.renderedEvents = [];
        }
        while (monthStart.getTime() <= monthEnd.getTime()) {
          var leftValue = void 0;
          var rightValue = void 0;
          if (this.parent.activeViewOptions.orientation === "Vertical") {
            var wrapper_1 = wrapperCollection[parseInt(dayIndex2.toString(), 10)];
            td = dayIndex2 + 1;
            eventWrapper = wrapper_1.querySelector("." + APPOINTMENT_WRAPPER_CLASS);
            if (!eventWrapper) {
              eventWrapper = createElement("div", { className: APPOINTMENT_WRAPPER_CLASS });
              wrapper_1.appendChild(eventWrapper);
            }
            if (this.parent.enableRtl) {
              rightValue = row * this.cellWidth;
            } else {
              leftValue = row * this.cellWidth;
            }
          } else {
            if (this.parent.enableRtl) {
              rightValue = (dayIndex2 + monthStart.getDate() - 1) * this.cellWidth;
            } else {
              leftValue = (dayIndex2 + monthStart.getDate() - 1) * this.cellWidth;
            }
          }
          var rowTd = this.parent.element.querySelector(".e-content-wrap tr:nth-child(" + td + ") td");
          this.cellHeight = rowTd.offsetHeight;
          var dayStart = resetTime(new Date(monthStart.getTime()));
          var dayEnd = addDays(new Date(dayStart.getTime()), 1);
          var resource = void 0;
          if (this.parent.uiStateValues.isGroupAdaptive) {
            resource = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];
          }
          var dayEvents = this.parent.eventBase.filterEvents(dayStart, dayEnd, void 0, resource);
          dayEvents = this.parent.eventBase.sortByDateTime(dayEvents);
          var _loop_1 = function(index2, count2) {
            var eventData = extend({}, dayEvents[parseInt(index2.toString(), 10)], null, true);
            this_1.updateSpannedEvents(eventData, dayStart, dayEnd);
            var overlapIndex = this_1.getIndex(dayStart);
            eventData.Index = overlapIndex;
            var availedHeight = this_1.cellHeader + this_1.eventHeight * (overlapIndex + 1) + EVENT_GAP + this_1.moreIndicatorHeight;
            var appArea = this_1.cellHeight - this_1.cellHeader - this_1.moreIndicatorHeight;
            var renderedAppCount = Math.floor(appArea / (this_1.eventHeight + EVENT_GAP));
            var moreIndicatorCount = count2 - renderedAppCount <= 0 ? 1 : count2 - renderedAppCount;
            if (this_1.parent.activeViewOptions.orientation === "Horizontal") {
              var isRendered = this_1.renderedEvents.filter(function(eventObj) {
                return eventObj.Guid === eventData.Guid;
              });
              var isSpanned = isSpannedCollection.filter(function(eventObj) {
                return eventObj.Guid === eventData.Guid;
              });
              if (isRendered.length > 0 && isRendered[0].MoreIndicator || isSpanned.length > 0 && isSpanned[0].MoreIndicator) {
                var moreIndex = this_1.parent.activeViewOptions.orientation === "Horizontal" ? row : dayIndex2;
                this_1.renderMoreIndicator(eventWrapper, moreIndicatorCount, dayStart, moreIndex, leftValue, rightValue, groupIndex);
                return "continue";
              } else if (isRendered.length > 0 || isSpanned.length > 0) {
                return "continue";
              }
            }
            if (this_1.parent.rowAutoHeight || this_1.cellHeight > availedHeight) {
              this_1.renderEvent(eventWrapper, eventData, row, leftValue, rightValue, monthStart, dayIndex2);
              this_1.updateCellHeight(rowTd, availedHeight);
              isSpannedCollection.push(eventData);
            } else {
              var moreIndex = this_1.parent.activeViewOptions.orientation === "Horizontal" ? row : dayIndex2;
              this_1.renderMoreIndicator(eventWrapper, moreIndicatorCount, dayStart, moreIndex, leftValue, rightValue, groupIndex);
              if (this_1.parent.activeViewOptions.orientation === "Horizontal") {
                eventData.MoreIndicator = true;
                this_1.renderedEvents.push(eventData);
                isSpannedCollection.push(eventData);
              }
            }
          };
          var this_1 = this;
          for (var index = 0, count = dayEvents.length; index < count; index++) {
            _loop_1(index, count);
          }
          monthStart = addDays(new Date(monthStart.getTime()), 1);
          if (this.parent.activeViewOptions.orientation === "Vertical") {
            dayIndex2++;
            this.renderedEvents = [];
          }
        }
      }
      if (this.parent.rowAutoHeight && this.parent.activeViewOptions.orientation === "Vertical") {
        var appContainer = [].slice.call(this.parent.element.querySelectorAll("." + APPOINTMENT_CONTAINER_CLASS));
        var tr_1 = [].slice.call(this.parent.element.querySelectorAll("." + CONTENT_TABLE_CLASS + " tbody tr"));
        appContainer.forEach(function(ele, index2) {
          var app = [].slice.call(ele.querySelectorAll("." + APPOINTMENT_CLASS));
          var appTop = tr_1[parseInt(index2.toString(), 10)].offsetTop + _this.cellHeader + EVENT_GAP;
          app.forEach(function(app2) {
            var overlap = parseInt(app2.getAttribute("data-index"), 10);
            app2.style.top = appTop + overlap * _this.eventHeight + "px";
            app2.removeAttribute("data-index");
          });
        });
      }
    };
    YearEvent2.prototype.updateSpannedEvents = function(eventObj, dayStart, dayEnd) {
      var isLeftRightResize = this.isResource && this.parent.activeViewOptions.orientation === "Vertical" || !this.isResource && this.parent.activeViewOptions.orientation === "Horizontal";
      var data = { isLeft: true, isRight: true, isBottom: true, isTop: true };
      if (dayStart.getTime() <= eventObj[this.fields.startTime].getTime()) {
        if (isLeftRightResize) {
          data.isLeft = false;
        } else {
          data.isTop = false;
        }
      }
      if (dayEnd.getTime() >= eventObj[this.fields.endTime].getTime() || isLeftRightResize && !this.isResource && addDays(dayEnd, -1).getMonth() === eventObj[this.fields.endTime].getMonth() || isLeftRightResize && this.isResource && dayEnd.getTime() <= eventObj[this.fields.endTime].getTime()) {
        if (isLeftRightResize) {
          data.isRight = false;
        } else {
          data.isBottom = false;
        }
      }
      eventObj.data = data;
    };
    YearEvent2.prototype.timelineResourceEvents = function() {
      var _this = this;
      var contentTable = this.parent.element.querySelector("." + CONTENT_WRAP_CLASS);
      var isVerticalScrollbarAvail = contentTable.offsetWidth > contentTable.clientWidth;
      var workCell = this.parent.element.querySelector("." + WORK_CELLS_CLASS);
      this.cellWidth = workCell.getBoundingClientRect().width;
      this.cellHeader = 0;
      var eventTable = this.parent.element.querySelector("." + EVENT_TABLE_CLASS);
      this.eventHeight = getElementHeightFromClass(eventTable, APPOINTMENT_CLASS);
      var wrapperCollection = [].slice.call(this.parent.element.querySelectorAll("." + APPOINTMENT_CONTAINER_CLASS));
      var resources = this.parent.uiStateValues.isGroupAdaptive ? [this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]] : this.parent.activeViewOptions.allowVirtualScrolling ? this.parent.resourceBase.renderedResources : this.parent.resourceBase.lastResourceLevel;
      var months = this.getMonths();
      if (this.parent.activeViewOptions.orientation === "Horizontal") {
        for (var month2 = 0; month2 < months.length; month2++) {
          var monthStart = new Date(this.parent.selectedDate.getFullYear(), months[parseInt(month2.toString(), 10)], 1);
          for (var i = 0, len = resources.length; i < len; i++) {
            this.renderedEvents = [];
            this.renderResourceEvent(wrapperCollection[parseInt(month2.toString(), 10)], resources[parseInt(i.toString(), 10)], month2, i, monthStart);
          }
        }
      } else {
        for (var i = 0, len = resources.length; i < len; i++) {
          this.renderedEvents = [];
          for (var month2 = 0; month2 < months.length; month2++) {
            var monthStart = new Date(this.parent.selectedDate.getFullYear(), months[parseInt(month2.toString(), 10)], 1);
            this.renderResourceEvent(wrapperCollection[parseInt(i.toString(), 10)], resources[parseInt(i.toString(), 10)], month2, i, monthStart);
          }
        }
      }
      if (this.parent.rowAutoHeight && !isVerticalScrollbarAvail && contentTable.offsetWidth > contentTable.clientWidth) {
        var appointments = [].slice.call(this.parent.element.querySelectorAll("." + APPOINTMENT_CLASS));
        appointments.forEach(function(ele) {
          ele.style.removeProperty("left");
          ele.style.removeProperty("right");
        });
        var appContainer = [].slice.call(this.parent.element.querySelectorAll("." + APPOINTMENT_CONTAINER_CLASS));
        var conTable_1 = this.parent.element.querySelector("." + CONTENT_TABLE_CLASS);
        var tr_2 = [].slice.call(conTable_1.querySelectorAll("tbody tr"));
        appContainer.forEach(function(ele, index) {
          var appWrapper = [].slice.call(ele.children);
          var row = tr_2[parseInt(index.toString(), 10)];
          appWrapper.forEach(function(appWrap, cellIndex) {
            var td = row.querySelector("td:nth-child(" + (cellIndex + 1) + ")");
            var app = [].slice.call(appWrap.children);
            var width = td.getBoundingClientRect().width;
            var left = td.offsetLeft;
            if (_this.parent.enableRtl) {
              var right_1 = conTable_1.offsetWidth - left - td.offsetWidth;
              app.forEach(function(app2) {
                app2.style.width = Math.floor(parseInt(app2.style.width, 10) / width) * width + "px";
                app2.style.right = right_1 + "px";
              });
            } else {
              app.forEach(function(app2) {
                app2.style.width = Math.floor(parseInt(app2.style.width, 10) / width) * width + "px";
                app2.style.left = left + "px";
              });
            }
          });
        });
      }
    };
    YearEvent2.prototype.renderResourceEvent = function(wrapper, resource, month2, index, monthStart) {
      var eventWrapper = createElement("div", { className: APPOINTMENT_WRAPPER_CLASS });
      wrapper.appendChild(eventWrapper);
      var monthEnd = addDays(lastDateOfMonth(new Date(monthStart.getTime())), 1);
      var eventDatas = this.parent.eventBase.filterEvents(monthStart, monthEnd, void 0, resource);
      var rowIndex = this.parent.activeViewOptions.orientation === "Vertical" ? index : month2;
      var td = this.parent.element.querySelector(".e-content-wrap tr:nth-child(" + (rowIndex + 1) + ") td");
      this.cellHeight = td.offsetHeight;
      this.groupOrder = resource.groupOrder;
      var isSpannedCollection = [];
      var _loop_2 = function(a2) {
        var data = eventDatas[parseInt(a2.toString(), 10)];
        var overlapIndex = void 0;
        var eventData = extend({}, data, null, true);
        if (this_2.parent.activeViewOptions.group.resources.length > 0) {
          var eventObj = this_2.isSpannedEvent(eventData, monthStart);
          overlapIndex = this_2.getIndex(eventObj[this_2.fields.startTime]);
          eventData.Index = overlapIndex;
        } else {
          overlapIndex = this_2.getIndex(eventData[this_2.fields.startTime]);
          eventData.Index = overlapIndex;
        }
        var availedHeight = this_2.cellHeader + this_2.eventHeight * (a2 + 1) + EVENT_GAP + this_2.moreIndicatorHeight;
        var leftValue = this_2.parent.activeViewOptions.orientation === "Vertical" ? month2 * this_2.cellWidth : index * this_2.cellWidth;
        if (!this_2.parent.isMinMaxDate(eventData[this_2.fields.startTime])) {
          return { value: void 0 };
        }
        if (this_2.parent.activeViewOptions.orientation === "Vertical" && this_2.parent.activeViewOptions.group.resources.length > 0) {
          var isRendered = this_2.renderedEvents.filter(function(eventObj2) {
            return eventObj2.Guid === eventData.Guid;
          });
          var isSpanned = isSpannedCollection.filter(function(eventObj2) {
            return eventObj2.Guid === eventData.Guid;
          });
          if (isRendered.length > 0 || isSpanned.length > 0) {
            return "continue";
          }
        }
        if (this_2.parent.rowAutoHeight || this_2.cellHeight > availedHeight) {
          this_2.renderEvent(eventWrapper, eventData, month2, leftValue, leftValue, monthStart, index);
          this_2.updateCellHeight(td, availedHeight);
          isSpannedCollection.push(eventData);
        } else {
          var moreIndex = this_2.parent.activeViewOptions.orientation === "Horizontal" ? month2 : index;
          this_2.renderMoreIndicator(eventWrapper, eventDatas.length - a2, monthStart, moreIndex, leftValue, leftValue, index);
          if (this_2.parent.activeViewOptions.orientation === "Horizontal") {
            for (var i = index; i < eventDatas.length; i++) {
              this_2.renderedEvents.push(extend({}, eventDatas[parseInt(i.toString(), 10)], { Index: overlapIndex + i }, true));
            }
          }
          return "break";
        }
      };
      var this_2 = this;
      for (var a = 0; a < eventDatas.length; a++) {
        var state_1 = _loop_2(a);
        if (typeof state_1 === "object")
          return state_1.value;
        if (state_1 === "break")
          break;
      }
    };
    YearEvent2.prototype.renderEvent = function(wrapper, eventData, row, left, right, monthDate, rowIndex) {
      var _this = this;
      var eventObj = this.isSpannedEvent(eventData, monthDate);
      var wrap = this.createEventElement(eventObj);
      var width;
      var index;
      if (eventObj.isSpanned.count === 1) {
        var endTime = addDays(eventObj[this.fields.endTime], -1);
        eventObj[this.fields.endTime] = endTime > eventObj[this.fields.startTime] ? endTime : eventObj[this.fields.endTime];
      }
      if (eventObj[this.fields.startTime] > eventObj[this.fields.endTime]) {
        return;
      }
      if (this.parent.activeViewOptions.orientation === "Horizontal") {
        index = row + 1;
        if (eventObj[this.fields.startTime].getTime() === eventObj[this.fields.endTime].getTime()) {
          eventObj.isSpanned.count = 1;
        }
        width = eventObj.isSpanned.count * this.cellWidth;
      } else {
        index = rowIndex + 1;
        width = this.isResource ? eventObj.isSpanned.count * this.cellWidth : this.cellWidth;
      }
      var rowTd = this.parent.element.querySelector(".e-content-wrap tr:nth-child(" + index + ") td");
      var top = rowTd.offsetTop + this.cellHeader + this.eventHeight * eventObj.Index + EVENT_GAP;
      setStyleAttribute(wrap, {
        "width": width + "px",
        "height": this.eventHeight + "px",
        "left": left + "px",
        "right": right + "px",
        "top": top + "px"
      });
      if (!this.isResource && this.parent.rowAutoHeight && this.parent.activeViewOptions.orientation === "Vertical") {
        wrap.setAttribute("data-index", eventObj.Index.toString());
      }
      var args = { data: eventObj, element: wrap, cancel: false, type: "event" };
      this.parent.trigger(eventRendered, args, function(eventArgs) {
        if (!eventArgs.cancel) {
          wrapper.appendChild(wrap);
          _this.wireAppointmentEvents(wrap, eventObj);
          if (_this.parent.activeViewOptions.group.resources.length > 0) {
            _this.renderedEvents.push(extend({}, eventObj, null, true));
          } else if (_this.parent.activeViewOptions.orientation === "Vertical") {
            _this.renderedEvents.push(extend({}, eventObj, null, true));
          } else if ((eventObj.isSpanned.isRight || eventObj.isSpanned.isLeft) && _this.parent.activeViewOptions.orientation === "Horizontal" || !eventObj.isSpanned.isRight) {
            _this.renderedEvents.push(extend({}, eventObj, null, true));
          }
        }
      });
    };
    YearEvent2.prototype.renderMoreIndicator = function(wrapper, count, startDate, row, left, right, index) {
      if (this.parent.activeViewOptions.group.resources.length === 0 && wrapper.querySelector('[data-start-date="' + startDate.getTime() + '"]')) {
        return;
      }
      var endDate;
      if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {
        endDate = addDays(lastDateOfMonth(new Date(startDate.getTime())), 1);
      } else {
        endDate = addDays(new Date(startDate.getTime()), 1);
      }
      var moreIndicator = this.getMoreIndicatorElement(count, startDate, endDate);
      var rowTr = this.parent.element.querySelector(".e-content-wrap tr:nth-child(" + (row + 1) + ")");
      var top = rowTr.offsetTop + (this.cellHeight - this.moreIndicatorHeight);
      left = Math.floor(left / this.cellWidth) * this.cellWidth;
      right = Math.floor(right / this.cellWidth) * this.cellWidth;
      setStyleAttribute(moreIndicator, { "width": this.cellWidth + "px", "left": left + "px", "right": right + "px", "top": top + "px" });
      if (!isNullOrUndefined(index)) {
        moreIndicator.setAttribute("data-group-index", index.toString());
      }
      wrapper.appendChild(moreIndicator);
      EventHandler.add(moreIndicator, "click", this.moreIndicatorClick, this);
    };
    YearEvent2.prototype.createEventElement = function(record) {
      var eventSubject = record[this.fields.subject] || this.parent.eventSettings.fields.subject.default || this.parent.localeObj.getConstant("addTitle");
      var eventWrapper = createElement("div", {
        className: APPOINTMENT_CLASS,
        attrs: {
          "data-id": "Appointment_" + record[this.fields.id],
          "data-guid": record.Guid,
          "role": "button",
          "tabindex": "0",
          "aria-disabled": this.parent.eventBase.getReadonlyAttribute(record),
          "aria-label": this.parent.getAnnouncementString(record)
        }
      });
      if (this.cssClass) {
        addClass([eventWrapper], this.cssClass);
      }
      if (record[this.fields.isReadonly]) {
        addClass([eventWrapper], READ_ONLY);
      }
      if (this.parent.activeViewOptions.group.resources.length > 0) {
        var resIndex = this.getGroupIndexFromEvent(record);
        eventWrapper.setAttribute("data-group-index", resIndex.toString());
      }
      var templateElement = [];
      var eventObj = extend({}, record, null, true);
      if (this.parent.activeViewOptions.eventTemplate) {
        var templateId = this.parent.element.id + "_" + this.parent.activeViewOptions.eventTemplateName + "eventTemplate";
        templateElement = this.parent.getAppointmentTemplate()(eventObj, this.parent, "eventTemplate", templateId, false);
      } else {
        var locationEle = record[this.fields.location] || this.parent.eventSettings.fields.location.default || "";
        var subjectEle = createElement("div", {
          className: SUBJECT_CLASS,
          innerHTML: eventSubject + (locationEle ? ";&nbsp" + locationEle : "")
        });
        var startTimeEle = createElement("div", {
          className: APPOINTMENT_TIME + (this.parent.isAdaptive ? " " + DISABLE_CLASS : ""),
          innerHTML: this.parent.getTimeString(eventObj[this.fields.startTime])
        });
        var endTimeEle = createElement("div", {
          className: APPOINTMENT_TIME + (this.parent.isAdaptive ? " " + DISABLE_CLASS : ""),
          innerHTML: this.parent.getTimeString(eventObj[this.fields.endTime])
        });
        addClass([subjectEle], "e-text-center");
        if (record[this.fields.isAllDay]) {
          templateElement = [subjectEle];
        } else if (!eventObj.isLeft && !eventObj.isRight) {
          templateElement = [startTimeEle, subjectEle, endTimeEle];
        } else {
          if (!eventObj.isLeft) {
            templateElement.push(startTimeEle);
          }
          templateElement.push(subjectEle);
          if (!eventObj.isRight) {
            templateElement.push(endTimeEle);
          }
        }
      }
      var appointmentDetails = createElement("div", { className: APPOINTMENT_DETAILS });
      append2(templateElement, appointmentDetails);
      eventWrapper.appendChild(appointmentDetails);
      this.parent.eventBase.renderSpannedIcon(eventWrapper, record.isSpanned);
      this.renderResizeHandler(eventWrapper, record.data, record[this.fields.isReadonly]);
      this.applyResourceColor(eventWrapper, eventObj, "backgroundColor", this.groupOrder);
      return eventWrapper;
    };
    YearEvent2.prototype.isSpannedEvent = function(eventObj, monthDate) {
      var monthStart = new Date(monthDate.getFullYear(), monthDate.getMonth(), 1);
      var monthEnd = addDays(new Date(monthDate.getFullYear(), monthDate.getMonth() + 1, 0), 1);
      var eventData = extend({}, eventObj, null, true);
      var eventStart = eventData[this.fields.startTime];
      var eventEnd = eventData[this.fields.endTime];
      var isSpanned = { isLeft: false, isRight: false, count: 1 };
      var yearStart = new Date(this.parent.selectedDate.getFullYear(), this.parent.firstMonthOfYear, 1);
      var yearEnd = addMonths(yearStart, this.parent.monthsCount);
      if (this.isResource) {
        this.updateSpannedEvents(eventObj, monthStart, monthEnd);
      }
      if (this.parent.activeViewOptions.orientation === "Vertical" && this.parent.activeViewOptions.group.resources.length > 0) {
        this.updateSpannedEventDetails(eventStart, eventEnd, yearStart, yearEnd, eventData, isSpanned);
        var originalStartTime = eventData[this.fields.startTime];
        var originalEndTime = new Date(eventData[this.fields.endTime] - 1);
        isSpanned.count = originalEndTime.getMonth() - originalStartTime.getMonth() + this.parent.monthsCount * (originalEndTime.getFullYear() - originalStartTime.getFullYear()) + 1;
      } else {
        this.updateSpannedEventDetails(eventStart, eventEnd, monthStart, monthEnd, eventData, isSpanned);
        if (this.parent.activeViewOptions.group.resources.length === 0 || this.parent.uiStateValues.isGroupAdaptive) {
          var end = resetTime(eventData[this.fields.endTime]).getTime();
          var start = resetTime(eventData[this.fields.startTime]).getTime();
          if (eventObj[this.fields.isAllDay] && end === eventObj[this.fields.endTime].getTime() || isSpanned.isRight) {
            end = addDays(new Date(end), -1).getTime();
          }
          isSpanned.count = Math.ceil((end - start) / MS_PER_DAY) + 1;
        }
      }
      eventData.isSpanned = isSpanned;
      if (resetTime(eventStart).getTime() < resetTime(this.parent.minDate).getTime()) {
        eventData[this.fields.startTime] = this.parent.minDate;
      }
      if (resetTime(eventEnd).getTime() > resetTime(this.parent.maxDate).getTime()) {
        eventData[this.fields.endTime] = this.parent.maxDate;
      }
      return eventData;
    };
    YearEvent2.prototype.updateSpannedEventDetails = function(eventStart, eventEnd, viewStart, viewEnd, eventObj, isSpanned) {
      if (eventStart.getTime() < viewStart.getTime()) {
        eventObj[this.fields.startTime] = viewStart;
        isSpanned.isLeft = true;
      }
      if (eventEnd.getTime() > viewEnd.getTime()) {
        eventObj[this.fields.endTime] = viewEnd;
        isSpanned.isRight = true;
      }
    };
    YearEvent2.prototype.getOverlapEvents = function(date, appointments) {
      var appointmentsList = [];
      var dateStart;
      var dateEnd;
      if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {
        var monthStart = this.parent.calendarUtil.getMonthStartDate(new Date(date.getTime()));
        var monthEnd = addDays(this.parent.calendarUtil.getMonthEndDate(new Date(date.getTime())), -1);
        dateStart = resetTime(new Date(monthStart.getTime())).getTime();
        dateEnd = resetTime(new Date(monthEnd.getTime())).getTime();
      } else {
        if (this.parent.rowAutoHeight) {
          dateStart = resetTime(new Date(date.getTime())).getTime();
          dateEnd = addDays(resetTime(new Date(date.getTime())), 1).getTime();
        } else {
          dateStart = dateEnd = resetTime(new Date(date.getTime())).getTime();
        }
      }
      for (var _i = 0, appointments_1 = appointments; _i < appointments_1.length; _i++) {
        var app = appointments_1[_i];
        var appStart = new Date(app[this.fields.startTime].getTime());
        var appEnd = new Date(app[this.fields.endTime].getTime());
        var timeCondition = app[this.fields.isAllDay] ? resetTime(appEnd).getTime() > dateStart : resetTime(appEnd).getTime() >= dateStart;
        if (resetTime(appStart).getTime() <= dateStart && timeCondition || resetTime(appStart).getTime() >= dateStart && resetTime(appEnd).getTime() <= dateEnd) {
          appointmentsList.push(app);
        }
      }
      return appointmentsList;
    };
    YearEvent2.prototype.getMonths = function() {
      var _this = this;
      return Array.apply(null, { length: this.parent.monthsCount }).map(function(value, index) {
        return _this.parent.firstMonthOfYear + index;
      });
    };
    YearEvent2.prototype.removeCellHeight = function() {
      var elementSelector = "." + MONTH_HEADER_WRAPPER + " tbody tr,." + RESOURCE_COLUMN_TABLE_CLASS + " tbody tr,." + CONTENT_TABLE_CLASS + " tbody tr";
      var rows = [].slice.call(this.element.querySelectorAll(elementSelector));
      for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {
        var row = rows_1[_i];
        row.firstElementChild.style.height = "";
      }
    };
    YearEvent2.prototype.destroy = function() {
      _super.prototype.destroy.call(this);
      this.parent = null;
    };
    return YearEvent2;
  }(TimelineEvent)
);
var __extends$4 = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var MINUTES_PER_DAY = 1440;
var DragAndDrop = (
  /** @class */
  function(_super) {
    __extends$4(DragAndDrop2, _super);
    function DragAndDrop2() {
      var _this = _super !== null && _super.apply(this, arguments) || this;
      _this.widthUptoCursorPoint = 0;
      _this.heightUptoCursorPoint = 0;
      _this.cursorPointIndex = 0;
      _this.isHeaderRows = false;
      _this.isTimelineDayProcess = false;
      _this.widthPerMinute = 0;
      _this.heightPerMinute = 0;
      _this.minDiff = 0;
      _this.isStepDragging = false;
      _this.isMorePopupOpened = false;
      _this.isAllDayDrag = false;
      _this.isMultiSelect = false;
      _this.multiData = [];
      _this.updatedData = [];
      _this.swagData = [];
      _this.startTime = 0;
      _this.isAllDayTarget = false;
      _this.targetTd = null;
      _this.isCursorAhead = false;
      return _this;
    }
    DragAndDrop2.prototype.wireDragEvent = function(element2) {
      new Draggable(element2, {
        abort: "." + EVENT_RESIZE_CLASS,
        clone: true,
        isDragScroll: true,
        enableTapHold: this.parent.isAdaptive,
        enableTailMode: this.parent.eventDragArea ? true : false,
        cursorAt: this.parent.eventDragArea ? { left: -20, top: -20 } : { left: 0, top: 0 },
        dragArea: this.dragArea,
        dragStart: this.dragStart.bind(this),
        drag: this.drag.bind(this),
        dragStop: this.dragStop.bind(this),
        enableAutoScroll: false,
        helper: this.dragHelper.bind(this),
        queryPositionInfo: this.dragPosition.bind(this)
      });
    };
    DragAndDrop2.prototype.setDragArea = function() {
      var dragElement = document.querySelector(this.parent.eventDragArea);
      this.dragArea = this.parent.eventDragArea && dragElement ? dragElement : this.parent.element.querySelector("." + CONTENT_TABLE_CLASS);
    };
    DragAndDrop2.prototype.dragHelper = function(e) {
      var _this = this;
      this.setDragActionDefaultValues();
      this.actionObj.element = e.element;
      this.actionObj.action = "drag";
      var elements = [];
      if (!this.parent.allowMultiDrag || isNullOrUndefined(this.parent.selectedElements) || this.parent.selectedElements.length === 0 || this.parent.selectedElements.length > 0 && this.parent.selectedElements.indexOf(this.actionObj.element) === -1) {
        elements = [e.element];
      } else {
        elements = this.parent.selectedElements;
        this.isMultiSelect = true;
      }
      elements.forEach(function(ele) {
        var cloneElement = _this.createCloneElement(ele);
        if (ele.getAttribute("data-guid") === _this.actionObj.element.getAttribute("data-guid")) {
          _this.actionObj.clone = cloneElement;
          if (!_this.parent.eventDragArea && _this.parent.currentView !== "Month" && _this.parent.activeViewOptions.timeScale.enable && !_this.parent.activeView.isTimelineView() && !_this.actionObj.element.classList.contains(ALLDAY_APPOINTMENT_CLASS)) {
            setStyleAttribute(_this.actionObj.clone, { cursor: "move", left: "0%", right: "0%", width: "100%" });
          }
          _this.actionObj.clone.style.top = formatUnit(_this.actionObj.element.offsetTop);
        }
        _this.actionObj.cloneElement.push(cloneElement);
        _this.actionObj.originalElement.push(ele);
      });
      return this.actionObj.clone;
    };
    DragAndDrop2.prototype.dragPosition = function(e) {
      if (this.parent.eventDragArea) {
        return { left: e.left, top: e.top };
      }
      var cellHeight = this.actionObj.cellHeight / this.actionObj.slotInterval * this.actionObj.interval;
      var leftValue = formatUnit(0);
      if (this.parent.currentView === "Month") {
        leftValue = e.left;
      }
      var cloneRight;
      if (this.isStepDragging) {
        cloneRight = Math.ceil(this.actionObj.clone.getBoundingClientRect().right) + this.actionObj.interval;
      } else {
        cloneRight = this.actionObj.clone.getBoundingClientRect().right;
      }
      var dragArea = this.parent.element.querySelector("." + CONTENT_WRAP_CLASS);
      var contentWrapRight = dragArea.getBoundingClientRect().right;
      if (this.parent.activeView.isTimelineView() && this.parent.currentView !== "TimelineYear" && !this.parent.enableRtl && this.actionObj.pageX > cloneRight && !this.isMorePopupOpened && !(this.actionObj.pageX > contentWrapRight)) {
        this.isCursorAhead = true;
      }
      if (this.parent.activeView.isTimelineView()) {
        leftValue = formatUnit(this.actionObj.clone.offsetLeft);
      }
      var topValue;
      if (this.parent.activeView.isTimelineView() || !this.parent.timeScale.enable || !isNullOrUndefined(this.actionObj.clone.offsetParent) && this.actionObj.clone.offsetParent.classList.contains(MORE_EVENT_POPUP_CLASS)) {
        topValue = formatUnit(this.actionObj.clone.offsetTop);
      } else if (this.parent.currentView === "Month") {
        topValue = formatUnit(0);
      } else if (this.actionObj.clone.classList.contains(ALLDAY_APPOINTMENT_CLASS)) {
        topValue = formatUnit(this.parent.element.querySelector("." + ALLDAY_ROW_CLASS).offsetTop);
        setStyleAttribute(this.actionObj.clone, {
          width: formatUnit(Math.ceil(this.actionObj.clone.offsetWidth / this.actionObj.cellWidth) * this.actionObj.cellWidth),
          right: this.parent.enableRtl && formatUnit(0)
        });
      } else {
        if (this.actionObj.element.classList.contains(ALLDAY_APPOINTMENT_CLASS) && !this.actionObj.clone.classList.contains(ALLDAY_APPOINTMENT_CLASS)) {
          setStyleAttribute(this.actionObj.clone, {
            height: formatUnit(this.actionObj.cellHeight),
            width: formatUnit(this.actionObj.cellWidth - 1),
            pointerEvents: "none"
          });
        }
        var top_1 = parseInt(e.top, 10);
        top_1 = top_1 < 0 ? 0 : top_1;
        topValue = formatUnit(Math.ceil(top_1 / cellHeight) * cellHeight);
        var scrollHeight = this.parent.element.querySelector(".e-content-wrap").scrollHeight;
        var cloneBottom = parseInt(topValue, 10) + this.actionObj.clone.offsetHeight;
        if (cloneBottom > scrollHeight) {
          topValue = parseInt(topValue, 10) - (cloneBottom - scrollHeight) + "px";
        }
      }
      return { left: leftValue, top: topValue };
    };
    DragAndDrop2.prototype.setDragActionDefaultValues = function() {
      this.actionObj.action = "drag";
      this.actionObj.isAllDay = null;
      this.actionObj.slotInterval = this.parent.activeViewOptions.timeScale.interval / this.parent.activeViewOptions.timeScale.slotCount;
      this.actionObj.interval = this.actionObj.slotInterval;
      var workCell = this.parent.element.querySelector("." + WORK_CELLS_CLASS);
      this.actionObj.cellWidth = workCell.offsetWidth;
      this.actionObj.cellHeight = workCell.offsetHeight;
    };
    DragAndDrop2.prototype.dragStart = function(e) {
      var _this = this;
      var eventGuid = this.actionObj.element.getAttribute("data-guid");
      this.actionObj.event = this.parent.eventBase.getEventByGuid(eventGuid);
      var eventObj = extend({}, this.actionObj.event, null, true);
      if (!isNullOrUndefined(eventObj)) {
        this.startTime = eventObj[this.parent.eventFields.startTime].getTime();
      }
      var dragArgs = {
        cancel: false,
        data: eventObj,
        selectedData: this.getSelectedData(),
        event: e,
        excludeSelectors: null,
        element: this.actionObj.element,
        interval: this.actionObj.interval,
        navigation: { enable: false, timeDelay: 2e3 },
        scroll: { enable: true, scrollBy: 30, timeDelay: 100 }
      };
      this.parent.trigger(dragStart, dragArgs, function(dragEventArgs) {
        if (dragEventArgs.cancel || !isNullOrUndefined(_this.actionObj.element) && isNullOrUndefined(_this.actionObj.element.parentElement)) {
          var dragObj = _this.actionObj.element.ej2_instances[0];
          if (!isNullOrUndefined(dragObj)) {
            dragObj.intDestroy(e.event);
          }
          _this.actionObj.action = "";
          _this.removeCloneElementClasses();
          _this.removeCloneElement();
          return;
        }
        _this.actionClass("addClass");
        _this.parent.uiStateValues.action = true;
        _this.actionObj.start = eventObj[_this.parent.eventFields.startTime];
        _this.actionObj.end = eventObj[_this.parent.eventFields.endTime];
        _this.actionObj.groupIndex = parseInt(_this.actionObj.element.getAttribute("data-group-index") || "0", 10);
        _this.actionObj.interval = dragEventArgs.interval;
        _this.actionObj.navigation = dragEventArgs.navigation;
        _this.actionObj.scroll = dragEventArgs.scroll;
        _this.actionObj.excludeSelectors = dragEventArgs.excludeSelectors;
        var viewElement = _this.parent.element.querySelector("." + CONTENT_WRAP_CLASS);
        _this.scrollArgs = { element: viewElement, width: viewElement.scrollWidth, height: viewElement.scrollHeight };
        _this.widthPerMinute = _this.actionObj.cellWidth / _this.actionObj.slotInterval * _this.actionObj.interval;
        _this.heightPerMinute = _this.actionObj.cellHeight / _this.actionObj.slotInterval * _this.actionObj.interval;
        _this.widthUptoCursorPoint = 0;
        _this.heightUptoCursorPoint = 0;
        _this.cursorPointIndex = -1;
        _this.isHeaderRows = false;
        _this.isTimelineDayProcess = false;
        _this.minDiff = 0;
        _this.isMorePopupOpened = false;
        _this.daysVariation = -1;
        _this.isAllDayTarget = _this.actionObj.clone.classList.contains(ALLDAY_APPOINTMENT_CLASS);
        if ((_this.parent.activeView.isTimelineView() || !_this.parent.timeScale.enable) && _this.parent.currentView !== "TimelineYear") {
          if (!isNullOrUndefined(_this.actionObj.clone.offsetParent) && _this.actionObj.clone.offsetParent.classList.contains(MORE_EVENT_POPUP_CLASS)) {
            _this.isMorePopupOpened = true;
          }
          _this.actionObj.pageX = e.event.pageX;
          var rows = _this.parent.activeViewOptions.headerRows;
          _this.isHeaderRows = rows.length > 0 && rows[rows.length - 1].option !== "Hour" && rows[rows.length - 1].option !== "Date";
          _this.isTimelineDayProcess = !_this.parent.activeViewOptions.timeScale.enable || _this.isHeaderRows || _this.parent.currentView === "TimelineMonth" || rows.length > 0 && rows[rows.length - 1].option === "Date";
          _this.isStepDragging = !_this.isTimelineDayProcess && _this.actionObj.slotInterval !== _this.actionObj.interval;
          if (_this.isTimelineDayProcess) {
            _this.timelineEventModule = new TimelineEvent(_this.parent, "day");
          } else {
            _this.timelineEventModule = new TimelineEvent(_this.parent, "hour");
          }
        }
        if (_this.parent.currentView === "TimelineYear") {
          _this.yearEvent = new YearEvent(_this.parent);
        }
        if (_this.parent.currentView === "Month") {
          _this.startTime = resetTime(new Date(_this.startTime)).getTime();
          _this.updateOriginalElement(_this.actionObj.clone);
          _this.monthEvent = new MonthEvent(_this.parent);
        }
        if (_this.parent.currentView === "Day" || _this.parent.currentView === "Week" || _this.parent.currentView === "WorkWeek") {
          _this.verticalEvent = new VerticalEvent(_this.parent);
          _this.verticalEvent.initializeValues();
          var splitEvents = _this.splitEvent(_this.actionObj.event);
          splitEvents.forEach(function(event) {
            var query = '.e-day-wrapper[data-date="' + resetTime(event[_this.parent.eventFields.startTime]).getTime() + '"]';
            if (_this.parent.activeViewOptions.group.resources.length > 0) {
              query = query.concat('[data-group-index = "' + _this.actionObj.groupIndex + '"]');
            }
            var appWrap = _this.parent.element.querySelector(query);
            if (appWrap) {
              var appEle = appWrap.querySelector('[data-id="' + _this.actionObj.clone.getAttribute("data-id") + '"]');
              if (appEle) {
                addClass([appEle], EVENT_ACTION_CLASS);
              }
            }
          });
        }
      });
    };
    DragAndDrop2.prototype.getSelectedData = function() {
      if (this.isMultiSelect && this.multiData.length === 0 && this.parent.selectedElements.length > 0) {
        for (var _i = 0, _a = this.parent.selectedElements; _i < _a.length; _i++) {
          var element2 = _a[_i];
          var eventGuid = element2.getAttribute("data-guid");
          var data = this.parent.eventBase.getEventByGuid(eventGuid);
          this.multiData.push(extend({}, data, null, true));
        }
      }
      return this.multiData;
    };
    DragAndDrop2.prototype.drag = function(e) {
      if (this.parent.quickPopup) {
        this.parent.quickPopup.quickPopupHide(true);
      }
      if (!isNullOrUndefined(e.target) && e.target.classList.contains(DISABLE_DATES)) {
        return;
      }
      var eventObj = extend({}, this.actionObj.event, null, true);
      var eventArgs = this.parent.eventBase.getPageCoordinates(e);
      this.actionObj.Y = this.actionObj.pageY = eventArgs.pageY;
      this.actionObj.X = this.actionObj.pageX = eventArgs.pageX;
      this.actionObj.target = e.target;
      this.widthUptoCursorPoint = this.widthUptoCursorPoint === 0 ? Math.ceil(Math.abs(this.actionObj.clone.getBoundingClientRect().left - this.actionObj.X) / this.widthPerMinute) * this.widthPerMinute : this.widthUptoCursorPoint;
      this.widthUptoCursorPoint = this.isMorePopupOpened ? this.actionObj.cellWidth : this.widthUptoCursorPoint;
      this.heightUptoCursorPoint = this.heightUptoCursorPoint === 0 ? Math.ceil(Math.abs(this.actionObj.clone.getBoundingClientRect().top - this.actionObj.Y) / this.heightPerMinute) * this.heightPerMinute : this.heightUptoCursorPoint;
      this.isAllDayDrag = this.parent.activeViewOptions.timeScale.enable ? this.actionObj.clone.classList.contains(ALLDAY_APPOINTMENT_CLASS) : this.actionObj.event[this.parent.eventFields.isAllDay];
      if (this.isStepDragging && this.minDiff === 0) {
        this.calculateMinutesDiff(eventObj);
      }
      if ((this.parent.currentView === "Month" || this.isAllDayDrag) && this.daysVariation < 0) {
        var date = this.parent.getDateFromElement(this.actionObj.target);
        if (!isNullOrUndefined(date)) {
          var currentDate = resetTime(date);
          var startDate = resetTime(new Date(eventObj[this.parent.eventFields.startTime].getTime()));
          this.daysVariation = (currentDate.getTime() - startDate.getTime()) / MS_PER_DAY;
        } else {
          this.daysVariation = 0;
        }
      } else {
        this.daysVariation = 0;
      }
      if (this.parent.eventDragArea) {
        var targetElement2 = eventArgs.target;
        this.actionObj.clone.style.top = formatUnit(targetElement2.offsetTop);
        this.actionObj.clone.style.left = formatUnit(targetElement2.offsetLeft);
        var currentTarget = closest(targetElement2, "." + ROOT);
        if (!currentTarget) {
          this.actionObj.clone.style.height = "";
          this.actionObj.clone.style.width = "";
        } else {
          if (!(this.parent.currentView === "Week" || this.parent.currentView === "WorkWeek" || this.parent.currentView === "Day")) {
            this.actionObj.clone.style.width = formatUnit(this.actionObj.element.offsetWidth);
          }
        }
      }
      this.updateScrollPosition(e);
      this.updateNavigatingPosition(e);
      this.updateDraggingDateTime(e);
      var dragArgs = {
        data: eventObj,
        event: e,
        element: this.actionObj.element,
        startTime: this.actionObj.start,
        endTime: this.actionObj.end,
        selectedData: this.updatedData
      };
      if (this.parent.group.resources.length > 0) {
        dragArgs.groupIndex = this.actionObj.groupIndex;
      }
      this.parent.trigger(drag, dragArgs);
    };
    DragAndDrop2.prototype.calculateMinutesDiff = function(eventObj) {
      if (this.parent.enableRtl) {
        this.minDiff = (this.actionObj.clone.offsetWidth - this.widthUptoCursorPoint) / this.widthPerMinute * this.actionObj.interval;
      } else {
        this.minDiff = this.widthUptoCursorPoint / this.widthPerMinute * this.actionObj.interval;
      }
      var startDate = eventObj[this.parent.eventFields.startTime];
      var startTime = this.parent.activeView.renderDates[0];
      var startEndHours = getStartEndHours(startTime, this.parent.activeView.getStartHour(), this.parent.activeView.getEndHour());
      if (startEndHours.startHour.getTime() > startDate.getTime()) {
        this.minDiff = this.minDiff + (startEndHours.startHour.getTime() - startDate.getTime()) / MS_PER_MINUTE;
      }
    };
    DragAndDrop2.prototype.dragStop = function(e) {
      var _this = this;
      this.isCursorAhead = false;
      this.removeCloneElementClasses();
      this.removeCloneElement();
      clearInterval(this.actionObj.navigationInterval);
      this.actionObj.navigationInterval = null;
      clearInterval(this.actionObj.scrollInterval);
      this.actionObj.scrollInterval = null;
      this.actionClass("removeClass");
      this.parent.uiStateValues.action = false;
      if (this.isAllowDrop(e)) {
        return;
      }
      var target = !e.target.classList.contains("e-work-cells") && this.parent.cellTemplate ? closest(e.target, ".e-work-cells") : e.target;
      var dragArgs = {
        cancel: false,
        data: this.getChangedData(this.updatedData),
        selectedData: this.updatedData,
        event: e,
        element: this.actionObj.element,
        target
      };
      this.actionObj.action = null;
      this.parent.trigger(dragStop, dragArgs, function(dragEventArgs) {
        if (dragEventArgs.cancel) {
          return;
        }
        if (_this.parent.isSpecificResourceEvents()) {
          _this.parent.crudModule.crudObj.isCrudAction = true;
          _this.parent.crudModule.crudObj.sourceEvent = [_this.parent.resourceBase.lastResourceLevel[parseInt(dragArgs.element.getAttribute("data-group-index"), 10)]];
          var currentGroupIndex = parseInt(dragArgs.target.getAttribute("data-group-index"), 10) || _this.actionObj.groupIndex;
          _this.parent.crudModule.crudObj.targetEvent = [_this.parent.resourceBase.lastResourceLevel[parseInt(currentGroupIndex.toString(), 10)]];
        }
        _this.saveChangedData(dragEventArgs, _this.isMultiSelect);
      });
      this.updatedData = [];
      this.multiData = [];
      this.isMultiSelect = false;
      this.parent.selectedElements = [];
    };
    DragAndDrop2.prototype.updateNavigatingPosition = function(e) {
      var _this = this;
      if (this.actionObj.navigation.enable) {
        var currentDate_1 = this.parent.getCurrentTime();
        if (isNullOrUndefined(this.actionObj.navigationInterval)) {
          this.actionObj.navigationInterval = window.setInterval(function() {
            if (currentDate_1) {
              var crtDate = _this.parent.getCurrentTime();
              var end = crtDate.getSeconds();
              var start = currentDate_1.getSeconds() + _this.actionObj.navigation.timeDelay / 1e3;
              start = start >= 60 ? start - 60 : start;
              if (start === end) {
                currentDate_1 = _this.parent.getCurrentTime();
                _this.viewNavigation(e);
                _this.updateDraggingDateTime(e);
              }
            }
          }, this.actionObj.navigation.timeDelay);
        }
      }
    };
    DragAndDrop2.prototype.updateDraggingDateTime = function(e) {
      if (!isNullOrUndefined(this.actionObj.clone.offsetParent) && this.actionObj.clone.offsetParent.classList.contains(MORE_EVENT_POPUP_CLASS)) {
        this.morePopupEventDragging(e);
      } else if (this.parent.activeView.isTimelineView() && this.parent.currentView !== "TimelineYear") {
        this.timelineEventModule.dateRender = this.parent.activeView.renderDates;
        this.timelineEventModule.cellWidth = this.actionObj.cellWidth;
        this.timelineEventModule.getSlotDates();
        this.actionObj.cellWidth = this.isHeaderRows ? this.timelineEventModule.cellWidth : this.parent.element.querySelector("." + WORK_CELLS_CLASS).getBoundingClientRect().width;
        this.calculateTimelineTime(e);
      } else {
        if (this.parent.currentView === "Month" || this.parent.currentView === "TimelineYear") {
          this.calculateVerticalDate(e);
        } else {
          this.calculateVerticalTime(e);
        }
      }
    };
    DragAndDrop2.prototype.navigationWrapper = function() {
      if (!this.parent.activeView.isTimelineView()) {
        if (this.parent.currentView === "Month" || !this.parent.timeScale.enable) {
          var outerWrapperCls = [].slice.call(this.parent.element.querySelectorAll("." + WORK_CELLS_CLASS));
          this.actionObj.index = this.parent.activeView.renderDates.length < this.actionObj.index ? this.parent.activeView.renderDates.length - 1 : this.actionObj.index;
          var targetWrapper = outerWrapperCls[this.actionObj.index].querySelector("." + APPOINTMENT_WRAPPER_CLASS);
          if (!targetWrapper) {
            targetWrapper = createElement("div", { className: APPOINTMENT_WRAPPER_CLASS });
            outerWrapperCls[this.actionObj.index].appendChild(targetWrapper);
          }
          targetWrapper.appendChild(this.actionObj.clone);
        } else {
          var wrapperClass = this.actionObj.clone.classList.contains(ALLDAY_APPOINTMENT_CLASS) ? "." + ALLDAY_APPOINTMENT_WRAPPER_CLASS : "." + APPOINTMENT_WRAPPER_CLASS;
          this.parent.element.querySelectorAll(wrapperClass).item(this.actionObj.index).appendChild(this.actionObj.clone);
          if (wrapperClass === "." + ALLDAY_APPOINTMENT_WRAPPER_CLASS) {
            var elementHeight = this.getAllDayEventHeight();
            var event_2 = [].slice.call(this.parent.element.querySelectorAll("." + ALLDAY_CELLS_CLASS + ":first-child"));
            if (event_2[0].offsetHeight < elementHeight) {
              for (var _i = 0, event_1 = event_2; _i < event_1.length; _i++) {
                var e = event_1[_i];
                e.style.height = (elementHeight + 2) / 12 + "em";
              }
            }
            this.actionObj.clone.style.height = formatUnit(elementHeight);
          }
          this.actionObj.height = parseInt(this.actionObj.clone.style.height, 10);
        }
      } else {
        var outWrapper = void 0;
        if (this.parent.activeViewOptions.group.resources.length > 0) {
          outWrapper = this.parent.element.querySelectorAll(".e-appointment-container:not(.e-hidden)").item(this.actionObj.index);
        } else {
          outWrapper = this.parent.element.querySelector("." + APPOINTMENT_CONTAINER_CLASS);
        }
        if (!isNullOrUndefined(outWrapper)) {
          var tarWrapper_1 = outWrapper.querySelector("." + APPOINTMENT_WRAPPER_CLASS);
          if (!tarWrapper_1) {
            tarWrapper_1 = createElement("div", { className: APPOINTMENT_WRAPPER_CLASS });
            outWrapper.appendChild(tarWrapper_1);
          }
          this.actionObj.cloneElement.forEach(function(ele) {
            tarWrapper_1.appendChild(ele);
          });
        }
      }
    };
    DragAndDrop2.prototype.viewNavigation = function(e) {
      var navigationType;
      var dragArea = this.parent.element.querySelector("." + CONTENT_WRAP_CLASS);
      if (dragArea && (!this.scrollEdges.top && !this.scrollEdges.bottom || closest(this.actionObj.clone, "." + ALLDAY_APPOINTMENT_WRAPPER_CLASS))) {
        if (dragArea.scrollLeft === 0 && Math.round(this.actionObj.X) <= Math.round(dragArea.getBoundingClientRect().left + this.actionObj.cellWidth + window.pageXOffset)) {
          navigationType = this.parent.enableRtl ? "next" : "previous";
        } else if (Math.round(dragArea.scrollLeft) + dragArea.clientWidth === dragArea.scrollWidth && Math.round(this.actionObj.X) >= Math.round(dragArea.getBoundingClientRect().right - this.actionObj.cellWidth + window.pageXOffset)) {
          navigationType = this.parent.enableRtl ? "previous" : "next";
        }
        if (navigationType) {
          this.parent.changeDate(this.parent.activeView.getNextPreviousDate(navigationType));
        }
      }
    };
    DragAndDrop2.prototype.morePopupEventDragging = function(e) {
      if (isNullOrUndefined(e.target) || e.target && isNullOrUndefined(closest(e.target, "td"))) {
        return;
      }
      var eventObj = extend({}, this.actionObj.event, null, true);
      var eventDuration = eventObj[this.parent.eventFields.endTime].getTime() - eventObj[this.parent.eventFields.startTime].getTime();
      var td = closest(e.target, "td");
      if (this.parent.currentView === "TimelineYear" && (!td.classList.contains(WORK_CELLS_CLASS) || td.classList.contains(OTHERMONTH_CLASS))) {
        return;
      }
      var dragStart2 = this.parent.getDateFromElement(td);
      var dragEnd = new Date(dragStart2.getTime());
      dragEnd.setMilliseconds(eventDuration);
      if (this.parent.activeViewOptions.group.resources.length > 0) {
        this.actionObj.groupIndex = parseInt(td.getAttribute("data-group-index"), 10);
      }
      this.actionObj.start = new Date(dragStart2.getTime());
      this.actionObj.end = new Date(dragEnd.getTime());
      this.actionObj.clone.style.top = formatUnit(td.offsetParent.offsetTop);
      this.actionObj.clone.style.left = formatUnit(td.offsetLeft);
      this.actionObj.clone.style.width = formatUnit(td.offsetWidth);
      var eventContainer = td;
      var eventWrapper;
      if (this.parent.activeView.isTimelineView()) {
        var rowIndex = closest(td, "tr").rowIndex;
        eventContainer = this.parent.element.querySelectorAll(".e-appointment-container").item(rowIndex);
      }
      eventWrapper = eventContainer.querySelector("." + APPOINTMENT_WRAPPER_CLASS);
      if (!eventWrapper) {
        eventWrapper = createElement("div", { className: APPOINTMENT_WRAPPER_CLASS });
        eventContainer.appendChild(eventWrapper);
      }
      this.appendCloneElement(eventWrapper);
    };
    DragAndDrop2.prototype.calculateVerticalTime = function(e) {
      var _this = this;
      if (isNullOrUndefined(this.actionObj.target) || this.actionObj.target && isNullOrUndefined(closest(this.actionObj.target, "tr")) || !closest(this.actionObj.target, "td").classList.contains(WORK_CELLS_CLASS) && !closest(this.actionObj.target, "td").classList.contains(ALLDAY_CELLS_CLASS)) {
        return;
      }
      if (this.parent.activeViewOptions.timeScale.enable) {
        this.swapDragging(e);
      }
      var dragArea = this.parent.element.querySelector("." + CONTENT_WRAP_CLASS);
      var eventObj = extend({}, this.actionObj.event, null, true);
      var eventStart = eventObj[this.parent.eventFields.startTime];
      var eventEnd = eventObj[this.parent.eventFields.endTime];
      var eventDuration = getUniversalTime(eventEnd) - getUniversalTime(eventStart);
      var offsetTop = Math.floor(parseInt(this.actionObj.clone.style.top, 10) / this.actionObj.cellHeight) * this.actionObj.cellHeight;
      offsetTop = offsetTop < 0 ? 0 : offsetTop;
      if (this.scrollEdges.top || this.scrollEdges.bottom) {
        offsetTop = this.scrollEdges.top ? dragArea.scrollTop - this.heightUptoCursorPoint + this.actionObj.cellHeight + window.pageYOffset : dragArea.scrollTop + dragArea.offsetHeight - this.actionObj.clone.offsetHeight + window.pageYOffset + (this.actionObj.clone.offsetHeight - this.heightUptoCursorPoint);
        offsetTop = Math.round(offsetTop / this.actionObj.cellHeight) * this.actionObj.cellHeight;
        this.actionObj.clone.style.top = formatUnit(offsetTop);
      }
      var rowIndex = this.parent.activeViewOptions.timeScale.enable ? offsetTop / this.actionObj.cellHeight : 0;
      var heightPerMinute = this.actionObj.cellHeight / this.actionObj.slotInterval;
      var diffInMinutes = parseInt(this.actionObj.clone.style.top, 10) - offsetTop;
      var tr;
      if (this.isAllDayDrag) {
        tr = this.parent.element.querySelector("." + ALLDAY_ROW_CLASS);
      } else {
        var trCollections = [].slice.call(this.parent.getContentTable().querySelectorAll("tr"));
        tr = trCollections[parseInt(rowIndex.toString(), 10)];
      }
      var index;
      if (closest(this.actionObj.target, "td").classList.contains(WORK_CELLS_CLASS) || closest(this.actionObj.target, "td").classList.contains(ALLDAY_CELLS_CLASS)) {
        index = closest(this.actionObj.target, "td").cellIndex;
      }
      var colIndex = isNullOrUndefined(index) ? closest(this.actionObj.clone, "td").cellIndex : index;
      this.actionObj.index = colIndex;
      if (isNullOrUndefined(tr)) {
        return;
      }
      var td = tr.children[parseInt(colIndex.toString(), 10)];
      if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {
        this.actionObj.groupIndex = parseInt(td.getAttribute("data-group-index"), 10);
      }
      var dragStart2;
      var dragEnd;
      if (this.parent.activeViewOptions.timeScale.enable && !this.isAllDayDrag) {
        this.appendCloneElement(this.getEventWrapper(colIndex));
        dragStart2 = this.parent.getDateFromElement(td);
        dragStart2.setMinutes(dragStart2.getMinutes() + diffInMinutes / heightPerMinute);
        dragEnd = new Date(dragStart2.getTime());
        if (this.actionObj.element.classList.contains(ALLDAY_APPOINTMENT_CLASS)) {
          dragEnd.setMinutes(dragEnd.getMinutes() + this.actionObj.slotInterval);
        } else {
          dragEnd.setMilliseconds(eventDuration);
        }
      } else {
        dragStart2 = this.parent.getDateFromElement(td);
        dragStart2.setDate(dragStart2.getDate() - this.daysVariation);
        dragStart2.setHours(eventStart.getHours(), eventStart.getMinutes(), eventStart.getSeconds());
        dragEnd = new Date(dragStart2.getTime());
        dragEnd.setMilliseconds(eventDuration);
        if (!this.actionObj.element.classList.contains(ALLDAY_APPOINTMENT_CLASS) && this.actionObj.clone.classList.contains(ALLDAY_APPOINTMENT_CLASS)) {
          dragEnd = addDays(resetTime(dragEnd), 1);
        }
        var index_1 = this.parent.activeViewOptions.group.byDate || this.parent.virtualScrollModule && !this.parent.activeViewOptions.timeScale.enable ? colIndex : void 0;
        this.updateAllDayEvents(dragStart2, dragEnd, index_1);
      }
      this.actionObj.start = /* @__PURE__ */ new Date(+dragStart2);
      this.actionObj.end = /* @__PURE__ */ new Date(+dragEnd);
      var event = this.getUpdatedEvent(this.actionObj.start, this.actionObj.end, this.actionObj.event);
      var dynamicWrappers = [].slice.call(this.parent.element.querySelectorAll(".e-dynamic-clone"));
      for (var _i = 0, dynamicWrappers_1 = dynamicWrappers; _i < dynamicWrappers_1.length; _i++) {
        var wrapper = dynamicWrappers_1[_i];
        remove(wrapper);
      }
      if (this.multiData.length > 0) {
        if (this.isAllDayTarget && this.isAllDayDrag && !isNullOrUndefined(this.actionObj.isAllDay) && !this.actionObj.isAllDay) {
          var targetCellTime_1 = parseInt(closest(this.actionObj.target, "td").getAttribute("data-date"), 10);
          this.multiData.forEach(function(data) {
            _this.swagData.push(extend({}, data, null, true));
            if (data[_this.parent.eventFields.isAllDay]) {
              data[_this.parent.eventFields.startTime] = new Date(data[_this.parent.eventFields.startTime].getTime() + (targetCellTime_1 - _this.startTime));
              var startTime = new Date(data[_this.parent.eventFields.startTime]);
              var endTime = new Date(startTime.setMinutes(startTime.getMinutes() + _this.actionObj.slotInterval));
              data[_this.parent.eventFields.endTime] = endTime;
              data[_this.parent.eventFields.isAllDay] = false;
            }
          });
          this.startTime = targetCellTime_1;
        }
        if (this.isAllDayTarget && this.isAllDayDrag && !isNullOrUndefined(this.actionObj.isAllDay) && this.actionObj.isAllDay && this.swagData.length > 0) {
          this.multiData = this.swagData;
          this.swagData = [];
          var eventObj_1 = extend({}, this.actionObj.event, null, true);
          this.startTime = eventObj_1[this.parent.eventFields.startTime].getTime();
        }
        var startTimeDiff = event[this.parent.eventFields.startTime].getTime() - this.startTime;
        for (var index_2 = 0; index_2 < this.multiData.length; index_2++) {
          this.updatedData[parseInt(index_2.toString(), 10)] = this.updateMultipleData(this.multiData[parseInt(index_2.toString(), 10)], startTimeDiff);
          var dayIndex2 = this.getDayIndex(this.updatedData[parseInt(index_2.toString(), 10)]);
          if (dayIndex2 >= 0) {
            var wrapper = this.getEventWrapper(dayIndex2, this.updatedData[parseInt(index_2.toString(), 10)][this.parent.eventFields.isAllDay]);
            this.appendCloneElement(wrapper, this.actionObj.cloneElement[parseInt(index_2.toString(), 10)]);
            this.updateEventHeight(this.updatedData[parseInt(index_2.toString(), 10)], index_2, dayIndex2);
          } else {
            if (!isNullOrUndefined(this.actionObj.cloneElement[parseInt(index_2.toString(), 10)].parentNode)) {
              remove(this.actionObj.cloneElement[parseInt(index_2.toString(), 10)]);
            }
          }
        }
      } else {
        this.updateEventHeight(event);
      }
      this.updateTimePosition(this.actionObj.start, this.updatedData);
    };
    DragAndDrop2.prototype.splitEvent = function(event) {
      var eventFields = this.parent.eventFields;
      var eventData = [];
      var startTime = event[eventFields.startTime];
      var endTime = event[eventFields.endTime];
      if (resetTime(new Date(startTime.getTime())) < resetTime(new Date(endTime.getTime()))) {
        var startReferenceDate = resetTime(new Date(startTime.getTime()));
        var endReferenceDate = new Date(startReferenceDate.getTime());
        for (var i = 0; startReferenceDate < new Date(endTime.getTime()); i++) {
          endReferenceDate = new Date(endReferenceDate.setDate(startReferenceDate.getDate() + 1));
          var eventObj = extend({}, event, null, true);
          eventObj[eventFields.startTime] = new Date(startReferenceDate);
          eventObj[eventFields.endTime] = new Date(endReferenceDate);
          startReferenceDate = new Date(startReferenceDate.setDate(startReferenceDate.getDate() + 1));
          eventData.push(eventObj);
        }
        var index = eventData.length - 1;
        eventData[0][eventFields.startTime] = startTime;
        eventData[parseInt(index.toString(), 10)][eventFields.endTime] = endTime;
      } else {
        eventData.push(event);
      }
      return eventData;
    };
    DragAndDrop2.prototype.updateMultipleData = function(data, timeDifference) {
      var eventObj = extend({}, data, null, true);
      if (!isNullOrUndefined(this.actionObj.isAllDay) && this.parent.activeViewOptions.timeScale.enable && (this.isAllDayTarget && eventObj[this.parent.eventFields.isAllDay] || !this.isAllDayTarget && !eventObj[this.parent.eventFields.isAllDay])) {
        eventObj[this.parent.eventFields.isAllDay] = this.actionObj.isAllDay;
      }
      var endTimeDiff = eventObj[this.parent.eventFields.endTime].getTime() - eventObj[this.parent.eventFields.startTime].getTime();
      if (eventObj[this.parent.eventFields.isAllDay]) {
        var differInDays = Math.ceil(timeDifference / (1e3 * 3600 * 24));
        var day = Math.ceil(endTimeDiff / (1e3 * 3600 * 24));
        var startTime = new Date(eventObj[this.parent.eventFields.startTime]);
        eventObj[this.parent.eventFields.startTime] = resetTime(new Date(startTime.setDate(startTime.getDate() + differInDays)));
        eventObj[this.parent.eventFields.endTime] = addDays(eventObj[this.parent.eventFields.startTime], day);
      } else {
        eventObj[this.parent.eventFields.startTime] = new Date(eventObj[this.parent.eventFields.startTime].getTime() + timeDifference);
        eventObj[this.parent.eventFields.endTime] = new Date(eventObj[this.parent.eventFields.startTime].getTime() + endTimeDiff);
      }
      return eventObj;
    };
    DragAndDrop2.prototype.getDayIndex = function(event) {
      var eventObj = extend({}, event, null, true);
      var startDate = resetTime(eventObj[this.parent.eventFields.startTime]);
      if (this.parent.activeViewOptions.timeScale.enable && !eventObj[this.parent.eventFields.isAllDay]) {
        var startHour = this.parent.activeView.getStartHour();
        startDate.setMilliseconds(startHour.getTime() - resetTime(startHour).getTime());
      }
      var startTime = startDate.getTime();
      var query = "";
      var wrapper = DAY_WRAPPER_CLASS;
      if (this.parent.activeViewOptions.timeScale.enable && eventObj[this.parent.eventFields.isAllDay]) {
        wrapper = ALLDAY_APPOINTMENT_WRAPPER_CLASS;
      } else {
        wrapper = WORK_CELLS_CLASS;
      }
      query = "." + wrapper + '[data-date="' + startTime + '"]';
      if (this.parent.activeViewOptions.group.resources.length > 0) {
        query = query + '[data-group-index="' + this.actionObj.groupIndex + '"]';
      }
      this.targetTd = this.parent.element.querySelector(query);
      if (isNullOrUndefined(this.targetTd)) {
        return -1;
      }
      return this.targetTd.cellIndex;
    };
    DragAndDrop2.prototype.updateEventHeight = function(event, index, colIndex) {
      this.verticalEvent.initializeValues();
      var datesCount = this.verticalEvent.getStartCount();
      if (!this.parent.uiStateValues.isGroupAdaptive) {
        for (var i = 0; i < this.actionObj.groupIndex; i++) {
          if (this.verticalEvent.dateRender[parseInt(i.toString(), 10)]) {
            datesCount = datesCount + this.verticalEvent.dateRender[parseInt(i.toString(), 10)].length;
          }
        }
      }
      var indexGroup = this.parent.uiStateValues.isGroupAdaptive ? datesCount : this.actionObj.groupIndex;
      var target = this.parent.activeViewOptions.group.byDate && !isNullOrUndefined(this.parent.getDateFromElement(this.actionObj.target)) ? true : false;
      if (target || !this.parent.activeViewOptions.group.byDate) {
        var dynamicIndex = -1;
        var dayIndex2 = !this.parent.activeViewOptions.group.byDate ? isNullOrUndefined(index) ? this.actionObj.index - datesCount : colIndex - datesCount : this.parent.getIndexOfDate(this.verticalEvent.dateRender[parseInt(indexGroup.toString(), 10)], resetTime(
          // eslint-disable-next-line max-len
          this.parent.getDateFromElement(isNullOrUndefined(index) ? this.actionObj.target : this.targetTd)
        ));
        var splitEvents = this.splitEvent(event);
        var events_1 = this.parent.eventBase.isAllDayAppointment(event) || splitEvents.length > 2 || this.parent.eventSettings.spannedEventPlacement !== "TimeSlot" ? [event] : splitEvents;
        for (var i = 0; i < events_1.length; i++) {
          if (i > 0) {
            var filterQuery = '.e-day-wrapper[data-date="' + resetTime(events_1[parseInt(i.toString(), 10)][this.parent.eventFields.startTime]).getTime() + '"]';
            if (this.parent.activeViewOptions.group.resources.length > 0) {
              filterQuery = filterQuery.concat('[data-group-index = "' + this.actionObj.groupIndex + '"]');
            }
            var appWrap = this.parent.element.querySelector(filterQuery);
            if (appWrap) {
              dayIndex2 = dayIndex2 + 1;
              dynamicIndex = appWrap.cellIndex;
            } else {
              dayIndex2 = -1;
            }
          }
          if (dayIndex2 >= 0) {
            var record = this.verticalEvent.isSpannedEvent(events_1[parseInt(i.toString(), 10)], dayIndex2, indexGroup);
            var eStart = record[this.verticalEvent.fields.startTime];
            var eEnd = record[this.verticalEvent.fields.endTime];
            var appHeight = this.parent.activeViewOptions.timeScale.enable ? this.verticalEvent.getHeight(eStart, eEnd) : this.actionObj.element.offsetHeight;
            var topValue = this.parent.activeViewOptions.timeScale.enable ? this.verticalEvent.getTopValue(eStart, dayIndex2, indexGroup) : this.actionObj.element.offsetTop;
            if (isNullOrUndefined(index)) {
              if (i === 0) {
                this.actionObj.clone.style.top = formatUnit(topValue);
                this.actionObj.clone.style.height = formatUnit(appHeight);
              } else {
                this.renderSpannedEvents(record, dynamicIndex, topValue, appHeight);
              }
            } else {
              var appWidth = this.actionObj.cellWidth;
              if (event[this.parent.eventFields.isAllDay]) {
                topValue = this.parent.element.querySelector("." + ALLDAY_ROW_CLASS).offsetTop;
                appHeight = this.getAllDayEventHeight();
                var timeDiff = event[this.parent.eventFields.endTime].getTime() - event[this.parent.eventFields.startTime].getTime();
                var allDayDifference = Math.ceil(timeDiff / (1e3 * 3600 * 24));
                if (allDayDifference >= 0) {
                  appWidth = allDayDifference * this.actionObj.cellWidth;
                }
              }
              if (this.actionObj.cloneElement[parseInt(index.toString(), 10)]) {
                if (i === 0) {
                  this.actionObj.cloneElement[parseInt(index.toString(), 10)].style.top = formatUnit(topValue);
                  this.actionObj.cloneElement[parseInt(index.toString(), 10)].style.height = formatUnit(appHeight);
                  this.actionObj.cloneElement[parseInt(index.toString(), 10)].style.width = formatUnit(appWidth);
                  this.actionObj.cloneElement[parseInt(index.toString(), 10)].style.left = formatUnit(0);
                } else {
                  this.renderSpannedEvents(record, dynamicIndex, topValue, appHeight);
                }
              }
            }
          }
        }
      }
    };
    DragAndDrop2.prototype.renderSpannedEvents = function(record, index, top, height) {
      var startTime = record[this.parent.eventFields.startTime].getTime();
      var endTime = record[this.parent.eventFields.endTime].getTime();
      if (startTime !== endTime) {
        var appointmentElement = this.verticalEvent.createAppointmentElement(record, false, record.isSpanned, this.actionObj.groupIndex);
        addClass([appointmentElement], [CLONE_ELEMENT_CLASS, "e-dynamic-clone"]);
        setStyleAttribute(appointmentElement, {
          "width": "100%",
          "height": height + "px",
          "top": top + "px",
          "border": "0px"
        });
        var appointmentWrap = [].slice.call(this.parent.element.querySelectorAll("." + APPOINTMENT_WRAPPER_CLASS));
        appointmentWrap[parseInt(index.toString(), 10)].appendChild(appointmentElement);
      }
    };
    DragAndDrop2.prototype.getRenderedDates = function() {
      var _this = this;
      var _a, _b;
      var renderDates = this.parent.activeView.renderDates;
      (_a = this.parent.eventBase.slots).push.apply(_a, this.parent.activeView.renderDates.map(function(date) {
        return +date;
      }));
      if (this.parent.activeViewOptions.group.resources.length > 0) {
        this.parent.eventBase.slots = [];
        var resources = this.parent.resourceBase.lastResourceLevel.filter(function(res) {
          return res.groupIndex === _this.actionObj.groupIndex;
        });
        renderDates = resources[0].renderDates;
        (_b = this.parent.eventBase.slots).push.apply(_b, renderDates.map(function(date) {
          return +date;
        }));
      }
      return renderDates;
    };
    DragAndDrop2.prototype.updateAllDayEvents = function(startDate, endDate, colIndex) {
      this.parent.eventBase.slots = [];
      var event = this.getUpdatedEvent(startDate, endDate, this.actionObj.event);
      var renderDates = this.getRenderedDates();
      var events = this.parent.eventBase.splitEvent(event, renderDates);
      var query = '.e-all-day-cells[data-date="' + events[0][this.parent.eventFields.startTime].getTime() + '"]';
      if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {
        query = query.concat('[data-group-index = "' + this.actionObj.groupIndex + '"]');
      }
      var cell = [].slice.call(this.parent.element.querySelectorAll(query));
      if (cell.length > 0 || !isNullOrUndefined(colIndex)) {
        var cellIndex = !isNullOrUndefined(colIndex) ? colIndex : cell[0].cellIndex;
        this.appendCloneElement(this.getEventWrapper(cellIndex));
        this.actionObj.clone.style.width = formatUnit(events[0].data.count * this.actionObj.cellWidth);
      }
    };
    DragAndDrop2.prototype.swapDragging = function(e) {
      var colIndex = closest(this.actionObj.target, "td").cellIndex;
      if (closest(this.actionObj.target, "." + DATE_HEADER_WRAP_CLASS) && !closest(this.actionObj.clone, "." + ALLDAY_APPOINTMENT_WRAPPER_CLASS)) {
        addClass([this.actionObj.clone], ALLDAY_APPOINTMENT_CLASS);
        this.appendCloneElement(this.getEventWrapper(colIndex));
        this.actionObj.isAllDay = true;
        var eventHeight = this.getAllDayEventHeight();
        var allDayElement = [].slice.call(this.parent.element.querySelectorAll("." + ALLDAY_CELLS_CLASS + ":first-child"));
        if (allDayElement[0].offsetHeight < eventHeight) {
          for (var _i = 0, allDayElement_1 = allDayElement; _i < allDayElement_1.length; _i++) {
            var element2 = allDayElement_1[_i];
            element2.style.height = (eventHeight + 2) / 12 + "em";
          }
        }
        setStyleAttribute(this.actionObj.clone, {
          width: formatUnit(this.actionObj.cellWidth),
          height: formatUnit(eventHeight),
          top: formatUnit(this.parent.element.querySelector("." + ALLDAY_ROW_CLASS).offsetTop)
        });
      }
      if (closest(this.actionObj.target, "." + WORK_CELLS_CLASS) && !closest(this.actionObj.clone, "." + DAY_WRAPPER_CLASS)) {
        removeClass([this.actionObj.clone], ALLDAY_APPOINTMENT_CLASS);
        this.appendCloneElement(this.getEventWrapper(colIndex));
        this.actionObj.isAllDay = false;
        var height = this.actionObj.element.offsetHeight === 0 ? this.actionObj.height : this.actionObj.element.offsetHeight;
        setStyleAttribute(this.actionObj.clone, {
          left: formatUnit(0),
          height: formatUnit(height),
          width: formatUnit(this.actionObj.cellWidth)
        });
      }
    };
    DragAndDrop2.prototype.calculateVerticalDate = function(e) {
      if (isNullOrUndefined(e.target) || e.target && isNullOrUndefined(closest(e.target, "tr")) || e.target && e.target.tagName === "DIV") {
        return;
      }
      var eventObj = extend({}, this.actionObj.event, null, true);
      if (isNullOrUndefined(this.parent.eventDragArea)) {
        this.removeCloneElement();
      }
      var eventDuration = getUniversalTime(eventObj[this.parent.eventFields.endTime]) - getUniversalTime(eventObj[this.parent.eventFields.startTime]);
      var td = closest(this.actionObj.target, "td");
      if (!isNullOrUndefined(td)) {
        var tr = td.parentElement;
        this.actionObj.index = tr.rowIndex * tr.children.length + td.cellIndex;
        var workCells = [].slice.call(this.parent.element.querySelectorAll("." + WORK_CELLS_CLASS));
        td = workCells[this.actionObj.index];
        var currentDate = this.parent.getDateFromElement(td);
        if (!isNullOrUndefined(currentDate)) {
          if (this.parent.activeViewOptions.group.resources.length > 0) {
            this.actionObj.groupIndex = parseInt(td.getAttribute("data-group-index"), 10);
          }
          var timeString = new Date(currentDate.setDate(currentDate.getDate() - this.daysVariation));
          var dragStart2 = new Date(timeString.getTime());
          var startTimeDiff = getUniversalTime(eventObj[this.parent.eventFields.startTime]) - getUniversalTime(resetTime(/* @__PURE__ */ new Date(+eventObj[this.parent.eventFields.startTime])));
          dragStart2.setMilliseconds(startTimeDiff);
          var dragEnd = new Date(dragStart2.getTime());
          dragEnd.setMilliseconds(eventDuration);
          this.actionObj.start = new Date(dragStart2.getTime());
          this.actionObj.end = new Date(dragEnd.getTime());
        }
      }
      var event = this.getUpdatedEvent(this.actionObj.start, this.actionObj.end, this.actionObj.event);
      var eventWrappers = [].slice.call(this.parent.element.querySelectorAll("." + CLONE_ELEMENT_CLASS));
      for (var _i = 0, eventWrappers_1 = eventWrappers; _i < eventWrappers_1.length; _i++) {
        var wrapper = eventWrappers_1[_i];
        remove(wrapper);
      }
      if (this.multiData && this.multiData.length > 0) {
        var startTime = resetTime(new Date(event[this.parent.eventFields.startTime]));
        var startTimeDiff = startTime.getTime() - this.startTime;
        if (this.parent.currentView === "TimelineYear" && this.parent.group.resources.length > 0) {
          startTimeDiff = (startTime.getFullYear() - new Date(this.startTime).getFullYear()) * 12;
          startTimeDiff -= new Date(this.startTime).getMonth();
          startTimeDiff += startTime.getMonth();
        }
        for (var index = 0; index < this.multiData.length; index++) {
          this.updatedData[parseInt(index.toString(), 10)] = this.updateMultipleVerticalDate(this.multiData[parseInt(index.toString(), 10)], startTimeDiff);
          if (this.parent.currentView === "TimelineYear") {
            this.dynamicYearlyEventsRendering(this.updatedData[parseInt(index.toString(), 10)]);
          } else {
            this.dynamicEventsRendering(this.updatedData[parseInt(index.toString(), 10)]);
          }
        }
      } else {
        if (this.parent.currentView === "TimelineYear") {
          this.dynamicYearlyEventsRendering(event);
        } else {
          this.dynamicEventsRendering(event);
        }
      }
    };
    DragAndDrop2.prototype.updateMultipleVerticalDate = function(data, timeDifference) {
      var eventObj = extend({}, data, null, true);
      var eventDuration = eventObj[this.parent.eventFields.endTime].getTime() - eventObj[this.parent.eventFields.startTime].getTime();
      var startDate = new Date(eventObj[this.parent.eventFields.startTime]);
      if (this.parent.currentView === "TimelineYear" && this.parent.group.resources.length > 0) {
        eventObj[this.parent.eventFields.startTime] = new Date(startDate.setMonth(startDate.getMonth() + timeDifference));
      } else {
        var differInDays = Math.ceil(timeDifference / MS_PER_DAY);
        eventObj[this.parent.eventFields.startTime] = new Date(startDate.setDate(startDate.getDate() + differInDays));
      }
      eventObj[this.parent.eventFields.endTime] = new Date(eventObj[this.parent.eventFields.startTime].getTime() + eventDuration);
      return eventObj;
    };
    DragAndDrop2.prototype.calculateTimelineTime = function(e) {
      var eventObj = extend({}, this.actionObj.event, null, true);
      var eventDuration = getUniversalTime(eventObj[this.parent.eventFields.endTime]) - getUniversalTime(eventObj[this.parent.eventFields.startTime]);
      var offsetLeft = this.parent.enableRtl ? Math.abs(this.actionObj.clone.offsetLeft) - this.actionObj.clone.offsetWidth : parseInt(this.actionObj.clone.style.left, 10);
      offsetLeft = Math.floor(offsetLeft / Math.trunc(this.actionObj.cellWidth)) * this.actionObj.cellWidth;
      var rightOffset;
      if (this.parent.enableRtl) {
        rightOffset = Math.abs(parseInt(this.actionObj.clone.style.right, 10));
        this.actionObj.clone.style.right = formatUnit(rightOffset);
      }
      offsetLeft = this.getOffsetValue(offsetLeft, rightOffset);
      var colIndex = this.getColumnIndex(offsetLeft);
      var dragArea = this.parent.element.querySelector("." + CONTENT_WRAP_CLASS);
      var contentWrapRight = dragArea.getBoundingClientRect().right;
      var cursorDrag = this.parent.activeView.isTimelineView() && !this.parent.enableRtl && this.actionObj.pageX > this.actionObj.clone.getBoundingClientRect().right && !this.isMorePopupOpened && !(this.actionObj.pageX > contentWrapRight);
      var leftVal = this.parent.eventDragArea ? dragArea.scrollLeft - dragArea.offsetLeft : 0;
      if ((this.isCursorAhead || cursorDrag) && !this.isStepDragging) {
        this.isCursorAhead = true;
      }
      var cloneIndex = Math.floor((this.actionObj.pageX - this.actionObj.clone.getBoundingClientRect().left + leftVal) / this.actionObj.cellWidth);
      if (this.parent.enableRtl) {
        cloneIndex = Math.abs(Math.floor((this.actionObj.pageX - this.actionObj.clone.getBoundingClientRect().right) / this.actionObj.cellWidth)) - 1;
      }
      if (this.cursorPointIndex < 0) {
        this.cursorIndex(e, eventObj, offsetLeft, cloneIndex);
      }
      var tr = this.parent.getContentTable().querySelector("tr");
      var index = this.getCursorCurrentIndex(colIndex, cloneIndex, tr);
      index = index < 0 ? 0 : index;
      var eventStart = this.isHeaderRows ? new Date(this.timelineEventModule.dateRender[parseInt(index.toString(), 10)].getTime()) : this.parent.getDateFromElement(tr.children[parseInt(index.toString(), 10)]);
      if (this.isStepDragging) {
        var widthDiff = this.getWidthDiff(tr, index);
        if (widthDiff !== 0) {
          var timeDiff = Math.round(widthDiff / this.widthPerMinute);
          eventStart.setMinutes(eventStart.getMinutes() + timeDiff * this.actionObj.interval);
          if (this.isCursorAhead || cursorDrag) {
            eventStart.setMilliseconds(-eventDuration);
          } else {
            eventStart.setMinutes(eventStart.getMinutes() - this.minDiff);
          }
        } else {
          eventStart = this.actionObj.start;
        }
      } else {
        if (this.isCursorAhead || cursorDrag) {
          eventStart.setMinutes(eventStart.getMinutes() + (this.isTimelineDayProcess ? MINUTES_PER_DAY : this.actionObj.slotInterval));
          eventStart.setMilliseconds(-eventDuration);
        } else {
          eventStart.setMinutes(eventStart.getMinutes() - this.cursorPointIndex * (this.isTimelineDayProcess ? MINUTES_PER_DAY : this.actionObj.slotInterval));
        }
      }
      eventStart = this.calculateIntervalTime(eventStart);
      if (this.isTimelineDayProcess) {
        var eventSrt = eventObj[this.parent.eventFields.startTime];
        eventStart.setHours(eventSrt.getHours(), eventSrt.getMinutes(), eventSrt.getSeconds());
      }
      if (this.parent.eventDragArea) {
        var targetDate = this.parent.getDateFromElement(e.target);
        if (!isNullOrUndefined(targetDate)) {
          if (!this.parent.activeViewOptions.timeScale.enable || this.parent.currentView === "TimelineMonth") {
            var eventSrt = eventObj[this.parent.eventFields.startTime];
            eventStart = new Date(targetDate.setHours(eventSrt.getHours(), eventSrt.getMinutes(), eventSrt.getSeconds()));
          } else {
            eventStart = targetDate;
          }
        }
      }
      var eventEnd = new Date(eventStart.getTime());
      eventEnd.setMilliseconds(eventDuration);
      var eventsData = [this.getUpdatedEvent(eventStart, eventEnd, this.actionObj.event)];
      if (this.multiData.length > 0) {
        var startTimeDiff = eventsData[0][this.parent.eventFields.startTime].getTime() - this.startTime;
        for (var i = 0; i < this.multiData.length; i++) {
          this.updatedData[parseInt(i.toString(), 10)] = this.updateMultipleData(this.multiData[parseInt(i.toString(), 10)], startTimeDiff);
        }
        eventsData = this.updatedData;
      }
      for (var dataIndex = 0; dataIndex < eventsData.length; dataIndex++) {
        var cloneElement = this.multiData.length > 0 ? this.actionObj.cloneElement[parseInt(dataIndex.toString(), 10)] : this.actionObj.clone;
        if (isNullOrUndefined(this.parent.eventDragArea)) {
          var events_2 = this.timelineEventModule.splitEvent(eventsData[parseInt(dataIndex.toString(), 10)], this.timelineEventModule.dateRender);
          var eventData = events_2[0].data;
          var startTime = this.timelineEventModule.getStartTime(events_2[0], eventData);
          var endTime = this.timelineEventModule.getEndTime(events_2[0], eventData);
          var width = this.timelineEventModule.getEventWidth(startTime, endTime, eventObj[this.parent.eventFields.isAllDay], eventData.count);
          var day = this.parent.getIndexOfDate(this.timelineEventModule.dateRender, resetTime(new Date(startTime.getTime())));
          day = day < 0 ? 0 : day;
          var left = this.timelineEventModule.getPosition(startTime, endTime, eventObj[this.parent.eventFields.isAllDay], day);
          if (this.parent.enableRtl) {
            cloneElement.style.right = formatUnit(left);
          } else {
            cloneElement.style.left = formatUnit(left);
          }
          if (!this.isMorePopupOpened) {
            cloneElement.style.width = formatUnit(width);
          }
        }
        if (this.parent.activeViewOptions.group.resources.length > 0) {
          this.calculateResourceGroupingPosition(e, cloneElement);
        }
        this.actionObj.start = new Date(eventStart.getTime());
        this.actionObj.end = new Date(eventEnd.getTime());
        this.updateTimePosition(this.actionObj.start, this.updatedData);
      }
    };
    DragAndDrop2.prototype.getOffsetValue = function(offsetLeft, rightOffset) {
      if (this.scrollEdges.left || this.scrollEdges.right) {
        var viewEle = this.parent.element.querySelector("." + CONTENT_WRAP_CLASS);
        if (this.parent.enableRtl) {
          rightOffset = viewEle.offsetWidth - viewEle.scrollLeft;
          if (this.scrollEdges.right) {
            rightOffset = rightOffset - viewEle.offsetWidth + this.actionObj.clone.offsetWidth - (this.actionObj.clone.offsetWidth - this.widthUptoCursorPoint);
          } else {
            rightOffset = rightOffset + this.widthUptoCursorPoint;
            if (rightOffset - this.widthUptoCursorPoint >= viewEle.scrollWidth) {
              this.actionObj.clone.style.width = formatUnit(this.actionObj.clone.offsetWidth - this.widthUptoCursorPoint + this.actionObj.cellWidth);
              rightOffset = viewEle.scrollLeft - viewEle.scrollWidth;
            }
          }
          if (isNullOrUndefined(this.parent.eventDragArea)) {
            this.actionObj.clone.style.left = formatUnit(rightOffset);
          }
        } else {
          if (this.scrollEdges.left) {
            offsetLeft = viewEle.scrollLeft - this.widthUptoCursorPoint + this.actionObj.cellWidth;
            if (viewEle.scrollLeft + viewEle.offsetWidth >= viewEle.offsetWidth) {
              viewEle.scrollLeft = viewEle.scrollLeft - 1;
            } else if (this.actionObj.clone.offsetLeft === 0) {
              offsetLeft = viewEle.scrollLeft;
            }
          } else {
            offsetLeft = viewEle.scrollLeft + viewEle.offsetWidth - this.actionObj.clone.offsetWidth + (this.actionObj.clone.offsetWidth - this.widthUptoCursorPoint);
          }
          offsetLeft = offsetLeft < 0 ? 0 : offsetLeft;
          if (isNullOrUndefined(this.parent.eventDragArea)) {
            this.actionObj.clone.style.left = formatUnit(offsetLeft);
          }
        }
      }
      return offsetLeft;
    };
    DragAndDrop2.prototype.getWidthDiff = function(tr, index) {
      var pages = this.scrollArgs.element.getBoundingClientRect();
      if (pages.left <= this.actionObj.pageX && pages.right >= this.actionObj.pageX) {
        var targetLeft = tr.children[parseInt(index.toString(), 10)].offsetLeft;
        var pageX = this.actionObj.pageX - pages.left;
        if (this.parent.enableRtl) {
          return targetLeft + this.actionObj.cellWidth - (this.scrollArgs.element.scrollLeft + pageX);
        } else {
          return this.scrollArgs.element.scrollLeft + pageX - targetLeft;
        }
      }
      return 0;
    };
    DragAndDrop2.prototype.getColumnIndex = function(offsetLeft) {
      var index = Math.floor(offsetLeft / Math.trunc(this.actionObj.cellWidth));
      if (this.isHeaderRows) {
        return index;
      }
      return this.getIndex(index);
    };
    DragAndDrop2.prototype.getCursorCurrentIndex = function(colIndex, cloneIndex, tr) {
      var index = colIndex + cloneIndex;
      if (this.isHeaderRows) {
        var dateLength = Math.floor(tr.offsetWidth / this.actionObj.cellWidth);
        return index > dateLength - 1 ? dateLength - 1 : index;
      }
      return index > tr.children.length - 1 ? tr.children.length - 1 : index;
    };
    DragAndDrop2.prototype.cursorIndex = function(e, event, left, index) {
      var td = closest(e.target, ".e-work-cells");
      if (!isNullOrUndefined(td) && !this.isMorePopupOpened) {
        var targetDate = this.parent.getDateFromElement(td);
        if (this.isHeaderRows) {
          var currentIndex = Math.floor(left / this.actionObj.cellWidth);
          targetDate = new Date(this.timelineEventModule.dateRender[currentIndex + index].getTime());
        }
        var timeDiff = targetDate.getTime() - event[this.parent.eventFields.startTime].getTime();
        if (this.isTimelineDayProcess) {
          this.cursorPointIndex = Math.abs(Math.ceil(timeDiff / MS_PER_DAY));
        } else {
          var widthDiff = Math.floor(timeDiff / MS_PER_MINUTE / (this.actionObj.slotInterval / this.actionObj.cellWidth));
          this.cursorPointIndex = Math.floor(widthDiff / this.actionObj.cellWidth);
          this.cursorPointIndex = this.cursorPointIndex < 0 ? 0 : this.cursorPointIndex;
        }
      } else {
        this.cursorPointIndex = 0;
      }
    };
    DragAndDrop2.prototype.calculateResourceGroupingPosition = function(e, cloneElement) {
      var dragArea = this.parent.element.querySelector("." + CONTENT_WRAP_CLASS);
      var trCollection = [].slice.call(this.parent.element.querySelectorAll(".e-content-wrap .e-content-table tr:not(.e-hidden)"));
      var translateY = getTranslateY(dragArea.querySelector("table"));
      translateY = isNullOrUndefined(translateY) ? 0 : translateY;
      var rowHeight = this.parent.rowAutoHeight ? ~~(dragArea.querySelector("table").offsetHeight / trCollection.length) : this.actionObj.cellHeight;
      var rowIndex = Math.floor(Math.floor(this.actionObj.Y + (dragArea.scrollTop - translateY - (window.scrollY || window.pageYOffset)) - dragArea.getBoundingClientRect().top) / rowHeight);
      rowIndex = rowIndex < 0 ? 0 : rowIndex > trCollection.length - 1 ? trCollection.length - 1 : rowIndex;
      this.actionObj.index = rowIndex;
      var eventContainer = this.parent.element.querySelectorAll(".e-appointment-container:not(.e-hidden)").item(rowIndex);
      var eventWrapper = eventContainer.querySelector("." + APPOINTMENT_WRAPPER_CLASS);
      if (!eventWrapper) {
        eventWrapper = createElement("div", { className: APPOINTMENT_WRAPPER_CLASS });
        eventContainer.appendChild(eventWrapper);
      }
      this.appendCloneElement(eventWrapper, cloneElement);
      var td = closest(this.actionObj.target, "td");
      this.actionObj.groupIndex = td && !isNaN(parseInt(td.getAttribute("data-group-index"), 10)) ? parseInt(td.getAttribute("data-group-index"), 10) : this.actionObj.groupIndex;
      if (!isNullOrUndefined(this.parent.eventDragArea)) {
        return;
      }
      var top = trCollection[parseInt(rowIndex.toString(), 10)].getBoundingClientRect().height * rowIndex;
      if (this.parent.rowAutoHeight) {
        var cursorElement = this.getCursorElement(e);
        if (cursorElement) {
          top = cursorElement.classList.contains(WORK_CELLS_CLASS) ? cursorElement.offsetTop : cursorElement.offsetParent && cursorElement.offsetParent.classList.contains(APPOINTMENT_CLASS) ? cursorElement.offsetParent.offsetTop : top;
        }
      }
      cloneElement.style.top = formatUnit(top);
    };
    DragAndDrop2.prototype.appendCloneElement = function(element2, cloneElement) {
      if (cloneElement === void 0) {
        cloneElement = null;
      }
      cloneElement = isNullOrUndefined(cloneElement) ? this.actionObj.clone : cloneElement;
      var dragElement = document.querySelector(this.parent.eventDragArea);
      if (this.parent.eventDragArea && dragElement) {
        dragElement.appendChild(cloneElement);
      } else {
        element2.appendChild(cloneElement);
      }
    };
    DragAndDrop2.prototype.getEventWrapper = function(index, isAllDayDrag) {
      var eventWrapper;
      if (isNullOrUndefined(isAllDayDrag)) {
        isAllDayDrag = this.actionObj.clone.classList.contains(ALLDAY_APPOINTMENT_CLASS);
      }
      if (this.parent.activeViewOptions.timeScale.enable) {
        var wrapperClass = isAllDayDrag ? "." + ALLDAY_APPOINTMENT_WRAPPER_CLASS : "." + APPOINTMENT_WRAPPER_CLASS;
        eventWrapper = this.parent.element.querySelectorAll(wrapperClass).item(index);
      } else {
        var targetWrapper = this.parent.element.querySelectorAll("." + WORK_CELLS_CLASS).item(index);
        eventWrapper = targetWrapper.querySelector("." + APPOINTMENT_WRAPPER_CLASS);
        if (!eventWrapper) {
          eventWrapper = createElement("div", { className: APPOINTMENT_WRAPPER_CLASS });
          targetWrapper.appendChild(eventWrapper);
        }
      }
      return eventWrapper;
    };
    DragAndDrop2.prototype.getAllDayEventHeight = function() {
      var eventWrapper = createElement("div", { className: APPOINTMENT_CLASS });
      this.parent.element.querySelector("." + ALLDAY_APPOINTMENT_WRAPPER_CLASS).appendChild(eventWrapper);
      var eventHeight = eventWrapper.offsetHeight;
      remove(eventWrapper);
      return eventHeight;
    };
    DragAndDrop2.prototype.isAllowDrop = function(e) {
      if (!this.actionObj.excludeSelectors) {
        return false;
      }
      var dropSelectors = this.actionObj.excludeSelectors.split(",");
      var isAllowDrop = false;
      for (var _i = 0, dropSelectors_1 = dropSelectors; _i < dropSelectors_1.length; _i++) {
        var selector = dropSelectors_1[_i];
        if (e.target.classList.contains(selector)) {
          isAllowDrop = true;
          break;
        }
      }
      return isAllowDrop;
    };
    DragAndDrop2.prototype.getModuleName = function() {
      return "dragAndDrop";
    };
    return DragAndDrop2;
  }(ActionBase)
);
var ViewBase = (
  /** @class */
  function() {
    function ViewBase2(parent) {
      this.previousNextAction = "next";
      this.parent = parent;
    }
    ViewBase2.prototype.isTimelineView = function() {
      return this.parent.currentView.indexOf("Timeline") !== -1;
    };
    ViewBase2.prototype.getContentRows = function() {
      return [];
    };
    ViewBase2.prototype.refreshHeader = function() {
    };
    ViewBase2.prototype.refreshResourceHeader = function() {
      remove(this.element.querySelector("tbody").lastElementChild.firstElementChild);
      var resTd = createElement("td");
      resTd.appendChild(this.parent.resourceBase.createResourceColumn());
      prepend([resTd], this.element.querySelector("tbody").lastElementChild);
      this.parent.notify(contentReady, {});
    };
    ViewBase2.prototype.getDayName = function(date) {
      return this.parent.getDayNames("abbreviated")[date.getDay()];
    };
    ViewBase2.prototype.getDate = function(date) {
      return this.parent.globalize.formatDate(date, { format: "d", calendar: this.parent.getCalendarMode() });
    };
    ViewBase2.prototype.getTime = function(date) {
      if (this.parent.isAdaptive) {
        if (this.parent.activeViewOptions.timeFormat === "HH:mm" || this.parent.activeViewOptions.timeFormat === "HH.mm") {
          return this.parent.globalize.formatDate(date, { format: "H", calendar: this.parent.getCalendarMode() });
        }
        return this.parent.globalize.formatDate(date, { skeleton: "h", calendar: this.parent.getCalendarMode() });
      }
      return this.parent.getTimeString(date);
    };
    ViewBase2.prototype.getTimelineDate = function(date) {
      var text = this.parent.globalize.formatDate(date, { skeleton: "MMMd", calendar: this.parent.getCalendarMode() }) + ", " + this.parent.getDayNames("wide")[date.getDay()];
      return capitalizeFirstWord(text, "multiple");
    };
    ViewBase2.prototype.createEventTable = function(trCount) {
      var eventTable = createElement("div", { className: EVENT_TABLE_CLASS });
      append2(this.getEventRows(trCount), eventTable);
      return eventTable;
    };
    ViewBase2.prototype.getEventRows = function(trCount) {
      var eventRows = [];
      var eventContainer;
      for (var row = 0; row < trCount; row++) {
        eventContainer = createElement("div", { className: APPOINTMENT_CONTAINER_CLASS });
        if (this.parent.resourceBase && !this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.renderedResources) {
          eventContainer.setAttribute("data-group-index", this.parent.resourceBase.renderedResources[parseInt(row.toString(), 10)].groupIndex.toString());
        }
        eventRows.push(eventContainer);
      }
      return eventRows;
    };
    ViewBase2.prototype.collapseRows = function(wrap) {
      if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {
        this.parent.resourceBase.hideResourceRows(wrap.querySelector("tbody"));
        this.parent.resourceBase.hideResourceRows(wrap.querySelector("." + EVENT_TABLE_CLASS));
      }
    };
    ViewBase2.prototype.createTableLayout = function(className) {
      var clsName = className || "";
      var table = createElement("table", { className: SCHEDULE_TABLE_CLASS + " " + clsName });
      var tbody = createElement("tbody");
      table.appendChild(tbody);
      return table;
    };
    ViewBase2.prototype.setAriaAttributes = function(table) {
      table.setAttribute("role", "grid");
      table.setAttribute("aria-label", this.getLabelText(this.parent.currentView));
    };
    ViewBase2.prototype.createColGroup = function(table, lastRow) {
      var length = lastRow.length;
      if (lastRow[0] && lastRow[0].colSpan) {
        length = lastRow.map(function(value) {
          return value.colSpan;
        }).reduce(function(prev, next) {
          return prev + next;
        });
      }
      var colGroupEle = createElement("colgroup");
      for (var i = 0; i < length; i++) {
        colGroupEle.appendChild(createElement("col"));
      }
      prepend([colGroupEle], table);
    };
    ViewBase2.prototype.getScrollXIndent = function(content) {
      return content.offsetHeight - content.clientHeight > 0 ? getScrollBarWidth() : 0;
    };
    ViewBase2.prototype.scrollTopPanel = function(target) {
      this.getDatesHeaderElement().firstElementChild.scrollLeft = target.scrollLeft;
    };
    ViewBase2.prototype.scrollHeaderLabels = function(target) {
      var headerTable = this.element.querySelector(".e-date-header-wrap table");
      var colWidth = headerTable.offsetWidth / headerTable.querySelectorAll("colgroup col").length;
      var applyLeft = function(headerCells2, isRtl) {
        var currentCell;
        var tdLeft = 0;
        var colSpan = 0;
        var hiddenLeft = isRtl ? -target.scrollLeft : target.scrollLeft;
        for (var _i2 = 0, headerCells_2 = headerCells2; _i2 < headerCells_2.length; _i2++) {
          var cell = headerCells_2[_i2];
          colSpan += parseInt(cell.getAttribute("colSpan"), 10);
          if (colSpan > Math.floor(hiddenLeft / colWidth)) {
            currentCell = cell;
            break;
          }
          tdLeft += cell.offsetWidth;
        }
        if (!isNullOrUndefined(currentCell)) {
          currentCell.children[0].style[isRtl ? "right" : "left"] = hiddenLeft - tdLeft + "px";
        }
      };
      var classNames2 = [".e-header-year-cell", ".e-header-month-cell", ".e-header-week-cell", ".e-header-cells"];
      for (var _i = 0, classNames_1 = classNames2; _i < classNames_1.length; _i++) {
        var className = classNames_1[_i];
        var headerCells = [].slice.call(this.element.querySelectorAll(className));
        if (headerCells.length > 0) {
          for (var _a = 0, headerCells_1 = headerCells; _a < headerCells_1.length; _a++) {
            var element2 = headerCells_1[_a];
            element2.children[0].style[this.parent.enableRtl ? "right" : "left"] = "";
          }
          applyLeft(headerCells, this.parent.enableRtl);
        }
      }
    };
    ViewBase2.prototype.addAttributes = function(td, element2) {
      if (td.template) {
        append2(td.template, element2);
      }
      if (td.colSpan) {
        element2.setAttribute("colspan", td.colSpan.toString());
      }
      if (td.className) {
        addClass([element2], td.className);
      }
    };
    ViewBase2.prototype.getHeaderBarHeight = function() {
      var headerBarHeight = 2;
      if (this.parent.headerModule) {
        headerBarHeight += getOuterHeight(this.parent.headerModule.getHeaderElement());
      }
      if (this.parent.uiStateValues.isGroupAdaptive) {
        var resHeader = this.parent.element.querySelector("." + RESOURCE_HEADER_TOOLBAR);
        if (resHeader) {
          headerBarHeight += resHeader.offsetHeight;
        }
      }
      return headerBarHeight;
    };
    ViewBase2.prototype.renderPanel = function(type) {
      if (type === PREVIOUS_PANEL_CLASS) {
        prepend([this.element], this.parent.element.querySelector("." + TABLE_CONTAINER_CLASS));
      } else {
        this.parent.element.querySelector("." + TABLE_CONTAINER_CLASS).appendChild(this.element);
      }
    };
    ViewBase2.prototype.setPanel = function(panel) {
      this.element = panel;
    };
    ViewBase2.prototype.getPanel = function() {
      return this.element;
    };
    ViewBase2.prototype.getDatesHeaderElement = function() {
      return this.element.querySelector("." + DATE_HEADER_CONTAINER_CLASS);
    };
    ViewBase2.prototype.getDateSlots = function(renderDates, workDays) {
      return [];
    };
    ViewBase2.prototype.generateColumnLevels = function() {
      return [];
    };
    ViewBase2.prototype.getColumnLevels = function() {
      return this.colLevels;
    };
    ViewBase2.prototype.highlightCurrentTime = function() {
    };
    ViewBase2.prototype.getStartDate = function() {
      return this.renderDates[0];
    };
    ViewBase2.prototype.getEndDate = function() {
      return this.renderDates[this.renderDates.length - 1];
    };
    ViewBase2.prototype.startDate = function() {
      return this.renderDates[0];
    };
    ViewBase2.prototype.endDate = function() {
      return addDays(this.renderDates[this.renderDates.length - 1], 1);
    };
    ViewBase2.prototype.getStartHour = function() {
      var startHour = this.parent.getStartEndTime(this.parent.activeViewOptions.startHour);
      if (isNullOrUndefined(startHour)) {
        startHour = new Date(2e3, 0, 0, 0);
      }
      return startHour;
    };
    ViewBase2.prototype.getEndHour = function() {
      var endHour = this.parent.getStartEndTime(this.parent.activeViewOptions.endHour);
      if (isNullOrUndefined(endHour)) {
        endHour = new Date(2e3, 0, 0, 0);
      }
      return endHour;
    };
    ViewBase2.prototype.isCurrentDate = function(date) {
      return date.setHours(0, 0, 0, 0) === new Date(this.parent.currentTimezoneDate).setHours(0, 0, 0, 0);
    };
    ViewBase2.prototype.isCurrentMonth = function(date) {
      if (this.parent.activeViewOptions.displayDate || this.parent.activeViewOptions.numberOfWeeks > 0) {
        return this.parent.activeView.getStartDate().getTime() <= this.parent.getCurrentTime().getTime() && this.parent.activeView.getEndDate().getTime() >= this.parent.getCurrentTime().getTime();
      }
      return date.getFullYear() === this.parent.getCurrentTime().getFullYear() && date.getMonth() === this.parent.getCurrentTime().getMonth();
    };
    ViewBase2.prototype.isWorkDay = function(date, workDays) {
      if (workDays === void 0) {
        workDays = this.parent.activeViewOptions.workDays;
      }
      if (workDays.indexOf(date.getDay()) >= 0) {
        return true;
      }
      return false;
    };
    ViewBase2.prototype.isWorkHour = function(date, startHour, endHour, workDays) {
      if (isNullOrUndefined(startHour) || isNullOrUndefined(endHour)) {
        return false;
      }
      startHour.setMilliseconds(0);
      endHour.setMilliseconds(0);
      return !(getDateInMs(date) < getDateInMs(startHour) || getDateInMs(date) >= getDateInMs(endHour) || !this.isWorkDay(date, workDays));
    };
    ViewBase2.prototype.getRenderDates = function(workDays) {
      var renderDates = [];
      if (this.parent.currentView === "Week" || this.parent.currentView === "TimelineWeek") {
        var selectedDate = resetTime(this.parent.selectedDate);
        var start = getWeekFirstDate(selectedDate, this.parent.activeViewOptions.firstDayOfWeek);
        for (var i = 0, length_1 = WEEK_LENGTH * this.parent.activeViewOptions.interval; i < length_1; i++) {
          if (this.parent.activeViewOptions.showWeekend) {
            renderDates.push(start);
          } else {
            if (this.isWorkDay(start, workDays)) {
              renderDates.push(start);
            }
          }
          start = addDays(start, 1);
        }
      } else if (this.parent.currentView === "WorkWeek" || this.parent.currentView === "TimelineWorkWeek") {
        var start = getWeekFirstDate(resetTime(this.parent.selectedDate), this.parent.activeViewOptions.firstDayOfWeek);
        for (var i = 0, length_2 = WEEK_LENGTH * this.parent.activeViewOptions.interval; i < length_2; i++) {
          if (this.isWorkDay(start, workDays)) {
            renderDates.push(start);
          }
          start = addDays(start, 1);
        }
      } else {
        var dayCount = this.parent.currentView === "Agenda" ? this.parent.agendaDaysCount : this.parent.activeViewOptions.interval;
        var start = resetTime(this.parent.selectedDate);
        do {
          if (this.parent.activeViewOptions.showWeekend) {
            renderDates.push(start);
          } else {
            if (this.isWorkDay(start, workDays)) {
              renderDates.push(start);
            }
          }
          start = addDays(start, 1);
        } while (dayCount !== renderDates.length);
      }
      if (!workDays) {
        this.renderDates = renderDates;
      }
      if (this.parent.headerModule) {
        this.parent.headerModule.previousNextIconHandler();
      }
      return renderDates;
    };
    ViewBase2.prototype.getNextPreviousDate = function(type) {
      this.previousNextAction = type;
      if (this.parent.currentView === "Day" || this.parent.currentView === "TimelineDay") {
        if (this.parent.activeViewOptions.showWeekend) {
          var daysCount = this.parent.activeViewOptions.interval;
          return addDays(this.parent.selectedDate, type === "next" ? daysCount : -daysCount);
        } else {
          var date = void 0;
          if (type === "next") {
            date = addDays(this.renderDates.slice(-1)[0], 1);
            while (!this.isWorkDay(date)) {
              date = addDays(date, 1);
            }
          } else {
            date = addDays(this.renderDates[0], -1);
            var count = 0;
            do {
              if (this.isWorkDay(date)) {
                count += 1;
              }
              if (this.parent.activeViewOptions.interval !== count) {
                date = addDays(date, -1);
              }
            } while (this.parent.activeViewOptions.interval !== count);
          }
          return date;
        }
      }
      var weekLength = type === "next" ? WEEK_LENGTH : -WEEK_LENGTH;
      return addDays(this.parent.selectedDate, weekLength * this.parent.activeViewOptions.interval);
    };
    ViewBase2.prototype.getLabelText = function(view) {
      var viewStr = view.charAt(0).toLowerCase() + view.substring(1);
      return this.parent.localeObj.getConstant(viewStr) + " of " + capitalizeFirstWord(this.parent.globalize.formatDate(this.parent.selectedDate, { skeleton: "long", calendar: this.parent.getCalendarMode() }), "single");
    };
    ViewBase2.prototype.getDateRangeText = function() {
      if (this.parent.isAdaptive) {
        var formatDate = this.parent.activeViewOptions.dateFormat ? this.parent.activeViewOptions.dateFormat : "MMMM y";
        return capitalizeFirstWord(this.parent.globalize.formatDate(this.parent.selectedDate, { format: formatDate, calendar: this.parent.getCalendarMode() }), "single");
      }
      return this.formatDateRange(this.renderDates[0], this.renderDates[this.renderDates.length - 1]);
    };
    ViewBase2.prototype.formatDateRange = function(startDate, endDate) {
      var globalize = this.parent.globalize;
      var mode = this.parent.getCalendarMode();
      if (startDate === endDate) {
        endDate = null;
      }
      if (!isNullOrUndefined(this.parent.activeViewOptions.dateFormat)) {
        var text = "";
        if (!endDate) {
          text = globalize.formatDate(startDate, { format: this.parent.activeViewOptions.dateFormat, calendar: mode });
          return capitalizeFirstWord(text, "multiple");
        }
        text = globalize.formatDate(startDate, { format: this.parent.activeViewOptions.dateFormat, calendar: mode }) + " - " + globalize.formatDate(endDate, { format: this.parent.activeViewOptions.dateFormat, calendar: mode });
        return capitalizeFirstWord(text, "multiple");
      }
      var formattedStr;
      var longDateFormat;
      if (this.parent.locale === "en" || this.parent.locale === "en-US") {
        longDateFormat = getValue("dateFormats.long", getDefaultDateObject(mode));
      } else {
        longDateFormat = getValue("main." + this.parent.locale + ".dates.calendars." + mode + ".dateFormats.long", cldrData);
      }
      if (!endDate) {
        return capitalizeFirstWord(globalize.formatDate(startDate, { format: longDateFormat, calendar: mode }), "single");
      }
      var dateFormat = longDateFormat.trim().toLocaleLowerCase();
      if (dateFormat.substr(0, 1) === "d") {
        if (startDate.getFullYear() === endDate.getFullYear()) {
          if (startDate.getMonth() === endDate.getMonth()) {
            formattedStr = globalize.formatDate(startDate, { format: "dd", calendar: mode }) + " - " + globalize.formatDate(endDate, { format: "dd MMMM yyyy", calendar: mode });
          } else {
            formattedStr = globalize.formatDate(startDate, { format: "dd MMM", calendar: mode }) + " - " + globalize.formatDate(endDate, { format: "dd MMM yyyy", calendar: mode });
          }
        } else {
          formattedStr = globalize.formatDate(startDate, { format: "dd MMM yyyy", calendar: mode }) + " - " + globalize.formatDate(endDate, { format: "dd MMM yyyy", calendar: mode });
        }
      } else if (dateFormat.substr(0, 1) === "m") {
        if (startDate.getFullYear() === endDate.getFullYear()) {
          if (startDate.getMonth() === endDate.getMonth()) {
            formattedStr = globalize.formatDate(startDate, { format: "MMMM dd", calendar: mode }) + " - " + globalize.formatDate(endDate, { format: "dd, yyyy", calendar: mode });
          } else {
            formattedStr = globalize.formatDate(startDate, { format: "MMM dd", calendar: mode }) + " - " + globalize.formatDate(endDate, { format: "MMM dd, yyyy", calendar: mode });
          }
        } else {
          formattedStr = globalize.formatDate(startDate, { format: "MMM dd, yyyy", calendar: mode }) + " - " + globalize.formatDate(endDate, { format: "MMM dd, yyyy", calendar: mode });
        }
      } else {
        formattedStr = globalize.formatDate(startDate, { format: longDateFormat, calendar: mode }) + " - " + globalize.formatDate(endDate, { format: longDateFormat, calendar: mode });
      }
      return capitalizeFirstWord(formattedStr, "multiple");
    };
    ViewBase2.prototype.getMobileDateElement = function(date, className) {
      var wrap = createElement("div", {
        className,
        innerHTML: '<div class="e-m-date">' + this.parent.globalize.formatDate(date, { format: "d", calendar: this.parent.getCalendarMode() }) + '</div><div class="e-m-day">' + capitalizeFirstWord(this.parent.globalize.formatDate(date, { format: "E", calendar: this.parent.getCalendarMode() }), "single") + "</div>"
      });
      return wrap;
    };
    ViewBase2.prototype.setResourceHeaderContent = function(tdElement, tdData, className) {
      if (className === void 0) {
        className = TEXT_ELLIPSIS;
      }
      if (this.parent.activeViewOptions.resourceHeaderTemplate) {
        var data = { resource: tdData.resource, resourceData: tdData.resourceData };
        var scheduleId = this.parent.element.id + "_";
        var viewName = this.parent.activeViewOptions.resourceHeaderTemplateName;
        var templateId = scheduleId + viewName + "resourceHeaderTemplate";
        var quickTemplate = [].slice.call(this.parent.getResourceHeaderTemplate()(data, this.parent, "resourceHeaderTemplate", templateId, false));
        append2(quickTemplate, tdElement);
      } else {
        var resourceText = createElement("div", { className });
        this.parent.sanitize(tdData.resourceData[tdData.resource.textField], resourceText);
        tdElement.appendChild(resourceText);
      }
    };
    ViewBase2.prototype.renderResourceMobileLayout = function() {
      if (this.parent.resourceBase.lastResourceLevel && this.parent.resourceBase.lastResourceLevel.length <= 0) {
        return;
      }
      this.parent.resourceBase.renderResourceHeader();
      this.parent.resourceBase.renderResourceTree();
    };
    ViewBase2.prototype.addAutoHeightClass = function(element2) {
      if (!this.parent.uiStateValues.isGroupAdaptive && this.parent.rowAutoHeight && this.isTimelineView() && this.parent.activeViewOptions.group.resources.length > 0) {
        addClass([element2], AUTO_HEIGHT);
      }
    };
    ViewBase2.prototype.getColElements = function() {
      return [].slice.call(this.element.querySelectorAll("." + CONTENT_WRAP_CLASS + " col, ." + DATE_HEADER_WRAP_CLASS + " col"));
    };
    ViewBase2.prototype.setColWidth = function(content) {
      if (this.isTimelineView()) {
        var colElements = this.getColElements();
        var contentBody = this.element.querySelector("." + CONTENT_TABLE_CLASS + " tbody");
        var colWidth_1 = contentBody.getBoundingClientRect().width / (colElements.length / 2);
        if (content.offsetHeight !== content.clientHeight) {
          var resourceColumn = this.parent.element.querySelector("." + RESOURCE_COLUMN_WRAP_CLASS);
          if (!isNullOrUndefined(resourceColumn)) {
            setStyleAttribute(resourceColumn, { "height": formatUnit(content.clientHeight) });
          }
        }
        var cssClass2 = "." + HEADER_CELLS_CLASS + ",." + TIME_SLOT_CLASS + ",." + HEADER_WEEK_CELLS_CLASS + ",." + HEADER_MONTH_CELLS_CLASS + ",." + HEADER_YEAR_CELLS_CLASS;
        var headerCellElements = [].slice.call(this.element.querySelectorAll(cssClass2));
        headerCellElements.forEach(function(ele) {
          var colSpan = isNullOrUndefined(ele.getAttribute("colspan")) ? "1" : ele.getAttribute("colspan");
          var headerCellColSpan = parseInt(colSpan, 10);
          setStyleAttribute(ele, { "width": formatUnit(colWidth_1 * headerCellColSpan) });
        });
      }
    };
    ViewBase2.prototype.resetColWidth = function() {
      var colElements = this.getColElements();
      for (var _i = 0, colElements_1 = colElements; _i < colElements_1.length; _i++) {
        var col = colElements_1[_i];
        col.style.width = "";
      }
    };
    ViewBase2.prototype.getContentAreaElement = function() {
      return this.element.querySelector("." + CONTENT_WRAP_CLASS);
    };
    ViewBase2.prototype.wireExpandCollapseIconEvents = function() {
      if (this.parent.resourceBase && this.parent.resourceBase.resourceCollection.length > 1) {
        var treeIcons = [].slice.call(this.element.querySelectorAll("." + RESOURCE_TREE_ICON_CLASS));
        for (var _i = 0, treeIcons_1 = treeIcons; _i < treeIcons_1.length; _i++) {
          var icon = treeIcons_1[_i];
          EventHandler.clearEvents(icon);
          EventHandler.add(icon, "click", this.parent.resourceBase.onTreeIconClick, this.parent.resourceBase);
        }
      }
    };
    ViewBase2.prototype.scrollToDate = function(scrollDate) {
      if (["Month", "TimelineMonth"].indexOf(this.parent.currentView) === -1 || isNullOrUndefined(scrollDate)) {
        return;
      }
      var scrollWrap = this.getContentAreaElement();
      var tdDate = new Date(resetTime(/* @__PURE__ */ new Date(+scrollDate)).getTime()).getTime();
      var dateElement = scrollWrap.querySelector("." + WORK_CELLS_CLASS + '[data-date="' + tdDate + '"]');
      if (this.parent.currentView === "Month" && dateElement) {
        if (scrollWrap.scrollWidth > scrollWrap.clientWidth) {
          if (!this.parent.enableRtl) {
            scrollWrap.scrollLeft = dateElement.offsetLeft;
          } else {
            scrollWrap.scrollLeft = -(this.parent.getContentTable().offsetWidth - dateElement.offsetLeft - dateElement.offsetWidth);
          }
        }
        scrollWrap.scrollTop = dateElement.offsetTop;
      }
      if (this.parent.currentView === "TimelineMonth" && dateElement) {
        if (!this.parent.enableRtl) {
          scrollWrap.scrollLeft = dateElement.offsetLeft;
        } else {
          scrollWrap.scrollLeft = -(this.parent.getContentTable().offsetWidth - dateElement.offsetLeft - dateElement.offsetWidth);
        }
      }
    };
    ViewBase2.prototype.setPersistence = function() {
      if (this.parent.enablePersistence) {
        var contentWrap = this.element.querySelector(".e-content-wrap");
        if (!isNullOrUndefined(contentWrap)) {
          this.parent.scrollLeft = contentWrap.scrollLeft;
          this.parent.scrollTop = contentWrap.scrollTop;
        }
      }
    };
    ViewBase2.prototype.retainScrollPosition = function() {
      if (this.parent.enablePersistence) {
        var conWrap = this.parent.element.querySelector(".e-content-wrap");
        if (!isNullOrUndefined(conWrap) && !isNullOrUndefined(this.parent.scrollLeft) && !isNullOrUndefined(this.parent.scrollTop)) {
          conWrap.scrollTop = this.parent.scrollTop;
          conWrap.scrollLeft = this.parent.scrollLeft;
        }
      }
    };
    ViewBase2.prototype.getViewStartDate = function() {
      var startDate = this.renderDates[0];
      if (this.parent.activeViewOptions.group.resources.length > 0 && this.parent.resourceBase.lastResourceLevel.length > 0) {
        startDate = this.parent.resourceBase.getResourceRenderDates()[0];
      }
      return startDate;
    };
    ViewBase2.prototype.getViewEndDate = function() {
      var endDate = addDays(this.renderDates[this.renderDates.length - 1], 1);
      if (this.parent.activeViewOptions.group.resources.length > 0 && this.parent.resourceBase.lastResourceLevel.length > 0) {
        endDate = addDays(this.parent.resourceBase.getResourceRenderDates().slice(-1)[0], 1);
      }
      return endDate;
    };
    ViewBase2.prototype.getAdjustedDate = function(startTime) {
      if (!this.parent.activeViewOptions.timeScale.enable || this.parent.currentView === "Month" || this.parent.currentView === "TimelineYear" && this.parent.activeViewOptions.group.resources.length === 0) {
        return new Date(startTime.setHours(0, 0, 0, 0));
      } else if (this.parent.currentView === "TimelineYear" && this.parent.activeViewOptions.group.resources.length > 0) {
        startTime.setHours(0, 0, 0, 0);
        return new Date(startTime.setDate(1));
      }
      return null;
    };
    ViewBase2.prototype.resetColLevels = function() {
      this.parent.resourceBase.expandedResources = [];
      var renderedCount = this.parent.virtualScrollModule.getRenderedCount();
      var lastLevel = this.parent.activeViewOptions.group.byDate ? this.colLevels[0] : this.parent.resourceBase.renderedResources;
      var index = 0;
      for (var i = 0; i < lastLevel.length; i++) {
        if (index >= renderedCount) {
          break;
        }
        index += lastLevel[parseInt(i.toString(), 10)].colSpan;
        this.parent.resourceBase.expandedResources.push(lastLevel[parseInt(i.toString(), 10)]);
      }
      if (this.parent.activeViewOptions.group.byDate) {
        this.colLevels[0] = this.parent.resourceBase.expandedResources;
        this.parent.virtualScrollModule.setRenderedDates(this.parent.resourceBase.expandedResources);
      } else {
        this.colLevels[this.colLevels.length - 2] = this.parent.resourceBase.expandedResources;
        this.parent.resourceBase.renderedResources = this.parent.resourceBase.expandedResources;
      }
      if (this.parent.currentView !== "Month") {
        this.colLevels[this.colLevels.length - 1] = this.colLevels[this.colLevels.length - 1].slice(0, index);
        this.parent.resourceBase.expandedResources = this.colLevels[this.colLevels.length - 1];
      }
    };
    ViewBase2.prototype.destroy = function() {
      if (this.element && this.element.parentNode) {
        remove(this.element);
      }
      this.element = null;
      this.renderDates = null;
      this.colLevels = null;
    };
    return ViewBase2;
  }()
);
var __extends$3 = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var VerticalView = (
  /** @class */
  function(_super) {
    __extends$3(VerticalView2, _super);
    function VerticalView2(parent) {
      var _this = _super.call(this, parent) || this;
      _this.viewClass = "e-day-view";
      _this.isInverseTableSelect = true;
      _this.baseCssClass = "e-vertical-view";
      _this.appointment = null;
      return _this;
    }
    VerticalView2.prototype.getModuleName = function() {
      return "verticalView";
    };
    VerticalView2.prototype.addEventListener = function() {
      this.parent.on(scrollUiUpdate, this.scrollUiUpdate, this);
      this.parent.on(dataReady, this.renderEvents, this);
    };
    VerticalView2.prototype.removeEventListener = function() {
      if (this.parent) {
        this.parent.off(scrollUiUpdate, this.scrollUiUpdate);
        this.parent.off(dataReady, this.renderEvents);
      }
    };
    VerticalView2.prototype.renderEvents = function() {
      this.appointment = this.parent.activeViewOptions.timeScale.enable ? new VerticalEvent(this.parent) : new MonthEvent(this.parent);
      this.appointment.renderAppointments();
      this.parent.notify(eventsLoaded, {});
    };
    VerticalView2.prototype.onContentScroll = function(e) {
      this.parent.removeNewEventElement();
      var target = e.target;
      this.parent.notify(virtualScroll, e);
      this.scrollLeftPanel(target);
      this.scrollTopPanel(target);
      if (!this.parent.isAdaptive) {
        this.parent.uiStateValues.top = target.scrollTop;
      }
      this.parent.uiStateValues.left = target.scrollLeft;
      if (!isNullOrUndefined(this.parent.quickPopup)) {
        this.parent.quickPopup.quickPopupHide();
      }
      this.setPersistence();
    };
    VerticalView2.prototype.onAdaptiveMove = function(e) {
      if (this.parent.uiStateValues.action) {
        e.preventDefault();
      }
    };
    VerticalView2.prototype.onAdaptiveScroll = function(e) {
      if (this.parent && !this.parent.isDestroyed) {
        this.parent.removeNewEventElement();
        this.parent.uiStateValues.top = e.target.scrollTop;
      }
    };
    VerticalView2.prototype.scrollLeftPanel = function(target) {
      var leftPanel = this.getLeftPanelElement();
      if (!isNullOrUndefined(leftPanel)) {
        leftPanel.scrollTop = target.scrollTop;
      }
    };
    VerticalView2.prototype.scrollUiUpdate = function(args) {
      if (!this.parent) {
        return;
      }
      var dateHeader = this.parent.element.querySelector("." + DATE_HEADER_WRAP_CLASS);
      var headerBarHeight = this.getHeaderBarHeight();
      var timeCells = this.getLeftPanelElement();
      var content = this.getScrollableElement();
      var header = this.getDatesHeaderElement();
      var scrollerHeight = this.parent.element.offsetHeight - headerBarHeight - header.offsetHeight;
      this.setContentHeight(content, timeCells, scrollerHeight);
      this.setColWidth(content);
      var scrollBarWidth = getScrollBarWidth();
      header.firstElementChild.style[args.cssProperties.rtlBorder] = "";
      header.style[args.cssProperties.rtlPadding] = "";
      var isDateHeaderScroll = this.parent.enableAllDayScroll ? !(content.offsetWidth - content.clientWidth <= dateHeader.offsetWidth - dateHeader.clientWidth && dateHeader.classList.contains("e-all-day-scroll")) : true;
      if (content.offsetWidth - content.clientWidth > 0 && isDateHeaderScroll) {
        header.firstElementChild.style[args.cssProperties.border] = scrollBarWidth > 0 ? "1px" : "0px";
        header.style[args.cssProperties.padding] = scrollBarWidth > 0 ? scrollBarWidth - 1 + "px" : "0px";
      } else {
        header.firstElementChild.style[args.cssProperties.border] = "";
        header.style[args.cssProperties.padding] = "";
      }
      if (!args.isPreventScrollUpdate) {
        if (this.parent.uiStateValues.isInitial) {
          if (this.parent.currentView.indexOf("Timeline") > -1) {
            content.scrollTop = this.parent.uiStateValues.top;
          }
          this.scrollToWorkHour();
          this.parent.uiStateValues.isInitial = false;
        } else {
          if (timeCells) {
            timeCells.scrollTop = this.parent.uiStateValues.top;
          }
          content.scrollTop = this.parent.uiStateValues.top;
          content.scrollLeft = this.parent.uiStateValues.left;
        }
      }
      if (this.parent.activeViewOptions.timeScale.enable) {
        this.highlightCurrentTime();
      }
      this.retainScrollPosition();
    };
    VerticalView2.prototype.setContentHeight = function(element2, leftPanelElement, height) {
      if (this.parent.isAdaptive && !this.isTimelineView()) {
        element2.style.height = this.parent.height === "auto" ? "auto" : formatUnit(height);
      } else {
        if (!isNullOrUndefined(leftPanelElement)) {
          leftPanelElement.style.height = this.parent.height === "auto" ? "auto" : formatUnit(height - this.getScrollXIndent(element2));
        }
        element2.style.height = this.parent.height === "auto" ? "auto" : formatUnit(height);
      }
    };
    VerticalView2.prototype.scrollToWorkHour = function() {
      if (this.parent.workHours.highlight) {
        var firstWorkHourCell = this.element.querySelector("." + WORK_HOURS_CLASS);
        if (firstWorkHourCell) {
          this.getScrollableElement().scrollTop = firstWorkHourCell.offsetTop;
          this.parent.uiStateValues.top = firstWorkHourCell.offsetTop;
          this.parent.uiStateValues.left = 0;
        }
      }
    };
    VerticalView2.prototype.scrollToHour = function(hour, scrollDate) {
      var date = this.parent.getStartEndTime(hour);
      if (!isNullOrUndefined(scrollDate)) {
        var headerElement = this.element.querySelector("." + HEADER_CELLS_CLASS + '[data-date="' + new Date(resetTime(scrollDate)).getTime() + '"]');
        if (headerElement) {
          if (this.parent.enableRtl) {
            var conWrap = this.element.querySelector("." + CONTENT_TABLE_CLASS);
            this.getScrollableElement().scrollLeft = -(conWrap.offsetWidth - headerElement.offsetLeft - headerElement.offsetWidth);
          } else {
            this.getScrollableElement().scrollLeft = headerElement.offsetLeft;
          }
        }
      }
      if (isNullOrUndefined(date)) {
        return;
      }
      this.getScrollableElement().scrollTop = this.getTopFromDateTime(date);
    };
    VerticalView2.prototype.scrollToDate = function(scrollDate) {
      this.scrollToHour(null, scrollDate);
    };
    VerticalView2.prototype.generateColumnLevels = function() {
      var level = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);
      var columnLevels = [];
      if (this.parent.activeViewOptions.group.resources.length > 0) {
        columnLevels = this.parent.resourceBase.generateResourceLevels(level);
        if (this.parent.activeViewOptions.group.hideNonWorkingDays) {
          while (columnLevels[0].length === 0) {
            this.parent.setProperties({ selectedDate: this.parent.activeView.getNextPreviousDate(this.previousNextAction) }, true);
            this.parent.activeView.getRenderDates();
            if (this.parent.headerModule) {
              this.parent.headerModule.setCalendarDate(this.parent.selectedDate);
              this.parent.headerModule.updateDateRange();
            }
            level = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);
            columnLevels = this.parent.resourceBase.generateResourceLevels(level);
          }
        }
        if (this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.lastResourceLevel.length > 0) {
          var resourceLevel = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];
          var resStartHour = resourceLevel.resourceData[resourceLevel.resource.startHourField];
          var resEndHour = resourceLevel.resourceData[resourceLevel.resource.endHourField];
          var dateSlots = this.getDateSlots(resourceLevel.renderDates, resourceLevel.workDays, resStartHour, resEndHour);
          columnLevels = [dateSlots];
        }
      } else {
        columnLevels.push(level);
      }
      this.colLevels = columnLevels;
      return columnLevels;
    };
    VerticalView2.prototype.getDateSlots = function(renderDates, workDays, workStartHour, workEndHour) {
      if (workStartHour === void 0) {
        workStartHour = this.parent.workHours.start;
      }
      if (workEndHour === void 0) {
        workEndHour = this.parent.workHours.end;
      }
      var dateCol = [];
      var start = this.parent.getStartEndTime(workStartHour);
      var end = this.parent.getStartEndTime(workEndHour);
      for (var _i = 0, renderDates_1 = renderDates; _i < renderDates_1.length; _i++) {
        var col = renderDates_1[_i];
        var classList2 = [HEADER_CELLS_CLASS];
        if (this.isCurrentDate(col)) {
          classList2.push(CURRENT_DAY_CLASS);
        }
        dateCol.push({
          date: col,
          type: "dateHeader",
          className: classList2,
          colSpan: 1,
          workDays,
          startHour: /* @__PURE__ */ new Date(+start),
          endHour: /* @__PURE__ */ new Date(+end)
        });
      }
      return dateCol;
    };
    VerticalView2.prototype.isWorkHourRange = function(date) {
      return this.getStartHour().getTime() <= date.getTime() && this.getEndHour().getTime() >= date.getTime();
    };
    VerticalView2.prototype.highlightCurrentTime = function() {
      var _this = this;
      if (this.parent.activeViewOptions.headerRows.length > 0 && this.parent.activeViewOptions.headerRows.slice(-1)[0].option !== "Hour") {
        return;
      }
      var currentDate = this.parent.getCurrentTime();
      if (this.parent.showTimeIndicator && this.isWorkHourRange(currentDate)) {
        var currentDateIndex = this.getCurrentTimeIndicatorIndex();
        if (currentDateIndex.length > 0) {
          var workCells = [].slice.call(this.element.querySelectorAll("." + WORK_CELLS_CLASS));
          if (workCells.length > 0) {
            this.changeCurrentTimePosition();
          }
          if (isNullOrUndefined(this.currentTimeIndicatorTimer)) {
            var interval = MS_PER_MINUTE - (currentDate.getSeconds() * 1e3 + currentDate.getMilliseconds());
            if (interval <= MS_PER_MINUTE - 1e3) {
              window.setTimeout(function() {
                if (!isNullOrUndefined(_this.currentTimeIndicatorTimer)) {
                  _this.clearCurrentTimeIndicatorTimer();
                  _this.changeCurrentTimePosition();
                  _this.updateCurrentTimeIndicatorTimer();
                }
              }, interval);
            }
            this.updateCurrentTimeIndicatorTimer();
          }
        } else {
          this.clearCurrentTimeIndicatorTimer();
        }
      } else {
        this.clearCurrentTimeIndicatorTimer();
      }
    };
    VerticalView2.prototype.getCurrentTimeIndicatorIndex = function() {
      var currentDateIndex = [];
      if (!isNullOrUndefined(this.parent.resourceBase) && this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {
        var count = 0;
        var currentDate = resetTime(this.parent.getCurrentTime());
        if (this.parent.virtualScrollModule && this.parent.activeViewOptions.allowVirtualScrolling && this.parent.activeViewOptions.group.byDate) {
          for (var _i = 0, _a = this.parent.resourceBase.expandedResources; _i < _a.length; _i++) {
            var resource = _a[_i];
            if (resetTime(resource.date).getTime() === currentDate.getTime()) {
              currentDateIndex.push(count);
            }
            count += 1;
          }
        } else {
          for (var _b = 0, _c = this.parent.resourceBase.renderedResources; _b < _c.length; _b++) {
            var resource = _c[_b];
            var index = this.parent.getIndexOfDate(resource.renderDates, currentDate);
            if (index >= 0) {
              var resIndex = this.parent.activeViewOptions.group.byDate ? this.parent.resourceBase.lastResourceLevel.length * index + count : count + index;
              currentDateIndex.push(resIndex);
            }
            count += this.parent.activeViewOptions.group.byDate ? 1 : resource.renderDates.length;
          }
        }
      } else {
        var renderDates = this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.lastResourceLevel.length > 0 ? this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex].renderDates : this.renderDates;
        var index = this.parent.getIndexOfDate(renderDates, resetTime(this.parent.getCurrentTime()));
        if (index >= 0) {
          currentDateIndex.push(index);
        }
      }
      return currentDateIndex;
    };
    VerticalView2.prototype.clearCurrentTimeIndicatorTimer = function() {
      if (!isNullOrUndefined(this.currentTimeIndicatorTimer)) {
        window.clearInterval(this.currentTimeIndicatorTimer);
        this.currentTimeIndicatorTimer = null;
        this.removeCurrentTimeIndicatorElements();
      }
    };
    VerticalView2.prototype.updateCurrentTimeIndicatorTimer = function() {
      var _this = this;
      this.currentTimeIndicatorTimer = window.setInterval(function() {
        _this.changeCurrentTimePosition();
      }, MS_PER_MINUTE);
    };
    VerticalView2.prototype.removeCurrentTimeIndicatorElements = function() {
      var queryString2 = "." + PREVIOUS_TIMELINE_CLASS + ",." + CURRENT_TIMELINE_CLASS + ",." + CURRENT_TIME_CLASS;
      var timeIndicator = [].slice.call(this.element.querySelectorAll(queryString2));
      for (var _i = 0, timeIndicator_1 = timeIndicator; _i < timeIndicator_1.length; _i++) {
        var indicator = timeIndicator_1[_i];
        remove(indicator);
      }
    };
    VerticalView2.prototype.changeCurrentTimePosition = function() {
      if (!this.parent || this.parent && this.parent.isDestroyed) {
        return;
      }
      this.removeCurrentTimeIndicatorElements();
      var currentDateIndex = this.getCurrentTimeIndicatorIndex();
      var firstRow = this.parent.getContentTable().rows[0];
      var top = this.getTopFromDateTime(this.parent.getCurrentTime());
      var topInPx = formatUnit(top);
      var rowIndex = Math.floor(top / firstRow.cells[0].offsetHeight);
      var timeCellsWrap = this.getLeftPanelElement();
      var timeTrs = [].slice.call(timeCellsWrap.querySelectorAll("tr"));
      if (isNullOrUndefined(rowIndex) || isNaN(rowIndex) || rowIndex === timeTrs.length) {
        return;
      }
      var curTimeWrap = [].slice.call(this.element.querySelectorAll("." + TIMELINE_WRAPPER_CLASS));
      for (var i = 0, length_1 = currentDateIndex[0]; i < length_1; i++) {
        curTimeWrap[parseInt(i.toString(), 10)].appendChild(createElement("div", { className: PREVIOUS_TIMELINE_CLASS, styles: "top:" + topInPx }));
      }
      for (var _i = 0, currentDateIndex_1 = currentDateIndex; _i < currentDateIndex_1.length; _i++) {
        var day = currentDateIndex_1[_i];
        curTimeWrap[parseInt(day.toString(), 10)].appendChild(createElement("div", { className: CURRENT_TIMELINE_CLASS, styles: "top:" + topInPx }));
      }
      var currentTimeEle = createElement("div", {
        innerHTML: this.parent.getTimeString(this.parent.getCurrentTime()),
        className: CURRENT_TIME_CLASS,
        styles: "top:" + topInPx
      });
      if (rowIndex <= timeTrs.length) {
        removeClass(timeCellsWrap.querySelectorAll("." + HIDE_CHILDS_CLASS), HIDE_CHILDS_CLASS);
        if (timeTrs[parseInt(rowIndex.toString(), 10)]) {
          addClass([timeTrs[parseInt(rowIndex.toString(), 10)].lastElementChild], HIDE_CHILDS_CLASS);
        }
        prepend([currentTimeEle], timeCellsWrap);
        currentTimeEle.style.top = formatUnit(currentTimeEle.offsetTop - currentTimeEle.offsetHeight / 2);
      }
    };
    VerticalView2.prototype.getTopFromDateTime = function(date) {
      var startHour = this.getStartHour();
      var diffInMinutes = (date.getHours() - startHour.getHours()) * 60 + (date.getMinutes() - startHour.getMinutes());
      return diffInMinutes * this.getWorkCellHeight() * this.parent.activeViewOptions.timeScale.slotCount / this.parent.activeViewOptions.timeScale.interval;
    };
    VerticalView2.prototype.getWorkCellHeight = function() {
      return parseFloat(this.element.querySelector("." + WORK_CELLS_CLASS).getBoundingClientRect().height.toFixed(2));
    };
    VerticalView2.prototype.getTdContent = function(date, type, groupIndex) {
      var cntEle;
      var wrapper = createElement("div");
      var templateName = "";
      var templateId = this.parent.element.id + "_";
      switch (type) {
        case "dateHeader":
          if (this.parent.activeViewOptions.dateHeaderTemplate) {
            templateName = "dateHeaderTemplate";
            var args = { date, type };
            var viewName = this.parent.activeViewOptions.dateHeaderTemplateName;
            cntEle = [].slice.call(this.parent.getDateHeaderTemplate()(args, this.parent, templateName, templateId + viewName + templateName, false));
          } else {
            wrapper.innerHTML = this.parent.activeView.isTimelineView() ? '<span class="e-header-date e-navigate">' + this.getTimelineDate(date) + "</span>" : '<div class="e-header-day">' + capitalizeFirstWord(this.getDayName(date), "single") + "</div>" + ('<div class="e-header-date e-navigate" role="link">' + this.getDate(date) + "</div>");
            cntEle = [].slice.call(wrapper.childNodes);
          }
          break;
        case "majorSlot":
          if (this.parent.activeViewOptions.timeScale.majorSlotTemplate) {
            templateName = "majorSlotTemplate";
            var args = { date, type };
            cntEle = [].slice.call(this.parent.getMajorSlotTemplate()(args, this.parent, templateName, templateId + templateName, false));
          } else {
            wrapper.innerHTML = "<span>" + this.getTime(date) + "</span>";
            cntEle = [].slice.call(wrapper.childNodes);
          }
          break;
        case "minorSlot":
          if (this.parent.activeViewOptions.timeScale.minorSlotTemplate) {
            templateName = "minorSlotTemplate";
            var args = { date, type };
            cntEle = [].slice.call(this.parent.getMinorSlotTemplate()(args, this.parent, templateName, templateId + templateName, false));
          } else {
            cntEle = [].slice.call(wrapper.childNodes);
          }
          break;
        case "alldayCells":
          if (this.parent.activeViewOptions.cellTemplate) {
            var viewName = this.parent.activeViewOptions.cellTemplateName;
            templateName = "cellTemplate";
            var args = { date, type, groupIndex };
            cntEle = [].slice.call(this.parent.getCellTemplate()(args, this.parent, templateName, templateId + viewName + templateName, false));
          }
          break;
      }
      return cntEle;
    };
    VerticalView2.prototype.refreshHeader = function() {
      remove(this.element.querySelector("tbody tr"));
      this.renderHeader();
      this.parent.notify(contentReady, {});
    };
    VerticalView2.prototype.renderLayout = function(type) {
      this.setPanel(createElement("div", { className: TABLE_WRAP_CLASS }));
      var clsList = [this.baseCssClass, this.viewClass];
      clsList.push(type);
      if (this.parent.activeViewOptions.group.byDate) {
        clsList.push("e-by-date");
      }
      if (!this.parent.activeViewOptions.timeScale.enable) {
        addClass([this.element], [TIMESCALE_DISABLE, this.viewClass]);
      }
      if (this.parent.activeViewOptions.allowVirtualScrolling && !this.parent.uiStateValues.isGroupAdaptive) {
        clsList.push(VIRTUAL_SCROLL_CLASS);
      }
      if (this.parent.rowAutoHeight && this.parent.eventSettings.ignoreWhitespace) {
        clsList.push(IGNORE_WHITESPACE);
      }
      this.renderPanel(type);
      addClass([this.element], clsList);
      this.element.appendChild(this.createTableLayout(OUTER_TABLE_CLASS));
      this.element.querySelector("table").setAttribute("role", "presentation");
      this.colLevels = this.generateColumnLevels();
      this.renderHeader();
      this.renderContent();
      if (this.parent.uiStateValues.isGroupAdaptive && !this.parent.element.querySelector("." + RESOURCE_TOOLBAR_CONTAINER)) {
        this.renderResourceMobileLayout();
      }
      this.parent.notify(contentReady, {});
    };
    VerticalView2.prototype.renderHeader = function() {
      var tr = createElement("tr");
      var dateTd = createElement("td");
      dateTd.appendChild(this.renderDatesHeader());
      if (this.parent.activeViewOptions.timeScale.enable) {
        var indentTd = createElement("td", { className: LEFT_INDENT_CLASS });
        indentTd.appendChild(this.renderLeftIndent());
        tr.appendChild(indentTd);
      }
      tr.appendChild(dateTd);
      prepend([tr], this.element.querySelector("tbody"));
    };
    VerticalView2.prototype.renderContent = function() {
      if (this.parent.activeViewOptions.group.resources.length > 0) {
        this.parent.resourceBase.renderedResources = extend([], this.parent.resourceBase.lastResourceLevel, null, true);
      }
      var tr = createElement("tr");
      var workTd = createElement("td");
      if (this.parent.isAdaptive) {
        workTd.setAttribute("colspan", this.parent.activeViewOptions.timeScale.enable ? "2" : "1");
        var scrollContainer = createElement("div", { className: SCROLL_CONTAINER_CLASS });
        if (this.parent.activeViewOptions.timeScale.enable) {
          scrollContainer.appendChild(this.renderTimeCells());
        }
        scrollContainer.appendChild(this.renderContentArea());
        workTd.appendChild(scrollContainer);
        EventHandler.add(scrollContainer, "scroll", this.onAdaptiveScroll, this);
        EventHandler.add(scrollContainer, Browser.touchMoveEvent, this.onAdaptiveMove, this);
        tr.appendChild(workTd);
      } else {
        var levels = this.colLevels.slice(0);
        if (this.parent.virtualScrollModule) {
          this.resetColLevels();
        }
        var wrap = this.renderContentArea();
        workTd.appendChild(wrap);
        if (this.parent.activeViewOptions.timeScale.enable) {
          var timesTd = createElement("td");
          timesTd.appendChild(this.renderTimeCells());
          tr.appendChild(timesTd);
        }
        tr.appendChild(workTd);
        if (this.parent.virtualScrollModule) {
          this.colLevels = levels;
          this.parent.virtualScrollModule.renderVirtualTrack(wrap);
        }
      }
      this.element.querySelector("tbody").appendChild(tr);
    };
    VerticalView2.prototype.renderLeftIndent = function() {
      var wrap = createElement("div", { className: LEFT_INDENT_WRAP_CLASS });
      var tbl = this.createTableLayout();
      var trEle = createElement("tr");
      var rowCount = this.colLevels.length;
      var nth;
      for (var i = 0; i < rowCount; i++) {
        var ntr_1 = trEle.cloneNode();
        var data_1 = { className: [this.colLevels[parseInt(i.toString(), 10)][0] && this.colLevels[parseInt(i.toString(), 10)][0].className[0]], type: "emptyCells" };
        if (this.parent.activeViewOptions.showWeekNumber && data_1.className.indexOf(HEADER_CELLS_CLASS) !== -1) {
          data_1.className.push(WEEK_NUMBER_CLASS);
          var weekNo = this.parent.getWeekNumberContent(this.renderDates);
          data_1.template = [createElement("span", {
            innerHTML: "" + weekNo,
            attrs: { title: this.parent.localeObj.getConstant("week") + " " + weekNo }
          })];
        }
        nth = this.createTd(data_1);
        this.parent.renderHeaderIndentTemplate(data_1, nth);
        ntr_1.appendChild(nth);
        tbl.querySelector("tbody").appendChild(ntr_1);
      }
      var ntr = trEle.cloneNode();
      var appointmentExpandCollapse = createElement("div", {
        attrs: {
          "tabindex": "0",
          "role": "list",
          title: this.parent.localeObj.getConstant("expandAllDaySection"),
          "aria-disabled": "false",
          "aria-label": "Expand section"
        },
        className: ALLDAY_APPOINTMENT_SECTION_CLASS + " " + APPOINTMENT_ROW_EXPAND_CLASS + " " + ICON + " " + DISABLE_CLASS
      });
      var data = { className: [ALLDAY_CELLS_CLASS], type: "emptyCells" };
      nth = this.createTd(data);
      nth.appendChild(appointmentExpandCollapse);
      this.parent.renderHeaderIndentTemplate(data, nth);
      ntr.appendChild(nth);
      tbl.querySelector("tbody").appendChild(ntr);
      wrap.appendChild(tbl);
      return wrap;
    };
    VerticalView2.prototype.renderDatesHeader = function() {
      var container = createElement("div", { className: DATE_HEADER_CONTAINER_CLASS });
      var wrap = createElement("div", { className: DATE_HEADER_WRAP_CLASS });
      container.appendChild(wrap);
      var tbl = this.createTableLayout();
      var trEle = createElement("tr", { className: HEADER_ROW_CLASS });
      var rowCount = this.colLevels.length;
      var lastLevel = this.colLevels[rowCount - 1];
      for (var i = 0; i < rowCount; i++) {
        var ntr = trEle.cloneNode();
        var level = this.colLevels[parseInt(i.toString(), 10)];
        for (var j = 0; j < level.length; j++) {
          ntr.appendChild(this.createTd(level[parseInt(j.toString(), 10)]));
        }
        tbl.querySelector("tbody").appendChild(ntr);
      }
      this.createAllDayRow(tbl, lastLevel);
      this.createColGroup(tbl, lastLevel);
      wrap.appendChild(tbl);
      return container;
    };
    VerticalView2.prototype.createAllDayRow = function(table, tdData) {
      var ntr = createElement("tr", { className: ALLDAY_ROW_CLASS });
      for (var j = 0; j < tdData.length; j++) {
        var td = extend({}, tdData[parseInt(j.toString(), 10)]);
        td.className = [ALLDAY_CELLS_CLASS];
        td.type = "alldayCells";
        var ntd = this.createTd(td);
        ntd.setAttribute("data-date", td.date.getTime().toString());
        if (!isNullOrUndefined(td.groupIndex)) {
          ntd.setAttribute("data-group-index", "" + td.groupIndex);
        } else if (this.parent.uiStateValues.isGroupAdaptive) {
          ntd.setAttribute("data-group-index", "" + this.parent.uiStateValues.groupIndex);
        }
        this.wireCellEvents(ntd);
        ntr.appendChild(ntd);
      }
      table.querySelector("tbody").appendChild(ntr);
      var thead = createElement("thead");
      thead.appendChild(this.parent.eventBase.createEventWrapper("allDay"));
      prepend([thead], table);
    };
    VerticalView2.prototype.createTd = function(td) {
      var tdEle = createElement("td");
      this.addAttributes(td, tdEle);
      if (td.date && td.type) {
        var ele = this.getTdContent(td.date, td.type, td.groupIndex);
        if (ele && ele.length) {
          append2(ele, tdEle);
        }
      }
      if (!this.parent.isMinMaxDate(resetTime(/* @__PURE__ */ new Date("" + td.date)))) {
        addClass([tdEle], DISABLE_DATES);
      }
      if (td.type === "resourceHeader") {
        this.setResourceHeaderContent(tdEle, td);
      }
      if (td.type === "dateHeader" && td.className.indexOf(HEADER_CELLS_CLASS) >= 0) {
        tdEle.setAttribute("data-date", td.date.getTime().toString());
        if (!isNullOrUndefined(td.groupIndex)) {
          tdEle.setAttribute("data-group-index", "" + td.groupIndex);
        }
        this.wireMouseEvents(tdEle);
      }
      var args = { elementType: td.type, element: tdEle, date: td.date, groupIndex: td.groupIndex };
      this.parent.trigger(renderCell, args);
      return tdEle;
    };
    VerticalView2.prototype.wireCellEvents = function(element2) {
      EventHandler.add(element2, "mousedown", this.parent.workCellAction.cellMouseDown, this.parent.workCellAction);
      this.wireMouseEvents(element2);
    };
    VerticalView2.prototype.wireMouseEvents = function(element2) {
      EventHandler.add(element2, "click", this.parent.workCellAction.cellClick, this.parent.workCellAction);
      if (!this.parent.isAdaptive) {
        EventHandler.add(element2, "dblclick", this.parent.workCellAction.cellDblClick, this.parent.workCellAction);
      }
    };
    VerticalView2.prototype.renderTimeCells = function() {
      var _this = this;
      var wrap = createElement("div", { className: TIME_CELLS_WRAP_CLASS });
      var tbl = this.createTableLayout();
      var trEle = createElement("tr");
      var handler = function(r) {
        r.type = r.first ? "majorSlot" : "minorSlot";
        r.className = r.last ? [TIME_CELLS_CLASS, TIME_SLOT_CLASS] : [TIME_SLOT_CLASS];
        var ntr = trEle.cloneNode();
        var data = { date: r.date, type: r.type, className: r.className };
        ntr.appendChild(_this.createTd(data));
        tbl.querySelector("tbody").appendChild(ntr);
        return r;
      };
      this.getTimeSlotRows(handler);
      wrap.appendChild(tbl);
      return wrap;
    };
    VerticalView2.prototype.renderContentArea = function() {
      var wrap = createElement("div", { className: CONTENT_WRAP_CLASS });
      var tbl = this.createTableLayout(CONTENT_TABLE_CLASS);
      this.setAriaAttributes(tbl);
      this.addAutoHeightClass(tbl);
      this.renderContentTable(tbl);
      this.createColGroup(tbl, this.colLevels.slice(-1)[0]);
      wrap.appendChild(tbl);
      this.wireCellEvents(tbl.querySelector("tbody"));
      EventHandler.add(wrap, "scroll", this.onContentScroll, this);
      EventHandler.add(wrap, Browser.touchMoveEvent, this.onAdaptiveMove, this);
      return wrap;
    };
    VerticalView2.prototype.renderContentTable = function(table) {
      var tBody = table.querySelector("tbody");
      append2(this.getContentRows(), tBody);
      this.renderContentTableHeader(table);
    };
    VerticalView2.prototype.getContentRows = function() {
      var _this = this;
      var rows = [];
      var tr = createElement("tr");
      var td = createElement("td", { attrs: { "aria-selected": "false" } });
      var handler = function(r) {
        var ntr = tr.cloneNode();
        for (var _i = 0, _a = _this.colLevels[_this.colLevels.length - 1]; _i < _a.length; _i++) {
          var tdData = _a[_i];
          var ntd = _this.createContentTd(tdData, r, td);
          ntr.appendChild(ntd);
        }
        rows.push(ntr);
        return r;
      };
      this.getTimeSlotRows(handler);
      return rows;
    };
    VerticalView2.prototype.createContentTd = function(tdData, r, td) {
      var ntd = td.cloneNode();
      if (tdData.colSpan) {
        ntd.setAttribute("colspan", tdData.colSpan.toString());
      }
      var clsName = this.getContentTdClass(r);
      var cellDate = resetTime(tdData.date);
      if (!this.parent.isMinMaxDate(cellDate)) {
        clsName.push(DISABLE_DATES);
      }
      setTime(cellDate, getDateInMs(r.date));
      var type = "workCells";
      if (tdData.className.indexOf(RESOURCE_PARENT_CLASS) !== -1) {
        clsName.push(RESOURCE_GROUP_CELLS_CLASS);
        type = "resourceGroupCells";
      }
      if (this.parent.workHours.highlight && (this.parent.activeViewOptions.timeScale.enable && this.isWorkHour(cellDate, tdData.startHour, tdData.endHour, tdData.workDays) || !this.parent.activeViewOptions.timeScale.enable && this.isWorkDay(cellDate, tdData.workDays))) {
        clsName.push(WORK_HOURS_CLASS);
      }
      addClass([ntd], clsName);
      if (this.parent.activeViewOptions.cellTemplate) {
        var args_1 = { date: cellDate, type, groupIndex: tdData.groupIndex };
        var scheduleId = this.parent.element.id + "_";
        var viewName = this.parent.activeViewOptions.cellTemplateName;
        var templateId = scheduleId + viewName + "cellTemplate";
        var tooltipTemplate = [].slice.call(this.parent.getCellTemplate()(args_1, this.parent, "cellTemplate", templateId, false));
        append2(tooltipTemplate, ntd);
      }
      ntd.setAttribute("data-date", cellDate.getTime().toString());
      if (!isNullOrUndefined(tdData.groupIndex) || this.parent.uiStateValues.isGroupAdaptive) {
        var groupIndex = this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex : tdData.groupIndex;
        ntd.setAttribute("data-group-index", "" + groupIndex);
      }
      var args = { elementType: type, element: ntd, date: cellDate, groupIndex: tdData.groupIndex };
      this.parent.trigger(renderCell, args);
      return ntd;
    };
    VerticalView2.prototype.getContentTdClass = function(r) {
      return r.last ? [WORK_CELLS_CLASS] : [WORK_CELLS_CLASS, ALTERNATE_CELLS_CLASS];
    };
    VerticalView2.prototype.renderContentTableHeader = function(table) {
      var thead = createElement("thead");
      thead.appendChild(this.parent.eventBase.createEventWrapper());
      if (this.parent.activeViewOptions.timeScale.enable) {
        thead.appendChild(this.parent.eventBase.createEventWrapper("timeIndicator"));
      }
      prepend([thead], table);
    };
    VerticalView2.prototype.getScrollableElement = function() {
      if (this.parent.isAdaptive && !this.isTimelineView()) {
        return this.element.querySelector("." + SCROLL_CONTAINER_CLASS);
      } else {
        return this.getContentAreaElement();
      }
    };
    VerticalView2.prototype.getLeftPanelElement = function() {
      return this.element.querySelector("." + TIME_CELLS_WRAP_CLASS);
    };
    VerticalView2.prototype.getEndDateFromStartDate = function(start) {
      var msMajorInterval = this.parent.activeViewOptions.timeScale.interval * MS_PER_MINUTE;
      var msInterval = msMajorInterval / this.parent.activeViewOptions.timeScale.slotCount;
      var end = new Date(start.getTime());
      end.setMilliseconds(end.getMilliseconds() + msInterval);
      return end;
    };
    VerticalView2.prototype.getTimeSlotRows = function(handler) {
      var rows = [];
      var startHour = this.getStartHour();
      var endHour = this.getEndHour();
      var msMajorInterval = this.parent.activeViewOptions.timeScale.interval * MS_PER_MINUTE;
      var msInterval = msMajorInterval / this.parent.activeViewOptions.timeScale.slotCount;
      var length = Math.round(MS_PER_DAY / msInterval);
      var msStartHour = startHour.getTime();
      var msEndHour = endHour.getTime();
      if (msStartHour !== msEndHour) {
        var duration = this.parent.activeViewOptions.timeScale.interval / this.parent.activeViewOptions.timeScale.slotCount;
        length = Math.abs(msEndHour - msStartHour) / msInterval - (new Date(msEndHour).getTimezoneOffset() - new Date(msStartHour).getTimezoneOffset()) / duration;
      }
      if (!this.parent.activeViewOptions.timeScale.enable) {
        length = 1;
      }
      var start = this.parent.getStartEndTime(this.parent.workHours.start);
      var end = this.parent.getStartEndTime(this.parent.workHours.end);
      for (var i = 0; i < length; i++) {
        var dt = new Date(msStartHour + msInterval * i);
        if (isDaylightSavingTime(dt) || new Date(msStartHour).getTimezoneOffset() !== dt.getTimezoneOffset()) {
          var timeOffset = new Date(msStartHour).getTimezoneOffset() - dt.getTimezoneOffset();
          dt = new Date(dt.getTime() - 1e3 * 60 * timeOffset);
        }
        var majorTickDivider = i % (msMajorInterval / msInterval);
        var row = {
          date: /* @__PURE__ */ new Date("" + dt),
          startHour: start,
          endHour: end,
          first: majorTickDivider === 0,
          middle: majorTickDivider < this.parent.activeViewOptions.timeScale.slotCount - 1,
          last: majorTickDivider === this.parent.activeViewOptions.timeScale.slotCount - 1,
          type: ""
        };
        if (handler) {
          handler(row);
        }
        rows.push(row);
      }
      return rows;
    };
    VerticalView2.prototype.getAdjustedDate = function(startTime) {
      if (!this.parent.activeViewOptions.timeScale.enable) {
        return new Date(startTime.setHours(0, 0, 0, 0));
      } else {
        var timeSlots = this.getTimeSlotRows();
        var startDate = new Date(new Date(timeSlots[0].date.getTime()).setHours(startTime.getHours(), startTime.getMinutes(), startTime.getMilliseconds()));
        for (var i = 0; i < timeSlots.length; i++) {
          if (timeSlots[parseInt(i.toString(), 10)].date.getTime() > startDate.getTime()) {
            startTime.setHours(timeSlots[i - 1].date.getHours(), timeSlots[i - 1].date.getMinutes(), timeSlots[i - 1].date.getMilliseconds());
            return new Date(startTime);
          }
        }
      }
      return null;
    };
    VerticalView2.prototype.destroy = function() {
      if (!this.parent || this.parent && this.parent.isDestroyed) {
        return;
      }
      this.clearCurrentTimeIndicatorTimer();
      if (this.element) {
        if (this.appointment) {
          this.appointment.destroy();
          this.appointment = null;
        }
        var contentScrollableEle = this.getContentAreaElement();
        if (contentScrollableEle) {
          EventHandler.remove(contentScrollableEle, "scroll", this.onContentScroll);
          EventHandler.remove(contentScrollableEle, Browser.touchMoveEvent, this.onAdaptiveMove);
        }
        if (this.parent.resourceBase) {
          this.parent.resourceBase.destroy();
        }
        if (this.parent.scheduleTouchModule) {
          this.parent.scheduleTouchModule.resetValues();
        }
        _super.prototype.destroy.call(this);
      }
    };
    return VerticalView2;
  }(ViewBase)
);
var __extends$2 = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var Day = (
  /** @class */
  function(_super) {
    __extends$2(Day2, _super);
    function Day2(parent) {
      var _this = _super.call(this, parent) || this;
      _this.viewClass = "e-day-view";
      return _this;
    }
    Day2.prototype.getModuleName = function() {
      return "day";
    };
    return Day2;
  }(VerticalView)
);
var __extends$1 = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var WorkWeek = (
  /** @class */
  function(_super) {
    __extends$1(WorkWeek2, _super);
    function WorkWeek2(parent) {
      var _this = _super.call(this, parent) || this;
      _this.viewClass = "e-work-week-view";
      return _this;
    }
    WorkWeek2.prototype.startDate = function() {
      return this.getViewStartDate();
    };
    WorkWeek2.prototype.endDate = function() {
      return this.getViewEndDate();
    };
    WorkWeek2.prototype.getModuleName = function() {
      return "workWeek";
    };
    return WorkWeek2;
  }(VerticalView)
);
var __extends = globalThis && globalThis.__extends || function() {
  var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
      d2.__proto__ = b2;
    } || function(d2, b2) {
      for (var p2 in b2)
        if (b2.hasOwnProperty(p2))
          d2[p2] = b2[p2];
    };
    return extendStatics(d, b);
  };
  return function(d, b) {
    extendStatics(d, b);
    function __() {
      this.constructor = d;
    }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  };
}();
var Month = (
  /** @class */
  function(_super) {
    __extends(Month2, _super);
    function Month2(parent) {
      var _this = _super.call(this, parent) || this;
      _this.dayNameFormat = "wide";
      _this.viewClass = "e-month-view";
      _this.isInverseTableSelect = false;
      _this.monthEvent = null;
      _this.monthDates = {};
      return _this;
    }
    Month2.prototype.addEventListener = function() {
      this.parent.on(scrollUiUpdate, this.onScrollUIUpdate, this);
      this.parent.on(dataReady, this.onDataReady, this);
      this.parent.on(cellClick, this.onCellClick, this);
    };
    Month2.prototype.removeEventListener = function() {
      if (this.parent) {
        this.parent.off(scrollUiUpdate, this.onScrollUIUpdate);
        this.parent.off(dataReady, this.onDataReady);
        this.parent.off(cellClick, this.onCellClick);
      }
    };
    Month2.prototype.onDataReady = function(args) {
      this.monthEvent = new MonthEvent(this.parent);
      this.monthEvent.renderAppointments();
      this.parent.notify(eventsLoaded, {});
    };
    Month2.prototype.onCellClick = function(event) {
    };
    Month2.prototype.onContentScroll = function(e) {
      this.parent.removeNewEventElement();
      this.parent.notify(virtualScroll, e);
      this.scrollTopPanel(e.target);
      this.scrollLeftPanel(e.target);
      this.parent.uiStateValues.top = e.target.scrollTop;
      this.parent.uiStateValues.left = e.target.scrollLeft;
      this.setPersistence();
    };
    Month2.prototype.scrollLeftPanel = function(target) {
      var leftPanel = this.getLeftPanelElement();
      if (leftPanel) {
        leftPanel.scrollTop = target.scrollTop;
      }
    };
    Month2.prototype.getLeftPanelElement = function() {
      return this.element.querySelector("." + WEEK_NUMBER_WRAPPER_CLASS);
    };
    Month2.prototype.onScrollUIUpdate = function(args) {
      var headerHeight = this.getHeaderBarHeight();
      var header = this.getDatesHeaderElement();
      var content = this.getContentAreaElement();
      var height = this.parent.element.offsetHeight - headerHeight - header.offsetHeight;
      var leftPanel = this.getLeftPanelElement();
      if (this.parent.height !== "auto") {
        this.setContentHeight(content, leftPanel, height);
      }
      var scrollBarWidth = getScrollBarWidth();
      header.firstElementChild.style[args.cssProperties.rtlBorder] = "";
      header.style[args.cssProperties.rtlPadding] = "";
      if (content.offsetWidth - content.clientWidth > 0) {
        header.firstElementChild.style[args.cssProperties.border] = scrollBarWidth > 0 ? "1px" : "0px";
        header.style[args.cssProperties.padding] = scrollBarWidth > 0 ? scrollBarWidth - 1 + "px" : "0px";
      } else {
        header.firstElementChild.style[args.cssProperties.border] = "";
        header.style[args.cssProperties.padding] = "";
      }
      this.setColWidth(content);
      if (args.scrollPosition || !args.isPreventScrollUpdate && this.parent.currentView === "TimelineMonth") {
        var top_1 = this.parent.currentView === "TimelineMonth" ? this.parent.uiStateValues.top : args.scrollPosition.top;
        if (leftPanel) {
          leftPanel.scrollTop = top_1;
        }
        content.scrollTop = top_1;
        if (this.parent.uiStateValues.isInitial) {
          this.scrollToSelectedDate();
          this.parent.uiStateValues.isInitial = false;
        } else {
          content.scrollLeft = this.parent.currentView === "TimelineMonth" ? this.parent.uiStateValues.left : args.scrollPosition.left;
        }
      } else {
        this.scrollToSelectedDate();
      }
      this.retainScrollPosition();
    };
    Month2.prototype.scrollToSelectedDate = function() {
      var headerCell = this.element.querySelector("." + HEADER_CELLS_CLASS + '[data-date="' + this.parent.selectedDate.getTime().toString() + '"]');
      var content = this.getContentAreaElement();
      if (!isNullOrUndefined(headerCell)) {
        content.scrollLeft = !this.parent.enableRtl ? headerCell.offsetLeft : -(this.parent.getContentTable().offsetWidth - headerCell.offsetLeft - headerCell.offsetWidth);
      } else {
        content.scrollLeft = 0;
      }
      if (content.scrollLeft === 0 && this.parent.uiStateValues.isInitial) {
        this.parent.uiStateValues.left = 0;
      }
    };
    Month2.prototype.setContentHeight = function(content, leftPanelElement, height) {
      content.style.height = "auto";
      if (this.parent.currentView === "Month") {
        content.style.height = formatUnit(height);
      }
      if (leftPanelElement) {
        if (this.parent.currentView === "MonthAgenda") {
          height = this.parent.activeViewOptions.interval > 1 ? this.getContentAreaElement().firstElementChild.offsetHeight : this.element.querySelector("." + CONTENT_TABLE_CLASS).offsetHeight;
        }
        leftPanelElement.style.height = "auto";
        leftPanelElement.style.height = formatUnit(height - this.getScrollXIndent(content));
      }
    };
    Month2.prototype.generateColumnLevels = function() {
      var colLevels = [];
      var level = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);
      if (this.parent.activeViewOptions.group.resources.length > 0) {
        colLevels = this.parent.resourceBase.generateResourceLevels(level);
        if (this.parent.currentView === "MonthAgenda") {
          colLevels = [level];
        }
        if (this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.lastResourceLevel.length > 0) {
          var resourceLevel = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];
          var levels_1 = this.getDateSlots(resourceLevel.renderDates, resourceLevel.workDays);
          if (this.parent.activeViewOptions.group.byDate && this.parent.activeViewOptions.group.hideNonWorkingDays) {
            var index = levels_1.findIndex(function(x, index2) {
              return index2 !== 0 && x.date.getDay() === levels_1[0].date.getDay();
            });
            levels_1 = index > -1 ? levels_1.slice(0, index) : levels_1;
          }
          colLevels = [levels_1];
        }
      } else {
        colLevels.push(level);
      }
      this.colLevels = colLevels;
      return colLevels;
    };
    Month2.prototype.getDateSlots = function(renderDates, workDays) {
      var count = this.parent.activeViewOptions.showWeekend ? WEEK_LENGTH : workDays.length;
      var dateSlots = [];
      var isCurrentMonth = this.isCurrentMonth(this.parent.selectedDate);
      for (var col = 0; col < count; col++) {
        var classList2 = [HEADER_CELLS_CLASS];
        var currentDateIndex = renderDates.slice(0, count).map(function(date) {
          return date.getDay();
        });
        if (isCurrentMonth && currentDateIndex.indexOf(this.parent.currentTimezoneDate.getDay()) === col) {
          classList2.push(CURRENT_DAY_CLASS);
        }
        dateSlots.push({ date: renderDates[parseInt(col.toString(), 10)], type: "monthDay", className: classList2, colSpan: 1, workDays });
      }
      return dateSlots;
    };
    Month2.prototype.getDayNameFormat = function() {
      if (this.parent.isAdaptive || this.parent.activeViewOptions.group.resources.length > 0) {
        return "abbreviated";
      }
      return "wide";
    };
    Month2.prototype.renderLayout = function(type) {
      this.dayNameFormat = this.getDayNameFormat();
      this.setPanel(createElement("div", { className: TABLE_WRAP_CLASS }));
      var clsList = [this.viewClass];
      clsList.push(type);
      if (this.parent.activeViewOptions.group.byDate) {
        clsList.push("e-by-date");
        if (this.parent.currentView !== "Month") {
          this.parent.activeViewOptions.group.hideNonWorkingDays = false;
        }
      }
      if (this.parent.activeViewOptions.allowVirtualScrolling && !this.parent.uiStateValues.isGroupAdaptive) {
        clsList.push(VIRTUAL_SCROLL_CLASS);
      }
      if (this.parent.rowAutoHeight && this.parent.eventSettings.ignoreWhitespace) {
        clsList.push(IGNORE_WHITESPACE);
      }
      addClass([this.element], clsList);
      this.renderPanel(type);
      this.element.appendChild(this.createTableLayout(OUTER_TABLE_CLASS));
      this.element.querySelector("table").setAttribute("role", "presentation");
      this.colLevels = this.generateColumnLevels();
      this.renderHeader();
      this.renderContent();
      var target = this.parent.currentView === "MonthAgenda" ? this.parent.activeView.getPanel() : this.parent.element;
      if (this.parent.uiStateValues.isGroupAdaptive && !target.querySelector("." + RESOURCE_TOOLBAR_CONTAINER)) {
        this.renderResourceMobileLayout();
      }
      this.parent.notify(contentReady, {});
      if (this.parent.uiStateValues.isCustomMonth) {
        this.parent.uiStateValues.isCustomMonth = false;
      }
    };
    Month2.prototype.refreshHeader = function() {
      remove(this.element.querySelector("tbody tr"));
      this.renderHeader();
      this.parent.notify(contentReady, {});
    };
    Month2.prototype.wireCellEvents = function(element2) {
      EventHandler.add(element2, "mousedown", this.parent.workCellAction.cellMouseDown, this.parent.workCellAction);
      EventHandler.add(element2, "click", this.parent.workCellAction.cellClick, this.parent.workCellAction);
      if (!this.parent.isAdaptive) {
        EventHandler.add(element2, "dblclick", this.parent.workCellAction.cellDblClick, this.parent.workCellAction);
      }
    };
    Month2.prototype.renderHeader = function() {
      var tr = createElement("tr");
      this.renderLeftIndent(tr);
      var dateTd = createElement("td");
      dateTd.appendChild(this.renderDatesHeader());
      tr.appendChild(dateTd);
      prepend([tr], this.element.querySelector("tbody"));
    };
    Month2.prototype.renderLeftIndent = function(tr) {
      if (this.parent.activeViewOptions.showWeekNumber) {
        tr.appendChild(createElement("td", { className: "e-left-indent" }));
      }
    };
    Month2.prototype.renderContent = function() {
      if (this.parent.activeViewOptions.group.resources.length > 0) {
        this.parent.resourceBase.renderedResources = extend([], this.parent.resourceBase.lastResourceLevel, null, true);
      }
      var tr = createElement("tr");
      if (this.parent.activeViewOptions.showWeekNumber) {
        tr.appendChild(this.renderWeekNumberContent());
      }
      var workTd = createElement("td");
      var levels = this.colLevels.slice(0);
      if (this.parent.virtualScrollModule) {
        this.resetColLevels();
      }
      var wrap = createElement("div", { className: CONTENT_WRAP_CLASS });
      var contentArea = this.renderContentArea();
      if (this.parent.currentView === "Month") {
        wrap.appendChild(contentArea);
      } else {
        var monthAgendaWrapper = createElement("div", { className: TABLE_CONTAINER_CLASS });
        monthAgendaWrapper.appendChild(contentArea);
        wrap.appendChild(monthAgendaWrapper);
      }
      EventHandler.add(wrap, "scroll", this.onContentScroll, this);
      workTd.appendChild(wrap);
      tr.appendChild(workTd);
      if (this.parent.virtualScrollModule) {
        this.colLevels = levels;
        this.parent.virtualScrollModule.renderVirtualTrack(wrap);
      }
      this.element.querySelector("tbody").appendChild(tr);
      this.renderAppointmentContainer();
    };
    Month2.prototype.renderWeekNumberContent = function() {
      var dateCol = this.renderDates.map(function(date) {
        return /* @__PURE__ */ new Date(+date);
      });
      var td = createElement("td");
      var contentWrapper = createElement("div", { className: WEEK_NUMBER_WRAPPER_CLASS });
      td.appendChild(contentWrapper);
      var contentWrapTable = this.createTableLayout();
      contentWrapper.appendChild(contentWrapTable);
      var noOfDays = this.parent.activeViewOptions.showWeekend ? WEEK_LENGTH : this.parent.activeViewOptions.workDays.length;
      for (var i = 0, length_1 = this.renderDates.length / noOfDays; i < length_1; i++) {
        var dates = dateCol.splice(0, noOfDays);
        var weekNumber = this.parent.getWeekNumberContent(dates);
        contentWrapTable.querySelector("tbody").appendChild(this.createWeekNumberElement(weekNumber));
      }
      return td;
    };
    Month2.prototype.renderAppointmentContainer = function() {
    };
    Month2.prototype.renderDatesHeader = function() {
      var container = createElement("div", { className: DATE_HEADER_CONTAINER_CLASS });
      var wrap = createElement("div", { className: DATE_HEADER_WRAP_CLASS });
      container.appendChild(wrap);
      var table = this.createTableLayout();
      if (this.parent.currentView === "Month") {
        var thead = createElement("thead");
        thead.appendChild(createElement("tr"));
        prepend([thead], table);
      }
      this.createColGroup(table, this.colLevels[this.colLevels.length - 1]);
      var trEle = createElement("tr");
      for (var i = 0; i < this.colLevels.length; i++) {
        var level = this.colLevels[parseInt(i.toString(), 10)];
        var ntr = trEle.cloneNode();
        for (var j = 0; j < level.length; j++) {
          var td = level[parseInt(j.toString(), 10)];
          ntr.appendChild(this.createHeaderCell(td));
        }
        table.querySelector("tbody").appendChild(ntr);
      }
      wrap.appendChild(table);
      return container;
    };
    Month2.prototype.createHeaderCell = function(td) {
      var tdEle = createElement("td");
      this.addAttributes(td, tdEle);
      if (td.type === "monthDay") {
        var ele = createElement("span", { innerHTML: capitalizeFirstWord(this.parent.getDayNames(this.dayNameFormat)[td.date.getDay()], "single") });
        tdEle.appendChild(ele);
      }
      if (td.type === "resourceHeader") {
        this.setResourceHeaderContent(tdEle, td);
      }
      if (td.type === "dateHeader") {
        addClass([tdEle], DATE_HEADER_CLASS);
        tdEle.setAttribute("data-date", td.date.getTime().toString());
        if (this.parent.activeViewOptions.dateHeaderTemplate) {
          var cellArgs = { date: td.date, type: td.type };
          var elementId = this.parent.element.id + "_";
          var viewName = this.parent.activeViewOptions.dateHeaderTemplateName;
          var templateId = elementId + viewName + "dateHeaderTemplate";
          var dateTemplate = [].slice.call(this.parent.getDateHeaderTemplate()(cellArgs, this.parent, "dateHeaderTemplate", templateId, false));
          if (dateTemplate && dateTemplate.length) {
            append2(dateTemplate, tdEle);
          }
        } else {
          var ele = createElement("span", { className: NAVIGATE_CLASS });
          var skeleton = "full";
          var title = this.parent.globalize.formatDate(td.date, { skeleton, calendar: this.parent.getCalendarMode() });
          ele.setAttribute("title", capitalizeFirstWord(title, "multiple"));
          var innerText = this.parent.calendarUtil.isMonthStart(td.date) && !this.isCurrentDate(td.date) && !this.parent.isAdaptive ? this.parent.globalize.formatDate(td.date, { format: "MMM d", calendar: this.parent.getCalendarMode() }) : this.parent.globalize.formatDate(td.date, { skeleton: "d", calendar: this.parent.getCalendarMode() });
          ele.innerHTML = capitalizeFirstWord(innerText, "single");
          tdEle.appendChild(ele);
        }
        this.wireCellEvents(tdEle);
      }
      var args = { elementType: td.type, element: tdEle, date: td.date, groupIndex: td.groupIndex };
      this.parent.trigger(renderCell, args);
      return tdEle;
    };
    Month2.prototype.getContentSlots = function() {
      if (!(this.colLevels[this.colLevels.length - 1] && this.colLevels[this.colLevels.length - 1][0])) {
        return [];
      }
      var slotDatas = [];
      var prepareSlots = function(rowIndex, renderDate, resData, classList2) {
        var data = {
          date: /* @__PURE__ */ new Date(+renderDate),
          groupIndex: resData.groupIndex,
          workDays: resData.workDays,
          type: "monthCells",
          className: classList2 || [WORK_CELLS_CLASS]
        };
        if (!slotDatas[parseInt(rowIndex.toString(), 10)]) {
          slotDatas[parseInt(rowIndex.toString(), 10)] = [];
        }
        slotDatas[parseInt(rowIndex.toString(), 10)].push(data);
      };
      var includeResource = this.parent.currentView !== "MonthAgenda" && this.parent.activeViewOptions.group.resources.length > 0;
      if (includeResource && !this.parent.uiStateValues.isGroupAdaptive && !this.parent.activeViewOptions.group.byDate) {
        for (var _i = 0, _a = this.colLevels[this.colLevels.length - 2]; _i < _a.length; _i++) {
          var res = _a[_i];
          var dates = res.renderDates.map(function(date) {
            return /* @__PURE__ */ new Date(+date);
          });
          var count = this.parent.activeViewOptions.showWeekend ? WEEK_LENGTH : res.workDays.length;
          for (var i = 0; i < res.renderDates.length / count; i++) {
            var colDates = dates.splice(0, count);
            for (var _b = 0, colDates_1 = colDates; _b < colDates_1.length; _b++) {
              var colDate = colDates_1[_b];
              prepareSlots(i, colDate, res);
            }
          }
        }
      } else {
        var dates = this.renderDates.map(function(date) {
          return /* @__PURE__ */ new Date(+date);
        });
        var count = this.parent.activeViewOptions.showWeekend ? WEEK_LENGTH : this.parent.activeViewOptions.workDays.length;
        var level = this.colLevels.slice(0, 1)[0];
        var startIndex = this.renderDates.map(Number).indexOf(+level[0].date);
        for (var i = 0; i < this.renderDates.length / count; i++) {
          var colDates = dates.splice(0, count);
          var k = startIndex;
          var _loop_1 = function(j2) {
            var colDate2 = colDates[parseInt(k.toString(), 10)];
            k++;
            if (includeResource) {
              var lastRow = this_1.colLevels[this_1.colLevels.length - 1];
              var rowCount = lastRow.length / count;
              var resourcesTd = lastRow.slice(0, rowCount);
              if (this_1.parent.activeViewOptions.group.hideNonWorkingDays) {
                resourcesTd = lastRow.filter(function(x) {
                  return x.date.getDay() === colDate2.getDay();
                });
                if (resourcesTd.length === 0) {
                  j2 = j2 - 1;
                  return out_j_1 = j2, "continue";
                }
              }
              for (var resIndex = 0; resIndex < resourcesTd.length; resIndex++) {
                var clsList = void 0;
                if (resIndex !== 0) {
                  clsList = [WORK_CELLS_CLASS, DISABLE_DATE];
                }
                prepareSlots(i, colDate2, resourcesTd[parseInt(resIndex.toString(), 10)], clsList);
              }
            } else {
              prepareSlots(i, colDate2, this_1.colLevels[this_1.colLevels.length - 1][0]);
            }
            out_j_1 = j2;
          };
          var this_1 = this, out_j_1;
          for (var j = startIndex; j < this.colLevels[0].length + startIndex && j < colDates.length; j++) {
            _loop_1(j);
            j = out_j_1;
          }
        }
      }
      return slotDatas;
    };
    Month2.prototype.updateClassList = function(data) {
      if (!this.isCustomMonth() && this.isOtherMonth(data.date)) {
        data.className.push(OTHERMONTH_CLASS);
      }
      if (!this.parent.isMinMaxDate(data.date)) {
        data.className.push(DISABLE_DATES);
      }
      this.updateSelectedCellClass(data);
    };
    Month2.prototype.updateSelectedCellClass = function(data) {
      return;
    };
    Month2.prototype.isOtherMonth = function(date) {
      return date.getTime() < this.monthDates.start.getTime() || date.getTime() > this.monthDates.end.getTime();
    };
    Month2.prototype.renderContentArea = function() {
      var tbl = this.createTableLayout(CONTENT_TABLE_CLASS);
      this.setAriaAttributes(tbl);
      this.addAutoHeightClass(tbl);
      if (this.parent.currentView === "TimelineMonth") {
        this.createColGroup(tbl, this.colLevels[this.colLevels.length - 1]);
      }
      var monthDate = new Date(this.parent.selectedDate.getTime());
      this.monthDates = {
        start: this.parent.calendarUtil.firstDateOfMonth(monthDate),
        end: this.parent.calendarUtil.lastDateOfMonth(addMonths(monthDate, this.parent.activeViewOptions.interval - 1))
      };
      var tBody = tbl.querySelector("tbody");
      append2(this.getContentRows(), tBody);
      this.wireCellEvents(tBody);
      return tbl;
    };
    Month2.prototype.getContentRows = function() {
      var trows = [];
      var tr = createElement("tr");
      var td = createElement("td", { attrs: { "aria-selected": "false" } });
      var slotDatas = this.getContentSlots();
      for (var row = 0; row < slotDatas.length; row++) {
        var ntr = tr.cloneNode();
        for (var col = 0; col < slotDatas[parseInt(row.toString(), 10)].length; col++) {
          var ntd = this.createContentTd(slotDatas[parseInt(row.toString(), 10)][parseInt(col.toString(), 10)], td);
          ntr.appendChild(ntd);
        }
        trows.push(ntr);
      }
      return trows;
    };
    Month2.prototype.createContentTd = function(data, td) {
      var ntd = td.cloneNode();
      if (data.colSpan) {
        ntd.setAttribute("colspan", data.colSpan.toString());
      }
      this.updateClassList(data);
      var type = data.type;
      if (data.className.indexOf(RESOURCE_PARENT_CLASS) !== -1) {
        data.className.push(RESOURCE_GROUP_CELLS_CLASS);
        type = "resourceGroupCells";
      }
      if (this.parent.workHours.highlight && this.isWorkDay(data.date, data.workDays)) {
        data.className.push(WORKDAY_CLASS);
      }
      if (this.isCurrentDate(data.date)) {
        data.className.push(CURRENTDATE_CLASS);
      }
      addClass([ntd], data.className);
      ntd.setAttribute("data-date", data.date.getTime().toString());
      if (!isNullOrUndefined(data.groupIndex) || this.parent.uiStateValues.isGroupAdaptive) {
        var groupIndex = this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex : data.groupIndex;
        ntd.setAttribute("data-group-index", "" + groupIndex);
      }
      this.renderDateHeaderElement(data, ntd);
      if (this.parent.activeViewOptions.cellTemplate) {
        var args_1 = { date: data.date, type, groupIndex: data.groupIndex };
        var scheduleId = this.parent.element.id + "_";
        var viewName = this.parent.activeViewOptions.cellTemplateName;
        var templateId = scheduleId + viewName + "cellTemplate";
        var cellTemplate = [].slice.call(this.parent.getCellTemplate()(args_1, this.parent, "cellTemplate", templateId, false));
        append2(cellTemplate, ntd);
      }
      var args = { elementType: type, element: ntd, date: data.date, groupIndex: data.groupIndex };
      this.parent.trigger(renderCell, args);
      return ntd;
    };
    Month2.prototype.renderDateHeaderElement = function(data, ntd) {
      if (this.parent.currentView === "TimelineMonth") {
        return;
      }
      var dateHeader = createElement("div", { className: DATE_HEADER_CLASS });
      if (this.parent.activeViewOptions.cellHeaderTemplate) {
        var args = { date: data.date, type: data.type, groupIndex: data.groupIndex };
        var scheduleId = this.parent.element.id + "_";
        var viewName = this.parent.activeViewOptions.cellHeaderTemplateName;
        var templateId = scheduleId + viewName + "cellHeaderTemplate";
        var cellHeaderTemplate = [].slice.call(this.parent.getCellHeaderTemplate()(args, this.parent, "cellHeaderTemplate", templateId, false));
        append2(cellHeaderTemplate, dateHeader);
      } else {
        var innerText = this.parent.calendarUtil.isMonthStart(data.date) && !this.isCurrentDate(data.date) && !this.parent.isAdaptive ? this.parent.globalize.formatDate(data.date, { format: "MMM d", calendar: this.parent.getCalendarMode() }) : this.parent.globalize.formatDate(data.date, { skeleton: "d", calendar: this.parent.getCalendarMode() });
        dateHeader.innerHTML = capitalizeFirstWord(innerText, "single");
      }
      ntd.appendChild(dateHeader);
      if (this.getModuleName() === "month") {
        addClass([dateHeader], NAVIGATE_CLASS);
        var skeleton = "full";
        var announcementText = this.parent.globalize.formatDate(data.date, { skeleton, calendar: this.parent.getCalendarMode() });
        ntd.setAttribute("aria-label", announcementText);
      }
    };
    Month2.prototype.getMonthStart = function(currentDate) {
      var useDisplayDate = this.parent.currentView === "Month" && !isNullOrUndefined(this.parent.activeViewOptions.displayDate) && (this.parent.uiStateValues.isCustomMonth || this.isCustomRange());
      var date = useDisplayDate ? this.parent.activeViewOptions.displayDate : !(this.parent.uiStateValues.isCustomMonth || this.isCustomRange()) && this.isCustomMonth() ? currentDate : this.parent.calendarUtil.firstDateOfMonth(currentDate);
      var monthStart = getWeekFirstDate(date, this.parent.activeViewOptions.firstDayOfWeek);
      return new Date(monthStart.getFullYear(), monthStart.getMonth(), monthStart.getDate());
    };
    Month2.prototype.getMonthEnd = function(currentDate) {
      if (this.isCustomMonth()) {
        var start = this.getMonthStart(currentDate);
        var numberOfDays = WEEK_LENGTH * (this.parent.activeViewOptions.numberOfWeeks > 0 ? this.parent.activeViewOptions.numberOfWeeks : DEFAULT_WEEKS);
        return addDays(start, numberOfDays - 1);
      } else {
        var endDate = addMonths(currentDate, this.parent.activeViewOptions.interval - 1);
        var lastWeekOfMonth = getWeekFirstDate(this.parent.calendarUtil.lastDateOfMonth(endDate), this.parent.activeViewOptions.firstDayOfWeek);
        return addDays(lastWeekOfMonth, WEEK_LENGTH - 1);
      }
    };
    Month2.prototype.isCustomRange = function() {
      var dates = this.parent.getCurrentViewDates();
      if (dates && dates.length > 0) {
        var selectedTime = resetTime(this.parent.selectedDate).getTime();
        var weekFirstDate = getWeekFirstDate(dates[dates.length - 1], this.parent.activeViewOptions.firstDayOfWeek);
        return !(selectedTime >= getWeekFirstDate(dates[0], this.parent.activeViewOptions.firstDayOfWeek).getTime() && selectedTime <= addDays(weekFirstDate, 6).getTime());
      }
      return false;
    };
    Month2.prototype.getRenderDates = function(workDays) {
      var renderDates = [];
      var currentDate = resetTime(this.parent.selectedDate);
      var start = this.getMonthStart(currentDate);
      var monthEnd = this.getMonthEnd(currentDate);
      do {
        if (this.parent.activeViewOptions.showWeekend) {
          renderDates.push(start);
        } else {
          if (this.isWorkDay(start, workDays)) {
            renderDates.push(start);
          }
        }
        start = addDays(start, 1);
        if (start.getHours() > 0) {
          start = resetTime(start);
        }
      } while (start.getTime() <= monthEnd.getTime());
      if (!workDays) {
        this.renderDates = renderDates;
      }
      if (this.parent.headerModule) {
        this.parent.headerModule.previousNextIconHandler();
      }
      return renderDates;
    };
    Month2.prototype.getNextPreviousDate = function(type) {
      if (this.isCustomMonth()) {
        var dates = this.parent.getCurrentViewDates();
        var date = getWeekFirstDate(type === "next" ? dates[dates.length - 1] : dates[0], this.parent.activeViewOptions.firstDayOfWeek);
        return addDays(date, type === "next" ? WEEK_LENGTH : -(this.parent.activeViewOptions.numberOfWeeks > 0 ? this.parent.activeViewOptions.numberOfWeeks : DEFAULT_WEEKS) * WEEK_LENGTH);
      } else {
        return addMonths(this.parent.selectedDate, (type === "next" ? 1 : -1) * this.parent.activeViewOptions.interval);
      }
    };
    Month2.prototype.getStartDate = function() {
      return this.getMonthStart(this.parent.selectedDate);
    };
    Month2.prototype.getEndDate = function() {
      return this.getMonthEnd(this.parent.selectedDate);
    };
    Month2.prototype.getEndDateFromStartDate = function(start) {
      return addDays(new Date(start.getTime()), 1);
    };
    Month2.prototype.getDateRangeText = function() {
      if (this.parent.isAdaptive || isNullOrUndefined(this.parent.activeViewOptions.dateFormat)) {
        var startDate = this.parent.selectedDate;
        var endDate = void 0;
        var updateCustomRange = false;
        if (this.isCustomMonth()) {
          var dates = this.parent.getCurrentViewDates();
          updateCustomRange = dates[0].getMonth() !== dates[dates.length - 1].getMonth() || dates[0].getFullYear() !== dates[dates.length - 1].getFullYear();
          if (updateCustomRange) {
            startDate = dates[0];
            endDate = dates[dates.length - 1];
          }
        }
        var isUpdateDateRange = this.parent.currentView !== "Month" || !this.isCustomMonth();
        if (this.parent.activeViewOptions.interval > 1 && isUpdateDateRange || updateCustomRange) {
          endDate = endDate ? endDate : addMonths(lastDateOfMonth(startDate), this.parent.activeViewOptions.interval - 1);
          if (startDate.getFullYear() === endDate.getFullYear()) {
            var monthNames = this.parent.globalize.formatDate(startDate, { format: "MMMM", calendar: this.parent.getCalendarMode() }) + " - " + this.parent.globalize.formatDate(endDate, { format: "MMMM ", calendar: this.parent.getCalendarMode() }) + this.parent.globalize.formatDate(endDate, { skeleton: "y", calendar: this.parent.getCalendarMode() });
            return capitalizeFirstWord(monthNames, "single");
          }
          var text = this.parent.globalize.formatDate(startDate, { format: "MMMM", calendar: this.parent.getCalendarMode() }) + " " + startDate.getFullYear() + " - " + this.parent.globalize.formatDate(endDate, { format: "MMMM ", calendar: this.parent.getCalendarMode() }) + this.parent.globalize.formatDate(endDate, { skeleton: "y", calendar: this.parent.getCalendarMode() });
          return capitalizeFirstWord(text, "single");
        }
        var format = this.parent.activeViewOptions.dateFormat ? this.parent.activeViewOptions.dateFormat : "MMMM y";
        return capitalizeFirstWord(this.parent.globalize.formatDate(startDate, { format, calendar: this.parent.getCalendarMode() }), "single");
      }
      return this.formatDateRange(this.parent.selectedDate);
    };
    Month2.prototype.getLabelText = function(view) {
      return this.parent.localeObj.getConstant(view) + " of " + capitalizeFirstWord(this.parent.globalize.formatDate(this.parent.selectedDate, { format: "MMMM y", calendar: this.parent.getCalendarMode() }), "single");
    };
    Month2.prototype.createWeekNumberElement = function(text) {
      var tr = createElement("tr");
      var td = createElement("td", {
        className: WEEK_NUMBER_CLASS,
        attrs: { "title": text ? this.parent.localeObj.getConstant("week") + " " + text : "" },
        innerHTML: text || ""
      });
      tr.appendChild(td);
      var args = { elementType: "weekNumberCell", element: td };
      this.parent.trigger(renderCell, args);
      return tr;
    };
    Month2.prototype.unWireEvents = function() {
      var contentScrollableEle = this.element.querySelector("." + CONTENT_WRAP_CLASS);
      if (contentScrollableEle) {
        EventHandler.remove(contentScrollableEle, "scroll", this.onContentScroll);
      }
    };
    Month2.prototype.isCustomMonth = function() {
      return this.parent.currentView === "Month" && (!isNullOrUndefined(this.parent.activeViewOptions.displayDate) || this.parent.activeViewOptions.numberOfWeeks > 0);
    };
    Month2.prototype.getModuleName = function() {
      return "month";
    };
    Month2.prototype.destroy = function() {
      if (!this.parent || this.parent && this.parent.isDestroyed) {
        return;
      }
      if (this.element) {
        if (this.monthEvent) {
          this.monthEvent.destroy();
          this.monthEvent = null;
        }
        this.unWireEvents();
        if (this.parent.resourceBase) {
          this.parent.resourceBase.destroy();
        }
        if (this.parent.scheduleTouchModule) {
          this.parent.scheduleTouchModule.resetValues();
        }
        _super.prototype.destroy.call(this);
      }
    };
    return Month2;
  }(ViewBase)
);
var ViewsDirective = vueDefineComponent({
  inject: { custom: { default: null } },
  render: function(createElement2) {
    if (!isExecute) {
      var h2 = !isExecute ? gh : createElement2;
      var slots = null;
      if (!isNullOrUndefined(this.$slots.default)) {
        slots = !isExecute ? this.$slots.default() : this.$slots.default;
      }
      return h2("div", { class: "e-directive" }, slots);
    }
    return;
  },
  updated: function() {
    if (!isExecute && this.custom) {
      this.custom();
    }
  },
  methods: {
    getTag: function() {
      return "e-views";
    }
  }
});
var ViewDirective = vueDefineComponent({
  render: function() {
    return;
  },
  methods: {
    getTag: function() {
      return "e-view";
    }
  }
});
var ResourcesDirective = vueDefineComponent({
  inject: { custom: { default: null } },
  render: function(createElement2) {
    if (!isExecute) {
      var h2 = !isExecute ? gh : createElement2;
      var slots = null;
      if (!isNullOrUndefined(this.$slots.default)) {
        slots = !isExecute ? this.$slots.default() : this.$slots.default;
      }
      return h2("div", { class: "e-directive" }, slots);
    }
    return;
  },
  updated: function() {
    if (!isExecute && this.custom) {
      this.custom();
    }
  },
  methods: {
    getTag: function() {
      return "e-resources";
    }
  }
});
var ResourceDirective = vueDefineComponent({
  render: function() {
    return;
  },
  methods: {
    getTag: function() {
      return "e-resource";
    }
  }
});
var properties$b = ["isLazyUpdate", "plugins", "agendaDaysCount", "allowDragAndDrop", "allowInline", "allowKeyboardInteraction", "allowMultiCellSelection", "allowMultiDrag", "allowMultiRowSelection", "allowResizing", "allowSwiping", "calendarMode", "cellHeaderTemplate", "cellTemplate", "cssClass", "currentView", "dateFormat", "dateHeaderTemplate", "dateRangeTemplate", "dayHeaderTemplate", "editorTemplate", "enableAdaptiveUI", "enableAllDayScroll", "enableHtmlSanitizer", "enablePersistence", "enableRecurrenceValidation", "enableRtl", "endHour", "eventDragArea", "eventSettings", "firstDayOfWeek", "firstMonthOfYear", "group", "headerIndentTemplate", "headerRows", "height", "hideEmptyAgendaDays", "locale", "maxDate", "minDate", "monthHeaderTemplate", "monthsCount", "quickInfoOnSelectionEnd", "quickInfoTemplates", "readonly", "resourceHeaderTemplate", "resources", "rowAutoHeight", "selectedDate", "showHeaderBar", "showQuickInfo", "showTimeIndicator", "showWeekNumber", "showWeekend", "startHour", "timeFormat", "timeScale", "timezone", "timezoneDataSource", "views", "weekRule", "width", "workDays", "workHours", "actionBegin", "actionComplete", "actionFailure", "cellClick", "cellDoubleClick", "created", "dataBinding", "dataBound", "destroyed", "drag", "dragStart", "dragStop", "eventClick", "eventRendered", "hover", "moreEventsClick", "navigating", "popupClose", "popupOpen", "renderCell", "resizeStart", "resizeStop", "resizing", "select"];
var modelProps$b = ["currentView", "selectedDate"];
var testProp$b = getProps({ props: properties$b });
var props$b = testProp$b[0], watch$b = testProp$b[1], emitProbs$b = Object.keys(watch$b);
emitProbs$b.push("modelchanged", "update:modelValue");
for (var _i$b = 0, modelProps_1$b = modelProps$b; _i$b < modelProps_1$b.length; _i$b++) {
  var props_1$b = modelProps_1$b[_i$b];
  emitProbs$b.push("update:" + props_1$b);
}
var ScheduleComponent = vueDefineComponent({
  name: "ScheduleComponent",
  mixins: [ComponentBase],
  props: props$b,
  watch: watch$b,
  emits: emitProbs$b,
  model: { event: "modelchanged" },
  provide: function() {
    return { custom: this.custom };
  },
  data: function() {
    return {
      ej2Instances: new Schedule({}),
      propKeys: properties$b,
      models: modelProps$b,
      hasChildDirective: true,
      hasInjectedModules: true,
      tagMapper: { "e-views": "e-view", "e-resources": "e-resource", "e-header-rows": "e-header-row" },
      tagNameMapper: { "e-header-rows": "e-headerRows" },
      isVue3: !isExecute,
      templateCollection: {}
    };
  },
  created: function() {
    this.ej2Instances._trigger = this.ej2Instances.trigger;
    this.ej2Instances.trigger = this.trigger;
    this.bindProperties();
    this.ej2Instances._setProperties = this.ej2Instances.setProperties;
    this.ej2Instances.setProperties = this.setProperties;
    this.ej2Instances.clearTemplate = this.clearTemplate;
    this.updated = this.updated;
  },
  render: function(createElement2) {
    var h2 = !isExecute ? gh : createElement2;
    var slots = null;
    if (!isNullOrUndefined(this.$slots.default)) {
      slots = !isExecute ? this.$slots.default() : this.$slots.default;
    }
    return h2("div", slots);
  },
  methods: {
    clearTemplate: function(templateNames) {
      if (!templateNames) {
        templateNames = Object.keys(this.templateCollection || {});
      }
      if (templateNames.length && this.templateCollection) {
        for (var _i = 0, templateNames_1 = templateNames; _i < templateNames_1.length; _i++) {
          var tempName = templateNames_1[_i];
          var elementCollection = this.templateCollection[tempName];
          if (elementCollection && elementCollection.length) {
            for (var _a = 0, elementCollection_1 = elementCollection; _a < elementCollection_1.length; _a++) {
              var ele = elementCollection_1[_a];
              var destroy2 = getValue("__vue__.$destroy", ele);
              if (destroy2) {
                ele.__vue__.$destroy();
              }
              if (ele.innerHTML) {
                ele.innerHTML = "";
              }
            }
            delete this.templateCollection[tempName];
          }
        }
      }
    },
    setProperties: function(prop, muteOnChange) {
      var _this = this;
      if (this.isVue3) {
        this.models = !this.models ? this.ej2Instances.referModels : this.models;
      }
      if (this.ej2Instances && this.ej2Instances._setProperties) {
        this.ej2Instances._setProperties(prop, muteOnChange);
      }
      if (prop && this.models && this.models.length) {
        Object.keys(prop).map(function(key) {
          _this.models.map(function(model) {
            if (key === model && !/datasource/i.test(key)) {
              if (_this.isVue3) {
                _this.ej2Instances.vueInstance.$emit("update:" + key, prop[key]);
              } else {
                _this.$emit("update:" + key, prop[key]);
                _this.$emit("modelchanged", prop[key]);
              }
            }
          });
        });
      }
    },
    trigger: function(eventName, eventProp, successHandler) {
      if (!isExecute) {
        this.models = !this.models ? this.ej2Instances.referModels : this.models;
      }
      if ((eventName === "change" || eventName === "input") && this.models && this.models.length !== 0) {
        var key = this.models.toString().match(/checked|value/) || [];
        var propKey = key[0];
        if (eventProp && key && !isUndefined(eventProp[propKey])) {
          if (!isExecute) {
            this.ej2Instances.vueInstance.$emit("update:" + propKey, eventProp[propKey]);
            this.ej2Instances.vueInstance.$emit("modelchanged", eventProp[propKey]);
            this.ej2Instances.vueInstance.$emit("update:modelValue", eventProp[propKey]);
          } else {
            if (eventName === "change" || this.$props && !this.$props.isLazyUpdate) {
              this.$emit("update:" + propKey, eventProp[propKey]);
              this.$emit("modelchanged", eventProp[propKey]);
            }
          }
        }
      } else if (eventName === "actionBegin" && eventProp.requestType === "dateNavigate" && this.models && this.models.length !== 0) {
        var key = this.models.toString().match(/currentView|selectedDate/) || [];
        var propKey = key[0];
        if (eventProp && key && !isUndefined(eventProp[propKey])) {
          if (!isExecute) {
            this.ej2Instances.vueInstance.$emit("update:" + propKey, eventProp[propKey]);
            this.ej2Instances.vueInstance.$emit("modelchanged", eventProp[propKey]);
          } else {
            this.$emit("update:" + propKey, eventProp[propKey]);
            this.$emit("modelchanged", eventProp[propKey]);
          }
        }
      }
      if (this.ej2Instances && this.ej2Instances._trigger) {
        this.ej2Instances._trigger(eventName, eventProp, successHandler);
      }
    },
    custom: function() {
      this.updated();
    },
    addEvent: function(data) {
      return this.ej2Instances.addEvent(data);
    },
    addResource: function(resources, name, index) {
      return this.ej2Instances.addResource(resources, name, index);
    },
    changeCurrentView: function(viewName, viewIndex) {
      return this.ej2Instances.changeCurrentView(viewName, viewIndex);
    },
    closeEditor: function() {
      return this.ej2Instances.closeEditor();
    },
    closeQuickInfoPopup: function() {
      return this.ej2Instances.closeQuickInfoPopup();
    },
    closeTooltip: function() {
      return this.ej2Instances.closeTooltip();
    },
    collapseResource: function(resourceId, name) {
      return this.ej2Instances.collapseResource(resourceId, name);
    },
    deleteEvent: function(id, currentAction) {
      return this.ej2Instances.deleteEvent(id, currentAction);
    },
    expandResource: function(resourceId, name) {
      return this.ej2Instances.expandResource(resourceId, name);
    },
    exportToExcel: function(excelExportOptions) {
      return this.ej2Instances.exportToExcel(excelExportOptions);
    },
    exportToICalendar: function(fileName, customData) {
      return this.ej2Instances.exportToICalendar(fileName, customData);
    },
    generateEventOccurrences: function(event, startDate) {
      return this.ej2Instances.generateEventOccurrences(event, startDate);
    },
    getBlockEvents: function(startDate, endDate, includeOccurrences) {
      return this.ej2Instances.getBlockEvents(startDate, endDate, includeOccurrences);
    },
    getCellDetails: function(tdCol) {
      return this.ej2Instances.getCellDetails(tdCol);
    },
    getCurrentViewDates: function() {
      return this.ej2Instances.getCurrentViewDates();
    },
    getCurrentViewEvents: function() {
      return this.ej2Instances.getCurrentViewEvents();
    },
    getCurrentViewIndex: function() {
      return this.ej2Instances.getCurrentViewIndex();
    },
    getDeletedOccurrences: function(recurrenceData) {
      return this.ej2Instances.getDeletedOccurrences(recurrenceData);
    },
    getEventDetails: function(element2) {
      return this.ej2Instances.getEventDetails(element2);
    },
    getEventMaxID: function() {
      return this.ej2Instances.getEventMaxID();
    },
    getEvents: function(startDate, endDate, includeOccurrences) {
      return this.ej2Instances.getEvents(startDate, endDate, includeOccurrences);
    },
    getIndexFromResourceId: function(id, name) {
      return this.ej2Instances.getIndexFromResourceId(id, name);
    },
    getOccurrencesByID: function(eventID) {
      return this.ej2Instances.getOccurrencesByID(eventID);
    },
    getOccurrencesByRange: function(startTime, endTime) {
      return this.ej2Instances.getOccurrencesByRange(startTime, endTime);
    },
    getResourceCollections: function() {
      return this.ej2Instances.getResourceCollections();
    },
    getResourcesByIndex: function(index) {
      return this.ej2Instances.getResourcesByIndex(index);
    },
    getSelectedElements: function() {
      return this.ej2Instances.getSelectedElements();
    },
    hideSpinner: function() {
      return this.ej2Instances.hideSpinner();
    },
    importICalendar: function(fileContent) {
      return this.ej2Instances.importICalendar(fileContent);
    },
    isSlotAvailable: function(startTime, endTime, groupIndex) {
      return this.ej2Instances.isSlotAvailable(startTime, endTime, groupIndex);
    },
    openEditor: function(data, action, isEventData, repeatType) {
      return this.ej2Instances.openEditor(data, action, isEventData, repeatType);
    },
    openQuickInfoPopup: function(data) {
      return this.ej2Instances.openQuickInfoPopup(data);
    },
    print: function(printOptions) {
      return this.ej2Instances.print(printOptions);
    },
    refreshEvents: function(isRemoteRefresh) {
      return this.ej2Instances.refreshEvents(isRemoteRefresh);
    },
    refreshLayout: function() {
      return this.ej2Instances.refreshLayout();
    },
    refreshTemplates: function(templateName) {
      return this.ej2Instances.refreshTemplates(templateName);
    },
    removeResource: function(resourceId, name) {
      return this.ej2Instances.removeResource(resourceId, name);
    },
    resetWorkHours: function(dates, start, end, groupIndex) {
      return this.ej2Instances.resetWorkHours(dates, start, end, groupIndex);
    },
    saveEvent: function(data, currentAction) {
      return this.ej2Instances.saveEvent(data, currentAction);
    },
    scrollTo: function(hour, scrollDate) {
      return this.ej2Instances.scrollTo(hour, scrollDate);
    },
    scrollToResource: function(resourceId, groupName) {
      return this.ej2Instances.scrollToResource(resourceId, groupName);
    },
    selectResourceByIndex: function(groupIndex) {
      return this.ej2Instances.selectResourceByIndex(groupIndex);
    },
    setRecurrenceEditor: function(recurrenceEditor) {
      return this.ej2Instances.setRecurrenceEditor(recurrenceEditor);
    },
    setResourceCollections: function(resourceCol) {
      return this.ej2Instances.setResourceCollections(resourceCol);
    },
    setWorkHours: function(dates, start, end, groupIndex) {
      return this.ej2Instances.setWorkHours(dates, start, end, groupIndex);
    },
    showSpinner: function() {
      return this.ej2Instances.showSpinner();
    }
  }
});
var properties$a = ["isLazyUpdate", "plugins", "content", "cssClass", "disabled", "enableHtmlSanitizer", "enablePersistence", "enableRtl", "iconCss", "iconPosition", "isPrimary", "isToggle", "locale", "created"];
var modelProps$a = [];
var testProp$a = getProps({ props: properties$a });
var props$a = testProp$a[0], watch$a = testProp$a[1], emitProbs$a = Object.keys(watch$a);
emitProbs$a.push("modelchanged", "update:modelValue");
for (var _i$a = 0, modelProps_1$a = modelProps$a; _i$a < modelProps_1$a.length; _i$a++) {
  var props_1$a = modelProps_1$a[_i$a];
  emitProbs$a.push("update:" + props_1$a);
}
var ButtonComponent = vueDefineComponent({
  name: "ButtonComponent",
  mixins: [ComponentBase],
  props: props$a,
  watch: watch$a,
  emits: emitProbs$a,
  provide: function() {
    return { custom: this.custom };
  },
  data: function() {
    return {
      ej2Instances: new Button({}),
      propKeys: properties$a,
      models: modelProps$a,
      hasChildDirective: false,
      hasInjectedModules: false,
      tagMapper: {},
      tagNameMapper: {},
      isVue3: !isExecute,
      templateCollection: {}
    };
  },
  created: function() {
    this.bindProperties();
    this.ej2Instances._setProperties = this.ej2Instances.setProperties;
    this.ej2Instances.setProperties = this.setProperties;
    this.ej2Instances.clearTemplate = this.clearTemplate;
    this.updated = this.updated;
  },
  render: function(createElement2) {
    var h2 = !isExecute ? gh : createElement2;
    var slots = null;
    if (!isNullOrUndefined(this.$slots.default)) {
      slots = !isExecute ? this.$slots.default() : this.$slots.default;
    }
    return h2("button", slots);
  },
  methods: {
    clearTemplate: function(templateNames) {
      if (!templateNames) {
        templateNames = Object.keys(this.templateCollection || {});
      }
      if (templateNames.length && this.templateCollection) {
        for (var _i = 0, templateNames_1 = templateNames; _i < templateNames_1.length; _i++) {
          var tempName = templateNames_1[_i];
          var elementCollection = this.templateCollection[tempName];
          if (elementCollection && elementCollection.length) {
            for (var _a = 0, elementCollection_1 = elementCollection; _a < elementCollection_1.length; _a++) {
              var ele = elementCollection_1[_a];
              var destroy2 = getValue("__vue__.$destroy", ele);
              if (destroy2) {
                ele.__vue__.$destroy();
              }
              if (ele.innerHTML) {
                ele.innerHTML = "";
              }
            }
            delete this.templateCollection[tempName];
          }
        }
      }
    },
    setProperties: function(prop, muteOnChange) {
      var _this = this;
      if (this.isVue3) {
        this.models = !this.models ? this.ej2Instances.referModels : this.models;
      }
      if (this.ej2Instances && this.ej2Instances._setProperties) {
        this.ej2Instances._setProperties(prop, muteOnChange);
      }
      if (prop && this.models && this.models.length) {
        Object.keys(prop).map(function(key) {
          _this.models.map(function(model) {
            if (key === model && !/datasource/i.test(key)) {
              if (_this.isVue3) {
                _this.ej2Instances.vueInstance.$emit("update:" + key, prop[key]);
              } else {
                _this.$emit("update:" + key, prop[key]);
                _this.$emit("modelchanged", prop[key]);
              }
            }
          });
        });
      }
    },
    custom: function() {
      this.updated();
    },
    click: function() {
      return this.ej2Instances.click();
    },
    focusIn: function() {
      return this.ej2Instances.focusIn();
    }
  }
});
var properties$9 = ["isLazyUpdate", "plugins", "checked", "cssClass", "disabled", "enableHtmlSanitizer", "enablePersistence", "enableRtl", "htmlAttributes", "indeterminate", "label", "labelPosition", "locale", "name", "value", "change", "created"];
var modelProps$9 = ["checked", "indeterminate"];
var testProp$9 = getProps({ props: properties$9 });
var props$9 = testProp$9[0], watch$9 = testProp$9[1], emitProbs$9 = Object.keys(watch$9);
emitProbs$9.push("modelchanged", "update:modelValue");
for (var _i$9 = 0, modelProps_1$9 = modelProps$9; _i$9 < modelProps_1$9.length; _i$9++) {
  var props_1$9 = modelProps_1$9[_i$9];
  emitProbs$9.push("update:" + props_1$9);
}
var CheckBoxComponent = vueDefineComponent({
  name: "CheckBoxComponent",
  mixins: [ComponentBase],
  props: props$9,
  watch: watch$9,
  emits: emitProbs$9,
  model: { event: "modelchanged" },
  provide: function() {
    return { custom: this.custom };
  },
  data: function() {
    return {
      ej2Instances: new CheckBox({}),
      propKeys: properties$9,
      models: modelProps$9,
      hasChildDirective: false,
      hasInjectedModules: false,
      tagMapper: {},
      tagNameMapper: {},
      isVue3: !isExecute,
      templateCollection: {}
    };
  },
  created: function() {
    this.ej2Instances._trigger = this.ej2Instances.trigger;
    this.ej2Instances.trigger = this.trigger;
    this.bindProperties();
    this.ej2Instances._setProperties = this.ej2Instances.setProperties;
    this.ej2Instances.setProperties = this.setProperties;
    this.ej2Instances.clearTemplate = this.clearTemplate;
    this.updated = this.updated;
  },
  render: function(createElement2) {
    var h2 = !isExecute ? gh : createElement2;
    var slots = null;
    if (!isNullOrUndefined(this.$slots.default)) {
      slots = !isExecute ? this.$slots.default() : this.$slots.default;
    }
    return h2("input", slots);
  },
  methods: {
    clearTemplate: function(templateNames) {
      if (!templateNames) {
        templateNames = Object.keys(this.templateCollection || {});
      }
      if (templateNames.length && this.templateCollection) {
        for (var _i = 0, templateNames_1 = templateNames; _i < templateNames_1.length; _i++) {
          var tempName = templateNames_1[_i];
          var elementCollection = this.templateCollection[tempName];
          if (elementCollection && elementCollection.length) {
            for (var _a = 0, elementCollection_1 = elementCollection; _a < elementCollection_1.length; _a++) {
              var ele = elementCollection_1[_a];
              var destroy2 = getValue("__vue__.$destroy", ele);
              if (destroy2) {
                ele.__vue__.$destroy();
              }
              if (ele.innerHTML) {
                ele.innerHTML = "";
              }
            }
            delete this.templateCollection[tempName];
          }
        }
      }
    },
    setProperties: function(prop, muteOnChange) {
      var _this = this;
      if (this.isVue3) {
        this.models = !this.models ? this.ej2Instances.referModels : this.models;
      }
      if (this.ej2Instances && this.ej2Instances._setProperties) {
        this.ej2Instances._setProperties(prop, muteOnChange);
      }
      if (prop && this.models && this.models.length) {
        Object.keys(prop).map(function(key) {
          _this.models.map(function(model) {
            if (key === model && !/datasource/i.test(key)) {
              if (_this.isVue3) {
                _this.ej2Instances.vueInstance.$emit("update:" + key, prop[key]);
              } else {
                _this.$emit("update:" + key, prop[key]);
                _this.$emit("modelchanged", prop[key]);
              }
            }
          });
        });
      }
    },
    trigger: function(eventName, eventProp, successHandler) {
      if (!isExecute) {
        this.models = !this.models ? this.ej2Instances.referModels : this.models;
      }
      if ((eventName === "change" || eventName === "input") && this.models && this.models.length !== 0) {
        var key = this.models.toString().match(/checked|value/) || [];
        var propKey = key[0];
        if (eventProp && key && !isUndefined(eventProp[propKey])) {
          if (!isExecute) {
            this.ej2Instances.vueInstance.$emit("update:" + propKey, eventProp[propKey]);
            this.ej2Instances.vueInstance.$emit("modelchanged", eventProp[propKey]);
            this.ej2Instances.vueInstance.$emit("update:modelValue", eventProp[propKey]);
          } else {
            if (eventName === "change" || this.$props && !this.$props.isLazyUpdate) {
              this.$emit("update:" + propKey, eventProp[propKey]);
              this.$emit("modelchanged", eventProp[propKey]);
            }
          }
        }
      } else if (eventName === "actionBegin" && eventProp.requestType === "dateNavigate" && this.models && this.models.length !== 0) {
        var key = this.models.toString().match(/currentView|selectedDate/) || [];
        var propKey = key[0];
        if (eventProp && key && !isUndefined(eventProp[propKey])) {
          if (!isExecute) {
            this.ej2Instances.vueInstance.$emit("update:" + propKey, eventProp[propKey]);
            this.ej2Instances.vueInstance.$emit("modelchanged", eventProp[propKey]);
          } else {
            this.$emit("update:" + propKey, eventProp[propKey]);
            this.$emit("modelchanged", eventProp[propKey]);
          }
        }
      }
      if (this.ej2Instances && this.ej2Instances._trigger) {
        this.ej2Instances._trigger(eventName, eventProp, successHandler);
      }
    },
    custom: function() {
      this.updated();
    },
    click: function() {
      return this.ej2Instances.click();
    },
    focusIn: function() {
      return this.ej2Instances.focusIn();
    }
  }
});
var properties$8 = ["isLazyUpdate", "plugins", "autocomplete", "cssClass", "enablePersistence", "enableRtl", "enabled", "floatLabelType", "htmlAttributes", "locale", "multiline", "placeholder", "readonly", "showClearButton", "type", "value", "width", "blur", "change", "created", "destroyed", "focus", "input"];
var modelProps$8 = ["value"];
var testProp$8 = getProps({ props: properties$8 });
var props$8 = testProp$8[0], watch$8 = testProp$8[1], emitProbs$8 = Object.keys(watch$8);
emitProbs$8.push("modelchanged", "update:modelValue");
for (var _i$8 = 0, modelProps_1$8 = modelProps$8; _i$8 < modelProps_1$8.length; _i$8++) {
  var props_1$8 = modelProps_1$8[_i$8];
  emitProbs$8.push("update:" + props_1$8);
}
var TextBoxComponent = vueDefineComponent({
  name: "TextBoxComponent",
  mixins: [ComponentBase],
  props: props$8,
  watch: watch$8,
  emits: emitProbs$8,
  model: { event: "modelchanged" },
  provide: function() {
    return { custom: this.custom };
  },
  data: function() {
    return {
      ej2Instances: new TextBox({}),
      propKeys: properties$8,
      models: modelProps$8,
      hasChildDirective: false,
      hasInjectedModules: false,
      tagMapper: {},
      tagNameMapper: {},
      isVue3: !isExecute,
      templateCollection: {}
    };
  },
  created: function() {
    this.ej2Instances._trigger = this.ej2Instances.trigger;
    this.ej2Instances.trigger = this.trigger;
    this.bindProperties();
    this.ej2Instances._setProperties = this.ej2Instances.setProperties;
    this.ej2Instances.setProperties = this.setProperties;
    this.ej2Instances.clearTemplate = this.clearTemplate;
    this.updated = this.updated;
  },
  render: function(createElement2) {
    var h2 = !isExecute ? gh : createElement2;
    var slots = null;
    if (!isNullOrUndefined(this.$slots.default)) {
      slots = !isExecute ? this.$slots.default() : this.$slots.default;
    }
    return h2("input", slots);
  },
  methods: {
    clearTemplate: function(templateNames) {
      if (!templateNames) {
        templateNames = Object.keys(this.templateCollection || {});
      }
      if (templateNames.length && this.templateCollection) {
        for (var _i = 0, templateNames_1 = templateNames; _i < templateNames_1.length; _i++) {
          var tempName = templateNames_1[_i];
          var elementCollection = this.templateCollection[tempName];
          if (elementCollection && elementCollection.length) {
            for (var _a = 0, elementCollection_1 = elementCollection; _a < elementCollection_1.length; _a++) {
              var ele = elementCollection_1[_a];
              var destroy2 = getValue("__vue__.$destroy", ele);
              if (destroy2) {
                ele.__vue__.$destroy();
              }
              if (ele.innerHTML) {
                ele.innerHTML = "";
              }
            }
            delete this.templateCollection[tempName];
          }
        }
      }
    },
    setProperties: function(prop, muteOnChange) {
      var _this = this;
      if (this.isVue3) {
        this.models = !this.models ? this.ej2Instances.referModels : this.models;
      }
      if (this.ej2Instances && this.ej2Instances._setProperties) {
        this.ej2Instances._setProperties(prop, muteOnChange);
      }
      if (prop && this.models && this.models.length) {
        Object.keys(prop).map(function(key) {
          _this.models.map(function(model) {
            if (key === model && !/datasource/i.test(key)) {
              if (_this.isVue3) {
                _this.ej2Instances.vueInstance.$emit("update:" + key, prop[key]);
              } else {
                _this.$emit("update:" + key, prop[key]);
                _this.$emit("modelchanged", prop[key]);
              }
            }
          });
        });
      }
    },
    trigger: function(eventName, eventProp, successHandler) {
      if (!isExecute) {
        this.models = !this.models ? this.ej2Instances.referModels : this.models;
      }
      if ((eventName === "change" || eventName === "input") && this.models && this.models.length !== 0) {
        var key = this.models.toString().match(/checked|value/) || [];
        var propKey = key[0];
        if (eventProp && key && !isUndefined(eventProp[propKey])) {
          if (!isExecute) {
            this.ej2Instances.vueInstance.$emit("update:" + propKey, eventProp[propKey]);
            this.ej2Instances.vueInstance.$emit("modelchanged", eventProp[propKey]);
            this.ej2Instances.vueInstance.$emit("update:modelValue", eventProp[propKey]);
          } else {
            if (eventName === "change" || this.$props && !this.$props.isLazyUpdate) {
              this.$emit("update:" + propKey, eventProp[propKey]);
              this.$emit("modelchanged", eventProp[propKey]);
            }
          }
        }
      } else if (eventName === "actionBegin" && eventProp.requestType === "dateNavigate" && this.models && this.models.length !== 0) {
        var key = this.models.toString().match(/currentView|selectedDate/) || [];
        var propKey = key[0];
        if (eventProp && key && !isUndefined(eventProp[propKey])) {
          if (!isExecute) {
            this.ej2Instances.vueInstance.$emit("update:" + propKey, eventProp[propKey]);
            this.ej2Instances.vueInstance.$emit("modelchanged", eventProp[propKey]);
          } else {
            this.$emit("update:" + propKey, eventProp[propKey]);
            this.$emit("modelchanged", eventProp[propKey]);
          }
        }
      }
      if (this.ej2Instances && this.ej2Instances._trigger) {
        this.ej2Instances._trigger(eventName, eventProp, successHandler);
      }
    },
    custom: function() {
      this.updated();
    },
    addAttributes: function(attributes2) {
      return this.ej2Instances.addAttributes(attributes2);
    },
    addIcon: function(position, icons) {
      return this.ej2Instances.addIcon(position, icons);
    },
    focusIn: function() {
      return this.ej2Instances.focusIn();
    },
    focusOut: function() {
      return this.ej2Instances.focusOut();
    },
    removeAttributes: function(attributes2) {
      return this.ej2Instances.removeAttributes(attributes2);
    }
  }
});
var properties$7 = ["isLazyUpdate", "plugins", "columns", "createPopupOnClick", "cssClass", "disabled", "enableOpacity", "enablePersistence", "enableRtl", "inline", "locale", "mode", "modeSwitcher", "noColor", "presetColors", "showButtons", "value", "beforeClose", "beforeModeSwitch", "beforeOpen", "beforeTileRender", "change", "created", "onModeSwitch", "open", "select"];
var modelProps$7 = ["value"];
var testProp$7 = getProps({ props: properties$7 });
var props$7 = testProp$7[0], watch$7 = testProp$7[1], emitProbs$7 = Object.keys(watch$7);
emitProbs$7.push("modelchanged", "update:modelValue");
for (var _i$7 = 0, modelProps_1$7 = modelProps$7; _i$7 < modelProps_1$7.length; _i$7++) {
  var props_1$7 = modelProps_1$7[_i$7];
  emitProbs$7.push("update:" + props_1$7);
}
var ColorPickerComponent = vueDefineComponent({
  name: "ColorPickerComponent",
  mixins: [ComponentBase],
  props: props$7,
  watch: watch$7,
  emits: emitProbs$7,
  model: { event: "modelchanged" },
  provide: function() {
    return { custom: this.custom };
  },
  data: function() {
    return {
      ej2Instances: new ColorPicker({}),
      propKeys: properties$7,
      models: modelProps$7,
      hasChildDirective: false,
      hasInjectedModules: false,
      tagMapper: {},
      tagNameMapper: {},
      isVue3: !isExecute,
      templateCollection: {}
    };
  },
  created: function() {
    this.ej2Instances._trigger = this.ej2Instances.trigger;
    this.ej2Instances.trigger = this.trigger;
    this.bindProperties();
    this.ej2Instances._setProperties = this.ej2Instances.setProperties;
    this.ej2Instances.setProperties = this.setProperties;
    this.ej2Instances.clearTemplate = this.clearTemplate;
    this.updated = this.updated;
  },
  render: function(createElement2) {
    var h2 = !isExecute ? gh : createElement2;
    var slots = null;
    if (!isNullOrUndefined(this.$slots.default)) {
      slots = !isExecute ? this.$slots.default() : this.$slots.default;
    }
    return h2("input", slots);
  },
  methods: {
    clearTemplate: function(templateNames) {
      if (!templateNames) {
        templateNames = Object.keys(this.templateCollection || {});
      }
      if (templateNames.length && this.templateCollection) {
        for (var _i = 0, templateNames_1 = templateNames; _i < templateNames_1.length; _i++) {
          var tempName = templateNames_1[_i];
          var elementCollection = this.templateCollection[tempName];
          if (elementCollection && elementCollection.length) {
            for (var _a = 0, elementCollection_1 = elementCollection; _a < elementCollection_1.length; _a++) {
              var ele = elementCollection_1[_a];
              var destroy2 = getValue("__vue__.$destroy", ele);
              if (destroy2) {
                ele.__vue__.$destroy();
              }
              if (ele.innerHTML) {
                ele.innerHTML = "";
              }
            }
            delete this.templateCollection[tempName];
          }
        }
      }
    },
    setProperties: function(prop, muteOnChange) {
      var _this = this;
      if (this.isVue3) {
        this.models = !this.models ? this.ej2Instances.referModels : this.models;
      }
      if (this.ej2Instances && this.ej2Instances._setProperties) {
        this.ej2Instances._setProperties(prop, muteOnChange);
      }
      if (prop && this.models && this.models.length) {
        Object.keys(prop).map(function(key) {
          _this.models.map(function(model) {
            if (key === model && !/datasource/i.test(key)) {
              if (_this.isVue3) {
                _this.ej2Instances.vueInstance.$emit("update:" + key, prop[key]);
              } else {
                _this.$emit("update:" + key, prop[key]);
                _this.$emit("modelchanged", prop[key]);
              }
            }
          });
        });
      }
    },
    trigger: function(eventName, eventProp, successHandler) {
      if (!isExecute) {
        this.models = !this.models ? this.ej2Instances.referModels : this.models;
      }
      if ((eventName === "change" || eventName === "input") && this.models && this.models.length !== 0) {
        var key = this.models.toString().match(/checked|value/) || [];
        var propKey = key[0];
        if (eventProp && key && !isUndefined(eventProp[propKey])) {
          if (!isExecute) {
            this.ej2Instances.vueInstance.$emit("update:" + propKey, eventProp[propKey]);
            this.ej2Instances.vueInstance.$emit("modelchanged", eventProp[propKey]);
            this.ej2Instances.vueInstance.$emit("update:modelValue", eventProp[propKey]);
          } else {
            if (eventName === "change" || this.$props && !this.$props.isLazyUpdate) {
              this.$emit("update:" + propKey, eventProp[propKey]);
              this.$emit("modelchanged", eventProp[propKey]);
            }
          }
        }
      } else if (eventName === "actionBegin" && eventProp.requestType === "dateNavigate" && this.models && this.models.length !== 0) {
        var key = this.models.toString().match(/currentView|selectedDate/) || [];
        var propKey = key[0];
        if (eventProp && key && !isUndefined(eventProp[propKey])) {
          if (!isExecute) {
            this.ej2Instances.vueInstance.$emit("update:" + propKey, eventProp[propKey]);
            this.ej2Instances.vueInstance.$emit("modelchanged", eventProp[propKey]);
          } else {
            this.$emit("update:" + propKey, eventProp[propKey]);
            this.$emit("modelchanged", eventProp[propKey]);
          }
        }
      }
      if (this.ej2Instances && this.ej2Instances._trigger) {
        this.ej2Instances._trigger(eventName, eventProp, successHandler);
      }
    },
    custom: function() {
      this.updated();
    },
    focusIn: function() {
      return this.ej2Instances.focusIn();
    },
    getValue: function(value, type) {
      return this.ej2Instances.getValue(value, type);
    },
    toggle: function() {
      return this.ej2Instances.toggle();
    }
  }
});
var AccordionItemsDirective = vueDefineComponent({
  inject: { custom: { default: null } },
  render: function(createElement2) {
    if (!isExecute) {
      var h2 = !isExecute ? gh : createElement2;
      var slots = null;
      if (!isNullOrUndefined(this.$slots.default)) {
        slots = !isExecute ? this.$slots.default() : this.$slots.default;
      }
      return h2("div", { class: "e-directive" }, slots);
    }
    return;
  },
  updated: function() {
    if (!isExecute && this.custom) {
      this.custom();
    }
  },
  methods: {
    getTag: function() {
      return "e-accordionitems";
    }
  }
});
var AccordionItemDirective = vueDefineComponent({
  render: function() {
    return;
  },
  methods: {
    getTag: function() {
      return "e-accordionitem";
    }
  }
});
var properties$6 = ["isLazyUpdate", "plugins", "animation", "dataSource", "enableHtmlSanitizer", "enablePersistence", "enableRtl", "expandMode", "expandedIndices", "headerTemplate", "height", "itemTemplate", "items", "locale", "width", "clicked", "created", "destroyed", "expanded", "expanding"];
var modelProps$6 = ["expandedIndices"];
var testProp$6 = getProps({ props: properties$6 });
var props$6 = testProp$6[0], watch$6 = testProp$6[1], emitProbs$6 = Object.keys(watch$6);
emitProbs$6.push("modelchanged", "update:modelValue");
for (var _i$6 = 0, modelProps_1$6 = modelProps$6; _i$6 < modelProps_1$6.length; _i$6++) {
  var props_1$6 = modelProps_1$6[_i$6];
  emitProbs$6.push("update:" + props_1$6);
}
var AccordionComponent = vueDefineComponent({
  name: "AccordionComponent",
  mixins: [ComponentBase],
  props: props$6,
  watch: watch$6,
  emits: emitProbs$6,
  model: { event: "modelchanged" },
  provide: function() {
    return { custom: this.custom };
  },
  data: function() {
    return {
      ej2Instances: new Accordion({}),
      propKeys: properties$6,
      models: modelProps$6,
      hasChildDirective: true,
      hasInjectedModules: false,
      tagMapper: { "e-accordionitems": "e-accordionitem" },
      tagNameMapper: { "e-accordionitems": "e-items" },
      isVue3: !isExecute,
      templateCollection: {}
    };
  },
  created: function() {
    this.ej2Instances._trigger = this.ej2Instances.trigger;
    this.ej2Instances.trigger = this.trigger;
    this.bindProperties();
    this.ej2Instances._setProperties = this.ej2Instances.setProperties;
    this.ej2Instances.setProperties = this.setProperties;
    this.ej2Instances.clearTemplate = this.clearTemplate;
    this.updated = this.updated;
  },
  render: function(createElement2) {
    var h2 = !isExecute ? gh : createElement2;
    var slots = null;
    if (!isNullOrUndefined(this.$slots.default)) {
      slots = !isExecute ? this.$slots.default() : this.$slots.default;
    }
    return h2("div", slots);
  },
  methods: {
    clearTemplate: function(templateNames) {
      if (!templateNames) {
        templateNames = Object.keys(this.templateCollection || {});
      }
      if (templateNames.length && this.templateCollection) {
        for (var _i = 0, templateNames_1 = templateNames; _i < templateNames_1.length; _i++) {
          var tempName = templateNames_1[_i];
          var elementCollection = this.templateCollection[tempName];
          if (elementCollection && elementCollection.length) {
            for (var _a = 0, elementCollection_1 = elementCollection; _a < elementCollection_1.length; _a++) {
              var ele = elementCollection_1[_a];
              var destroy2 = getValue("__vue__.$destroy", ele);
              if (destroy2) {
                ele.__vue__.$destroy();
              }
              if (ele.innerHTML) {
                ele.innerHTML = "";
              }
            }
            delete this.templateCollection[tempName];
          }
        }
      }
    },
    setProperties: function(prop, muteOnChange) {
      var _this = this;
      if (this.isVue3) {
        this.models = !this.models ? this.ej2Instances.referModels : this.models;
      }
      if (this.ej2Instances && this.ej2Instances._setProperties) {
        this.ej2Instances._setProperties(prop, muteOnChange);
      }
      if (prop && this.models && this.models.length) {
        Object.keys(prop).map(function(key) {
          _this.models.map(function(model) {
            if (key === model && !/datasource/i.test(key)) {
              if (_this.isVue3) {
                _this.ej2Instances.vueInstance.$emit("update:" + key, prop[key]);
              } else {
                _this.$emit("update:" + key, prop[key]);
                _this.$emit("modelchanged", prop[key]);
              }
            }
          });
        });
      }
    },
    trigger: function(eventName, eventProp, successHandler) {
      if (!isExecute) {
        this.models = !this.models ? this.ej2Instances.referModels : this.models;
      }
      if ((eventName === "change" || eventName === "input") && this.models && this.models.length !== 0) {
        var key = this.models.toString().match(/checked|value/) || [];
        var propKey = key[0];
        if (eventProp && key && !isUndefined(eventProp[propKey])) {
          if (!isExecute) {
            this.ej2Instances.vueInstance.$emit("update:" + propKey, eventProp[propKey]);
            this.ej2Instances.vueInstance.$emit("modelchanged", eventProp[propKey]);
            this.ej2Instances.vueInstance.$emit("update:modelValue", eventProp[propKey]);
          } else {
            if (eventName === "change" || this.$props && !this.$props.isLazyUpdate) {
              this.$emit("update:" + propKey, eventProp[propKey]);
              this.$emit("modelchanged", eventProp[propKey]);
            }
          }
        }
      } else if (eventName === "actionBegin" && eventProp.requestType === "dateNavigate" && this.models && this.models.length !== 0) {
        var key = this.models.toString().match(/currentView|selectedDate/) || [];
        var propKey = key[0];
        if (eventProp && key && !isUndefined(eventProp[propKey])) {
          if (!isExecute) {
            this.ej2Instances.vueInstance.$emit("update:" + propKey, eventProp[propKey]);
            this.ej2Instances.vueInstance.$emit("modelchanged", eventProp[propKey]);
          } else {
            this.$emit("update:" + propKey, eventProp[propKey]);
            this.$emit("modelchanged", eventProp[propKey]);
          }
        }
      }
      if (this.ej2Instances && this.ej2Instances._trigger) {
        this.ej2Instances._trigger(eventName, eventProp, successHandler);
      }
    },
    custom: function() {
      this.updated();
    },
    addItem: function(item, index) {
      return this.ej2Instances.addItem(item, index);
    },
    enableItem: function(index, isEnable) {
      return this.ej2Instances.enableItem(index, isEnable);
    },
    expandItem: function(isExpand, index) {
      return this.ej2Instances.expandItem(isExpand, index);
    },
    hideItem: function(index, isHidden) {
      return this.ej2Instances.hideItem(index, isHidden);
    },
    removeItem: function(index) {
      return this.ej2Instances.removeItem(index);
    },
    select: function(index) {
      return this.ej2Instances.select(index);
    }
  }
});
var ItemsDirective = vueDefineComponent({
  inject: { custom: { default: null } },
  render: function(createElement2) {
    if (!isExecute) {
      var h2 = !isExecute ? gh : createElement2;
      var slots = null;
      if (!isNullOrUndefined(this.$slots.default)) {
        slots = !isExecute ? this.$slots.default() : this.$slots.default;
      }
      return h2("div", { class: "e-directive" }, slots);
    }
    return;
  },
  updated: function() {
    if (!isExecute && this.custom) {
      this.custom();
    }
  },
  methods: {
    getTag: function() {
      return "e-items";
    }
  }
});
var ItemDirective = vueDefineComponent({
  render: function() {
    return;
  },
  methods: {
    getTag: function() {
      return "e-item";
    }
  }
});
var properties$5 = ["isLazyUpdate", "plugins", "allowKeyboard", "cssClass", "enableCollision", "enableHtmlSanitizer", "enablePersistence", "enableRtl", "height", "items", "locale", "overflowMode", "scrollStep", "width", "beforeCreate", "clicked", "created", "destroyed"];
var modelProps$5 = [];
var testProp$5 = getProps({ props: properties$5 });
var props$5 = testProp$5[0], watch$5 = testProp$5[1], emitProbs$5 = Object.keys(watch$5);
emitProbs$5.push("modelchanged", "update:modelValue");
for (var _i$5 = 0, modelProps_1$5 = modelProps$5; _i$5 < modelProps_1$5.length; _i$5++) {
  var props_1$5 = modelProps_1$5[_i$5];
  emitProbs$5.push("update:" + props_1$5);
}
var ToolbarComponent = vueDefineComponent({
  name: "ToolbarComponent",
  mixins: [ComponentBase],
  props: props$5,
  watch: watch$5,
  emits: emitProbs$5,
  provide: function() {
    return { custom: this.custom };
  },
  data: function() {
    return {
      ej2Instances: new Toolbar({}),
      propKeys: properties$5,
      models: modelProps$5,
      hasChildDirective: true,
      hasInjectedModules: false,
      tagMapper: { "e-items": "e-item" },
      tagNameMapper: {},
      isVue3: !isExecute,
      templateCollection: {}
    };
  },
  created: function() {
    this.bindProperties();
    this.ej2Instances._setProperties = this.ej2Instances.setProperties;
    this.ej2Instances.setProperties = this.setProperties;
    this.ej2Instances.clearTemplate = this.clearTemplate;
    this.updated = this.updated;
  },
  render: function(createElement2) {
    var h2 = !isExecute ? gh : createElement2;
    var slots = null;
    if (!isNullOrUndefined(this.$slots.default)) {
      slots = !isExecute ? this.$slots.default() : this.$slots.default;
    }
    return h2("div", slots);
  },
  methods: {
    clearTemplate: function(templateNames) {
      if (!templateNames) {
        templateNames = Object.keys(this.templateCollection || {});
      }
      if (templateNames.length && this.templateCollection) {
        for (var _i = 0, templateNames_1 = templateNames; _i < templateNames_1.length; _i++) {
          var tempName = templateNames_1[_i];
          var elementCollection = this.templateCollection[tempName];
          if (elementCollection && elementCollection.length) {
            for (var _a = 0, elementCollection_1 = elementCollection; _a < elementCollection_1.length; _a++) {
              var ele = elementCollection_1[_a];
              var destroy2 = getValue("__vue__.$destroy", ele);
              if (destroy2) {
                ele.__vue__.$destroy();
              }
              if (ele.innerHTML) {
                ele.innerHTML = "";
              }
            }
            delete this.templateCollection[tempName];
          }
        }
      }
    },
    setProperties: function(prop, muteOnChange) {
      var _this = this;
      if (this.isVue3) {
        this.models = !this.models ? this.ej2Instances.referModels : this.models;
      }
      if (this.ej2Instances && this.ej2Instances._setProperties) {
        this.ej2Instances._setProperties(prop, muteOnChange);
      }
      if (prop && this.models && this.models.length) {
        Object.keys(prop).map(function(key) {
          _this.models.map(function(model) {
            if (key === model && !/datasource/i.test(key)) {
              if (_this.isVue3) {
                _this.ej2Instances.vueInstance.$emit("update:" + key, prop[key]);
              } else {
                _this.$emit("update:" + key, prop[key]);
                _this.$emit("modelchanged", prop[key]);
              }
            }
          });
        });
      }
    },
    custom: function() {
      this.updated();
    },
    addItems: function(items, index) {
      return this.ej2Instances.addItems(items, index);
    },
    disable: function(value) {
      return this.ej2Instances.disable(value);
    },
    enableItems: function(items, isEnable) {
      return this.ej2Instances.enableItems(items, isEnable);
    },
    hideItem: function(index, value) {
      return this.ej2Instances.hideItem(index, value);
    },
    refreshOverflow: function() {
      return this.ej2Instances.refreshOverflow();
    },
    removeItems: function(args) {
      return this.ej2Instances.removeItems(args);
    }
  }
});
var TabItemsDirective = vueDefineComponent({
  inject: { custom: { default: null } },
  render: function(createElement2) {
    if (!isExecute) {
      var h2 = !isExecute ? gh : createElement2;
      var slots = null;
      if (!isNullOrUndefined(this.$slots.default)) {
        slots = !isExecute ? this.$slots.default() : this.$slots.default;
      }
      return h2("div", { class: "e-directive" }, slots);
    }
    return;
  },
  updated: function() {
    if (!isExecute && this.custom) {
      this.custom();
    }
  },
  methods: {
    getTag: function() {
      return "e-tabitems";
    }
  }
});
var TabItemDirective = vueDefineComponent({
  render: function() {
    return;
  },
  methods: {
    getTag: function() {
      return "e-tabitem";
    }
  }
});
var properties$4 = ["isLazyUpdate", "plugins", "allowDragAndDrop", "animation", "cssClass", "dragArea", "enableHtmlSanitizer", "enablePersistence", "enableRtl", "headerPlacement", "height", "heightAdjustMode", "items", "loadOn", "locale", "overflowMode", "reorderActiveTab", "scrollStep", "selectedItem", "showCloseButton", "width", "added", "adding", "created", "destroyed", "dragged", "dragging", "onDragStart", "removed", "removing", "selected", "selecting"];
var modelProps$4 = [];
var testProp$4 = getProps({ props: properties$4 });
var props$4 = testProp$4[0], watch$4 = testProp$4[1], emitProbs$4 = Object.keys(watch$4);
emitProbs$4.push("modelchanged", "update:modelValue");
for (var _i$4 = 0, modelProps_1$4 = modelProps$4; _i$4 < modelProps_1$4.length; _i$4++) {
  var props_1$4 = modelProps_1$4[_i$4];
  emitProbs$4.push("update:" + props_1$4);
}
var TabComponent = vueDefineComponent({
  name: "TabComponent",
  mixins: [ComponentBase],
  props: props$4,
  watch: watch$4,
  emits: emitProbs$4,
  provide: function() {
    return { custom: this.custom };
  },
  data: function() {
    return {
      ej2Instances: new Tab({}),
      propKeys: properties$4,
      models: modelProps$4,
      hasChildDirective: true,
      hasInjectedModules: false,
      tagMapper: { "e-tabitems": "e-tabitem" },
      tagNameMapper: { "e-tabitems": "e-items" },
      isVue3: !isExecute,
      templateCollection: {}
    };
  },
  created: function() {
    this.bindProperties();
    this.ej2Instances._setProperties = this.ej2Instances.setProperties;
    this.ej2Instances.setProperties = this.setProperties;
    this.ej2Instances.clearTemplate = this.clearTemplate;
    this.updated = this.updated;
  },
  render: function(createElement2) {
    var h2 = !isExecute ? gh : createElement2;
    var slots = null;
    if (!isNullOrUndefined(this.$slots.default)) {
      slots = !isExecute ? this.$slots.default() : this.$slots.default;
    }
    return h2("div", slots);
  },
  methods: {
    clearTemplate: function(templateNames) {
      if (!templateNames) {
        templateNames = Object.keys(this.templateCollection || {});
      }
      if (templateNames.length && this.templateCollection) {
        for (var _i = 0, templateNames_1 = templateNames; _i < templateNames_1.length; _i++) {
          var tempName = templateNames_1[_i];
          var elementCollection = this.templateCollection[tempName];
          if (elementCollection && elementCollection.length) {
            for (var _a = 0, elementCollection_1 = elementCollection; _a < elementCollection_1.length; _a++) {
              var ele = elementCollection_1[_a];
              var destroy2 = getValue("__vue__.$destroy", ele);
              if (destroy2) {
                ele.__vue__.$destroy();
              }
              if (ele.innerHTML) {
                ele.innerHTML = "";
              }
            }
            delete this.templateCollection[tempName];
          }
        }
      }
    },
    setProperties: function(prop, muteOnChange) {
      var _this = this;
      if (this.isVue3) {
        this.models = !this.models ? this.ej2Instances.referModels : this.models;
      }
      if (this.ej2Instances && this.ej2Instances._setProperties) {
        this.ej2Instances._setProperties(prop, muteOnChange);
      }
      if (prop && this.models && this.models.length) {
        Object.keys(prop).map(function(key) {
          _this.models.map(function(model) {
            if (key === model && !/datasource/i.test(key)) {
              if (_this.isVue3) {
                _this.ej2Instances.vueInstance.$emit("update:" + key, prop[key]);
              } else {
                _this.$emit("update:" + key, prop[key]);
                _this.$emit("modelchanged", prop[key]);
              }
            }
          });
        });
      }
    },
    custom: function() {
      this.updated();
    },
    addTab: function(items, index) {
      return this.ej2Instances.addTab(items, index);
    },
    disable: function(value) {
      return this.ej2Instances.disable(value);
    },
    enableTab: function(index, value) {
      return this.ej2Instances.enableTab(index, value);
    },
    getItemIndex: function(tabItemId) {
      return this.ej2Instances.getItemIndex(tabItemId);
    },
    hideTab: function(index, value) {
      return this.ej2Instances.hideTab(index, value);
    },
    refresh: function() {
      return this.ej2Instances.refresh();
    },
    refreshActiveTab: function() {
      return this.ej2Instances.refreshActiveTab();
    },
    refreshActiveTabBorder: function() {
      return this.ej2Instances.refreshActiveTabBorder();
    },
    removeTab: function(index) {
      return this.ej2Instances.removeTab(index);
    },
    select: function(args, event) {
      return this.ej2Instances.select(args, event);
    }
  }
});
var properties$3 = ["isLazyUpdate", "plugins", "animate", "closeOnDocumentClick", "dockSize", "enableDock", "enableGestures", "enablePersistence", "enableRtl", "height", "isOpen", "locale", "mediaQuery", "position", "showBackdrop", "target", "type", "width", "zIndex", "change", "close", "created", "destroyed", "open"];
var modelProps$3 = ["isOpen"];
var testProp$3 = getProps({ props: properties$3 });
var props$3 = testProp$3[0], watch$3 = testProp$3[1], emitProbs$3 = Object.keys(watch$3);
emitProbs$3.push("modelchanged", "update:modelValue");
for (var _i$3 = 0, modelProps_1$3 = modelProps$3; _i$3 < modelProps_1$3.length; _i$3++) {
  var props_1$3 = modelProps_1$3[_i$3];
  emitProbs$3.push("update:" + props_1$3);
}
var SidebarComponent = vueDefineComponent({
  name: "SidebarComponent",
  mixins: [ComponentBase],
  props: props$3,
  watch: watch$3,
  emits: emitProbs$3,
  model: { event: "modelchanged" },
  provide: function() {
    return { custom: this.custom };
  },
  data: function() {
    return {
      ej2Instances: new Sidebar({}),
      propKeys: properties$3,
      models: modelProps$3,
      hasChildDirective: false,
      hasInjectedModules: false,
      tagMapper: {},
      tagNameMapper: {},
      isVue3: !isExecute,
      templateCollection: {}
    };
  },
  created: function() {
    this.ej2Instances._trigger = this.ej2Instances.trigger;
    this.ej2Instances.trigger = this.trigger;
    this.bindProperties();
    this.ej2Instances._setProperties = this.ej2Instances.setProperties;
    this.ej2Instances.setProperties = this.setProperties;
    this.ej2Instances.clearTemplate = this.clearTemplate;
    this.updated = this.updated;
  },
  render: function(createElement2) {
    var h2 = !isExecute ? gh : createElement2;
    var slots = null;
    if (!isNullOrUndefined(this.$slots.default)) {
      slots = !isExecute ? this.$slots.default() : this.$slots.default;
    }
    return h2("div", slots);
  },
  methods: {
    clearTemplate: function(templateNames) {
      if (!templateNames) {
        templateNames = Object.keys(this.templateCollection || {});
      }
      if (templateNames.length && this.templateCollection) {
        for (var _i = 0, templateNames_1 = templateNames; _i < templateNames_1.length; _i++) {
          var tempName = templateNames_1[_i];
          var elementCollection = this.templateCollection[tempName];
          if (elementCollection && elementCollection.length) {
            for (var _a = 0, elementCollection_1 = elementCollection; _a < elementCollection_1.length; _a++) {
              var ele = elementCollection_1[_a];
              var destroy2 = getValue("__vue__.$destroy", ele);
              if (destroy2) {
                ele.__vue__.$destroy();
              }
              if (ele.innerHTML) {
                ele.innerHTML = "";
              }
            }
            delete this.templateCollection[tempName];
          }
        }
      }
    },
    setProperties: function(prop, muteOnChange) {
      var _this = this;
      if (this.isVue3) {
        this.models = !this.models ? this.ej2Instances.referModels : this.models;
      }
      if (this.ej2Instances && this.ej2Instances._setProperties) {
        this.ej2Instances._setProperties(prop, muteOnChange);
      }
      if (prop && this.models && this.models.length) {
        Object.keys(prop).map(function(key) {
          _this.models.map(function(model) {
            if (key === model && !/datasource/i.test(key)) {
              if (_this.isVue3) {
                _this.ej2Instances.vueInstance.$emit("update:" + key, prop[key]);
              } else {
                _this.$emit("update:" + key, prop[key]);
                _this.$emit("modelchanged", prop[key]);
              }
            }
          });
        });
      }
    },
    trigger: function(eventName, eventProp, successHandler) {
      if (!isExecute) {
        this.models = !this.models ? this.ej2Instances.referModels : this.models;
      }
      if ((eventName === "change" || eventName === "input") && this.models && this.models.length !== 0) {
        var key = this.models.toString().match(/checked|value/) || [];
        var propKey = key[0];
        if (eventProp && key && !isUndefined(eventProp[propKey])) {
          if (!isExecute) {
            this.ej2Instances.vueInstance.$emit("update:" + propKey, eventProp[propKey]);
            this.ej2Instances.vueInstance.$emit("modelchanged", eventProp[propKey]);
            this.ej2Instances.vueInstance.$emit("update:modelValue", eventProp[propKey]);
          } else {
            if (eventName === "change" || this.$props && !this.$props.isLazyUpdate) {
              this.$emit("update:" + propKey, eventProp[propKey]);
              this.$emit("modelchanged", eventProp[propKey]);
            }
          }
        }
      } else if (eventName === "actionBegin" && eventProp.requestType === "dateNavigate" && this.models && this.models.length !== 0) {
        var key = this.models.toString().match(/currentView|selectedDate/) || [];
        var propKey = key[0];
        if (eventProp && key && !isUndefined(eventProp[propKey])) {
          if (!isExecute) {
            this.ej2Instances.vueInstance.$emit("update:" + propKey, eventProp[propKey]);
            this.ej2Instances.vueInstance.$emit("modelchanged", eventProp[propKey]);
          } else {
            this.$emit("update:" + propKey, eventProp[propKey]);
            this.$emit("modelchanged", eventProp[propKey]);
          }
        }
      }
      if (this.ej2Instances && this.ej2Instances._trigger) {
        this.ej2Instances._trigger(eventName, eventProp, successHandler);
      }
    },
    custom: function() {
      this.updated();
    },
    hide: function(e) {
      return this.ej2Instances.hide(e);
    },
    show: function(e) {
      return this.ej2Instances.show(e);
    },
    toggle: function() {
      return this.ej2Instances.toggle();
    }
  }
});
var properties$2 = ["isLazyUpdate", "plugins", "allowDragging", "animationSettings", "buttons", "closeOnEscape", "content", "cssClass", "enableHtmlSanitizer", "enablePersistence", "enableResize", "enableRtl", "footerTemplate", "header", "height", "isModal", "locale", "minHeight", "position", "resizeHandles", "showCloseIcon", "target", "visible", "width", "zIndex", "beforeClose", "beforeOpen", "beforeSanitizeHtml", "close", "created", "destroyed", "drag", "dragStart", "dragStop", "open", "overlayClick", "resizeStart", "resizeStop", "resizing"];
var modelProps$2 = ["visible"];
var testProp$2 = getProps({ props: properties$2 });
var props$2 = testProp$2[0], watch$2 = testProp$2[1], emitProbs$2 = Object.keys(watch$2);
emitProbs$2.push("modelchanged", "update:modelValue");
for (var _i$2 = 0, modelProps_1$2 = modelProps$2; _i$2 < modelProps_1$2.length; _i$2++) {
  var props_1$2 = modelProps_1$2[_i$2];
  emitProbs$2.push("update:" + props_1$2);
}
var DialogComponent = vueDefineComponent({
  name: "DialogComponent",
  mixins: [ComponentBase],
  props: props$2,
  watch: watch$2,
  emits: emitProbs$2,
  model: { event: "modelchanged" },
  provide: function() {
    return { custom: this.custom };
  },
  data: function() {
    return {
      ej2Instances: new Dialog({}),
      propKeys: properties$2,
      models: modelProps$2,
      hasChildDirective: true,
      hasInjectedModules: false,
      tagMapper: { "e-buttons": "e-dialogbutton" },
      tagNameMapper: {},
      isVue3: !isExecute,
      templateCollection: {}
    };
  },
  created: function() {
    this.ej2Instances._trigger = this.ej2Instances.trigger;
    this.ej2Instances.trigger = this.trigger;
    this.bindProperties();
    this.ej2Instances._setProperties = this.ej2Instances.setProperties;
    this.ej2Instances.setProperties = this.setProperties;
    this.ej2Instances.clearTemplate = this.clearTemplate;
    this.updated = this.updated;
  },
  render: function(createElement2) {
    var h2 = !isExecute ? gh : createElement2;
    var slots = null;
    if (!isNullOrUndefined(this.$slots.default)) {
      slots = !isExecute ? this.$slots.default() : this.$slots.default;
    }
    return h2("div", slots);
  },
  methods: {
    clearTemplate: function(templateNames) {
      if (!templateNames) {
        templateNames = Object.keys(this.templateCollection || {});
      }
      if (templateNames.length && this.templateCollection) {
        for (var _i = 0, templateNames_1 = templateNames; _i < templateNames_1.length; _i++) {
          var tempName = templateNames_1[_i];
          var elementCollection = this.templateCollection[tempName];
          if (elementCollection && elementCollection.length) {
            for (var _a = 0, elementCollection_1 = elementCollection; _a < elementCollection_1.length; _a++) {
              var ele = elementCollection_1[_a];
              var destroy2 = getValue("__vue__.$destroy", ele);
              if (destroy2) {
                ele.__vue__.$destroy();
              }
              if (ele.innerHTML) {
                ele.innerHTML = "";
              }
            }
            delete this.templateCollection[tempName];
          }
        }
      }
    },
    setProperties: function(prop, muteOnChange) {
      var _this = this;
      if (this.isVue3) {
        this.models = !this.models ? this.ej2Instances.referModels : this.models;
      }
      if (this.ej2Instances && this.ej2Instances._setProperties) {
        this.ej2Instances._setProperties(prop, muteOnChange);
      }
      if (prop && this.models && this.models.length) {
        Object.keys(prop).map(function(key) {
          _this.models.map(function(model) {
            if (key === model && !/datasource/i.test(key)) {
              if (_this.isVue3) {
                _this.ej2Instances.vueInstance.$emit("update:" + key, prop[key]);
              } else {
                _this.$emit("update:" + key, prop[key]);
                _this.$emit("modelchanged", prop[key]);
              }
            }
          });
        });
      }
    },
    trigger: function(eventName, eventProp, successHandler) {
      if (!isExecute) {
        this.models = !this.models ? this.ej2Instances.referModels : this.models;
      }
      if ((eventName === "change" || eventName === "input") && this.models && this.models.length !== 0) {
        var key = this.models.toString().match(/checked|value/) || [];
        var propKey = key[0];
        if (eventProp && key && !isUndefined(eventProp[propKey])) {
          if (!isExecute) {
            this.ej2Instances.vueInstance.$emit("update:" + propKey, eventProp[propKey]);
            this.ej2Instances.vueInstance.$emit("modelchanged", eventProp[propKey]);
            this.ej2Instances.vueInstance.$emit("update:modelValue", eventProp[propKey]);
          } else {
            if (eventName === "change" || this.$props && !this.$props.isLazyUpdate) {
              this.$emit("update:" + propKey, eventProp[propKey]);
              this.$emit("modelchanged", eventProp[propKey]);
            }
          }
        }
      } else if (eventName === "actionBegin" && eventProp.requestType === "dateNavigate" && this.models && this.models.length !== 0) {
        var key = this.models.toString().match(/currentView|selectedDate/) || [];
        var propKey = key[0];
        if (eventProp && key && !isUndefined(eventProp[propKey])) {
          if (!isExecute) {
            this.ej2Instances.vueInstance.$emit("update:" + propKey, eventProp[propKey]);
            this.ej2Instances.vueInstance.$emit("modelchanged", eventProp[propKey]);
          } else {
            this.$emit("update:" + propKey, eventProp[propKey]);
            this.$emit("modelchanged", eventProp[propKey]);
          }
        }
      }
      if (this.ej2Instances && this.ej2Instances._trigger) {
        this.ej2Instances._trigger(eventName, eventProp, successHandler);
      }
    },
    custom: function() {
      this.updated();
    },
    getButtons: function(index) {
      return this.ej2Instances.getButtons(index);
    },
    getDimension: function() {
      return this.ej2Instances.getDimension();
    },
    hide: function(event) {
      return this.ej2Instances.hide(event);
    },
    refreshPosition: function() {
      return this.ej2Instances.refreshPosition();
    },
    sanitizeHelper: function(value) {
      return this.ej2Instances.sanitizeHelper(value);
    },
    show: function(isFullScreen) {
      return this.ej2Instances.show(isFullScreen);
    }
  }
});
var properties$1 = ["isLazyUpdate", "plugins", "actionFailureTemplate", "allowFiltering", "cssClass", "dataSource", "enablePersistence", "enableRtl", "enabled", "fields", "filterBarPlaceholder", "filterType", "floatLabelType", "footerTemplate", "groupTemplate", "headerTemplate", "htmlAttributes", "ignoreAccent", "ignoreCase", "index", "itemTemplate", "locale", "noRecordsTemplate", "placeholder", "popupHeight", "popupWidth", "query", "readonly", "showClearButton", "sortOrder", "text", "value", "valueTemplate", "width", "zIndex", "actionBegin", "actionComplete", "actionFailure", "beforeOpen", "blur", "change", "close", "created", "dataBound", "destroyed", "filtering", "focus", "open", "select"];
var modelProps$1 = ["value"];
var testProp$1 = getProps({ props: properties$1 });
var props$1 = testProp$1[0], watch$1 = testProp$1[1], emitProbs$1 = Object.keys(watch$1);
emitProbs$1.push("modelchanged", "update:modelValue");
for (var _i$1 = 0, modelProps_1$1 = modelProps$1; _i$1 < modelProps_1$1.length; _i$1++) {
  var props_1$1 = modelProps_1$1[_i$1];
  emitProbs$1.push("update:" + props_1$1);
}
var DropDownListComponent = vueDefineComponent({
  name: "DropDownListComponent",
  mixins: [ComponentBase],
  props: props$1,
  watch: watch$1,
  emits: emitProbs$1,
  model: { event: "modelchanged" },
  provide: function() {
    return { custom: this.custom };
  },
  data: function() {
    return {
      ej2Instances: new DropDownList({}),
      propKeys: properties$1,
      models: modelProps$1,
      hasChildDirective: false,
      hasInjectedModules: false,
      tagMapper: {},
      tagNameMapper: {},
      isVue3: !isExecute,
      templateCollection: {}
    };
  },
  created: function() {
    this.ej2Instances._trigger = this.ej2Instances.trigger;
    this.ej2Instances.trigger = this.trigger;
    this.bindProperties();
    this.ej2Instances._setProperties = this.ej2Instances.setProperties;
    this.ej2Instances.setProperties = this.setProperties;
    this.ej2Instances.clearTemplate = this.clearTemplate;
    this.updated = this.updated;
  },
  render: function(createElement2) {
    var h2 = !isExecute ? gh : createElement2;
    var slots = null;
    if (!isNullOrUndefined(this.$slots.default)) {
      slots = !isExecute ? this.$slots.default() : this.$slots.default;
    }
    return h2("input", slots);
  },
  methods: {
    clearTemplate: function(templateNames) {
      if (!templateNames) {
        templateNames = Object.keys(this.templateCollection || {});
      }
      if (templateNames.length && this.templateCollection) {
        for (var _i = 0, templateNames_1 = templateNames; _i < templateNames_1.length; _i++) {
          var tempName = templateNames_1[_i];
          var elementCollection = this.templateCollection[tempName];
          if (elementCollection && elementCollection.length) {
            for (var _a = 0, elementCollection_1 = elementCollection; _a < elementCollection_1.length; _a++) {
              var ele = elementCollection_1[_a];
              var destroy2 = getValue("__vue__.$destroy", ele);
              if (destroy2) {
                ele.__vue__.$destroy();
              }
              if (ele.innerHTML) {
                ele.innerHTML = "";
              }
            }
            delete this.templateCollection[tempName];
          }
        }
      }
    },
    setProperties: function(prop, muteOnChange) {
      var _this = this;
      if (this.isVue3) {
        this.models = !this.models ? this.ej2Instances.referModels : this.models;
      }
      if (this.ej2Instances && this.ej2Instances._setProperties) {
        this.ej2Instances._setProperties(prop, muteOnChange);
      }
      if (prop && this.models && this.models.length) {
        Object.keys(prop).map(function(key) {
          _this.models.map(function(model) {
            if (key === model && !/datasource/i.test(key)) {
              if (_this.isVue3) {
                _this.ej2Instances.vueInstance.$emit("update:" + key, prop[key]);
              } else {
                _this.$emit("update:" + key, prop[key]);
                _this.$emit("modelchanged", prop[key]);
              }
            }
          });
        });
      }
    },
    trigger: function(eventName, eventProp, successHandler) {
      if (!isExecute) {
        this.models = !this.models ? this.ej2Instances.referModels : this.models;
      }
      if ((eventName === "change" || eventName === "input") && this.models && this.models.length !== 0) {
        var key = this.models.toString().match(/checked|value/) || [];
        var propKey = key[0];
        if (eventProp && key && !isUndefined(eventProp[propKey])) {
          if (!isExecute) {
            this.ej2Instances.vueInstance.$emit("update:" + propKey, eventProp[propKey]);
            this.ej2Instances.vueInstance.$emit("modelchanged", eventProp[propKey]);
            this.ej2Instances.vueInstance.$emit("update:modelValue", eventProp[propKey]);
          } else {
            if (eventName === "change" || this.$props && !this.$props.isLazyUpdate) {
              this.$emit("update:" + propKey, eventProp[propKey]);
              this.$emit("modelchanged", eventProp[propKey]);
            }
          }
        }
      } else if (eventName === "actionBegin" && eventProp.requestType === "dateNavigate" && this.models && this.models.length !== 0) {
        var key = this.models.toString().match(/currentView|selectedDate/) || [];
        var propKey = key[0];
        if (eventProp && key && !isUndefined(eventProp[propKey])) {
          if (!isExecute) {
            this.ej2Instances.vueInstance.$emit("update:" + propKey, eventProp[propKey]);
            this.ej2Instances.vueInstance.$emit("modelchanged", eventProp[propKey]);
          } else {
            this.$emit("update:" + propKey, eventProp[propKey]);
            this.$emit("modelchanged", eventProp[propKey]);
          }
        }
      }
      if (this.ej2Instances && this.ej2Instances._trigger) {
        this.ej2Instances._trigger(eventName, eventProp, successHandler);
      }
    },
    custom: function() {
      this.updated();
    },
    addItem: function(items, itemIndex) {
      return this.ej2Instances.addItem(items, itemIndex);
    },
    clear: function() {
      return this.ej2Instances.clear();
    },
    filter: function(dataSource, query, fields) {
      return this.ej2Instances.filter(dataSource, query, fields);
    },
    focusIn: function(e) {
      return this.ej2Instances.focusIn(e);
    },
    focusOut: function(e) {
      return this.ej2Instances.focusOut(e);
    },
    getDataByValue: function(value) {
      return this.ej2Instances.getDataByValue(value);
    },
    getItems: function() {
      return this.ej2Instances.getItems();
    },
    hidePopup: function(e) {
      return this.ej2Instances.hidePopup(e);
    },
    hideSpinner: function() {
      return this.ej2Instances.hideSpinner();
    },
    showPopup: function(e) {
      return this.ej2Instances.showPopup(e);
    },
    showSpinner: function() {
      return this.ej2Instances.showSpinner();
    }
  }
});
var properties = ["isLazyUpdate", "plugins", "actionFailureTemplate", "addTagOnBlur", "allowCustomValue", "allowFiltering", "changeOnBlur", "closePopupOnSelect", "cssClass", "dataSource", "delimiterChar", "enableGroupCheckBox", "enableHtmlSanitizer", "enablePersistence", "enableRtl", "enableSelectionOrder", "enabled", "fields", "filterBarPlaceholder", "filterType", "floatLabelType", "footerTemplate", "groupTemplate", "headerTemplate", "hideSelectedItem", "htmlAttributes", "ignoreAccent", "ignoreCase", "itemTemplate", "locale", "maximumSelectionLength", "mode", "noRecordsTemplate", "openOnClick", "placeholder", "popupHeight", "popupWidth", "query", "readonly", "selectAllText", "showClearButton", "showDropDownIcon", "showSelectAll", "sortOrder", "text", "unSelectAllText", "value", "valueTemplate", "width", "zIndex", "actionBegin", "actionComplete", "actionFailure", "beforeOpen", "beforeSelectAll", "blur", "change", "chipSelection", "close", "created", "customValueSelection", "dataBound", "destroyed", "filtering", "focus", "open", "removed", "removing", "select", "selectedAll", "tagging"];
var modelProps = ["value"];
var testProp = getProps({ props: properties });
var props = testProp[0], watch = testProp[1], emitProbs = Object.keys(watch);
emitProbs.push("modelchanged", "update:modelValue");
for (var _i = 0, modelProps_1 = modelProps; _i < modelProps_1.length; _i++) {
  var props_1 = modelProps_1[_i];
  emitProbs.push("update:" + props_1);
}
var MultiSelectComponent = vueDefineComponent({
  name: "MultiSelectComponent",
  mixins: [ComponentBase],
  props,
  watch,
  emits: emitProbs,
  model: { event: "modelchanged" },
  provide: function() {
    return { custom: this.custom };
  },
  data: function() {
    return {
      ej2Instances: new MultiSelect({}),
      propKeys: properties,
      models: modelProps,
      hasChildDirective: false,
      hasInjectedModules: true,
      tagMapper: {},
      tagNameMapper: {},
      isVue3: !isExecute,
      templateCollection: {}
    };
  },
  created: function() {
    this.ej2Instances._trigger = this.ej2Instances.trigger;
    this.ej2Instances.trigger = this.trigger;
    this.bindProperties();
    this.ej2Instances._setProperties = this.ej2Instances.setProperties;
    this.ej2Instances.setProperties = this.setProperties;
    this.ej2Instances.clearTemplate = this.clearTemplate;
    this.updated = this.updated;
  },
  render: function(createElement2) {
    var h2 = !isExecute ? gh : createElement2;
    var slots = null;
    if (!isNullOrUndefined(this.$slots.default)) {
      slots = !isExecute ? this.$slots.default() : this.$slots.default;
    }
    return h2("input", slots);
  },
  methods: {
    clearTemplate: function(templateNames) {
      if (!templateNames) {
        templateNames = Object.keys(this.templateCollection || {});
      }
      if (templateNames.length && this.templateCollection) {
        for (var _i = 0, templateNames_1 = templateNames; _i < templateNames_1.length; _i++) {
          var tempName = templateNames_1[_i];
          var elementCollection = this.templateCollection[tempName];
          if (elementCollection && elementCollection.length) {
            for (var _a = 0, elementCollection_1 = elementCollection; _a < elementCollection_1.length; _a++) {
              var ele = elementCollection_1[_a];
              var destroy2 = getValue("__vue__.$destroy", ele);
              if (destroy2) {
                ele.__vue__.$destroy();
              }
              if (ele.innerHTML) {
                ele.innerHTML = "";
              }
            }
            delete this.templateCollection[tempName];
          }
        }
      }
    },
    setProperties: function(prop, muteOnChange) {
      var _this = this;
      if (this.isVue3) {
        this.models = !this.models ? this.ej2Instances.referModels : this.models;
      }
      if (this.ej2Instances && this.ej2Instances._setProperties) {
        this.ej2Instances._setProperties(prop, muteOnChange);
      }
      if (prop && this.models && this.models.length) {
        Object.keys(prop).map(function(key) {
          _this.models.map(function(model) {
            if (key === model && !/datasource/i.test(key)) {
              if (_this.isVue3) {
                _this.ej2Instances.vueInstance.$emit("update:" + key, prop[key]);
              } else {
                _this.$emit("update:" + key, prop[key]);
                _this.$emit("modelchanged", prop[key]);
              }
            }
          });
        });
      }
    },
    trigger: function(eventName, eventProp, successHandler) {
      if (!isExecute) {
        this.models = !this.models ? this.ej2Instances.referModels : this.models;
      }
      if ((eventName === "change" || eventName === "input") && this.models && this.models.length !== 0) {
        var key = this.models.toString().match(/checked|value/) || [];
        var propKey = key[0];
        if (eventProp && key && !isUndefined(eventProp[propKey])) {
          if (!isExecute) {
            this.ej2Instances.vueInstance.$emit("update:" + propKey, eventProp[propKey]);
            this.ej2Instances.vueInstance.$emit("modelchanged", eventProp[propKey]);
            this.ej2Instances.vueInstance.$emit("update:modelValue", eventProp[propKey]);
          } else {
            if (eventName === "change" || this.$props && !this.$props.isLazyUpdate) {
              this.$emit("update:" + propKey, eventProp[propKey]);
              this.$emit("modelchanged", eventProp[propKey]);
            }
          }
        }
      } else if (eventName === "actionBegin" && eventProp.requestType === "dateNavigate" && this.models && this.models.length !== 0) {
        var key = this.models.toString().match(/currentView|selectedDate/) || [];
        var propKey = key[0];
        if (eventProp && key && !isUndefined(eventProp[propKey])) {
          if (!isExecute) {
            this.ej2Instances.vueInstance.$emit("update:" + propKey, eventProp[propKey]);
            this.ej2Instances.vueInstance.$emit("modelchanged", eventProp[propKey]);
          } else {
            this.$emit("update:" + propKey, eventProp[propKey]);
            this.$emit("modelchanged", eventProp[propKey]);
          }
        }
      }
      if (this.ej2Instances && this.ej2Instances._trigger) {
        this.ej2Instances._trigger(eventName, eventProp, successHandler);
      }
    },
    custom: function() {
      this.updated();
    },
    addItem: function(items, itemIndex) {
      return this.ej2Instances.addItem(items, itemIndex);
    },
    clear: function() {
      return this.ej2Instances.clear();
    },
    filter: function(dataSource, query, fields) {
      return this.ej2Instances.filter(dataSource, query, fields);
    },
    focusIn: function() {
      return this.ej2Instances.focusIn();
    },
    focusOut: function() {
      return this.ej2Instances.focusOut();
    },
    getDataByValue: function(value) {
      return this.ej2Instances.getDataByValue(value);
    },
    getItems: function() {
      return this.ej2Instances.getItems();
    },
    hidePopup: function(e) {
      return this.ej2Instances.hidePopup(e);
    },
    hideSpinner: function() {
      return this.ej2Instances.hideSpinner();
    },
    requiredModules: function() {
      return this.ej2Instances.requiredModules();
    },
    selectAll: function(state) {
      return this.ej2Instances.selectAll(state);
    },
    showPopup: function(e) {
      return this.ej2Instances.showPopup(e);
    },
    showSpinner: function() {
      return this.ej2Instances.showSpinner();
    }
  }
});
MultiSelect.Inject(CheckBoxSelection);
var CHARS = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");
var UUID = function() {
  var chars = CHARS, uuid = [], i;
  var r;
  uuid[8] = uuid[13] = uuid[18] = uuid[23] = "-";
  uuid[14] = "4";
  for (i = 0; i < 36; i++) {
    if (!uuid[i]) {
      r = 0 | Math.random() * 16;
      uuid[i] = chars[i == 19 ? r & 3 | 8 : r];
    }
  }
  return uuid.join("");
};
let that;
var slash = "/";
var tp1 = String(window.location.protocol);
var tp2 = String(window.location.host);
var _sfc_main$1 = defineComponent({
  name: "Kanban",
  components: {
    "ejs-kanban": KanbanComponent,
    "e-columns": ColumnsDirective,
    "e-column": ColumnDirective,
    "ejs-schedule": ScheduleComponent,
    "ejs-button": ButtonComponent,
    "ejs-checkbox": CheckBoxComponent,
    "ejs-toolbar": ToolbarComponent,
    "ejs-textbox": TextBoxComponent,
    "ejs-multiselect": MultiSelectComponent,
    "ejs-dropdownlist": DropDownListComponent,
    "ejs-sidebar": SidebarComponent,
    "ejs-tab": TabComponent,
    "ejs-dialog": DialogComponent,
    "ejs-colorpicker": ColorPickerComponent,
    "ejs-accordion": AccordionComponent,
    "e-accordionitems": AccordionItemsDirective,
    "e-accordionitem": AccordionItemDirective,
    "e-tabitems": TabItemsDirective,
    "e-tabitem": TabItemDirective,
    "e-items": ItemsDirective,
    "e-item": ItemDirective,
    "e-views": ViewsDirective,
    "e-view": ViewDirective,
    "e-resources": ResourcesDirective,
    "e-resource": ResourceDirective
  },
  props: {
    KanbanID: String
  },
  data() {
    return {
      refreshtimer: null,
      adding: false,
      editing: false,
      maintarget: ".left-panel",
      sidebartarget: "#sidebarsettings",
      apptarget: "#app",
      dialog: DialogUtility,
      digest: "",
      propslist: "",
      propsexist: false,
      itemtype: "",
      calprops: {
        Title: "Calendar",
        Sites: new Array(),
        Lists: new Array(),
        Categories: new Array()
      },
      basecats: [
        { CategoryText: "Meeting", CategoryColor: "#ff0000", CategoryId: 1 },
        { CategoryText: "Workshop", CategoryColor: "#88ee00", CategoryId: 2 },
        { CategoryText: "Holiday", CategoryColor: "#ff88ee", CategoryId: 3 }
      ],
      catidcount: 3,
      idcount: 0,
      message: "",
      errorcount: 3,
      errors: new Array(),
      settingserror: true,
      datatrue: true,
      datafalse: false,
      errorheader: "",
      addcategory: "",
      dockSize: "0px",
      badfields: ["ContentType", "Attachments", "Geolocation", "fAllDayEvent", "fRecurrence", "ParticipantsPicker", "Facilities", "FreeBusy", "Overbook", "BannerUrl", "BannerImageUrl"],
      // can't use for field mapping
      sitesSelected: new Array(),
      events: new Array(),
      sitefields: { text: "Title", value: "WebId" },
      listfields: { text: "Title", value: "Url" },
      fieldfields: { text: "Title", value: "Title" },
      SettingsTab: { text: "Settings" },
      InstructionsTab: { text: "Setup Instructions" },
      intl: new Internationalization(),
      selectedDate: /* @__PURE__ */ new Date(),
      currentView: "Month",
      quickInfoTemplates: {
        header: "headerTemplate",
        content: "contentTemplate",
        footer: "footerTemplate"
      },
      fields: { text: "CategoryText", value: "CategoryId" },
      eventSettings: {
        dataSource: []
      },
      kanbanData: [
        {
          Id: 1,
          Status: "Open",
          Summary: "Analyze the new requirements gathered from the customer.",
          Assignee: "Andrew Fuller"
        },
        {
          Id: 2,
          Status: "InProgress",
          Summary: "The Quig is AWESOME",
          Assignee: "The Quig"
        },
        {
          Id: 3,
          Status: "InProgress",
          Summary: "Improve application performance",
          Assignee: "Andrew Fuller"
        },
        {
          Id: 4,
          Status: "Close",
          Summary: "Arrange a web meeting with the customer to get new requirements.",
          Assignee: "Janet Leverling"
        }
      ],
      cardSettings: {
        contentField: "Summary",
        headerField: "Id"
      }
    };
  },
  mounted() {
    this.$nextTick(() => {
      that = this;
      document.body.classList.add("bootstrap5");
      this.getDigest().then(function() {
        that.getSitesForUser().then(function() {
          that.gitRdone(that.KanbanID);
        });
      });
    });
  },
  methods: {
    async getDigest() {
      const response = await axios$1.request({
        url: tp1 + slash + slash + tp2 + "/_api/contextinfo",
        method: "POST",
        headers: { Accept: "application/json; odata=verbose" }
      });
      this.digest = response.data.d.GetContextWebInformation.FormDigestValue;
      return true;
    },
    async getSitesForUser() {
      console.log("GETTING SITES");
      let url = tp1 + slash + slash + tp2 + slash + "_api/search/query?querytext='contentclass:STS_Site contentclass:STS_Web'";
      try {
        await axios$1.get(url, {
          headers: {
            accept: "application/json;odata=verbose"
          }
        }).then((response) => {
          let data = response.data.d.query.PrimaryQueryResult.RelevantResults.Table.Rows.results;
          let p2 = [];
          for (let i = 0; i < data.length; i++) {
            var test = String(data[i].Cells.results[32].Value);
            if (test !== "SPSPERS" && test !== "APPCATALOG") {
              p2.push({
                Title: data[i].Cells.results[2].Value,
                Url: data[i].Cells.results[5].Value,
                Template: data[i].Cells.results[32].Value,
                SiteId: data[i].Cells.results[45].Value,
                WebId: data[i].Cells.results[46].Value,
                isSelected: false
              });
            }
          }
          this.calprops.Sites = p2;
          console.log("USER SITES ADDED");
        });
      } catch (e) {
        console.log("ERROR: " + e);
      }
      return true;
    },
    async getListsForSite(site, webid, sitetitle) {
      site = String(site);
      webid = String(webid);
      let url = site;
      if (site.length - 1 !== site.lastIndexOf("/")) {
        url = url + slash;
      }
      url = url + "_api/web/lists";
      try {
        await axios$1.get(url, {
          headers: {
            accept: "application/json;odata=verbose"
          }
        }).then((response) => {
          let results = response.data.d.results;
          for (let k = 0; k < results.length; k++) {
            let hidden = Boolean(results[k].Hidden);
            let catalog = Boolean(results[k].IsCatalog);
            let title = String(results[k].Title);
            if (!hidden && !catalog) {
              if (title.indexOf("WP-") < 0 && title.indexOf("Site Assets") < 0 && title.indexOf("Site Pages") < 0 && title.indexOf("Form Templates") < 0) {
                this.calprops.Lists.push({
                  Site: sitetitle,
                  WebId: webid,
                  Title: title,
                  Url: site,
                  Id: String(results[k].Id),
                  FieldsUri: String(results[k].Fields.__deferred.uri),
                  Fields: {
                    Subject: "Title",
                    StartTime: "StartDate",
                    EndTime: "EndDate",
                    Category: "Category",
                    Recurrence: "Recurrence",
                    Description: "Description",
                    Location: "Location"
                  },
                  ListFields: [],
                  Selected: false
                });
              }
            }
          }
        });
      } catch (e) {
        console.log("ERROR GETTINGS LISTS: " + JSON.stringify(e));
      }
    },
    async createWPList(url, props2, config) {
      await axios$1.post(url, props2, config);
      return true;
    },
    async createWPListItem(url, itemtype) {
      const headers = {
        "Content-Type": "application/json;odata=verbose",
        Accept: "application/json;odata=verbose",
        "X-RequestDigest": that.digest,
        "X-HTTP-Method": "POST"
      };
      const config = {
        headers
      };
      let itemprops = {
        __metadata: {
          type: itemtype
        },
        Title: "Entry"
      };
      await axios$1.post(url, itemprops, config);
      console.log("INITIAL LIST ITEM CREATED");
      return true;
    },
    async getWPListItem(url) {
      console.log("GET WPLISTITEM URL: " + url);
      const response = await axios$1.get(url, {
        headers: {
          accept: "application/json;odata=verbose"
        }
      });
      console.log("GETWPLISTITEM RESPONSE: " + response);
      let j;
      j = response.data.d.CalendarData;
      if (j !== null) {
        console.log("PARSED RESPONSE: " + j);
        this.calprops = JSON.parse(j);
        this.basecats = this.calprops.Categories;
        for (let i = 0; i < this.calprops.Sites.length; i++) {
          if (this.calprops.Sites[i].isSelected) {
            this.sitesSelected.push(this.calprops.Sites[i].WebId);
          }
        }
        this.getEvents();
      }
      return true;
    },
    async saveWPSettings() {
      let title = "WP-" + String(this.KanbanID);
      let url = tp1 + slash + slash + tp2 + slash + "_api/web/lists/getbytitle('" + title + "')/items(1)";
      const headers = {
        "Content-Type": "application/json;odata=verbose",
        Accept: "application/json;odata=verbose",
        "X-RequestDigest": this.digest,
        "X-HTTP-Method": "MERGE",
        "If-Match": "*"
      };
      let config = {
        headers
      };
      let rabbit = title.replaceAll("-", "");
      rabbit = "SP.Data." + rabbit + "ListItem";
      this.calprops.Categories = this.basecats;
      let savingprops = JSON.stringify(this.calprops);
      let itemprops = {
        __metadata: {
          type: rabbit
        },
        Title: "Entry",
        CalendarData: savingprops
      };
      await axios$1.post(url, itemprops, config);
    },
    gitRdone: function(kanbanID) {
      let msg = "";
      async function getPropsFromList(url) {
        await axios$1.get(url, {
          headers: {
            accept: "application/json;odata=verbose"
          }
        }).catch(function(error) {
          if (error.response) {
            msg = String(error.response.data.error.message.value);
            if (msg) {
              console.log("ERROR: " + msg);
              if (msg.indexOf("does not exist") > 1) {
                const headers = {
                  "Content-Type": "application/json;odata=verbose",
                  Accept: "application/json;odata=verbose",
                  "X-RequestDigest": that.digest,
                  "X-HTTP-Method": "POST"
                };
                const config = {
                  headers
                };
                let itemprops = {
                  __metadata: {
                    type: "SP.List"
                  },
                  BaseTemplate: 100,
                  Description: "Web Part Properties List for Calendar Web Part " + kanbanID,
                  Title: "WP-" + kanbanID,
                  Id: kanbanID
                };
                let url2 = tp1 + slash + slash + tp2 + slash + "_api/web/lists";
                that.createWPList(url2, itemprops, config).then(() => {
                  let title2 = "WP-" + String(kanbanID);
                  let url3 = tp1 + slash + slash + tp2 + slash + "_api/web/lists/getbytitle('" + title2 + "')/Fields";
                  let itemprops2 = {
                    __metadata: {
                      type: "SP.Field"
                    },
                    Title: "CalendarData",
                    StaticName: "CalendarData",
                    FieldTypeKind: 3
                  };
                  axios$1.post(url3, itemprops2, config).then(function() {
                    let title3 = "WP-" + String(kanbanID);
                    that.propslist = title3;
                    let url4 = tp1 + slash + slash + tp2 + slash + "_api/web/lists/getbytitle('" + title3 + "')/items";
                    let rabbit = title3.replaceAll("-", "");
                    rabbit = "SP.Data." + rabbit + "ListItem";
                    that.itemtype = rabbit;
                    that.createWPListItem(url4, rabbit);
                  });
                });
              }
            }
          }
        }).then(function() {
          let title2 = "WP-" + String(kanbanID);
          let url2 = tp1 + slash + slash + tp2 + slash + "_api/web/lists/getbytitle('" + title2 + "')/items(1)";
          that.getWPListItem(url2);
        });
      }
      let title = "WP-" + String(kanbanID);
      let gurl = tp1 + slash + slash + tp2 + slash + "_api/web/lists/getbytitle('" + title + "')";
      getPropsFromList(gurl);
    },
    onColorChange: function(id, color) {
      for (let i = 0; i < this.basecats.length; i++) {
        if (this.basecats[i].CategoryId === id) {
          this.basecats[i].CategoryColor === color;
        }
      }
      let Schedule2 = this.$refs["scheduleObj"];
      let instances2 = Schedule2.ej2Instances;
      instances2.resources[0].dataSource = this.basecats;
    },
    onActionBegin: function(args) {
      let scheduleObj = this.$refs["scheduleObj"].ej2Instances;
      if (args.requestType === "eventCreate" || args.requestType === "eventChange") {
        let data;
        if (args.requestType === "eventCreate") {
          data = args.data[0];
          console.log("ADD EVENT: " + data);
        } else if (args.requestType === "eventChange") {
          data = args.data;
          console.log("EDIT EVENT: " + data);
        }
        if (!scheduleObj.isSlotAvailable(data.StartTime, data.EndTime)) {
          args.cancel = true;
        }
      }
    },
    handleit: function(e) {
      if (e.target.id === "get-lists") {
        this.calprops.Lists = new Array();
        if (this.sitesSelected.length > 0) {
          for (let i = 0; i < this.sitesSelected.length; i++) {
            for (let j = 0; j < this.calprops.Sites.length; j++) {
              if (this.sitesSelected[i] === this.calprops.Sites[j].WebId) {
                this.calprops.Sites[j].isSelected = true;
                this.getListsForSite(this.calprops.Sites[j].Url, this.calprops.Sites[j].WebId, this.calprops.Sites[j].Title);
              }
            }
          }
        } else {
          alert("You must select at least one site.");
        }
      }
      if (e.target.id === "save-settings") {
        let goon = false;
        for (let i = 0; i < this.calprops.Lists.length; i++) {
          if (this.calprops.Lists[i].Selected && this.calprops.Lists[i].Selected == true) {
            goon = true;
          }
        }
        if (goon == true) {
          this.getEvents().then(() => {
            let Schedule2 = this.$refs["scheduleObj"];
            Schedule2.refreshEvents(false);
            Schedule2.hideSpinner();
            that.saveWPSettings();
            that.$refs.sidebarsettings.toggle();
          });
        } else {
          alert("No lists selected");
        }
      }
      if (e.target.id === "show-cat-dialog") {
        this.$refs.dlgCategory.setProperties({ visible: true }, false);
        this.$refs.dlgCategory.show();
      }
      if (e.target.id === "add-cat") {
        this.message = "Adding Category " + this.addcategory + "...";
        this.calprops.Categories.push({
          CategoryText: this.addcategory,
          CategoryId: this.catidcount + 1,
          CategoryColor: "#eeeeee"
        });
        this.catidcount += 1;
        this.addcategorytolists();
        this.$refs.dlgCategory.hide();
      }
      if (e.target.id === "close-cat") {
        this.$refs.dlgCategory.hide();
      }
    },
    onToolbarItemClicked: function(args) {
      let scheduleObj = this.$refs["scheduleObj"].ej2Instances;
      switch (args.item.id) {
        case "menukanban":
          this.$refs.sidebarKanban.toggle();
          break;
        case "menucalendar":
          this.$refs.sidebarCalendar.toggle();
          break;
        case "menugantt":
          this.$refs.sidebarGantt.toggle();
          break;
        case "btnCalendarDay":
          scheduleObj.currentView = "Day";
          break;
        case "btnCalendarWorkWeek":
          scheduleObj.currentView = "WorkWeek";
          break;
        case "btnCalendarMonth":
          scheduleObj.currentView = "Month";
          break;
        case "btnCalendarNew":
          alert("new event clicked");
          break;
        case "btnCalendarNewRecurring":
          alert("add recurring event clicked");
          break;
      }
    },
    onCellClicked: function(args) {
      console.log("CELL CLICKED: " + args);
      this.$refs["scheduleObj"].openEditor(args, "Add");
    },
    onEventClicked: function(args) {
      console.log("EVENT CLICKED: " + args);
      if (!args.event.RecurrenceRule) {
        this.$refs["scheduleObj"].openEditor(args.event, "Save");
      } else {
        this.$refs["scheduleObj"].quickPopup.openRecurrenceAlert();
      }
    },
    onPopupOpen: function(args) {
      console.log("POPUP OPEN: " + args);
      if ((args.type == "QuickInfo" || args.type == "ViewEventInfo") && !args.element.classList.contains("e-template")) {
        args.element.classList.add("e-template");
      }
      if (args.type == "QuickInfo" && args.target && !args.target.classList.contains("e-appointment")) {
        const titleObj = document.querySelector("#title").ej2_instances[0];
        titleObj.focusIn();
      }
      if (args.type === "Editor") {
        args.cancel = true;
        this.message = "Open Form";
      }
    },
    getHeaderStyles: function(data) {
      let scheduleObj = document.querySelector(".e-schedule").ej2_instances[0];
      let resources = scheduleObj.getResourceCollections()[0];
      let resourceData = resources.dataSource.filter((resource) => resource.CategoryId === data.CategoryId)[0];
      return resourceData.CategoryColor;
    },
    getHeaderTitle: function(data) {
      return data.elementType === "cell" ? "Add Appointment" : "Appointment Details";
    },
    getHeaderDetails: function(data) {
      return this.intl.formatDate(data.StartTime, { type: "date", skeleton: "full" }) + " (" + this.intl.formatDate(data.StartTime, { skeleton: "hm" }) + " - " + this.intl.formatDate(data.EndTime, { skeleton: "hm" }) + ")";
    },
    getEventType: function(data) {
      let scheduleObj = document.querySelector(".e-schedule").ej2_instances[0];
      let resources = scheduleObj.getResourceCollections()[0];
      let resourceData = resources.dataSource.filter((resource) => resource.CategoryId === data.CategoryId)[0];
      return resourceData.CategoryText;
    },
    eventClickActions: function(data) {
      alert(JSON.stringify(data));
    },
    editEvent: function(data) {
      let currentAction = "";
      this.$refs["scheduleObj"].openEditor(data, currentAction, true);
    },
    buttonClickActions: function(e) {
      var _a;
      console.log("BUTTON CLICK: " + e);
      const scheduleObj = document.querySelector(".e-schedule");
      const quickPopup = closest(e.target, ".e-quick-popup-wrapper");
      const getSlotData = function() {
        const titleObj = quickPopup.querySelector("#title");
        const notesObj = quickPopup.querySelector("#notes");
        const eventTypeObj = quickPopup.querySelector("#eventType");
        let addObj = {};
        addObj.Id = scheduleObj.getEventMaxID();
        addObj.Subject = isNullOrUndefined(titleObj.value) ? "Add title" : titleObj.value;
        addObj.StartTime = new Date(scheduleObj.ej2Instances.activeCellsData.startTime);
        addObj.EndTime = new Date(scheduleObj.ej2Instances.activeCellsData.endTime);
        addObj.IsAllDay = scheduleObj.ej2Instances.activeCellsData.isAllDay;
        addObj.Description = isNullOrUndefined(notesObj.value) ? "Add notes" : notesObj.value;
        addObj.CategoryId = eventTypeObj.value;
        return addObj;
      };
      if (e.target.id === "add") {
        const addObj = getSlotData();
        scheduleObj.addEvent(addObj);
      }
      if (e.target.id === "delete") {
        const eventDetails = scheduleObj.ej2Instances.activeEventData.event;
        let currentAction = "Delete";
        if (eventDetails.RecurrenceRule) {
          currentAction = "DeleteOccurrence";
        }
        scheduleObj.deleteEvent(eventDetails, currentAction);
        this.message = "Deleting Item...";
      }
      if (e.target.id === "more-details") {
        const isCellPopup = (_a = quickPopup.firstElementChild) == null ? void 0 : _a.classList.contains("e-cell-popup");
        const eventDetails = isCellPopup ? getSlotData() : scheduleObj.ej2Instances.activeEventData.event;
        let currentAction = isCellPopup ? "Add" : "Save";
        if (eventDetails.RecurrenceRule) {
          currentAction = "EditOccurrence";
        }
        scheduleObj.openEditor(eventDetails, currentAction, true);
      }
      scheduleObj.closeQuickInfoPopup();
    },
    mapfields: function(e) {
      let index = Number(e.target.attributes["data-index"].value);
      let list = this.calprops.Lists[index];
      console.log("TESTING: " + list.Title);
      let button = String(e.target.attributes["data-button"].value);
      let buttonElement = document.getElementById(button);
      buttonElement.classList.remove("e-danger");
      buttonElement.classList.add("e-warning");
      buttonElement.innerText = "Getting Data";
      let tp12 = this.$refs["spinner" + index];
      let spinner = tp12[0];
      spinner.style.visibility = "visible";
      console.log("TEST POINT 1");
      let zebra = list.FieldsUri;
      try {
        axios$1.get(zebra, {
          headers: {
            accept: "application/json;odata=verbose"
          }
        }).then((response) => {
          let results = response.data.d.results;
          let horse = [];
          for (let k = 0; k < results.length; k++) {
            let hidden = Boolean(results[k].Hidden);
            let readonly2 = Boolean(results[k].ReadOnlyField);
            let name = String(results[k].InternalName);
            if (!hidden && !readonly2) {
              if (this.badfields.indexOf(name) < 0) {
                horse.push({ Title: name });
              }
            }
          }
          list.ListFields = horse;
          buttonElement.innerText = "Map Fields";
          buttonElement.classList.remove("e-warning");
          buttonElement.classList.add("e-success");
          spinner.style.visibility = "hidden";
        });
      } catch (e2) {
      }
    },
    addfield: function(list, index, field) {
      var _a;
      (_a = list.ListFields) == null ? void 0 : _a.push({ Title: field });
    },
    async addcategorytolists() {
      async function addCategoryToList(url, list) {
        console.log("ADD CAT URL: " + url);
        await axios$1.get(url, {
          headers: {
            accept: "application/json;odata=verbose"
          }
        }).then((response) => {
          let cats = [];
          cats = response.data.d.Choices.results;
          cats.push(that.addcategory);
          let headers = {
            "Content-Type": "application/json;odata=verbose",
            Accept: "application/json;odata=verbose",
            "X-RequestDigest": that.digest,
            "X-HTTP-Method": "PATCH",
            "If-Match": "*"
          };
          let config = {
            headers
          };
          let itemprops = {
            __metadata: {
              type: "SP.FieldChoice"
            },
            Choices: {
              results: cats
            }
          };
          axios$1.post(url, itemprops, config);
          that.message = "";
        });
      }
      for (let i = 0; i < this.calprops.Lists.length; i++) {
        if (this.calprops.Lists[i].Selected && this.calprops.Lists[i].Selected == true) {
          let catfield = this.calprops.Lists[i].Fields.Category;
          let url = String(this.calprops.Lists[i].Url);
          if (url.length - 1 !== url.lastIndexOf("/")) {
            url = url + slash;
          }
          url = url + "_api/lists/getbytitle('" + this.calprops.Lists[i].Title + "')/fields/getbytitle('" + catfield + "')";
          addCategoryToList(url, this.calprops.Lists[i]);
        }
      }
    },
    async getEvents() {
      this.events = [];
      let j = [];
      let Schedule2 = that.$refs["scheduleObj"];
      let oldevents = Schedule2.getEvents();
      Schedule2.deleteEvent(oldevents);
      async function getAllEvents(url, list) {
        console.log("GETALLEVENTS: " + url);
        await axios$1.get(url, {
          headers: {
            accept: "application/json;odata=verbose"
          }
        }).then((response) => {
          console.log("GET EVENTS RESPONSE: " + response);
          if (response.data.d.results && response.data.d.results.length > 0) {
            j = j.concat(response.data.d.results);
            if (response.data.d.__next) {
              url = response.data.d.__next;
              return getAllEvents(url, list);
            } else {
              if (j && j.length > 0) {
                for (let a = 0; a < j.length; a++) {
                  let cat = String(j[a][list.Fields.Category]);
                  let exists = false;
                  let catid = 0;
                  for (let b = 0; b < that.basecats.length; b++) {
                    let text = String(that.basecats[b].CategoryText);
                    if (text === cat) {
                      exists = true;
                      catid = that.basecats[b].CategoryId;
                    }
                  }
                  if (exists === false) {
                    that.basecats.push({
                      CategoryId: that.catidcount + 1,
                      CategoryText: cat,
                      CategoryColor: "#eeeeee"
                    });
                    that.catidcount += 1;
                  }
                  let start = new Date(j[a][list.Fields.StartTime]);
                  let end = new Date(j[a][list.Fields.EndTime]);
                  let guid = String(UUID());
                  try {
                    that.idcount += 1;
                    that.events.push({
                      Id: that.idcount,
                      // Fake Id as this is a required field of Scheduler but we don't need the event ID as we have the uri
                      Subject: String(j[a][list.Fields.Subject]),
                      Description: String(j[a][list.Fields.Description]),
                      StartTime: start,
                      // will address start time later
                      EndTime: end,
                      Location: String(j[a][list.Fields.Location]),
                      Category: String(j[a][list.Fields.Category]),
                      CategoryId: catid,
                      guid,
                      etag: String(j[a]["__metadata"]["etag"]),
                      uri: String(j[a]["__metadata"]["uri"]),
                      type: String(j[a]["__metadata"]["type"])
                    });
                  } catch (e) {
                  }
                }
                let Schedule3 = that.$refs["scheduleObj"];
                Schedule3.addEvent(that.events);
              }
            }
          }
        });
      }
      for (let i = 0; i < this.calprops.Lists.length; i++) {
        if (this.calprops.Lists[i].Selected && this.calprops.Lists[i].Selected == true) {
          let url = String(this.calprops.Lists[i].Url);
          if (url.length - 1 !== url.lastIndexOf("/")) {
            url = url + slash;
          }
          url = url + "_api/lists/getbytitle('" + this.calprops.Lists[i].Title + "')/items?$select=*";
          getAllEvents(url, this.calprops.Lists[i]);
        }
      }
      return true;
    }
  },
  provide: {
    schedule: [Day, WorkWeek, Month, DragAndDrop, Resize]
  }
});
var Kanban_vue_vue_type_style_index_0_lang = "";
var _export_sfc = (sfc, props2) => {
  const target = sfc.__vccOpts || sfc;
  for (const [key, val] of props2) {
    target[key] = val;
  }
  return target;
};
const _hoisted_1$1 = { class: "container-fluid px-0" };
const _hoisted_2 = { class: "row" };
const _hoisted_3 = /* @__PURE__ */ createBaseVNode("div", { class: "container p-0 m-0" }, [
  /* @__PURE__ */ createBaseVNode("div", { class: "row p-0 m-0 text-center" }, [
    /* @__PURE__ */ createBaseVNode("span", null, "Loading Events")
  ])
], -1);
const _hoisted_4 = /* @__PURE__ */ createBaseVNode("div", { class: "container p-0 m-0" }, [
  /* @__PURE__ */ createBaseVNode("div", { class: "row p-0 m-0 text-center" }, [
    /* @__PURE__ */ createBaseVNode("div", {
      class: "text-center align-middle mx-auto px500",
      style: { "z-index": "1000" }
    }, [
      /* @__PURE__ */ createBaseVNode("div", { id: "LoadingBars" }, [
        /* @__PURE__ */ createBaseVNode("div", {
          class: "blockG",
          id: "rotateG_01"
        }),
        /* @__PURE__ */ createBaseVNode("div", {
          class: "blockG",
          id: "rotateG_02"
        }),
        /* @__PURE__ */ createBaseVNode("div", {
          class: "blockG",
          id: "rotateG_03"
        }),
        /* @__PURE__ */ createBaseVNode("div", {
          class: "blockG",
          id: "rotateG_04"
        }),
        /* @__PURE__ */ createBaseVNode("div", {
          class: "blockG",
          id: "rotateG_05"
        }),
        /* @__PURE__ */ createBaseVNode("div", {
          class: "blockG",
          id: "rotateG_06"
        }),
        /* @__PURE__ */ createBaseVNode("div", {
          class: "blockG",
          id: "rotateG_07"
        }),
        /* @__PURE__ */ createBaseVNode("div", {
          class: "blockG",
          id: "rotateG_08"
        })
      ])
    ])
  ])
], -1);
const _hoisted_5 = { class: "col-12" };
const _hoisted_6 = { class: "content-wrapper" };
const _hoisted_7 = { class: "e-card" };
const _hoisted_8 = { class: "e-card-content" };
const _hoisted_9 = {
  id: "calendartab",
  style: { "display": "none" }
};
const _hoisted_10 = { class: "container-fluid" };
const _hoisted_11 = { class: "row" };
const _hoisted_12 = { class: "toolbar px-0" };
const _hoisted_13 = { class: "main-menu main-menu-calendar px-0" };
const _hoisted_14 = /* @__PURE__ */ createBaseVNode("div", { class: "container p-0 m-0" }, [
  /* @__PURE__ */ createBaseVNode("div", { class: "row p-0 m-0 text-center" }, [
    /* @__PURE__ */ createBaseVNode("span", null, "Are you sure?")
  ])
], -1);
const _hoisted_15 = /* @__PURE__ */ createBaseVNode("div", { class: "container p-0 m-0" }, [
  /* @__PURE__ */ createBaseVNode("div", { class: "row p-0 m-0 text-center" }, [
    /* @__PURE__ */ createBaseVNode("span", null, "This will add the category to all selected lists.")
  ])
], -1);
const _hoisted_16 = { class: "container p-0 m-0" };
const _hoisted_17 = { class: "row p-0 m-0" };
const _hoisted_18 = { class: "col-8" };
const _hoisted_19 = { class: "col-4" };
const _hoisted_20 = { class: "e-card" };
const _hoisted_21 = { class: "e-card-content" };
const _hoisted_22 = {
  id: "settings",
  style: { "display": "none" }
};
const _hoisted_23 = { class: "container p-0 m-0" };
const _hoisted_24 = { class: "row p-0 m-0 mb-1" };
const _hoisted_25 = { class: "col-12 text-center" };
const _hoisted_26 = /* @__PURE__ */ createBaseVNode("div", { class: "row p-0 m-0 mb-1" }, [
  /* @__PURE__ */ createBaseVNode("div", { class: "col-12 text-center bg-dark text-white" }, "Sites")
], -1);
const _hoisted_27 = { class: "row p-0 m-0 mb-1" };
const _hoisted_28 = { class: "col-8" };
const _hoisted_29 = { class: "col-4" };
const _hoisted_30 = {
  key: 0,
  class: "row p-0 m-0 mb-1"
};
const _hoisted_31 = /* @__PURE__ */ createBaseVNode("div", { class: "col-12 text-center bg-dark text-white" }, "Lists:", -1);
const _hoisted_32 = [
  _hoisted_31
];
const _hoisted_33 = {
  key: 1,
  class: "row p-0 m-0"
};
const _hoisted_34 = { class: "col-12 p-0" };
const _hoisted_35 = {
  id: "tblLists",
  class: "p-0 px1000"
};
const _hoisted_36 = /* @__PURE__ */ createBaseVNode("thead", null, [
  /* @__PURE__ */ createBaseVNode("th", { class: "text-center bg-dark text-white p-0 px60" }, "Select"),
  /* @__PURE__ */ createBaseVNode("th", { class: "text-center bg-dark text-white p-0 px150" }, "Site"),
  /* @__PURE__ */ createBaseVNode("th", { class: "text-center bg-dark text-white p-0 px150" }, "List"),
  /* @__PURE__ */ createBaseVNode("th", { class: "text-center bg-dark text-white p-0 px640" }, "Field Mappings")
], -1);
const _hoisted_37 = { class: "text-center" };
const _hoisted_38 = { class: "p-0" };
const _hoisted_39 = { class: "row p-0 m-0" };
const _hoisted_40 = { class: "p-0 px150" };
const _hoisted_41 = ["id"];
const _hoisted_42 = {
  class: "e-spinner",
  style: { "width": "20px", "height": "20px" }
};
const _hoisted_43 = { class: "e-spinner-pane e-spin-show" };
const _hoisted_44 = { class: "e-spinner-inner" };
const _hoisted_45 = {
  class: "e-spin-bootstrap5",
  id: "OM4vl",
  viewBox: "0 0 16 16",
  style: { "height": "16px", "width": "16px", "transform-origin": "8px 8px 8px" }
};
const _hoisted_46 = /* @__PURE__ */ createBaseVNode("path", {
  class: "e-path-circle",
  d: "M8,0.8A7.2,7.2 0 1 1 0.8,8"
}, null, -1);
const _hoisted_47 = [
  _hoisted_46
];
const _hoisted_48 = { class: "p-0 px440" };
const _hoisted_49 = ["id"];
const _hoisted_50 = { class: "px440" };
const _hoisted_51 = /* @__PURE__ */ createBaseVNode("thead", null, [
  /* @__PURE__ */ createBaseVNode("th", { class: "text-center bg-dark text-white" }, "Calendar Field"),
  /* @__PURE__ */ createBaseVNode("th", { class: "text-center bg-dark text-white" }, "Mapped List Field")
], -1);
const _hoisted_52 = /* @__PURE__ */ createBaseVNode("td", null, [
  /* @__PURE__ */ createBaseVNode("div", { class: "px100" }, "Title")
], -1);
const _hoisted_53 = { class: "mappedlistfield px330" };
const _hoisted_54 = { class: "px280" };
const _hoisted_55 = /* @__PURE__ */ createBaseVNode("td", null, [
  /* @__PURE__ */ createBaseVNode("div", { class: "px100" }, "StartDate")
], -1);
const _hoisted_56 = { class: "mappedlistfield px330" };
const _hoisted_57 = { class: "px280" };
const _hoisted_58 = { class: "px35" };
const _hoisted_59 = /* @__PURE__ */ createBaseVNode("td", null, [
  /* @__PURE__ */ createBaseVNode("div", { class: "px100" }, "EndDate")
], -1);
const _hoisted_60 = { class: "mappedlistfield px330" };
const _hoisted_61 = { class: "px280" };
const _hoisted_62 = { class: "px35" };
const _hoisted_63 = /* @__PURE__ */ createBaseVNode("td", null, [
  /* @__PURE__ */ createBaseVNode("div", { class: "px100" }, "Category")
], -1);
const _hoisted_64 = { class: "mappedlistfield px330" };
const _hoisted_65 = { class: "px280" };
const _hoisted_66 = { class: "px35" };
const _hoisted_67 = /* @__PURE__ */ createBaseVNode("td", null, [
  /* @__PURE__ */ createBaseVNode("div", { class: "px100" }, "Location")
], -1);
const _hoisted_68 = { class: "mappedlistfield px330" };
const _hoisted_69 = { class: "px280" };
const _hoisted_70 = { class: "px35" };
const _hoisted_71 = /* @__PURE__ */ createBaseVNode("td", null, [
  /* @__PURE__ */ createBaseVNode("div", { class: "px100" }, "Description")
], -1);
const _hoisted_72 = { class: "mappedlistfield px330" };
const _hoisted_73 = { class: "px280" };
const _hoisted_74 = { class: "px35" };
const _hoisted_75 = /* @__PURE__ */ createBaseVNode("td", null, [
  /* @__PURE__ */ createBaseVNode("div", { class: "px100" }, "Recurrence")
], -1);
const _hoisted_76 = { class: "mappedlistfield px330" };
const _hoisted_77 = { class: "px280" };
const _hoisted_78 = { class: "px35" };
const _hoisted_79 = /* @__PURE__ */ createBaseVNode("div", { class: "p-0 px50 bg-success" }, null, -1);
const _hoisted_80 = /* @__PURE__ */ createBaseVNode("div", { class: "row p-0 m-0 mb-1" }, [
  /* @__PURE__ */ createBaseVNode("div", { class: "col-12 text-center bg-dark text-white" }, "Categories:")
], -1);
const _hoisted_81 = { class: "row p-0 m-0 mb-1" };
const _hoisted_82 = { class: "col-12 p-0" };
const _hoisted_83 = {
  id: "tblCats",
  class: "p-0 px1000"
};
const _hoisted_84 = /* @__PURE__ */ createBaseVNode("thead", null, [
  /* @__PURE__ */ createBaseVNode("th", { class: "text-center bg-dark text-white px150" }, "Category"),
  /* @__PURE__ */ createBaseVNode("th", { class: "text-center bg-dark text-white px100" }, "Color")
], -1);
const _hoisted_85 = { colspan: "2" };
const _hoisted_86 = { class: "text-center" };
const _hoisted_87 = /* @__PURE__ */ createBaseVNode("div", {
  id: "instructions",
  style: { "display": "none" }
}, "INSTRUCTIONS", -1);
const _hoisted_88 = /* @__PURE__ */ createBaseVNode("div", {
  id: "errors",
  style: { "display": "none" }
}, [
  /* @__PURE__ */ createBaseVNode("div", null, "The following errors need to be resolved for full proper functionality.")
], -1);
const _hoisted_89 = { style: { "position": "relative", "display": "inline-block", "margin": "10px" } };
const _hoisted_90 = /* @__PURE__ */ createBaseVNode("div", { class: "errortext" }, "Errors", -1);
const _hoisted_91 = {
  key: 0,
  class: "e-badge e-badge-danger e-badge-notification e-badge-circle"
};
const _hoisted_92 = /* @__PURE__ */ createBaseVNode("div", { class: "e-card-separator" }, null, -1);
const _hoisted_93 = { class: "e-card-actions" };
const _hoisted_94 = { class: "container" };
const _hoisted_95 = { class: "row" };
const _hoisted_96 = { class: "col-2" };
const _hoisted_97 = { class: "col-10" };
const _hoisted_98 = { class: "row" };
const _hoisted_99 = { class: "main main-calendar px-0" };
const _hoisted_100 = {
  id: "kanbantab",
  style: { "display": "none" }
};
const _hoisted_101 = { class: "container-fluid" };
const _hoisted_102 = { class: "row" };
const _hoisted_103 = { class: "toolbar px-0" };
const _hoisted_104 = /* @__PURE__ */ createBaseVNode("div", { class: "main-menu main-menu-kanban px-0" }, [
  /* @__PURE__ */ createBaseVNode("div", null, "SIDEBAR STUFF HERE")
], -1);
const _hoisted_105 = { class: "row" };
const _hoisted_106 = { class: "main main-kanban px-0" };
const _hoisted_107 = {
  id: "gantttab",
  style: { "display": "none" }
};
const _hoisted_108 = { class: "container-fluid" };
const _hoisted_109 = { class: "row" };
const _hoisted_110 = { class: "toolbar px-0" };
const _hoisted_111 = /* @__PURE__ */ createBaseVNode("div", { class: "main-menu main-menu-gantt px-0" }, [
  /* @__PURE__ */ createBaseVNode("div", null, "SIDEBAR STUFF HERE")
], -1);
const _hoisted_112 = /* @__PURE__ */ createBaseVNode("div", { class: "row" }, [
  /* @__PURE__ */ createBaseVNode("div", { class: "main main-gantt px-0" }, "GANTT")
], -1);
const _hoisted_113 = /* @__PURE__ */ createBaseVNode("div", { style: { "position": "relative", "display": "inline-block", "margin": "10px" } }, [
  /* @__PURE__ */ createBaseVNode("div", { class: "tabtext" }, "Calendar")
], -1);
const _hoisted_114 = /* @__PURE__ */ createBaseVNode("div", { style: { "position": "relative", "display": "inline-block", "margin": "10px" } }, [
  /* @__PURE__ */ createBaseVNode("div", { class: "tabtext" }, "Kanban")
], -1);
const _hoisted_115 = /* @__PURE__ */ createBaseVNode("div", { style: { "position": "relative", "display": "inline-block", "margin": "10px" } }, [
  /* @__PURE__ */ createBaseVNode("div", { class: "tabtext" }, "Gantt")
], -1);
function _sfc_render$1(_ctx, _cache, $props, $setup, $data, $options) {
  const _component_ejs_dialog = resolveComponent("ejs-dialog");
  const _component_e_item = resolveComponent("e-item");
  const _component_e_items = resolveComponent("e-items");
  const _component_ejs_toolbar = resolveComponent("ejs-toolbar");
  const _component_ejs_textbox = resolveComponent("ejs-textbox");
  const _component_ejs_button = resolveComponent("ejs-button");
  const _component_ejs_multiselect = resolveComponent("ejs-multiselect");
  const _component_ejs_checkbox = resolveComponent("ejs-checkbox");
  const _component_ejs_dropdownlist = resolveComponent("ejs-dropdownlist");
  const _component_e_accordionitem = resolveComponent("e-accordionitem");
  const _component_e_accordionitems = resolveComponent("e-accordionitems");
  const _component_ejs_accordion = resolveComponent("ejs-accordion");
  const _component_ejs_colorpicker = resolveComponent("ejs-colorpicker");
  const _component_e_tabitem = resolveComponent("e-tabitem");
  const _component_e_tabitems = resolveComponent("e-tabitems");
  const _component_ejs_tab = resolveComponent("ejs-tab");
  const _component_ejs_sidebar = resolveComponent("ejs-sidebar");
  const _component_e_view = resolveComponent("e-view");
  const _component_e_views = resolveComponent("e-views");
  const _component_e_resource = resolveComponent("e-resource");
  const _component_e_resources = resolveComponent("e-resources");
  const _component_ejs_schedule = resolveComponent("ejs-schedule");
  const _component_e_column = resolveComponent("e-column");
  const _component_e_columns = resolveComponent("e-columns");
  const _component_ejs_kanban = resolveComponent("ejs-kanban");
  return openBlock(), createElementBlock("div", _hoisted_1$1, [
    createBaseVNode("div", _hoisted_2, [
      createVNode(_component_ejs_dialog, {
        ref: "dlgSpinner",
        visible: _ctx.datafalse,
        header: "dlgSpinHeader",
        content: "dlgSpinContent",
        showCloseIcon: _ctx.datatrue,
        target: _ctx.apptarget,
        position: "center center",
        width: "500px",
        height: "500px"
      }, {
        dlgSpinHeader: withCtx(() => [
          _hoisted_3
        ]),
        dlgSpinContent: withCtx(() => [
          _hoisted_4
        ]),
        _: 1
      }, 8, ["visible", "showCloseIcon", "target"]),
      createBaseVNode("div", _hoisted_5, [
        createBaseVNode("div", _hoisted_6, [
          createBaseVNode("div", _hoisted_7, [
            createBaseVNode("div", _hoisted_8, [
              createBaseVNode("div", _hoisted_9, [
                createBaseVNode("div", _hoisted_10, [
                  createBaseVNode("div", _hoisted_11, [
                    createBaseVNode("div", _hoisted_12, [
                      createVNode(_component_ejs_toolbar, {
                        id: "toolbar_calendar_options",
                        height: "50px",
                        overflowMode: "Scrollable",
                        scrollStep: "100",
                        clicked: _ctx.onToolbarItemClicked
                      }, {
                        default: withCtx(() => [
                          createVNode(_component_e_items, null, {
                            default: withCtx(() => [
                              createVNode(_component_e_item, {
                                prefixIcon: "e-icons e-menu",
                                tooltipText: "Settings Menu",
                                id: "menucalendar"
                              }),
                              createVNode(_component_e_item, { type: "Separator" }),
                              createVNode(_component_e_item, {
                                prefixIcon: "e-icons e-plus",
                                tooltipText: "New Event",
                                text: "New Event",
                                id: "btnCalendarNew"
                              }),
                              createVNode(_component_e_item, {
                                prefixIcon: "e-icons e-repeat",
                                tooltipText: "New Recurring Event",
                                text: "New Recurring Event",
                                id: "btnCalendarNewRecurring"
                              }),
                              createVNode(_component_e_item, { type: "Separator" }),
                              createVNode(_component_e_item, {
                                prefixIcon: "e-icons e-day",
                                tooltipText: "Day",
                                text: "Day",
                                id: "btnCalendarDay"
                              }),
                              createVNode(_component_e_item, {
                                prefixIcon: "e-icons e-week",
                                tooltipText: "Week",
                                text: "Week",
                                id: "btnCalendarWeek"
                              }),
                              createVNode(_component_e_item, {
                                prefixIcon: "e-icons e-week",
                                tooltipText: "WorkWeek",
                                text: "WorkWeek",
                                id: "btnCalendarWorkWeek"
                              }),
                              createVNode(_component_e_item, {
                                prefixIcon: "e-icons e-month",
                                tooltipText: "Month",
                                text: "Month",
                                id: "btnCalendarMonth"
                              })
                            ]),
                            _: 1
                          })
                        ]),
                        _: 1
                      }, 8, ["clicked"])
                    ])
                  ]),
                  createVNode(_component_ejs_sidebar, {
                    id: "sideCalendar",
                    class: "sidebar",
                    ref: "sidebarCalendar",
                    width: "1000px",
                    target: ".main-calendar",
                    type: "Push",
                    isOpen: _ctx.datafalse,
                    showBackdrop: _ctx.datafalse,
                    enablePersistence: _ctx.datafalse
                  }, {
                    default: withCtx(() => [
                      createBaseVNode("div", _hoisted_13, [
                        createBaseVNode("div", null, [
                          createVNode(_component_ejs_dialog, {
                            ref: "dlgCategory",
                            visible: _ctx.datafalse,
                            header: "dialogHeader",
                            footerTemplate: "dialogFooter",
                            content: "dialogContent",
                            showCloseIcon: _ctx.datatrue,
                            target: _ctx.sidebartarget,
                            position: "center center",
                            width: "500px"
                          }, {
                            dialogHeader: withCtx(() => [
                              _hoisted_14
                            ]),
                            dialogContent: withCtx(() => [
                              _hoisted_15
                            ]),
                            dialogFooter: withCtx(() => [
                              createBaseVNode("div", _hoisted_16, [
                                createBaseVNode("div", _hoisted_17, [
                                  createBaseVNode("div", _hoisted_18, [
                                    createVNode(_component_ejs_textbox, {
                                      modelValue: _ctx.addcategory,
                                      "onUpdate:modelValue": _cache[0] || (_cache[0] = ($event) => _ctx.addcategory = $event),
                                      placeholder: "New Category"
                                    }, null, 8, ["modelValue"])
                                  ]),
                                  createBaseVNode("div", _hoisted_19, [
                                    createVNode(_component_ejs_button, {
                                      id: "add-cat",
                                      cssClass: "e-success mr-1",
                                      content: "Yes",
                                      onClick: _ctx.handleit
                                    }, null, 8, ["onClick"]),
                                    createVNode(_component_ejs_button, {
                                      id: "close-cat",
                                      cssClass: "e-info ml-1",
                                      content: "No",
                                      onClick: _ctx.handleit
                                    }, null, 8, ["onClick"])
                                  ])
                                ])
                              ])
                            ]),
                            _: 1
                          }, 8, ["visible", "showCloseIcon", "target"]),
                          createBaseVNode("div", _hoisted_20, [
                            createBaseVNode("div", _hoisted_21, [
                              createBaseVNode("div", _hoisted_22, [
                                createBaseVNode("div", _hoisted_23, [
                                  createBaseVNode("div", _hoisted_24, [
                                    createBaseVNode("div", _hoisted_25, [
                                      createVNode(_component_ejs_textbox, {
                                        modelValue: _ctx.calprops.Title,
                                        "onUpdate:modelValue": _cache[1] || (_cache[1] = ($event) => _ctx.calprops.Title = $event),
                                        placeholder: "Calendar Title"
                                      }, null, 8, ["modelValue"])
                                    ])
                                  ]),
                                  _hoisted_26,
                                  createBaseVNode("div", _hoisted_27, [
                                    createBaseVNode("div", _hoisted_28, [
                                      createVNode(_component_ejs_multiselect, {
                                        id: "msSitesA",
                                        ref: "msSitesA",
                                        modelValue: _ctx.sitesSelected,
                                        "onUpdate:modelValue": _cache[2] || (_cache[2] = ($event) => _ctx.sitesSelected = $event),
                                        dataSource: _ctx.calprops.Sites,
                                        placeholder: "Select Site",
                                        fields: _ctx.sitefields,
                                        mode: "CheckBox",
                                        showDropDownIcon: _ctx.datatrue,
                                        showSelectAll: _ctx.datatrue,
                                        filterBarPlaceholder: "Search Sites"
                                      }, null, 8, ["modelValue", "dataSource", "fields", "showDropDownIcon", "showSelectAll"])
                                    ]),
                                    createBaseVNode("div", _hoisted_29, [
                                      createVNode(_component_ejs_button, {
                                        id: "get-lists",
                                        cssClass: "e-success",
                                        content: "Get Lists For Selected Sites",
                                        onClick: _ctx.handleit
                                      }, null, 8, ["onClick"])
                                    ])
                                  ]),
                                  _ctx.calprops.Lists.length > 0 ? (openBlock(), createElementBlock("div", _hoisted_30, _hoisted_32)) : createCommentVNode("", true),
                                  _ctx.calprops.Lists.length > 0 ? (openBlock(), createElementBlock("div", _hoisted_33, [
                                    createBaseVNode("div", _hoisted_34, [
                                      createBaseVNode("table", _hoisted_35, [
                                        _hoisted_36,
                                        createBaseVNode("tbody", null, [
                                          (openBlock(true), createElementBlock(Fragment, null, renderList(_ctx.calprops.Lists, (list, index) => {
                                            return openBlock(), createElementBlock("tr", {
                                              key: list.Id,
                                              class: "p-0"
                                            }, [
                                              createBaseVNode("td", _hoisted_37, [
                                                createVNode(_component_ejs_checkbox, {
                                                  modelValue: list.Selected,
                                                  "onUpdate:modelValue": ($event) => list.Selected = $event
                                                }, null, 8, ["modelValue", "onUpdate:modelValue"])
                                              ]),
                                              createBaseVNode("td", null, toDisplayString(list.Site), 1),
                                              createBaseVNode("td", null, toDisplayString(list.Title), 1),
                                              createBaseVNode("td", null, [
                                                createBaseVNode("div", _hoisted_38, [
                                                  createBaseVNode("div", _hoisted_39, [
                                                    createBaseVNode("div", _hoisted_40, [
                                                      createBaseVNode("div", {
                                                        id: "spinner" + index,
                                                        ref_for: true,
                                                        ref: "spinner" + index,
                                                        class: "e-control e-progress-btn e-lib e-round e-small e-success e-icon-btn e-btn e-spin-center",
                                                        style: { "padding-top": "3px", "visibility": "hidden" }
                                                      }, [
                                                        createBaseVNode("span", _hoisted_42, [
                                                          createBaseVNode("div", _hoisted_43, [
                                                            createBaseVNode("div", _hoisted_44, [
                                                              (openBlock(), createElementBlock("svg", _hoisted_45, _hoisted_47))
                                                            ])
                                                          ])
                                                        ])
                                                      ], 8, _hoisted_41),
                                                      createVNode(_component_ejs_button, {
                                                        id: "btn" + index,
                                                        onClick: _ctx.mapfields,
                                                        "data-index": index,
                                                        "data-button": "btn" + index,
                                                        cssClass: "e-danger",
                                                        content: "Map Fields"
                                                      }, null, 8, ["id", "onClick", "data-index", "data-button"])
                                                    ]),
                                                    createBaseVNode("div", _hoisted_48, [
                                                      createBaseVNode("div", {
                                                        id: "ac_" + index,
                                                        style: { "display": "none" }
                                                      }, [
                                                        createBaseVNode("table", _hoisted_50, [
                                                          _hoisted_51,
                                                          createBaseVNode("tbody", null, [
                                                            createBaseVNode("tr", null, [
                                                              _hoisted_52,
                                                              createBaseVNode("td", _hoisted_53, [
                                                                createBaseVNode("div", _hoisted_54, [
                                                                  createVNode(_component_ejs_dropdownlist, {
                                                                    dataSource: list.ListFields,
                                                                    fields: _ctx.fieldfields,
                                                                    placeholder: "Select Title Field",
                                                                    modelValue: list.Fields.Subject,
                                                                    "onUpdate:modelValue": ($event) => list.Fields.Subject = $event,
                                                                    cssClass: list.Fields.Subject === "" ? "e-danger" : "e-success"
                                                                  }, null, 8, ["dataSource", "fields", "modelValue", "onUpdate:modelValue", "cssClass"])
                                                                ])
                                                              ])
                                                            ]),
                                                            createBaseVNode("tr", null, [
                                                              _hoisted_55,
                                                              createBaseVNode("td", _hoisted_56, [
                                                                createBaseVNode("div", _hoisted_57, [
                                                                  createVNode(_component_ejs_dropdownlist, {
                                                                    dataSource: list.ListFields,
                                                                    fields: _ctx.fieldfields,
                                                                    placeholder: "Select StartDate Field",
                                                                    modelValue: list.Fields.StartTime,
                                                                    "onUpdate:modelValue": ($event) => list.Fields.StartTime = $event,
                                                                    style: normalizeStyle(list.Fields.StartTime === "" ? "border: 1px solid red" : "border: 1px solid green")
                                                                  }, null, 8, ["dataSource", "fields", "modelValue", "onUpdate:modelValue", "style"])
                                                                ]),
                                                                createBaseVNode("div", _hoisted_58, [
                                                                  createVNode(_component_ejs_button, {
                                                                    onClick: ($event) => _ctx.addfield(list, index, "StartDate"),
                                                                    cssClass: "e-round e-success",
                                                                    iconCss: "e-icons e-medium e-circle-add",
                                                                    content: "",
                                                                    title: "Add StartDate Field To The List"
                                                                  }, null, 8, ["onClick"])
                                                                ])
                                                              ])
                                                            ]),
                                                            createBaseVNode("tr", null, [
                                                              _hoisted_59,
                                                              createBaseVNode("td", _hoisted_60, [
                                                                createBaseVNode("div", _hoisted_61, [
                                                                  createVNode(_component_ejs_dropdownlist, {
                                                                    dataSource: list.ListFields,
                                                                    fields: _ctx.fieldfields,
                                                                    placeholder: "Select EndDate Field",
                                                                    modelValue: list.Fields.EndTime,
                                                                    "onUpdate:modelValue": ($event) => list.Fields.EndTime = $event,
                                                                    cssClass: list.Fields.EndTime === "" ? "e-danger" : "e-success"
                                                                  }, null, 8, ["dataSource", "fields", "modelValue", "onUpdate:modelValue", "cssClass"])
                                                                ]),
                                                                createBaseVNode("div", _hoisted_62, [
                                                                  createVNode(_component_ejs_button, {
                                                                    onClick: ($event) => _ctx.addfield(list, index, "EndDate"),
                                                                    cssClass: "e-round e-success",
                                                                    iconCss: "e-icons e-medium e-circle-add",
                                                                    content: "",
                                                                    title: "Add EndDate Field To The List"
                                                                  }, null, 8, ["onClick"])
                                                                ])
                                                              ])
                                                            ]),
                                                            createBaseVNode("tr", null, [
                                                              _hoisted_63,
                                                              createBaseVNode("td", _hoisted_64, [
                                                                createBaseVNode("div", _hoisted_65, [
                                                                  createVNode(_component_ejs_dropdownlist, {
                                                                    dataSource: list.ListFields,
                                                                    fields: _ctx.fieldfields,
                                                                    placeholder: "Select Category Field",
                                                                    modelValue: list.Fields.Category,
                                                                    "onUpdate:modelValue": ($event) => list.Fields.Category = $event,
                                                                    cssClass: list.Fields.Category === "" ? "e-danger" : "e-success"
                                                                  }, null, 8, ["dataSource", "fields", "modelValue", "onUpdate:modelValue", "cssClass"])
                                                                ]),
                                                                createBaseVNode("div", _hoisted_66, [
                                                                  createVNode(_component_ejs_button, {
                                                                    onClick: ($event) => _ctx.addfield(list, index, "Category"),
                                                                    cssClass: "e-round e-success",
                                                                    iconCss: "e-icons e-medium e-circle-add",
                                                                    content: "",
                                                                    title: "Add Category Field To The List"
                                                                  }, null, 8, ["onClick"])
                                                                ])
                                                              ])
                                                            ]),
                                                            createBaseVNode("tr", null, [
                                                              _hoisted_67,
                                                              createBaseVNode("td", _hoisted_68, [
                                                                createBaseVNode("div", _hoisted_69, [
                                                                  createVNode(_component_ejs_dropdownlist, {
                                                                    dataSource: list.ListFields,
                                                                    fields: _ctx.fieldfields,
                                                                    placeholder: "Select Location Field",
                                                                    modelValue: list.Fields.Location,
                                                                    "onUpdate:modelValue": ($event) => list.Fields.Location = $event
                                                                  }, null, 8, ["dataSource", "fields", "modelValue", "onUpdate:modelValue"])
                                                                ]),
                                                                createBaseVNode("div", _hoisted_70, [
                                                                  createVNode(_component_ejs_button, {
                                                                    onClick: ($event) => _ctx.addfield(list, index, "Location"),
                                                                    cssClass: "e-round e-success",
                                                                    iconCss: "e-icons e-medium e-circle-add",
                                                                    content: "",
                                                                    title: "Add Location Field To The List"
                                                                  }, null, 8, ["onClick"])
                                                                ])
                                                              ])
                                                            ]),
                                                            createBaseVNode("tr", null, [
                                                              _hoisted_71,
                                                              createBaseVNode("td", _hoisted_72, [
                                                                createBaseVNode("div", _hoisted_73, [
                                                                  createVNode(_component_ejs_dropdownlist, {
                                                                    dataSource: list.ListFields,
                                                                    fields: _ctx.fieldfields,
                                                                    placeholder: "Select Description Field",
                                                                    modelValue: list.Fields.Description,
                                                                    "onUpdate:modelValue": ($event) => list.Fields.Description = $event,
                                                                    cssClass: list.Fields.Description === "" ? "e-danger" : "e-success"
                                                                  }, null, 8, ["dataSource", "fields", "modelValue", "onUpdate:modelValue", "cssClass"])
                                                                ]),
                                                                createBaseVNode("div", _hoisted_74, [
                                                                  createVNode(_component_ejs_button, {
                                                                    onClick: ($event) => _ctx.addfield(list, index, "Description"),
                                                                    cssClass: "e-round e-success",
                                                                    iconCss: "e-icons e-medium e-circle-add",
                                                                    content: "",
                                                                    title: "Add Description Field To The List"
                                                                  }, null, 8, ["onClick"])
                                                                ])
                                                              ])
                                                            ]),
                                                            createBaseVNode("tr", null, [
                                                              _hoisted_75,
                                                              createBaseVNode("td", _hoisted_76, [
                                                                createBaseVNode("div", _hoisted_77, [
                                                                  createVNode(_component_ejs_dropdownlist, {
                                                                    dataSource: list.ListFields,
                                                                    fields: _ctx.fieldfields,
                                                                    placeholder: "Select Recurrence Field",
                                                                    modelValue: list.Fields.Recurrence,
                                                                    "onUpdate:modelValue": ($event) => list.Fields.Recurrence = $event
                                                                  }, null, 8, ["dataSource", "fields", "modelValue", "onUpdate:modelValue"])
                                                                ]),
                                                                createBaseVNode("div", _hoisted_78, [
                                                                  createVNode(_component_ejs_button, {
                                                                    onClick: ($event) => _ctx.addfield(list, index, "Recurrence"),
                                                                    cssClass: "e-round e-success",
                                                                    iconCss: "e-icons e-medium e-circle-add",
                                                                    content: "",
                                                                    title: "Add Recurrence Field To The List"
                                                                  }, null, 8, ["onClick"])
                                                                ])
                                                              ])
                                                            ])
                                                          ])
                                                        ])
                                                      ], 8, _hoisted_49),
                                                      createVNode(_component_ejs_accordion, null, {
                                                        default: withCtx(() => [
                                                          createVNode(_component_e_accordionitems, null, {
                                                            default: withCtx(() => [
                                                              createVNode(_component_e_accordionitem, {
                                                                class: "p-1 px500",
                                                                expanded: false,
                                                                header: "Mapped Fields--Expand to map/check fields.",
                                                                content: "#ac_" + index
                                                              }, null, 8, ["content"])
                                                            ]),
                                                            _: 2
                                                          }, 1024)
                                                        ]),
                                                        _: 2
                                                      }, 1024)
                                                    ]),
                                                    _hoisted_79
                                                  ])
                                                ])
                                              ])
                                            ]);
                                          }), 128))
                                        ])
                                      ])
                                    ])
                                  ])) : createCommentVNode("", true),
                                  _hoisted_80,
                                  createBaseVNode("div", _hoisted_81, [
                                    createBaseVNode("div", _hoisted_82, [
                                      createBaseVNode("table", _hoisted_83, [
                                        _hoisted_84,
                                        createBaseVNode("tbody", null, [
                                          (openBlock(true), createElementBlock(Fragment, null, renderList(_ctx.basecats, (category) => {
                                            return openBlock(), createElementBlock("tr", {
                                              key: category.CategoryId,
                                              class: "p-0"
                                            }, [
                                              createBaseVNode("td", null, toDisplayString(category.CategoryText), 1),
                                              createBaseVNode("td", null, [
                                                createVNode(_component_ejs_colorpicker, {
                                                  id: "picker_" + category.CategoryId,
                                                  class: "picker",
                                                  "data-id": category.CategoryId,
                                                  modelValue: category.CategoryColor,
                                                  "onUpdate:modelValue": ($event) => category.CategoryColor = $event,
                                                  onChange: ($event) => _ctx.onColorChange(category.CategoryId, category.CategoryColor)
                                                }, null, 8, ["id", "data-id", "modelValue", "onUpdate:modelValue", "onChange"])
                                              ])
                                            ]);
                                          }), 128)),
                                          createBaseVNode("tr", null, [
                                            createBaseVNode("td", _hoisted_85, [
                                              createBaseVNode("div", _hoisted_86, [
                                                createVNode(_component_ejs_button, {
                                                  id: "show-cat-dialog",
                                                  cssClass: "e-success",
                                                  content: "Add Category",
                                                  onClick: _ctx.handleit
                                                }, null, 8, ["onClick"])
                                              ])
                                            ])
                                          ])
                                        ])
                                      ])
                                    ])
                                  ])
                                ])
                              ]),
                              _hoisted_87,
                              _hoisted_88,
                              createVNode(_component_ejs_tab, {
                                heightAdjustMode: "Auto",
                                showCloseButton: false
                              }, {
                                default: withCtx(() => [
                                  createVNode(_component_e_tabitems, null, {
                                    default: withCtx(() => [
                                      createVNode(_component_e_tabitem, {
                                        header: _ctx.SettingsTab,
                                        content: "#settings"
                                      }, null, 8, ["header"]),
                                      createVNode(_component_e_tabitem, {
                                        header: _ctx.InstructionsTab,
                                        content: "#instructions"
                                      }, null, 8, ["header"]),
                                      createVNode(_component_e_tabitem, {
                                        headerTemplate: "TabHeaderTemplate",
                                        content: "#errors"
                                      }, {
                                        TabHeaderTemplate: withCtx(({}) => [
                                          createBaseVNode("div", _hoisted_89, [
                                            _hoisted_90,
                                            _ctx.errorcount > 0 ? (openBlock(), createElementBlock("span", _hoisted_91, toDisplayString(_ctx.errorcount), 1)) : createCommentVNode("", true)
                                          ])
                                        ]),
                                        _: 1
                                      })
                                    ]),
                                    _: 1
                                  })
                                ]),
                                _: 1
                              })
                            ]),
                            _hoisted_92,
                            createBaseVNode("div", _hoisted_93, [
                              createBaseVNode("div", _hoisted_94, [
                                createBaseVNode("div", _hoisted_95, [
                                  createBaseVNode("div", _hoisted_96, [
                                    createVNode(_component_ejs_button, {
                                      id: "save-settings",
                                      cssClass: "e-success",
                                      content: "Save",
                                      onClick: _ctx.handleit
                                    }, null, 8, ["onClick"])
                                  ]),
                                  createBaseVNode("div", _hoisted_97, [
                                    createVNode(_component_ejs_textbox, {
                                      modelValue: _ctx.message,
                                      "onUpdate:modelValue": _cache[3] || (_cache[3] = ($event) => _ctx.message = $event)
                                    }, null, 8, ["modelValue"])
                                  ])
                                ])
                              ])
                            ])
                          ])
                        ])
                      ])
                    ]),
                    _: 1
                  }, 8, ["isOpen", "showBackdrop", "enablePersistence"]),
                  createBaseVNode("div", _hoisted_98, [
                    createBaseVNode("div", _hoisted_99, [
                      createVNode(_component_ejs_schedule, {
                        id: "scheduler",
                        ref: "scheduleObj",
                        height: "920px",
                        width: "100%",
                        cssClass: "main-calendar",
                        eventClick: _ctx.onEventClicked,
                        currentView: _ctx.currentView,
                        selectedDate: _ctx.selectedDate,
                        eventSettings: _ctx.eventSettings,
                        actionBegin: _ctx.onActionBegin
                      }, {
                        default: withCtx(() => [
                          createVNode(_component_e_views, null, {
                            default: withCtx(() => [
                              createVNode(_component_e_view, { option: "Day" }),
                              createVNode(_component_e_view, {
                                option: "WorkWeek",
                                startHour: "10:00",
                                endHour: "18:00"
                              }),
                              createVNode(_component_e_view, {
                                option: "Month",
                                showWeekend: "false"
                              })
                            ]),
                            _: 1
                          }),
                          createVNode(_component_e_resources, null, {
                            default: withCtx(() => [
                              createVNode(_component_e_resource, {
                                field: "CategoryId",
                                ref: "Categories",
                                title: "Categories",
                                name: "Categories",
                                allowMultiple: _ctx.datatrue,
                                dataSource: _ctx.basecats,
                                textField: "CategoryText",
                                idField: "CategoryId",
                                colorField: "CategoryColor"
                              }, null, 8, ["allowMultiple", "dataSource"])
                            ]),
                            _: 1
                          })
                        ]),
                        _: 1
                      }, 8, ["eventClick", "currentView", "selectedDate", "eventSettings", "actionBegin"])
                    ])
                  ])
                ])
              ]),
              createBaseVNode("div", _hoisted_100, [
                createBaseVNode("div", _hoisted_101, [
                  createBaseVNode("div", _hoisted_102, [
                    createBaseVNode("div", _hoisted_103, [
                      createVNode(_component_ejs_toolbar, {
                        id: "toolbar_kanban_options",
                        height: "50px",
                        overflowMode: "Scrollable",
                        scrollStep: "100",
                        clicked: _ctx.onToolbarItemClicked
                      }, {
                        default: withCtx(() => [
                          createVNode(_component_e_items, null, {
                            default: withCtx(() => [
                              createVNode(_component_e_item, {
                                prefixIcon: "e-icons e-menu",
                                tooltipText: "Settings Menu",
                                id: "menukanban"
                              })
                            ]),
                            _: 1
                          })
                        ]),
                        _: 1
                      }, 8, ["clicked"])
                    ])
                  ]),
                  createVNode(_component_ejs_sidebar, {
                    id: "sideKanban",
                    class: "sidebar",
                    ref: "sidebarKanban",
                    width: "290px",
                    target: ".main-kanban",
                    type: "Push",
                    isOpen: _ctx.datafalse,
                    showBackdrop: _ctx.datafalse,
                    enablePersistence: _ctx.datafalse
                  }, {
                    default: withCtx(() => [
                      _hoisted_104
                    ]),
                    _: 1
                  }, 8, ["isOpen", "showBackdrop", "enablePersistence"]),
                  createBaseVNode("div", _hoisted_105, [
                    createBaseVNode("div", _hoisted_106, [
                      createVNode(_component_ejs_kanban, {
                        id: "kanban",
                        keyField: "Status",
                        dataSource: _ctx.kanbanData,
                        cardSettings: _ctx.cardSettings
                      }, {
                        default: withCtx(() => [
                          createVNode(_component_e_columns, null, {
                            default: withCtx(() => [
                              createVNode(_component_e_column, {
                                headerText: "To Do",
                                keyField: "Open"
                              }),
                              createVNode(_component_e_column, {
                                headerText: "In Progress",
                                keyField: "InProgress"
                              }),
                              createVNode(_component_e_column, {
                                headerText: "Done",
                                keyField: "Close"
                              })
                            ]),
                            _: 1
                          })
                        ]),
                        _: 1
                      }, 8, ["dataSource", "cardSettings"])
                    ])
                  ])
                ])
              ]),
              createBaseVNode("div", _hoisted_107, [
                createBaseVNode("div", _hoisted_108, [
                  createBaseVNode("div", _hoisted_109, [
                    createBaseVNode("div", _hoisted_110, [
                      createVNode(_component_ejs_toolbar, {
                        id: "toolbar_gantt_options",
                        height: "50px",
                        overflowMode: "Scrollable",
                        scrollStep: "100",
                        clicked: _ctx.onToolbarItemClicked
                      }, {
                        default: withCtx(() => [
                          createVNode(_component_e_items, null, {
                            default: withCtx(() => [
                              createVNode(_component_e_item, {
                                prefixIcon: "e-icons e-menu",
                                tooltipText: "Settings Menu",
                                id: "menugantt"
                              })
                            ]),
                            _: 1
                          })
                        ]),
                        _: 1
                      }, 8, ["clicked"])
                    ])
                  ]),
                  createVNode(_component_ejs_sidebar, {
                    id: "sideGantt",
                    class: "sidebar",
                    ref: "sidebarGantt",
                    width: "600px",
                    target: ".main-gantt",
                    type: "Push",
                    isOpen: _ctx.datafalse,
                    showBackdrop: _ctx.datafalse,
                    enablePersistence: _ctx.datafalse
                  }, {
                    default: withCtx(() => [
                      _hoisted_111
                    ]),
                    _: 1
                  }, 8, ["isOpen", "showBackdrop", "enablePersistence"]),
                  _hoisted_112
                ])
              ]),
              createVNode(_component_ejs_tab, {
                id: "tab",
                heightAdjustMode: "Auto",
                showCloseButton: false
              }, {
                default: withCtx(() => [
                  createVNode(_component_e_tabitems, null, {
                    default: withCtx(() => [
                      createVNode(_component_e_tabitem, {
                        headerTemplate: "CalendarTemplate",
                        content: "#calendartab"
                      }, {
                        CalendarTemplate: withCtx(({}) => [
                          _hoisted_113
                        ]),
                        _: 1
                      }),
                      createVNode(_component_e_tabitem, {
                        headerTemplate: "KanbanTemplate",
                        content: "#kanbantab"
                      }, {
                        KanbanTemplate: withCtx(({}) => [
                          _hoisted_114
                        ]),
                        _: 1
                      }),
                      createVNode(_component_e_tabitem, {
                        headerTemplate: "GanttTemplate",
                        content: "#gantttab"
                      }, {
                        GanttTemplate: withCtx(({}) => [
                          _hoisted_115
                        ]),
                        _: 1
                      })
                    ]),
                    _: 1
                  })
                ]),
                _: 1
              })
            ])
          ])
        ])
      ])
    ])
  ]);
}
var Kanban = /* @__PURE__ */ _export_sfc(_sfc_main$1, [["render", _sfc_render$1]]);
var _sfc_main = defineComponent({
  name: "App",
  components: { Kanban },
  data() {
    return {
      heading: "",
      description: "",
      list: ""
    };
  },
  mounted() {
    this.setPropertiesFromWebpart();
  },
  methods: {
    setPropertiesFromWebpart() {
      this.heading = getPropertyString(this.$root, "heading");
      this.description = getPropertyString(this.$root, "description");
      this.list = getInstanceId(this.$root);
    },
    getInstance() {
      return getInstanceId(this.$root);
    }
  }
});
var App_vue_vue_type_style_index_0_lang = "";
const _hoisted_1 = { id: "kanbanapp" };
function _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {
  const _component_Kanban = resolveComponent("Kanban");
  return openBlock(), createElementBlock("div", _hoisted_1, [
    createVNode(_component_Kanban, { KanbanID: _ctx.list }, null, 8, ["KanbanID"])
  ]);
}


export function renderVue(appID) {
var App = /* @__PURE__ */ _export_sfc(_sfc_main, [["render", _sfc_render]]);
var main = "";
var kanbanapp = createApp(App);
registerLicense("ORg4AjUWIQA/Gnt2VFhhQlJBfV5AQmBIYVp/TGpJfl96cVxMZVVBJAtUQF1hSn5XdEFiXHpecXJWT2dc");
kanbanapp.mount(appID);
}
